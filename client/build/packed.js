/*!eInfo.isTextInput && */
/**
 * @version: 1.0 Alpha-1
 * @author: Coolite Inc. http://www.coolite.com/
 * @date: 2008-04-13
 * @copyright: Copyright (c) 2006-2008, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * @license: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/. 
 * @website: http://www.datejs.com/
 */
/**
 * Document object for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * lib-v8debug - A V8 Debugger wrapper
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 * @author Mike de Boer <mike AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * lib-v8debug - A V8 Debugger wrapper
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Ajax.org Code Editor (ACE)
 *
 * @copyright 2010, Ajax.org Services B.V.
 * @license LGPLv3 <http://www.gnu.org/licenses/lgpl-3.0.txt>
 * @author Fabian Jakobs <fabian AT ajax DOT org>
 */
/**
 * Utilities for the Ajax.org Cloud IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Main IDE object for the Ajax.org Cloud IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Extension manager for the Ajax.org Cloud IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Main Module for the Cloud9 IDE
 *
 * @copyright 2012, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Extension manager for the Ajax.org Cloud IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Extension Manager for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Extension Manager for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * File System Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Dock Panel for the Cloud9 IDE client
 * 
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * File Tree for the Cloud9 IDE
 *
 * @TODO
 * - Load same-level dirs in parallel
 * - Comment everything
 * 
 * @copyright 2012, Cloud9 IDE, Inc.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Refactor Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Adds a menu item with a submenu that lists all recently opened files
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Refactor Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Refactor Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Help menu for the Cloud 9 IDE
 * 
 * @author Garen J. Torikian
 * 
 * @copyright 2011, Cloud9 IDE, Inc
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Extension Manager for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Node Runner Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Node Runner Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Console output for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 * @contributor Sergi Mansilla <sergi AT c9 DOT io>
 */
/**
 * Tab Behaviors for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Tab Sessions for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Keybindings Manager for the Cloud9 IDE
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**\n * @copyright 2010, Ajax.org B.V.\n * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>\n */
/**\n * @copyright 2010, Ajax.org B.V.\n * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>\n */
/**
 * Default Keybindings Help Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Watcher Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * General Purpose Offline Syncing Library
 *
 * @event losechanges   Fires before the offline state is removed.
 *   cancelable: Prevents the application from losing it's recorded offline state.
 * @event beforeoffline Fires before bringing the application offline.
 *   cancelable: Prevents the application from going offline
 * @event afteroffline  Firest after the application is brought offline.
 * @event beforeonline  Fires before bringing the application online.
 *   cancelable: Prevents the application from going online
 * @event afteronline   Fires after the application is brought online.
 * @event beforeload    Fires before loading the offline state into this application.
 *   cancelable: Prevents the application from reloading it's offline state.
 * @event sync          Fires at each sync item's completion.
 *   object:
 *   {Number} position the number of the item in the list that is currently processed.
 *   {Number} length   the total number of items in the list.
 *
 * @property {Number}  progress  the progress of the sync. A number between 0 and 1.
 * @property {Number}  position  the progress of the sync. 
 * @property {Number}  length    the total length of items to sync.
 * @property {Boolean} syncing   whether the application is syncing while coming online.
 * @property {Boolean} onLine    whether the application is online. This property is false during sync.
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * @package webfs
 * @copyright  Copyright(c) 2011 Ajax.org B.V. <info AT ajax.org>
 * @author Tane Piper <tane AT ajax DOT org>
 * @license http://github.com/ajaxorg/webfs/blob/master/LICENSE MIT License
 */
/**
 * Test Panel for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Vim mode for the Cloud9 IDE
 *
 * @author Sergi Mansilla <sergi AT c9 DOT io>
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Vim mode for the Cloud9 IDE
 *
 * @author Sergi Mansilla <sergi AT c9 DOT io>
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * auto test Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * This plugin gives a 'close confirmation' when closing the IDE
 *
 * @copyright 2012, Cloud9 IDE, Inc.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Tools Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Clipboard Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Logger
 * The logger outputs given messages into the console output, properly formatted.
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 * @contributor Sergi Mansilla <sergi AT c9 DOT io>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Searchreplace Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * quicksearch Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Gotoline Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * HTML Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Editor status bar for Cloud9 IDE
 *
 * @TODO
 *
 * Error icon from acebugs
 *
 * @copyright 2012, Cloud9 IDE, Inc.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Console for the Cloud9 IDE
 *
 * The console plugin takes care of rendering a CLI at the bottom of the IDE and
 * of sending user input and parsing and outputting stdout in the
 * console.
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 * @contributor Sergi Mansilla <sergi AT c9 DOT io>
 */
/**
 * Searchinfiles Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Console hints and autcompletion for the Cloud9 IDE
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 * @contributor Sergi Mansilla <sergi AT c9 DOT io>
 */
/**
 * Test Panel for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Beautify extension for the Cloud9 IDE client
 *
 * Reformats the selected code in the current document
 *
 * Processing/formatting code from https://github.com/einars/js-beautify
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Strip whitespace extension for the Cloud9 IDE client
 *
 * Strips whitespace at the end of each line in the current buffer.
 *
 * @author Sergi Mansilla
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Zen mode
 *
 * @TODO
 * - Disabling the extension doesn't call the disable() function
 * - While animating, disable ability to toggle zen mode (better: cancel and reverse the operation)
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Vim mode for the Cloud9 IDE
 *
 * @author Sergi Mansilla <sergi@c9.io>
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Tools Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code Editor for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Live object inspection for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * quickwatch Module for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Code completion for the Cloud9 IDE
 *
 * @copyright 2010, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Guides the user through features of the IDE
 * 
 * @author Matt Pardee
 * @author Garen J. Torikian
 * 
 * @copyright 2011, Cloud9 IDE, Inc
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Identifies some "hot spots" in the IDE that users should be aware of
 * 
 * @author Garen J. Torikian
 * 
 * @copyright 2011, Cloud9 IDE, Inc
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
(function(){(function(){apf={VERSION:"3.0beta",CDN:"",READY:!1,NODE_HIDDEN:101,NODE_VISIBLE:102,NODE_O3:103,KEYBOARD:2,KEYBOARD_MOUSE:!0,SUCCESS:1,TIMEOUT:2,ERROR:3,OFFLINE:4,debug:!1,includeStack:[],initialized:!1,AppModules:[],autoLoadSkin:!1,started:!1,crypto:{},config:{},_GET:{},$asyncObjects:{"apf.oHttp":1,"apf.ajax":1},basePath:"",ns:{apf:"http://ajax.org/2005/aml",aml:"http://ajax.org/2005/aml",xsd:"http://www.w3.org/2001/XMLSchema",xhtml:"http://www.w3.org/1999/xhtml",xslt:"http://www.w3.org/1999/XSL/Transform",xforms:"http://www.w3.org/2002/xforms",ev:"http://www.w3.org/2001/xml-events"},xPathAxis:{self:1,"following-sibling":1,ancestor:1},hasRequireJS:typeof requirejs!="undefined",availHTTP:[],releaseHTTP:function(a){if(apf.brokenHttpAbort)return;if(self.XMLHttpRequestUnSafe&&a.constructor==XMLHttpRequestUnSafe)return;a.onreadystatechange=function(){},a.abort(),this.availHTTP.push(a)},browserDetect:function(){if(this.$bdetect)return;var a=this.$bdetect=function(){var a=navigator.userAgent.toLowerCase(),b=navigator.platform.toLowerCase(),c=a.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],d=c[1]=="ie"&&document.documentMode,e={name:c[1]=="version"?c[3]:c[1],version:d||parseFloat(c[1]=="opera"&&c[4]?c[4]:c[2]),Platform:{name:a.match(/ip(?:ad|od|hone)/)?"ios":(a.match(/(?:webos|android)/)||b.match(/mac|win|linux/)||["other"])[0]},Features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector,json:!!window.JSON},Plugins:{}};return e[e.name]=!0,e[e.name+parseInt(e.version,10)]=!0,e.Platform[e.Platform.name]=!0,e}(),b=navigator.userAgent.toLowerCase();this.isGecko=!!a.firefox,this.isChrome=!!a.chrome,this.isSafari=!!a.safari,this.isSafariOld=a.safari&&a.version===2.4,this.isWebkit=this.isSafari||this.isChrome||b.indexOf("konqueror")!=-1,this.isOpera=!!a.opera,this.isIE=!!a.ie,this.isWin=a.Platform.win,this.isMac=a.Platform.mac,this.isLinux=a.Platform.linux,this.isIphone=a.Platform.ios||b.indexOf("aspen simulator")!=-1,this.isAIR=a.Features.air,this.versionWebkit=this.isWebkit?a.version:null,this.versionGecko=this.isGecko?a.version:null,this.isGecko3=a.firefox3,this.isGecko35=this.isGecko3&&a.version>=3.5,this.versionFF=this.isGecko?a.version:null,this.versionSafari=this.isSafari?a.version:null,this.versionChrome=this.isChrome?a.version:null,this.versionOpera=this.isOpera?a.version:null,this.isIE6=this.isIE&&a.ie6,this.isIE7=this.isIE&&a.ie7,this.isIE8=this.isIE&&a.ie8,this.isIE7Emulate=this.isIE&&document.documentMode&&a.ie7,this.isIE=this.isIE?a.version:null},setCompatFlags:function(){this.TAGNAME=apf.isIE?"baseName":"localName",this.styleSheetRules=apf.isIE?"rules":"cssRules",this.brokenHttpAbort=apf.isIE6,this.canUseHtmlAsXml=apf.isIE,this.supportNamespaces=!apf.isIE,this.cannotSizeIframe=apf.isIE,this.hasConditionCompilation=apf.isIE,this.supportOverflowComponent=apf.isIE,this.hasFlexibleBox=apf.versionGecko>=3||apf.isWebkit&&apf.versionWebkit>=3.2,this.hasFileApi=!!(window.File&&window.FileReader&&window.Blob&&window.FileError),this.hasEventSrcElement=apf.isIE,this.canHaveHtmlOverSelects=!apf.isIE6&&!apf.isIE5,this.hasInnerText=apf.isIE,this.hasMsRangeObject=apf.isIE,this.descPropJs=apf.isIE,this.hasClickFastBug=apf.isIE,this.hasExecScript=window.execScript?!0:!1,this.canDisableKeyCodes=apf.isIE,this.hasTextNodeWhiteSpaceBug=apf.isIE||apf.isIE>=8,this.hasCssUpdateScrollbarBug=apf.isIE,this.canUseInnerHtmlWithTables=!apf.isIE,this.hasSingleResizeEvent=!apf.isIE,this.hasStyleFilters=apf.isIE,this.supportOpacity=!apf.isIE||apf.isIE>=9,this.supportPng24=!apf.isIE6&&!apf.isIE5,this.cantParseXmlDefinition=apf.isIE50,this.hasDynamicItemList=!apf.isIE||apf.isIE>=7,this.canImportNode=apf.isIE,this.hasSingleRszEvent=!apf.isIE,this.hasXPathHtmlSupport=!apf.isIE,this.hasFocusBug=apf.isIE,this.hasHeightAutoDrawBug=apf.isIE&&apf.isIE<8,this.hasReadyStateBug=apf.isIE50,this.dateSeparator=apf.isIE?"-":"/",this.canCreateStyleNode=!apf.isIE,this.supportFixedPosition=!apf.isIE||apf.isIE>=7,this.hasHtmlIdsInJs=apf.isIE&&apf.isIE<8||apf.isWebkit,this.needsCssPx=!apf.isIE,this.hasCSSChildOfSelector=!apf.isIE||apf.isIE>=8,this.hasStyleAnchors=!apf.isIE||apf.isIE>=8,this.styleAttrIsObj=apf.isIE<8,this.hasAutocompleteXulBug=apf.isGecko,this.loadsLocalFilesSync=apf.isIE||apf.isGecko,this.mouseEventBuffer=apf.isIE?20:6,this.hasComputedStyle=typeof document.defaultView!="undefined"&&typeof document.defaultView.getComputedStyle!="undefined",this.w3cRange=Boolean(window.getSelection),this.locale=(apf.isIE?navigator.userLanguage:navigator.language).toLowerCase(),this.characterSet=document.characterSet||document.defaultCharset||"utf-8";var a=document.createElement("div");this.hasContentEditable=typeof a.contentEditable=="string"||typeof a.contentEditable=="boolean",apf.hasContentEditableContainerBug=apf.isWebkit;var b=["transform","OTransform","KhtmlTransform","MozTransform","WebkitTransform"],c=["","O","Khtml","Moz","Webkit"],d=["","o-","khtml-","moz-","webkit-"],e=["transitionend","transitionend","transitionend","transitionend","webkitTransitionEnd"],f=0,g=5;this.supportCSSAnim=!1,this.supportCSSTransition=!1;for(;f<g&&!this.supportCSSAnim;++f){if(typeof a.style[b[f]]=="undefined")continue;this.supportCSSAnim=b[f],this.runtimeStylePrefix=c[f],this.classNamePrefix=d[f],this.cssAnimEvent=e[f]}a=null,delete a,this.supportVML=apf.isIE,this.supportSVG=!apf.isIE||apf.isIE>8,this.supportCanvas=!!document.createElement("canvas").getContext,this.supportCanvasText=!!this.supportCanvas&&typeof document.createElement("canvas").getContext("2d").fillText=="function",this.hasVideo=!!document.createElement("video").canPlayType,this.hasAudio=!!document.createElement("audio").canPlayType,this.supportHashChange="onhashchange"in self&&(!apf.isIE||apf.isIE>=8);if(self.XMLHttpRequest){var h=new XMLHttpRequest;this.hasXhrProgress=!!h.upload;if(this.hasXhrBinary=!!h.sendAsBinary||!!h.upload)this.hasHtml5File=!!File&&!!File.prototype.getAsDataURL,this.hasHtml5FileSlice=!!File&&!!File.prototype.slice}else this.hasXhrProgress=this.hasXhrBinary=this.hasHtml5File=this.hasHtml5FileSlice=!1;this.windowHorBorder=this.windowVerBorder=apf.isIE8&&(!self.frameElement||parseInt(self.frameElement.frameBorder))?4:0,this.enableAnim=!apf.isIE||apf.isIE>8,this.animSteps=apf.isIE?.3:1,this.animInterval=apf.isIE?7:1,this.CSSFLOAT=apf.isIE?"styleFloat":"cssFloat",this.CSSPREFIX=apf.isGecko?"Moz":apf.isWebkit?"webkit":"",this.CSSPREFIX2=apf.isGecko?"-moz":apf.isWebkit?"-webkit":"",this.INLINE=apf.isIE&&apf.isIE<8?"inline":"inline-block",this.needZoomForLayout=apf.isIE&&apf.isIE<8,this.maxHttpRetries=apf.isOpera?0:3,this.percentageMatch=new RegExp,this.percentageMatch.compile("([\\-\\d\\.]+)\\%","g"),this.reMatchXpath=new RegExp,this.reMatchXpath.compile("(^|\\|)(?!\\@|[\\w-]+::)","g")},hasGeoLocation:function(){return!1},extend:function(a,b){var c,d,e=!a.notNull;if(arguments.length==2){for(c in b)if(e||b[c])a[c]=b[c];return a}for(d=1;d<arguments.length;d++){b=arguments[d];for(c in b)if(e||b[c])a[c]=b[c]}return a},$extend:function(a,b){for(var c in b)a[c]=b[c];return a},ajax:function(){var a=function(){return this.oHttp.get.apply(this.oHttp,arguments)};return a.exec=function(a,b,c,d){if(a=="ajax"&&b[0]){var e=b[1]||{};return this.oHttp.exec(e.method||"GET",[b[0]],e.callback,apf.extend(d||{},e))}},a}(),start:function(){this.started=!0;var a=location.href.split("#")[0].split("?")[0];this.host=location.hostname&&a.replace(/(\/\/[^\/]*)\/.*$/,"$1"),this.hostPath=a.replace(/\/[^\/]*$/,"")+"/",this.setCompatFlags();if(apf.onstart&&apf.onstart()===!1)return!1;this.isIE&&apf.runIE(),apf.isWebkit&&apf.runWebkit(),this.oHttp=new this.http,this.Init.addConditional(this.parseAppMarkup,apf,["body"]);try{apf.isIE&&document.execCommand("BackgroundImageCache",!1,!0)}catch(b){}this.started=!0,this.load_done&&this.execDeferred(),this.root=!0;for(var c=0;c<apf.$required.length;c++)apf.include(apf.$required[c]);apf.require=apf.include},nsqueue:{},findPrefix:function(a,b){var c;if(a.nodeType==9){if(!a.documentElement)return!1;if(a.documentElement.namespaceURI==b)return a.prefix||a.scopeName;c=a.documentElement}else{if(a.namespaceURI==b)return a.prefix||a.scopeName;c=a.ownerDocument.documentElement;if(c&&c.namespaceURI==b)return a.prefix||a.scopeName;while(a.parentNode){a=a.parentNode;if(a.namespaceURI==b)return a.prefix||a.scopeName}}if(c)for(var d=0;d<c.attributes.length;d++)if(c.attributes[d].nodeValue==b)return c.attributes[d][apf.TAGNAME];return!1},importClass:function(a,b,c){if(!a)throw new Error(apf.formatErrorString(1018,null,"importing class","Could not load reference. Reference is null"));if(!b)return apf.jsexec(a.toString(),c);var d=a.toString().replace(/^\s*function\s*\w*\s*\([^\)]*\)\s*\{/,"").replace(/\}\s*$/,"");return apf.jsexec(d,c)},toString:function(){return"[Ajax.org Platform (apf)]"},all:[],implement:function(a){if(arguments.length==1)a.call(this);else for(var b,c=0,d=arguments.length;c<d;c++)b=arguments[c],arguments[c].call(this);return this},uniqueHtmlIds:0,setUniqueHtmlId:function(a){var b;return a.setAttribute("id",b="q"+this.uniqueHtmlIds++),b},getUniqueId:function(){return this.uniqueHtmlIds++},lookup:function(a){return this.all[a]},findHost:function(a){while(a&&a.parentNode){try{if((a.host||a.host===!1)&&typeof a.host!="string")return a.host}catch(b){}a=a.parentNode}return null},setReference:function(a,b){return self[a]&&self[a].hasFeature?0:self[a]=b},console:{debug:function(a,b,c){},time:function(a,b,c){},log:function(a,b,c){},info:function(a,b,c){},warn:function(a,b,c){},error:function(a,b,c){},dir:function(a){var b=apf.$debugwin.$serializeObject(a,"Inspected via apf.console.dir");typeof b=="string"?this.write(b,"custom",null,null,null,!0):this.write(a?"Could not serialize object: "+b.message:a,"error",null,null,null,!0)}},html_entity_decode:function(a){return a},htmlentities:function(a){return a},formatErrorString:function(a,b,c,d,e,f,g){return apf.lastErrorMessage=d,d},getDirname:function(a){return((a||"").match(/^([^#]*\/)[^\/]*(?:$|\#)/)||{})[1]},getFilename:function(a){return((a||"").split("?")[0].match(/(?:\/|^)([^\/]+)$/)||{})[1]},getAbsolutePath:function(a,b){return b&&b.charAt(0)=="/"?b:!b||!a||b.match(/^\w+\:\/\//)?b:a.replace(/\/$/,"")+"/"+b.replace(/^\//,"")},getCtrlKey:function(a){return apf.isMac?a.metaKey:a.ctrlKey},include:function(a,b,c,d,e){var f=b?apf.getAbsolutePath(apf.basePath||"",a):a,g=document.getElementsByTagName("head")[0],h=document.createElement("script");return c&&h.setAttribute("_apf_type",c),d?apf.isIE?window.execScript(d):h.text=d:h.src=f,g.appendChild(h),e&&(h[apf.isIE?"onreadystatechange":"onload"]=e),h},$required:[],require:function(){var a=apf.getDirname(location.href),b=0,c=arguments.length;for(;b<c;b++)this.$required.push(apf.getAbsolutePath(a,arguments[b]))},Init:{queue:[],cond:{combined:[]},done:{},add:function(a,b){this.inited?a.call(b):a&&this.queue.push([a,b])},addConditional:function(a,b,c){if(typeof c!="string"){if(this.checkCombined(c))return a.call(b);this.cond.combined.push([a,b,c])}else self[c]?a.call(b):(this.cond[c]||(this.cond[c]=[]),this.cond[c].push([a,b]),this.checkAllCombined())},checkAllCombined:function(){for(var a=0;a<this.cond.combined.length;a++){if(!this.cond.combined[a])continue;this.checkCombined(this.cond.combined[a][2])&&(this.cond.combined[a][0].call(this.cond.combined[a][1]),this.cond.combined[a]=null)}},checkCombined:function(a){for(var b=0;b<a.length;b++)if(!this.done[a[b]])return!1;return!0},run:function(a){this.inited=this.done[a]=!0,this.checkAllCombined();var b=a?this.cond[a]:this.queue;if(!b)return;for(var c=0;c<b.length;c++)b[c][0].call(b[c][1])}},parseStrategy:0,parseAppMarkup:function(a){var b=!1;if(document.documentElement.getAttribute("skipParse")=="true")return;if(b&&document.documentElement.outerHTML.split(">",1)[0].indexOf(apf.ns.aml)==-1)return!1;if(this.parseStrategy==21||!this.parseStrategy&&!a)return apf.oHttp.get((apf.alternativeAml||document.body&&document.body.getAttribute("xmlurl")||location.href).split(/#/)[0],{callback:function(a,b,c){if(b!=apf.SUCCESS){var d=new Error(apf.formatErrorString(0,null,"Loading XML application data","Could not load XML from remote source: "+c.message));if(c.tpModule.retryTimeout(c,b,null,d)===!0)return!0;throw d}var e=a.replace(/\<\!DOCTYPE[^>]*>/,"").replace(/^[\r\n\s]*/,"");apf.supportNamespaces||(e=e.replace(/xmlns\=\"[^"]*\"/g,""));if(self.ERROR_HAS_OCCURRED)return;if(apf.isIE)document.body.innerHTML="";else{var f=document.body.childNodes;for(var g=f.length-1;g>=0;g--)f[g].parentNode.removeChild(f[g])}document.documentElement.style.display="block",document.body.style.display="block",apf.initialize(e)},ignoreOffline:!0});document.body.style.display="block",self.ERROR_HAS_OCCURRED||apf.initialize(a.outerHTML||a.xml)},namespaces:{},setNamespace:function(a,b){this.namespaces[a]=b,b.namespaceURI=a},initialize:function(a){apf.console.info("Initializing..."),clearInterval(apf.Init.interval),apf.Init.run();var b=parseFloat(apf.getStyle(document.body,"marginTop"));apf.doesNotIncludeMarginInBodyOffset=document.body.offsetTop!==b,apf.window.init(a)},execDeferred:function(){var a=apf.load_events.length;while(a--)apf.load_events.shift()()},load_events:[],load_timer:null,load_done:!1,load_init:null,addDomLoadEvent:function(a){this.$bdetect||this.browserDetect();if(apf.load_done)return a();apf.load_init||(apf.load_init=function(){if(apf.load_done)return;clearInterval(apf.load_timer),apf.load_timer=null,apf.load_done=!0,apf.started&&apf.execDeferred()}),apf.load_events.push(a);if(a&&apf.load_events.length==1){var b=document,c="undefined";if(typeof b.readyState!=c&&b.readyState=="complete"||b.getElementsByTagName("body")[0]||b.body)return apf.load_init();if(b.addEventListener&&!apf.isOpera)window.addEventListener("DOMContentLoaded",apf.load_init,!1);else if(apf.isIE&&window==top)apf.load_timer=setInterval(function(){try{b.documentElement.doScroll("left")}catch(a){$setTimeout(arguments.callee,0);return}apf.load_init()},10);else if(apf.isOpera)b.addEventListener("DOMContentLoaded",function(){apf.load_timer=setInterval(function(){for(var a=0,c=b.styleSheets.length;a<c;a++)if(b.styleSheets[a].disabled)return;apf.load_init()},10)},!1);else if(apf.isWebkit&&!apf.isIphone){var d=b.getElementsByTagName("link"),e=d.length,f;for(;e>=0;e++)(!d[e]||d[e].getAttribute("rel")!="stylesheet")&&d.splice(e,0);f=d.length,apf.load_timer=setInterval(function(){/loaded|complete/.test(b.readyState)&&b.styleSheets.length==f&&apf.load_init()},10)}else{var g=window.onload;window.onload=function(){apf.load_init(),g&&g()}}}},fireEvent:function(a,b,c,d){a.dispatchEvent?a.dispatchEvent(b,c,d):a.fireEvent("on"+b,c)},addListener:function(a,b,c,d){return a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c),this},removeListener:function(a,b,c,d){return a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c),this},stopEvent:function(a){return this.stopPropagation(a).preventDefault(a),!1},stopPropagation:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,this},preventDefault:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this},unload:function(a){this.isDestroying=!0,this.popup.destroy();var b,c=0,d=this.all.length;for(;c<d;c++)b=this.all[c],b&&b!=a&&b.destroy&&!b.apf&&b.destroy(!1);for(c=0,d=this.availHTTP.length;c<d;c++)this.availHTTP[c]=null;this.availHTTP.length=0,apf.xmldb&&apf.xmldb.unbind(apf.window),this.isDestroying=!1}};var $xmlns=function(a,b,c,d){return apf.supportNamespaces?a.getElementsByTagNameNS(c,b):(d||(d=apf.findPrefix(a,c)),a.style||a==document?a.getElementsByTagName(b):(d&&(a.nodeType==9?a:a.ownerDocument).setProperty("SelectionNamespaces","xmlns:"+d+"='"+c+"'"),a.selectNodes(".//"+(d?d+":":"")+b)))},$setTimeout=setTimeout,$setInterval=setInterval;apf.setTimeout=function(a,b){return apf.$eventDepth++,$setTimeout(function(){a(),--apf.$eventDepth==0&&apf.queue.empty()},b)},document.documentElement.className+=" has_apf",document.documentElement.style.display="none",apf.browserDetect(),apf.Init.run("apf"),apf.Class=function(){},apf.Class.prototype=new function(){var FUN="function",OBJ="object",UNDEF="undefined",SEL="model",PROP="prop.",MODEL="model",VALUE="value";this.$regbase=0,this.hasFeature=function(a){return this.$regbase&a},this.$initStack=[],this.$bufferEvents=[],this.$init=function(a,b,c){if(typeof a==FUN||a===!0)return this.$bufferEvents=this.$bufferEvents.slice(),a===!0?this:(this.$initStack=this.$initStack.slice(),this.$initStack.push(a),this);this.addEventListener=realAddEventListener,this.nodeType!=2&&(this.$uniqueId=apf.all.push(this)-1),this.$captureStack={},this.$eventsStack={},this.$funcHandlers={};var d=0,e=this.$initStack.length;for(;d<e;d++)this.$initStack[d].apply(this,arguments);for(d=0,e=this.$bufferEvents.length;d<e;d++)this.addEventListener.apply(this,this.$bufferEvents[d]);return delete realAddEventListener,delete this.$initStack,delete this.$bufferEvents,c&&(c.htmlNode||this.nodeFunc==apf.NODE_HIDDEN)&&(this.$pHtmlNode=c.htmlNode,this.ownerDocument&&this.ownerDocument.$domParser&&this.ownerDocument.$domParser.$continueParsing(this),apf.queue.empty()),this},this.implement=apf.implement,this.$handlePropSet=function(a,b){this[a]=b},this.$bindProperty=function(a,b,c,d,e){if(!d)return b.$handlePropSet(c,this[a]);var f=PROP+a,g,h,i;(this.$eventsStack[f]||(this.$eventsStack[f]=[])).push(g=function(a){if(h)return;h=!0;try{if(d.asyncs)return d.call(b,b.xmlRoot,function(a){b.setProperty(c,a,!0,!1,10),h=!1});var e=d.call(b,b.xmlRoot)}catch(a){apf.console.warn("[331] Could not execute binding for property "+c+"\n\n"+a.message),h=!1;return}b.setProperty(c,e,!0,!1,10),h=!1});if(e){f=PROP+c;var j=this;(b.$eventsStack[f]||(b.$eventsStack[f]=[])).push(g.recip=function(){if(h)return;h=!0,j.setProperty(a,b[c],!1,!1,10),h=!1})}return g},this.$attrExcludePropBind=!1,this.$setDynamicProperty=function(prop,pValue){var exclNr=this.$attrExcludePropBind[prop],options;SEL.indexOf(prop)>-1||exclNr==3?options={xpathmode:2}:exclNr==2?options={nostring:!0}:exclNr===0&&(options={parsecode:!0}),this.liveedit&&((options||(options={})).liveedit=!0);var fParsed=apf.lm.compile(pValue,options);prop==MODEL&&((this.$modelParsed=fParsed).instruction=pValue);if(fParsed.type==2)return this[prop]=!pValue,this.setProperty(prop,fParsed.str,null,null,10);var check=1;if(exclNr==2||fParsed.xpaths.length&&exclNr!=1)this.hasFeature(apf.__DATABINDING__)||(this.implement(apf.StandardBinding),this.$attrExcludePropBind[prop]==1&&(check=0)),check&&this.$addAttrBind(prop,fParsed,pValue);var matches=exclNr&&exclNr!=3&&prop!=MODEL?{}:fParsed.props,found=!1,_self=this,o,node,bProp,p;for(p in matches){o=p.split(".");if(o.length>2){bProp=o.pop();try{node=eval(o.join("."))}catch(e){arguments[2]?apf.console.warn("[287] Could not execute binding test : "+pValue.replace(/</g,"&lt;")+"\n\n"+e.message):apf.queue.add(prop+":"+this.$uniqueId,function(){_self.$clearDynamicProperty(prop),_self.$setDynamicProperty(prop,pValue,!0)});continue}!node||typeof node!=OBJ||!node.$regbase&&node.$regbase!==0?(bProp=o[1],node=self[o[0]]):o.push(bProp)}else bProp=o[1],node=self[o[0]]||o[0]=="this"&&this;if(!node){if(arguments[2]){apf.console.warn("[287] Could not create property binding:  '"+o[0]+"' does not exist. \n"+pValue.replace(/</g,"&lt;").substr(0,400));var _self=this;apf.nameserver.waitFor(o[0],function(){_self.$setDynamicProperty(prop,pValue)});return}apf.queue.add(prop+":"+this.$uniqueId,function(){_self.$clearDynamicProperty(prop),_self.$setDynamicProperty(prop,pValue,!0)});return}if(!node.$bindProperty)continue;this.$funcHandlers[prop]||(this.$funcHandlers[prop]=[]);var last;this.$funcHandlers[prop].push(last={amlNode:node,prop:bProp,handler:node.$bindProperty(bProp,this,prop,fParsed,fParsed.type==4&&SEL.indexOf(prop)==-1)}),found=!0}if(found)last.handler({initial:!0});else{if(exclNr)return this.setProperty(prop,pValue,null,null,10);try{if(fParsed.asyncs)return fParsed.call(this,this.xmlRoot,function(a){_self.setProperty(prop,a,!0,null,10)});var value=fParsed.call(this,this.xmlRoot)}catch(e){apf.console.warn("[331] Could not execute binding test or: "+pValue.replace(/</g,"&lt;")+"\n\n"+e.message);return}this[prop]=!value,this.setProperty(prop,value,!0,null,10)}},this.$clearDynamicProperty=function(a){this.$removeAttrBind&&this.$removeAttrBind(a),this.$inheritProperties&&delete this.$inheritProperties[a],a==MODEL&&(this.$modelParsed=null);var b,c,d,e=this.$funcHandlers[a];if(e&&typeof e!=FUN){for(c=0,d=e.length;c<d;c++)(b=e[c]).amlNode.removeEventListener(PROP+b.prop,b.handler),b.handler&&b.handler.recip&&this.removeEventListener(PROP+a,b.handler.recip);delete this.$funcHandlers[a]}},this.getAvailableProperties=function(){return this.$supportedProperties.slice()},this.setProperty=function(a,b,c,d,e){var f,g,h,i,j,k,l=this[a],m=PROP+a;try{var n=typeof b==OBJ?b!=(typeof l==OBJ?l:null):this.$booleanProperties&&this.$booleanProperties[a]?l!=apf.isTrue(b):String(l)!==String(b)}catch(i){var n=!0}if(n){if(!c&&typeof b!=OBJ&&!(f=this.$attrExcludePropBind[a])&&(g=this.$attrBindings&&this.$attrBindings[a]||a!=VALUE&&this.xmlRoot&&this.$bindings[a]&&this.$bindings[a][0])&&g.cvalue.type==3)return apf.setNodeValue(this.$getDataNode(a.toLowerCase(),this.xmlRoot,!0),b,!0);d&&!this.$funcHandlers[a]&&this.setAttribute(a,b,!0);if(this.$handlePropSet(a,b,c)===!1)return;b=this[a]}(h=this.$eventsStack[m])&&this.dispatchEvent(m,{prop:a,value:b,oldvalue:l,changed:n})===!1&&(i.returnValue=!1);if((aci||(aci=apf.config.$inheritProperties))[a]){var o=b===""||typeof b=="undefined";if(e!=10&&!b){delete this.$inheritProperties[a];if(this.$setInheritedAttribute&&this.$setInheritedAttribute(a))return}else e!=10&&(this.$inheritProperties[a]=e||-1);if(this.$amlLoaded&&(!i||i.returnValue!==!1)&&this.childNodes){var p=aci[a];(function q(c){var d,f,g,h;for(d=0,f=c.length;d<f;d++){g=c[d];if(g.nodeType!=1&&g.nodeType!=7)continue;h=g.$inheritProperties[a];if(p==1&&!h)q(g.childNodes);else if(!(h<0)){if(h==3||e==3){var i=g[a];g[a]=null}g.setProperty(a,h!=3?b:i,!1,!1,h||2)}}})(this.childNodes)}}return b};var aci;this.getProperty=function(a){return this[a]},apf.$eventDepth=0,this.$eventDepth=0,this.dispatchEvent=function(a,b,c){var d,e,f,g,h;if(!apf.AmlEvent)return;apf.$eventDepth++,this.$eventDepth++,c=b&&b.name?b:c;if((!c||!c.currentTarget)&&(!b||!b.currentTarget)){(b||(b={})).currentTarget||(b.currentTarget=this);if(d=this.$captureStack[a])for(g=0,h=d.length;g<h;g++)f=d[g].call(this,c||(c=new apf.AmlEvent(a,b))),typeof f!=UNDEF&&(e=f)}if(b&&b.captureOnly)return c&&typeof c.returnValue!=UNDEF?c.returnValue:e;this["on"+a]&&(e=this["on"+a].call(this,c||(c=new apf.AmlEvent(a,b))));if(d=this.$eventsStack[a])for(g=0,h=d.length;g<h;g++){if(!d[g])continue;f=d[g].call(this,c||(c=new apf.AmlEvent(a,b))),typeof f!=UNDEF&&(e=f)}(c&&c.bubbles&&!c.cancelBubble||!c&&b&&b.bubbles)&&this!=apf&&(f=(this.parentNode||this.ownerElement||apf).dispatchEvent(a,b,c),typeof f!=UNDEF&&(e=f)),--apf.$eventDepth==0&&this.ownerDocument&&!this.ownerDocument.$domParser.$parseContext&&!apf.isDestroying&&apf.loaded&&apf.queue&&apf.queue.empty(),this.$eventDepth--;if(b)try{delete b.currentTarget}catch(i){b.currentTarget=null}return c&&typeof c.returnValue!=UNDEF?c.returnValue:e},this.addEventListener=function(a,b,c){this.$bufferEvents.push([a,b,c])};var realAddEventListener=function(a,b,c){a.substr(0,2)=="on"&&(a=a.substr(2));var d,e=c?this.$captureStack:this.$eventsStack;(d=e[a])||(d=e[a]=[]);if(d.indexOf(b)>-1)return;d.unshift(b);var f;(f=this.$eventsStack["$event."+a])&&f[0].call(this,b)};this.removeEventListener=function(a,b,c){var d=(c?this.$captureStack:this.$eventsStack)[a];d&&(this.$eventDepth&&(d=(c?this.$captureStack:this.$eventsStack)[a]=d.slice()),d.remove(b),d.length||delete (c?this.$captureStack:this.$eventsStack)[a])},this.hasEventListener=function(a){return this.$eventsStack[a]&&this.$eventsStack[a].length>0},this.destroy=function(a,b){if(typeof this.$uniqueId==UNDEF&&this.nodeType!=2)return;this.$amlLoaded=!1,this.$amlDestroyed=!0,this.$destroy&&this.$destroy(),this.dispatchEvent("DOMNodeRemoved",{relatedNode:this.parentNode,bubbles:!apf.isDestroying}),this.dispatchEvent("DOMNodeRemovedFromDocument"),apf.all[this.$uniqueId]=undefined;if(!this.nodeFunc&&!this.nodeType){try{if(this.id||this.name)self[this.id||this.name]=null}catch(c){}return}this.$ext&&!this.$ext.isNative&&(this.nodeType==1&&this.localName!="a"&&(this.$ext.oncontextmenu=this.$ext.host=null),b&&this.localName!="collection"&&this.$ext.parentNode&&this.$ext.parentNode.removeChild(this.$ext)),this.$int&&!this.$int.isNative&&this.$int.nodeType==1&&this.localName!="a"&&(this.$int.host=null),this.$aml=null;if(a&&this.childNodes){var d=this.childNodes;for(f=d.length-1;f>=0;f--)d[f].destroy&&d[f].destroy(!0,b&&this.localName=="collection");this.childNodes=null}this.parentNode&&this.removeNode?this.removeNode():this.ownerElement&&!this.ownerElement.$amlDestroyed&&this.ownerElement.removeAttributeNode(this),this.$focussable&&this.focussable&&apf.window.$removeFocus(this);if(this.attributes){var e=this.attributes;for(var f=e.length-1;f>=0;f--)this.$clearDynamicProperty(e[f].nodeName),e[f].destroy()}try{if(this.id||this.name)self[this.id||this.name]=null}catch(c){}apf.nameserver.remove(this.localName,this)}},apf.extend(apf,(new apf.Class).$init()),apf.Init.run("class"),apf.color={colorshex:{aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662680,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14184595,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fixHSB:function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},fixRGB:function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},fixHex:function(a,b){a=a.toLowerCase().replace(/[^a-f0-9]/g,"");var c=6-a.length;if(c>0){var d="0",e=[],f=0;b&&(d=a.charAt(a.length-1),e.push(a));for(;f<c;f++)e.push(d);b||e.push(a),a=e.join("")}return a},hexToRGB:function(a){return a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16),{r:a>>16,g:(a&65280)>>8,b:a&255}},hexToHSB:function(a){return this.RGBToHSB(this.hexToRGB(a))},RGBToHSB:function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,d==0,b.s=d!=0?255*e/d:0,b.s!=0?a.r==d?b.h=(a.g-a.b)/e:a.g==d?b.h=2+(a.b-a.r)/e:b.h=4+(a.r-a.g)/e:b.h=-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b},HSBToRGB:function(a){var b={},c=Math.round(a.h),d=Math.round(a.s*255/100),e=Math.round(a.b*255/100);if(d==0)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;c==360&&(c=0),c<60?(b.r=f,b.b=g,b.g=g+h):c<120?(b.g=f,b.b=g,b.r=f-h):c<180?(b.g=f,b.r=g,b.b=g+h):c<240?(b.b=f,b.r=g,b.g=f-h):c<300?(b.b=f,b.g=g,b.r=g+h):c<360?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},RGBToHex:function(a){return("00000"+(a.r<<16|a.g<<8|a.b).toString(16)).slice(-6)},HSBToHex:function(a){return this.RGBToHex(this.HSBToRGB(a))}},apf.asyncForEach=function(a,b,c){var d=0,e=a.length;if(!e)return c(null,[]);b(a[d],function f(g){if(g)return c(g);d++,d<e?b(a[d],f,d):c(null)},d)},apf.asyncWhile=function(a,b,c){var d=0;b(d,function e(f){if(f)return c?c(f,d):null;++d,a(d)?b(d,e):c&&c(null,d)})},apf.asyncMap=function(a,b,c){var d=0,e=a.length;if(!e)return c(null,[]);var f=[];async(a[d],function g(b,h){if(b)return c(b);f[d]=h,d++,d<e?async(a[d],g):c(null,f)})},apf.asyncChain=function(a){function d(){var e=a[b++];b==c?e():e(d)}var b=0,c=a.length;d()},apf.setcookie=function(a,b,c,d,e,f){var g=a+"="+escape(b)+";";return c&&(g+="expires="+(new Date(c+(new Date).getTimezoneOffset()*60)).toGMTString()+";"),d&&(g+="path="+d+";"),e&&(g+="domain="+e+";"),f&&(g+="secure"),document.cookie=g,b},apf.getcookie=function(a){var b=document.cookie.split("; ");for(var c=0;c<b.length;c++){var d=b[c].split("=");if(a==d[0])return unescape(d[1])}return""},apf.delcookie=function(a,b){document.cookie=a+"=blah; expires=Fri, 31 Dec 1999 23:59:59 GMT;"+(b?"domain="+b:"")};if(typeof isFinite=="undefined")function isFinite(a){return a+1!=a}apf.NUMBER=1,apf.BOOLEAN=2,apf.STRING=3,apf.ARRAY=4,apf.DATE=5,apf.REGEXP=6,apf.FUNCTION=7,Array.prototype.dataType=apf.ARRAY,Number.prototype.dataType=apf.NUMBER,Date.prototype.dataType=apf.DATE,Boolean.prototype.dataType=apf.BOOLEAN,String.prototype.dataType=apf.STRING,RegExp.prototype.dataType=apf.REGEXP,Function.prototype.dataType=apf.FUNCTION,apf.getCgiString=function(a,b,c){function e(a,b){var c;if(apf.isArray(a))for(var f=0;f<a.length;f++)e(a[f],b+"%5B%5D");else if(typeof a=="object")for(c in a){if(apf.isSafariOld&&(!a[c]||typeof p[c]!="object"))continue;if(typeof a[c]=="function")continue;e(a[c],b+"%5B"+encodeURIComponent(c)+"%5D")}else d.push(b+"="+encodeURIComponent(a))}var d=[];if(b){d.push("func="+c);for(var f=0;f<a[0].length;f++)e(a[0][f],"f%5B"+f+"%5D")}else for(prop in a){if(apf.isSafariOld&&(!a[prop]||typeof a[prop]=="function"))continue;e(a[prop],prop)}return d.join("&")},apf.fromCgiString=function(a){if(!a)return!1;var b={};a=a.split("&");for(var c,d=0;d<a.length;d++){c=a[d].split("="),c[0]=decodeURIComponent(c[0]);var e=c[0].replace(/\]/g,"").split("["),f=b;for(var g=0;g<e.length;g++)if(f[e[g]])f=f[e[g]];else{if(e.length==g+1){e[g]?f[e[g]]=decodeURIComponent(c[1]):f.push(decodeURIComponent(c[1]));break}f[e[g]]=e[g+1]?{}:[],f=f[e[g]]}}return b},Function.prototype.extend=function(){return apf.extend.apply(this,[this].concat(Array.prototype.slice.call(arguments))),this},Function.prototype.bindWithEvent=function(){var a=this,b=Array.prototype.slice.call(arguments),c=b.shift(),d=b.shift();return function(d){return d||(d=window.event),a.apply(c,[d].concat(b).concat(Array.prototype.slice.call(arguments)))}},Function.prototype.bind||(Function.prototype.bind=function(a){if(typeof this!="function")throw new TypeError;var b=Array.prototype.slice.call(arguments,1),c=this,d=Array.prototype.concat,e=function(){return c.apply(this instanceof f?this:a,d.apply(b,arguments))},f=function(){};return f.prototype=c.prototype,e.prototype=new f,e}),Array.prototype.copy=function(){var a=[];for(var b=0,c=this.length;b<c;b++)a[b]=this[b]&&this[b].copy?this[b].copy():this[b];return a},Array.prototype.merge=function(){for(var a=0,b=arguments.length;a<b;a++)for(var c=0,d=arguments[a].length;c<d;c++)this.push(arguments[a][c])},Array.prototype.arrayAdd=function(){var a=this.copy();for(var b=0,c=arguments.length;b<c;b++)for(var d=0,e=a.length;d<e;d++)a[d]+=arguments[b][d];return a},Array.prototype.equals=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]!=a[b])return!1;return!0},Array.prototype.makeUnique=function(){var a,b,c=[];for(a=0,b=this.length;a<b;a++)c.indexOf(this[a])==-1&&c.push(this[a]);this.length=0;for(a=0,b=c.length;a<b;a++)this.push(c[a]);return this},Array.prototype.contains=function(a,b){return this.indexOf(a,b)!=-1},Array.prototype.indexOf=Array.prototype.indexOf||function(a,b){var c=this.length;for(var d=b<0?Math.max(0,c+b):b||0;d<c;d++)if(this[d]===a)return d;return-1},Array.prototype.lastIndexOf=Array.prototype.lastIndexOf||function(a,b){var c=this.length;for(var d=b>=c?c-1:b<0?b+c:c-1;d>=0;d--)if(this[d]===a)return d;return-1},Array.prototype.pushUnique=function(){var a,b=0,c=arguments.length;for(;b<c;++b)a=arguments[b],this.indexOf(a)==-1&&this.push(a);return this},Array.prototype.search=function(){for(var a=0,b=arguments.length;a<b;a++){if(typeof this[a]!="array")continue;for(var c=0;c<b;c++){if(this[a][c]!=arguments[c])break;if(c==b-1)return this[a]}}},Array.prototype.each=Array.prototype.forEach=Array.prototype.forEach||function(a){for(var b=0,c=this.length;b<c;b++)if(a.call(this,this[b],b,this)===!1)break;return this},Array.prototype.remove=function(a){for(var b=this.length-1;b>=0;b--){if(this[b]!=a)continue;this.splice(b,1)}return this},Array.prototype.removeIndex=function(a){return this.length?this.splice(a,1):null},Array.prototype.insertIndex=function(a,b){this.splice(b,0,a)},Array.prototype.invert=Array.prototype.reverse=Array.prototype.reverse||function(){var a=this.length-1;for(var b,c=0;c<Math.ceil(.5*a);c++)b=this[c],this[c]=this[a-c],this[a-c]=b;return this},Array.prototype.filter=Array.prototype.filter||function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++)a.call(b,this[d],d,this)&&c.push(this[d]);return c},Array.prototype.every=Array.prototype.every||function(a,b){for(var c=0,d=this.length;c<d;c++)if(!a.call(b,this[c],c,this))return!1;return!0},Array.prototype.map=Array.prototype.map||function(a,b){var c=[];for(var d=0,e=this.length;d<e;d++)c[d]=a.call(b,this[d],d,this);return c},Array.prototype.some=Array.prototype.some||function(a,b){for(var c=0,d=this.length;c<d;c++)if(a.call(b,this[c],c,this))return!0;return!1},Number.prototype.toPrettyDigit=Number.prototype.toPrettyDigit||function(){var a=this.toString();return a.length==1?"0"+a:a},RegExp.prototype.getNativeFlags=function(){return(this.global?"g":"")+(this.ignoreCase?"i":"")+(this.multiline?"m":"")+(this.extended?"x":"")+(this.sticky?"y":"")},RegExp.prototype.addFlags=function(a){return new RegExp(this.source,(a||"")+this.getNativeFlags())},String.prototype.uCaseFirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1)},String.prototype.trim=function(){return this.replace(/[\s\n\r]*$/,"").replace(/^[\s\n\r]*/,"")},String.prototype.repeat=function(a){return Array(a+1).join(this)},String.prototype.count=function(a){return this.split(a).length-1},String.prototype.stripTags=function(){return this.replace(/<\/?[^>]+>/gi,"")},String.prototype.escape=function(){return escape(this)},String.prototype.toXml=function(){var a=apf.getXml("<root>"+this+"</root>");if(a.childNodes.length==1)return a.childNodes[0];var b=a.ownerDocument.createDocumentFragment(),c=a.childNodes;while(c.length)b.appendChild(c[0]);return b},typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement=="function"&&(String.prototype.escapeHTML=function(){return this.escapeHTML.text.data=this,this.escapeHTML.div.innerHTML},String.prototype.unescapeHTML=function(){var a=document.createElement("div");a.innerHTML=this.stripTags();if(a.childNodes[0]){if(a.childNodes.length>1){var b=[];for(var c=0;c<a.childNodes.length;c++)b.push(a.childNodes[c].nodeValue);return b.join("")}return a.childNodes[0].nodeValue}return""},String.prototype.escapeHTML.div=document.createElement("div"),String.prototype.escapeHTML.text=document.createTextNode(""),String.prototype.escapeHTML.div.appendChild(String.prototype.escapeHTML.text),"<\n>".escapeHTML()!=="&lt;\n&gt;"&&(String.prototype.escapeHTML=null),"&lt;\n&gt;".unescapeHTML()!=="<\n>"&&(String.prototype.unescapeHTML=null)),String.prototype.escapeHTML||(String.prototype.escapeHTML=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),String.prototype.unescapeHTML||(String.prototype.unescapeHTML=function(){return this.stripTags().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}),String.prototype.truncate=function(a,b){return this.length>=a?this.substring(0,a-(b?4:1))+(b?"...":""):this},String.prototype.pad=function(a,b,c){return c?(this+Array(a).join(b)).slice(0,a):(Array(a).join(b)+this).slice(-a)},apf.PAD_LEFT=!1,apf.PAD_RIGHT=!0,String.prototype.splitSafe=function(a,b,c){return(c&&this.toLowerCase()||this).replace(/(?:^\s+|\n|\s+$)/g,"").split(new RegExp("[\\s ]*"+a+"[\\s ]*","g"),b||999)},String.prototype.appendRandomNumber=function(a){for(var b=[],c=1;c<=a;c++)b.push(apf.randomGenerator.generate(1,9));return this.toString()+b.join("")},String.prototype.prependRandomNumber=function(a){for(var b=[],c=1;c<=a;c++)b.push(apf.randomGenerator.generate(1,9));return b.join("")+this.toString()},String.prototype.sprintf=function(){var a=this.toString(),b=0,c=a.indexOf("%s");while(c>=0){var d=arguments[b++]||" ";a=a.substr(0,c)+d+a.substr(c+2),c=a.indexOf("%s")}return a},Date.now||(Date.now=function(){return+(new Date)}),apf.hotkeys={},function(){function f(b,c,e){var f,g=0,h=b.splitSafe("\\-",null,!0),i=0,j=h.length;for(;i<j;++i)a[h[i]]?g|=a[h[i]]:f=h[i]||"-";if(!f)return;d.$keys[g]||(d.$keys[g]={}),e?c==d.$keys[g][f]&&(d.$keys[g][f]=null):d.$keys[g][f]=c}function g(a,d){var e,f=a.splitSafe("\\-"),g=0,h=f.length;for(;g<h;++g){if(!f[g])continue;if(e=(d?c:b)[f[g].toLowerCase()])f[g]=e}return f.join(" ")}var a={ctrl:1,alt:2,option:2,shift:4,meta:8,command:8};this.keyNames={8:"Backspace",9:"Tab",13:"Enter",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",107:"+",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",188:",",219:"[",221:"]"};var b={meta:"⌘",command:"⌘",alt:"⌥",option:"⌥",shift:"⇧",esc:"⎋",control:"⌃",backspace:"⌫",del:"⌦",enter:"↩"},c={meta:"&#8984;",command:"&#8984;",alt:"&#8997;",option:"&#8997;",shift:"&#8679;",esc:"&#9099;",control:"&#2303;",backspace:"&#232B;",del:"&#2326;",enter:"&#21A9;"};this.$keys={};var d=this,e=0;apf.registerHotkey=this.register=function(a,b){var c=a.split("|"),d=0,e=c.length;for(;d<e;++d)f(c[d],b)},this.$exec=function(a){var b,c=0|(a.ctrlKey?1:0)|(a.altKey?2:0)|(a.shiftKey?4:0)|(a.metaKey?8:0),e=a.keyCode,f=d.keyNames[e]||(e&&e>46&&e!=91?String.fromCharCode(e):null);if(!c&&(!f||!f.match(/^F\d{1,2}$/))||!f)return;return d.$keys[c]&&(b=d.$keys[c][f.toLowerCase()])&&(b(a.htmlEvent),a.returnValue=!1,apf.queue.empty()),a.returnValue},apf.removeHotkey=this.remove=this.unregister=function(a,b){var c=a.split("|"),d=0,e=c.length;for(;d<e;++d)f(c[d],b,!0)},this.toMacNotation=function(a,b){var c=a.split("|"),d=0,e=c.length,f=[];for(;d<e;++d)f.push(g(c[d],b));return f.join(" | ")},apf.addEventListener("keydown",function(a){var b=a.htmlEvent;if(d.$exec(a)===!1||a.returnValue===!1){apf.stopEvent(b);if(apf.canDisableKeyCodes)try{b.keyCode=0}catch(b){}return!1}})}.call(apf.hotkeys),apf.nameserver={lookup:{},add:function(a,b){return this.lookup[a]||(this.lookup[a]=[]),this.lookup[a].push(b)-1},register:function(a,b,c){this.lookup[a]||(this.lookup[a]={});if(this.waiting[b]){var d=this.waiting[b];for(var e=0;e<d.length;e++)d[e]();delete this.waiting[b]}return this.lookup[a][b]=c},waiting:{},waitFor:function(a,b){(this.waiting[a]||(this.waiting[a]=[])).push(b)},remove:function(a,b){var c=this.lookup[a];if(c)for(var d in c)c[d]==b&&delete c[d]},get:function(a,b){return this.lookup[a]?this.lookup[a][b]:null},getAll:function(a){var b,c=[],d=this.lookup[a];if(!d)return c;if(d.dataType==apf.ARRAY)for(var e=0;e<d.length;e++)c.push(d[e]);else for(b in d)c.push(d[b]);return c},getAllNames:function(a){var b,c=[];for(b in this.lookup[a]){if(parseInt(b)==b)continue;c.push(b)}return c}},apf.plane={$set:[],$lookup:{},$find:function(a){if(this.$lookup[a])return this.$lookup[a];var b=this.$set.pop();return b||(b=this.$factory()),this.$lookup[a]=b,b},get:function(a){return this.$find(a&&a.protect||"default")},show:function(a,b,c,d,e){this.options=e||{};var f=this.$find(e&&e.protect||"default");f.show(a,b,c,d,e)},hide:function(a,b){var c=this.$lookup[a||"default"];c&&(c.hide(b),delete this.$lookup[a||"default"],this.$set.push(c))},$factory:function(){function c(){var b=document.createElement("DIV");return!a.options||!a.options.customCover?b:(b.innerHTML=apf.getXmlString(a.options.customCover),b.firstChild)}function d(){var d=document.body.appendChild(c());return a.options.customCover||(d.style.background=b),d.style.position="fixed",d.style.left=0,d.style.top=0,d.host=!1,d}var a=this,b="url("+(apf.skins.skins["default"]?apf.skins.skins["default"].mediaPath+"spacer.gif":"images/spacer.gif")+")",e=d();return{host:this,plane:e,lastCursor:null,lastCoverType:"default",show:function(a,c,e,f,g){var h=g&&g.customCover?"custom":"default",i;if(h=="custom"||this.lastCoverType!=h)this.plane=d();i=this.plane;if(!g||!g.customCover)this.plane.style.background=g&&g.color||b;this.animate=g&&g.animate,this.protect=g&&g.protect,this.protect&&apf.setProperty("planes",(apf.planes||0)+1),a&&(this.current=a,c&&(this.$originalPlace=[a.parentNode,a.nextSibling],this.plane.appendChild(a))),apf.window.zManager.set("plane",this.plane,!c&&a),f=apf.isIE;var j=i.parentNode==document.body?f?document.documentElement.offsetWidth:apf.getWindowWidth():i.parentNode.offsetWidth,k=i.parentNode==document.body?f?document.documentElement.offsetHeight:apf.getWindowHeight():i.parentNode.offsetHeight;e&&(this.lastCursor===null&&(this.lastCursor=document.body.style.cursor),document.body.style.cursor=apf.getStyle(a,"cursor")),this.plane.style.display="block";var l=parseFloat(g&&g.opacity)||1;if(this.animate){var m=this;apf.setOpacity(this.plane,0),setTimeout(function(){apf.tween.single(m.plane,{steps:5,interval:10,type:"fade",from:0,to:l})},100)}else apf.setOpacity(this.plane,l);var n=apf.getDiff(i);return this.plane.style.width="100%",this.plane.style.height="100%",this.lastCoverType=g&&g.customCover?"custom":"default",i},hide:function(a){this.protect&&apf.setProperty("planes",apf.planes-1);var b;try{b=apf.isChildOf(this.plane,document.activeElement)}catch(c){b=!1}this.current&&this.current.parentNode==this.plane&&this.$originalPlace[0].insertBefore(this.current,this.$originalPlace[1]);if(this.animate&&!a){var d=this;setTimeout(function(){apf.tween.single(d.plane,{steps:5,interval:10,type:"fade",from:apf.getOpacity(d.plane),to:0,onfinish:function(){d.plane.style.display="none",d.current&&apf.window.zManager.clear(d.current)}})},100)}else apf.setOpacity(this.plane,0),this.current&&apf.window.zManager.clear(this.plane,this.current),this.plane.style.display="none";return b&&apf.document.activeElement&&(apf.isIE||document.activeElement.focus(),apf.document.activeElement.$focus()),this.current=null,this.lastCursor!==null&&(document.body.style.cursor=this.lastCursor,this.lastCursor=null),this.plane}}}},apf.popup={cache:{},focusFix:{INPUT:1,TEXTAREA:1,SELECT:1},setContent:function(a,b,c,d,e){return this.popup||this.init(),this.cache[a]={content:b,style:c,width:d,height:e},b.style.position="absolute",b.onmousedown=function(a){a||(a=event)},b.ownerDocument},removeContent:function(a){this.cache[a]=null,delete this.cache[a]},init:function(){this.popup={},apf.addEventListener("hotkey",function(a){(a.keyCode=="27"||a.altKey)&&apf.popup.forceHide()})},show:function(a,b){this.popup||this.init(),b=apf.extend({x:0,y:0,animate:!1,ref:null,width:null,height:null,callback:null,draggable:!1,resizable:!1,allowTogether:!1,autoCorrect:!0,noleft:!1,setZindex:!0},b),(!b.allowTogether||b.allowTogether!==!0&&b.allowTogether!=this.last)&&this.last!=a&&this.cache[this.last]&&(!this.cache[this.last].options||this.cache[this.last].options.autohide!==!1)&&this.hide();var c=this.cache[a];c.options=b;var d,e=c.content,f=!1,g=!1,h=!1;b.setZindex&&apf.window.zManager.set("popup",c.content),(d=c.content.style.display)&&d.indexOf("none")>-1&&(c.content.style.display="");var i=b.x,j=b.y,k=b.ref;while(k&&k.nodeType==1){if(h=apf.getStyle(k,"position")=="fixed")break;k=k.parentNode||k.$parentNode}if(!h){if(k){var l=apf.getAbsolutePosition(b.ref,c.content.offsetParent||c.content.parentNode);i=(i||0)+l[0],j=(j||0)+l[1]}if(b.width||c.width)e.style.width=(b.width||c.width)-3+"px";e.style.position="absolute";var m=this.cache[b.allowTogether],n=apf.getOverflowParent(c.content),o=n==document.documentElement?(apf.isIE?n.offsetHeight:window.innerHeight+window.pageYOffset)+n.scrollTop:n.offsetHeight+n.scrollTop;f=b.autoCorrect&&j+(b.height||c.height||c.content.offsetHeight)>o;if(f){var p;k?p=l[1]-(b.height||c.height||c.content.offsetHeight)+3:p=o-(b.height||c.height||c.content.offsetHeight),e.style.top=p<0?j:p+"px"}else e.style.top=j+"px";if(!b.noleft){var q=n==document.documentElement?(apf.isIE?n.offsetWidth:window.innerWidth+window.pageXOffset)+n.scrollLeft:n.offsetWidth+n.scrollLeft;g=b.autoCorrect&&i+(b.width||c.width||c.content.offsetWidth)>q;if(g){var p;b.ref?p=l[0]-(b.width||c.width||c.content.offsetWidth)+b.ref.offsetWidth:p=q-(b.width||c.width||c.content.offsetWidth)-(m?m.width||m.content.offsetWidth:0),e.style.left=p<0?i:p-1+"px"}else e.style.left=i+"px"}}else l=apf.getAbsolutePosition(b.ref,k),j=(j||0)+l[1]+k.offsetTop,l[0]+=k.offsetLeft,e.style.position="fixed",e.style.top=j+"px",b.noleft||(e.style.left=i+"px");apf.setStyleClass(e,f?"upward":"downward",[f?"downward":"upward"]),apf.setStyleClass(e,g?"moveleft":"moveright",[g?"moveright":"moveleft"]);if(b.animate)if(b.animate=="fade")apf.tween.single(e,{type:"fade",from:0,to:1,anim:apf.tween.NORMAL,steps:b.steps||15*apf.animSteps});else{var r,s=apf.isIE8?5:7,t=0;r=setInterval(function(){var a=++t*((b.height||c.height)/s);e.style.height=a+"px",f?e.style.top=j-a-(b.y||0)+"px":(b.container||e).scrollTop=-1*(t-s)*((b.height||c.height)/s),e.style.display="block",t>=s&&(clearInterval(r),b.callback&&b.callback(e))},10)}else{if(!k){if(b.height||c.height)e.style.height=(b.height||c.height)+"px";p=o-(b.height||c.height||c.content.offsetHeight),e.style.top=j+(b.height||c.height||c.content.offsetHeight)<o?j:p+"px"}e.style.display="block",b.callback&&b.callback(e)}$setTimeout(function(){apf.popup.last=a}),b.draggable&&(b.id=a,this.makeDraggable(b))},hide:function(){if(this.isDragging)return;var a=this.cache[this.last];a&&(a.content&&(a.content.style.display="none"),a.options&&a.options.onclose&&(a.options.onclose(apf.extend(a.options,{htmlNode:a.content})),a.options.onclose=!1))},isShowing:function(a){return this.last&&this.last==a&&this.cache[this.last]&&this.cache[this.last].content.style.display!="none"},isDragging:!1,makeDraggable:function(a){if(!apf.Interactive||this.cache[a.id].draggable)return;var b=this.cache[a.id].content;this.cache[a.id].draggable=!0;var c={$propHandlers:{},minwidth:10,minheight:10,maxwidth:1e4,maxheight:1e4,dragOutline:!1,resizeOutline:!1,draggable:!0,resizable:a.resizable,$ext:b,oDrag:b.firstChild};b.onmousedown=b.firstChild.onmousedown=function(a){a||(a=event),(a||event).cancelBubble=!0},apf.implement.call(c,apf.Interactive),c.$propHandlers.draggable.call(c,!0),c.$propHandlers.resizable.call(c,!0)},getCurrentElement:function(){return typeof this.last=="number"&&apf.lookup(this.last)},forceHide:function(){if(this.last&&!apf.plane.current&&this.isShowing(this.last)&&this.cache[this.last]&&this.cache[this.last].options&&this.cache[this.last].options.autohide!==!1){var a=apf.lookup(this.last);a?a.dispatchEvent("popuphide")!==!1&&this.hide():this.last=null}},destroy:function(){for(var a in this.cache)this.cache[a]&&(this.cache[a].content.onmousedown=null,apf.destroyHtmlNode(this.cache[a].content),this.cache[a].content=null,this.cache[a]=null);if(!this.popup)return}},apf.setStyleRule=function(a,b,c,d,e){a=a.toLowerCase();if(!d){var f=(e||self).document.styleSheets;for(var g=f.length-1;g>=0;g--)try{var h=f[g][apf.styleSheetRules];for(var i=0;i<h.length;i++)if(h.item(i).selectorText&&h.item(i).selectorText.toLowerCase()==a)return h.item(i).style[b]=c,!0}catch(j){}}else{var h=(e||self).document.styleSheets[d||0][apf.styleSheetRules];for(var i=0;i<h.length;i++)if(h.item(i).selectorText&&h.item(i).selectorText.toLowerCase()==a)return h.item(i).style[b]=c,!0}return!1},apf.getStyleRule=function(a,b,c,d){a=a.toLowerCase();if(!c){var e=(d||self).document.styleSheets;for(var f=e.length-1;f>=0;f--)try{var g=e[f][apf.styleSheetRules];for(var h=0;h<g.length;h++)if(g.item(h).selectorText&&g.item(h).selectorText.toLowerCase()==a)return g.item(h).style[b]}catch(i){}}else{var g=(d||self).document.styleSheets[c||0][apf.styleSheetRules];for(var h=0;h<g.length;h++)if(g.item(h).selectorText&&g.item(h).selectorText.toLowerCase()==a)return g.item(h).style[b]}return!1},apf.setStyleClass=function(a,b,c,d){if(!a||d&&this.disabled)return;b&&(c?c[c.length]=b:c=[b]);var e=new RegExp("(^| +)(?:"+(c?c.join("|"):"")+")","gi");return a.className!=null?a.className=a.className.replace(e," ")+(b?" "+b:""):a.setAttribute("class",(a.getAttribute("class")||"").replace(e," ")+(b?" "+b:"")),a},apf.importCssString=function(a,b,c){b=b||document;var d=b.getElementsByTagName("head")[0];if(apf.canCreateStyleNode){var e=b.createElement("style");e.appendChild(b.createTextNode(a)),c&&e.setAttribute("media",c),d.appendChild(e)}else d.insertAdjacentHTML("beforeend",".<style media='"+(c||"all")+"'>"+a+"</style>")},apf.getStyleRecur=function(a,b){var c=apf.hasComputedStyle?document.defaultView.getComputedStyle(a,"").getPropertyValue(b.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})):a.currentStyle[b];return(!c||c=="transparent"||c=="inherit")&&a.parentNode&&a.parentNode.nodeType==1?this.getStyleRecur(a.parentNode,b):c},apf.importStylesheet=function(a,b){function g(){if(d.createStyleSheet)return d.createStyleSheet();var a=d.createElement("style");return a.type="text/css",d.getElementsByTagName("head")[0].appendChild(a),a.sheet}if(!a.length)return;var c=new RegExp("^"+document.domain,"g"),d=(b||window).document;for(var e=document.styleSheets.length-1;e>=0;e--)if(!d.styleSheets[e].href||d.styleSheets[e].href.match(c))break;var f=d.styleSheets[e];f||(f=g());for(var h=0;h<a.length;h++){if(!a[h][1])continue;if(apf.isIE)f.addRule(a[h][0],a[h][1]);else{var i=a[h][0]+" {"+a[h][1]+"}";try{f.insertRule(i,0)}catch(j){f=g(),f.insertRule(i,0)}}}},apf.isInRect=function(a,b,c){var d=this.getAbsolutePosition(a);return b<d[0]||c<d[1]||b>a.offsetWidth+d[0]-10||c>a.offsetHeight+d[1]-10?!1:!0},apf.getOverflowParent=function(a){a=a.offsetParent;while(a&&(this.getStyle(a,"overflow")!="hidden"||"absolute|relative".indexOf(this.getStyle(a,"position"))==-1))a=a.offsetParent;return a||document.documentElement},apf.getPositionedParent=function(a){a=a.offsetParent;while(a&&a.tagName.toLowerCase()!="body"&&"absolute|relative".indexOf(this.getStyle(a,"position"))==-1)a=a.offsetParent;return a||document.documentElement},apf.getAbsolutePosition=function(a,b,c){if("getBoundingClientRect"in document.documentElement){if(apf.doesNotIncludeMarginInBodyOffset&&a==document.body)return[a.offsetLeft+(parseFloat(apf.getStyle(a,"marginLeft"))||0),+(a.scrollLeft||0),a.offsetTop+(parseFloat(apf.getStyle(a,"marginTop"))||0)+(a.scrollTop||0)];var d=a.getBoundingClientRect(),e=d.top,f=d.left,g=apf.isIE&&apf.isIE<8;if(b&&b!=document.body){var h=apf.getAbsolutePosition(b,null,!0);e-=h[1],f-=h[0]}if(!apf.isIE||a!=document.documentElement)f+=(b||document.body).scrollLeft||document.documentElement.scrollLeft||0,e+=(b||document.body).scrollTop||document.documentElement.scrollTop||0;return c&&!b&&(f+=parseInt(apf.getStyle(a,"borderLeftWidth"))||0,e+=parseInt(apf.getStyle(a,"borderTopWidth"))||0),[f-(g?2:0),e-(g?2:0)]}var i=c?0:a.offsetLeft,j=c?0:a.offsetTop;a=c?a:a.offsetParent||a.parentNode,apf.isIE8&&b&&(k=this.getStyle(a,"borderLeftWidth"),i-=apf.isIE&&a.currentStyle.borderLeftStyle!="none"&&k=="medium"?2:parseInt(k)||0,l=this.getStyle(a,"borderTopWidth"),j-=apf.isIE&&a.currentStyle.borderTopStyle!="none"&&l=="medium"?2:parseInt(l)||0);var k,l,m;while(a&&a!=b){k=apf.isOpera||apf.isIE8?0:this.getStyle(a,"borderLeftWidth"),i+=(apf.isIE&&a.currentStyle.borderLeftStyle!="none"&&k=="medium"?2:parseInt(k)||0)+a.offsetLeft;if(apf.isIE&&!apf.isIE8&&apf.getStyle(a,"styleFloat")=="none"&&apf.getStyle(a,"position")=="relative"){var n=a.previousSibling;while(n){if(n.nodeType==1){m=apf.getStyle(n,"styleFloat");if(m=="left"){i-=parseInt(apf.getStyle(a,"marginLeft"))||0;break}if(m=="right")break}n=n.previousSibling}}l=apf.isOpera||apf.isIE8?0:this.getStyle(a,"borderTopWidth"),j+=(apf.isIE&&a.currentStyle.borderTopStyle!="none"&&l=="medium"?2:parseInt(l)||0)+a.offsetTop,!apf.isGecko&&a!=b&&(a.tagName!="HTML"||a.ownerDocument!=document)&&(i-=a.scrollLeft,j-=a.scrollTop);if(a.tagName.toLowerCase()=="table")j-=parseInt(a.border||0)+parseInt(a.cellSpacing||0),i-=parseInt(a.border||0)+parseInt(a.cellSpacing||0)*2;else if(a.tagName.toLowerCase()=="tr"){var o;j-=o=parseInt(a.parentNode.parentNode.cellSpacing);while(a.previousSibling)j-=(a=a.previousSibling).offsetHeight+o}apf.isIE&&!a.offsetParent&&a.parentNode.nodeType==1&&(i-=a.parentNode.scrollLeft,j-=a.parentNode.scrollTop),a=a.offsetParent}return[i,j]},apf.getHorBorders=function(a){return Math.max(0,(parseInt(apf.getStyle(a,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(a,"borderRightWidth"))||0))},apf.getVerBorders=function(a){return Math.max(0,(parseInt(apf.getStyle(a,"borderTopWidth"))||0)+(parseInt(apf.getStyle(a,"borderBottomWidth"))||0))},apf.getWidthDiff=function(a){return apf.hasFlexibleBox&&apf.getStyle(a,apf.CSSPREFIX+"BoxSizing")!="content-box"?0:Math.max(0,(parseInt(apf.getStyle(a,"paddingLeft"))||0)+(parseInt(apf.getStyle(a,"paddingRight"))||0)+(parseInt(apf.getStyle(a,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(a,"borderRightWidth"))||0))},apf.getHeightDiff=function(a){return apf.hasFlexibleBox&&apf.getStyle(a,apf.CSSPREFIX+"BoxSizing")!="content-box"?0:Math.max(0,(parseInt(apf.getStyle(a,"paddingTop"))||0)+(parseInt(apf.getStyle(a,"paddingBottom"))||0)+(parseInt(apf.getStyle(a,"borderTopWidth"))||0)+(parseInt(apf.getStyle(a,"borderBottomWidth"))||0))},apf.getDiff=function(a){return apf.hasFlexibleBox&&apf.getStyle(a,apf.CSSPREFIX+"BoxSizing")!="content-box"?[0,0]:[Math.max(0,(parseInt(apf.getStyle(a,"paddingLeft"))||0)+(parseInt(apf.getStyle(a,"paddingRight"))||0)+(parseInt(apf.getStyle(a,"borderLeftWidth"))||0)+(parseInt(apf.getStyle(a,"borderRightWidth"))||0)),Math.max(0,(parseInt(apf.getStyle(a,"paddingTop"))||0)+(parseInt(apf.getStyle(a,"paddingBottom"))||0)+(parseInt(apf.getStyle(a,"borderTopWidth"))||0)+(parseInt(apf.getStyle(a,"borderBottomWidth"))||0))]},apf.getMargin=function(a){return[(parseInt(apf.getStyle(a,"marginLeft"))||0)+(parseInt(apf.getStyle(a,"marginRight"))||0),(parseInt(apf.getStyle(a,"marginTop"))||0)+(parseInt(apf.getStyle(a,"marginBottom"))||0)]},apf.getHtmlInnerWidth=function(a){return a.offsetWidth-(parseInt(apf.getStyle(a,"borderLeftWidth"))||0)-(parseInt(apf.getStyle(a,"borderRightWidth"))||0)},apf.getHtmlInnerHeight=function(a){return a.offsetHeight-(parseInt(apf.getStyle(a,"borderTopWidth"))||0)-(parseInt(apf.getStyle(a,"borderBottomWidth"))||0)},apf.getViewPort=function(a){a=a||window;var b=!a.document.compatMode||a.document.compatMode=="CSS1Compat"?a.document.html||a.document.documentElement:a.document.body;return{x:a.pageXOffset||b.scrollLeft,y:a.pageYOffset||b.scrollTop,width:a.innerWidth||b.clientWidth,height:a.innerHeight||b.clientHeight}},apf.pasteWindow=function(a){var b=window.open("about:blank");b.document.write(a)},apf.htmlentities=function(a){return a.escapeHTML()},apf.xmlentities=apf.escapeXML,apf.html_entity_decode=function(a){return(a||"").replace(/\&\#38;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," ")},apf.isCharacter=function(a){return(a<112||a>122)&&(a==32||a>42||a==8)},apf.randomGenerator={d:new Date,seed:null,A:48271,M:2147483647,Q:null,R:null,oneOverM:null,generate:function(a,b){return this.seed==null&&(this.seed=2345678901+this.d.getSeconds()*16777215+this.d.getMinutes()*65535),this.Q=this.M/this.A,this.R=this.M%this.A,this.oneOverM=1/this.M,Math.floor((b-a+1)*this.next()+a)},next:function(){var a=this.seed/this.Q,b=this.seed%this.Q,c=this.A*b-this.R*a;return c>0?this.seed=c:this.seed=c+this.M,this.seed*this.oneOverM}},apf.getNoCacheUrl=function(a){return a+(a.indexOf("?")==-1?"?":"&")+"nocache="+(new Date).getTime()},apf.parseExpression=function(str){return apf.parseExpression.regexp.test(str)?eval(RegExp.$1):str},apf.parseExpression.regexp=/^\{([\s\S]*)\}$/,apf.formatNumber=function(a,b){var c=parseFloat(a);if(!c)return a;var d=(new String(Math.round(c*100)/100)).replace(/(\.\d?\d?)$/,function(a){return a.pad(3,"0",apf.PAD_RIGHT)});return d.indexOf(".")==-1&&(d+=".00"),b+d},apf.jsexec=function(str,win){if(!str)return str;win||(win=self);if(apf.isO3)eval(str,self);else if(apf.hasExecScript)win.execScript(str);else{var head=win.document.getElementsByTagName("head")[0];if(head){var script=win.document.createElement("script");script.setAttribute("type","text/javascript"),script.text=str,head.appendChild(script),head.removeChild(script)}else eval(str,win)}return str},apf.K=function(){},apf.isNumber=function(a){return parseFloat(a)==a},apf.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},apf.isTrue=function(a){return a===!0||a==="true"||a==="on"||typeof a=="number"&&a>0||a==="1"},apf.isFalse=function(a){return a===!1||a==="false"||a==="off"||a===0||a==="0"},apf.isNot=function(a){return!a&&typeof a!="string"&&a!==0||typeof a=="number"&&!isFinite(a)},apf.removePathContext=function(a,b){return b?b.indexOf(a)>-1?b.substr(a.length):b:""},apf.cancelBubble=function(a,b,c){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,c||(b&&b.$ext&&b.$ext["on"+(a.type||a.name)]&&b.$ext["on"+(a.type||a.name)](a),apf.window.$mousedown(a))},apf.destroyHtmlNode=function(a){if(!a)return;if(!apf.isIE||a.ownerDocument!=document){a.parentNode&&a.parentNode.removeChild(a);return}var b=document.getElementById("IELeakGarbageBin");b||(b=document.createElement("DIV"),b.id="IELeakGarbageBin",b.style.display="none",document.body.appendChild(b)),b.appendChild(a),b.innerHTML=""},apf.getRules=function(a){var b={};for(var c=a.firstChild;c;c=c.nextSibling){if(c.nodeType!=1)continue;b[c[apf.TAGNAME]]||(b[c[apf.TAGNAME]]=[]),b[c[apf.TAGNAME]].push(c)}return b},apf.isCoord=function(a){return a||a===0},apf.getCoord=function(a,b){return a||a===0?a:b},apf.getBox=function(a,b){b||(b=0);if(a==null||!parseInt(a)&&parseInt(a)!=0)return[0,0,0,0];var c=String(a).splitSafe(" ");for(var d=0;d<c.length;d++)c[d]=parseInt(c[d])||0;switch(c.length){case 1:c[1]=c[0],c[2]=c[0],c[3]=c[0];break;case 2:c[2]=c[0],c[3]=c[1];break;case 3:c[3]=c[1]}return c},apf.getNode=function(a,b){var c=0;if(a!=null)for(var d=0;d<a.childNodes.length;d++)if(a.childNodes[d].nodeType==1){if(c==b[0])return a=a.childNodes[d],b.length>1&&(b.shift(),a=this.getNode(a,b)),a;c++}return null},apf.getFirstElement=function(a){return a.firstChild.nodeType==1?a.firstChild:a.firstChild.nextSibling},apf.getLastElement=function(a){return a.lastChild.nodeType==1?a.lastChild:a.lastChild.previousSibling},apf.selectTextHtml=function(a){if(!apf.hasMsRangeObject)return;var b=document.selection.createRange();try{b.moveToElementText(a)}catch(c){}b.select()},apf.visibilitymanager=function(){var a={},b=this,c=!1;this.check=function(a,b,c){function d(c){var d=a;while(d)d.removeEventListener("prop.visible",e),d.removeEventListener("DOMNodeRemoved",f),d.removeEventListener("DOMNodeRemovedFromDocument",f),c&&d.addEventListener("DOMNodeInserted",g),d=d.parentNode||d.$parentNode;delete a.$visibleCheck[b]}function e(b){if(!a.$ext.offsetHeight&&!a.$ext.offsetWidth)return;c.call(a),d()}function f(a){if(a.currentTarget!=this)return;d(a.name=="DOMNodeRemoved")}function g(){var c=a;while(c)c.addEventListener("prop.visible",e),c.addEventListener("DOMNodeRemoved",f),c.addEventListener("DOMNodeRemovedFromDocument",f),c.removeEventListener("DOMNodeInserted",g),c=c.parentNode||c.$parentNode;a.$visibleCheck[b]=!0}if(a.$ext.offsetHeight||a.$ext.offsetWidth)return!0;if(a.$visibleCheck){if(a.$visibleCheck[b])return}else a.$visibleCheck={};return g(),!1},this.permanent=function(a,b,c){function e(e){var f=a.$ext&&(a.$ext.offsetHeight||a.$ext.offsetWidth);if(f==d)return;f?b():c(),d=f}function f(b){var c=a;while(c)c.removeEventListener("prop.visible",e),c.removeEventListener("DOMNodeRemoved",g),c.removeEventListener("DOMNodeRemovedFromDocument",g),b&&c.addEventListener("DOMNodeInserted",h),c=c.parentNode||c.$parentNode;e()}function g(a){if(a.currentTarget!=this)return;f(a.name=="DOMNodeRemoved")}function h(){var b=a;while(b)b.addEventListener("prop.visible",e),b.addEventListener("DOMNodeRemoved",g),b.addEventListener("DOMNodeRemovedFromDocument",g),b.removeEventListener("DOMNodeInserted",h),b=b.parentNode||b.$parentNode;e()}var d=a.$ext&&(a.$ext.offsetHeight||a.$ext.offsetWidth);return h(),d},this.removePermanent=function(a){}},apf.isChildOf=function(a,b,c){if(!a||!b)return!1;b.nodeType==2&&(b=b.ownerElement||b.selectSingleNode(".."));if(c&&a==b)return!0;var d=b.parentNode;while(d){if(d==a)return!0;d=d.parentNode}return!1},apf.xmlEntityMap={quot:"34",amp:"38",apos:"39",lt:"60",gt:"62",nbsp:"160",iexcl:"161",cent:"162",pound:"163",curren:"164",yen:"165",brvbar:"166",sect:"167",uml:"168",copy:"169",ordf:"170",laquo:"171",not:"172",shy:"173",reg:"174",macr:"175",deg:"176",plusmn:"177",sup2:"178",sup3:"179",acute:"180",micro:"181",para:"182",middot:"183",cedil:"184",sup1:"185",ordm:"186",raquo:"187",frac14:"188",frac12:"189",frac34:"190",iquest:"191",agrave:["192","224"],aacute:["193","225"],acirc:["194","226"],atilde:["195","227"],auml:["196","228"],aring:["197","229"],aelig:["198","230"],ccedil:["199","231"],egrave:["200","232"],eacute:["201","233"],ecirc:["202","234"],euml:["203","235"],igrave:["204","236"],iacute:["205","237"],icirc:["206","238"],iuml:["207","239"],eth:["208","240"],ntilde:["209","241"],ograve:["210","242"],oacute:["211","243"],ocirc:["212","244"],otilde:["213","245"],ouml:["214","246"],times:"215",oslash:["216","248"],ugrave:["217","249"],uacute:["218","250"],ucirc:["219","251"],uuml:["220","252"],yacute:["221","253"],thorn:["222","254"],szlig:"223",divide:"247",yuml:["255","376"],oelig:["338","339"],scaron:["352","353"],fnof:"402",circ:"710",tilde:"732",alpha:["913","945"],beta:["914","946"],gamma:["915","947"],delta:["916","948"],epsilon:["917","949"],zeta:["918","950"],eta:["919","951"],theta:["920","952"],iota:["921","953"],kappa:["922","954"],lambda:["923","955"],mu:["924","956"],nu:["925","957"],xi:["926","958"],omicron:["927","959"],pi:["928","960"],rho:["929","961"],sigma:["931","963"],tau:["932","964"],upsilon:["933","965"],phi:["934","966"],chi:["935","967"],psi:["936","968"],omega:["937","969"],sigmaf:"962",thetasym:"977",upsih:"978",piv:"982",ensp:"8194",emsp:"8195",thinsp:"8201",zwnj:"8204",zwj:"8205",lrm:"8206",rlm:"8207",ndash:"8211",mdash:"8212",lsquo:"8216",rsquo:"8217",sbquo:"8218",ldquo:"8220",rdquo:"8221",bdquo:"8222",dagger:["8224","8225"],bull:"8226",hellip:"8230",permil:"8240",prime:["8242","8243"],lsaquo:"8249",rsaquo:"8250",oline:"8254",frasl:"8260",euro:"8364",image:"8465",weierp:"8472",real:"8476",trade:"8482",alefsym:"8501",larr:["8592","8656"],uarr:["8593","8657"],rarr:["8594","8658"],darr:["8595","8659"],harr:["8596","8660"],crarr:"8629",forall:"8704",part:"8706",exist:"8707",empty:"8709",nabla:"8711",isin:"8712",notin:"8713",ni:"8715",prod:"8719",sum:"8721",minus:"8722",lowast:"8727",radic:"8730",prop:"8733",infin:"8734",ang:"8736",and:"8743",or:"8744",cap:"8745",cup:"8746","int":"8747",there4:"8756",sim:"8764",cong:"8773",asymp:"8776",ne:"8800",equiv:"8801",le:"8804",ge:"8805",sub:"8834",sup:"8835",nsub:"8836",sube:"8838",supe:"8839",oplus:"8853",otimes:"8855",perp:"8869",sdot:"8901",lceil:"8968",rceil:"8969",lfloor:"8970",rfloor:"8971",lang:"9001",rang:"9002",loz:"9674",spades:"9824",clubs:"9827",hearts:"9829",diams:"9830"},apf.escapeXML=function(a){return typeof a!="string"?a:(a||"").replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/'/g,"&#39;").replace(/&([a-z]+);/gi,function(a,b){var c=apf.xmlEntityMap[b.toLowerCase()];return c?"&#"+(apf.isArray(c)?c[0]:c)+";":a})},apf.isOnlyChild=function(a,b){if(!a||!a.parentNode||b&&b.indexOf(a.nodeType)==-1)return!1;var c,d,e,f=a.parentNode.childNodes;for(c=0,d=f.length;c<d;c++){e=f[c];if(e.nodeType==1&&e!=a)return!1;if(e.nodeType==3&&!e.nodeValue.trim())return!1}return!0},apf.getChildNumber=function(a,b){if(!a)return-1;var c=a.parentNode,d=0;if(!c)return-1;b||(b=c.childNodes);if(b.indexOf){var e=b.indexOf(a);return e==-1?b.length:e}for(var f=0,g=b.length;f<g;f++){if(b[f]==a)return d;d++}return-1},apf.mergeXml=function(a,b,c){typeof b!="object"&&(b=getElementById(b));if(c&&c.clearContents){var d,e,f,g=b.selectNodes("descendant::node()[@"+apf.xmldb.xmlListenTag+"]");for(f=g.length-1;f>=0;f--){var h=g[f].getAttribute(apf.xmldb.xmlListenTag).split(";");for(e=h.length-1;e>=0;e--){d=apf.all[h[e]];if(!d)continue;d.dataParent&&d.dataParent.xpath?d.dataParent.parent.signalXmlUpdate[d.$uniqueId]=!0:d.$model&&d.$model.$waitForXml(d)}}g=b.childNodes;for(f=g.length-1;f>=0;f--)b.removeChild(g[f])}if(c&&c.start){var i,j,g,k,f,l,m=c.marker;!!m;if(m.getAttribute("start")-c.start==0)m.setAttribute("start",c.start+c.length),i=parseInt(m.getAttribute("reserved")),m.setAttribute("reserved",i+c.length),j=m;else if(c.start+c.length==m.getAttribute("end"))m.setAttribute("end",c.start+c.length),j=m.nextSibling,i=parseInt(m.getAttribute("reserved"))+parseInt(m.getAttribute("end"))-c.length;else{var n=m.parentNode.insertBefore(m.cloneNode(!0),m);n.setAttribute("end",c.start-1),m.setAttribute("start",c.start+c.length),i=parseInt(m.getAttribute("reserved")),m.setAttribute("reserved",i+c.length),j=m}g=a.childNodes;if(b.ownerDocument.importNode){k=b.ownerDocument;for(f=0,l=g.length;f<l;f++)b.insertBefore(k.importNode(g[f],!0),j).setAttribute(apf.xmldb.xmlIdTag,c.documentId+"|"+(i+f))}else for(f=g.length-1;f>=0;f--)b.insertBefore(g[0],j).setAttribute(apf.xmldb.xmlIdTag,c.documentId+"|"+(i+f))}else{j=c&&c.beforeNode?c.beforeNode:apf.getNode(b,[0]),g=a.childNodes;if(b.ownerDocument.importNode){k=b.ownerDocument;for(f=0,l=g.length;f<l;f++)b.insertBefore(k.importNode(g[f],!0),j)}else for(f=g.length-1;f>=0;f--)b.insertBefore(g[0],j)}if(c&&c.copyAttributes){var o=a.attributes;for(f=0;f<o.length;f++)o[f].nodeName!=apf.xmldb.xmlIdTag&&b.setAttribute(o[f].nodeName,o[f].nodeValue)}return b},apf.setNodeValue=function(a,b,c,d){if(!a)return;var e,f,g;d&&(e=d.undoObj,f=d.xpath,g=d.newNodes,e.extra.oldValue=d.forceNew?"":apf.queryValue(a,f),e.xmlNode=a,f&&(a=apf.createNodeFromXpath(a,f,g,d.forceNew)),e.extra.appliedNode=a);if(a.nodeType==1)a.firstChild||a.appendChild(a.ownerDocument.createTextNode("")),a.firstChild.nodeValue=apf.isNot(b)?"":b,c&&apf.xmldb.applyChanges("text",a,e);else{apf.isO3&&a.nodeType==2&&(b=b.replace(/&/g,"&amp;"));var h=a.nodeValue;a.nodeValue=b==undefined||b==null||b==NaN?"":String(b),e&&(e.name=a.nodeName),a.$triggerUpdate&&a.$triggerUpdate(null,h),c&&apf.xmldb.applyChanges(a.nodeType==2?"attribute":"text",a.parentNode||a.ownerElement||a.selectSingleNode(".."),e)}},apf.setQueryValue=function(a,b,c,d){var e=apf.createNodeFromXpath(a,b);return e?(apf.setNodeValue(e,c,!d),e):null},apf.removeQueryNode=function(a,b,c){var d=apf.queryNode(a,b);return d?(c?d.parentNode.removeChild(d):apf.xmldb.removeNode(d),d):!1},apf.queryValue=function(a,b){if(!a)return"";if(a.nodeType==2)return a.nodeValue;if(b){a=a.selectSingleNode(b);if(!a)return""}return a.nodeType==1?a.firstChild?a.firstChild.nodeValue:"":a.nodeValue},apf.queryValues=function(a,b){var c=[];if(!a)return c;var d=a.selectNodes(b);if(!d.length)return c;for(var e=0;e<d.length;e++){var f=d[e];f.nodeType==1&&(f=f.firstChild),c.push(f.nodeValue||"")}return c},apf.queryNodes=function(a,b){return a&&(apf.hasXPathHtmlSupport&&a.selectSingleNode||!a.style)?a.selectNodes(b):apf.XPath.selectNodes(b,a)},apf.queryNode=function(a,b){if(a&&(apf.hasXPathHtmlSupport&&a.selectSingleNode||!a.style))return a.selectSingleNode(b);var c=apf.queryNodes(a?a:null,b+(apf.isIE?"":"[1]"));return c.length>0?c[0]:null},apf.getInheritedAttribute=function(a,b,c){var d,e;a.nodeType!=1&&(a=a.parentNode);while(a&&(a.nodeType!=1||!(d=b&&((e=a.getAttribute(b))||typeof e=="string")||c&&c(a))))a=a.parentNode;return e==""?"":!d&&b&&apf.config?apf.config[b]:d},apf.createNodeFromXpath=function(a,b,c,d){var e,f="",g=b.replace(/('.*?')|(".*?")|\|/g,function(a,b,c){return b||c?b||c:"-%-|-%-"}).split("-%-|-%-")[0].split(/\/(?!\/)/);if(!d&&(e=a.selectSingleNode(b)))return e;var h=g.length-1;d&&g[h].trim().match(/^\@(.*)$|^text\(\)$/)&&h--,g[0]||(a=a.ownerDocument.documentElement,g.shift(),g.shift(),h--,h--);for(var i,j=!1,k=0;k<h;k++){if(!j&&a.selectSingleNode(f+(k!=0?"/":"")+g[k])){f+=(k!=0?"/":"")+g[k];continue}var l=g[k].match(/(\w+)\[@([\w-]+)=(\w+)\]/);l&&(g[k]=l[1]),j=!0,i=a.selectSingleNode(f||".").appendChild(a.ownerDocument.createElement(g[k])),l?(i.setAttribute(l[2],l[3]),f+=(f?"/":"")+l[0]):f+=(f?"/":"")+g[k],c&&c.push(i)}f||(f="."),c&&(c.foundpath=f);var m,n=g[h],o=a.nodeType==9?a:a.ownerDocument;do{if(n.match(/^\@(.*)$/))(m||a.selectSingleNode(f)).setAttributeNode(m=o.createAttribute(RegExp.$1));else if(n.trim()=="text()")m=(m||a.selectSingleNode(f)).appendChild(o.createTextNode(""));else{var p=n.match(/(\w+)\[@([\w-]+)=(\w+)\]/);p&&(n=p[1]),m=(m||a.selectSingleNode(f)).appendChild(o.createElement(n)),p&&m.setAttribute(p[2],p[3])}c&&c.push(m),f+=(f?"/":"")+g[h]}while(n=g[++h]);return m},apf.convertMethods={json:function(a){return JSON.stringify(apf.xml2json(a))},cgivars:function(a,b){b||(b="");var c,d,e,f,g,h=[],i=a.childNodes,j={},k=0,l=i.length;for(;k<l;++k){if(i[k].nodeType!=1)continue;d=i[k].tagName;if(j[d])continue;e=a.selectNodes(d);if(e.length>1){j[d]=!0;for(f=0,g=e.length;f<g;f++)c=this.cgivars(e[f],b+d+"["+f+"]"),c&&h.push(c)}else c=this.cgivars(i[k],b+d),c&&h.push(c)}var m=a.attributes;for(k=0,l=m.length;k<l;k++)m[k].nodeValue&&(b?h.push(b+"["+m[k].nodeName+"]="+escape(m[k].nodeValue)):h.push(m[k].nodeName+"="+escape(m[k].nodeValue)));return h.length?h.join("&"):(c=apf.queryValue(a,"text()"),b&&c?b+"="+escape(c):"")},cgiobjects:function(a,b,c,d){b||(b="");var e,f,g,h,i,j,k,l,m,n=a.childNodes,o=[],p={},q="";for(i=0;i<n.length;i++){e=n[i];if(e.nodeType==1){f=e.tagName,m=e.parentNode.selectNodes(f).length==1?!0:!1,typeof p[f]=="undefined"&&(p[f]=0),q=b+(c?"[":"")+f+(c?"]":"")+(m?"":"["+p[f]+"]"),k=e.attributes,l=e.attributes.length;if(l>0)for(j=0;j<l;j++){if(!(h=k[j]).nodeValue)continue;o.push(q+"[_"+h.nodeName+"]="+escape(h.nodeValue.trim()))}g=this.cgiobjects(e,q,!0),g.dataType!==1?o.push(g):e.firstChild&&e.firstChild.nodeValue.trim()?o.push(q+(l>0?"[_]=":"=")+escape(e.firstChild.nodeValue.trim())):l==0&&d&&o.push(q),p[f]++}else if(e.nodeType==3&&c){var r=e.nodeValue;r&&r.trim()!==""&&o.push(b+"="+escape(r))}}return!c&&a.getAttribute("id")&&o.push("id="+escape(a.getAttribute("id"))),o.length?o.join("&"):o}},apf.convertXml=function(a,b){return apf.convertMethods[b](a)},apf.getTextNode=function(a){for(var b=0,c=a.childNodes.length;b<c;++b)if(a.childNodes[b].nodeType==3||a.childNodes[b].nodeType==4)return a.childNodes[b];return!1},apf.getBoundValue=function(a,b,c){if(!b&&!a.xmlRoot)return"";var d=a.$getDataNode("value",a.xmlRoot);return d?apf.queryValue(d):""},apf.getArrayFromNodelist=function(a){for(var b=[],c=0,d=a.length;c<d;++c)b.push(a[c]);return b},apf.serializeChildren=function(a){var b,c=[],d=a.childNodes,e=0,f=d.length;for(;e<f;++e)c[e]=(b=d[e]).nodeType==1?b.xml||b.serialize():b.nodeType==8?"":b.nodeValue;return c.join("")},apf.getXmlString=function(a){var b=apf.xmldb.cleanNode(a.cloneNode(!0));return b.xml||b.serialize()},apf.getXml=function(a,b,c){return apf.getXmlDom(a,b,c).documentElement},apf.formatXml=function(a){a=a.trim();var b=a.split("\n"),c=0,d=0,e=b.length;for(;d<e;++d)b[d]=b[d].trim();b=b.join("\n").replace(/\>\n/g,">").replace(/\>/g,">\n").replace(/\n\</g,"<").replace(/\</g,"\n<").split("\n"),b.removeIndex(0),b.removeIndex(b.length);for(d=0,e=b.length;d<e;d++)b[d]="    ".repeat(b[d].match(/^\s*\<\//)?c==0?0:--c:b[d].match(/^\s*\<[^\?][^>]+[^\/]\>/)?c++:c)+b[d];return a?b.join("\n"):""},apf.xmlToXpath=function(a,b,c){if(!a)return"";if(c===!0&&a.nodeType==1&&a.getAttribute(apf.xmldb.xmlIdTag))return"//node()[@"+apf.xmldb.xmlIdTag+"='"+a.getAttribute(apf.xmldb.xmlIdTag)+"']";if(apf!=this&&this.lookup&&this.select){var d,e=this.lookup[a.tagName];if(e)return d=a.selectSingleNode(e).nodeValue,"//"+a.tagName+"["+e+"='"+d+"']";for(var f=0,g=this.select.length;f<g;f++)if(a.selectSingleNode(this.select[f][0]))return d=a.selectSingleNode(this.select[f][1]).nodeValue,"//"+this.select[f][0]+"["+this.select[f][1]+"='"+d+"']"}if(a==b)return".";if(a.nodeType!=2&&!a.parentNode&&!a.ownerElement)return!1;var h=[],i=a;i.nodeType==2&&(h.push("@"+i.nodeName),i=i.ownerElement||a.selectSingleNode(".."));var j;while(i&&i.nodeType==1){if(i==b)break;h.unshift((i.nodeType==1?i.tagName:"text()")+"["+(c&&(j=i.nodeType==1&&i.getAttribute(apf.xmldb.xmlIdTag))?"@"+apf.xmldb.xmlIdTag+"='"+j+"'":apf.getChildNumber(i,i.parentNode.selectNodes(i.nodeType==1?i.tagName:"text()"))+1)+"]"),i=i.parentNode}return(h[0]=="/"||b&&b.nodeType==1?"":"/")+h.join("/")},apf.xpathToXml=function(a,b){return b?b.selectSingleNode(a):!1},apf.n=function(a,b){return new apf.xmlset(a,b,!0)},apf.b=function(a,b){return new apf.xmlset(a,b)},apf.b.$queue=[],apf.b.$state=0,apf.xmlset=function(a,b,c,d){typeof a=="string"&&(a=apf.getXml(a)),this.$xml=a,a&&(this.$nodes=a.dataType==apf.ARRAY?a:b?a.selectNodes(b):[a]),this.$xpath=b||".",this.$local=c,this.$previous=d},function(){this.add=function(){},this.begin=function(){return apf.b.$state=1,this},this.commit=function(a,b,c){if(apf.b.$queue.length){if(b){var d=this;b.addEventListener("rdbsend",function(a){if(!c||a.uri==c)d.rdbstack=a.message,b.removeEventListener("rdbsend",arguments.callee)})}a.execute({action:"multicall",args:apf.b.$queue}),b&&b.$processQueue(b)}return apf.b.$queue=[],apf.b.$state=0,this},this.rollback=function(){return apf.b.$queue=[],apf.b.$state=0,this},this.getRDBMessage=function(){return this.rdbstack||[]},this.before=function(a){a=typeof a=="function"?a(c):a;for(var b,c=0,d=this.$nodes.length;c<d;c++)b=this.$nodes[c],this.$local?b.parentNode.insertBefore(a,b):apf.xmldb.appendChild(b.parentNode,a,b);return this},this.after=function(a){a=typeof a=="function"?a(c):a;for(var b,c=0,d=this.$nodes.length;c<d;c++)b=this.$nodes[c],this.$local?b.parentNode.insertBefore(a,b.nextSibling):apf.xmldb.appendChild(b.parentNode,a,b.nextSibling);return this},this.andSelf=function(){},this.append=function(a){for(var b,c,d=0,e=this.$nodes.length;d<e;d++)b=this.$nodes[d],c=typeof a=="function"?a(d,b):a,apf.b.$state?apf.b.$queue.push({action:"appendChild",args:[b,c]}):this.$local?b.appendChild(c):apf.xmldb.appendChild(b,c);return this},this.appendTo=function(a){for(var b=0,c=this.$nodes.length;b<c;b++)a.appendChild(this.$nodes[b]);return this},this.prepend=function(a){for(var b,c=0,d=this.$nodes.length;c<d;c++)b=this.$nodes[c],b.insertBefore(typeof el=="function"?el(c,b):el,b.firstChild);return this},this.prependTo=function(a){for(var b=0,c=this.$nodes.length;b<c;b++)target.insertBefore(this.$nodes[b],target.firstChild);return this},this.attr=function(a,b){if(b===undefined)return this.$nodes&&this.$nodes[0]&&this.$nodes[0].getAttribute(a)||"";for(var c=0,d=this.$nodes.length;c<d;c++)apf.b.$state?apf.b.$queue.push({action:"setAttribute",args:[this.$nodes[c],a,b]}):this.$local?this.$nodes[c].setAttribute(a,b):apf.xmldb.setAttribute(this.$nodes[c],a,b);return this},this.removeAttr=function(a){for(var b=0,c=this.$nodes.length;b<c;b++)apf.b.$state?apf.b.$queue.push({action:"removeAttribute",args:[this.$nodes[b],a]}):this.$local?this.$nodes[b].removeAttribute(a):apf.xmldb.removeAttribute(this.$nodes[b],a);return this},this.xml=function(){var a=[];for(var b=0,c=this.$nodes.length;b<c;b++)a.push(this.$nodes[b].xml);return a.join("\n")},this.get=this.index=function(a){if(a==undefined)return apf.getChildNumber(this.$nodes[0],this.$nodes[0].parentNode.getElementsByTagName("*"))},this.eq=function(a){return a<0?this.$nodes[this.$nodes.length-a]:this.$nodes[a]},this.size=this.length=function(){return this.$nodes.length},this.load=function(a){},this.next=function(a){return a||(a="node()[local-name()]"),new apf.xmlset(this.$xml,"((following-sibling::"+(this.$xpath=="."?"node()":this.$xpath)+")[1])[self::"+a.split("|").join("|self::")+"]",this.$local,this)},this.nextAll=function(a){return a||(a="node()[local-name()]"),new apf.xmlset(this.$xml,"(following-sibling::"+(this.$xpath=="."?"node()":this.$xpath)+")[self::"+a.split("|").join("|self::")+"]",this.$local,this)},this.nextUntil=function(){},this.prev=function(a){return a||(a="node()[local-name()]"),new apf.xmlset(this.$xml,"((preceding-sibling::"+(this.$xpath=="."?"node()":this.$xpath)+")[1])[self::"+a.split("|").join("|self::")+"]",this.$local,this)},this.prevAll=function(a){return a||(a="node()[local-name()]"),new apf.xmlset(this.$xml,"(preceding-sibling::"+(this.$xpath=="."?"node()":this.$xpath)+")[self::"+a.split("|").join("|self::")+"]",this.$local,this)},this.not=function(){},this.parent=function(a){return new apf.xmlset(this.$xml.parentNode,this.$local,this)},this.parents=function(a){},this.pushStack=function(){},this.replaceAll=function(){},this.replaceWith=function(a){for(var b,c,d=0,e=this.$nodes.length;d<e;d++)b=this.$nodes[d],c=typeof a=="function"?a(d,b):a,apf.b.$state?apf.b.$queue.push({action:"replaceNode",args:[c,b]}):this.$local?b.parentNode.replaceChild(c,b):apf.xmldb.replaceNode(c,b);return this},this.siblings=function(a){},this.text=function(){},this.toArray=function(){var a=[];for(var b=0,c=this.$nodes.length;b<c;b++)a.push(this.$nodes[b]);return a},this.detach=function(a){var b=[];for(var c,d=0,e=this.$nodes.length;d<e;d++){c=this.$nodes[d];if(!c.selectSingleNode("self::node()["+a+"]"))continue;apf.b.$state?apf.b.$queue.push({action:"removeNode",args:[c]}):this.$local?c.parentNode.removeChild(c):apf.xmldb.removeNode(c),b.push(c)}return new apf.xmlset(b,"",this.$local,this)},this.remove=function(a){for(var b,c=this.$nodes,d=c.length-1;d>=0;d--){b=c[d];if(a&&!b.selectSingleNode("self::node()["+a+"]"))continue;apf.b.$state?apf.b.$queue.push({action:"removeNode",args:[b]}):this.$local?b.parentNode.removeChild(b):apf.xmldb.removeNode(b)}return this},this.children=function(a){var b=[];for(var c,d,e=0,f=this.$nodes.length;e<f;e++){var g=(c=this.$nodes[e]).selectNodes(a);for(var h=0,i=g.length;h<i;h++)b.push(g[h])}return new apf.xmlset(b,null,this.$local,this)},this.children2=function(a){return new apf.xmlset(this.$xml,"("+this.$xpath+")/node()[self::"+a.split("|").join("|self::")+"]",this.$local,this)},this.has=this.find=function(a){return new apf.xmlset(this.$xml,"("+this.$xpath+")//"+a.split("|").join("|self::"),this.$local,this)},this.query=function(a){return new apf.xmlset(this.$xml,"("+this.$xpath+")/"+a.split("|").join("|("+this.$xpath+")/"),this.$local,this)},this.filter=function(a){var b=[];for(var c=0,d=this.$nodes.length;c<d;c++)this.$nodes[c].selectSingleNode("self::node()["+a+"]")&&b.push(this.$nodes[c]);return new apf.xmlset(b,null,this.$local,this)},this.end=function(){return this.$previous||this},this.is=function(a){return this.filter(a)?!0:!1},this.contents=function(){return this.children("node()")},this.has=function(){},this.val=function(a){return a!==undefined?(apf.setQueryValue(this.$xml,this.$xpath,a),this):apf.queryValue(this.$xml,this.$xpath)},this.vals=function(){return apf.queryValues(this.$xml,this.$xpath)},this.node=function(){return apf.queryNode(this.$xml,this.$xpath)},this.nodes=function(){return apf.queryNodes(this.$xml,this.$xpath)},this.clone=function(a){if(this.$nodes.length==1)return new apf.xmlset(this.$nodes[0].cloneNode(!0),"",this.$local,this);var b=[];for(var c=0,d=this.$nodes.length;c<d;c++)b.push(this.$nodes[c].cloneNode(a==undefined?!0:a));return new apf.xmlset(b,"",this.$local,this)},this.context=function(){return this.$xml},this.data=function(a){for(var b=0,c=this.$nodes.length;b<c;b++)apf.setQueryValue(this.$nodes[b],".",a);return this},this.each=function(a){for(var b=0,c=this.$nodes.length;b<c;b++)a.call(this.$nodes[b],b);return this},this.eachrev=function(a){for(var b=this.$nodes.length-1;b>=0;b--)a.call(this.$nodes[b],b);return this},this.map=function(a){var b=[];for(var c=0,d=this.$nodes.length;c<d;c++)b.push(a(this.$nodes[c]));return new apf.xmlset(b,"",this.$local,this)},this.empty=function(){return this.children().detach(),this},this.first=function(){return new apf.xmlset(this.$xml,"("+this.$xpath+")[1]",this.$local,this)},this.last=function(){return new apf.xmlset(this.$xml,"("+this.$xpath+")[last()]",this.$local,this)}}.call(apf.xmlset.prototype),apf.zmanager=function(){var a={"default":{level:10},plane:{level:1e5},popup:{level:2e5},notifier:{level:3e5},drag:{level:4e5},print:{level:1e6}};this.set=function(b,c,d){c.style.zIndex=a[b].level++,d&&(d.$storedZ=d.style.zIndex,d.style.zIndex=a[b].level++)},this.clear=function(a,b){b.style.zIndex==parseInt(a.style.zIndex)+1&&(b.style.zIndex=b.$storedZ),b.$storedZ=undefined}},apf.history={inited:!1,page:null,past:[],future:[],delay:1,init:function(a,b,c){function f(){d=apf.dispatchEvent("hashinit")||location.href.match(/#(.*)$/)&&decodeURI(RegExp.$1)||apf._GET[b||-1]||a,location.hash=d,e.hasChanged(d||null)}if(this.inited||window.history.pushState)return;c&&(this.delay=c),this.inited=!0;var d,e=this;if(apf.supportHashChange)$setTimeout(function(){f(),window.onhashchange=function(){var a=location.hash.replace("#","");apf.history.hasChanged(decodeURI(a))}});else if(apf.isIE){f();var g="<style>                    BODY, HTML{margin:0}                    h1{height:100px; margin:0; padding:0; overflow:hidden}                </style>                <body>                    <h1 id='"+d+"'>0</h1>                </body>                <script>                    var lastURL = -1;                    if (document.all)                        document.body.onscroll = checkUrl;                    else                        setInterval('checkUrl()', 200);                                        function checkUrl(){                        var iScr = (document.all ? document.body : document.documentElement).scrollTop;                        if (lastURL == iScr) return;                        top.apf.history.hasChanged(document.getElementsByTagName('h1')[Math.round(iScr / 100)].id, true);                        lastURL = iScr;                        }                    checkUrl();                </script>";top==self&&(document.body.insertAdjacentHTML("beforeend","<iframe name='nav' style2='position:absolute;left:10px;top:10px;height:100px;width:100px;z-index:1000'                       style='width:1px;height:1px;' src='about:blank'></iframe>"),document.frames.nav.document.open(),document.frames.nav.document.write(g),document.frames.nav.document.close()),this.iframe=document.frames.nav,this.timer2=setInterval(function(){if(!apf.history.changingHash&&location.hash!="#"+apf.history.page){var a=location.hash.replace(/^#/,""),b=apf.history.page;apf.history.setHash(a,!0,!0),apf.history.page=b,apf.history.hasChanged(a)}},apf.history.delay||1)}else f(),apf.history.lastUrl=location.href.toString(),this.timer2=setInterval(function(){if(apf.history.lastUrl==location.href.toString())return;apf.history.lastUrl=location.href.toString();var a=location.hash.replace("#","");apf.history.hasChanged(decodeURI(a))},20)},to_name:null,setHash:function(a,b,c){if(this.changing||this.page==a||!c&&decodeURIComponent(location.hash)=="#"+decodeURIComponent(a)){this.to_name=a;return}if(!apf.supportHashChange&&apf.isIE&&!b)return this.to_name=a,$setTimeout(function(){apf.history.setHash(apf.history.to_name,!0,c)},200);this.changePage(a);if(!this.inited)return this.init(a);if(!apf.supportHashChange&&apf.isIE){var d=this.iframe.document.body.appendChild(this.iframe.document.createElement("h1"));d.id=a,d.innerHTML="1"}(!apf.supportHashChange&&apf.isIE?this.iframe:window).location.href="#"+a,!apf.isIE&&!apf.isGecko&&!apf.isIphone&&(apf.history.lastUrl=location.href.toString())},timer:null,changePage:function(a,b){!apf.supportHashChange&&apf.isIE&&(this.page=a,this.changingHash=!0,clearTimeout(this.timer),this.timer=$setTimeout(function(){location.hash=a,apf.history.changingHash=!1},1))},update:function(a){var b,c,d=0;for(b=0,c=this.past.length;b<c&&d===0;b++)this.past[b]==a&&(d=b+1);if(d>0)this.future=this.past.slice(d,this.past.length-1).concat(this.future).makeUnique(),this.past.splice(d,this.past.length-d),d=-d;else{for(b=0,c=this.future.length;b<c&&d===0;b++)this.future[b]==a&&(d=b+1,this.past=this.past.concat(this.future.splice(0,this.future.length-d)).makeUnique());d===0&&(this.past.push(a),d=1)}return d},hasChanged:function(a,b){if(a==this.page&&!b)return;this.changePage(a,b),this.changing=!0,apf.dispatchEvent("hashchange",{oldURL:this.page,newURL:a,page:a,index:this.update(a)})===!1&&(a=location.hash=this.page),this.changing=!1,this.page=a}},apf.config=(new apf.Class).$init(),apf.extend(apf.config,{disableRightClick:!1,allowSelect:!1,allowBlur:!0,autoDisableActions:!0,autoDisable:!1,disableF5:!0,autoHideLoading:!0,disableSpace:!0,defaultPage:"home",disableBackspace:!0,undokeys:!1,outline:!1,dragOutline:!1,resizeOutline:!1,autoDisableNavKeys:!0,disableTabbing:!1,resourcePath:null,initdelay:!0,liveText:!1,skinset:"default",name:apf.isO3?"o3App":self.window&&window.location.href.replace(/[^0-9A-Za-z_]/g,"_"),tags:{},defaults:{},baseurl:"",model:"@default","empty-message":"No items","loading-message":"Loading...","offline-message":"You are currently offline.",setDefaults:function(){},getDefault:function(a,b){var c=this.defaults[a];if(!c)return;for(var d=c.length-1;d>=0;d--)if(c[d][0]==b)return c[d][1]},$handlePropSet:function(a,b){this[a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})]=this[a]=b,(this.$propHandlers&&this.$propHandlers[a]||apf.GuiElement.propHandlers[a]||apf.K).call(this,b)},$inheritProperties:{},$propHandlers:{baseurl:function(a){this.baseurl=apf.parseExpression(a)},language:function(a){},"resource-path":function(a){this.resourcePath=apf.parseExpression(a||"").replace(/resources\/?|\/$/g,"")},skinset:function(a){this.$amlLoaded&&apf.skins.changeSkinset(a)},outline:function(a){this.dragOutline=this.resizeOutline=this.outline=apf.isTrue(a)},"drag-outline":function(a){this.dragOutline=a?apf.isTrue(a):!1},"resize-outline":function(a){this.resizeOutline=a?!apf.isFalse(a):!1},login:function(a,b){apf.auth.init(b)},debug:function(a){apf.debug=a}}}),apf.history&&apf.addEventListener("load",function(){apf.history.init(apf.config.defaultPage,"page")}),apf.offline={onLine:!0},apf.saveData=apf.getData=function(a,b){if(!a)return!1;var c,d=a.charAt(0),e=b.callback,f=function(a,c,d){var e=b.callback;return c!=apf.SUCCESS?e(a,c,d||{}):e(a,c,d||{})};b||(b={});var g=b.fParsed||(a.indexOf("{")>-1||a.indexOf("[")>-1?apf.lm.compile(a,{withopt:!0,precall:b.precall,alwayscb:!0,simplexpath:!0}):{str:a,type:2});b.precall&&!b._pc&&(b.asyncs=g.asyncs,b._pc=1);if(g.type==3){if(g.xpaths[0]){var h=g.xpaths[0],i=g.xpaths[1];if(h=="#"||i=="#"){var j=apf.lm.compile(a,{xpathmode:5})();if(typeof j!="string"){h=j.model&&j.model.$isModel&&j.model;if(h)i=j.xpath;else if(j.model)h=apf.xmldb.findModel(j.model),i=apf.xmlToXpath(j.model,h.data)+(j.xpath?"/"+j.xpath:"");else return}else h=null}else h=apf.nameserver.get("model",h);return f(h.data.selectSingleNode(i),apf.SUCCESS,{})}return f(b.xmlNode.data.selectSingleNode(g.xpaths[1]),apf.SUCCESS,{})}if(d=="<")if(g.type==2)c=g.str;else return g(b.xmlNode,f,b);else{if(d=="["||d=="{")return g(b.xmlNode,f,b);if(g.type==1||g.type==3){var k=e;e=b.callback=function(a,c,d){if(b._pc===!0)return;if(c!=apf.SUCCESS)return k.apply(this,arguments);var g=a.split(" "),h="get";g.length>1&&g[0].length<10?(h=g.shift(),g=g.join(" ")):g=a,e=b.callback=k,apf.oHttp.exec(h,[g],f,b)},g(b.xmlNode,f,b)}else{if(b._pc===!0)return;var l=a.split(" "),m="get";l.length>1&&l[0].length<10?(m=l.shift(),l=l.join(" ")):l=a,apf.oHttp.exec(m,[l.replace(/\\/g,"")],f,b)}}if(c)if(e)f(c,apf.SUCCESS,{});else return c},apf.setModel=function(a,b){if(!a)return;var c=a.indexOf("{")>-1||a.indexOf("[")>-1?apf.lm.compile(a,{alwayscb:!0}):{type:2,str:a};if(a=="@default"||c.type==2){var d=apf.nameserver.get("model",a);if(d)return d.register(b);if(a=="@default")return;if(a.indexOf(".")==-1&&a.indexOf("/")==-1)return}if(c.type==3&&c.models&&c.xpaths.length==2&&c.xpaths[0]!="#"&&c.xpaths[1]!="#"){apf.nameserver.get("model",c.xpaths[0]).register(b,c.xpaths[1]);return}b.clear&&b.clear("loading"),apf.getData(a,{parsed:c,xmlNode:b&&b.xmlRoot,callback:function(c,d,e){if(d!=apf.SUCCESS)throw new Error(apf.formatErrorString(0,null,"Loading new data","Could not load data into model.                 \nMessage: "+e.message+"                \nInstruction: '"+a+"'"));if(!c)return b.clear&&b.clear();if(typeof c=="string")if(c.charAt(0)=="<")c=apf.getXml(c);else{if(c.indexOf("http://")==0)return apf.setModel(c,b);throw new Error("Invalid data from server")}if(c.nodeFunc){c.register(b);return}var f=apf.xmldb.findModel(c);f?f.register(b,apf.xmlToXpath(c,f.data)):(new apf.model).register(b).load(c)}})},function(){var a={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]},b=Date,c=b.prototype,d=function(a,b){return b||(b=2),("000"+a).slice(b*-1)};c.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},c.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},b.today=function(){return(new Date).clearTime()},b.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b)},b.equals=function(a,b){return a.compareTo(b)===0},b.getDayNumberFromName=function(b){var c=a.dayNames,d=a.abbreviatedDayNames,e=a.shortestDayNames,f=b.toLowerCase();for(var g=0;g<c.length;g++)if(c[g].toLowerCase()==f||d[g].toLowerCase()==f||e[g].toLowerCase()==f)return g;return-1},b.getMonthNumberFromName=function(b){var c=a.monthNames,d=a.abbreviatedMonthNames,e=b.toLowerCase();for(var f=0;f<c.length;f++)if(c[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},b.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},b.getDaysInMonth=function(a,c){return[31,b.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][c]},b.getTimezoneAbbreviation=function(b){var c=a.timezones,d;for(var e=0;e<c.length;e++)if(c[e].offset===b)return c[e].name;return null},b.getTimezoneOffset=function(b){var c=a.timezones,d;for(var e=0;e<c.length;e++)if(c[e].name===b.toUpperCase())return c[e].offset;return null},c.clone=function(){return new Date(this.getTime())},c.compareTo=function(a){return Date.compare(this,a)},c.equals=function(a){return Date.equals(this,a||new Date)},c.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},c.isAfter=function(a){return this.compareTo(a||new Date)===1},c.isBefore=function(a){return this.compareTo(a||new Date)===-1},c.isToday=c.isSameDay=function(a){return this.clone().clearTime().equals((a||new Date).clone().clearTime())},c.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a*1),this},c.addSeconds=function(a){return this.addMilliseconds(a*1e3)},c.addMinutes=function(a){return this.addMilliseconds(a*6e4)},c.addHours=function(a){return this.addMilliseconds(a*36e5)},c.addDays=function(a){return this.setDate(this.getDate()+a*1),this},c.addWeeks=function(a){return this.addDays(a*7)},c.addMonths=function(a){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+a*1),this.setDate(Math.min(c,b.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},c.addYears=function(a){return this.addMonths(a*12)},c.add=function(a){if(typeof a=="number")return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;c.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),f<=2?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,k<0?m=53-((j-l)/5|0):k>364+l?m=1:m=(k/7|0)+1,e=f=g=null,m},c.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},c.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};var h=function(a,b,c,d){if(typeof a=="undefined")return!1;if(typeof a!="number")throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0};b.validateMillisecond=function(a){return h(a,0,999,"millisecond")},b.validateSecond=function(a){return h(a,0,59,"second")},b.validateMinute=function(a){return h(a,0,59,"minute")},b.validateHour=function(a){return h(a,0,23,"hour")},b.validateDay=function(a,c,d){return h(a,1,b.getDaysInMonth(c,d),"day")},b.validateMonth=function(a){return h(a,0,11,"month")},b.validateYear=function(a){return h(a,0,9999,"year")},c.set=function(a){return b.validateMillisecond(a.millisecond)&&this.addMilliseconds(a.millisecond-this.getMilliseconds()),b.validateSecond(a.second)&&this.addSeconds(a.second-this.getSeconds()),b.validateMinute(a.minute)&&this.addMinutes(a.minute-this.getMinutes()),b.validateHour(a.hour)&&this.addHours(a.hour-this.getHours()),b.validateMonth(a.month)&&this.addMonths(a.month-this.getMonth()),b.validateYear(a.year)&&this.addYears(a.year-this.getFullYear()),b.validateDay(a.day,this.getFullYear(),this.getMonth())&&this.addDays(a.day-this.getDate()),a.timezone&&this.setTimezone(a.timezone),a.timezoneOffset&&this.setTimezoneOffset(a.timezoneOffset),a.week&&h(a.week,0,53,"week")&&this.setWeek(a.week),this},c.moveToFirstDayOfMonth=function(){return this.set({day:1})},c.moveToLastDayOfMonth=function(){return this.set({day:b.getDaysInMonth(this.getFullYear(),this.getMonth())})},c.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},c.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+=7*(b||1):c)},c.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+=12*(b||1):c)},c.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},c.getTimezone=function(){return b.getTimezoneAbbreviation(this.getUTCOffset())},c.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=Number(a)*-6/10;return this.addMinutes(c-b)},c.setTimezone=function(a){return this.setTimezoneOffset(b.getTimezoneOffset(a))},c.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},c.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()},c.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;return a<0?(b=(a-1e4).toString(),b.charAt(0)+b.substr(2)):(b=(a+1e4).toString(),"+"+b.substr(1))},c.getUTCTime=function(){return Date.UTC(this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds(),this.getUTCMilliseconds())},c.getElapsed=function(a){return(a||new Date)-this},c.toISOString||(c.toISOString=function(){function a(a){return a<10?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),c._toString=c.toString,c.toString=function(b){var c=this;if(b&&b.length==1){var e=a.formatPatterns;c.t=c.toString;switch(b){case"d":return c.t(e.shortDate);case"D":return c.t(e.longDate);case"F":return c.t(e.fullDateTime);case"m":return c.t(e.monthDay);case"r":return c.t(e.rfc1123);case"s":return c.t(e.sortableDateTime);case"t":return c.t(e.shortTime);case"T":return c.t(e.longTime);case"u":return c.t(e.universalSortableDateTime);case"y":return c.t(e.yearMonth)}}var f=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return b?b.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(b){if(b.charAt(0)==="\\")return b.replace("\\","");c.h=c.getHours;switch(b){case"hh":return d(c.h()<13?c.h()===0?12:c.h():c.h()-12);case"h":return c.h()<13?c.h()===0?12:c.h():c.h()-12;case"HH":return d(c.h());case"H":return c.h();case"mm":return d(c.getMinutes());case"m":return c.getMinutes();case"ss":return d(c.getSeconds());case"s":return c.getSeconds();case"yyyy":return d(c.getFullYear(),4);case"yy":return d(c.getFullYear());case"dddd":return a.dayNames[c.getDay()];case"ddd":return a.abbreviatedDayNames[c.getDay()];case"dd":return d(c.getDate());case"d":return c.getDate();case"MMMM":return a.monthNames[c.getMonth()];case"MMM":return a.abbreviatedMonthNames[c.getMonth()];case"MM":return d(c.getMonth()+1);case"M":return c.getMonth()+1;case"t":return c.h()<12?a.amDesignator.substring(0,1):a.pmDesignator.substring(0,1);case"tt":return c.h()<12?a.amDesignator:a.pmDesignator;case"S":return f(c.getDate());default:return b}}):this._toString()}}(),apf.layout={compile:function(a){var b=this.layouts[a.getAttribute("id")];if(!b)return!1;var c=b.root.copy();b.layout.compile(c),b.layout.reset()},removeAll:function(a){a.children.length=null;var b=this.getHtmlId(a.pHtml);this.rules[b]||delete this.qlist[b]},timer:null,qlist:{},dlist:[],$hasQueue:!1,queue:function(a,b,c,d){d||(this.$hasQueue=!0,d=this.qlist);var e;(e=this.getHtmlId(a))||(e=apf.setUniqueHtmlId(a));if(d[e]){b&&d[e][2].push(b),c&&(d[e][1]=c);return}d[e]=[a,c,[b]],this.timer||(this.timer=apf.setZeroTimeout(function(){apf.layout.processQueue()}))},processQueue:function(){var a,b,c,d,e;for(a=0;a<this.dlist.length;a++)this.dlist[a].hidden?this.dlist[a].hide():this.dlist[a].show();do{var f={},g=this.qlist;this.qlist={},this.$hasQueue=!1;for(b in g){d=g[b],d[1]&&apf.layout.compileAlignment(d[1]),e=d[2];for(a=0,c=e.length;a<c;a++)if(e[a]){if(e[a].$amlDestroyed)continue;e[a].$updateLayout()}apf.layout.activateRules(d[0])}}while(this.$hasQueue);apf.hasSingleRszEvent&&apf.layout.forceResize(),this.dlist=[],clearTimeout(this.timer),this.timer=null},rules:{},onresize:{},getHtmlId:function(a){return a.getAttribute?a.getAttribute("id"):1},setRules:function(a,b,c,d){this.getHtmlId(a)||apf.setUniqueHtmlId(a),this.rules[this.getHtmlId(a)]||(this.rules[this.getHtmlId(a)]={});var e=this.rules[this.getHtmlId(a)][b];!d&&e?this.rules[this.getHtmlId(a)][b]=c+"\n"+e:this.rules[this.getHtmlId(a)][b]=c},getRules:function(a,b){return b?this.rules[this.getHtmlId(a)][b]:this.rules[this.getHtmlId(a)]},removeRule:function(a,b){var c=this.getHtmlId(a);if(!this.rules[c])return;var d=this.rules[c][b]||!1;delete this.rules[c][b];var e;for(e in this.rules[c]);e||delete this.rules[c];if(apf.hasSingleRszEvent)if(this.onresize[c])this.onresize[c]=null;else{var f=a.parentNode;while(f&&f.nodeType==1&&!this.onresize[f.getAttribute("id")])f=f.parentNode;if(f&&f.nodeType==1){var g=this.onresize[f.getAttribute("id")];g.children&&delete g.children[c]}}return d},activateRules:function(a,b){if(!a){var c,d;for(c in this.rules){d=document.getElementById(c);if(!d||d.onresize)continue;this.activateRules(d)}apf.hasSingleRszEvent&&apf.layout.$onresize&&apf.layout.$onresize();return}var e,f,g,h,i=[];if(!apf.hasSingleRszEvent){h=this.rules[this.getHtmlId(a)];if(!h)return a.onresize=null,!1;for(f in h){if(typeof h[f]!="string")continue;i.push(h[f])}e=apf.needsCssPx?new Function(i.join("\n")):new Function(i.join("\n").replace(/ \+ 'px'|try\{\}catch\(e\)\{\}\n/g,"")),a.onresize=e,b||e()}else{var j=this.getHtmlId(a);h=this.rules[j];if(!h)return!1;for(f in h){if(typeof h[f]!="string")continue;i.push(h[f])}var k=a.parentNode;while(k&&k.nodeType==1&&!this.onresize[k.getAttribute("id")])k=k.parentNode;var l=new Function(i.join("\n"));this.onresize[j]&&(l.children=this.onresize[j].children);if(k&&k.nodeType==1){var m=this.onresize[k.getAttribute("id")];this.onresize[j]=(m.children||(m.children={}))[j]=l}else this.onresize[j]=l;b||l();if(!apf.layout.$onresize){var e=function(a){try{var b=[];for(var c in a)a[c]&&b.unshift(a[c]);for(var d=0;d<b.length;d++)b[d](),b[d].children&&e(b[d].children)}catch(f){}};apf.addListener(window,"resize",apf.layout.$onresize=function(){e(apf.layout.onresize)})}}},forceResize:function(a){if(apf.hasSingleRszEvent)return apf.layout.$onresize&&apf.layout.$onresize();var b=a.onresize;b&&b();var c=a.getElementsByTagName("*");for(var d=0,e=c.length;d<e;d++)c[d]&&c[d].onresize&&c[d].onresize()},paused:{},pause:function(a,b){if(apf.hasSingleRszEvent){var c=this.getHtmlId(a);this.paused[c]=this.onresize[c]||!0,b?(this.onresize[c]=b,this.onresize[c].children=this.paused[c].children,b()):delete this.onresize[c]}else this.paused[this.getHtmlId(a)]=a.onresize||!0,b?(a.onresize=b,b()):a.onresize=null},play:function(a){if(!this.paused[this.getHtmlId(a)])return;if(apf.hasSingleRszEvent){var b=this.getHtmlId(a),c=this.paused[b];typeof c=="function"?this.onresize[b]=c:delete this.onresize[b],apf.layout.$onresize&&apf.layout.$onresize(),this.paused[this.getHtmlId(a)]=null}else{var c=this.paused[this.getHtmlId(a)];typeof c=="function"?(a.onresize=c,c()):a.onresize=null,this.paused[this.getHtmlId(a)]=null}}},apf.getWindowWidth=function(){return apf.isIE?document.documentElement.offsetWidth-apf.windowHorBorder:window.innerWidth},apf.getWindowHeight=function(){return apf.isIE?document.documentElement.offsetHeight-apf.windowVerBorder:window.innerHeight},apf.setZeroTimeout=window.postMessage?function(){function c(c){a.push(c),window.postMessage(b,"*")}function d(c){c||(c=event),c.source==window&&c.data==b&&(apf.stopPropagation(c),a.length>0&&a.shift()())}var a=[],b="zero-timeout-message";return apf.addListener(window,"message",d,!0),c}():function(){$setTimeout.apply(null,arguments)},apf.queue={q:{},timer:null,add:function(a,b){this.q[a]=b,this.timer||(this.timer=apf.setZeroTimeout(function(){apf.queue.empty()}))},remove:function(a){delete this.q[a]},empty:function(a){clearTimeout(this.timer),this.timer=null,apf.layout&&apf.layout.$hasQueue&&apf.layout.processQueue(),apf.xmldb&&apf.xmldb.$hasQueue&&apf.xmldb.notifyQueued();var b=this.q;this.q={};for(var a in b){var c=b[a];c&&(delete b[a],c())}}},apf.resize=function(){this.scales={scalex:!1,scaley:!1,scaleratio:!1,dwidth:0,dheight:0,snap:!1,gridW:48,gridH:48},this.htmlElement;var a=[];this.init=function(){a=[new apf.resize.square("top","left",this),new apf.resize.square("top","middle",this),new apf.resize.square("top","right",this),new apf.resize.square("middle","left",this),new apf.resize.square("middle","right",this),new apf.resize.square("bottom","left",this),new apf.resize.square("bottom","middle",this),new apf.resize.square("bottom","right",this)]},this.grab=function(b,c){this.htmlElement=b,this.scales=c,a.length||this.init(),this.show()},this.hide=function(){for(var b=0,c=a.length;b<c;b++)a[b].visible=!1,a[b].repaint()},this.show=function(){var b=this.scales.scalex,c=this.scales.scaley,d=this.scales.scaleratio;for(var e=0,f=a.length,g;e<f;e++)g=a[e],g.visible=b&&c?!0:c&&!b?g.posX=="middle"?!0:!1:b&&!c?g.posY=="middle"?!0:!1:d?g.posY!="top"&&g.posY!="bottom"||g.posX==="middle"?!1:!0:!1,g.repaint()},this.destroy=function(){for(var b=0;b<a.length;b++)a[b].destroy()}},apf.resize.square=function(a,b,c){this.visible=!0,this.posX=b,this.posY=a;var d=0,e=this;this.htmlElement=c.htmlElement.parentNode.appendChild(document.createElement("div")),apf.setStyleClass(this.htmlElement,"square"),this.repaint=function(){if(this.visible){var e=c.htmlElement;this.htmlElement.style.display="block";var f=parseInt(e.style.width)+apf.getDiff(e)[0],g=parseInt(e.style.height)+apf.getDiff(e)[1],h=parseInt(e.style.top),i=parseInt(e.style.left),j=this.htmlElement.offsetWidth,k=this.htmlElement.offsetHeight,l=a=="top"?h-d-k:a=="middle"?h+g/2-k/2:h+g+d,m=b=="left"?i-d-j:b=="middle"?i+f/2-j/2:i+f+d,n=a=="middle"?"w-resize":b=="middle"?"n-resize":a+b=="topleft"||a+b=="bottomright"?"nw-resize":"ne-resize";this.htmlElement.style.top=l-1+"px",this.htmlElement.style.left=m-1+"px",this.htmlElement.style.cursor=n}else{var j=this.htmlElement.offsetWidth;this.htmlElement.style.display="none"}},this.destroy=function(){apf.destroyHtmlNode(this.htmlElement)},this.htmlElement.onmouseover=function(a){apf.setStyleClass(e.htmlElement,"squareHover")},this.htmlElement.onmouseout=function(a){apf.setStyleClass(e.htmlElement,"",["squareHover"])},this.htmlElement.onmousedown=function(a){a=a||event;var b=c.htmlElement,d=a.clientX,f=a.clientY,g=b.parentNode.offsetTop,h=b.parentNode.offsetLeft,i=c.scales.dwidth,j=c.scales.dheight,k=c.scales.snap,l=c.scales.gridH,m=c.scales.gridW,n=apf.flow.isBlock(b),o=n.other.ratio,p=e.posX,q=e.posY,r,s,t,u,v,w,x,y,z=parseInt(b.style.left),A=parseInt(b.style.top),B=parseInt(b.style.width),C=parseInt(b.style.height),D=!1;c.onresizedone(B,C,A,z),a.preventDefault&&a.preventDefault(),document.onmousemove=function(a){a=a||event,v=a.clientX-d,w=a.clientY-f;var e=a.shiftKey,g=o;if(e){p=="right"&&q=="bottom"?(r=B+v,s=r/g,u=z,t=A):p=="right"&&q=="top"?(r=B+v,s=r/g,u=z,t=A-v/g):p=="left"&&q=="bottom"?(r=B-v,s=r/g,u=z+v,t=A):p=="left"&&q=="top"&&(r=B-v,s=r/g,u=z+v,t=A+v/g);if(r>=i&&s>=j)r=x=Math.max(i,r),s=y=Math.max(j,s);else return r=x,s=y,!1}else r=p=="right"?B+v:p=="left"?B-v:B,s=q=="bottom"?C+w:q=="top"?C-w:C,u=p=="right"?z:p=="left"?Math.min(z+B-i,z+v):z,t=q=="bottom"?A:q=="top"?Math.min(A+C-j,A+w):A,r=Math.max(i,r),s=Math.max(j,s);k&&(u=Math.floor(u/m)*m,t=Math.floor(t/l)*l,r=Math.ceil(r/m)*m,s=Math.ceil(s/l)*l),c.onresize&&c.onresize(b,t,u,r,s),c.show(),D=!0},document.onmouseup=function(a){document.onmousemove=null,c.onresizedone&&D&&(c.onresizedone(r,s,t,u),n.other.ratio=r/s,D=!1)}}},apf.skins={skins:{},css:[],events:["onmousemove","onmousedown","onmouseup","onmouseout","onclick","ondragcopy","ondragstart","ondblclick"],Init:function(a,b,c){var d=(b?b.getAttribute("id"):null)||a.getAttribute("id"),e=(b?(b.getAttribute("src")||"").match(/\//)||c:"")?(c||b.getAttribute("src")).replace(/\/[^\/]*$/,"")+"/":"",f=null,g=null;f=a.getAttribute("media-path"),f!==null?f=apf.getAbsolutePath(e||apf.hostPath,f):b&&(f=b.getAttribute("media-path"),f!==null?f=apf.getAbsolutePath(apf.hostPath,f):f=apf.getAbsolutePath(e||apf.hostPath,"images/")),g=a.getAttribute("icon-path"),g!==null?g=apf.getAbsolutePath(e||apf.hostPath,g):b&&(g=b.getAttribute("icon-path"),g!==null?g=apf.getAbsolutePath(apf.hostPath,g):g=apf.getAbsolutePath(e||apf.hostPath,"icons/")),d||(d="default"),a.getAttribute("id")&&(document.body.className+=" "+a.getAttribute("id"));var h=d.split("|");d=h[0];if(!this.skins[d]||d=="default"){this.skins[d]={base:e,name:d,iconPath:g,mediaPath:f,templates:{},originals:{},xml:a};if(h.length>1)for(var i=0;i<h.length;i++)this.skins[h[i]]=this.skins[d]}!this.skins["default"]&&this.$first==b&&(this.skins["default"]=this.skins[d]);var j=a.childNodes;for(var i=j.length-1;i>=0;i--){if(j[i].nodeType!=1)continue;this.skins[d].templates[j[i].getAttribute("name")]=j[i],j[i].ownerDocument&&this.importSkinDef(j[i],e,d)}this.purgeCss(f,g);if(this.queue[d])for(var k in this.queue[d])this.queue[d][k]()},loadStylesheet:function(filename,title){var o;with(o=document.getElementsByTagName("head")[0].appendChild(document.createElement("LINK")))rel="stylesheet",type="text/css",href=filename,title=title;return o},importSkinDef:function(xmlNode,basepath,name){var i,l,nodes=$xmlns(xmlNode,"style",apf.ns.aml),tnode,node;for(i=0,l=nodes.length;i<l;i++){node=nodes[i];if(node.getAttribute("src"))this.loadStylesheet(apf.getAbsolutePath(basepath,node.getAttribute("src")));else{var test=!0;if(node.getAttribute("condition"))try{test=eval(node.getAttribute("condition"))}catch(e){test=!1}if(test){tnode=node.firstChild;while(tnode)this.css.push(tnode.nodeValue),tnode=tnode.nextSibling}}}nodes=$xmlns(xmlNode,"alias",apf.ns.apf);var t=this.skins[name].templates;for(i=0;i<nodes.length;i++){if(!nodes[i].firstChild)continue;t[nodes[i].firstChild.nodeValue.toLowerCase()]=xmlNode}},loadedCss:"",purgeCss:function(a,b){if(!this.css.length)return;var c=this.css.join("\n").replace(/images\//g,a).replace(/icons\//g,b);apf.importCssString(c),this.css=[]},loadCssInWindow:function(a,b,c,d){this.css=[];var e=a.split(":"),f=this.skins[e[0]],g=f.templates[e[1]];this.importSkinDef(g,f.base,f.name);var h=this.css.join("\n").replace(/images\//g,c).replace(/icons\//g,d);apf.importCssString(h),this.css=[]},setSkinPaths:function(a,b){a=a.split(":");var c=a[0],d=a[1];b.iconPath=this.skins[c].iconPath,b.mediaPath=this.skins[c].mediaPath},getTemplate:function(a,b){a=a.split(":");var c=a[0],d=a[1];if(!this.skins[c])return b?!1:!1;if(!this.skins[c].templates[d])return!1;var e=this.skins[c].templates[d],f=this.skins[c].originals[d];if(!f){f=this.skins[c].originals[d]={};var g=$xmlns(e,"presentation",apf.ns.aml)[0].childNodes;for(var h=0;h<g.length;h++){if(g[h].nodeType!=1)continue;f[g[h].baseName||g[h][apf.TAGNAME]]=g[h]}}return f},getCssString:function(a){return apf.queryValue($xmlns(this.skins[a.split(":")[0]].xml,"style",apf.ns.aml)[0],"text()")},changeSkinset:function(a){var b=apf.document.documentElement;while(b){b&&b.nodeFunc==apf.NODE_VISIBLE&&b.hasFeature(apf.__PRESENTATION__)&&!b.skinset&&(b.$propHandlers.skinset.call(b,a),b.skinset=null);if(b.firstChild||b.nextSibling)b=b.firstChild||b.nextSibling;else{do b=b.parentNode;while(b&&!b.nextSibling);b&&(b=b.nextSibling)}}},queue:{},waitForSkin:function(a,b,c){if(this.skins[a])return;return(this.queue[a]||(this.queue[a]={}))[b]=c,!0},setIcon:function(a,b,c){if(!b){a.style.backgroundImage="";return}if(a.tagName.toLowerCase()=="img"){a.setAttribute("src",b?(c||"")+b:"");return}a.style.backgroundImage="url("+(c||"")+b+")"}},apf.Sort=function(a){var b={};this.parseXml=function(a,c){c&&(b={}),b.order=a.order,b.getValue=a.csort||a.$compile("sort"),b.getNodes=self[a["nodes-method"]],b.ascending=(b.order||"").indexOf("desc")==-1,b.order=null,a["data-type"]?b.method=d[a["data-type"]]:a["sort-method"]?b.method=self[a["sort-method"]]:b.method=d.alpha;var e=a["date-format"];if(e){b.sort_dateFmtStr=e,b.method=d.date;var f=e.match(/(D+|Y+|M+|h+|m+|s+)/g);if(f){for(var g={},h=0;h<f.length;h++)g[f[h].substr(0,1)]=h+1;b.dateFormat=new RegExp(e.replace(/([^\sDYMhms])/g,"\\$1").replace(/YYYY/,"(\\d\\d\\d\\d)").replace(/(DD|YY|MM|hh|mm|ss)/g,"(\\d\\d)")),b.dateReplace="$"+g.M+"/$"+g.D+"/$"+g.Y,g.h&&(b.dateReplace+=" $"+g.h+":$"+g.m+":$"+g.s)}}},this.set=function(a,c){c&&(b={}),apf.extend(b,a),b.ascending==undefined&&(b.ascending=a.order?a.order.indexOf("desc")==-1:!0),b.order=null,a.type?b.method=d[a.type]:a.method?b.method=self[a.method]:b.method||(b.method=d.alpha);if(a.format){b.sort_dateFmtStr=a.format;var e=str.match(/(D+|Y+|M+|h+|m+|s+)/g);if(e){for(var f={},g=0;g<e.length;g++)f[e[g].substr(0,1)]=g+1;b.dateFormat=new RegExp(str.replace(/([^\sDYMhms])/g,"\\$1").replace(/YYYY/,"(\\d\\d\\d\\d)").replace(/(DD|YY|MM|hh|mm|ss)/g,"(\\d\\d)")),b.dateReplace="$"+f.M+"/$"+f.D+"/$"+f.Y,f.h&&(b.dateReplace+=" $"+f.h+":$"+f.m+":$"+f.s)}}b.getValue||(b.getValue=function(a){return apf.queryValue(a,b.xpath)})},this.get=function(){return apf.extend({},b)},this.findSortSibling=function(a,b){var c=getNodes?getNodes(a,b):this.getTraverseNodes(a);for(var d=0;d<c.length;d++)if(!compare(b,c[d],!0,sortSettings))return c[d];return null};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000"],d={alpha:function(a){return a.toString().toLowerCase()},number:function(a){return(a.length<c.length?c[c.length-a.length]:"")+a},date:function(a,d){var e=b.dateFormat,f=b.dateReplace,g=b.sort_dateFmtStr,h;return e?g=="*"?h=apf.date.getDateTime(a):h=(new Date(a.replace(e,f))).getTime():h=new Date(a),a=""+h.getTime(),a=="NaN"&&(a="0"),(a.length<c.length?c[c.length-a.length]:"")+a}};this.apply=function(a,c,e,g,h){var i=[],j=a.length;while(j--){var k=b.getValue(a[j]);a&&(i[i.length]={toString:function(){return this.v},xmlNode:a[j],v:(b.method||d.alpha)(k||"",c,a[j])})}i.sort();var l=h?Math.min(i.length,g+h):i.length;g||(g=0);if(!e){var m=[];if(b.ascending)for(j=g;j<l;j++)m[m.length]=i[j].xmlNode;else for(j=l-1;j>=g;j--)m[m.length]=i[j].xmlNode;return m}if(b.ascending)for(j=g;j<l;j++)f(j,l,i[j].xmlNode,i[j].v);else for(j=l-1;j>=g;j--)f(l-j-1,l,i[j].xmlNode,i[j].v)},a&&this.parseXml(a)},apf.tween=function(a){var b={left:function(a,b){a.style.left=b+d},right:function(a,b){a.style.left="",a.style.right=b+d},top:function(a,b){a.style.top=b+d},bottom:function(a,b){a.style.top="",a.style.bottom=b+d},width:function(a,b,c){a.style.width=b+d},height:function(a,b,c){a.style.height=b+d},scrollTop:function(a,b,c){a.scrollTop=b},scrollLeft:function(a,b,c){a.scrollLeft=b},"height-rsz":function(b,c,e){b.style.height=c+d,a.hasSingleResizeEvent&&a.layout.$onresize&&a.layout.$onresize()},mwidth:function(b,c,e){var f=a.getDiff(b);b.style.width=c+d,b.style.marginLeft=-1*(c/2+(parseInt(a.getStyle(b,"borderLeftWidth"))||f[0]/2)+(e.margin||0))+d},mheight:function(b,c,e){var f=a.getDiff(b);b.style.height=c+d,b.style.marginTop=-1*c/2-(parseInt(a.getStyle(b,"borderTopWidth"))||f[1]/2)+(e.margin||0)+d},scrollwidth:function(a,b){a.style.width=b+d,a.scrollLeft=a.scrollWidth},scrollheight_old:function(a,b){try{a.style.height=b+d,a.scrollTop=a.scrollHeight}catch(c){alert(b)}},scrollheight:function(b,c,e){var f=a.getHeightDiff(b),g=e.$int||b;b.style.height=Math.max(c+(e.diff||0),0)+d,g.scrollTop=g.scrollHeight-g.offsetHeight-f+(e.diff||0)-(a.isGecko?16:0)},scrolltop:function(a,b){a.style.height=b+d,a.style.top=-1*b-2+d,a.scrollTop=0},clipright:function(a,b,c){a.style.clip="rect(auto, auto, auto, "+b+"px)",a.style.marginLeft=-1*b+d},fade:function(b,c){!a.supportOpacity&&a.hasStyleFilters?b.style.filter=c==1?"":"alpha(opacity="+parseInt(c*100)+")":b.style.opacity=c},bgcolor:function(a,b){a.style.backgroundColor=b},textcolor:function(a,b){a.style.color=b},htmlcss:function(b,c,e){a.hasStyleFilters&&e.type=="filter"?b.style.filter=c==1?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+c+")":b.style[e.type]=c+(e.needsPx?d:"")},transformscale:function(a,b,c){a.style[c.type]=i+parseFloat(b)+k},transformrotate:function(a,b,c){a.style[c.type]=j+parseFloat(b)+l},transformvalscale:function(a){return i+parseFloat(a)+k},transformvalrotate:function(a){return j+parseFloat(a)+l}},c="id",d="px",e="number",f="transformval",g="transform",h="scale",i="scale(",j="rotate(",k=")",l="deg)",m=["linear","ease-in","ease-out","ease","ease-in-out","cubic-bezier"],n={left:"left",right:"right",top:"top",bottom:"bottom",width:"width",height:"height",scrollTop:!1,scrollLeft:!1,mwidth:!1,mheight:!1,scrollwidth:!1,scrollheight:!1,fade:"opacity",opacity:"opacity",bgcolor:"background-color",textcolor:"color",transform:"transform"},o=Math.pow,p=Math.round,q={},r=null,s=function(b,d){var e=b.getAttribute(c);e||(a.setUniqueHtmlId(b),e=b.getAttribute(c)),q[e]||(q[e]=[]),q[e].push(d),q[e].length==1&&d(0)},t=function(a){var b=q[a.getAttribute(c)];if(!b)return;b.shift(),b.length&&b[0](0)},u=function(a,b){var d=q[a.getAttribute(c)];if(!d)return;b&&r&&r.control&&(r.control.stop=!0),d.length=0},v=function(b){var d=b.getAttribute(c);d||(a.setUniqueHtmlId(b),d=b.getAttribute(c));for(var e in q)e==d&&(q[e]=[])},w=function(b,c,d,f){var g=0,h=f-1,i=[c];typeof b==e&&(b?b==1?b=a.tween.easeInCubic:b==2&&(b=a.tween.easeOutCubic):b=a.tween.linear);for(g=0;g<h;++g)i.push(b(g/f,c,d-c));return i.push(d),i},x=function(b,c,d,e){var f,g,h=a.color.colorshex,i=parseInt((h[c]||c).slice(1),16),j=parseInt((h[d]||d).slice(1),16),k=0,l=[];for(;k<e;k++)g=k/(e-1),f=1-g,l[l.length]="#"+("000000"+(p((i&255)*f+(j&255)*g)&255|p((i&65280)*f+(j&65280)*g)&65280|p((i&16711680)*f+(j&16711680)*g)&16711680).toString(16)).slice(-6);return l},y=function(c,e){e=a.extend({steps:10,interval:5,anim:a.tween.linear,control:{}},e),e.steps=Math.ceil(e.steps*a.animSteps),e.interval=Math.ceil(e.interval*a.animInterval),c.nodeFunc>100&&(e.$int=c.$int,c=c.$ext);try{"fixed|absolute|relative".indexOf(a.getStyle(c,"position"))==-1&&(c.style.position="relative")}catch(i){}var j=a.supportCSSAnim&&a.supportCSSTransition&&n[e.type],k=e.type==g;e.method=j?e.type:k?b[g+(e.subType||h)]:b[e.type]?b[e.type]:(e.needsPx=C[e.type]||!1)?b.htmlcss:b.htmlcss;if(j){var l=n[e.type];if(l===!1)return a.tween;e.type=l||e.type,k&&(e.subType||(e.subType=h),e.type=a.supportCSSAnim);var o=k?b[f+(e.subType||h)]:null;return c.style[e.type]=k?o(e.from):e.from+(C[e.type]?d:""),$setTimeout(function(){c.style[e.type]=k?o(e.to):e.to+(C[e.type]?d:""),c.offsetTop,c.style[a.cssPrefix+"Transition"]=e.type+" "+e.steps*e.interval/1e3+"s "+m[e.anim||0];var b=function(){e.onfinish&&e.onfinish(c,e.userdata),c.style[a.cssPrefix+"Transition"]="",c.removeEventListener(a.cssAnimEvent,b)};c.addEventListener(a.cssAnimEvent,b)}),a.tween}e.control&&(e.control.state=a.tween.RUNNING,e.control.stop=function(){e.control.state=a.tween.STOPPING,u(c),e.onstop&&e.onstop(c,e.userdata)});var p=e.color?x(e.anim,e.from,e.to,e.steps):w(e.anim,parseFloat(e.from),parseFloat(e.to),e.steps),q=function(b){if(e.control&&e.control.state){e.control.state=a.tween.STOPPED;return}r=e;if(e.onbeforeeach&&e.onbeforeeach(c,e.userdata)===!1)return;try{e.method(c,p[b],e)}catch(d){}e.oneach&&e.oneach(c,e.userdata);if(b<e.steps)return $setTimeout(function(){q(b+1)},e.interval);r=null,e.control&&(e.control.state=a.tween.STOPPED),e.onfinish&&e.onfinish(c,e.userdata),t(c)};return e.type.indexOf("scroll")>-1&&v(c),s(c,q),a.tween},z=function(c,e){e=a.extend({steps:10,interval:5,anim:a.tween.linear,control:{}},e),e.steps=Math.ceil(e.steps*a.animSteps),e.interval=Math.ceil(e.interval*a.animInterval),c.nodeFunc>100&&(e.$int=c.$int,c=c.$ext);var i,j,k=a.supportCSSAnim&&a.supportCSSTransition,l=!1,o=e.steps*e.interval/1e3,p=m[e.anim||0],q=[],v=[],y=0,z=e.tweens.length;for(;y<z;y++){var A=e.tweens[y];A.oHtml&&A.oHtml.nodeFunc>100&&(A.$int=A.oHtml.$int,A.oHtml=A.oHtml.$ext),i=k&&n[A.type],j=A.type==g,j&&(A.subType||(A.subType=h),A.type=a.supportCSSAnim),A.method=i?A.type:j?b[g+A.subType]:b[A.type]?b[A.type]:(A.needsPx=C[A.type]||!1)?b.htmlcss:b.htmlcss;if(i){var B=j?A.type:n[A.type];A.type=B||A.type;var D=b[f+A.subType];c.style[A.type]=j?D(A.from):A.from+(C[A.type]?d:""),v.push([A.type,j?D(A.to):A.to+(C[A.type]?d:"")]),q.push(A.type+" "+o+"s "+p+" 0"),l=!0}else q.push(A.color?x(e.anim,A.from,A.to,e.steps):w(e.anim,parseFloat(A.from),parseFloat(A.to),e.steps))}if(l){c.style[a.cssPrefix+"Transition"]=q.join(","),c.offsetTop;var E=0,F=function(){E++,E==v.length&&(e.onfinish&&e.onfinish(c,e.userdata),c.style[a.cssPrefix+"Transition"]="",c.removeEventListener(a.cssAnimEvent,F))};c.addEventListener(a.cssAnimEvent,F,!1);for(var G=0,H=v.length;G<H;G++)c.style[v[G][0]]=v[G][1];return a.tween}e.control&&(e.control.state=a.tween.RUNNING,e.control.stop=function(){if(e.control.state==a.tween.STOPPED)return;e.control.state=a.tween.STOPPING,u(c),e.onstop&&e.onstop(c,e.userdata)});var I=e.tweens,J=function(b){if(e.control&&e.control.state){e.control.state=a.tween.STOPPED;return}r=e;try{for(var d=0;d<q.length;d++)I[d].method(I[d].oHtml||c,q[d][b],I[d])}catch(f){}e.oneach&&e.oneach(c,e.userdata);if(b<e.steps)return $setTimeout(function(){J(b+1)},e.interval);r=null,e.control&&(e.control.state=a.tween.STOPPED),e.onfinish&&e.onfinish(c,e.userdata),t(c)};return s(c,J),a.tween},A=function(b,c,d,e){(d=d||{}).tweens=[],b.nodeFunc>100&&(b=b.$ext),e&&a.setStyleClass(b,"",[c]);var f=function(e,f){e?a.setStyleClass(b,"",[c]):a.setStyleClass(b,c);for(var g=0;g<d.tweens.length;g++){if(d.tweens[g].type=="filter")continue;b.style[d.tweens[g].type]=""}f&&f.apply(this,arguments)},g=d.onfinish,h=d.onstop;d.onfinish=function(){f(e,g)},d.onstop=function(){f(!e,h)};var i,j,k,l,m,n,o,p,q={};for(p=0;p<document.styleSheets.length;p++){o=document.styleSheets[p][a.styleSheetRules];if(!o||!o.length)continue;for(l=o.length-1;l>=0;l--){var r=o[l];if(!r.style||!r.selectorText.match("."+c+"$"))continue;for(n in r.style){if(!r.style[n]||D.indexOf("|"+n+"|")==-1)continue;if(n=="filter"){if(!r.style[n].match(/opacity\=([\d\.]+)/))continue;j=RegExp.$1,i=(a.getStyleRecur(b,n)||"").match(/opacity\=([\d\.]+)/),k=i?RegExp.$1:100,m=!1,j==k&&(e?k=100:j=100)}else j=e&&b.style[n]||r.style[n],e&&(b.style[n]=""),k=a.getStyleRecur(b,n),m=n.match(/color/i)?!0:!1;q[n]={type:n,from:(m?String:parseFloat)(e?j:k),to:(m?String:parseFloat)(e?k:j),color:m,needsPx:C[n.toLowerCase()]||!1}}}}for(var s in q)d.tweens.push(q[s]);return e&&a.setStyleClass(b,c),z(b,d)},B=function(a,b,c){A(a,b,c,!0)},C={left:!0,top:!0,bottom:!0,right:!0,width:!0,height:!0,fontSize:!0,lineHeight:!0,textIndent:!0,marginLeft:!0,marginTop:!0,marginRight:!0,marginBottom:!0},D="|backgroundColor|backgroundPosition|color|width|filter|height|left|top|bottom|right|fontSize|letterSpacing|lineHeight|textIndent|opacity|paddingLeft|paddingTop|paddingRight|paddingBottom|borderLeftWidth|borderTopWidth|borderRightWidth|borderBottomWidth|borderLeftColor|borderTopColor|borderRightColor|borderBottomColor|marginLeft|marginTop|marginRight|marginBottom|transform|",E="|scale|rotate|";return{single:y,multi:z,css:A,cssRemove:B,clearQueue:u,addModule:function(a,c,d){return typeof a!="string"||typeof c!="function"||b[a]&&!d?this:(b[a]=c,this)},NORMAL:0,EASEIN:1,EASEOUT:2,RUNNING:0,STOPPING:1,STOPPED:2,calcColorSteps:x,linear:function(a,b,c){return c*a+b},easeInQuad:function(a,b,c){return c*o(a,2)+b},easeOutQuad:function(a,b,c){return-c*a*(a-2)+b},easeInOutQuad:function(a,b,c){return(a/=.5)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},easeInCubic:function(a,b,c){return c*o(a,3)+b},easeOutCubic:function(a,b,c){return c*(o(a-1,3)+1)+b},easeInOutCubic:function(a,b,c){return(a/=.5)<1?c/2*o(a,3)+b:c/2*(o(a-2,3)+2)+b},easeInQuart:function(a,b,c){return c*o(a,4)+b},easeOutQuart:function(a,b,c){return-c*(o(a-1,4)-1)+b},easeInOutQuart:function(a,b,c){return(a/=.5)<1?c/2*o(a,4)+b:-c/2*(o(a-2,4)-2)+b},easeInQuint:function(a,b,c){return c*o(a,5)+b},easeOutQuint:function(a,b,c){return c*(o(a-1,5)+1)+b},easeInOutQuint:function(a,b,c){return(a/=.5)<1?c/2*o(a,5)+b:c/2*(o(a-2,5)+2)+b},easeInSine:function(a,b,c){return-c*Math.cos(a*(Math.PI/2))+c+b},easeOutSine:function(a,b,c){return c*Math.sin(a*(Math.PI/2))+b},easeInOutSine:function(a,b,c){return-c/2*(Math.cos(Math.PI*a)-1)+b},easeInExpo:function(a,b,c){return a==0?b:c*o(2,10*(a-1))+b},easeOutExpo:function(a,b,c){return a==1?b+c:c*(-o(2,-10*a)+1)+b},easeInOutExpo:function(a,b,c){return a==0?b:a==1?b+c:(a/=.5)<1?c/2*o(2,10*(a-1))+b:c/2*(-o(2,-10*--a)+2)+b},easeInCirc:function(a,b,c){return-c*(Math.sqrt(1-a*a)-1)+b},easeOutCirc:function(a,b,c){return c*Math.sqrt(1-(a-=1)*a)+b},easeInOutCirc:function(a,b,c){return(a/=.5)<1?-c/2*(Math.sqrt(1-a*a)-1)+b:c/2*(Math.sqrt(1-(a-=2)*a)+1)+b},easeInElastic:function(a,b,c){var d=1.70158,e=.3,f=c;return a==0?b:a==1?b+c:(!f||f<Math.abs(c)?(f=c,d=e/4):d=e/(2*Math.PI)*Math.asin(c/f),-(f*o(2,10*(a-=1))*Math.sin((a*1-d)*2*Math.PI/e))+b)},easeOutElastic:function(a,b,c){var d=1.70158,e=.3,f=c;return a==0?b:a==1?b+c:(f<Math.abs(c)?(f=c,d=e/4):d=e/(2*Math.PI)*Math.asin(c/f),f*o(2,-10*a)*Math.sin((a-d)*2*Math.PI/e)+c+b)},easeInOutElastic:function(a,b,c){var d=1.70158,e=0,f=c;return a==0?b:a/2==2?b+c:(e||(e=.3*1.5),f<Math.abs(c)?(f=c,d=e/4):d=e/(2*Math.PI)*Math.asin(c/f),a<1?-0.5*f*o(2,10*(a-=1))*Math.sin((a-d)*2*Math.PI/e)+b:f*o(2,-10*(a-=1))*Math.sin((a-d)*2*Math.PI/e)*.5+c+b)},easeInBack:function(a,b,c){var d=1.70158;return c*o(a,2)*((d+1)*a-d)+b},easeOutBack:function(a,b,c){var d=1.70158;return c*((a-=1)*a*((d+1)*a+d)+1)+b},easeInOutBack:function(a,b,c){var d=1.70158;return a/2<1?c/2*a*a*(((d*=1.525)+1)*a-d)+b:c/2*((a-=2)*a*(((d*=1.525)+1)*a+d)+2)+b},easeInBounce:function(b,c,d){return d-a.tween.easeOutBounce(1-b,0,d)+c},easeOutBounce:function(a,b,c){return a<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},easeInOutBounce:function(b,c,d){return b<.5?a.tween.easeInBounce(b*2,0,d)*.5+c:a.tween.easeOutBounce(b*2-1,0,d)*.5+d*.5+c}}}(apf),apf.xmldb=new function(){var a=this;this.xmlDocTag="a_doc",this.xmlIdTag="a_id",this.xmlListenTag="a_listen",this.htmlIdTag="id",this.disableRDB=!1,this.$xmlDocLut=[],this.$nodeCount={};var b=/(?:a_doc|a_id|a_listen|a_loaded)=(?:"|')[^'"]+(?:"|')/g,c=/>[\s\n\r\t]+</g;this.garbageCollect=function(){var a,b=apf.xmldb.$xmlDocLut,c,d;for(var e=0,f=b.length;e<f;e++){a=b[e],c=e,d=apf.nameserver.get("model",c);if(!d||d.data!=a)b[e]=null}},window.setInterval&&setInterval(function(){a.garbageCollect()},6e4),this.getElementById=function(a,b){return b||(b=this.$xmlDocLut[a.split("|")[0]]),b?b.selectSingleNode("descendant-or-self::node()[@"+this.xmlIdTag+"='"+a+"']"):!1},this.getNode=function(a){return!a||!a.getAttribute(this.htmlIdTag)?!1:this.getElementById(a.getAttribute(this.htmlIdTag).split("|",2).join("|"))},this.getNodeById=function(a,b){var c=a.split("|");return c.pop(),this.getElementById(c.join("|"),b)},this.getDocumentById=function(a){return this.$xmlDocLut[a]},this.getDocument=function(a){return this.$xmlDocLut[a.getAttribute(this.xmlIdTag).split("|")[0]]},this.getID=function(a,b){return a.getAttribute(this.xmlIdTag)+"|"+b.$uniqueId},this.getElement=function(a,b){var c=a.childNodes;for(var d=0,e=0;e<c.length;e++){if(c[e].nodeType!=1)continue;if(d++==b)return c[e]}},this.setModel=function(a){apf.nameserver.register("model",a.data.ownerDocument.documentElement.getAttribute(this.xmlDocTag),a)},this.findModel=function(a){return apf.nameserver.get("model",a.ownerDocument.documentElement.getAttribute(this.xmlDocTag))},this.getXmlId=function(a){return a.getAttribute(this.xmlIdTag)||this.nodeConnect(apf.xmldb.getXmlDocId(a),a)},this.getHtmlNode=function(a,b){return a&&a.nodeType==1&&a.getAttribute(this.xmlIdTag)?b.$findHtmlNode(a.getAttribute(this.xmlIdTag)+"|"+b.$uniqueId):null},this.findHtmlNode=function(a,b){do{if(a.nodeType==1&&a.getAttribute(this.xmlIdTag))return b.$findHtmlNode(a.getAttribute(this.xmlIdTag)+"|"+b.$uniqueId);if(a==b.xmlRoot)return null;a=a.parentNode}while(a&&a.nodeType!=9);return null},this.findXmlNode=function(a){if(!a)return!1;var b;while(a&&a.nodeType==1&&(a.tagName.toLowerCase()!="body"&&!(b=a.getAttribute(this.htmlIdTag))||(b||(b=a.getAttribute(this.htmlIdTag)))&&b.match(/^q/))){if(a.host&&a.host.$ext==a)return a.host.xmlRoot;a=a.parentNode}return!a||a.nodeType!=1?!1:a.tagName.toLowerCase()=="body"?!1:this.getNode(a)},this.getXml=apf.getXml,this.nodeConnect=function(a,b,c,d){this.$nodeCount[a]||(this.$nodeCount[a]=0);var e;e=b.getAttribute(this.xmlIdTag)||b.setAttribute(this.xmlIdTag,e=a+"|"+ ++this.$nodeCount[a])||e;if(!d)return e;var f=e+"|"+d.$uniqueId;return c&&c.setAttribute(this.htmlIdTag,f),f},this.$listeners=[null],this.addNodeListener=function(a,b,c){var d,e=String(a.getAttribute(this.xmlListenTag)||"");c||(c=String(b.$uniqueId));if(c.charAt(0)=="p"){var f=c.split("|");d=this.$listeners.push(function(b){var c=apf.all[f[1]];if(c){var d=apf.all[f[3]];if(!d)return;if(d.$propBinds[f[1]][f[2]])var e=d.$propBinds[f[1]][f[2]].listen,g=e?apf.queryNode(d.data,e):a;g&&c.$execProperty(f[2],g,b[3])}})-1,this.$listeners[c]=d}else d="e"+c,this.$listeners[d]||(this.$listeners[d]=function(a){var b=apf.all[c];b&&b.$xmlUpdate.apply(b,a)});return(!e||e.indexOf(";"+d+";")==-1)&&a.setAttribute(this.xmlListenTag,(e?e+d:";"+d)+";"),a},this.removeNodeListener=function(a,b,c){var d=a.getAttribute(this.xmlListenTag),e=d?d.split(";"):[];c&&c.charAt(0)=="p"?(c=this.$listeners[c],delete this.$listeners[c]):c="e"+b.$uniqueId;for(var f=[],g=0;g<e.length;g++)e[g]!=c&&f.push(e[g]);return a.setAttribute(this.xmlListenTag,f.join(";")),a},this.setTextNode=apf.setTextNode=function(a,b,c,d,e){var f;if(c){f=a.selectSingleNode(c);if(!f)return;a=f.nodeType==1?f:null}if(a.nodeType!=1)f=a;else if(a||!f)f=a.selectSingleNode("text()"),f||(f=a.appendChild(a.ownerDocument.createTextNode("")));d&&!d.$filled&&(d.extra.oldValue=f.nodeValue,d.$filled=!0),e?d.extra.range=e:(f.nodeValue=b,f.$regbase&&f.$setValue(b)),this.applyChanges("text",f.parentNode,d)},this.setAttribute=apf.setAttribute=function(a,b,c,d,e,f){e&&!e.$filled&&(e.name=b,e.$filled=!0),f?e.extra.range=f:(d?a.selectSingleNode(d):a).setAttribute(b,c),this.applyChanges("attribute",a,e)},this.removeAttribute=apf.removeAttribute=function(a,b,c,d){d&&!d.$filled&&(d.name=b,d.$filled=!0),(c?a.selectSingleNode(c):a).removeAttribute(b),this.applyChanges("attribute",a,d)},this.replaceNode=apf.replaceNode=function(a,b,c,d){c&&(b=b.selectSingleNode(c));if(b.ownerDocument.importNode&&a.ownerDocument!=b.ownerDocument){var e=xmlNode;a=b.ownerDocument.importNode(a,!0),e.parentNode&&e.parentNode.removeChild(e)}d&&!d.$filled&&(d.$filled=!0,d.oldNode=b,d.xmlNode=a),this.cleanNode(a);var f=b.parentNode;if(!f)return;return f.replaceChild(a,b),this.copyConnections(b,a),this.applyChanges("replacenode",a,d),a},this.addChildNode=apf.addChildNode=function(a,b,c,d,e){var f=a.insertBefore(a.ownerDocument.createElement(b),d);for(var g=0;g<c.length;g++)f.setAttribute(c[g][0],c[g][1]);return e&&!e.$filled&&(e.extra.addedNode=f,e.$filled=!0),this.applyChanges("add",f,e),f},this.appendChild=apf.appendChild=function(a,b,c,d,e,f){if(a==b.parentNode)return apf.xmldb.moveNode(a,b,c,null,e,f);if(d&&a.selectSingleNode(b.tagName))return!1;if(a.ownerDocument.importNode&&a.ownerDocument!=b.ownerDocument){var g=b;b=a.ownerDocument.importNode(b,!0),g.parentNode&&g.parentNode.removeChild(g)}if(e){var h=[];a=apf.createNodeFromXpath(a,e,h);if(h.length){a.appendChild(b);while(h.length)a==h.pop()&&h.length&&(a=a.parentNode)}}else b.parentNode&&this.removeNode(b);return f&&!f.$filled?(f.$filled=!0,this.cleanNode(b)):this.cleanNode(b),a.insertBefore(b,c),this.applyChanges("add",b,f),b},this.moveNode=apf.moveNode=function(a,b,c,d,e){e||(e={extra:{}}),e.extra.oldParent=b.parentNode,e.extra.beforeNode=b.nextSibling,e.extra.parent=d?a.selectSingleNode(d):a,this.applyChanges("move-away",b,e);if(a.ownerDocument.importNode&&a.ownerDocument!=b.ownerDocument){var f=b;b=a.ownerDocument.importNode(b,!0),f.parentNode&&f.parentNode.removeChild(f)}e.extra.parent.insertBefore(b,c),this.applyChanges("move",b,e)},this.removeNode=apf.removeNode=function(a,b,c){b&&(a=a.selectSingleNode(b)),c&&!c.$filled&&(c.$filled=!0,c.extra.parent=a.parentNode,c.extra.removedNode=a,c.extra.beforeNode=a.nextSibling),this.applyChanges("remove",a,c);var d=a.parentNode;if(!d)return;d.removeChild(a),this.applyChanges("redo-remove",a,null,d)},this.removeNodeList=apf.removeNodeList=function(a,b){for(var c=[],d=0;d<a.length;d++){b&&c.push({pNode:a[d].parentNode,removedNode:a[d],beforeNode:a[d].nextSibling}),this.applyChanges("remove",a[d],b);var e=a[d].parentNode;e.removeChild(a[d]),this.applyChanges("redo-remove",a[d],null,e)}b&&!b.$filled&&(b.$filled=!0,b.extra.removeList=c)};var d={},e;this.$hasQueue=!1,this.applyChanges=function(a,b,c,f){if(c&&c.$dontapply)return;c&&!c.xmlNode&&(c.xmlNode=b);var g=f,h=b.nodeType==1?b:b.parentNode;!this.delayUpdate&&"|remove|move-away|".indexOf("|"+a+"|")>-1&&this.notifyQueued();var i,j,k,l,m,n,o,p,q,r,s={};while(h&&h.nodeType==1){i=h.getAttribute(this.xmlListenTag);if(i){k=i.split(";");for(l=0;l<k.length;l++){j=k[l];if(!j||s[j])continue;s[j]=!0,n=d[j],n||(d[j]=n=[]);if(!apf.isO3&&"|update|attribute|text|".indexOf("|"+a+"|")>-1){r=!1;for(m=0;m<n.length;m++)if(n[m]&&b==n[m][1]&&"|update|attribute|text|".indexOf("|"+n[m][0]+"|")>-1){n[m]=null,r=!0;continue}n.push([a,b,h,c,g]),q=!0;continue}apf.isO3||"|remove|move-away|move|add|".indexOf("|"+a+"|")>-1?this.$listeners[j]&&this.$listeners[j]([a,b,h,c,g]):(n.push([a,b,h,c,g]),q=!0)}}h=h.parentNode||f,h==f&&(f=null)}c&&!this.delayUpdate?apf.xmldb.notifyQueued():q&&(clearTimeout(e),this.$hasQueue=!0,e=apf.setZeroTimeout(function(){apf.xmldb.notifyQueued()}))},this.notifyQueued=function(){this.$hasQueue=!1;var a=d;d={},clearTimeout(e);for(var b in a){if(!b)continue;var c=a[b],f=this.$listeners[b];if(!c||!f)continue;for(var g=0;g<c.length;g++){if(!c[g])continue;f(c[g])}}},this.notifyListeners=function(a){var b=a.getAttribute(apf.xmldb.xmlListenTag);if(b){b=b.split(";");for(var c=0;c<b.length;c++)apf.all[b[c]].$xmlUpdate("synchronize",a,a)}},this.copyConnections=function(a,b){try{b.setAttribute(this.xmlListenTag,a.getAttribute(this.xmlListenTag))}catch(c){}try{b.setAttribute(this.xmlIdTag,a.getAttribute(this.xmlIdTag))}catch(c){}},this.cleanXml=function(a){return typeof a!="string"?a:a.replace(b,"").replace(c,"><")},this.cleanNode=function(a){try{var b,c=a.selectNodes("descendant-or-self::node()[@"+this.xmlListenTag+"]");for(b=c.length-1;b>=0;b--)c[b].removeAttribute(this.xmlListenTag);c=a.selectNodes("descendant-or-self::node()[@"+this.xmlIdTag+"]");for(b=c.length-1;b>=0;b--)c[b].removeAttribute(this.xmlIdTag);c=a.selectNodes("descendant-or-self::node()[@"+this.xmlDocTag+"]");for(b=c.length-1;b>=0;b--)c[b].removeAttribute(this.xmlDocTag);c=a.selectNodes("descendant-or-self::node()[@a_loaded]");for(b=c.length-1;b>=0;b--)c[b].removeAttribute("a_loaded")}catch(d){}return a},this.copy=this.getCleanCopy=apf.getCleanCopy=function(a){return apf.xmldb.cleanNode(a.cloneNode(!0))},this.unbind=function(a){for(var b={},c=0;c<a.apf.all.length;c++)a.apf.all[c]&&a.apf.all[c].unloadBindings&&(b[a.apf.all[c].unloadBindings()]=!0);for(var d=0;d<this.$xmlDocLut.length;d++){if(!this.$xmlDocLut[d])continue;var e=this.$xmlDocLut[d].selectNodes("//self::node()[@"+this.xmlListenTag+"]");if(!e)continue;for(var c=0;c<e.length;c++){var f=e[c].getAttribute(this.xmlListenTag).split(";");for(var g=[],h=0;h<f.length;h++)b[f[h]]||g.push(f[h]);g.length!=f.length&&e[c].setAttribute(this.xmlListenTag,g.join(";"))}}},this.getXmlDocId=function(a,b){var c=a.ownerDocument.documentElement;apf.isChildOf(c,a)||(c=a);var d=(c||a).getAttribute(this.xmlDocTag)||this.$xmlDocLut.indexOf(c||a.ownerDocument||a);b&&apf.nameserver.get("model",d)!=b&&(d=null,c=a);if(!d||d==-1)d=this.$xmlDocLut.push(c||a.ownerDocument||a)-1,c&&c.setAttribute(this.xmlDocTag,String(d));return b&&apf.nameserver.register("model",d,b),d}},apf.http=function(){function getBinaryBlob(a,b,c){var d="----apfbound".appendRandomNumber(5),e="--",f="\r\n",g="",h=0;return c.multipart&&(b.setRequestHeader("Content-Type","multipart/form-data; boundary="+d),g+=e+d+f+'Content-Disposition: form-data; name="'+(c.filedataname||c.filename)+'"; filename="'+c.filename+'"'+f+"Content-Type: application/octet-stream"+f+f+a+f+e+d+e+f,h=g.length-a.length,a=g),{size:h,data:a}}this.queue=[null],this.callbacks={},this.cache={},this.timeout=this.timeout||1e4,this.autoroute=this.autoroute||!1,this["route-server"]=this["route-server"]||null,this.$uniqueId||(this.$uniqueId=apf.all.push(this)-1),this.toString=this.toString||function(){return"[Ajax.org Teleport Component : (HTTP)]"},this.getXml=function(a,b,c){return c||(c={}),c.useXML=!0,c.callback=b,this.get(a,c)},this.getJSON=function(a,b,c){return c||(c={}),c.callback=b,c.useJSON=!0,this.get(a,c)},this.get=this.$get=function(a,b){function l(a,b){h.setRequestHeader(a,b)}function s(){var e=self.navigator&&self.navigator.onLine?"File or Resource not available "+a:"Browser is currently working offline",f=self.navigator&&navigator.onLine?apf.ERROR:apf.TIMEOUT,g=b.callback?b.callback(null,f,{userdata:b.userdata,http:h,url:a,tpModule:c,id:d,message:e}):!1;g||c.clearQueueItem(d)}function t(a){var b;if(apf.isIE&&a){var c=window.onerror;window.onerror=function(){if(arguments.caller&&arguments.caller.callee==t)return window.onerror=c,!0;window.onerror=c;if(c)return c.apply(window,arguments)},h.send(g),window.onerror=c}else try{e&&h.sendAsBinary?(e.blob=getBinaryBlob(g,h,e),h.sendAsBinary(e.blob.data)):h.send(g)}catch(d){b=!0}if(b){s();return}e&&h.upload&&(h.upload.onprogress=function(a){apf.dispatchEvent("http.uploadprogress",{loaded:a.loaded-e.blob.size,extra:a,bubbles:!0})})}b||(b={});var c=this,d=b.id,e=apf.hasXhrBinary&&b.binary,f=b.async=b.async||e||typeof b.async=="undefined"||apf.isOpera||!1;apf.isWebkit&&(a=apf.html_entity_decode(a));var g=b.data||"";if(apf.isNot(d)){var h=apf.getHttpReq();d=this.queue.push({http:h,url:a,callback:b.callback,retries:0,options:b})-1}else{var h=this.queue[d].http;h.abort()}f&&(h.onreadystatechange=function(){if(!c.queue[d]||h.readyState!=4)return;f&&arguments.callee.caller?$setTimeout(function(){c.receive(d)}):c.receive(d)});var i=this.autoroute&&apf.isOpera?!0:b.autoroute||this.shouldAutoroute,j=i?this["route-server"]:a,k=[],m=!1;try{b.nocache&&(j=apf.getNoCacheUrl(j));var n=apf.config?apf.config["requested-with-getparam"]:null;n&&(j+=(j.indexOf("?")==-1?"?":"&")+n+"=1"),h.open(this.method||b.method||"GET",j,f),b.username&&l("Authorization","Basic "+apf.crypto.Base64.encode(b.username+":"+b.password)),n||l("X-Requested-With","XMLHttpRequest"),(!b.headers||!b.headers["Content-type"])&&l("Content-type",b.contentType||this.contentType||(this.useXML||b.useXML?"text/xml":"text/plain")),i&&(l("X-Route-Request",a),l("X-Proxy-Request",a),l("X-Compress-Response","gzip")),e&&(l("Cache-Control","no-cache"),l("X-File-Name",e.filename),l("X-File-Size",e.filesize),l("Content-Type","application/octet-stream"))}catch(o){m=o.message}if(m){var p=!1;if(!p&&this.autoroute&&!i)return this.shouldAutoroute=!0,b.autoroute=!0,this.get(a,b);if(!p){var q=b.callback?b.callback(null,apf.ERROR,{userdata:b.userdata,http:h,url:a,tpModule:this,id:d,message:"Permission denied accessing remote resource: "+a+"\nMessage: "+m}):!1;q||this.clearQueueItem(d);return}}this.$headerHook&&this.$headerHook(h);if(b.headers)for(var r in b.headers)l(r,b.headers[r]);return f?(apf.loadsLocalFilesSync&&location.protocol=="file:"&&a.indexOf("http://")==-1?$setTimeout(function(){t.call(c,!0)}):t.call(c),d):(t.call(this),this.receive(d))},this.exec||(this.exec=function(a,b,c,d){d||(d={});var e=b[0],f="";d.method||(d.method=a.toUpperCase()),d.callback||(d.callback=c),this.contentType="application/x-www-form-urlencoded",this.$get(apf.getAbsolutePath(apf.config.baseurl,e),d.method=="GET"?d:apf.extend({data:f},d))}),this.receive=function(id){if(!this.queue[id])return!1;var qItem=this.queue[id],http=qItem.http,callback=qItem.callback;if(qItem.async)try{!http.status}catch(e){var _self=this;return $setTimeout(function(){_self.receive(id)},10)}var errorMessage=[],extra={tpModule:this,http:http,status:http.status,url:qItem.url,callback:callback,id:id,retries:qItem.retries||0,userdata:qItem.options.userdata};if(http.status>600)return this.$timeout(id);extra.data=qItem.options.useJSON?eval("("+http.responseText+")"):http.responseText;if(http.status>=400&&http.status<600||http.status<10&&(http.status!=0||!apf.isIE&&!http.responseText)){if(http.status==401){var auth=apf.document.getElementsByTagNameNS(apf.ns.apf,"auth")[0];if(auth){var wasDelayed=qItem.isAuthDelayed;qItem.isAuthDelayed=!0;if(auth.authRequired(extra,wasDelayed)===!0)return}}errorMessage.push("HTTP error ["+id+"]:"+http.status+"\n"+http.responseText)}if(qItem.options.useXML||this.useXML)if((http.responseText||"").replace(/^[\s\n\r]+|[\s\n\r]+$/g,"")=="")errorMessage.push("Received an empty XML document (0 bytes)");else try{var xmlDoc=http.responseXML&&http.responseXML.documentElement?apf.xmlParseError(http.responseXML):apf.getXmlDom(http.responseText);apf.supportNamespaces||xmlDoc.setProperty("SelectionLanguage","XPath"),extra.data=xmlDoc.documentElement}catch(e){errorMessage.push("Received invalid XML\n\n"+e.message)}if(errorMessage.length){extra.message=errorMessage.join("\n"),(!callback||!callback(extra.data,apf.ERROR,extra))&&this.clearQueueItem(id);return}return(!callback||!callback(extra.data,apf.SUCCESS,extra))&&this.clearQueueItem(id),extra.data},this.$timeout=function(a){if(!this.queue[a])return!1;var b=this.queue[a],c=b.http;try{!c.status}catch(d){var e=this;return $setTimeout(function(){e.$timeout(a)},10)}var f=b.callback;c.abort();var g,h=f?f(null,apf.TIMEOUT,g={userdata:b.options.userdata,http:c,url:b.url,tpModule:this,id:a,message:"HTTP Call timed out",retries:b.retries||0}):!1;h||this.clearQueueItem(a)},this.retryTimeout=function(a,b,c,d,e){if(b==apf.TIMEOUT&&a.retries<(e||apf.maxHttpRetries))return a.tpModule.retry(a.id);d=d||new Error(apf.formatErrorString(0,this,"Communication "+(b==apf.TIMEOUT?"timeout":"error"),"Url: "+a.url+"\nInfo: "+a.message));if((c||apf).dispatchEvent("error",apf.extend({error:d,state:b,extra:a,bubbles:!0},a))===!1)return 2},this.clearQueueItem=function(a){return this.queue[a]?(apf.releaseHTTP&&!apf.isGecko&&apf.releaseHTTP(this.queue[a].http),this.queue[a]=null,delete this.queue[a],!0):!1},this.retry=function(a){if(!this.queue[a])return!1;var b=this.queue[a];return b.retries++,b.options.id=a,this.get(b.url,b.options),!0},this.cancel=function(a){a===null&&(a=this.queue.length-1);if(!this.queue[a])return!1;apf.isGecko&&this.queue[a].http.abort(),this.clearQueueItem(a)},!this.$loadAml&&!this.instantiate&&!this.call&&(this.$loadAml=function(a){var b=this.receive;for(var c=0,d=this.childNodes.length;c<d;c++){if(this.childNodes[c].nodeType!=1)continue;var e=this.childNodes[c].getAttribute("url"),f=self[this.childNodes[c].getAttribute("receive")||b],g={useXML:this.childNodes[c].getAttribute("type")=="XML",async:!apf.isFalse(this.childNodes[c].getAttribute("async"))};this[this.childNodes[c].getAttribute("name")]=function(a,b){return g.userdata=b,g.data=a,this.get(e,g)}}},this.instantiate=function(a){var b=a.getAttribute("src"),c={async:a.getAttribute("async")!="false",nocache:!0};this.getURL=function(a,d){return c.data=a,c.userdata=d,c.callback=this.callbacks.getURL,this.get(b,c)};var d="http"+Math.round(Math.random()*1e5);return apf.setReference(d,this),d+".getURL()"},this.call=function(a,b){this[a].call(this,b)})},apf.Init.run("http"),apf.DOMParser=function(){},apf.DOMParser.prototype=new function(){this.caseInsensitive=!0,this.preserveWhiteSpace=!1,this.$waitQueue={},this.$callCount=0;var a=[/\<\!(DOCTYPE|doctype)[^>]*>/,/&nbsp;/g,/<\s*\/?\s*(?:\w+:\s*)[\w-]*[\s>\/]/g],b="//@*[not(contains(local-name(), '.')) and not(translate(local-name(), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') = local-name())]";this.parseFromString=function(b,c,d){var e;if(this.caseInsensitive){var f=b.replace(a[0],"").replace(a[2],function(a){return a.toLowerCase()});this.supportNamespaces||(f=f.replace(/xmlns\=\"[^"]*\"/g,""));var e=apf.getXmlDom(f);apf.xmlParseError&&apf.xmlParseError(e),e=e.documentElement}else e=apf.getXmlDom(b,null,this.preserveWhiteSpace||apf.debug).documentElement;return this.parseFromXml(e,d)},this.parseFromXml=function(a,b){var c,d,e,f;b||(b={});if(!b.delayedRender&&!b.include)b.doc?(c=b.doc,d=b.docFrag||c.createDocumentFragment()):(c=new apf.AmlDocument,c.$aml=a,c.$domParser=this),b.host&&(c.$parentNode=b.host),e=this.$createNode(c,a.nodeType,a),(d||c).appendChild(e),b.htmlNode&&(e.$int=b.htmlNode);else{e=b.amlNode,c=b.doc;if(b.include)var g=e.childNodes,h=g.indexOf(b.beforeNode),i=h?g.splice(h,g.length-h):[]}this.$parseContext=[e,b],this.$addParseState(e,b||{});var j,k={},l=[],m=this,n;(n=function(a,b){var d,e,f,g,h=a.childNodes,i=0,j=b.length;for(;i<j;i++){e=m.$createNode(c,(f=b[i]).nodeType,f);if(!e)continue;h[d=h.length]=e,e.parentNode=a,d>0&&((e.previousSibling=h[d-1]).nextSibling=e),!e.render&&e.canHaveChildren&&(g=f.childNodes).length&&n(e,g);if(e.$parsePrio){if(e.$parsePrio=="001"){e.dispatchEvent("DOMNodeInsertedIntoDocument");continue}(k[e.$parsePrio]||l.push(e.$parsePrio)&&(k[e.$parsePrio]=[])).push(e)}}a.firstChild=h[0],a.lastChild=h[d]})(e,a.childNodes);if(b.include&&i.length){var o=g.length-1;g.push.apply(g,i);var p=g[o],q=g[o+1];(q.previousSibling=p).nextSibling=q,e.lastChild=g[g.length-1]}if(b.delay)return e.$parseOptions={prios:l,nodelist:k},d||c;l.sort();var r,s,t,u;for(r=0,t=l.length;r<t;r++){j=k[l[r]];for(s=0,u=j.length;s<u;s++)j[s].dispatchEvent("DOMNodeInsertedIntoDocument")}return this.$waitQueue[e.$uniqueId]&&this.$waitQueue[e.$uniqueId].$shouldWait?d||c:(b.timeout?$setTimeout(function(){m.$continueParsing(e,b)}):this.$continueParsing(e,b),d||c)},this.$isPaused=function(a){return this.$waitQueue[a.$uniqueId]&&this.$waitQueue[a.$uniqueId].$shouldWait>0},this.$addParseState=function(a,b){var c=this.$waitQueue[a.$uniqueId]||(this.$waitQueue[a.$uniqueId]=[]);return c.pushUnique(b),c},this.$pauseParsing=function(a,b){var c=this.$waitQueue[a.$uniqueId];c.$shouldWait||(c.$shouldWait=0),c.$shouldWait++},this.$continueParsing=function(a,b){a||(a=apf.document.documentElement);var c=a.$uniqueId;if(c in this.$waitQueue){var d=this.$waitQueue[c];if(d.$shouldWait&&--d.$shouldWait)return!1;var e=a.parentNode;while(e&&e.nodeType==1){if(this.$waitQueue[e.$uniqueId]&&this.$waitQueue[e.$uniqueId].$shouldWait)return!1;e=e.parentNode}var f=apf.all[c];delete this.$waitQueue[c];for(var g=0;g<d.length;g++)this.$parseState(f,d[g])}else this.$parseState(a,b||{});delete this.$parseContext},this.$parseState=function(a,b){this.$callCount++;if(a.$parseOptions){var c=a.$parseOptions.prios,d=a.$parseOptions.nodelist,e,f,g,h,i;delete a.$parseOptions,c.sort();for(e=0,g=c.length;e<g;e++){var j=d[c[e]];for(f=0,h=j.length;f<h;f++){if(!(i=j[f]).parentNode||i.$amlLoaded)continue;j[f].dispatchEvent("DOMNodeInsertedIntoDocument")}}}!b.ignoreSelf&&!a.$amlLoaded&&a.dispatchEvent("DOMNodeInsertedIntoDocument"),function k(a){var b,c;for(var d=0,e=a.length;d<e;d++)(b=a[d]).$amlLoaded||b.dispatchEvent("DOMNodeInsertedIntoDocument"),!b.render&&(c=b.childNodes).length&&k(c)}(a.childNodes),!--this.$callCount&&!b.delay&&apf.queue.empty(),b.callback&&b.callback.call(a.ownerDocument)},this.$createNode=function(a,b,c,d,e,f){var g;switch(b){case 1:var h,i;c?((d=c.namespaceURI||apf.ns.xhtml)&&!(i=a.$prefixes[d])&&(a.$prefixes[i=c.prefix||c.scopeName||""]=d,a.$namespaceURIs[d]=i,!a.namespaceURI&&!i&&(a.namespaceURI=d,a.prefix=i)),e=c.baseName||c.localName||c.tagName.split(":").pop()):i=a.$prefixes[d]||"";var j=apf.namespaces[d].elements;g=new(j[e]||j["@default"])(null,e),g.prefix=i||"",g.namespaceURI=d,g.tagName=i?i+":"+e:e;if(c){(h=c.getAttribute("id"))&&!self[h]&&g.$propHandlers.id.call(g,g.id=h);var k=c.attributes,l;for(var m,n=0,o=k.length;n<o;n++)g.attributes.push(new apf.AmlAttr(g,l=(m=k[n]).nodeName,m.nodeValue)),l=="render"&&(g.render=!0)}break;case 2:g=new apf.AmlAttr,g.name=g.nodeName=e;if(f||(f=c&&c.nodeValue))g.value=g.nodeValue=f;c?c.namespaceURI&&!(g.prefix=a.$namespaceURIs[g.namespaceURI=c.namespaceURI])&&(a.$prefixes[g.prefix=c.prefix||c.scopeName]=g.namespaceURI):g.prefix=a.$prefixes[d];break;case 3:c&&(f=c&&c.nodeValue);if(!this.preserveWhiteSpace&&!(f||"").trim())return;g=new apf.AmlText,g.nodeValue=f||c&&c.nodeValue;break;case 7:var p=e||c&&c.nodeName;g=new apf.aml.processingInstructions[p],g.target=g.nodeName=p,g.data=g.nodeValue=f||c&&c.nodeValue;break;case 4:g=new apf.AmlCDATASection,g.nodeValue=f||c&&c.nodeValue;break;case 5:g=new apf.AmlNode,g.nodeType=b;break;case 6:g=new apf.AmlNode,g.nodeType=b;break;case 8:g=new apf.AmlComment,g.nodeValue=f||c&&c.nodeValue;break;case 9:g=new apf.AmlDocument,g.$domParser=this;break;case 10:g=new apf.AmlNode,g.nodeType=b;break;case 11:g=new apf.AmlDocumentFragment}return g.ownerDocument=a,g.$aml=c,g}},apf.AmlNamespace=function(){this.elements={},this.processingInstructions={}},apf.AmlNamespace.prototype={setElement:function(a,b){return this.elements[a]=b},setProcessingInstruction:function(a,b){this.processingInstructions[a]=b}},apf.aml=new apf.AmlNamespace,apf.setNamespace("http://ajax.org/2005/aml",apf.aml),apf.__AMLNODE__=16384,apf.AmlNode=function(){this.$init(function(){this.childNodes=[]})},function(){this.toString=function(){return this.nodeName?"["+this.nodeName.uCaseFirst()+" Node]":"["+this.localName.uCaseFirst()+" Element Node, <"+(this.prefix?this.prefix+":":"")+this.localName+" "+this.attributes.join(" ")+" /> : "+(this.name||this.$uniqueId||"")+"]"},this.$regbase=this.$regbase|apf.__AMLNODE__,this.NODE_ELEMENT=1,this.NODE_ATTRIBUTE=2,this.NODE_TEXT=3,this.NODE_CDATA_SECTION=4,this.NODE_ENTITY_REFERENCE=5,this.NODE_ENTITY=6,this.NODE_PROCESSING_INSTRUCTION=7,this.NODE_COMMENT=8,this.NODE_DOCUMENT=9,this.NODE_DOCUMENT_TYPE=10,this.NODE_DOCUMENT_FRAGMENT=11,this.NODE_NOTATION=12,this.ownerDocument=null,this.nodeValue="",this.namespaceURI="",this.appendChild=this.insertBefore=function(a,b,c){function m(){a.$pHtmlNode=k.canHaveChildren?k.$int:document.body;if(document.adoptNode&&a.$ext&&a.$ext.nodeType==1){var d=[],e=apf.getArrayFromNodelist(a.$ext.getElementsByTagName("iframe"));a.$ext.tagName=="IFRAME"&&document.adoptNode(a.$ext);for(var f=0;f<e.length;f++)d[f]=[e[f].parentNode,e[f].nextSibling,document.adoptNode(e[f])]}var j=b;if(!l&&!c&&a.$ext&&!a.$coreHtml){j=b;while(j&&!j.$altExt&&!j.$ext)j=j.nextSibling;a.$pHtmlNode.insertBefore(a.$altExt||a.$ext,j&&(j.$altExt||j.$ext)||null);for(var f=d.length-1;f>=0;f--)d[f][0].insertBefore(d[f][2],d[f][1]);d=[]}a.dispatchEvent("DOMNodeInserted",{$beforeNode:b,relatedNode:k,$isMoveWithinParent:g,$oldParentHtmlNode:h,$oldParent:i,bubbles:!0});if(l&&!c&&b&&a.$ext&&!a.$coreHtml){j=b;while(j&&!j.$altExt&&!j.$ext)j=j.nextSibling;a.$pHtmlNode.insertBefore(a.$altExt||a.$ext,j&&(j.$altExt||j.$ext)||null);for(var f=d.length-1;f>=0;f--)d[f][0].insertBefore(d[f][2],d[f][1])}}if(this.nodeType==this.NODE_DOCUMENT){if(this.childNodes.length)throw new Error(apf.formatErrorString(0,this,"Insertbefore DOM operation","Only one top level element is allowed in an AML document."));this.documentElement=a}if(a==b)return a;if(this==a)throw new Error(apf.formatErrorString(0,this,"Insertbefore DOM operation","Cannot append node as a child of itself."));if(a.nodeType==this.NODE_DOCUMENT_FRAGMENT){var d=a.childNodes.slice(0);for(var e=0,f=d.length;e<f;e++)this.insertBefore(d[e],b);return a}var g=a.parentNode==this,h=a.$pHtmlNode,i=a.parentNode,j=-1,k=this;if(b){j=this.childNodes.indexOf(b);if(j<0)return!1}a.ownerDocument||(a.ownerDocument=this.ownerDocument||apf.ownerDocument),a.parentNode&&a.removeNode(g,!0),a.parentNode=this,b&&(j=this.childNodes.indexOf(b)),b&&(a.nextSibling=b,a.previousSibling=b.previousSibling,b.previousSibling=a,a.previousSibling&&(a.previousSibling.nextSibling=a)),j>=0?this.childNodes=this.childNodes.slice(0,j).concat(a,this.childNodes.slice(j)):(j=this.childNodes.push(a)-1,a.nextSibling=null,j>0?(a.previousSibling=this.childNodes[j-1],a.previousSibling.nextSibling=a):a.previousSibling=null),this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[this.childNodes.length-1];var l=!a.$amlLoaded,n=this.nodeType==this.NODE_DOCUMENT?this:this.ownerDocument;if(!n||n.$domParser.$isPaused(this))return a;if(this.nodeType==this.NODE_DOCUMENT_FRAGMENT)return;return l&&!a.render&&(this.ownerDocument||this).$domParser.$continueParsing(a,{delay:!0}),m(),a},this.removeNode=function(a,b){return!this.parentNode||!this.parentNode.childNodes?this:(this.parentNode.childNodes.remove(this),this.$amlLoaded&&!apf.isDestroying&&(this.dispatchEvent("DOMNodeRemoved",{relatedNode:this.parentNode,bubbles:!0,$doOnlyAdmin:a}),!b&&!a&&this.$ext&&this.$ext.parentNode&&this.$ext.parentNode.removeChild(this.$ext)),this.parentNode.firstChild==this&&(this.parentNode.firstChild=this.nextSibling),this.parentNode.lastChild==this&&(this.parentNode.lastChild=this.previousSibling),this.nextSibling&&(this.nextSibling.previousSibling=this.previousSibling),this.previousSibling&&(this.previousSibling.nextSibling=this.nextSibling),this.$pHtmlNode=this.parentNode=this.previousSibling=this.nextSibling=null,this)},this.removeChild=function(a){return a.removeNode(),this},this.replaceChild=function(){},this.cloneNode=function(a){return a&&this.nodeType==1?this.ownerDocument.$domParser.parseFromXml(this,{doc:this.ownerDocument,delay:!0}).childNodes[0]:this.ownerDocument.$domParser.$createNode(this.ownerDocument,this.nodeType,this)},this.canDispatch=function(a,b){},this.compareDocumentPosition=function(a){},this.hasAttributes=function(){return this.attributes&&this.attributes.length},this.hasChildNodes=function(){return this.childNodes&&this.childNodes.length},this.isDefaultNamespace=function(a){if(b.nodeType==1&&!this.prefix)return this.namespaceURI==a;var b=this.parentNode||this.ownerElement;return b&&b.isDefaultNamespace(a)},this.lookupNamespaceURI=function(a){if(b.nodeType==1&&this.namespaceURI&&a==this.prefix)return this.namespaceURI;var b=this.parentNode||this.ownerElement;return b&&b.lookupNamespaceURI(a)},this.lookupPrefix=function(a){if(this.nodeType==1&&a==this.namespaceURI&&this.prefix)return this.prefix;var b=this.parentNode||this.ownerElement;return b&&b.lookupPrefix(a)},this.normalize=function(){},this.selectNodes=function(a,b){if(!apf)return;return apf.XPath||apf.runXpath(),apf.XPath.selectNodes(a,b||(this.nodeType==9?this.documentElement:this))},this.selectSingleNode=function(a,b){if(!apf)return;return apf.XPath||apf.runXpath(),apf.XPath.selectNodes(a,b||(this.nodeType==9?this.documentElement:this))[0]}}.call(apf.AmlNode.prototype=new apf.Class),apf.AmlElement=function(a,b){var c=this.$init;this.$init=function(a,b,d){this.$supportedProperties=this.$supportedProperties.slice();var e,f,g;f=this.$propHandlers,g=this.$propHandlers={};for(e in f)g[e]=f[e];f=this.$booleanProperties,g=this.$booleanProperties={};for(e in f)g[e]=f[e];return c.call(this,a,b,d)},this.$init(function(a,b,c){this.$events={},this.$inheritProperties={},this.attributes=new apf.AmlNamedNodeMap(this),this.nodeFunc=b,this.localName=a;if(c){var d,e,f,g;c.childNodes&&(d=c.childNodes,delete c.childNodes);for(e in c){if(e=="htmlNode")continue;this.attributes.push(new apf.AmlAttr(this,e,c[e]))}this.ownerDocument||(this.ownerDocument=apf.document,this.prefix="a",this.namespaceURI=apf.ns.aml,this.tagName=a);if(d){this.childNodes=d;for(f=0,g=d.length;f<g;f++)d[f].nextSibling=d[f+1]||null,d[f].previousSibling=d[f-1]||null,d[f].parentNode=this;this.firstChild=d[0]||null,this.lastChild=d[d.length-1]||null}this.$aml=apf.$emptyNode||(apf.$emptyNode=apf.getXml("<empty />"))}}),b&&c.call(this,b,apf.NODE_HIDDEN,a)},function(){this.nodeType=this.NODE_ELEMENT,this.canHaveChildren=!0,this.$propHandlers={id:function(a){if(this.name==a)return;self[this.name]==this&&(self[this.name]=null);if(!self[a]||!self[a].hasFeature)try{self[a]=this}catch(b){}apf.nameserver.register(this.localName,a,this),this.name=a}},this.$booleanProperties={},this.$inheritProperties={},this.$supportedProperties=[],this.getElementsByTagName=function(a,b){a=a.toLowerCase();var c,d,e,f=this.childNodes,g=[];for(d=0,e=f.length;d<e;d++){if((c=f[d]).nodeType!=1)continue;(c.tagName==a||a=="*")&&g.push(c),!b&&c.nodeType==1&&(g=g.concat(c.getElementsByTagName(a)))}return g},this.getElementsByTagNameNS=function(a,b,c){b=b.toLowerCase();var d,e,f,g=this.childNodes,h=[];for(e=0,f=g.length;e<f;e++){if((d=g[e]).nodeType!=1)continue;d.namespaceURI==a&&(d.localName==b||b=="*")&&h.push(d),!c&&d.nodeType==1&&(h=h.concat(d.getElementsByTagNameNS(a,b)))}return h},this.setAttribute=function(a,b,c){a=a.toLowerCase();var d=this.attributes.getNamedItem(a);if(!d){this.attributes.push(d=new apf.AmlAttr(this,a,b));if(!this.$amlLoaded)return;c?d.$setValue(b):(d.dispatchEvent("DOMNodeInsertedIntoDocument",{relatedNode:this}),d.dispatchEvent("DOMNodeInserted",{relatedNode:this,bubbles:!0}));return}var e=d.nodeValue;d.$setValue(b);if(c||!this.$amlLoaded)return;d.$triggerUpdate(null,e)},this.setAttributeNode=function(a){this.attributes.setNamedItem(a)},this.setAttributeNS=function(a,b,c){return this.setAttribute(b,c)},this.hasAttribute=function(a){return this.getAttributeNode(a)?!0:!1},this.hasAttributeNS=function(a,b){return this.hasAttribute(b)},this.removeAttribute=function(a){return this.attributes.removeNamedItem(a),this},this.removeAttributeNS=function(a,b){return this.removeAttribute(b)},this.removeAttributeNode=function(a){this.attributes.removeNamedItem(a.name)},this.getAttribute=function(a,b){var c=this.attributes.getNamedItem(a);return c?b?c.inheritedValue||c.nodeValue:c.nodeValue:null},this.getAttributeNode=function(a){return this.attributes.getNamedItem(a)},this.getBoundingClientRect=function(){return new apf.AmlTextRectangle(this)},this.querySelector=function(){},this.querySelectorAll=function(){},this.scrollIntoView=function(){},this.replaceMarkup=function(a,b){b||(b={}),b.$intAML||(b.$intAML=this.$aml),b.$int||(b.$int=this.$int),b.clear=!0;for(var c=this.childNodes.length-1;c>=0;c--){var d=this.childNodes[c];d.destroy&&d.destroy(!0),d.$ext!=this.$int&&apf.destroyHtmlNode(d.$ext)}this.childNodes.length=0,b.noLoadingMsg!==!1&&(this.$int.innerHTML="<div class='loading'>loading...</div>"),this.insertMarkup(a,b)},this.insertMarkup=function(a,b){var c=this,d=new apf.XiInclude;a.trim().charAt(0)=="<"&&(a=apf.getXml(a)),d.setAttribute("href",a),b&&b.clear&&d.setAttribute("clear",!0),d.options=b,d.callback=b&&b.callback||function(){c.dispatchEvent("afteramlinserted",{src:a})},this.appendChild(d)},this.serialize=function(a){if(a||!this.firstChild)return"<"+(this.prefix?this.prefix+":"+this.localName+" xmlns:"+this.prefix+'="'+this.namespaceURI+'"':this.localName)+(this.attributes&&this.attributes.length?" ":"")+(this.attributes&&this.attributes.join(" ")||"")+"/>";var b=["<"+(this.prefix?this.prefix+":"+this.localName+" xmlns:"+this.prefix+'="'+this.namespaceURI+'"':this.localName)+(this.attributes&&this.attributes.length?" ":"")+(this.attributes&&this.attributes.join(" ")||"")+">"];for(var c=this.firstChild;c;c=c.nextSibling)b.push(c.serialize());return b.join("")+"</"+(this.prefix?this.prefix+":"+this.localName:this.localName)+">"},this.$setInheritedAttribute=function(a){var b,c=this,d=!1;b=c.getAttribute(a);if(!b){c=c.parentNode;while(c&&c.nodeType==1&&!(b=c.getAttribute(a,!0)))c=c.parentNode;d=!0}return!b&&apf.config&&a&&(b=apf.config[a]),b&&(this.$clearDynamicProperty(a),d&&(this.$inheritProperties[a]=2),typeof b=="string"&&(b.indexOf("{")>-1||b.indexOf("[")>-1)?this.$setDynamicProperty(a,b):this.setProperty(a,b,!1,!1,2)),b},this.addEventListener("DOMNodeInserted",function(a){if(a.currentTarget!=this||a.$isMoveWithinParent||!a.$oldParent)return;var b,c,d=apf.config.$inheritProperties;for(var e in d)b=apf.getInheritedAttribute(a.$oldParent,e),c=apf.getInheritedAttribute(this.parentNode,e),b!=c&&function f(a){var b,g,h,i;for(b=0,g=a.length;b<g;b++){h=a[b];if(h.nodeType!=1&&h.nodeType!=7)continue;i=h.$inheritProperties[e];if(d[e]==1&&!i)f(h.childNodes);else if(!(i<0)){if(i==3){var j=h[e];h[e]=null}h.setProperty(e,i!=3?c:j,!1,!1,i)}}}([this])}),this.$handlePropSet=function(a,b,c){this.$booleanProperties[a]&&(b=apf.isTrue(b)),this[a]=b;var d;return(d=this.$propHandlers&&this.$propHandlers[a]||this.nodeFunc==apf.NODE_VISIBLE&&apf.GuiElement&&apf.GuiElement.propHandlers[a]||null)&&d.call(this,b,a,c)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b,c,d,e=this.attributes;for(c=0,d=e.length;c<d;c++)e[c].dispatchEvent("DOMNodeInsertedIntoDocument")},!0),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.$amlLoaded=!0})}.call(apf.AmlElement.prototype=new apf.AmlNode),apf.AmlCharacterData=function(){this.data="",this.length=0,this.$init(!0),this.appendData=function(a){this.dispatchEvent("DOMCharacterDataModified",{value:a})},this.deleteData=function(a,b){this.dispatchEvent("DOMCharacterDataModified",{offset:a,count:b})},this.insertData=function(a,b){this.dispatchEvent("DOMCharacterDataModified",{offset:a,count:b})},this.replaceData=function(a,b,c){this.dispatchEvent("DOMCharacterDataModified",{offset:a,count:b,value:c})},this.substringData=function(a,b){}},apf.AmlCharacterData.prototype=new apf.AmlNode,apf.AmlText=function(a){this.$init(a)},function(){this.nodeType=this.NODE_TEXT,this.nodeName="#text",this.serialize=function(){return apf.escapeXML(this.nodeValue)},this.$setValue=function(a){this.dispatchEvent("DOMCharacterDataModified",{bubbles:!0,prevValue:this.nodeValue,newValue:this.nodeValue=a}),this.$amlLoaded&&this.$ext&&(this.$ext.nodeValue=a)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b;if(!(b=this.parentNode.$int)||this.parentNode.hasFeature(apf.__CHILDVALUE__))return;this.$amlLoaded=!0;var c=this.nodeValue;if(apf.config.liveText&&!this.parentNode.hasFeature(apf.__CHILDVALUE__)&&(c.indexOf("{")>-1||c.indexOf("[")>-1)){this.$supportedProperties=[],this.$propHandlers={},this.$booleanProperties={},this.$inheritProperties={},this.$propHandlers.calcdata=apf.LiveMarkupPi.prototype.$propHandlers.calcdata,this.$setInheritedAttribute=apf.AmlElement.prototype.$setInheritedAttribute,this.implement(apf.StandardBinding),b.appendChild(this.$ext=document.createElement("span")),this.$setDynamicProperty("calcdata",this.nodeValue);return}if(apf.hasTextNodeWhiteSpaceBug){var c=c.replace(/[\t\n\r ]+/g," ");c&&c!=" "&&(this.$ext=b.appendChild(b.ownerDocument.createTextNode(c)))}else this.$ext=b.appendChild(b.ownerDocument.createTextNode(c))},!0)}.call(apf.AmlText.prototype=new apf.AmlCharacterData),apf.AmlAttr=function(a,b,c){this.$init(),a&&(this.ownerElement=a,this.ownerDocument=a.ownerDocument),this.nodeName=this.name=b,this.nodeValue=this.value=c},function(){this.nodeType=this.NODE_ATTRIBUTE,this.MODIFICATION=1,this.ADDITION=2,this.REMOVAL=3,this.serialize=this.toString=function(){return this.name+'="'+apf.escapeXML(String(this.value))+'"'},this.$setValue=function(a){this.nodeValue=this.value=a,this.specified=!0,this.ownerElement.dispatchEvent("DOMAttrModified",{relatedNode:this,attrChange:this.MODIFICATION,attrName:this.name,newValue:a,prevValue:this.$lastValue||"",bubbles:!0}),this.$lastValue=a},this.$triggerUpdate=function(a,b){var c=this.name,d=this.value||this.nodeValue,e=this.ownerElement;if(c=="id"&&!this.specified&&e.id){this.specified=!0;return}if(c.substr(0,2)=="on"){e.$events[c]&&e.removeEventListener(c.replace(/^on/,""),e.$events[c]),d&&e.addEventListener(c,e.$events[c]=typeof d=="string"?new Function("event",d):d);return}this.specified&&e.$clearDynamicProperty(c),typeof d=="string"&&(e.$attrExcludePropBind[c]||d.indexOf("{")>-1||d.indexOf("[")>-1)?e.$setDynamicProperty(c,d):e.setProperty(c,d),this.specified?e.dispatchEvent("DOMAttrModified",{relatedNode:this,attrChange:this.MODIFICATION,attrName:c,newValue:d,prevValue:this.$lastValue||"",bubbles:!0}):this.specified=!0,this.$lastValue=d},this.addEventListener("DOMNodeInsertedIntoDocument",this.$triggerUpdate)}.call(apf.AmlAttr.prototype=new apf.AmlNode),apf.AmlCDATASection=function(a){this.nodeType=this.NODE_CDATA_SECTION,this.nodeName="#cdata-section",this.$init(a)},apf.AmlCDATASection.prototype=new apf.AmlText(!0),apf.AmlCDATASection.prototype.serialize=function(){return"<![CDATA["+this.nodeValue+"]]>"},apf.AmlComment=function(a){this.nodeType=this.NODE_COMMENT,this.nodeName="#comment",this.$init(a)},function(){this.serialize=function(){return"<!--"+this.nodeValue+"-->"},this.$setValue=function(a){this.dispatchEvent("DOMCharacterDataModified",{bubbles:!0,newValue:a,prevValue:this.nodeValue})}}.call(apf.AmlComment.prototype=new apf.AmlCharacterData),apf.AmlConfiguration=function(a){this.parameterNames=[],this.$init(a)},function(){this.setParameter=this.setProperty,this.getParameter=this.getProperty,this.canSetParameter=function(a,b){return this.parameterNames.indexOf(a)>-1}}.call(apf.AmlConfiguration.prototype=new apf.Class),apf.AmlDocument=function(){this.$prefixes={},this.$namespaceURIs={},this.domConfig=new apf.AmlConfiguration,this.$init()},function(){this.nodeType=this.NODE_DOCUMENT,this.nodeFunc=apf.NODE_HIDDEN,this.nodeName="#document",this.$amlLoaded=!0,this.activeElement=null,this.doctype=null,this.domConfig=null,this.implementation=null,this.characterSet=apf.characterSet,this.documentElement=null,this.getElementById=function(a){return self[a]},this.getElementsByTagName=function(a){var b,c=(b=this.documentElement).getElementsByTagName(a);return(a=="*"||b.tagName==a)&&c.unshift(b),c},this.getElementsByTagNameNS=function(a,b){var c,d=(c=this.documentElement).getElementsByTagNameNS(a,b);return(b=="*"||c.tagName==b&&c.namespaceURI==a)&&d.unshift(c),d},this.createElement=function(a){return this.$domParser.$createNode(this,this.NODE_ELEMENT,null,this.namespaceURI,a)},this.createElementNS=function(a,b){return this.$domParser.$createNode(this,this.NODE_ELEMENT,null,a,b)},this.importNode=function(a,b){return b&&a.nodeType==1?this.$domParser.parseFromXml(a,{doc:this,delay:!0}).childNodes[0]:this.$domParser.$createNode(this,a.nodeType,a)},this.createAttribute=function(a){return this.$domParser.$createNode(this,this.NODE_ATTRIBUTE,null,this.nameSpaceURI,a)},this.createAttributeNS=function(a,b){return this.$domParser.$createNode(this,this.NODE_ATTRIBUTE,null,a,b)},this.createEvent=function(){return new apf.AmlEvent},this.createComment=function(a){return this.$domParser.$createNode(this,this.NODE_COMMENT,null,null,null,a)},this.createProcessingInstruction=function(a,b){return this.$domParser.$createNode(this,this.NODE_PROCESSING_INSTRUCTION,null,null,a,b)},this.createCDATASection=function(a){return this.$domParser.$createNode(this,this.NODE_CDATA_SECTION,null,null,null,a)},this.createTextNode=function(a){return this.$domParser.$createNode(this,this.NODE_TEXT,null,null,null,a)},this.createDocumentFragment=function(){return this.$domParser.$createNode(this,this.NODE_DOCUMENT_FRAGMENT)},this.querySelector=function(){},this.querySelectorAll=function(){},this.hasFocus=function(){}}.call(apf.AmlDocument.prototype=new apf.AmlNode),apf.AmlDocumentFragment=function(a){this.$init(a)},apf.AmlDocumentFragment.prototype=new apf.AmlNode,apf.AmlDocumentFragment.prototype.nodeName="#document-fragment",apf.AmlDocumentFragment.prototype.nodeType=apf.AmlDocumentFragment.prototype.NODE_DOCUMENT_FRAGMENT,apf.AmlEvent=function(a,b){this.name=a;var c;for(c in b)this[c]=b[c]},apf.AmlEvent.prototype={bubbles:!1,cancelBubble:!1,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0},stop:function(){this.returnValue=!1,this.cancelBubble=!0}},apf.AmlNamedNodeMap=function(a){this.$host=a},function(){this.getNamedItem=function(a){for(var b=0;b<this.length;b++)if(this[b].name==a)return this[b];return!1},this.setNamedItem=function(a){var b=a.name;for(var c,d=this.length-1;d>=0;d--)if(this[d].name==b){this[d].ownerElement=null,this.splice(d,1);break}this.push(a),a.ownerElement=this.$host,a.ownerDocument=this.$host.ownerDocument,a.$triggerUpdate()},this.removeNamedItem=function(a){for(var b,c=this.length-1;c>=0;c--)if(this[c].name==a){b=this[c],this.splice(c,1);break}if(!b)return!1;var d=b.nodeValue;return b.nodeValue=b.value="",b.$triggerUpdate(null,d),b.ownerElement=null,b.nodeValue=b.value=d,b},this.item=function(a){return this[a]},this.length=0,this.splice=function(a,b){for(var c=a,d=this.length-b;c<d;c++)this[c]=this[c+1];delete this[c],this.length-=b},this.push=function(a){return this[this.length++]=a,this.length},this.join=function(a){var b=[];for(var c,d,e=0,f=this.length;e<f;e++)(c=(d=this[e]).ownerElement)&&c.$inheritProperties[d.nodeName]!=2&&b.push(this[e]);return b.join(a)}}.call(apf.AmlNamedNodeMap.prototype={}),apf.AmlProcessingInstruction=function(a){this.$init(a)},function(){this.nodeType=this.NODE_PROCESSING_INSTRUCTION,this.data=null,this.target=null,this.serialize=function(){return"<?"+this.target+"\n"+apf.escapeXML(this.nodeValue)+"\n?>"},this.reload=function(){this.$handlePropSet("data",this.data)},this.$attrExcludePropBind=apf.extend({calcdata:0},this.$attrExcludePropBind),this.getAttribute=function(){},this.$setInheritedAttribute=apf.AmlElement.prototype.$setInheritedAttribute,this.$supportedProperties=[],this.$propHandlers={},this.$booleanProperties={},this.$inheritProperties={},this.$setValue=function(a){this.setProperty("data",a)},this.$handlePropSet=function(a,b,c){this[a]=b,a=="data"?(this.$clearDynamicProperty("calcdata"),this.$setDynamicProperty("calcdata",b)):a!="target"&&this.$propHandlers[a]&&this.$propHandlers[a].call(this,b,a)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=a.pHtmlNode;if(!b&&(this.parentNode.$bindingRule||!(b=this.parentNode.$int)))return;b.appendChild(this.$ext=document.createElement("span")),this.$ext.host=this,this.$setDynamicProperty("calcdata",this.data)},!0),this.$destroy=function(){this.$clearDynamicProperty("calcdata"),this.$propHandlers.calcdata.call(this,"")}}.call(apf.AmlProcessingInstruction.prototype=new apf.AmlNode),apf.AmlTextRectangle=function(a){function c(){var a=b.getAbsolutePosition(b.$ext);b.setProperty("left",a[0]),b.setProperty("top",a[1]),b.setProperty("right",document.documentElement.offsetWidth-a[0]),b.setProperty("bottom",document.documentElement.offsetWidth-a[1])}var b=this;a.addEventListener("prop.width",c),a.addEventListener("prop.height",c),a.addEventListener("prop.left",c),a.addEventListener("prop.top",c),c.call(a)},apf.AmlTextRectangle.prototype=new apf.Class,apf.xhtml=new apf.AmlNamespace,apf.setNamespace("http://www.w3.org/1999/xhtml",apf.xhtml),apf.XhtmlElement=function(a,b){this.$init(b||!0,apf.NODE_VISIBLE,a),this.$xoe=this.addEventListener,this.addEventListener=this.$xae,this.removeEventListener=this.$xre;var c=this;this.$de=function(a){c.dispatchEvent(a.type,null,a)}},function(){var a={contextmenu:1,keydown:1,keypress:1,keyup:1,DOMNodeInserted:2,DOMNodeInsertedIntoDocument:2,DOMNodeRemoved:2,DOMNodeRemovedFromDocument:2};this.$xae=function(b,c){this.$xoe.apply(this,arguments);if(a[b]>(this.editable?0:1)||b.substr(0,5)=="prop.")return;this.$ext&&(b.substr(0,2)=="on"&&(b=b.substr(2)),apf.addListener(this.$ext,b,this.$de))},this.$xre=function(a,b){apf.AmlElement.prototype.removeEventListener.apply(this,arguments),this.$ext&&apf.removeListener(this.$ext,a,this.$de)},this.$handlePropSet=function(a,b,c,d){this.$booleanProperties[a]&&(b=apf.isTrue(b)),this[a]=b;var e=this.$propHandlers&&this.$propHandlers[a]||apf.GuiElement.propHandlers[a];e?e.call(this,b,null,a):this.$int&&(c||this.$amlLoaded)&&this.$int.setAttribute(apf.isIE&&apf.isIE<8&&a=="class"?"className":a,b)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b;if(!(b=this.$pHtmlNode=this.parentNode.$int))return;var c,d=this.$aml;d?(d.serialize?c=d.serialize():(d=d.cloneNode(!1),c=d.xml||d.nodeValue),c=c.replace(/ on\w+="[^"]*"| on\w+='[^']*'/g,""),this.$ext=this.$int=apf.insertHtmlNode(null,b,null,apf.html_entity_decode(c))):this.$ext=this.$int=b.appendChild(document.createElement(this.localName)),this.localName!="a"&&(this.$ext.host=this),this.style=this.$ext.style},!0),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.$amlLoaded=!0,this.$setLayout&&this.$setLayout()})}.call(apf.XhtmlElement.prototype=new apf.AmlElement),apf.Init.addConditional(function(){if(apf.isO3)return;var a=apf.XhtmlElement.prototype;a.implement(apf.Anchoring),a.$drawn=!0,a.$setLayout=apf.GuiElement.prototype.$setLayout,a.addEventListener("DOMNodeInserted",function(a){a.currentTarget==this&&"vbox|hbox|table".indexOf(this.parentNode.localName)==-1&&this.$setLayout()})},null,["interactive"]),apf.xhtml.setElement("@default",apf.XhtmlElement),apf.XhtmlBodyElement=function(a,b){this.$init(b||"body",apf.NODE_VISIBLE,a)},function(){this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.ownerDocument.body||(this.ownerDocument.body=this),this.$ext=this.$int=document.body},!0)}.call(apf.XhtmlBodyElement.prototype=new apf.AmlElement),apf.Init.addConditional(function(){if(apf.isO3)return;var a=apf.XhtmlBodyElement.prototype},null,["interactive"]),apf.xhtml.setElement("body",apf.XhtmlBodyElement),apf.XhtmlHtmlElement=function(a,b){this.$init(b||"html",apf.NODE_VISIBLE,a),this.$ext=document.documentElement,this.$ext.host=this,this.$int=document.body,this.$tabList=[],this.$focussable=apf.KEYBOARD,this.focussable=!0,this.visible=!0,this.$isWindowContainer=!0,this.implement(apf.Focussable),apf.window.$addFocus(this),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b,c,d,e,f,g=this.attributes,h=this.ownerDocument;for(b=0,c=g.length;b<c;b++)d=(e=g[b]).nodeName.split(":"),d[0]=="xmlns"&&((f=d[1])?(h.$prefixes[f]=e.nodeValue,h.$namespaceURIs[e.nodeValue]=f):h.namespaceURI=e.nodeValue);h.namespaceURI||(h.namespaceURI=apf.ns.xhtml)})},apf.XhtmlHtmlElement.prototype=new apf.XhtmlElement,apf.xhtml.setElement("html",apf.XhtmlHtmlElement),apf.XhtmlIgnoreElement=function(a,b){this.$init(b,apf.NODE_VISIBLE,a)},apf.XhtmlIgnoreElement.prototype=new apf.AmlElement,apf.xhtml.setElement("script",apf.XhtmlIgnoreElement),apf.xhtml.setElement("noscript",apf.XhtmlIgnoreElement),apf.xhtml.setElement("head",apf.XhtmlIgnoreElement),apf.xhtml.setElement("meta",apf.XhtmlIgnoreElement),apf.XhtmlInputElement=function(a,b){this.$init(b||"input",apf.NODE_VISIBLE,a)},function(){this.$xae=apf.XhtmlElement.prototype.$xae,this.$xre=apf.XhtmlElement.prototype.$xre,this.$handlePropSet=function(a,b,c){if(a=="type")return;return apf.XhtmlElement.prototype.$handlePropSet.call(this,a,b,c)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b;if(!(b=this.parentNode.$int))return;this.$aml?this.$ext=this.$int=apf.insertHtmlNode(this.$aml.serialize?this.$aml:this.$aml.cloneNode(!1),b):(this.$ext=this.$int=document.createElement(this.localName),this.getAttribute("type")&&this.$int.setAttribute("type",this.getAttribute("type")),b.appendChild(this.$int))},!0)}.call(apf.XhtmlInputElement.prototype=new apf.AmlElement),apf.xhtml.setElement("input",apf.XhtmlInputElement),apf.XhtmlOptionElement=function(a,b){this.$init(b||"option",apf.NODE_VISIBLE,a)},function(){this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.$ext=this.$int=this.parentNode.$int.appendChild(this.parentNode.$int.ownerDocument.createElement("option")),this.value&&this.$int.setAttribute("value",this.value)},!0)}.call(apf.XhtmlOptionElement.prototype=new apf.AmlElement),apf.xhtml.setElement("option",apf.XhtmlOptionElement),apf.XhtmlSkipChildrenElement=function(a,b){this.$init(b,apf.NODE_VISIBLE,a)},function(){this.canHaveChildren=!1,this.$redraw=function(){var a=this;apf.queue.add("redraw"+this.$uniqueId,function(){var b=a.$ext.parentNode,c=a.$ext.nextSibling;b.removeChild(a.$ext),a.$ext=apf.insertHtmlNode(null,b,c,a.$aml?a.$aml.serialize?a.$aml.serialize():a.$aml.xml:a.serialize())})},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b;if(!(b=this.parentNode.$int))return;this.$ext=apf.insertHtmlNode(null,b,null,this.$aml?this.$aml.serialize?this.$aml.serialize():this.$aml.xml:this.serialize())},!0)}.call(apf.XhtmlSkipChildrenElement.prototype=new apf.AmlElement),apf.xhtml.setElement("object",apf.XhtmlSkipChildrenElement),apf.xhtml.setElement("embed",apf.XhtmlSkipChildrenElement),apf.xhtml.setElement("table",apf.XhtmlSkipChildrenElement),apf.xhtml.setElement("pre",apf.XhtmlSkipChildrenElement),apf.xinclude=new apf.AmlNamespace,apf.setNamespace("http://www.w3.org/2001/XInclude",apf.xinclude),apf.XiInclude=function(a,b){this.$init(b||"include",apf.NODE_HIDDEN,a)},apf.xinclude.setElement("include",apf.XiInclude),apf.aml.setElement("include",apf.XiInclude),function(){function a(a){this.callback&&this.callback({xmlNode:a,amlNode:this.parentNode,addedNode:this.previousSibling||this.nextSibling}),this.parentNode&&this.parentNode.removeChild(this)}function b(b){var c=this.ownerDocument.$domParser;this.clear&&(this.parentNode.$int.innerHTML="");if(b){c.parseFromXml(b,{doc:this.ownerDocument,amlNode:this.parentNode,beforeNode:this,include:!0});if(!this.defer&&this.$parseContext){var d=this.$parseContext[1]||(this.$parseContext[1]={}),e=d.callback,f=this;d.callback=function(){a.call(f,b),e&&e.call(f.ownerDocument)};if(c.$continueParsing(this.$parseContext[0])===!1){var g=c.$parseContext[1]||(c.$parseContext[1]={}),h=d.callback;g.callback=function(){e&&e.call(f.ownerDocument),c.$continueParsing(f.$parseContext[0])}}}else a.call(this,b)}else this.defer||c.$continueParsing(this.$parseContext[0]),a.call(this,b)}function c(a){var c=this;apf.getData(a,apf.extend(this.options||{},{callback:function(d,e,f){if(e!=apf.SUCCESS){var g=new Error(apf.formatErrorString(1007,c,"Loading Includes","Could not load Include file '"+(a||c.src)+"'\nReason: "+f.message));if(f.tpModule.retryTimeout(f,e,null,g)===!0)return!0;apf.console.error(g.message),b.call(c,null);return}d=d.replace(/\<\!DOCTYPE[^>]*>/,"").replace(/^[\r\n\s]*/,""),apf.supportNamespaces||(d=d.replace(/xmlns\=\"[^"]*\"/g,"")),d.indexOf("<a:application")==-1&&(d="<a:application xmlns:a='"+apf.ns.aml+"'>"+d+"</a:application>");var h=apf.getXml(d,null,!0);if(!h)throw new Error(apf.formatErrorString(0,null,"Loading include","Could not parse include file. Maybe the file does not exist?",h));h.setAttribute("filename",f.url),b.call(c,h)},async:!0,ignoreOffline:!0}))}this.$parsePrio="002",this.$propHandlers.href=this.$propHandlers.src=function(a){if(typeof a!="string")return b.call(this,a);if(a.trim().charAt(0)=="<"){c.call(this,a.trim());return}this.$path=a.charAt(0)=="{"?a:apf.getAbsolutePath(apf.hostPath,a);var d=this.ownerDocument.$domParser;this.defer||d.$pauseParsing.apply(d,this.$parseContext=d.$parseContext||[this.parentNode]),c.call(this,this.$path)}}.call(apf.XiInclude.prototype=new apf.AmlElement),apf.__LIVEEDIT__=1<<23,apf.__ANCHORING__=8192,apf.Anchoring=function(){function e(a){if(!(this.$rule_header||this.$rule_v||this.$rule_h)||!this.parentNode)return;if(a.value){if(this.$rule_v||this.$rule_h){var b=this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h;c.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",b),c.queue(this.$pHtmlNode,this)}c.processQueue()}else c.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),c.queue(this.$pHtmlNode)}function f(a){if(a&&(a.$doOnlyAdmin||a.currentTarget!=this))return;c.queue&&this.$pHtmlNode&&(c.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),c.queue(this.$pHtmlNode))}function g(a){if(!this.$amlLoaded||a.currentTarget!=this)return;!a.$isMoveWithinParent&&this.$parsed&&this.$moveAnchoringRules(a.$oldParentHtmlNode)}function h(){return this.$pHtmlDoc?"try{            var oHtml = "+(apf.hasHtmlIdsInJs?this.$ext.getAttribute("id"):"document.getElementById('"+this.$ext.getAttribute("id")+"')")+";                        var pWidth = "+(this.$pHtmlNode==this.$pHtmlDoc.body?"apf.getWindowWidth()":"apf.getHtmlInnerWidth(oHtml.parentNode)")+";                        var pHeight = "+(this.$pHtmlNode==this.$pHtmlDoc.body?"apf.getWindowHeight()":"apf.getHtmlInnerHeight(oHtml.parentNode)")+";            }catch(e){            }":""}function i(a,b){return String(a).replace(apf.percentageMatch,"(("+b+" * $1)/100)")}function j(){this.$updateQueue&&(this.$updateLayout(),apf.layout.activateRules(this.$ext.parentNode))}this.$regbase=this.$regbase|apf.__ANCHORING__,this.$anchors=[];var a=1,b=2;this.$updateQueue=0,this.$inited=this.$parsed=this.$anchoringEnabled=!1,this.$hordiff=this.$verdiff=0,this.$rule_v=this.$rule_h=this.$rule_header="";var c=apf.layout;this.$supportedProperties.push("anchors");var d={right:function(a,d){if(!this.$anchoringEnabled&&!this.$setLayout("anchoring"))return;!a&&a!==0&&(this.$ext.style[d]=""),this.$updateQueue||c.queue(this.$pHtmlNode,this),this.$updateQueue=this.$updateQueue|b},bottom:function(b,d){if(!this.$anchoringEnabled&&!this.$setLayout("anchoring"))return;!b&&b!==0&&(this.$ext.style[d]=""),this.$updateQueue||c.queue(this.$pHtmlNode,this),this.$updateQueue=this.$updateQueue|a}};d.left=d.width=d.right,d.top=d.height=d.bottom,this.$propHandlers.anchors=function(d){this.$anchors=d?d.splitSafe("(?:, *| )"):[];if(!this.$anchoringEnabled&&!this.$setLayout("anchoring"))return;!this.$updateQueue&&apf.loaded&&c.queue(this.$pHtmlNode,this),this.$updateQueue=this.$updateQueue|b|a},this.$disableAnchoring=function(a){if(!this.$inited||!this.$anchoringEnabled||!this.$pHtmlNode)return;c.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),c.queue&&c.queue(this.$pHtmlNode);for(var b in d)delete this.$propHandlers[b];this.removeEventListener("DOMNodeRemoved",f),this.removeEventListener("DOMNodeInserted",g),this.$ext&&(this.$ext.style.left=this.$ext.style.right=this.$ext.style.top=this.$ext.style.bottom=this.$ext.style.width=this.$ext.style.height=this.$ext.style.position=""),this.removeEventListener("prop.visible",e),this.$inited=!1,this.$anchoringEnabled=!1},this.$enableAnchoring=function(){if(this.$inited)return;apf.extend(this.$propHandlers,d),this.addEventListener("DOMNodeRemoved",f),this.addEventListener("DOMNodeInserted",g),this.addEventListener("prop.visible",e),this.$updateQueue=0|((this.left||this.width||this.right||this.anchors)&&b)|((this.top||this.height||this.bottom||this.anchors)&&a),this.$updateQueue&&c.queue(this.$pHtmlNode,this),this.$inited=!0,this.$anchoringEnabled=!0},this.$moveAnchoringRules=function(a,b){var d=a&&c.removeRule(a,this.$uniqueId+"_anchors");d&&c.queue(a);if(!this.$rule_v&&!this.$rule_h&&!this.$rule_header)return;this.$rule_header=h.call(this),d=this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h,c.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",d),c.queue(this.$pHtmlNode,this)},this.$hasAnchorRules=function(){return this.$rule_v||this.$rule_h?!0:!1},this.$recalcAnchoring=function(d){this.$updateQueue=this.$updateQueue|b|a,this.$updateLayout(),c.queue(this.$pHtmlNode,this),d||c.processQueue()},this.$updateLayout=function(){if(!this.$anchoringEnabled)return;if(!apf.window.vManager.check(this,"anchoring",j))return;this.$parsed||(this.$ext.getAttribute("id")||apf.setUniqueHtmlId(this.$ext),this.$rule_header=h.call(this),this.$parsed=!0);if(!this.$updateQueue){this.visible&&this.$ext.style.display=="none"&&(this.$ext.style.display="");return}this.draggable=="relative"?"absolute|fixed|relative".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="absolute"):this.left||this.left===0||this.top||this.top===0||this.right||this.right===0||this.bottom||this.bottom===0||this.$anchors.length?"absolute|fixed".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="absolute"):this.center||("absolute|fixed|relative".indexOf(apf.getStyle(this.$ext,"position"))==-1&&(this.$ext.style.position="relative"),this.width||(this.$ext.style.width=""),this.height||(this.$ext.style.height=""));var d;if(this.$updateQueue&b){d=[],this.$hordiff=apf.getWidthDiff(this.$ext);var e=this.$anchors[3]||this.left,f=this.$anchors[1]||this.right,g=this.width,k=e||e===0,m=f||f===0,n=g||g===0;f&&typeof f=="string"&&(f=i(f,"pWidth")),k&&(parseInt(e)!=e?(e=i(e,"pWidth"),d.push("oHtml.style.left = ("+e+") + 'px'")):this.$ext.style.left=e+"px"),(apf.hasStyleAnchors||!k)&&m&&(parseInt(f)!=f?(f=i(f,"pWidth"),d.push("oHtml.style.right = ("+f+") + 'px'")):this.$ext.style.right=f+"px"),k&&m?apf.hasStyleAnchors?this.$ext.style.width="":d.push("oHtml.style.width = (pWidth - ("+f+") - ("+e+") - "+this.$hordiff+") + 'px'"):n&&typeof this.maxwidth=="number"&&typeof this.minwidth=="number"&&(parseInt(g)!=g?(g=i(g,"pWidth"),d.push("oHtml.style.width = Math.max("+(this.minwidth-this.$hordiff)+", Math.min("+(this.maxwidth-this.$hordiff)+", "+g+" - "+this.$hordiff+")) + 'px'")):this.$ext.style.width=(g>this.minwidth?g<this.maxwidth?g:this.maxwidth:this.minwidth)-this.$hordiff+"px"),this.$rule_h=d.length?"try{"+d.join(";}catch(e){};try{")+";}catch(e){};":""}if(this.$updateQueue&a){d=[],this.$verdiff=apf.getHeightDiff(this.$ext);var o=this.$anchors[0]||this.top,p=this.$anchors[2]||this.bottom,q=this.height,r=o||o===0,s=p||p===0,t=q||q===0;p&&typeof p=="string"&&(p=i(p,"pHeight")),r&&(parseInt(o)!=o?(o=i(o,"pHeight"),d.push("oHtml.style.top = ("+o+") + 'px'")):this.$ext.style.top=o+"px"),(apf.hasStyleAnchors||!r)&&s&&(parseInt(p)!=p?d.push("oHtml.style.bottom = ("+p+") + 'px'"):this.$ext.style.bottom=p+"px"),r&&s?apf.hasStyleAnchors?this.$ext.style.height="":d.push("oHtml.style.height = (pHeight - ("+p+") - ("+o+") - "+this.$verdiff+") + 'px'"):t&&typeof this.minheight=="number"&&(parseInt(q)!=q?(q=i(q,"pHeight"),d.push("oHtml.style.height = Math.max("+(this.minheight-this.$verdiff)+", Math.min("+(this.maxheight-this.$verdiff)+", "+q+" - "+this.$verdiff+")) + 'px'")):this.$ext.style.height=Math.max(0,(q>this.minheight?q<this.maxheight?q:this.maxheight:this.minheight)-this.$verdiff)+"px"),this.$rule_v=d.length?"try{"+d.join(";}catch(e){};try{")+";}catch(e){};":""}this.$rule_v||this.$rule_h?c.setRules(this.$pHtmlNode,this.$uniqueId+"_anchors",this.$rule_header+"\n"+this.$rule_v+"\n"+this.$rule_h,!0):c.removeRule(this.$pHtmlNode,this.$uniqueId+"_anchors"),this.$updateQueue=0,this.$box&&!apf.hasFlexibleBox&&apf.layout.forceResize(this.$ext)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){}),this.addEventListener("DOMNodeRemovedFromDocument",function(a){this.$disableAnchoring()})},apf.__CONTENTEDITABLE__=1<<24,apf.__GUIELEMENT__=32768,apf.__VALIDATION__=64,apf.GuiElement=function(){this.$init(!0)},function(){this.$regbase=this.$regbase|apf.__GUIELEMENT__,this.$focussable=apf.KEYBOARD_MOUSE,this.visible=2,this.minwidth=1,this.minheight=1,this.$booleanProperties["disable-keyboard"]=!0,this.$booleanProperties.visible=!0,this.$booleanProperties.focussable=!0,this.$supportedProperties.push("draggable","resizable"),this.$supportedProperties.push("focussable","zindex","disabled","tabindex","disable-keyboard","contextmenu","visible","autosize","loadaml","actiontracker","alias","width","left","top","height","tooltip"),this.$setLayout=function(a,b){if(!this.$drawn||!this.$pHtmlNode)return!1;if(this.parentNode){if(this.parentNode.localName=="table")return this.$disableCurrentLayout&&this.$disableCurrentLayout(),this.parentNode.register(this,b),this.$disableCurrentLayout=null,a=="table";if("vbox|hbox".indexOf(this.parentNode.localName)>-1)return this.$disableCurrentLayout&&this.$disableCurrentLayout(),this.parentNode.register(this,b),this.$disableCurrentLayout=null,a==this.parentNode.localName}return this.$anchoringEnabled||(this.$disableCurrentLayout&&this.$disableCurrentLayout(),this.$enableAnchoring(),this.$disableCurrentLayout=this.$disableAnchoring),a=="anchoring"},this.addEventListener("DOMNodeInserted",function(a){a.currentTarget==this&&"vbox|hbox|table".indexOf(this.parentNode.localName)==-1&&this.$setLayout()}),this.implement(apf.Anchoring),this.setWidth=function(a){return this.setProperty("width",a,!1,!0),this},this.setHeight=function(a){return this.setProperty("height",a,!1,!0),this},this.setLeft=function(a){return this.setProperty("left",a,!1,!0),this},this.setTop=function(a){return this.setProperty("top",a,!1,!0),this},this.show||(this.show=function(){return this.setProperty("visible",!0,!1,!0),this}),this.hide||(this.hide=function(){return this.setProperty("visible",!1,!1,!0),this}),this.getWidth=function(){return(this.$ext||{}).offsetWidth},this.getHeight=function(){return(this.$ext||{}).offsetHeight},this.getLeft=function(){return(this.$ext||{}).offsetLeft},this.getTop=function(){return(this.$ext||{}).offsetTop},this.enable=function(){return this.setProperty("disabled",!1,!1,!0),this},this.disable=function(){return this.setProperty("disabled",!0,!1,!0),this},this.sendToBack=function(){return this.setProperty("zindex",0,!1,!0),this},this.bringToFront=function(){return this.setProperty("zindex",apf.all.length+1,!1,!0),this},this.sendBackwards=function(){return this.setProperty("zindex",this.zindex-1,!1,!0),this},this.bringForward=function(){return this.setProperty("zindex",this.zindex+1,!1,!0),this},this.hasFocus=function(){},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=this.$aml;this.parentNode&&(this.localName=="item"&&this.parentNode.hasFeature(apf.__MULTISELECT__)?this.$pHtmlNode=this.parentNode.$container:this.$pHtmlNode=this.parentNode.$int);if(!this.$pHtmlNode)return;this.$pHtmlDoc=this.$pHtmlNode.ownerDocument||document,this.$initSkin&&this.$initSkin(b),this.$draw&&this.$draw(),a.id&&this.$ext.setAttribute("id",a.id),typeof this.visible=="undefined"&&(this.visible=!0),this.$focussable&&typeof this.focussable=="undefined"&&apf.GuiElement.propHandlers.focussable.call(this),this.$drawn=!0},!0);var a=function(a){if(!this.$pHtmlNode)return;this.$setLayout();if(this.$ext){var b=this.hasFeature(apf.__PRESENTATION__)||!1,c=this.$isLeechingSkin?this.localName:"main";this.minwidth==undefined&&(this.minwidth=apf.getCoord(b&&parseInt(this.$getOption(c,"minwidth")),0)),this.minheight==undefined&&(this.minheight=apf.getCoord(b&&parseInt(this.$getOption(c,"minheight")),0)),this.maxwidth==undefined&&(this.maxwidth=apf.getCoord(b&&parseInt(this.$getOption(c,"maxwidth")),1e4)),this.maxheight==undefined&&(this.maxheight=apf.getCoord(b&&parseInt(this.$getOption(c,"maxheight")),1e4));var d=apf.getDiff(this.$ext);this.$ext.style.minWidth=Math.max(0,this.minwidth-d[0])+"px",this.$ext.style.minHeight=Math.max(0,this.minheight-d[1])+"px",this.$ext.style.maxWidth=Math.max(0,this.maxwidth-d[0])+"px",this.$ext.style.maxHeight=Math.max(0,this.maxheight-d[1])+"px",this.$altExt&&apf.isGecko&&(this.$altExt.style.minHeight=this.$ext.style.minHeight,this.$altExt.style.maxHeight=this.$ext.style.maxHeight,this.$altExt.style.minWidth=this.$ext.style.minWidth,this.$altExt.style.maxWidth=this.$ext.style.maxWidth)}this.$loadAml&&this.$loadAml(this.$aml)};this.addEventListener("DOMNodeInsertedIntoDocument",a),this.addEventListener("$skinchange",a);var a;this.addEventListener("$event.resize",a=function(b){apf.layout.setRules(this.$ext,"resize","var o = apf.all["+this.$uniqueId+"];            if (o) o.dispatchEvent('resize');",!0),apf.layout.queue(this.$ext),this.removeEventListener("$event.resize",a)}),this.addEventListener("contextmenu",function(a){if(!this.contextmenus)return;if(this.hasFeature(apf.__DATABINDING__)){var b,c=this.hasFeature(apf.__MULTISELECT__)?this.selected:this.xmlRoot,d,e,f,g,h,i,j,k;for(d=0,e=this.contextmenus.length;d<e;d++){g=typeof (j=this.contextmenus[d])=="string",k=null,!g&&j.match&&c&&(k=(j.cmatch||(j.cmatch=apf.lm.compile(j.match,{xpathmode:3,injectself:!0})))(c));if(g||c&&k||!j.match){i=g?j:j.menu;if(!self[i])return;self[i].display(a.x,a.y,null,this,c),a.returnValue=!1,a.cancelBubble=!0;break}}}else{i=typeof this.contextmenus[0]=="string"?this.contextmenus[0]:this.contextmenus[0].getAttribute("menu");if(!self[i])return;self[i].display(a.x,a.y,null,this),a.returnValue=!1,a.cancelBubble=!0}})}.call(apf.GuiElement.prototype=new apf.AmlElement),apf.GuiElement.propHandlers={focussable:function(a){this.focussable=typeof a=="undefined"||a,this.hasFeature(apf.__FOCUSSABLE__)||this.implement(apf.Focussable),this.focussable?apf.window.$addFocus(this,this.tabindex):apf.window.$removeFocus(this)},zindex:function(a){this.$ext.style.zIndex=a},visible:function(a){if(apf.isFalse(a)||typeof a=="undefined"){this.$ext&&(this.$ext.style.display="none");if(apf.document.activeElement==this||this.canHaveChildren==2&&apf.isChildOf(this,apf.document.activeElement,!1))apf.config.allowBlur&&this.hasFeature(apf.__FOCUSSABLE__)?this.blur():apf.window.moveNext();this.visible=!1}else this.$ext&&(this.$ext.style.display="",this.$ext.offsetHeight||(this.$ext.style.display=this.$display||"block")),apf.layout&&this.$int&&apf.layout.forceResize(this.$int),this.visible=!0},disabled:function(a){if(!this.$drawn){var b=this;apf.queue.add("disable"+this.$uniqueId,function(c){b.disabled=a,apf.GuiElement.propHandlers.disabled.call(b,a)});return}apf.queue.remove("disable"+this.$uniqueId);if(this.canHaveChildren){a!=-1&&(a=this.disabled=apf.isTrue(a));var c=this.childNodes;for(var d,e=0,f=c.length;e<f;e++)d=c[e],d.nodeFunc==apf.NODE_VISIBLE&&(a&&d.disabled!=-1&&(d.$disabled=d.disabled||!1),d.setProperty("disabled",a?-1:!1));if(this.$isWindowContainer)return}if(a!=-1&&a!=0&&typeof this.$disabled=="boolean")if(a===null)a=this.$disabled,this.$disabled=null;else{this.$disabled=a||!1;return}if(apf.isTrue(a)||a==-1)this.disabled=!1,apf.document.activeElement==this&&(apf.window.moveNext(!0),apf.document.activeElement==this&&this.$blur()),this.hasFeature(apf.__PRESENTATION__)&&this.$setStyleClass(this.$ext,this.$baseCSSname+"Disabled"),this.$disable&&this.$disable(),this.disabled=a;else{if(this.hasFeature(apf.__DATABINDING__)&&apf.config.autoDisable&&!!this.$bindings&&!this.xmlRoot)return!1;this.disabled=!1,apf.document.activeElement==this&&this.$focus(),this.hasFeature(apf.__PRESENTATION__)&&this.$setStyleClass(this.$ext,null,[this.$baseCSSname+"Disabled"]),this.$enable&&this.$enable()}},enabled:function(a){this.setProperty("disabled",!a)},"disable-keyboard":function(a){this.disableKeyboard=apf.isTrue(a)},tooltip:function(a){this.$ext.setAttribute("title",(a||"")+(this.hotkey?" ("+this.hotkey+")":""))},contextmenu:function(a){this.contextmenus=[a]},actiontracker:function(a){a?a.localName=="actiontracker"?this.$at=a:(this.$at=typeof a=="string"&&self[a]?apf.nameserver.get("actiontracker",a)||self[a].getActionTracker():apf.setReference(a,apf.nameserver.register("actiontracker",a,new apf.actiontracker)),this.$at.name||(this.$at.name=a)):this.$at=null},aml:function(a){this.replaceMarkup(a)}},apf.__PRESENTATION__=512,apf.Presentation=function(){this.$init(!0)},function(){function a(a,c){clearTimeout(this.$skinTimer);if(this.selectable)var d=this.getSelection();var e=this.$ext,f=this.$int,g=this.$ext.parentNode,h=e.nextSibling,i=this.$ext.getAttribute("id"),j=this.$int&&this.$int.getAttribute("id"),k=this.$baseCSSname;e.parentNode&&e.parentNode.removeChild(e),this.$destroy&&this.$destroy(!0),this.skin=a,this.$loadSkin(c?c+":"+a:null),this.$draw&&this.$draw(!0),i&&this.$ext.setAttribute("id",i),(h||g!=this.$ext.parentNode)&&g.insertBefore(this.$ext,h);var l,m,n=[],o=(e.className||"").splitSafe("\\s+");for(l=0;l<o.length;l++)o[l]&&o[l].indexOf(k)!=0&&n.push(o[l].replace(k,this.$baseCSSname));apf.setStyleClass(this.$ext,n.join(" "));var p,q=apf.skins.events;for(l=0,m=q.length;l<m;l++)p=q[l],typeof e[p]=="function"&&!this.$ext[p]&&(this.$ext[p]=e[p]);this.$ext.style.left=e.style.left,this.$ext.style.top=e.style.top,this.$ext.style.width=e.style.width,this.$ext.style.height=e.style.height,this.$ext.style.right=e.style.right,this.$ext.style.bottom=e.style.bottom,this.$ext.style.zIndex=e.style.zIndex,this.$ext.style.position=e.style.position,this.$ext.style.display=e.style.display,j&&this.$int.setAttribute("id",j);if(this.$int&&this.$int!=f){var r,s=this.$int,t=f.childNodes;for(var l=t.length-1;l>=0;l--)(r=t[l]).host&&(r.host.$pHtmlNode=s,r.host.$isLeechingSkin&&b.call(r.host)),s.insertBefore(r,s.firstChild)}this.hasFeature(apf.__DRAGDROP__)&&document.elementFromPointAdd&&(document.elementFromPointRemove(e),document.elementFromPointAdd(this.$ext)),this.disabled&&this.$disable(),this.$focussable&&apf.document.activeElement==this&&this.$focus(),this.dispatchEvent("$skinchange",{ext:e,"int":f}),this.hasFeature(apf.__DATABINDING__)&&this.xmlRoot?this.reload():this.value&&this.$propHandlers.value.call(this,this.value),this.hasFeature(apf.__MULTISELECT__)&&this.selectable&&this.selectList(d,!0),apf.hasSingleRszEvent||(apf.layout.activateRules(this.$ext),this.$int&&apf.layout.activateRules(this.$int)),this.draggable&&this.$propHandlers.draggable&&this.$propHandlers.draggable.call(this,this.draggable),this.resizable&&this.$propHandlers.resizable&&this.$propHandlers.resizable.call(this,this.resizable),apf.layout.forceResize(this.$ext)}function b(a){if(!this.$amlLoaded||a&&(a.$isMoveWithinParent||a.currentTarget!=this||!a.$oldParent))return;this.$setInheritedAttribute(this,"skinset");if(this.attributes.getNamedItem("skin"))return;var b,c=this.parentNode,d;if((b=this.$canLeechSkin.dataType==apf.STRING?this.$canLeechSkin:this.localName)&&c.$originalNodes&&(d=c.$originalNodes[b])&&d.getAttribute("inherit")){var e=d.getAttribute("link");this.$isLeechingSkin=!0;if(e)this.$forceSkinChange(e);else{var f=c.skinName.split(":");this.$forceSkinChange(f[1],f[0])}}else this.$isLeechingSkin&&(delete this.skin,this.$isLeechingSkin=!1,this.$forceSkinChange())}this.$regbase=this.$regbase|apf.__PRESENTATION__,this.$supportedProperties.push("skin"),this.$propHandlers.skinset=this.$propHandlers.skin=function(b){if(!this.$amlLoaded)return;if(!this.$skinTimer){var c=this;clearTimeout(this.$skinTimer),this.$skinTimer=$setTimeout(function(){a.call(c,c.skin),delete c.$skinTimer})}},this.$propHandlers.style=function(a){!this.styleAttrIsObj&&this.$amlLoaded&&this.$ext.setAttribute("style",a)},this.$propHandlers.border=function(a){a?this.$ext.style.borderWidth=apf.getBox(a).join("px ")+"px":this.$ext.style.borderWidth=""},this.$propHandlers.margin=function(a){a?this.$ext.style.margin=apf.getBox(a).join("px ")+"px":this.$ext.style.margin=""},this.$propHandlers["class"]=function(a){this.$setStyleClass(this.$ext,a,this.$lastClassValue?[this.$lastClassValue]:null),this.$lastClassValue=a},this.$forceSkinChange=function(b,c){a.call(this,b,c)},this.$setStyleClass=apf.setStyleClass,this.$initSkin=function(a){this.$canLeechSkin&&this.addEventListener("DOMNodeInserted",b),this.skin||(this.skin=this.getAttribute("skin"));var c,d=this.parentNode,e;if(this.$canLeechSkin&&!this.skin&&(c=this.$canLeechSkin.dataType==apf.STRING?this.$canLeechSkin:this.localName)&&d&&d.$originalNodes&&(e=d.$originalNodes[c])&&e.getAttribute("inherit")){var f=e.getAttribute("link");this.$isLeechingSkin=!0,f?(this.skin=f,this.$loadSkin()):this.$loadSkin(d.skinName)}else this.skinset||(this.skinset=this.getAttribute("skinset")),this.$loadSkin(null,this.$canLeechSkin)},this.$loadSkin=function(a,b){this.baseSkin=a||(this.skinset||this.$setInheritedAttribute("skinset"))+":"+(this.skin||this.localName),clearTimeout(this.$skinTimer),this.skinName&&(this.$blur(),this.$baseCSSname=null),this.skinName=this.baseSkin,this.$pNodes={},this.$originalNodes=apf.skins.getTemplate(this.skinName,!0);if(!this.$originalNodes){var c=this.skin;if(c){var d=this.skinName.split(":")[0];this.baseName=this.skinName="default:"+c,this.$originalNodes=apf.skins.getTemplate(this.skinName),!this.$originalNodes&&d!="default"&&(this.baseName=this.skinName=d+":"+this.localName,this.$originalNodes=apf.skins.getTemplate(this.skinName,!0))}this.$originalNodes||(this.baseName=this.skinName="default:"+this.localName,this.$originalNodes=apf.skins.getTemplate(this.skinName));if(!this.$originalNodes){if(b)return this.baseName=this.skinName=this.originalNode=null;throw new Error(apf.formatErrorString(1077,this,"Presentation","Could not load skin: "+this.baseSkin))}}this.$originalNodes&&apf.skins.setSkinPaths(this.skinName,this)},this.$getNewContext=function(a,b){this.$pNodes[a]=this.$originalNodes[a].cloneNode(!0)},this.$hasLayoutNode=function(a){return this.$originalNodes[a]?!0:!1},this.$getLayoutNode=function(a,b,c){var d=this.$pNodes[a]||this.$originalNodes[a];if(!d)return!1;if(!b)return c||apf.getFirstElement(d);var e=d.getAttribute(b);return e?c?apf.queryNode(c,e):apf.getFirstElement(d).selectSingleNode(e):null},this.$getOption=function(a,b){a=a.toLowerCase();var c=this.$pNodes[a]||this.$originalNodes[a];if(!b||!c)return c;var d=c.selectSingleNode("@"+b);return d?d.nodeValue:""},this.$getExternal=function(a,b,c,d){b||(b=this.$pHtmlNode),a||(a="main"),a=a.toLowerCase(),this.$getNewContext(a);var e=this.$getLayoutNode(a),f;(f=(d||this).getAttributeNode("style"))&&e.setAttribute("style",f.nodeValue),c&&c.call(this,e),e=apf.insertHtmlNode(e,b),e.host=this;if(f=(d||this).getAttributeNode("bgimage"))e.style.backgroundImage="url("+apf.getAbsolutePath(this.mediaPath,f.nodeValue)+")";return this.$baseCSSname||(this.$baseCSSname=e.className.trim().split(" ")[0]),e},this.$focus=function(){if(!this.$ext)return;this.$setStyleClass(this.oFocus||this.$ext,this.$baseCSSname+"Focus")},this.$blur=function(){this.renaming&&this.stopRename(null,!0);if(!this.$ext)return;this.$setStyleClass(this.oFocus||this.$ext,"",[this.$baseCSSname+"Focus"])},this.$fixScrollBug=function(){this.$int!=this.$ext?this.oFocus=this.$int:(this.oFocus=this.$int=this.$ext.appendChild(document.createElement("div")),this.$int.style.height="100%",this.$int.className="focusbug")}}.call(apf.Presentation.prototype=new apf.GuiElement),apf.config.$inheritProperties.skinset=1,apf.__VALIDATION__=64,apf.validator={macro:{pattern:"value.match(",pattern_:")",custom:"(",custom_:")",min:"parseInt(value) >= ",max:"parseInt(value) <= ",maxlength:"value.toString().length <= ",minlength:"value.toString().length >= ",notnull:"value.toString().length > 0",checkequal:"!(temp = ",checkequal_:").isValid() || temp.getValue() == value"},compile:function(a){var b=this.macro,c=["var temp, valid = true;             if (!validityState)                 validityState = new apf.validator.validityState(); "];a.required&&c.push("if (checkRequired && (!value || value.toString().trim().length == 0)) {                validityState.$reset();                validityState.valueMissing = true;                valid = false;            }"),c.push("validityState.$reset();            if (value) {");for(prop in a){if(!b[prop])continue;c.push("if (!(",b[prop],a[prop],b[prop+"_"]||"",")){                validityState.$set('",prop,"');                valid = false;            }")}return c.push("};validityState.valid = valid; return validityState;"),new Function("value","checkRequired","validityState",c.join(""))}},apf.validator.validityState=function(){this.valueMissing=!1,this.typeMismatch=!1,this.patternMismatch=!1,this.tooLong=!1,this.rangeUnderflow=!1,this.rangeOverflow=!1,this.stepMismatch=!1,this.customError=!1,this.valid=!0,this.$reset=function(){for(var a in this){if(a.substr(0,1)=="$")continue;this[a]=!1}this.valid=!0},this.$set=function(a){switch(a){case"min":this.rangeUnderflow=!0;break;case"max":this.rangeOverflow=!0;break;case"minlength":this.tooShort=!0;break;case"maxlength":this.tooLong=!0;break;case"pattern":this.patternMismatch=!0;break;case"datatype":this.typeMismatch=!0;break;case"notnull":this.typeMismatch=!0;break;case"checkequal":this.typeMismatch=!0}}},apf.Validation=function(){this.$regbase=this.$regbase|apf.__VALIDATION__,this.isValid=function(a){if(!this.$vOptions)return!0;(this.$vOptions.isValid||(this.$vOptions.isValid=apf.validator.compile(this.$vOptions))).call(this,typeof this.getValue=="function"?this.getValue(null,!0):null,a,this.validityState||(this.validityState=new apf.validator.validityState));var b=this.validityState.valid;return this.dispatchEvent(b?"valid":"invalid",this.validityState),b},this.setCustomValidity=function(a){},this.showMe=function(){var a=this.parentNode;while(a)a.show&&a.show(),a=a.parentNode},this.validate=function(a,b,c){return c||!this.isValid(!a)&&!b?(this.setError(),!1):(this.clearError(),!0)},this.setError=function(a){this.$validgroup||this.$propHandlers.validgroup.call(this,"vg"+this.parentNode.$uniqueId);var b=this.$validgroup.getErrorBox(this);this.$validgroup.allowMultipleErrors||this.$validgroup.hideAllErrors(),b.setMessage(this.invalidmsg||a),apf.setStyleClass(this.$ext,this.$baseCSSname+"Error"),this.showMe(),(this.invalidmsg||a)&&b.display(this),apf.document.activeElement&&apf.document.activeElement!=this&&this.focus(null,{mouse:!0})},this.clearError=function(a){this.$setStyleClass&&this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Error"]);if(this.$validgroup){var b=this.$validgroup.getErrorBox(null,!0);if(!b||b.host!=this)return;b.hide()}},this.addEventListener("DOMNodeRemovedFromDocument",function(a){this.$validgroup&&this.$validgroup.unregister(this)}),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.validgroup||this.$setInheritedAttribute("validgroup")}),this.$attrExcludePropBind=apf.extend({pattern:1,validtest:3},this.$attrExcludePropBind),this.$booleanProperties.required=!0,this.$supportedProperties.push("validgroup","required","datatype","pattern","min","max","maxlength","minlength","validtest","notnull","checkequal","invalidmsg","requiredmsg"),this.$fValidate=function(){if(this.liveedit)return;if(!this.$validgroup)this.validate(!0);else{var a=this.$validgroup.getErrorBox(this);(!a.visible||a.host!=this)&&this.validate(!0)}},this.addEventListener("blur",this.$fValidate),this.$propHandlers.validgroup=function(a){if(a){var b;typeof a!="string"?(this.$validgroup=a.name,b=a):b=apf.nameserver.get("validgroup",a),this.$validgroup=b||new apf.ValidationGroup(a),this.$validgroup.register(this)}else this.$validgroup.unregister(this),this.$validgroup=null},this.$propHandlers.pattern=function(a,b){a.substr(0,1)!="/"&&(a="/"+a+"/"),(this.$vOptions||(this.$vOptions={}))[b]=a,delete this.$vOptions.isValid},this.$propHandlers.required=this.$propHandlers.custom=this.$propHandlers.min=this.$propHandlers.max=this.$propHandlers.maxlength=this.$propHandlers.minlength=this.$propHandlers.notnull=this.$propHandlers.checkequal=function(a,b){(this.$vOptions||(this.$vOptions={}))[b]=a,delete this.$vOptions.isValid},this.$propHandlers.validtest=function(a){var b=this,c={};this.removeValidationCache=function(){c={}},this.$checkRemoteValidation=function(){var a=this.getValue();return typeof c[a]=="boolean"?c[a]:c[a]==-1?!0:(c[a]=-1,apf.getData(this.validtest.toString(),{xmlNode:this.xmlRoot,value:this.getValue(),callback:function(d,e,f){if(e!=apf.SUCCESS){if(e==apf.TIMEOUT&&f.retries<apf.maxHttpRetries)return f.tpModule.retry(f.id);var g=new Error(apf.formatErrorString(0,b,"Validating entry at remote source","Communication error: \n\n"+f.message));if(b.dispatchEvent("error",apf.extend({error:g,state:status},f))!==!1)throw g;return}c[a]=apf.isTrue(d),c[a]?b.clearError():b.hasFocus()||b.setError()}}),!0)},(this.$vOptions||(this.$vOptions={})).custom="apf.lookup("+this.$uniqueId+").$checkRemoteValidation()",delete this.$vOptions.isValid}},apf.GuiElement.propHandlers.required=apf.GuiElement.propHandlers.pattern=apf.GuiElement.propHandlers.min=apf.GuiElement.propHandlers.max=apf.GuiElement.propHandlers.maxlength=apf.GuiElement.propHandlers.minlength=apf.GuiElement.propHandlers.notnull=apf.GuiElement.propHandlers.checkequal=apf.GuiElement.propHandlers.validtest=function(a,b){this.implement(apf.Validation),this.$propHandlers[b].call(this,a,b)},apf.ValidationGroup=function(a){this.$init(),this.childNodes=[],a&&apf.setReference(a,this),this.name=a||"validgroup"+this.$uniqueId,apf.nameserver.register("validgroup",this.name,this)},function(){function checkValidChildren(a,b,c){var d;for(var e,f=0;f<a.childNodes.length;f++){var g=a.childNodes[f];if(!g)continue;if(!g.disabled&&(!this.validateVisibleOnly&&g.visible||!g.$ext||g.$ext.offsetHeight)&&g.hasFeature(apf.__VALIDATION__)&&g.isValid&&!g.isValid(!b))if(!c)if(!d){g.validate(!0,null,!0),d=!0;if(!this.allowMultipleErrors)return!0}else g.errBox&&g.errBox.host==g&&g.errBox.hide();else if(!this.allowMultipleErrors)return!0;if(g.canHaveChildren&&g.childNodes.length){d=checkValidChildren.call(this,g,b,c)||d;if(d&&!this.allowMultipleErrors)return!0}}return d}this.validateVisibleOnly=!1,this.allowMultipleErrors=!1,this.register=function(a){a.hasFeature(apf.__VALIDATION__)&&this.childNodes.push(a)},this.unregister=function(a){this.childNodes.remove(a)},this.toString=function(){return"[APF Validation Group]"};var errbox;this.getErrorBox=function(a,b){if(this.allowMultipleErrors||!errbox&&!b)errbox=new apf.errorbox,errbox.$pHtmlNode=a.$ext.parentNode,errbox.skinset=apf.getInheritedAttribute(a.parentNode,"skinset"),errbox.dispatchEvent("DOMNodeInsertedIntoDocument");return errbox},this.hideAllErrors=function(){errbox&&errbox.host&&errbox.host.clearError()},this.validate=this.isValid=function(ignoreReq,nosetError,page){var found=checkValidChildren.call(this,page||this,ignoreReq,nosetError);return page&&page.validation&&!eval(page.validation)&&(alert(page.invalidmsg),found=!0),!found}}.call(apf.ValidationGroup.prototype=new apf.Class),apf.config.$inheritProperties.validgroup=1,apf.__DATABINDING__=2,apf.DataBinding=function(){function c(){this.$initingModel=!0,this.$setInheritedAttribute("model")}this.$init(!0),this.$loadqueue=this.$dbTimer=null,this.$regbase=this.$regbase|apf.__DATABINDING__,this.$mainBind="value",this.$bindings=this.$cbindings=this.$attrBindings=!1,this.$attrExcludePropBind=apf.extend({model:1,each:1},this.$attrExcludePropBind),this.setQueryValue=function(a,b,c){var d=apf.createNodeFromXpath(this[c||"xmlRoot"],a);return d?(apf.setNodeValue(d,b,!0),d):null},this.queryValue=function(a,b){return apf.queryValue(this[b||"xmlRoot"],a)},this.queryValues=function(a,b){return apf.queryValues(this[b||"xmlRoot"],a)},this.queryNode=function(a,b){var c=this[b||"xmlRoot"];return c?c.selectSingleNode(a):null},this.queryNodes=function(a,b){var c=this[b||"xmlRoot"];return c?c.selectNodes(a):[]},this.$checkLoadQueue=function(){if(!this.$loadqueue)return!1;this.caching||(this.xmlRoot=null);var a=this.load(this.$loadqueue[0],{cacheId:this.$loadqueue[1]});if(!a||a.dataType!=apf.ARRAY||a!=this.$loadqueue)this.$loadqueue=null},this.$execProperty=function(a,b,c){var d=this.$attrBindings[a];this.nodeType==7&&b!=this.xmlRoot&&(this.xmlRoot=b);try{if(d.cvalue.asyncs){var e=this;return d.cvalue.call(this,b,function(b){e.setProperty(a,b,!0)})}var f=d.cvalue.call(this,b)}catch(g){apf.console.warn("[400] Could not execute binding for property "+a+"\n\n"+g.message);return}this.setProperty(a,c&&c.extra.range||f,!0)},this.$applyBindRule=function(a,b,c,d,e){var f=this.$attrBindings[a]&&this.$attrBindings[a].cvalue||this.$cbindings[a];return f?f.call(this,b,d):c||""},this.$hasBindRule=function(a){return this.$attrBindings[a]||this.$bindings&&this.$bindings[a]},this.$getBindRule=function(a,b){return this.$attrBindings[a]||this.$bindings&&this.$bindings.getRule(a,b)};var a={drag:1,drop:1,dragcopy:1};this.$getDataNode=function(b,c,d,e,f){var g,h=this.$attrBindings[b];if(h){if(h.cvalue.type!=3)return!1;var i=h.cvalue2||h.compile("value",{xpathmode:f?4:3,parsecode:1,injectself:a[b]});return i&&(g=i(c,d))?(e&&e.push(h),g):!1}return this.$bindings&&this.$bindings.getDataNode(b,c,d,e,f)},this.setModel=function(a){this.setAttribute("model",a,!1,!0)},this.getModel=function(a){return a&&!this.$model?this.dataParent?this.dataParent.parent.getModel(!0):null:this.$model},this.reload=this.reload||function(){this.load(this.xmlRoot,{cacheId:this.cacheId,force:!0})},this.load=function(a,b){if(b)var c=b.cacheId,d=b.force,e=b.noClearMsg;if(c&&c==this.cacheId&&!d)return;apf.popup.isShowing(this.$uniqueId)&&apf.popup.forceHide();if(a)if(typeof a=="string")if(a.charAt(0)=="<")a=apf.getXmlDom(a).documentElement;else return apf.model.prototype.$loadFrom.call(this,a,b);else a.nodeType==9?a=a.documentElement:a.nodeType==3||a.nodeType==4?a=a.parentNode:a.nodeType==2&&(a=a.ownerElement||a.parentNode||a.selectSingleNode(".."));if(this.$preventDataLoad||!this.$canLoadData&&(!this.$bindings&&(!this.$canLoadDataAttr||!this.each)||!this.$amlLoaded)&&(!this.hasFeature(apf.__MULTISELECT__)||!this.each)||this.$canLoadData&&!this.$canLoadData()){if(!this.caching||!this.hasFeature(apf.__CACHE__))this.xmlRoot=a,this.setProperty("root",this.xmlRoot);return this.$loadqueue=[a,c]}this.$loadqueue=null,this.dataParent&&this.dataParent.xpath&&(this.dataParent.parent.signalXmlUpdate[this.$uniqueId]=!a);if(!a&&(!c||!this.$isCached||!this.$isCached(c))){this.clear(e),apf.config.autoDisable&&this.$createModel===!1&&this.setProperty("disabled",!0);return}if(!this.caching&&!d&&a&&!this.$loadqueue&&a==this.xmlRoot)return;var f=this.disabled;this.disabled=!1;if(this.dispatchEvent("beforeload",{xmlNode:a})===!1)return!1;this.clear(!0,!0),this.cacheId=c;if(this.dispatchEvent("$load",{forceNoCache:d,xmlNode:a})===!1)return;this.documentId=apf.xmldb.getXmlDocId(a),this.xmlRoot=a,this.setProperty("root",this.xmlRoot),this.$load(a),this.$loadSubData(a),this.$createModel===!1?(this.disabled=!0,this.setProperty("disabled",!1)):this.disabled=f,this.dispatchEvent("afterload",{xmlNode:a})},this.$loadSubData=function(a){if(this.$hasLoadStatus(a)&&!this.$hasLoadStatus(a,"potential"))return;var b=this.$getBindRule("load",a);if(b&&(!b[1]||b[1](a))){this.$setLoadStatus(a,"loading"),this.$setClearMessage&&this.$setClearMessage(this["loading-message"],"loading");var c=this.getModel(!0),d=this;c.$insertFrom(b.getAttribute("get"),{xmlNode:a,insertPoint:a,amlNode:this,callback:function(){d.setProperty(d.hasFeature(apf.__MULTISELECT__)?"selected":"root",a)}})===!1&&(this.clear(!0),apf.config.autoDisable&&this.setProperty("disabled",!0))}},this.clear=function(a,b,c){if(!this.$container)return;this.clearSelection&&this.clearSelection(!0);var d=this.$container.offsetHeight;this.dispatchEvent("$clear")!==!1&&(this.$container.innerHTML="");if(typeof a=="string"){var e=a;a=!1,this[e+"-message"]||this.$setInheritedAttribute(e+"-message")}this.$lastClearType=e||null,!a&&this.$setClearMessage?this.$setClearMessage(e?this[e+"-message"]:this["empty-message"],e||"empty",d):this.$removeClearMessage&&this.$removeClearMessage(),c||(this.documentId=this.xmlRoot=this.cacheId=null),a||this.hasFeature(apf.__MULTISELECT__)&&this.setProperty("length",0)},this.clearMessage=function(a){this.customMsg=a,this.clear("custom")},this.$setLoadStatus=function(a,b,c){var d=this.loadgroup||"default",e=new RegExp("\\|(\\w+)\\:"+d+":(\\d+)\\|"),f=a.getAttribute("a_loaded")||"",g;if(!c&&(g=f.match(e))&&g[1]!="potential"&&g[2]!=this.$uniqueId)return;var h=f.replace(e,"");c||(h+="|"+b+":"+d+":"+this.$uniqueId+"|"),a.setAttribute("a_loaded",h)},this.$removeLoadStatus=function(a){this.$setLoadStatus(a,null,!0)},this.$hasLoadStatus=function(a,b,c){if(!a)return!1;var d=a.getAttribute("a_loaded");if(!d)return!1;var e=this.loadgroup||"default",f=new RegExp("\\|"+(b||"\\w+")+":"+e+":"+(c?this.$uniqueId:"\\d+")+"\\|");return d.match(f)?!0:!1},this.insert=function(a,b){if(typeof a=="string")if(a.charAt(0)=="<")b.whitespace===!1&&(a=a.replace(/>[\s\n\r]*</g,"><")),a=apf.getXmlDom(a).documentElement;else return b.insertPoint||(b.insertPoint=this.xmlRoot),apf.model.prototype.$insertFrom.call(this,a,b);var c=b.insertPoint||this.xmlRoot;if(this.dispatchEvent("beforeinsert",{xmlParentNode:c})===!1)return!1;typeof b.copyAttributes=="undefined"&&(b.copyAttributes=!0);var d=apf.mergeXml(a,c,b);this.$isLoading=!0,apf.xmldb.applyChanges("insert",c),this.$isLoading=!1,this.selectable&&this.autoselect?this.xmlNode==d&&this.$selectDefault(this.xmlNode):this.xmlNode==d&&this.setProperty("root",this.xmlNode),this.$hasLoadStatus(c,"loading")&&this.$setLoadStatus(c,"loaded"),this.dispatchEvent("afterinsert")},this.$booleanProperties["render-root"]=!0,this.$supportedProperties.push("empty-message","loading-message","offline-message","render-root","smartbinding","bindings","actions"),this.$propHandlers["render-root"]=function(a){this.renderRoot=a},this.$propHandlers["empty-message"]=function(a){this["empty-message"]=a,this.$updateClearMessage&&this.$updateClearMessage(this["empty-message"],"empty")},this.$propHandlers["loading-message"]=function(a){this["loading-message"]=a,this.$updateClearMessage&&this.$updateClearMessage(this["loading-message"],"loading")},this.$propHandlers["offline-message"]=function(a){this["offline-message"]=a,this.$updateClearMessage&&this.$updateClearMessage(this["offline-message"],"offline")},this.$propHandlers.smartbinding=this.$propHandlers.actions=this.$propHandlers.bindings=function(a,b){var c="$"+b+"Element";this[c]&&this[c].unregister(this);if(!a)return;apf.nameserver.get(b,a).register(this),b!="actions"&&this.$checkLoadQueue()===!1&&this.$amlLoaded&&2};var b={caption:1,icon:1,select:1,css:1,sort:1,drop:2,drag:2,dragcopy:2,eachvalue:1};this.$addAttrBind=function(a,d,e){d.models&&!this.hasFeature(apf.__MULTISELECT__);var f,g,h,i,j=d.xpaths,k={};for(f=0;f<j.length;f+=2)k[h=j[f]]?k[h]++:k[h]=1;this.$propsUsingMainModel||(this.$propsUsingMainModel={});var l=(this.$attrBindings||(this.$attrBindings={}))[a]={cvalue:d,value:e,compile:apf.BindingRule.prototype.$compile,models:[]};delete this.$propsUsingMainModel[a];for(g,f=0;f<j.length;f+=2){h=j[f];if(k[h]==-1)continue;g=j[f+1];if(h=="#"||g=="#"){var m=(l.cvalue3||(l.cvalue3=apf.lm.compile(l.value,{xpathmode:5}))).call(this,this.xmlRoot);if(typeof m!="string"){i=m.model&&m.model.$isModel&&m.model;if(i)g=m.xpath;else if(m.model)i=typeof m.model=="string"?apf.xmldb.findModel(m.model):m.model,g=apf.xmlToXpath(m.model,i.data)+(m.xpath?"/"+m.xpath:"");else{this.addEventListener("prop."+a,function(b){var c=(l.cvalue3||(l.cvalue3=apf.lm.compile(l.value,{xpathmode:5}))).call(this,this.xmlRoot);if(c.model){this.removeEventListener("prop."+a,arguments.callee);var d=this;$setTimeout(function(){d.$clearDynamicProperty(a),d.$setDynamicProperty(a,e)},10)}});continue}}else i=null}else i=null;if(!i)if(h)i=apf.nameserver.get("model",h)||apf.setReference(h,apf.nameserver.register("model",h,new apf.model));else{!this.$model&&!this.$initingModel&&c.call(this),i=this.$model;if(!this.hasFeature(apf.__MULTISELECT__)&&b[a]!=2||!b[a])this.$propsUsingMainModel[a]={xpath:g,optimize:k[h]==1}}i&&(!this.hasFeature(apf.__MULTISELECT__)&&b[a]!=2||!b[a])&&(i.$bindXmlProperty(this,a,g,k[h]==1),l.models.push(i)),k[h]=-1}l.xpath=g,this.$canLoadDataAttr=b[a]==1,this.$checkLoadQueue()},this.$removeAttrBind=function(a){var b=this.$attrBindings[a];if(!b)return;delete this.$attrBindings[a],delete this.$propsUsingMainModel[a];var c=b.models;if(c.length)for(var d=0;d<c.length;d++)c[d].$unbindXmlProperty(this,a);else this.$model&&this.$model.$unbindXmlProperty(this,a)},this.$initingModel,this.addEventListener("DOMNodeInsertedIntoDocument",function(a){!this.model&&this.$setClearMessage&&!this.value&&this.$setClearMessage(this["empty-message"],"empty"),this.$amlLoaded=!0,this.$checkLoadQueue()}),this.$propHandlers.model=function(a){if(!a&&!this.$modelParsed){this.$model?(this.clear(),this.$model.unregister(this),this.$model=null,this.lastModelId=""):this.dataParent&&(this.dataParent.parent=null);return}this.$initingModel=!0;var b;if((b=this.$modelParsed)&&b.type!=2){var c,d=b.props;this.dataParent&&(this.dataParent=null);for(var e in d){this.dataParent={parent:self[e.split(".")[0]],xpath:null,model:this.$modelParsed.instruction},c=!0;break}c&&this.dataParent&&!this.dataParent.signalXmlUpdate&&(this.dataParent.signalXmlUpdate={}),this.$modelParsed=null}var f;if(typeof a=="object"){if(a.dataType==apf.ARRAY){f=apf.nameserver.get("model",a[0]),f.register(this,a[1]);return}if(a.$isModel)f=a,a=this.model=f.name,a||f.setProperty("id",a=this.model="model"+f.$uniqueId);else{this.dataParent&&(this.model=this.dataParent.model),f=apf.xmldb.findModel(a);if(!f)return;var g=apf.xmlToXpath(a,null,!0)||".";f.register(this,g);return}}else if(a.indexOf("[::")>-1){var f,h=this;do h=h.parentNode,f=h.getAttribute("model");while(h.parentNode&&h.parentNode.nodeType==1&&(!f||f==a));f&&typeof f=="object"&&(f=f.id),this.$inheritProperties.model=3;if(f)a=a.replace(/\[\:\:/g,"["+f+"::");else{apf.console.warn("No found model on any of the parents for this element while trying to overload model: "+a);return}}clearTimeout(this.$dbTimer);if(!this.$amlLoaded&&this.nodeType==1){var i=this;this.$dbTimer=$setTimeout(function(){i.$amlDestroyed||apf.setModel(a,i)})}else apf.setModel(a,this)},this.$propHandlers.viewport=function(a){if(a!="virtual")return;this.implement(apf.VirtualViewport)}},apf.DataBinding.prototype=new apf[apf.Presentation?"Presentation":"AmlElement"],apf.config.$inheritProperties.model=1,apf.config.$inheritProperties["empty-message"]=1,apf.config.$inheritProperties["loading-message"]=1,apf.config.$inheritProperties["offline-message"]=1,apf.config.$inheritProperties.noloading=1,apf.Init.run("databinding"),apf.MultiselectBinding=function(){this.setQueryValue||this.implement(apf.DataBinding),this.$regbase=this.$regbase|apf.__MULTISELECT__,this.$init(function(){this.$selectTimer={}})},function(){this.length=0,this.$attrExcludePropBind=apf.extend({caption:2,icon:2,eachvalue:2,select:2,css:2,sort:2,drag:2,drop:2,dragcopy:2,selected:3,each:1,selection:3,"selection-unique":3,"selection-constructor":3},this.$attrExcludePropBind),this.resort=function(a,b,c){this.$sort||(this.$sort=new apf.Sort),this.$sort.set(a,b),this.clearAllCache&&this.clearAllCache();if(c)return;var d=this;return function e(a,b){if(!a)return;var c=d.$sort.apply(apf.getArrayFromNodelist(a.selectNodes(d.each)));for(var f=0;f<c.length;f++)if(d.$isTreeArch||d.$withContainer){var g=apf.xmldb.findHtmlNode(c[f],d),h=d.$findContainer(g);b.appendChild(g),apf.isChildOf(g,h,!0)||b.appendChild(h),e(c[f],h)}else b.appendChild(apf.xmldb.findHtmlNode(c[f],d))}(this.xmlRoot,this.$container),a},this.toggleSortOrder=function(){return this.resort({ascending:!this.$sort.get().ascending}).ascending},this.getSortSettings=function(){return this.$sort.get()},this.$propHandlers.simpledata=function(a){a?(this.getTraverseNodes=function(a){if(this.$sort&&!this.$isLoading){var b=apf.getArrayFromNodelist((a||this.xmlRoot).childNodes);return this.$sort.apply(b)}return(a||this.xmlRoot).childNodes},this.getFirstTraverseNode=function(a){return this.getTraverseNodes()[0]},this.getLastTraverseNode=function(a){var b=this.getTraverseNodes();return b[b.length-1]},this.getTraverseParent=function(a){return!a.parentNode||a==this.xmlRoot?!1:a.parentNode}):(delete this.getTraverseNodes,delete this.getFirstTraverseNode,delete this.getLastTraverseNode,delete this.getTraverseParent)},this.getTraverseNodes=function(a){if(this.$sort){var b=apf.getArrayFromNodelist((a||this.xmlRoot).selectNodes(this.each));return this.$sort.apply(b)}return(a||this.xmlRoot).selectNodes(this.each)},this.getFirstTraverseNode=function(a){if(this.$sort){var b=(a||this.xmlRoot).selectNodes(this.each);return this.$sort.apply(b)[0]}return(a||this.xmlRoot).selectSingleNode(this.each)},this.getLastTraverseNode=function(a){var b=this.getTraverseNodes(a||this.xmlRoot);return b[b.length-1]},this.isTraverseNode=function(a){var b=this.getTraverseNodes(this.getTraverseParent(a)||this.xmlRoot);for(var c=0;c<b.length;c++)if(b[c]==a)return!0;return!1},this.getNextTraverseSelected=function(a,b,c){a||(a=this.selected),c||(c=1);var d=0,e=this.getTraverseNodes(this.getTraverseParent(a)||this.xmlRoot);while(e[d]&&e[d]!=a)d++;var f=b==null?e[d+c]||e[d-c]:b?e[d+c]:e[d-c];return f||c&&(d<c||d+1>Math.floor(e.length/c)*c)?f:b?e[e.length-1]:e[0]},this.getNextTraverse=function(a,b,c){c||(c=1),a||(a=this.selected);var d=0,e=this.getTraverseNodes(this.getTraverseParent(a)||this.xmlRoot);while(e[d]&&e[d]!=a)d++;var f=d+(b?-1*c:c);return e[f<0?0:f]},this.getTraverseParent=function(a){if(!a.parentNode||a==this.xmlRoot)return!1;if(a.$regbase)return a.parentNode;var b,c=a.getAttribute(apf.xmldb.xmlIdTag);return c||(a.setAttribute(apf.xmldb.xmlIdTag,"temp"),c="temp"),b=a.selectSingleNode("ancestor::node()[(("+this.each+")/@"+apf.xmldb.xmlIdTag+")='"+c+"']"),c=="temp"&&a.removeAttribute(apf.xmldb.xmlIdTag),b},this.$findHtmlNode||(this.$findHtmlNode=function(a){return this.$pHtmlDoc.getElementById(a)}),this.$setClearMessage=function(a,b,c){this.more&&this.$addMoreItem&&this.$addMoreItem();if(!this.$empty){if(!this.$hasLayoutNode("empty"))return;this.$getNewContext("empty");var d=this.$getLayoutNode("empty");if(!d)return;this.$empty=apf.insertHtmlNode(d,this.$container)}else this.$container.appendChild(this.$empty);var e=this.$getLayoutNode("empty","caption",this.$empty);e&&apf.setNodeValue(e,a||""),this.$empty.setAttribute("id","empty"+this.$uniqueId),apf.setStyleClass(this.$empty,b,["loading","empty","offline"]);var f=apf.getStyle(this.$ext,"height");this.$empty.style.height=c&&(!f||f=="auto")&&b!="empty"?Math.max(10,c-apf.getHeightDiff(this.$empty)-apf.getHeightDiff(this.$ext))+"px":""},this.$updateClearMessage=function(a,b){if(!this.$empty||this.$empty.parentNode!=this.$container||this.$empty.className.indexOf(b)==-1)return;var c=this.$getLayoutNode("empty","caption",this.$empty);c&&apf.setNodeValue(c,a||"")},this.$removeClearMessage=function(){this.$empty||(this.$empty=document.getElementById("empty"+this.$uniqueId)),this.$empty&&this.$empty.parentNode&&this.$empty.parentNode.removeChild(this.$empty)},this.$load=function(a){apf.xmldb.addNodeListener(a,this),this.$isLoading=!0;var b=this.getTraverseNodes(a).length;if(!this.renderRoot&&!b)return this.clear(null,null,!0);var c=this.$addNodes(a,null,null,this.renderRoot,null,0,"load");this.$fill(c),this.$isLoading=!1;if(this.selectable)if(this["default"])this.select(this["default"]);else if(this.autoselect)this.selected||(this.renderRoot?this.select(a,null,null,null,!0):c.length&&this.$selectDefault(a));else{this.clearSelection(!0);var d=this.renderRoot?this.xmlRoot:this.getFirstTraverseNode();d&&this.setCaret(d),this.selected&&this.setProperty("selected",null),this.choosen&&this.setProperty("choosen",null)}this.focussable&&(apf.document.activeElement==this?this.$focus():this.$blur()),b!=this.length&&this.setProperty("length",b)};var a={insert:127,replacenode:127,attribute:255,add:251,remove:110,"redo-remove":79,synchronize:127,"move-away":297,move:141};this.$xmlUpdate=function(b,c,d,e,f){if(!this.xmlRoot)return;var g,h,i,j,k=c;d||(d=this.xmlRoot);if(b=="redo-remove"){var l=[c.parentNode,c.nextSibling];f.appendChild(c);var m=this.isTraverseNode(c);l[0]?l[0].insertBefore(c,l[1]):f.removeChild(c),m||(c=f)}do{if(b=="add"&&this.isTraverseNode(c)&&k==c)break;if(c.getAttribute(apf.xmldb.xmlIdTag)){j=this.$findHtmlNode(c.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);if(c==d&&!this.renderRoot){if(c==this.xmlRoot&&b!="insert"&&b!="replacenode"){this.dispatchEvent("xmlupdate",{action:b,xmlNode:c,UndoObj:e});return}break}if(j&&a[b]&2&&!this.isTraverseNode(c))b="remove";else{if(!j&&a[b]&4&&this.isTraverseNode(c)){b="add";break}if(j&&(k!=c||c==this.xmlRoot))if(a[b]&1)b="update";else if(b=="remove")return}if(j||b=="move")break}else if(a[b]&8&&this.isTraverseNode(c)){b="add";break}if(c==d){if(a[b]&128)return;break}c=c.parentNode}while(c&&c.nodeType!=9);if(this.hasFeature(apf.__VIRTUALVIEWPORT__)&&!this.$isInViewport(c))return;var n=c;c&&c.nodeType==9&&(c=k);if(b=="replacenode"){if(e?e.args[1]==this.xmlRoot:!this.xmlRoot.parentNode)return this.load(e?e.xmlNode:d,{force:!0});var o=this.getTraverseNodes();for(var p=0,q=o.length;p<q;p++)if(apf.isChildOf(k,o[p]))return this.load(this.xmlRoot,{force:!0})}e&&c&&!e.xmlNode&&(e.xmlNode=c);if(b=="move"&&n==k){var r=apf.isChildOf(this.xmlRoot,c.parentNode,!0),s=apf.isChildOf(this.xmlRoot,e.extra.parent,!0);r&&s?this.$moveNode(c,j,e.extra.oldParent):r?b="add":s&&(b="remove")}else if(b=="move-away"){var t=apf.isChildOf(this.xmlRoot,e.extra.parent,!0);t||(b="remove")}this.$removeClearMessage&&this.$setClearMessage&&(this.getFirstTraverseNode()?this.$removeClearMessage():this.$setClearMessage(this["empty-message"],"empty"));if(b!="insert"||!this.$isTreeArch&&c!=this.xmlRoot){if(b=="add"){var u;i=this.getTraverseParent(c),i==this.xmlRoot&&(u=this.$container),!u&&this.$isTreeArch&&(u=this.$findHtmlNode(i.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId)),!u&&this.getCacheItem&&(u=this.getCacheItem(i.getAttribute(apf.xmldb.xmlIdTag)||(i.getAttribute(apf.xmldb.xmlDocTag)?"doc"+i.getAttribute(apf.xmldb.xmlDocTag):!1)));if(u||this.$isTreeArch&&i==this.xmlRoot)u=(this.$findContainer&&u&&u.nodeType==1?this.$findContainer(u):u)||this.$container,g=this.$addNodes(c,u,!0,!0,apf.xmldb.getHtmlNode(this.getNextTraverse(c),this)),u&&this.$fill(g)}else if(b=="remove"){if(j)this.$deInitNode(c,j);else if(k==this.xmlRoot)return this.load(null,{noClearMsg:!this.dataParent||!this.dataParent.autoselect})}else if(j)this.$sort&&this.$moveNode(c,j),this.$updateNode(c,j),b=="replacenode"&&this.hasFeature(apf.__MULTISELECT__)&&this.selected&&c.getAttribute(apf.xmldb.xmlIdTag)==this.selected.getAttribute(apf.xmldb.xmlIdTag)&&(this.selected=c);else if(b=="redo-remove"){var v=this.xmlRoot;while(v&&v.nodeType!=9)v=v.parentNode;if(!v){var w=this.getModel(!0);return w.$waitForXml(this)}}}else{if(!c)return;this.$hasLoadStatus(c)&&this.$removeLoading&&this.$removeLoading(c),this.$container.firstChild&&!apf.xmldb.getNode(this.$container.firstChild)&&(this.$container.innerHTML="",this.renderRoot||(h=this.getTraverseNodes().length,h||this.clear())),g=this.$addNodes(c,null,!0,!1,null,null,"insert"),this.$fillParentHtml=this.$getParentNode?this.$getParentNode(j):j,this.$fillParent=c,this.$fill(g);if(this.selectable&&(h===0||!this.xmlRoot.selectSingleNode(this.each)))return}i=c?c.parentNode:f;if(this.$isTreeArch&&!this.$preventRecursiveUpdate&&i&&i.nodeType==1)do j=this.$findHtmlNode(i.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),j&&this.$updateNode(i,j);while((i=this.getTraverseParent(i))&&i.nodeType==1);if(a[b]&32&&this.selectable&&k==c&&(b!="insert"||c==this.xmlRoot)){clearTimeout(this.$selectTimer.timer);if(b=="remove"&&apf.isChildOf(c,this.selected,!0)||c==this.$selectTimer.nextNode)this.$selectTimer.nextNode=this.getDefaultNext(c,this.$isTreeArch),this.$selectTimer.nextNode==this.xmlRoot&&!this.renderRoot&&(this.$selectTimer.nextNode=null);var x=this;this.$selectTimer.timer=$setTimeout(function(){x.$checkSelection(x.$selectTimer.nextNode),x.$selectTimer.nextNode=null})}a[b]&64&&(h||(h=this.xmlRoot.selectNodes(this.each).length),b=="remove"&&h--,h!=this.length&&this.setProperty("length",h));if(this.signalXmlUpdate&&a[b]&16){var y;for(y in this.signalXmlUpdate){if(parseInt(y)!=y)continue;var z=apf.lookup(y);if(!this.selected)continue;c=this.selected.selectSingleNode(z.dataParent.xpath);if(!c)continue;z.load(c)}}this.dispatchEvent("xmlupdate",{action:b,xmlNode:k,traverseNode:c,result:g,UndoObj:e})},this.$addNodes=function(a,b,c,d,e,f,g){var h,i;d=d&&(this.renderRoot&&a==this.xmlRoot||this.isTraverseNode(a));var j=d?[a]:this.getTraverseNodes(a),k,l;if(this.$isTreeArch&&this.caching&&(!this.$bindings||!this.$bindings.each||!this.$bindings.each.filter)&&(l=this.cache[k=a.getAttribute(apf.xmldb.xmlIdTag)]))if(this.$subTreeCacheContext||this.$needsDepth)this.clearCacheItem(k);else{this.$subTreeCacheContext={oHtml:l,container:b,parentNode:null,beforeNode:null};var h;while(l.childNodes.length)(b||this.$container).appendChild(h=l.childNodes[0]);return j}if(this.$isTreeArch&&f===null&&g=="insert"){f=0,loopNode=a;while(loopNode&&loopNode!=this.xmlRoot)f++,loopNode=this.getTraverseParent(loopNode)}for(var m=0;m<j.length;m++){if(j[m].nodeType!=1)continue;c&&(h=this.$findHtmlNode(j[m].getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId));if(!h){var n=apf.xmldb.nodeConnect(this.documentId,j[m],null,this),o=d?e:i?i.nextSibling:null,p=this.$add(j[m],n,d?a.parentNode:a,o?b||this.$container:b,o,!o&&m==j.length-1,f,j[m+1],g);if(p===!1)break}c&&(i=h)}return j},this.$handleBindingRule=function(a,b){a||(this[b]=null);if(b=="each"){a=a.charAt(0)=="["&&a.charAt(a.length-1)=="]"?a.replace(/^\[|\]$/g,""):a;if(a.match(/^\w+::/)){var c=a.split("::");apf.xPathAxis[c[0]]?this.each=a:(this.setProperty("model",c[0]),this.each=c[1])}else this.each=a;if(this.each==this.$lastEach)return;this.$lastEach=a;if(!this.$model&&!this.$initingModel){this.$initingModel=!0,this.$setInheritedAttribute("model");return}if(this.$checkLoadQueue()!==!1)return}if(this.xmlRoot&&!this.$bindRuleTimer&&this.$amlLoaded){var d=this;apf.queue.add("reload"+this.$uniqueId,function(){d.reload()})}},this.$select=function(a){this.renaming&&this.stopRename(null,!0);if(!a||!a.style)return;return this.$setStyleClass(a,"selected")},this.$deselect=function(a){if(this.renaming){this.stopRename(null,!0);if(this.ctrlselect)return!1}if(!a)return;return this.$setStyleClass(a,"",["selected","indicate"])},this.$indicate=function(a){this.renaming&&this.stopRename(null,!0);if(!a)return;return this.$setStyleClass(a,"indicate")},this.$deindicate=function(a){this.renaming&&this.stopRename(null,!0);if(!a)return;return this.$setStyleClass(a,"",["indicate"])},this.$propHandlers.each=this.$propHandlers.caption=this.$propHandlers.eachvalue=this.$propHandlers.icon=this.$propHandlers.tooltip=this.$handleBindingRule,this.$propHandlers.sort=function(a){a?(this.$sort=new apf.Sort,this.$sort.set({getValue:apf.lm.compile(a)})):this.$sort=null}}.call(apf.MultiselectBinding.prototype=new apf.DataBinding),apf.StandardBinding=function(){this.$init(!0),apf.Validation&&this.implement(apf.Validation),this.setQueryValue||this.implement(apf.DataBinding),this.defaultValue||(this.defaultValue=""),this.$load=function(a){apf.xmldb.addNodeListener(a,this);var b,c,d,e,f,g;if(b=this.$bindings)for(d in b)c=d.toLowerCase(),this.$supportedProperties.indexOf(c)>-1&&(f=(e=b[c]).length==1?e[0]:this.$getBindRule(c,a),g=f.value||f.match,this.$clearDynamicProperty(c),g.indexOf("{")>-1||g.indexOf("[")>-1?this.$setDynamicProperty(c,g):this.setProperty&&this.setProperty(c,g,!0));this.errBox&&this.isValid&&this.isValid()&&this.clearError()},this.$xmlUpdate=function(a,b,c,d){if(a=="redo-remove"){var e=!1,f=this.getModel(!0);if(f){var g=f.getXpathByAmlNode(this);g&&(b=f.data.selectSingleNode(g),b!=this.xmlRoot&&(e=!0))}if(e||this.xmlRoot==b)return f.$waitForXml(this)}d&&!d.xmlNode&&(d.xmlNode=this.xmlRoot);var h,i,j,k,l,m;if(h=this.$bindings)for(j in h)i=j.toLowerCase(),this.$supportedProperties.indexOf(i)>-1&&(l=(k=h[i]).length==1?k[0]:this.$getBindRule(i,b),m=l.value||l.match,this.$clearDynamicProperty(i),m.indexOf("{")>-1||m.indexOf("[")>-1?this.$setDynamicProperty(i,m):this.setProperty&&this.setProperty(i,m));this.errBox&&this.isValid&&this.isValid()&&this.clearError(),this.dispatchEvent("xmlupdate",{action:a,xmlNode:b,UndoObj:d})},this.addEventListener("$clear",function(a,b){this.$propHandlers&&this.$propHandlers.value&&(this.value=-99999,this.$propHandlers.value.call(this,""))})},apf.StandardBinding.prototype=new apf.DataBinding,apf.Init.run("standardbinding"),apf.__MULTISELECT__=256,apf.MultiSelect=function(){this.$init(function(){this.$valueList=[],this.$selectedList=[]})},function(){function a(){this.selectAll()}this.$regbase=this.$regbase|apf.__MULTISELECT__,this.sellength=0,this.selected=null,this.$selected=null,this.caret=null,this.$caret=null,this.useindicator=!0,this.remove=function(a){a||(a=this.$valueList),a.nodeType&&(a=[a]);if(!a||!a.length)return;var b=[];for(var c=0;c<a.length;c++)b.push({action:"removeNode",args:[a[c]]});return this.$actions.removegroup?this.$executeAction("multicall",b,"removegroup",a[0]):this.$executeAction("multicall",b,"remove",a[0],null,null,a.length>1?a:null)},this.add=function(a,b,c,d){var e;if(this.$actions){if(a&&a.nodeType)e=this.$actions.getRule("add",a);else if(typeof a=="string")if(a.trim().charAt(0)=="<")a=apf.getXml(a),e=this.$actions.getRule("add",a);else{var f=this.$actions.add;for(var g=0,h=f.length;g<h;g++)if(f[g].getAttribute("type")==a){a=null,e=f[g];break}}e||(e=(this.$actions.add||{})[0])}else e=null;var i=this.$isTreeArch?this.selected||this.xmlRoot:this.xmlRoot,j=this,k=function(e,f,g){if(f!=apf.SUCCESS){var h;h=new Error(apf.formatErrorString(1032,j,"Loading xml data","Could not add data for control "+j.name+"["+j.tagName+"] \nUrl: "+g.url+"\nInfo: "+g.message+"\n\n"+a));if(g.tpModule.retryTimeout(g,f,j,h)===!0)return!0;throw h}typeof e!="object"&&(e=apf.getXmlDom(e).documentElement),e.getAttribute(apf.xmldb.xmlIdTag)&&e.setAttribute(apf.xmldb.xmlIdTag,"");var i=j.$actions&&j.$actions.getRule("add",j.$isTreeArch?j.selected:j.xmlRoot);return b||(i&&i.parent?b=(i.cparent||i.compile("parent",{xpathmode:2,injectself:!0}))(j.$isTreeArch?j.selected||j.xmlRoot:j.xmlRoot):b=j.$isTreeArch?j.selected||j.xmlRoot:j.xmlRoot),b||(b=j.xmlRoot),apf.isWebkit&&b.ownerDocument!=e.ownerDocument&&(e=b.ownerDocument.importNode(e,!0)),j.$executeAction("appendChild",[b,e,c],"add",e)!==!1&&j.autoselect&&j.select(e),d&&d.call(j,e),e};return a?k(a,apf.SUCCESS):e.get?apf.getData(e.get,{xmlNode:i,callback:k}):addXmlNode},this.setValue||(this.setValue=function(a,b){noEvent=b,this.setProperty("value",a,!1,!0),noEvent=!1}),this.findXmlNodeByValue=function(a){var b=this.getTraverseNodes(),c=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";if(!c)return!1;for(var d=0;d<b.length;d++)if(this.$applyBindRule(c,b[d])==a)return b[d]},this.getValue||(this.getValue=function(a,b){return this.value}),this.reselect=function(){this.selected&&this.select(this.selected,null,this.ctrlselect,null,!0)},this.select=function(a,b,c,d,e,f,g){if(!this.selectable||g&&this.disabled)return;parseInt(d)==d&&(d==2?(d=!0,g=!0):(d=!1,g=!0));if(this.$skipSelect){this.$skipSelect=!1;return}this.ctrlselect&&!c&&(b=!0),this.multiselect||(b=c=!1);if(!this.xmlRoot){if(!this.$buffered){var h;this.addEventListener("afterload",h=function(){this.select.apply(this,this.$buffered),this.removeEventListener("afterload",h),delete this.$buffered})}this.$buffered=Array.prototype.slice.call(arguments);return}var i;if(!a)return!1;if(typeof a!="object"){var j=a;a=null,typeof a=="string"&&(a=apf.xmldb.getNodeById(j));if(!a){a=this.findXmlNodeByValue(j);if(!a){this.clearSelection(f);return}}}if(typeof (a.style||"")!="object")i=this.$findHtmlNode(a.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);else{var k=(i=a).getAttribute(apf.xmldb.htmlIdTag);while(!k&&i.parentNode)k=(i=i.parentNode).getAttribute(apf.xmldb.htmlIdTag);a=apf.xmldb.getNodeById(k)}if(!c&&!b&&!e&&!this.reselectable&&this.$valueList.length<=1&&this.$valueList.indexOf(a)>-1)return;if(this.dispatchEvent("beforeselect",{selected:a,htmlNode:i,ctrlKey:b,shiftKey:c,force:e,captureOnly:f})===!1)return!1;var l=this.caret;this.caret=a;if(c){var m=this.$calcSelectRange(this.$valueList[0]||l,a);this.$caret&&this.$deindicate(this.$caret),this.selectList(m),this.$selected=this.$caret=this.$indicate(i)}else if(b)this.$valueList.contains(a)?(this.selected==a?(this.$deselect(this.$findHtmlNode(this.selected.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId)),this.$deindicate(this.$caret),this.$valueList.length&&!d&&(this.selected=this.$valueList[0])):this.$deselect(i,a),d||(this.$selectedList.remove(i),this.$valueList.remove(a)),i!=this.$caret&&this.$deindicate(this.$caret),this.$selected=this.$caret=this.$indicate(i)):(this.$caret&&this.$deindicate(this.$caret),this.$caret=this.$indicate(i,a),this.$selected=this.$select(i,a),this.selected=a,d||(this.$selectedList.push(i),this.$valueList.push(a)));else{if(d&&i&&this.$selectedList.contains(i))return;this.$selected&&this.$deselect(this.$selected),this.$caret&&this.$deindicate(this.$caret),this.selected&&this.clearSelection(!0),this.$caret=this.$indicate(i,a),this.$selected=this.$select(i,a),this.selected=a,this.$selectedList.push(i),this.$valueList.push(a)}if(this.delayedselect&&typeof b=="boolean"){var n=this;$setTimeout(function(){n.selected==a&&n.dispatchEvent("afterselect",{selection:n.$valueList,selected:a,caret:n.caret,captureOnly:f})},10)}else this.dispatchEvent("afterselect",{selection:this.$valueList,selected:a,caret:this.caret,captureOnly:f});return!0},this.choose=function(a,b){if(!this.selectable||b&&this.disabled)return;if(this.dispatchEvent("beforechoose",{xmlNode:a})===!1)return!1;a&&typeof (a.style||"")!="object"&&this.select(a),this.hasFeature(apf.__DATABINDING__)&&this.dispatchEvent("afterchoose",{xmlNode:this.selected})!==!1&&this.setProperty("chosen",this.selected)},this.clearSelection=function(a,b){if(!this.selectable||b&&this.disabled||!this.$valueList.length)return;if(!a&&this.dispatchEvent("beforeselect",{selection:[],selected:null,caret:this.caret})===!1)return!1;var c;for(var d=this.$valueList.length-1;d>=0;d--)c=this.$findHtmlNode(this.$valueList[d].getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),this.$deselect(c);this.$selectedList.length=0,this.$valueList.length=0,this.$selected=this.selected=null,this.caret&&(c=this.$findHtmlNode(this.caret.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),this.$caret=this.$indicate(c)),a||this.dispatchEvent("afterselect",{selection:this.$valueList,selected:null,caret:this.caret})},this.selectList=function(a,b,c,d){if(!this.selectable||d&&this.disabled)return;if(this.dispatchEvent("beforeselect",{selection:a,selected:c||a[0],caret:this.caret,captureOnly:b})===!1)return!1;this.clearSelection(!0);for(var e,f=0;f<a.length;f++){if(!a[f]||a[f].nodeType!=1)continue;var g,h=a[f];typeof h!="object"&&(h=apf.xmldb.getNodeById(h)),typeof (h.style||"")!="object"?g=this.$pHtmlDoc.getElementById(h.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId):(g=h,h=apf.xmldb.getNodeById(g.getAttribute(apf.xmldb.htmlIdTag)));if(!h)continue;g&&(!e&&c==g&&(e=g),this.$select(g,h),this.$selectedList.push(g)),this.$valueList.push(h)}this.$selected=e||this.$selectedList[0],this.selected=c||this.$valueList[0],this.dispatchEvent("afterselect",{selection:this.$valueList,selected:this.selected,caret:this.caret,captureOnly:b})},this.setCaret=function(a){if(!a){this.$caret&&this.$deindicate(this.$caret),this.caret=this.$caret=null;return}var b;typeof a!="object"&&(a=apf.xmldb.getNodeById(a));if(typeof (a.style||"")!="object")b=this.$findHtmlNode(a.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);else{var c=(b=a).getAttribute(apf.xmldb.htmlIdTag);while(!c&&b.parentNode&&b.parentNode.nodeType==1)c=(b=b.parentNode).getAttribute(apf.xmldb.htmlIdTag);c||alert(this.$int.outerHTML),a=apf.xmldb.getNodeById(c)}this.$caret&&this.$deindicate(this.$caret),this.$caret=this.$indicate(b),this.setProperty("caret",this.caret=a)},this.$setTempSelected=function(a,b,c,d){clearTimeout(this.timer);if(this.$bindings.selectable){while(a&&!this.$getDataNode("selectable",a))a=this.getNextTraverseSelected(a,!d);if(!a)return}this.multiselect||(b=c=!1);if(b||this.ctrlselect)this.$tempsel&&(this.select(this.$tempsel),this.$tempsel=null),this.setCaret(a);else if(c)this.$tempsel&&(this.$selectTemp(),this.$deselect(this.$tempsel),this.$tempsel=null),this.select(a,null,c);else if(!this.bufferselect||this.$valueList.length>1)this.select(a);else{var e=apf.xmldb.getID(a,this);this.$deselect(this.$tempsel||this.$selected),this.$deindicate(this.$tempsel||this.$caret),this.$tempsel=this.$indicate(document.getElementById(e)),this.$select(this.$tempsel);var f=this;this.timer=$setTimeout(function(){f.$selectTemp()},400)}},this.$selectTemp=function(){if(!this.$tempsel)return;clearTimeout(this.timer),this.select(this.$tempsel),this.$tempsel=null,this.timer=null},this.selectAll=function(a){if(!this.multiselect||!this.selectable||a&&this.disabled||!this.xmlRoot)return;var b=this.$isTreeArch?this.xmlRoot.selectNodes(".//"+this.each.split("|").join("|.//")):this.xmlRoot.selectNodes(this.each);this.selectList(b)},this.getSelection=function(a){var b,c;if(a){c=this.xmlRoot?this.xmlRoot.ownerDocument.createDocumentFragment():apf.getXmlDom().createDocumentFragment();for(b=0;b<this.$valueList.length;b++)apf.xmldb.cleanNode(c.appendChild(this.$valueList[b].cloneNode(!0)))}else for(c=[],b=0;b<this.$valueList.length;b++)c.push(this.$valueList[b]);return c},this.$getSelection=function(a){return a?this.$selectedList:this.$valueList},this.defaultSelectNext=function(a,b){var c=this.getNextTraverseSelected(a);c||!b?this.select(c?c:this.getTraverseParent(a)):this.clearSelection(!0)},this.selectNext=function(){var a=this.getNextTraverse();a&&this.select(a)},this.selectPrevious=function(){var a=this.getNextTraverse(null,-1);a&&this.select(a)},this.getDefaultNext=function(a,b){var c=this.getNextTraverseSelected(a);return c&&c!=a?c:b?this.getTraverseParent(a):null},this.isSelected=function(a){if(!a)return!1;for(var b=0;b<this.$valueList.length;b++)if(this.$valueList[b]==a)return this.$valueList.length;return!1},this.$checkSelection=function(a){if(this.$valueList.length>1){for(var b=[],c=0,d=this.$valueList.length;c<d;c++)apf.isChildOf(this.xmlRoot,this.$valueList[c])&&b.push(this.$valueList[c]);if(b.length>1){this.selectList(b),this.caret&&!apf.isChildOf(this.xmlRoot,this.caret)&&this.setCaret(a||this.selected);return}b.length&&(a=b[0])}if(!a)if(this.selected&&!apf.isChildOf(this.xmlRoot,this.selected))a=this.getFirstTraverseNode();else if(this.selected&&this.caret&&!apf.isChildOf(this.xmlRoot,this.caret))this.setCaret(this.selected);else if(!this.selected)a=this.xmlRoot?this.getFirstTraverseNode():null;else return;a?this.autoselect?this.select(a):(this.multiselect||this.clearSelection(),this.clearSelection(),this.setCaret(a)):this.clearSelection()},this.selectable=!0,typeof this.ctrlselect=="undefined"&&(this.ctrlselect=!1),typeof this.multiselect=="undefined"&&(this.multiselect=!0),typeof this.autoselect=="undefined"&&(this.autoselect=!0),typeof this.delayedselect=="undefined"&&(this.delayedselect=!0),typeof this.allowdeselect=="undefined"&&(this.allowdeselect=!0),this.reselectable=!1,this.$booleanProperties.selectable=!0,this.$booleanProperties.multiselect=!0,this.$booleanProperties.autoselect=!0,this.$booleanProperties.delayedselect=!0,this.$booleanProperties.allowdeselect=!0,this.$booleanProperties.reselectable=!0,this.$supportedProperties.push("selectable","ctrlselect","multiselect","autoselect","delayedselect","allowdeselect","reselectable","selection","selected","default","value","caret"),this.$propHandlers.value=function(a){if(this.$lastValue==a){delete this.$lastValue;return}if(!this.$attrBindings.eachvalue&&!this.$amlLoaded&&this.getAttribute("eachvalue")){var b=this;return apf.queue.add("value"+this.$uniqueId,function(){b.$propHandlers.value.call(b,a)})}a||a===0||this["default"]?this.select(String(a)||this["default"]):this.clearSelection()},this.$propHandlers["default"]=function(a,b){(!this.value||!this.$amlLoaded&&!(this.getAttribute("value")||this.getAttribute("selected")||this.getAttribute("selection")))&&this.$propHandlers.value.call(this,"")},this.$propHandlers.caret=function(a,b){a&&this.setCaret(a)},this.$propHandlers.selection=this.$propHandlers.selected=function(a,b){a||(a=this[b]=null);if(b=="selected"&&typeof a!="string")if(a&&a.nodeType!=1)a=a.nodeValue;else return;if(this.$isSelecting)return this.selection=this.$valueList,!1;var c,d,e,f,g,h,i;if(b=="selection"){if(typeof a=="object"&&a==this.$valueList){var j;if((h=this.$attrBindings[b])&&h.cvalue.models){this.$isSelecting=!0,d=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";if(!d)throw new Error("Missing bind rule set: eachvalue, value or caption");var k=this.$getDataNode(b,this.xmlRoot);c=a,e=(i=this.$attrBindings["selection-unique"])&&i.cvalue;if(k.length)j=k[0].parentNode;else{var l,m;if(h.cvalue.xpaths[0]=="#"||h.cvalue.xpaths[1]=="#"){var n=(h.cvalue3||(h.cvalue3=apf.lm.compile(h.value,{xpathmode:5})))(this.xmlRoot);l=n.model&&n.model.$isModel&&n.model,l?m=n.xpath:n.model&&(l=apf.xmldb.findModel(n.model),m=apf.xmlToXpath(n.model,l.data)+(n.xpath?"/"+n.xpath:""))}else l=apf.nameserver.get("model",h.cvalue.xpaths[0]),m=h.cvalue.xpaths[1];if(!l||!l.data)return this.$isSelecting=!1,!1;j=l.queryNode(m.replace(/\/[^\/]+$|^[^\/]*$/,"")||".");if(!j)throw new Error("Missing parent node")}a:for(f=0;f<k.length;f++){a=e?e(k[f]):this.$applyBindRule(d,k[f]);for(g=0;g<c.length;g++)if(this.$applyBindRule(d,c[g])==a)continue a;apf.xmldb.removeNode(k[f])}b:for(f=0;f<c.length;f++){a=this.$applyBindRule(d,c[f]);for(g=0;g<k.length;g++)if(e?e(k[g]):this.$applyBindRule(d,k[g])==a)continue b;var o=this.$attrBindings["selection-constructor"]&&this.$getDataNode("selection-constructor",c[f])||apf.getCleanCopy(c[f]);apf.xmldb.appendChild(j,o)}this.$isSelecting=!1}return}this.selection=this.$valueList}else this.selected=null;if(!this.xmlRoot){if(!this.$buffered){var p;this.addEventListener("afterload",p=function(){this.removeEventListener("afterload",p),this.$propHandlers.selected.call(this,a,b),delete this.$buffered}),this.$buffered=!0}return this[b]=null,!1}if(!a||typeof a!="object"){if(this.$attrBindings[b]){c=this.$getDataNode(b,this.xmlRoot);if(c&&(c.length||c.nodeType==1)){this.setProperty("selection",c);return}if(!c||c.length===0)return}return a?this.select(a):this.clearSelection(),!1}if(typeof a.length=="number"){c=a;if(!c.length){this.selected=null;if(this.$valueList.length)return this.clearSelection(),!1;return}if(this.isTraverseNode(c[0])&&apf.isChildOf(this.xmlRoot,c[0]))return this.multiselect?this.selectList(c):this.select(c[0]),!1;if(this.$attrBindings[b]){d=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";if(!d)throw new Error("Missing bind rule set: eachvalue, value or caption");var q=this.each?this.xmlRoot.selectNodes("//"+this.each.split("|").join("|//")):this.getTraverseNodes();e=(h=this.$attrBindings["selection-unique"])&&h.cvalue;var r=[];for(f=0;f<c.length;f++){a=e?e(c[f]):this.$applyBindRule(d,c[f]);for(g=0;g<q.length;g++)this.$applyBindRule(d,q[g])==a&&r.push(q[g])}return this.selectList(r,!0),!1}throw new Error("Show me which case this is")}this.$valueList.indexOf(a)==-1&&this.select(a)},this.$propHandlers.allowdeselect=function(a){if(a){var b=this;this.$container.onmousedown=function(a){a||(a=event);if(a.ctrlKey||a.shiftKey)return;var c=a.srcElement||a.target;b.allowdeselect&&(c==this||c.getAttribute(apf.xmldb.htmlIdTag))&&b.clearSelection()}}else this.$container.onmousedown=null},this.$propHandlers.ctrlselect=function(a){a!="enter"&&(this.ctrlselect=apf.isTrue(a))},this.$propHandlers.autoselect=function(b){b=="all"&&this.multiselect?this.addEventListener("afterload",a):this.removeEventListener("afterload",a)},this.$propHandlers.multiselect=function(a){!a&&this.$valueList.length>1&&this.select(this.selected)},this.addEventListener("beforeselect",function(a){if(this.$bindings.selectable&&!this.$getDataNode("selectable",a.selected))return!1},!0),this.addEventListener("afterselect",function(a){var b=null;this.setProperty("caret",a.caret),this.sellength!=a.selection.length&&this.setProperty("sellength",a.selection.length),delete this.selection,this.setProperty("selection",a.selection);if(!a.selection.length)this.setProperty("selected",a.selected),this.value&&this.setProperty("value","");else{this.$chained=!0;if(!a.force&&(!this.dataParent||!this.dataParent.parent.$chained)){var c=this;$setTimeout(function(){c.selected==a.selected&&c.setProperty("selected",b||a.selected),delete c.$chained},10)}else this.setProperty("selected",b||a.selected),delete this.$chained;var d=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";d&&(this.$lastValue=this.$applyBindRule(d,a.selected),this.$lastValue!=(d!="value"&&this.xmlRoot&&this.$applyBindRule("value",this.xmlRoot,null,true)||this.value)&&(d=="eachvalue"||this.xmlRoot!=this?this.change(this.$lastValue):this.setProperty("value",this.$lastValue)),delete this.$lastValue)}},!0)}.call(apf.MultiSelect.prototype=new apf.MultiselectBinding),apf.__CHILDVALUE__=1<<27,apf.ChildValue=function(){this.$childProperty||(this.$childProperty="value"),this.$regbase=this.$regbase|apf.__CHILDVALUE__;var a,b=/^[\s\S]*?>(<\?lm)?([\s\S]*?)(?:\?>)?<[^>]*?>$/;this.addEventListener("DOMCharacterDataModified",a=function(a){if(a&&(a.currentTarget==this||a.currentTarget.nodeType==2&&a.relatedNode==this)||this.$amlDestroyed)return;if(this.getAttribute(this.$childProperty))return;var c=this.serialize().match(b),d=c&&c[2]||"";c&&c[1]&&(d="{"+d+"}"),this.$norecur=!0,d.indexOf("{")>-1||d.indexOf("[")>-1?this.$setDynamicProperty(this.$childProperty,d):this[this.$childProperty]!=d&&this.setProperty(this.$childProperty,d),this.$norecur=!1}),this.addEventListener("DOMAttrModified",a),this.addEventListener("DOMNodeInserted",a),this.addEventListener("DOMNodeRemoved",a),this.addEventListener("$skinchange",function(a){this.$propHandlers[this.$childProperty].call(this,this.caption||"")}),this.$init(function(){this.addEventListener("prop."+this.$childProperty,function(b){!this.$norecur&&!b.value&&!this.getAttributeNode(this.$childProperty)&&a.call(this)})}),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var c=typeof this[this.$childProperty]=="undefined";if(c&&!this.getElementsByTagNameNS(this.namespaceURI,"*",!0).length&&(this.childNodes.length>1||this.firstChild&&(this.firstChild.nodeType==1||this.firstChild.nodeValue.trim().length))){var d=(this.$aml&&this.$aml.xml||this.serialize()).match(b),e=d&&d[2]||"";d&&d[1]&&(e="{"+e+"}"),e.indexOf("{")>-1||e.indexOf("[")>-1?this.$setDynamicProperty(this.$childProperty,e):this.setProperty(this.$childProperty,apf.html_entity_decode(e))}else c&&this.$propHandlers[this.$childProperty].call(this,"")})},apf.__DATAACTION__=1<<25,apf.DataAction=function(){this.$regbase=this.$regbase|apf.__DATAACTION__,this.getActionTracker=function(a){if(!apf.AmlNode)return apf.window.$at;var b=this,c=a?null:this.$at;!c&&this.dataParent&&(c=this.dataParent.parent.$at);while(!c){if(!b.parentNode&&!b.$parentNode){var d;return(d=this.getModel&&this.getModel(!0))&&d.$at||apf.window.$at}c=(b=b.parentNode||b.$parentNode).$at}return c},this.$actionsLog={},this.$actions=!1,this.$startAction=function(a,b,c){if(this.disabled||this.liveedit&&a!="edit")return!1;var d=this.$actions&&this.$actions.getRule(a,b);if(!d&&apf.config.autoDisableActions&&this.$actions)return!1;var e=typeof apf.offline!="undefined";return this.dispatchEvent(a+"start",{xmlContext:b})===!1?!1:(this.$actionsLog[a]=b,!0)},this.$stopAction=function(a,b,c){delete this.$actionsLog[a]},this.$executeAction=function(a,b,c,d,e,f,g){var h=this.$actions&&this.$actions.getRule(c,d);if(!h&&this.$actions&&apf.config.autoDisableActions&&"action|change".indexOf(c)==-1)return apf.console.warn("Could not execute action '"+c+"'.               No valid action rule was found and auto-disable-actions is enabled"),!1;var i;if(g){i=[];for(var j=g.length-1;j>=0;j--)i.unshift({xmlActionNode:h,amlNode:this,selNode:g[j],xmlNode:g[j]})}var k=new apf.AmlEvent("before"+c.toLowerCase(),{action:a,args:b,xmlActionNode:h,amlNode:this,selNode:f,multiple:i||!1});if(!e){if(this.dispatchEvent(k.name,null,k)===!1)return!1;delete k.currentTarget}var l=this.getActionTracker();if(!l)return m;var m=l.execute(k);return k.xmlNode=m.xmlNode,k.undoObj=m,e||(k.name="after"+c.toLowerCase(),k.cancelBubble=!1,delete k.returnValue,delete k.currentTarget,this.dispatchEvent(k.name,null,k)),m},this.$executeSingleValue=function(a,b,c,d,e){var f,g,h=this.$getBindRule(b,c);if(!h)return!1;var i;["valuematch","match","value"].each(function(a){if(!h[a]||i)return;i=h["c"+a],i||(i=h.compile(a)),i.type!=3&&(i=null)});var j,k,l,m=i.xpaths,n=!1;if(m[0]=="#"||m[1]=="#"){var o=(h.cvalue3||(h.cvalue3=apf.lm.compile(h.value,{xpathmode:5})))(c);k=o.model&&o.model.$isModel&&o.model,k?(l=k.queryNode(o.xpath),c=k.data):o.model&&(k=apf.xmldb.findModel(o.model),l=o.model.selectSingleNode(o.xpath),c=o.model),m[1]=o.xpath}else k=m[0]&&apf.nameserver.get("model",m[0])||this.$model,l=k?k.queryNode(m[1]):(c||this.xmlRoot).selectSingleNode(m[1]),k&&!c&&(c=k.data);if(l){if(apf.queryValue(l)==d)return;j=l.nodeType==1||l.nodeType==3||l.nodeType==4?"setTextNode":"setAttribute",g=l.nodeType==1?[l,d]:l.nodeType==3||l.nodeType==4?[l.parentNode,d]:[l.ownerElement||l.selectSingleNode(".."),l.nodeName,d]}else{if(!this.$createModel)return!1;j="setValueByXpath",f=m[1];if(!c){k||(k=this.getModel());if(k)k.data||k.load("<data />"),f=(k.getXpathByAmlNode(this)||".")+(f&&f!="."?"/"+f:""),c=k.data;else{if(!this.dataParent)return!1;c=this.dataParent.parent.selected||this.dataParent.parent.xmlRoot;if(!c)return!1;f=(this.dataParent.xpath||".")+(f&&f!="."?"/"+f:""),n=!0}}g=[c,d,f]}if(e)return{action:j,args:g};var p=this.$executeAction(j,g,a,c);return n&&this.load(c.selectSingleNode(f)),p},this.change=function(a,b){this.errBox&&this.errBox.visible&&this.isValid&&this.isValid()&&this.clearError();if(!this.xmlRoot&&!this.$createModel||(this.$mainBind=="value"&&this.hasFeature(apf.__MULTISELECT__)?!this.$attrBindings.value:!this.$hasBindRule(this.$mainBind)))return!b&&a===this.value||this.dispatchEvent("beforechange",{value:a})===!1?!1:(this.setProperty("value",a),this.dispatchEvent("afterchange",{value:a}));var c=this.$attrBindings.eachvalue&&"eachvalue"||this.$bindings.value&&"value"||this.$hasBindRule("caption")&&"caption";if(a===(c!="value"&&this.xmlRoot&&this.$applyBindRule("value",this.xmlRoot,null,!0)||this.value))return!1;this.$executeSingleValue("change",this.$mainBind,this.xmlRoot,a)},this.$booleanProperties["render-root"]=!0,this.$supportedProperties.push("create-model","actions"),this.$propHandlers["create-model"]=function(a){this.$createModel=a},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){typeof this["create-model"]=="undefined"&&!this.$setInheritedAttribute("create-model")&&(this.$createModel=!0)})},apf.config.$inheritProperties["create-model"]=1,apf.__CACHE__=4,apf.Cache=function(){function a(a,b){if(b&&this.hasFeature(apf.__MULTISELECT__)&&this.$isTreeArch){var c,d=b.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId,e=this.$pHtmlDoc.getElementById(d);if(e)c=a?!1:this.$container;else for(var f in this.cache)if(this.cache[f]&&this.cache[f].nodeType){e=this.cache[f].getElementById(d);if(e){c=a?f:this.cache[f];break}}if(c&&!this.cache[a]){var g=this.$findHtmlNode(b.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);this.$subTreeCacheContext={oHtml:g,parentNode:g.parentNode,beforeNode:g.nextSibling,cacheItem:c},this.documentId=apf.xmldb.getXmlDocId(b),this.cacheId=a,this.xmlRoot=b;if(this.renderRoot)this.$container.appendChild(g);else while(g.childNodes.length)this.$container.appendChild(g.childNodes[0]);return!0}}if(!this.cache[a])return!1;var h=this.cache[a];return this.documentId=h.documentId,this.cacheId=a,this.xmlRoot=b,this.setProperty("root",this.xmlRoot),this.clearCacheItem(a),this.$setCurrentFragment(h),!0}function b(a,b){if(!this.caching)return;this.cache[a]=b}this.cache={},this.$subTreeCacheContext=null,this.caching=!0,this.$regbase=this.$regbase|apf.__CACHE__,this.addEventListener("$load",function(b){if(!this.caching||b.forceNoCache)return;this.cacheId||(this.cacheId=this.$generateCacheId&&this.$generateCacheId(b.xmlNode)||b.xmlNode.getAttribute(apf.xmldb.xmlIdTag)||apf.xmldb.nodeConnect(apf.xmldb.getXmlDocId(b.xmlNode),b.xmlNode));var c=a.call(this,this.cacheId,b.xmlNode);if(c){if(c==-1||!this.getTraverseNodes)return b.returnValue=!1;var d=this.getTraverseNodes();return d.length?this["default"]?this.select(this["default"]):this.autoselect&&this.select(d[0],null,null,null,!0):this.clearSelection&&this.clearSelection(),d.length||(this.$removeClearMessage(),this.$setClearMessage(this["empty-message"],"empty")),d.length!=this.length&&this.setProperty("length",d.length),!1}}),this.addEventListener("$clear",function(){if(!this.caching)return;if(this.hasFeature(apf.__MULTISELECT__)&&this.$subTreeCacheContext&&this.$subTreeCacheContext.oHtml){if(this.renderRoot)this.$subTreeCacheContext.parentNode.insertBefore(this.$subTreeCacheContext.oHtml,this.$subTreeCacheContext.beforeNode);else{var a=this.$subTreeCacheContext.container||this.$container;while(a.childNodes.length)this.$subTreeCacheContext.oHtml.appendChild(a.childNodes[0])}this.documentId=this.xmlRoot=this.cacheId=this.$subTreeCacheContext=null}else if(this.$loadedWhenOffline)this.$loadedWhenOffline=!1;else{var c=this.$getCurrentFragment();if(!c)return;c.documentId=this.documentId,c.xmlRoot=this.xmlRoot,(this.cacheId||this.xmlRoot)&&b.call(this,this.cacheId||this.xmlRoot.getAttribute(apf.xmldb.xmlIdTag)||"doc"+this.xmlRoot.getAttribute(apf.xmldb.xmlDocTag),c)}}),this.$findHtmlNode=function(a){var b=this.$pHtmlDoc.getElementById(a);if(b)return b;for(var c in this.cache)if(this.cache[c]&&this.cache[c].nodeType){b=this.cache[c].getElementById(a);if(b)return b}return null},this.clearCacheItem=function(a,b){this.cache[a].documentId=this.cache[a].cacheId=this.cache[a].xmlRoot=null,b&&apf.destroyHtmlNode(this.cache[a]),this.cache[a]=null},this.clearAllCache=function(){for(var a in this.cache)this.cache[a]&&this.clearCacheItem(a,!0)},this.getCacheItem=function(a){return this.cache[a]},this.$isCached=function(a){return this.cache[a]||this.cacheId==a?!0:!1},this.$getCurrentFragment||(this.$getCurrentFragment=function(){var a=this.$container.ownerDocument.createDocumentFragment();while(this.$container.childNodes.length)a.appendChild(this.$container.childNodes[0]);return a},this.$setCurrentFragment=function(a){this.$container.appendChild(a),!apf.window.hasFocus(this)&&this.blur&&this.blur()}),this.$booleanProperties.caching=!0,this.$supportedProperties.push("caching"),this.addEventListener("DOMNodeRemovedFromDocument",function(a){this.clearAllCache()})},apf.GuiElement.propHandlers.caching=function(a){if(!apf.isTrue(a))return;this.hasFeature(apf.__CACHE__)||this.implement(apf.Cache)},apf.__RENAME__=1024,apf.Rename=function(){this.$regbase=this.$regbase|apf.__RENAME__,this.canrename=!1,this.$renameSubject=this.renameTimer=this.lastCursor=null,this.$booleanProperties.canrename=!0,this.$booleanProperties.autorename=!0,this.$supportedProperties.push("canrename","autorename"),this.rename=function(a,b){a||(a=this.caret||this.selected);if(!a)return;return this.$executeSingleValue("rename","caption",a,b)},this.startDelayedRename=function(a,b,c){clearTimeout(this.renameTimer);if(a&&(a.button==2||a.ctrlKey||a.shiftKey)||c&&this.disabled)return;this.renameTimer=$setTimeout("apf.lookup("+this.$uniqueId+").startRename()",b||400)},this.startRename=function(a,b,c){if(!a&&(this.renaming||!this.canrename||!this.$startAction("rename",this.caret||this.selected,this.stopRename))||c&&this.disabled)return!1;this.hasFocus()||this.focus(null,null,!0),clearTimeout(this.renameTimer);var d=this.$getCaptionElement?this.$getCaptionElement():this.$caret||this.$selected;if(!d)return this.stopRename();this.renaming=!0,this.$renameSubject=this.caret||this.selected;var e=d.offsetWidth;this.lastCursor=d.style.cursor,d.style.cursor="text",d.parentNode.replaceChild(this.$txt,d),d.host=this;if(apf.isTrue(this.$getOption("main","scalerename"))){var f=apf.getWidthDiff(this.$txt);this.$txt.style.width=e-f-3+"px"}this.$replacedNode=d;var g=this.$getCaptionXml?this.$getCaptionXml(this.$renameSubject):this.$getDataNode("caption",this.$renameSubject),h=b||!g?"":(g.nodeType!=1?unescape(g.nodeValue):apf.isOnlyChild(g.firstChild,[3,4])?apf.queryValue(g):this.$applyBindRule("caption",this.$renameSubject))||"";apf.hasContentEditable?this.$multiLineRename?this.$txt.innerHTML=apf.htmlCleaner.prepare(h.trim().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")):this.$txt.innerHTML=h.replace(/</g,"&lt;")||apf.hasContentEditableContainerBug&&"<br>"||"":this.$txt.value=h,this.$txt.unselectable="Off",this.$txt.host=this;var i=this.$txt,j=function(){try{i.focus(),i.select()}catch(a){}};apf.isIE?j():$setTimeout(j)},this.stopRename=function(a,b){clearTimeout(this.renameTimer);if(!this.renaming||a&&a!=this.$renameSubject||!this.$replacedNode)return!1;this.renaming=!1,this.$txt.parentNode&&this.$txt.parentNode.nodeType==1&&((apf.isIE8||apf.isIE7Emulate)&&this.$txt.blur(),this.$txt.parentNode.replaceChild(this.$replacedNode,this.$txt)),this.$replacedNode&&(this.$replacedNode.style.cursor=this.lastCursor||"",this.$replacedNode.host=null);if(this.$multiLineRename)var c=apf.html_entity_decode(apf.htmlCleaner.parse(this.$txt.innerHTML,!0).replace(/<br \/>/g,"").replace(/<\/?p>/g,""));else var c=this.$txt[apf.hasContentEditable?"innerText":"value"].replace(/<.*?nobr>/gi,"").replace(/\n$/,"");return!b||this.$validateRename&&!this.$validateRename(c)?(this.dispatchEvent("stoprename"),this.$stopAction("rename")):this.rename(this.$renameSubject,c)!==!1&&this.$replacedNode&&(this.$replacedNode.innerHTML=c.replace(/</g,"&lt;").replace(/\r?\n/g,"<br />")),this.renaming||(this.$renameSubject=null,this.$replacedNode=null,this.$txt.style.width=""),!0},this.addEventListener("keydown",function(a){var b=a.keyCode;if(this.renaming){if(b==27||this.$multiLineRename&&a.ctrlKey&&b==13||!this.$multiLineRename&&b==13)return this.stopRename(null,b==13&&!this.$autocomplete),a.cancelBubble=!0,!1;apf.hasContentEditableContainerBug&&b==8&&this.$txt.innerHTML=="<br>"&&a.preventDefault();return}if(b==113)return this.$tempsel&&this.$selectTemp(),this.caret!=this.selected&&(this.multiselect||this.isSelected(this.caret)?(this.selected=this.caret,this.$selected=this.$caret):this.select(this.caret,!0)),this.startRename(),!1},!0),this.addEventListener("DOMNodeRemovedFromDocument",function(a){this.$txt.refCount--,this.$txt.refCount||(this.$txt.host=this.$txt.onmouseover=this.$txt.onmousedown=this.$txt.select=this.$txt.onfocus=this.$txt.onblur=null),this.$txt=null}),this.$init(apf.Rename.initEditableArea)},apf.Rename.initEditableArea=function(){if(!(this.$txt=document.getElementById("txt_rename"))){apf.hasContentEditable?(this.$txt=document.createElement("DIV"),this.$txt.contentEditable=!0,apf.isIE6&&(this.$txt.style.width="1px")):(this.$txt=document.createElement("input"),this.$txt.id="txt_rename",this.$txt.autocomplete=!1),this.$txt.refCount=0,this.$txt.id="txt_rename",apf.importCssString("#txt_rename{white-space:nowrap}"),this.$txt.onselectstart=function(a){(a||event).cancelBubble=!0},this.$txt.onmouseover=this.$txt.onmouseout=this.$txt.oncontextmenu=this.$txt.onmouseup=this.$txt.ondblclick=this.$txt.onmousedown=function(a){apf.stopPropagation(a||event)},this.$txt.onkeyup=function(a){if(!this.host.$autocomplete)return;this.host.$lookup(this[apf.hasContentEditable?"innerHTML":"value"])};var a;this.$txt.select=function(){if(!apf.hasMsRangeObject){if(window.getSelection&&document.createRange){var a=window.getSelection();a.removeAllRanges();var b=document.createRange();b.setStart(this.firstChild,0);var c=this.firstChild.nodeValue.lastIndexOf(".");b.setEnd(this.firstChild,c>-1?c:this.firstChild.nodeValue.length),a.addRange(b)}else(a||(a=new apf.selection)).selectNode(this);return}var b=document.selection.createRange();try{b.moveToElementText(this),(apf.isFalse(this.host.$getOption("main","selectrename"))||typeof this.host.$renameStartCollapse!="undefined")&&b.collapse(this.host.$renameStartCollapse)}catch(d){}b.select()},this.$txt.onblur=function(){if(this.host.$autocomplete)return;this.host.stopRename(null,!0)}}this.$txt.refCount++},apf.__ALIGNMENT__=1<<29,apf.BaseButton=function(){this.$init(!0)},function(){this.implement(apf.ChildValue),this.$refKeyDown=this.$refMouseDown=0,this.$mouseOver=this.$mouseLeft=!1,this.$propHandlers.background=function(a){var b=this.$getLayoutNode("main","background",this.$ext);if(!b)return;if(a){var c=a.split("|");this.$background=c.concat(["vertical",2,16].slice(c.length-1)),b.style.backgroundImage="url("+this.mediaPath+c[0]+")",b.style.backgroundRepeat="no-repeat"}else b.style.backgroundImage="",b.style.backgroundRepeat="",this.$background=null},this.addEventListener("keydown",function(a){var b=a.keyCode;switch(b){case 13:this.localName!="checkbox"&&this.$ext.onmouseup(a.htmlEvent,!0);break;case 32:return a.htmlEvent.repeat||(this.$refKeyDown++,this.$updateState(a.htmlEvent)),!1}},!0),this.addEventListener("keyup",function(a){var b=a.keyCode;switch(b){case 32:this.$refKeyDown--;if(this.$refKeyDown<0)return this.$refKeyDown=0,!1;return this.$refKeyDown+this.$refMouseDown==0&&!this.disabled&&this.$ext.onmouseup(a,!0),this.$updateState(a),!1}},!0),this.states={Out:1,Over:2,Down:3},this.$updateState=function(a,b){if(a.reset)return this.$refKeyDown=0,this.$refMouseDown=0,this.$mouseOver=!1,!1;this.$refKeyDown>0||this.$refMouseDown>0&&(this.$mouseOver||!apf.isIE&&this.$ext===a.currentTarget)||this.isBoolean&&this.value?this.$setState("Down",a,b):this.$mouseOver?this.$setState("Over",a,b):this.$setState("Out",a,b)},this.$setupEvents=function(){if(this.editable)return;var a=this;this.$ext.onmousedown=function(b){b=b||window.event;if(a.$notfromext&&(b.srcElement||b.target)==this)return;a.$refMouseDown=1,a.$mouseLeft=!1;if(a.disabled)return;apf.isIE||(a.value?apf.stopEvent(b):apf.cancelBubble(b)),a.$updateState(b,"mousedown")},this.$ext.onmouseup=function(b,c){b=b||window.event;if(a.disabled||!c&&(!a.$mouseOver&&!apf.isIE&&this!==b.currentTarget||!a.$refMouseDown))return;return a.$refMouseDown=0,a.$updateState(b,"mouseup"),a.disabled||b&&b.type=="click"&&a.$mouseLeft==1?!1:a.$refMouseDown+a.$refKeyDown?!1:(a.$clickHandler&&a.$clickHandler()?a.$updateState(b||event,"click"):a.dispatchEvent("click",{htmlEvent:b}),!1)},this.$ext.onmousemove=function(b){if(!a.$mouseOver||a.$mouseOver==2){b=b||window.event;if(a.$notfromext&&(b.srcElement||b.target)==this)return;a.$mouseOver=!0,a.disabled||a.$updateState(b,"mouseover")}},this.$ext.onmouseout=function(b){b=b||window.event;var c=b.explicitOriginalTarget||b.toElement;if(apf.isChildOf(this,c))return;a.$mouseOver=!1,a.$refMouseDown=0,a.$mouseLeft=!0,a.disabled||a.$updateState(b,"mouseout")},apf.hasClickFastBug&&(this.$ext.ondblclick=this.$ext.onmouseup)},this.$doBgSwitch=function(a){if(this.background&&(this.$background[2]>=a||a==4)){a==4&&(a=this.$background[2]+1);var b=this.$background[1]=="vertical"?"0 -"+parseInt(this.$background[3])*(a-1)+"px":"-"+parseInt(this.$background[3])*(a-1)+"px 0";this.$getLayoutNode("main","background",this.$ext).style.backgroundPosition=b}},this.$focus=function(){if(!this.$ext)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus")},this.$blur=function(a){if(!this.$ext)return;this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),a&&this.$updateState({})},this.addEventListener("prop.disabled",function(a){this.$refKeyDown=this.$refMouseDown=0}),this.$destroy=function(a){!a&&this.$ext&&(this.$ext.onmousedown=this.$ext.onmouseup=this.$ext.onmouseover=this.$ext.onmouseout=this.$ext.onclick=this.$ext.ondblclick=null)}}.call(apf.BaseButton.prototype=new apf.StandardBinding),apf.BaseList=function(){this.$init(!0),this.$dynCssClasses=[],this.listNodes=[]},function(){this.implement(apf.Cache,apf.DataAction,apf.K),this.$focussable=!0,this.$isWindowContainer=-1,this.multiselect=!0,this.$propHandlers.fill=function(a){a?this.loadFillData(this.getAttribute("fill")):this.clear()},this.$keyHandler=function(a){var b=a.keyCode,c=a.ctrlKey,d=a.shiftKey,e=this.$caret||this.$selected;if(a.returnValue==-1||!e||this.renaming)return;var f=this.caret||this.selected,g=this.$ext,h,i,j,k,l,m,n;switch(b){case 13:this.$tempsel&&this.$selectTemp(),this.ctrlselect=="enter"&&this.select(this.caret,!0),this.choose(this.selected);break;case 32:(c||!this.isSelected(this.caret))&&this.select(this.caret,c);break;case 109:case 46:if(this.disableremove)return;this.$tempsel&&this.$selectTemp(),this.remove();break;case 36:var h=this.getFirstTraverseNode();if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.viewport.scrollIntoView(h);this.select(h,!1,d),this.$container.scrollTop=0;break;case 35:var h=this.getLastTraverseNode();if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.viewport.scrollIntoView(h,!0);this.select(h,!1,d),this.$container.scrollTop=this.$container.scrollHeight;break;case 107:this.more&&this.startMore();break;case 37:if(!f&&!this.$tempsel)return;h=this.$tempsel?apf.xmldb.getNode(this.$tempsel):f,i=apf.getBox(apf.getStyle(e,"margin")),j=e.offsetWidth?Math.floor((g.offsetWidth-(l?15:0))/(e.offsetWidth+i[1]+i[3])):1,h=this.getNextTraverseSelected(h,!1);if(h)this.$setTempSelected(h,c,d,!0);else return;e=apf.xmldb.findHtmlNode(h,this),e.offsetTop<g.scrollTop&&(g.scrollTop=Array.prototype.indexOf.call(this.getTraverseNodes(),h)<j?0:e.offsetTop-i[0]);break;case 38:if(!f&&!this.$tempsel)return;h=this.$tempsel?apf.xmldb.getNode(this.$tempsel):f,i=apf.getBox(apf.getStyle(e,"margin")),l=g.scrollHeight>g.offsetHeight,j=e.offsetWidth?Math.floor((g.offsetWidth-(l?15:0))/(e.offsetWidth+i[1]+i[3])):1,h=this.getNextTraverseSelected(h,!1,j);if(h)this.$setTempSelected(h,c,d,!0);else return;if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.viewport.scrollIntoView(h);e=apf.xmldb.findHtmlNode(h,this),e.offsetTop<g.scrollTop&&(g.scrollTop=Array.prototype.indexOf.call(this.getTraverseNodes(),h)<j?0:e.offsetTop-i[0]);break;case 39:if(!f&&!this.$tempsel)return;h=this.$tempsel?apf.xmldb.getNode(this.$tempsel):f,i=apf.getBox(apf.getStyle(e,"margin")),h=this.getNextTraverseSelected(h,!0);if(h)this.$setTempSelected(h,c,d);else return;e=apf.xmldb.findHtmlNode(h,this),e.offsetTop+e.offsetHeight>g.scrollTop+g.offsetHeight&&(g.scrollTop=e.offsetTop-g.offsetHeight+e.offsetHeight+i[0]);break;case 40:if(!f&&!this.$tempsel)return;h=this.$tempsel?apf.xmldb.getNode(this.$tempsel):f,i=apf.getBox(apf.getStyle(e,"margin")),l=g.scrollHeight>g.offsetHeight,j=e.offsetWidth?Math.floor((g.offsetWidth-(l?15:0))/(e.offsetWidth+i[1]+i[3])):1,h=this.getNextTraverseSelected(h,!0,j);if(h)this.$setTempSelected(h,c,d);else return;if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.viewport.scrollIntoView(h,!0);e=apf.xmldb.findHtmlNode(h,this),e.offsetTop+e.offsetHeight>g.scrollTop+g.offsetHeight&&(g.scrollTop=e.offsetTop-g.offsetHeight+e.offsetHeight+i[0]);break;case 33:if(!f&&!this.$tempsel)return;h=this.$tempsel?apf.xmldb.getNode(this.$tempsel):f,i=apf.getBox(apf.getStyle(e,"margin")),n=g.scrollHeight>g.offsetHeight,m=g.scrollWidth>g.offsetWidth,j=Math.floor((g.offsetWidth-(n?15:0))/(e.offsetWidth+i[1]+i[3])),k=Math.floor((g.offsetHeight-(m?15:0))/(e.offsetHeight+i[0]+i[2])),h=this.getNextTraverseSelected(h,!1,j*k),h||(h=this.getFirstTraverseNode());if(h)this.$setTempSelected(h,c,d,!0);else return;if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.viewport.scrollIntoView(h);e=apf.xmldb.findHtmlNode(h,this),e.offsetTop<g.scrollTop&&(g.scrollTop=Array.prototype.indexOf.call(this.getTraverseNodes(),h)<j?0:e.offsetTop-i[0]);break;case 34:if(!f&&!this.$tempsel)return;h=this.$tempsel?apf.xmldb.getNode(this.$tempsel):f,i=apf.getBox(apf.getStyle(e,"margin")),n=g.scrollHeight>g.offsetHeight,m=g.scrollWidth>g.offsetWidth,j=Math.floor((g.offsetWidth-(n?15:0))/(e.offsetWidth+i[1]+i[3])),k=Math.floor((g.offsetHeight-(m?15:0))/(e.offsetHeight+i[0]+i[2])),h=this.getNextTraverseSelected(f,!0,j*k),h||(h=this.getLastTraverseNode());if(h)this.$setTempSelected(h,c,d);else return;if(this.hasFeature(apf.__VIRTUALVIEWPORT__))return this.viewport.scrollIntoView(h,!0);e=apf.xmldb.findHtmlNode(h,this),e.offsetTop+e.offsetHeight>g.scrollTop+g.offsetHeight&&(g.scrollTop=e.offsetTop-g.offsetHeight+e.offsetHeight+i[0]);break;default:if(b==65&&c)this.selectAll();else if(this.$hasBindRule("caption")){if(!this.xmlRoot||this.autorename)return;if(!this.lookup||(new Date).getTime()-this.lookup.date.getTime()>300)this.lookup={str:"",date:new Date};this.lookup.str+=String.fromCharCode(b);var o=this.getTraverseNodes();for(var p,q=0;q<o.length;q++){p=this.$applyBindRule("caption",o[q]);if(p&&p.substr(0,this.lookup.str.length).toUpperCase()==this.lookup.str){this.isSelected(o[q])||this.select(o[q]),e&&(this.$container.scrollTop=e.offsetTop-(this.$container.offsetHeight-e.offsetHeight)/2);return}}return}}return this.lookup=null,!1},this.$deInitNode=function(a,b){if(!b)return;b.parentNode.removeChild(b)},this.$updateNode=function(a,b,c){var d=this.$getLayoutNode("item","icon",b);if(d)d.nodeType==1?d.style.backgroundImage="url("+apf.getAbsolutePath(this.iconPath,this.$applyBindRule("icon",a))+")":d.nodeValue=apf.getAbsolutePath(this.iconPath,this.$applyBindRule("icon",a));else{var e=this.$getLayoutNode("item","image",b);e&&(e.nodeType==1?e.style.backgroundImage="url("+apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",a))+")":e.nodeValue=apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",a)))}var f=this.$getLayoutNode("item","caption",b);f&&(f.nodeType==1?f.innerHTML=this.$applyBindRule("caption",a):f.nodeValue=this.$applyBindRule("caption",a)),b.title=this.$applyBindRule("title",a)||"";var g=this.$applyBindRule("css",a);if(g||this.$dynCssClasses.length)this.$setStyleClass(b,g,this.$dynCssClasses),g&&!this.$dynCssClasses.contains(g)&&this.$dynCssClasses.push(g);!c&&this.$updateModifier&&this.$updateModifier(a,b)},this.$moveNode=function(a,b){if(!b)return;var c=b.parentNode,d=this.getNextTraverse(a),e=d?apf.xmldb.findHtmlNode(d,this):null;c.insertBefore(b,e)},this.$add=function(a,b,c,d,e){this.$getNewContext("item");var f=this.$getLayoutNode("item"),g=this.$getLayoutNode("item","select"),h=this.$getLayoutNode("item","icon"),i=this.$getLayoutNode("item","image"),j=this.$getLayoutNode("item","caption");f.setAttribute("id",b),g.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+"); o.$setStyleClass(this, 'hover', null, true);"),g.setAttribute("onselectstart","return false;"),g.setAttribute("style",(g.getAttribute("style")||"")+";user-select:none;-moz-user-select:none;-webkit-user-select:none;"),this.hasFeature(apf.__RENAME__)||this.hasFeature(apf.__DRAGDROP__)?(g.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+"); "+"o.stopRename();"+" o.choose()"),g.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+");            \t  o.$setStyleClass(this, '', ['hover'], true);                this.hasPassedDown = false;"),g.setAttribute(this.itemSelectEvent||"onmousedown","var o = apf.lookup("+this.$uniqueId+");                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 this.hasPassedDown = true;                 if (event.button == 2)                     o.stopRename();                 else if (!o.renaming && o.hasFocus() && isSelected == 1)                     this.dorename = true;                 if (!o.hasFeature(apf.__DRAGDROP__) || !isSelected && !event.ctrlKey)                     o.select(this, event.ctrlKey, event.shiftKey, -1)"),g.setAttribute("onmouseup","if (!this.hasPassedDown) return;                var o = apf.lookup("+this.$uniqueId+");"+"if (o.hasFeature(apf.__RENAME__) && this.dorename)                    o.startDelayedRename(event, null, true);"+"this.dorename = false;                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 if (o.hasFeature(apf.__DRAGDROP__))                     o.select(this, event.ctrlKey, event.shiftKey, -1)")):(g.setAttribute("onmouseout","apf.setStyleClass(this, '', ['hover']);"),g.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+"); o.choose(null, true)"),g.setAttribute(this.itemSelectEvent||"onmousedown","var o = apf.lookup("+this.$uniqueId+"); o.select(this, event.ctrlKey, event.shiftKey, -1)"));if(h)h.nodeType==1?h.setAttribute("style","background-image:url("+apf.getAbsolutePath(this.iconPath,this.$applyBindRule("icon",a))+")"):h.nodeValue=apf.getAbsolutePath(this.iconPath,this.$applyBindRule("icon",a));else if(i)if(i.nodeType==1)(i.tagName||"").toLowerCase()=="img"?i.setAttribute("src",apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",a))):i.setAttribute("style","background-image:url("+apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",a))+")");else if(apf.isSafariOld){var k=i.ownerElement.parentNode,l=k.appendChild(k.ownerDocument.createElement("img"));l.setAttribute("src",apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",a)))}else i.nodeValue=apf.getAbsolutePath(apf.hostPath,this.$applyBindRule("image",a));j&&apf.setNodeValue(j,this.$applyBindRule("caption",a)),f.setAttribute("title",this.$applyBindRule("tooltip",a)||"");var m=this.$applyBindRule("css",a);m&&(this.$setStyleClass(f,m),m&&this.$dynCssClasses.push(m));if(this.$addModifier&&this.$addModifier(a,f,d,e)===!1)return;d?apf.insertHtmlNode(f,d,e):this.listNodes.push(f)},this.addEventListener("$skinchange",function(a){this.more&&delete this.moreItem}),this.$fill=function(){if(this.more&&!this.moreItem){this.$getNewContext("item");var a=this.$getLayoutNode("item"),b=this.$getLayoutNode("item","caption"),c=this.$getLayoutNode("item","select");a.setAttribute("class",this.$baseCSSname+"More"),c.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+');o.clearSelection();o.$setStyleClass(this, "more_down", null, true);'),c.setAttribute("onmouseout","apf.lookup("+this.$uniqueId+').$setStyleClass(this, "", ["more_down"], true);'),c.setAttribute("onmouseup","apf.lookup("+this.$uniqueId+").startMore(this, true)"),b&&apf.setNodeValue(b,this.more.match(/caption:(.*)(;|$)/i)[1]),this.listNodes.push(a)}apf.insertHtmlNodes(this.listNodes,this.$container),this.listNodes.length=0,this.more&&!this.moreItem&&(this.moreItem=this.$container.lastChild)},this.startMore=function(a,b){if(b&&this.disabled)return;this.$setStyleClass(a,"",["more_down"]);var c;this.$actions.add||(this.each&&!this.each.match(/[\/\[]/)?c="<"+this.each+(this.each.match(/^a:/)?" xmlns:a='"+apf.ns.aml+"'":"")+" custom='1' />":c="<item />"),this.add(c,null,null,function(a){this.select(a,null,null,null,null,!0),this.morePos=="begin"?this.$container.insertBefore(this.moreItem,this.$container.firstChild):this.$container.appendChild(this.moreItem);var b=function(){this.getActionTracker().undo(this.autoselect?2:1),this.removeEventListener("stoprename",b),this.removeEventListener("beforerename",d),this.removeEventListener("afterrename",c)},c=function(){this.removeEventListener("afterrename",c)},d=function(a){this.removeEventListener("stoprename",b),this.removeEventListener("beforerename",d);var e=this.findXmlNodeByValue(a.args[1]);if(e||!a.args[1])return a.args[1]&&this.dispatchEvent("notunique",{value:a.args[1]})===!1?(this.startRename(),this.addEventListener("stoprename",b),this.addEventListener("beforerename",d)):(this.removeEventListener("afterrename",c),this.getActionTracker().undo(),this.isSelected(e)||this.select(e)),!1};this.addEventListener("stoprename",b),this.addEventListener("beforerename",d),this.addEventListener("afterrename",c),this.startDelayedRename({},1)})},this.$calcSelectRange=function(a,b){var c=[],d=this.hasFeature(apf.__VIRTUALVIEWPORT__)?this.xmlRoot.selectNodes(this.each):this.getTraverseNodes(),e,f;for(e=!1,f=0;f<d.length;f++)d[f]==a&&(e=!0),e&&c.push(d[f]),d[f]==b&&(e=!1);if(!c.length||e){c=[];for(e=!1,f=d.length-1;f>=0;f--)d[f]==a&&(e=!0),e&&c.push(d[f]),d[f]==b&&(e=!1)}return c},this.$selectDefault=function(a){this.select(this.getTraverseNodes()[0],null,null,null,!0)},this.loadFillData=function(a){var b,c,d,e=a.splitSafe(","),f=[];for(var g,h,i=0;i<e.length;i++)if((h=e[i]).match(/^\d+-\d+$/)){g=h.split("-"),c=parseInt(g[0]),d=parseInt(g[1]);if(g[0].length==g[1].length){b=Math.max(g[0].length,g[1].length);for(var j=c;j<d+1;j++)f.push("<item>"+(j+"").pad(b,"0")+"</item>")}else for(var j=c;j<d+1;j++)f.push("<item>"+j+"</item>")}else f.push("<item>"+h+"</item>");this.$initingModel=!0,this.each="item",this.$setDynamicProperty("caption","[label/text()|@caption|text()]"),this.$setDynamicProperty("eachvalue","[value/text()|@value|text()]"),this.$canLoadDataAttr=!1,this.load("<data>"+f.join("")+"</data>")}}.call(apf.BaseList.prototype=new apf.MultiSelect),apf.BaseSimple=function(){this.$init(!0)},function(){this.implement(apf.DataAction),this.getValue=function(){return this.value}}.call(apf.BaseSimple.prototype=new apf.StandardBinding),apf.BaseStateButtons=function(){function f(a){a.setAttribute("onmousedown","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, 'down', null, true);             apf.cancelBubble(event, o);              var o = apf.findHost(this).$ext;             if (o.onmousedown) o.onmousedown(event);             apf.cancelBubble(event, o);             apf.window.$mousedown(event);"),a.setAttribute("onmouseup","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, '', ['down'], true);"),a.setAttribute("onmouseover","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, 'hover', null, true);"),a.setAttribute("onmouseout","var o = apf.all["+this.$uniqueId+"];             o.$setStyleClass(this, '', ['hover', 'down'], true);"),a.setAttribute("ondblclick","apf.stopPropagation(event);")}this.state="normal",this.edit=!1;var a={min:["minimized","minimize","restore"],max:["maximized","maximize","restore"],edit:["edit","edit","closeedit"],close:["closed","close","show"]};this.$lastheight=null,this.$lastpos=null,this.$lastState={normal:!0},this.$booleanProperties.animate=!0,this.$supportedProperties.push("buttons","animate","state"),this.close=function(){return this.setProperty("state",this.state.split("|").pushUnique("closed").join("|"),!1,!0),this},this.minimize=function(){return this.setProperty("state",this.state.split("|").remove("maximized").remove("normal").pushUnique("minimized").join("|"),!1,!0),this},this.maximize=function(){return this.setProperty("state",this.state.split("|").remove("minimized").remove("normal").pushUnique("maximized").join("|"),!1,!0),this},this.restore=function(){return this.setProperty("state",this.state.split("|").remove("minimized").remove("maximized").pushUnique("normal").join("|"),!1,!0),this},this.edit=function(a){return this.setProperty("state",this.state.split("|").pushUnique("edit").join("|"),!1,!0),this},this.closeedit=function(a){return this.setProperty("state",this.state.split("|").remove("edit").join("|"),!1,!0),this},this.$toggle=function(b){var c=a[b][0];this[a[b][this.state.indexOf(c)>-1?2:1]]()},this.$propHandlers.refparent=function(a){typeof a=="string"?this.$refParent=self[a]&&self[a].$ext||document.getElementById(a):this.$refParent=a},this.$propHandlers.maxconf=function(a){this.$maxconf=a.splitSafe(",")},this.$propHandlers.state=function(a,c,d,f,g){var h=this;if(!this.$amlLoaded){apf.queue.add("state"+this.$uniqueId,function(){h.$propHandlers.state.call(h,a,c,d,f,g)});return}a==0&&(a="normal");var i,j,k,l,m,n={},o=a.split("|"),p=this.$lastState,q=[];for(i=0;i<o.length;i++)n[o[i]]=!0;n.value=a,!n.maximized&&!n.minimized&&(n.normal=!0);if(!f&&this.dispatchEvent("beforestatechange",{from:p,to:n})===!1)return this.state=p.value,!1;n.closed==this.visible&&this.setProperty("visible",!n.closed,!1,!0);if(n.normal!=p.normal||!n.normal&&(n.minimized!=p.minimized||n.maximized!=p.maximized)){this.$lastheight&&(this.$ext.style.height=this.$lastheight);if(this.$lastpos){apf.plane.hide(this.$uniqueId);if(this.animate&&!g){var r=this.$ext;k=apf.getStyle(r,"position"),k!="absolute"?(l=parseInt(apf.getStyle(r,"left"))||0,m=parseInt(apf.getStyle(r,"top"))||0):(l=r.offsetLeft,m=r.offsetTop),this.animstate=1,apf.tween.multi(r,{steps:15,anim:apf.tween.easeInOutCubic,interval:10,tweens:[{type:"left",from:l,to:this.$lastpos.px[0]},{type:"top",from:m,to:this.$lastpos.px[1]},{type:"width",from:this.$ext.offsetWidth,to:this.$lastpos.px[2]},{type:"height",from:this.$ext.offsetHeight,to:this.$lastpos.px[3]}],oneach:function(){apf.hasSingleRszEvent&&apf.layout.forceResize(h.$int)},onfinish:function(){h.$lastpos.parentNode.insertBefore(h.$ext,h.$lastpos.beforeNode),h.$placeHolder&&h.$placeHolder.parentNode.removeChild(h.$placeHolder),h.$propHandlers.state.call(h,a,null,null,!0,!0)}});return}this.animate||(apf.plane.hide(this.$uniqueId,!0),h.$lastpos.parentNode.insertBefore(h.$ext,h.$lastpos.beforeNode),h.$placeHolder&&h.$placeHolder.parentNode.removeChild(h.$placeHolder)),this.$ext.style.position=this.$lastpos.pos,this.$ext.style.left=this.$lastpos.css[0],this.$ext.style.top=this.$lastpos.css[1],this.$ext.style.width=this.$lastpos.css[2],this.$ext.style.height=this.$lastpos.css[3],j=this.$lastpos.parentNode,j.style.width=this.$lastpos.parent[0],j.style.height=this.$lastpos.parent[1],j.style.overflow=this.$lastpos.parent[2]}this.aData&&this.aData.restore&&this.aData.restore(),apf.layout&&apf.layout.play(this.$pHtmlNode),this.$lastheight=this.$lastpos=null,n.normal&&q.push("",this.$baseCSSname+"Max",this.$baseCSSname+"Min")}if(n.minimized!=p.minimized)if(n.minimized){q.unshift(this.$baseCSSname+"Min",this.$baseCSSname+"Max",this.$baseCSSname+"Edit"),this.aData&&this.aData.minimize&&this.aData.minimize(this.collapsedHeight);if(!this.aData||!this.aData.minimize)this.$lastheight=apf.getStyle(this.$ext,"height"),this.$ext.style.height=Math.max(0,this.collapsedHeight-apf.getHeightDiff(this.$ext))+"px";this.hasFocus()&&apf.window.moveNext(null,this,!0)}else q.push(this.$baseCSSname+"Min"),$setTimeout(function(){apf.window.$focusLast(h)});if(n.maximized!=p.maximized)if(n.maximized){q.unshift(this.$baseCSSname+"Max",this.$baseCSSname+"Min",this.$baseCSSname+"Edit"),j=this.$refParent,j||(j=this.$ext.offsetParent==document.body?document.documentElement:this.$ext.parentNode),this.animstate=0;var s=!1,r=this.$ext,k=apf.getStyle(r,"position");if(k=="absolute")j.style.overflow="hidden",l=r.offsetLeft,m=r.offsetTop;else{var t=apf.getAbsolutePosition(r);l=t[0],m=t[1]}this.$lastpos={css:[this.$ext.style.left,this.$ext.style.top,this.$ext.style.width,this.$ext.style.height,this.$ext.style.margin,this.$ext.style.zIndex],px:[l,m,this.$ext.offsetWidth,this.$ext.offsetHeight],parent:[j.style.width,j.style.height,j.style.overflow],pos:r.style.position,parentNode:j,beforeNode:this.$ext.nextSibling},this.parentNode.$layout&&(this.$placeHolder||(this.$placeHolder=document.createElement("div")),this.$placeHolder.style.position=this.$lastpos.pos,this.$placeHolder.style.left=this.$lastpos.css[0],this.$placeHolder.style.top=this.$lastpos.css[1],this.$placeHolder.style.width=this.$lastpos.px[2]+"px",this.$placeHolder.style.height=this.$lastpos.px[3]+"px",this.$placeHolder.style.margin=this.$lastpos.css[4],this.$placeHolder.style.zIndex=this.$lastpos.css[5],this.$pHtmlNode.insertBefore(this.$placeHolder,this.$ext),r.style.position="absolute"),document.body.appendChild(r),r.style.left=l+"px",r.style.top=m+"px";function u(){if(h.animstate)return;var a,c,d,e,f;h.maxconf?(a=h.$maxconf[0],c=h.$maxconf[1],d=[h.$maxconf[2]=="center"?(apf.getWindowWidth()-a)/2:h.$maxconf[2],h.$maxconf[3]=="center"?(apf.getWindowHeight()-c)/3:h.$maxconf[3]]):(a=!apf.isIE&&j==document.documentElement?window.innerWidth:j.offsetWidth,c=!apf.isIE&&j==document.documentElement?window.innerHeight:j.offsetHeight),d||(d=j!=r.offsetParent?apf.getAbsolutePosition(j,r.offsetParent):[0,0]);if(k!="absolute"){var g=apf.getDiff(j);a-=g[0]+(!h.$refParent&&apf.isIE8?4:0),c-=g[0]+(!h.$refParent&&apf.isIE8?4:0)}else!h.$refParent&&apf.isIE8&&(a-=4,c-=4);e=h.$refParent?[0,0,0,0]:b,f=apf.getDiff(j),j.style.width=j.offsetWidth-f[0]+"px",j.style.height=j.offsetHeight-f[1]+"px",!s&&h.$maxconf&&h.$maxconf[4]&&apf.plane.show(r,!1,null,null,{color:h.$maxconf[4],opacity:h.$maxconf[5],animate:h.animate,protect:h.$uniqueId});if(h.animate&&!s)h.animstate=1,s=!0,apf.tween.multi(r,{steps:15,anim:apf.tween.easeInOutCubic,interval:10,tweens:[{type:"left",from:l,to:d[0]-e[3]},{type:"top",from:m,to:d[1]-e[0]},{type:"width",from:h.$lastpos.px[2],to:a+e[1]+e[3]-apf.getWidthDiff(h.$ext)},{type:"height",from:h.$lastpos.px[3],to:c+e[0]+e[2]-apf.getHeightDiff(h.$ext)}],oneach:function(){apf.hasSingleRszEvent&&apf.layout.forceResize(h.$int)},onfinish:function(){h.animstate=0,h.dispatchEvent("afterstatechange",{from:p,to:n}),apf.hasSingleRszEvent&&apf.layout.forceResize(h.$int)}});else if(!h.animstate){r.style.left=d[0]-e[3]+"px",r.style.top=d[1]-e[0]+"px";var g=apf.getDiff(h.$ext);r.style.width=a-g[0]+e[1]+e[3]+"px",r.style.height=c-g[1]+e[0]+e[2]+"px"}}apf.layout&&apf.layout.pause(this.$pHtmlNode,u)}else q.push(this.$baseCSSname+"Max");if(n.edit!=p.edit)if(n.edit)q.unshift(this.$baseCSSname+"Edit",this.$baseCSSname+"Max",this.$baseCSSname+"Min"),this.btnedit&&(e.edit.innerHTML="close"),this.dispatchEvent("editstart");else{if(this.dispatchEvent("editstop")===!1)return!1;q.push(this.$baseCSSname+"Edit"),q.length==1&&q.unshift(""),this.btnedit&&(e.edit.innerHTML="edit")}if(q.length||n.closed!=p.closed)q.length&&this.$setStyleClass(this.$ext,q.shift(),q),n.edit&&(this.dispatchEvent("prop.visible",{value:!0}),h.oSettings&&apf.layout.forceResize(h.oSettings)),(!n.maximized||!this.animate||p.maximized&&h.animate)&&h.dispatchEvent("afterstatechange",{from:p,to:n}),this.$lastState=n,this.aData&&!n.maximized&&this.$purgeAlignment(),!this.animate&&apf.hasSingleRszEvent&&apf.layout&&apf.layout.forceResize(h.$int)};var b,c,d,e={};this.$propHandlers.buttons=function(a){if(!this.$hasLayoutNode("button"))return;var c=a&&(a=a.replace(/(\|)\||\|$/,"$1")).split("|")||[],d=this.$buttons.childNodes,g=a&&new RegExp("("+a+")"),h={},i=[];for(var j=0;j<d.length;j++){if(d[j].nodeType!=1||d[j].tagName!="DIV")continue;d[j].getAttribute("button")&&(!a||!d[j].className||!d[j].className.match(g))?(d[j].style.display="none",this.$setStyleClass(d[j],"",["min","max","close","edit"]),i.push(d[j])):h[RegExp.$1]=d[j]}for(j=0;j<c.length;j++){if(!c[j])continue;if(h[c[j]]){this.$buttons.insertBefore(h[c[j]],this.$buttons.firstChild);continue}var k=i.pop();k||(this.$getNewContext("button"),k=this.$getLayoutNode("button"),k.setAttribute("button","button"),f.call(this,k),k=apf.insertHtmlNode(k,this.$buttons)),this.$setStyleClass(k,c[j],["min","max","close","edit"]),k.onclick=new Function("apf.lookup("+this.$uniqueId+").$toggle('"+c[j]+"')"),k.style.display="block",e[c[j]]=k,this.$buttons.insertBefore(k,this.$buttons.firstChild)}b=apf.getBox(apf.getStyle(this.$ext,"borderWidth"))},this.$initButtons=function(a){this.animate=apf.enableAnim,this.collapsedHeight=this.$getOption("Main","collapsed-height");var b=this.$getLayoutNode("main","buttons",a);if(!b||apf.isIphone||!this.getAttribute("buttons")||!this.$hasLayoutNode("button"))return;var c=(this.getAttribute("buttons")||"").split("|").length;for(var d,e=0;e<c;e++)this.$getNewContext("button"),d=b.appendChild(this.$getLayoutNode("button")),d.setAttribute("button","button"),f.call(this,d)},this.addEventListener("DOMNodeRemovedFromDocument",function(a){for(var b in e)e[b].onclick=null})},apf.BaseTab=function(){this.$init(!0)},function(){function a(){c.call(this)}function c(a,c){if(!this.length&&!this.getPages().length||this.$waitForMouseOut||this.$control&&this.$control.state==apf.tween.RUNNING)return;var d=this.getPage();if(!d)return;this.$btnMargin==undefined&&(this.$btnMargin=apf.getMargin(d.$button)[0]);var e=this.getPages();c&&e.remove(c);if(!e.length)return;var f=this.$buttons.offsetWidth-apf.getWidthDiff(this.$buttons)-(c?c.$button.offsetWidth+this.$btnMargin:0),g=e.length,h=Math.min(f/g,this.$maxBtnWidth),i=Math.round(h%1*10);for(var j,k=0;k<g-1;k++){j=Math.max(this.$minBtnWidth,b[k<i?1:0](h)),f-=j;if(!e[k].$button)continue;e[k].$button.style.width=j-apf.getWidthDiff(e[k].$button)-this.$btnMargin+"px"}if(!e[g-1].$button)return;e[g-1].$button.style.width=Math.max(this.$minBtnWidth,Math.min(f,this.$maxBtnWidth))-this.$btnMargin-apf.getWidthDiff(e[g-1].$button)+"px"}function d(){var a="cache_"+this.$buttons.childNodes.length;if(SCROLLANIM[a])return SCROLLANIM[a];var b=0;for(var c=0,d=this.$buttons.childNodes.length;c<d;c++)typeof this.$buttons.childNodes[c].offsetWidth!="undefined"&&(b+=this.$buttons.childNodes[c].offsetWidth);return SCROLLANIM[a]=b}function e(a,b){var c=a&SCROLL_BOTH;c&&(a=SCROLL_LEFT);var d=this[a&SCROLL_LEFT?"oLeftScroll":"oRightScroll"];b&SCROLL_DIS||(a&SCROLL_LEFT?SCROLL_L_STATE=b:SCROLL_R_STATE=b),b&SCROLL_OFF?apf.setStyleClass(d,"",["disabled","hover","down"]):b&SCROLL_HOVER?apf.setStyleClass(d,"hover",["disabled","down"]):b&SCROLL_DOWN?apf.setStyleClass(d,"down",["disabled","hover"]):b&SCROLL_DIS&&apf.setStyleClass(d,"disabled",["hover","down"]),c&&e(SCROLL_RIGHT,b)}function f(a,b){SCROLLANIM.size<=0&&(SCROLLANIM.left=this.$buttons.offsetLeft,SCROLLANIM.size=Math.round(this.firstChild.$button.offsetWidth));if(a&SCROLL_LEFT)return SCROLLANIM.left;if(a&SCROLL_RIGHT){var c=this.$buttons.childNodes[this.$buttons.childNodes.length-1];return this.$ext.offsetWidth-(c.offsetLeft+c.offsetWidth+(this.oScroller.offsetWidth+4))}}this.isPaged=!0,this.$focussable=apf.KEYBOARD,this.length=0,this.isLoading={},this.inited=this.ready=!1,this.$scroll=!0,this.set=function(a,b,c){if(c||this.src&&!this.$findPage(a,{}))return this.$propHandlers.activepage.call(this,a,null,null,b,c);if(this.activepage==(a.name||a))return b&&b(this.getPage(a));this.$lastCallback=b,this.setProperty("activepage",a)},this.$supportedProperties.push("activepage","activepagenr","length","src","loading","trans-in","trans-out"),this.$propHandlers.activepagenr=this.$propHandlers.activepage=function(a,b,c,d,e){if(!this.inited||apf.isNot(a)||a==-1)return;d||(d=this.$lastCallback,delete this.$lastCallback);var f,g={};f=this.$findPage(a,g);if(!f){if(this.src){if(this.isLoading[a])return;this.$findPage("loading",{})&&this.$propHandlers.activepage.call(this,"loading"),this.setProperty("loading",!0),this.isLoading[a]=!0,f=this.ownerDocument.createElementNS(apf.ns.apf,"page"),f.setAttribute("id",a),this.appendChild(f);var h=this;f.insertMarkup(this.src,{page:a,callback:function(b){delete h.isLoading[a];if(!b.xmlNode){var c=new Error(apf.formatErrorString(0,null,"Loading new page","Could not load new page: "+h.src));h.setProperty("loading",!1);if(this.dispatchEvent("error",apf.extend({error:c,bubbles:!0},b))===!1)return!0;throw c}h.setProperty("activepage",a),d&&d(b.amlNode),h.setProperty("loading",!1)}});return}return!1}if(f.parentNode!=this)return!1;if(!f.visible||f.disabled)return!1;a.tagName&&(a=g.position,this.activepage=f.name||a);if(!e){var i={previous:this.activepage,previousId:this.activepagenr,previousPage:this.$activepage,next:a,nextId:g.position,nextPage:f};if(this.dispatchEvent("beforeswitch",i)===!1)return this.hideLoader&&this.hideLoader(),!1}return this.activepagenr=g.position,this.setProperty("activepagenr",g.position),this.$activepage&&this.$activepage.$deactivate(),f.$activate(),this.$activepage=f,this.hideLoader&&(f.$rendered!==!1?this.hideLoader():f.addEventListener("afterrender",function(){this.parentNode.hideLoader()})),e||(f.$rendered!==!1?this.dispatchEvent("afterswitch",i):f.addEventListener("afterrender",function(){this.parentNode.dispatchEvent("afterswitch",i)})),typeof d=="function"&&d(f),!0},this.$propHandlers.buttons=function(a){this.$scale=a.indexOf("scale")>-1,this.$scroll=!this.$scale,this.$order=a.indexOf("order")>-1,this.$scale?(this.$maxBtnWidth=parseInt(this.$getOption("button","maxwidth"))||150,this.$minBtnWidth=parseInt(this.$getOption("button","minwidth"))||10,this.$setStyleClass(this.$buttons,"scale"),this.addEventListener("resize",c),this.minwidth=this.$minBtnWidth*this.getPages().length+10,this.$ext.style.minWidth=Math.max(0,this.minwidth-apf.getWidthDiff(this.$ext))+"px"):(this.$setStyleClass(this.$buttons,"",["scale"]),this.removeEventListener("resize",c))},this.anims="add|remove|sync",this.$scaleinit=function(b,d,e,f){function k(a){var b=apf.getAbsolutePosition(this);if(a.clientX<=b[0]||a.clientY<=b[1]||a.clientX>=b[0]+this.offsetWidth||a.clientY>=b[1]+this.offsetHeight)apf.removeListener(i.$buttons,"mouseout",k),i.$control.state==apf.tween.STOPPED?(delete i.$waitForMouseOut,i.$scaleinit(null,"sync")):i.$waitForMouseOut&&(i.$waitForMouseOut=2)}var g=this.getPages(),h=g.length;this.minwidth=this.$minBtnWidth*h+10,this.$ext.style.minWidth=Math.max(0,this.minwidth-apf.getWidthDiff(this.$ext))+"px";if(f&&!this.$ext.offsetWidth&&!this.$ext.offsetHeight||this.anims.indexOf(d)==-1)return c.call(this),d=="add"?b.dispatchEvent("afteropen"):d=="remove"&&b.dispatchEvent("afterclose"),!1;if(!apf.window.vManager.check(this,"tabscale",a))return;if(!d)return c.call(this);this.$control&&this.$control.type!="remove"&&this.$control.stop&&this.$control.stop();var i=this,j={steps:d=="remove"?8:8,control:this.$control={},anim:apf.tween.EASEOUT,interval:10,tweens:[],oHtml:b,onfinish:function(){if(!b)return;d=="add"&&b.dispatchEvent("afteropen")},onstop:function(){if(!b)return;d=="add"?b.dispatchEvent("afteropen"):d=="remove"&&b.dispatchEvent("afterclose")}};this.$control.type=d;if(d=="add"){var l=b.$button;l.style.width=this.$minBtnWidth+"px",g.length&&(c.call(this,null,b),this.$buildScaleAnim(j,g,null,!0))}else if(d=="sync")this.$buildScaleAnim(j,g);else if(d=="remove"){j.onfinish=function(){b.dispatchEvent("afterclose")!==!1&&e(),m.style.marginLeft=0,apf.setOpacity(m,1),i.$waitForMouseOut==2?(apf.removeListener(i.$buttons,"mouseout",k),delete i.$waitForMouseOut,i.$scaleinit(null,"sync")):o&&delete i.$waitForMouseOut},j.onstop=function(){apf.setOpacity(m,1)};var m=b.$button;j.tweens.push({oHtml:m,type:"width",from:m.offsetWidth-apf.getWidthDiff(m),to:0});var n=apf.getWidthDiff(m)+(this.$btnMargin||0);n&&j.tweens.push({oHtml:m,type:"marginLeft",from:0,to:-1*n}),j.tweens.push({oHtml:m,type:"fade",from:1,to:0});var o=g[g.length-1]==b;o&&this.$buildScaleAnim(j,g,b);if(this.nextTabInLine)this.set(this.nextTabInLine),delete this.nextTabInLine;else if(this.$activepage==b){var p=b.nextSibling;while(p&&(!p.$first||!p.visible))p=p.nextSibling;var q=b.previousSibling;while(q&&(!q.$last||!q.visible))q=q.previousSibling;(p||q)&&this.set(p||q)}this.$waitForMouseOut=!0,o||apf.addListener(i.$buttons,"mouseout",k)}j.tweens.length&&apf.tween.multi(this,j)},this.$buildScaleAnim=function(a,c,d,e){d&&(c=c.slice(),c.remove(d));if(!c.length)return;var f=this.$buttons.offsetWidth-apf.getWidthDiff(this.$buttons),g=c.length,h=Math.min(f/g,this.$maxBtnWidth),i=Math.round(h%1*10);for(var j,k,l,m=0;m<g-1;m++)l=Math.max(this.$minBtnWidth,b[m<i?1:0](h)),f-=l,k=c[m].$button,j=apf.getWidthDiff(k),a.tweens.push({oHtml:k,type:"width",from:k.offsetWidth-j,to:l-j-(this.$btnMargin||0)});k=c[g-1].$button,j=apf.getWidthDiff(k),a.tweens.push({oHtml:k,type:"width",from:k.offsetWidth-j,to:Math.max(this.$minBtnWidth,Math.min(f,this.$maxBtnWidth))-(this.$btnMargin||0)-j})};var b=[Math.floor,Math.ceil];this.getPages=function(){var a=[],b=this.childNodes;for(var c=0,d=b.length;c<d;c++)"page|case".indexOf(b[c].localName)>-1&&b[c].visible!==!1&&a.push(b[c]);return a},this.getPage=function(a){return apf.isNot(a)?this.$activepage:this.$findPage(a)},this.add=function(a,b,c,d,e){var f=this.ownerDocument.createElementNS(apf.ns.aml,"page");return b&&f.setAttribute("id",b),c&&f.setAttribute("type",c),a&&f.setAttribute("caption",a),e&&e(f),this.insertBefore(f,d),f},this.remove=function(a,b,c){var d=typeof a=="object"?a:this.$findPage(a);if(!d)return!1;var e={page:d};typeof b=="object"&&(e.htmlEvent=b,b=!1);if(!b&&this.dispatchEvent("close",e)===!1)return;return this.$scale&&!c?this.$scaleinit(d,"remove",function(){d.destroy(!0,!0)},!0):d.dispatchEvent("afterclose")!==!1&&d.destroy(!0,!0),d},this.setScrollerState=function(a,b){if(!this.ready||!this.$hasButtons||!this.oScroller)return;if(typeof a=="undefined"){var c=this.oScroller.offsetWidth||parseInt(apf.getStyle(this.oScroller,"width").replace(/(px|em|%)/,""));a=d.call(this)+c>this.$ext.offsetWidth,b=SCROLL_BOTH}b&SCROLL_BOTH&&a!==SCROLLANIM.scrollOn?(SCROLLANIM.scrollOn=a,a||(this.$buttons.style.left=SCROLLANIM.left+"px",this.oScroller.style.display="none")):this.oScroller.style.display="",this.oScroller.style.display=b&SCROLL_BOTH&&!a?"none":"",typeof b=="undefined"&&(b=SCROLL_BOTH),a||((b&SCROLL_LEFT||b&SCROLL_BOTH)&&e.call(this,SCROLL_LEFT,SCROLL_DIS),(b&SCROLL_RIGHT||b&SCROLL_BOTH)&&e.call(this,SCROLL_RIGHT,SCROLL_DIS))},this.correctScrollState=function(){if(!this.ready||!this.$hasButtons||!this.oScroller)return;this.setScrollerState()},this.scroll=function(a,b){if(!this.ready||!this.$hasButtons||!this.oScroller)return;a||(a=window.event),typeof a["type"]=="unknown"&&(a={type:"click"});if(c&&a.type!="dblclick")return;var c=!0;typeof b=="undefined"&&(b=SCROLL_LEFT);var d=this.$buttons.offsetLeft,g=a.delta?Math.round(a.delta*36):SCROLLANIM.size,h=f.call(this,b),i=this;if(b&SCROLL_LEFT){e(SCROLL_LEFT,SCROLL_DOWN),e(SCROLL_RIGHT,SCROLL_OFF);if(d===h)return this.setScrollerState(!1,SCROLL_LEFT),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:20,from:d,to:d+12,type:"left",anim:apf.tween.EASEOUT,onstop:SCROLLANIM.stopHandle,onfinish:function(b){apf.tween.single(b,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,from:d+12,to:d,type:"left",anim:apf.tween.EASEIN,onstop:SCROLLANIM.stopHandle,onfinish:function(){c=!1,a.name=="mousescroll"&&e(SCROLL_LEFT,SCROLL_OFF)}})}});var j=d+(a.type=="dblclick"?g*3:g);j>h&&(j=h),j===h&&this.setScrollerState(!1,SCROLL_LEFT),this.setScrollerState(!0,SCROLL_RIGHT),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,control:SCROLLANIM.control,from:d,to:j,type:"left",anim:apf.tween.NORMAL,onstop:SCROLLANIM.stopHandle,onfinish:function(){c=!1,a.name=="mousescroll"&&e(SCROLL_LEFT,SCROLL_OFF),keepScrolling&&i.scroll(a,globalDir)}})}else if(b&SCROLL_RIGHT){this.setScrollerState(!0),e(SCROLL_RIGHT,SCROLL_DOWN),e(SCROLL_LEFT,SCROLL_OFF);if(d===h)return this.setScrollerState(!1,SCROLL_RIGHT),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:20,from:d,to:d-24,type:"left",anim:apf.tween.EASEOUT,onstop:SCROLLANIM.stopHandle,onfinish:function(b,f){apf.tween.single(b,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,from:d-24,to:d,type:"left",anim:apf.tween.EASEIN,onstop:SCROLLANIM.stopHandle,onfinish:function(){c=!1,a.name=="mousescroll"&&e(SCROLL_RIGHT,SCROLL_OFF)}})}});var j=d-(a.type=="dblclick"?g*3:g);j<h&&(j=h),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,control:SCROLLANIM.control,from:d,to:j,type:"left",anim:apf.tween.NORMAL,onstop:SCROLLANIM.stopHandle,onfinish:function(){c=!1,a.name=="mousescroll"&&e(SCROLL_RIGHT,SCROLL_OFF),keepScrolling&&i.scroll(a,globalDir)}})}},this.scrollIntoView=function(a){bAnimating=!1;if(!this.ready||!this.$hasButtons||!this.oScroller||!a.$drawn)return;bAnimating=!0;if(this.$buttons.offsetWidth<this.$ext.offsetWidth)return this.setScrollerState(!1);var b=a.$button.offsetLeft,c=a.$button.offsetWidth,d=this.$buttons.offsetLeft;if(SCROLLANIM.size<=0){SCROLLANIM.left=this.$buttons.offsetLeft;var f=this.firstChild;while(!f.$button)f=f.nextSibling;SCROLLANIM.size=Math.round(f.$button.offsetWidth)}this.$buttons.style.left=d;var g=this.$ext.offsetWidth,h=this.oScroller.offsetWidth+4,i=null,j;b+c>g-h-d?(i=-(b-SCROLLANIM.left)+(g-c-h),j=SCROLL_RIGHT):d+b<SCROLLANIM.left&&(i=SCROLLANIM.left-b,j=SCROLL_LEFT),i!==null?(this.setScrollerState(!0),e(SCROLL_RIGHT,j&SCROLL_RIGHT?SCROLL_DOWN:SCROLL_OFF),e(SCROLL_LEFT,j&SCROLL_LEFT?SCROLL_DOWN:SCROLL_OFF),apf.tween.clearQueue(this.$buttons,!0),apf.tween.single(this.$buttons,{steps:SCROLLANIM.steps,interval:SCROLLANIM.interval,from:d,to:i,type:"left",anim:apf.tween.NORMAL,onstop:SCROLLANIM.stopHandle,onfinish:function(){bAnimating=!1,e(SCROLL_RIGHT,SCROLL_OFF),e(SCROLL_LEFT,SCROLL_OFF)}})):bAnimating=!1},this.addEventListener("DOMNodeRemoved",function(a){var b=a.currentTarget;if(a.$doOnlyAdmin||a.relatedNode!=this||b.localName!="page")return;if((this.activepage||this.activepage==0)&&this.activepage!=-1){this.nextTabInLine&&this.set(this.nextTabInLine);if(!this.nextTabInLine&&this.$activepage==b){var c=b.nextSibling;while(c&&(!c.$first||!c.visible))c=c.nextSibling;var d=b.previousSibling;while(d&&(!d.$last||!d.visible))d=d.previousSibling;this.firstChild==b&&c&&c&&c.$first(),this.lastChild==b&&d&&d&&d.$last(),c||d?this.set(c||d):(b.$deactivate(),this.$activepage=this.activepage=this.activepagenr=null,this.setProperty("activepage",null))}else this.$scale&&this.$scaleinit();delete this.nextTabInLine}this.setProperty("length",this.getPages().length-1)}),this.addEventListener("DOMNodeInserted",function(a){var b=a.currentTarget;if(b.localName!="page"||a.relatedNode!=this||b.nodeType!=1)return;var c=this.getPages();if(!a.$beforeNode){var d,e=c;(d=e[e.length-2])&&d.$last(!0),b.$last()}var f,g=c[0];b==g&&((f=this.getPage(1))&&f.$first(!0),b.$first());if(this.$activepage){var h={};this.$findPage(this.$activepage,h),this.activepagenr!=h.position&&(parseInt(this.activepage)==this.activepage&&(this.activepage=h.position,this.setProperty("activepage",h.position)),this.activepagenr=h.position,this.setProperty("activepagenr",h.position))}else(!this.activepage&&!this.$activepage&&!b.render||b.$rendered)&&this.set(b);this.$scale&&b.visible&&!a.$isMoveWithinParent?this.$scaleinit(b,"add"):b.dispatchEvent("afteropen"),this.setProperty("length",this.getPages().length)}),this.$findPage=function(a,b){var c,d=this.childNodes;if(a.localName)for(var e=0,f=0,g=d.length;f<g;f++){c=d[f];if("page|case".indexOf(c.localName)>-1&&++e&&c==a)return b&&(b.position=e-1),c}else for(var e=0,f=0,g=d.length;f<g;f++){c=d[f];if("page|case".indexOf(c.localName)>-1&&(e++==a||c.name==a))return b&&(b.position=e-1),c}return null},this.$enable=function(){var a=this.childNodes;for(var b=0,c=a.length;b<c;b++)a[b].enable&&a[b].enable()},this.$disable=function(){var a=this.childNodes;for(var b=0,c=a.length;b<c;b++)a[b].disable&&a[b].disable()},this.addEventListener("keydown",function(a){if(!this.$hasButtons)return;var b,c=a.keyCode;switch(c){case 9:break;case 13:break;case 32:break;case 37:b=this.getPage().previousSibling;while(b&&(b.nodeType!=1||"page|case".indexOf(b.localName)==-1||!b.visible))b=b.previousSibling;b&&this.setProperty("activepage",b);break;case 39:b=this.getPage().nextSibling;while(b&&(b.nodeType!=1||"page|case".indexOf(b.localName)==-1||!b.visible))b=b.nextSibling;b&&this.setProperty("activepage",b);break;default:return}},!0),this.$loadChildren=function(a){var b=!1,c=this,d,e,f,g,h;this.inited=!0,this.$hasButtons&&(this.$buttons=this.$getLayoutNode("main","buttons",this.$ext),this.$buttons.setAttribute("id",this.$uniqueId+"_buttons")),this.oPages=this.$getLayoutNode("main","pages",this.$ext);if(this.$int){this.$int=this.oPages,b=!0,h=this.childNodes;for(d=0;d<h.length;d++){g=h[d];if(g.nodeType!=1)continue;g.$draw(!0),g.$skinchange&&g.$skinchange(),g.$loadAml()}}else this.$int=this.oPages,h=this.getPages(),h.length&&(h[0].$first(),(g=h[h.length-1]).$last());g?(this.activepage=(typeof this.activepage!="undefined"?this.activepage:this.activepagenr)||0,b=this.getPage(this.activepage),(!b.render||b.$rendered)&&this.$propHandlers.activepage.call(this,this.activepage)):this.isPages=!1,this.setProperty("length",this.getPages().length),this.ready=!0,!this.activepage&&this.getAttribute("src")&&(this.src=this.getAttribute("src"),this.$propHandlers.activepage.call(this))},this.$destroy=function(a){if(a||!this.oScroller)return}}.call(apf.BaseTab.prototype=new apf.Presentation),apf.BaseTree=function(){this.$init(!0),this.$dynCssClasses=[],this.$nodes=[]},function(){function g(a){a.action=="move-away"&&this.$fixItem(a.xmlNode,apf.xmldb.findHtmlNode(a.xmlNode,this),!0);if(a.action!="insert")return;var b=this.$findHtmlNode(a.xmlNode.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId);if(!b)return;if(a.action=="insert"&&a.result.length>0)if(this.$hasLoadStatus(a.xmlNode,"loaded",!0)){var c=this.$getLayoutNode("item","container",b);this.slideOpen(c,a.xmlNode)}else this.$hasLoadStatus(a.xmlNode,"potential",!0)&&this.$setLoadStatus(a.xmlNode,"loaded");else this.$fixItem(a.xmlNode,b)}this.implement(apf.Rename,apf.DataAction,apf.Cache,apf.K),this.$isTreeArch=!0,this.$focussable=!0,this.multiselect=!1,this.bufferselect=!0,this.startcollapsed=!0,this.$animType=apf.tween.NORMAL,this.$animOpenStep=3,this.$animCloseStep=1,this.$animSpeed=10;var a=2,b=4,c=8,d=16,e=this.$treeState={};this.$treeState[0]="",this.$treeState[a]="min",this.$treeState[a|b]="plus",this.$treeState[c]="last",this.$treeState[c|a]="minlast",this.$treeState[c|a|b]="pluslast",this.$treeState[d]="root",this.$booleanProperties.openadd=!0,this.$booleanProperties.startcollapsed=!0,this.$booleanProperties.nocollapse=!0,this.$booleanProperties.singleopen=!0,this.$booleanProperties.animation=!0,this.$booleanProperties.prerender=!0,this.$booleanProperties.removecontainer=!0,this.$booleanProperties.dragroot=!0,this.$booleanProperties.disableremove=!0,this.$supportedProperties.push("openadd","startcollapsed","nocollapse","singleopen","prerender","removecontainer","animation","dragroot","disableremove"),this.openadd=!0,this.startcollapsed=1,this.prerender=!0,this.disableremove=!1,this.expandAll=function(){if(!this.xmlRoot)return;var a=this.each.split("|").join("["+this.each.replace(/\|/g," or ")+"]|.//"),b=this;(function(c){var d=c.selectNodes(a);for(var e,f=0;f<d.length;f++)(e=apf.xmldb.getHtmlNode(d[f],b))&&b.slideToggle(e,1,!0),arguments.callee(d[f])})(this.xmlRoot)},this.collapseAll=function(){if(!this.xmlRoot)return;var a=this.xmlRoot.selectNodes(".//"+this.each.split("|").join("["+this.each.replace(/\|/g," or ")+"]|.//"));for(var b,c=a.length-1;c>=0;c--)(b=apf.xmldb.getHtmlNode(a[c],this))&&this.slideToggle(b,2,!0)},this.expandAndSelect=function(a){if(!this.xmlRoot)return;var b=this;(function c(a){var d=b.getTraverseParent(a);if(d==b.xmlRoot)return!0;if(!d||c(d)===!1)return!1;b.slideToggle(apf.xmldb.getHtmlNode(d,b),1,!0)})(a)!==!1&&this.select(a)},this.expandList=function(a,b){function e(a,b){var f=d.selectSingleNode(a);if(!f)return g(a);c.slideToggle(apf.xmldb.getHtmlNode(f,c),1,!0,null,function(){var h=0,i=function(){if(!c.$hasLoadStatus(d.selectSingleNode(a),"loaded")){if(++h<3)return setTimeout(function(){c.slideToggle(apf.xmldb.getHtmlNode(f,c),1,!0,null,i)},1e3);var j=b.filter(function(b){return b.indexOf(a+"/")===0});return g(a),j.forEach(function(a){g(a)}),null}g();var k=b.filter(function(b){return b.indexOf(a+"/")===0&&a.split("/").length+1===b.split("/").length});k.forEach(function(a){e(a,b)})};i()})}function g(){++f===a.length&&b()}var c=this,d=this.xmlRoot,f=0,h=a.filter(function(a){return a.split("/").length===1});h.forEach(function(b){e(b,a)})},this.selectPath=function(a){},this.slideToggle=function(a,b,c,d,e){e=typeof e=="function"?e:function(){};if(this.nocollapse||d&&this.disabled)return e();a||(a=this.$selected);if(!a)return e();var f=a.getAttribute(apf.xmldb.htmlIdTag);while(!f&&a.parentNode)f=(a=a.parentNode).getAttribute(apf.xmldb.htmlIdTag);var g=this.$getLayoutNode("item","container",a);if(!g)return e();if(apf.getStyle(g,"display")=="block"){if(b==1){e&&e();return}a.className=a.className.replace(/min/,"plus"),this.slideClose(g,apf.xmldb.getNode(a),c,e)}else{if(b==2){e&&e();return}a.className=a.className.replace(/plus/,"min"),this.slideOpen(g,apf.xmldb.getNode(a),c,e)}},this.isCollapsed=function(a){return apf.getStyle(this.$getLayoutNode("item","container",apf.xmldb.getHtmlNode(a,this)),"display")=="none"};var f={};this.slideOpen=function(a,b,c,d){function l(){b&&i.$hasLoadStatus(b,"potential")?($setTimeout(function(){a!=this.$container&&(a.style.height=a.scrollHeight+"px",a.style.overflow="hidden"),i.$extend(b,a,null,d)}),a!=this.$container&&(apf.isIE7||(a.style.height=apf.hasHeightAutoDrawBug?"100%":"auto"),a.style.overflow="visible")):a!=this.$container&&(a.style.overflow="visible",apf.isIE7||(a.style.height=apf.hasHeightAutoDrawBug?"100%":"auto"),i.dispatchEvent("expand",{xmlNode:b}))}b||(b=this.selected);var e=apf.xmldb.getHtmlNode(b,this);a||(a=this.$findContainer(e));if((!a.childNodes.length||a.firstChild.nodeType==3&&a.firstChild.nodeValue.trim()=="")&&!this.$getBindRule("insert",b)&&!this.getTraverseNodes(b).length)return d&&d();if(this.singleopen){var g=this.getTraverseParent(b),h=(g||this.xmlRoot).getAttribute(apf.xmldb.xmlIdTag);f[h]&&f[h][1]!=b&&this.getTraverseParent(f[h][1])==g&&this.slideToggle(f[h][0],2),f[h]=[e,b]}this.nocollapse||(a.style.display="block");if(!this.prerender&&this.$hasLoadStatus(b,"potential")&&!a.childNodes.length){this.$extend(b,a,c,d);return}if(c||a.scrollHeight>1e3)return!this.nocollapse&&a!=this.$container&&(a.style.height="auto",a.style.overflow="visible"),this.$hasLoadStatus(b,"potential")?this.$extend(b,a,c,d):(this.dispatchEvent("expand",{xmlNode:b}),d&&d());var i=this,j=a.style.height;a.style.overflow="visible",apf.isIE7||(a.style.height=apf.hasHeightAutoDrawBug?"100%":"auto");var k=a.scrollHeight;a.style.overflow="hidden",a.style.height=j;if(!this.getAttribute("animation")){var m=apf.getHeightDiff(a),n=a;a.style.height=Math.max(k,0)+"px",n.scrollTop=n.scrollHeight-n.offsetHeight-m-(apf.isGecko?16:0),l()}else apf.tween.single(a,{type:"scrollheight",from:a.offsetHeight,to:k,anim:this.$animType,steps:this.$animOpenStep,interval:this.$animSpeed,onfinish:function(a){l()}})},this.slideClose=function(a,b,c){if(this.nocollapse)return;b||(b=this.selected);if(this.singleopen){var d=(this.getTraverseParent(b)||this.xmlRoot).getAttribute(apf.xmldb.xmlIdTag);f[d]=null}if(!a){var e=apf.xmldb.getHtmlNode(b,this);a=this.$findContainer(e)}a!=this.$container&&(a.style.height=a.offsetHeight,a.style.overflow="hidden");if(c){a!=this.$container&&(a.style.height=0),a.style.display="none",this.dispatchEvent("collapse",{xmlNode:b});return}var g=this;apf.tween.single(a,{type:"scrollheight",from:a.scrollHeight,to:0,anim:this.$animType,steps:this.$animCloseStep,interval:this.$animSpeed,onfinish:function(a,c){a.style.display="none",g.dispatchEvent("collapse",{xmlNode:b})}})},this.$isStartCollapsed=function(a){return this.$hasBindRule("collapsed")?this.$getDataNode("collapsed",a)?!0:!1:this.$hasBindRule("expanded")?this.$getDataNode("expanded",a)?!1:!0:this.startcollapsed},this.$add=function(d,e,f,g,h,i,j,k,l){if(this.$isTreeArch&&this.$needsDepth&&typeof j=="undefined"){var m=f;j=0;while(m!=this.xmlRoot)j++,m=m.parentNode}var n=this.$getBindRule("insert",d)?!0:!1,o=this.getTraverseNodes(d),p=o.length?!0:!1,q=n||p,r=this.$isStartCollapsed(d),s=(q?a:0)|(r&&q||n?b:0)|(i?c:0),t=this.$initNode(d,s,e,j),u=this.$getLayoutNode("item","container",t),v;!r&&!this.nocollapse&&u.setAttribute("style","overflow:visible;height:auto;display:block;");var w,x=!this.removecontainer||q;(!q||n)&&u.setAttribute("style","display:none;"),this.prerender||(v=o.length),q&&!this.prerender&&v>2&&r||n&&(!this.$hasLoadStatus(d)||this.$hasLoadStatus(d,"potential"))?this.$setLoading(d,u):!p&&(w=this.$applyBindRule("empty",d))&&this.$setEmptyMessage(u,w);if((!g||g==this.$container)&&f==this.xmlRoot&&!h||l=="insert")this.$nodes.push(t),!apf.isChildOf(t,u,!0)&&x&&this.$nodes.push(u),l!="insert"&&(this.$setStyleClass(t,"root"),this.$setStyleClass(u,"root"));else{g||(g=apf.xmldb.getHtmlNode(d.parentNode,this),g=g?this.$getLayoutNode("item","container",g):this.$container),g==this.$container&&(this.$setStyleClass(t,"root"),this.$setStyleClass(u,"root"));var y;l!="load"&&l!="extend"&&!h&&(y=this.getNextTraverse(d))&&(h=apf.xmldb.getHtmlNode(y,this)),h&&h.parentNode!=g&&(h=null),g.style&&this.getTraverseNodes(d.parentNode).length==1&&this.$removeEmptyMessage(g);if(g.style){var z=!apf.isChildOf(t,u,!0);t=apf.insertHtmlNode(t,g,h);if(z&&x)var u=apf.insertHtmlNode(u,g,h);else var u=this.$getLayoutNode("item","container",t)}else g.insertBefore(t,h),!apf.isChildOf(t,u,!0)&&x&&g.insertBefore(u,h);if(g.style){this.openadd&&g!=this.$container&&g.style.display!="block"&&(this.$isStartCollapsed(f)||this.slideOpen(g,f,!0)),this.$fillParent||(this.$fillParent=f);var y=k==undefined?this.getNextTraverse(d,!0):k,A;y&&(A=apf.xmldb.getHtmlNode(y,this))&&this.$fixItem(y,A)}}return(this.prerender||v<3||!r)&&(d.namespaceURI!=apf.ns.apf||d.localName!="item")&&this.$addNodes(d,u,!1,null,null,(j||0)+1),u},this.$fill=function(){this.$useiframe&&(this.$pHtmlDoc=this.oDoc),this.$nodes.length&&(apf.insertHtmlNodes(this.$nodes,this.$fillParentHtml||this.$container),this.$nodes.length=0,delete this.$fillParentHtml),this.$fillParent&&(this.$fixItem(this.$fillParent,apf.xmldb.getHtmlNode(this.$fillParent,this)),delete this.$fillParent)},this.$getParentNode=function(a){return a?this.$getLayoutNode("item","container",a):this.$container},this.$fixItem=function(d,f,g,h,i){if(!f)return;if(g){var j;(j=this.getNextTraverse(d,!0))&&this.$fixItem(j,this.$findHtmlNode(j.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),null,!0),!this.emptyMessage&&d.parentNode.selectNodes(this.each).length==1&&this.$fixItem(d.parentNode,this.$findHtmlNode(d.parentNode.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId),null,!1,!0)}else{var k=this.$getLayoutNode("item","container",f),l=!1;i?l=!1:this.getTraverseNodes(d).length>0?l=!0:this.$hasLoadStatus(d,"potential")?l=!0:l=!1;var m=l&&apf.getStyle(k,"display")=="none";isLast=this.getNextTraverse(d,null,h?2:1)?!1:!0,state=(l?a:0)|(m?b:0)|(isLast?c:0),this.$setStyleClass(this.$getLayoutNode("item","class",f),e[state],["min","plus","last","minlast","pluslast"]),this.$setStyleClass(this.$getLayoutNode("item","container",f),e[state],["min","plus","last","minlast","pluslast"]),this.$getLayoutNode("item","openclose",f)&&this.$getLayoutNode("item","openclose",f).setAttribute("children",l),k&&(l?m||(k.style.display="block"):k.style.display="none")}},this.$deInitNode=function(a,b){var c=this.$getLayoutNode("item","container",b),d=b.parentNode;c.parentNode.removeChild(c),d.removeChild(b),this.$withContainer&&b.parentNode.removeChild(b.nextSibling),a.parentNode!=this.xmlRoot&&this.$fixItem(a,b,!0);var e;!d.childNodes.length&&(e=this.$applyBindRule("empty",a))&&this.$setEmptyMessage(d,e),this.$fixItem(a,b,!0)},this.$moveNode=function(a,b,c){if(!self.apf.debug&&!b)return;var d;if(this.$hasLoadStatus(a.parentNode,"potential")){d=this.$getLayoutNode("item","container",b),b.parentNode.removeChild(b),d.parentNode.removeChild(d),this.$extend(a.parentNode);return}var e=b.parentNode,f=this.getTraverseParent(a),g=apf.xmldb.getHtmlNode(f,this),h=this.getNextTraverse(a),i=h?apf.xmldb.getHtmlNode(h,this):null,j=g?this.$getLayoutNode("item","container",g):this.$container;d=this.$getLayoutNode("item","container",b),j!=e&&this.getTraverseNodes(a.parentNode).length==1&&this.$removeEmptyMessage(j),j.insertBefore(b,i),d&&j.insertBefore(d,i);var k;!this.getTraverseNodes(c).length&&(k=this.$applyBindRule("empty",c))&&this.$setEmptyMessage(e,k),this.$fixItem(a,b),this.$fixItem(f,apf.xmldb.getHtmlNode(f,this)),this.$updateNode(c,apf.xmldb.getHtmlNode(c,this));var l;(l=this.getNextTraverse(a,!0))&&this.$fixItem(l,apf.xmldb.getHtmlNode(l,this))},this.$setLoading=function(a,b){this.$setLoadStatus(a,"potential");var c=this.getTraverseNodes(a).length;if(!c||c>20)this.$getNewContext("loading"),apf.insertHtmlNode(this.$getLayoutNode("loading"),b)},this.$removeLoading=function(a){if(!a)return;this.$timers&&clearTimeout(this.$timers[a.getAttribute(apf.xmldb.xmlIdTag)]);var b=apf.xmldb.getHtmlNode(a,this);b&&(this.$getLayoutNode("item","container",b).innerHTML="",this.$setStyleClass(b,"",["loading"]))},this.$extend=function(a,b,c,d){if(!this.$hasLoadStatus(a,"potential"))return;var e=this.$getBindRule("insert",a),f=this,h=e&&e.match?(e.cmatch||e.compile("match"))(a):a;if(e&&h){this.$setLoadStatus(a,"loading");var f=this;(this.$timers||(this.$timers={}))[a.getAttribute(apf.xmldb.xmlIdTag)]=$setTimeout(function(){f.$setStyleClass(apf.xmldb.getHtmlNode(a,f),"loading")},100),e.get?this.getModel().$insertFrom(e.getAttribute("get"),{xmlNode:h,insertPoint:h,amlNode:this,callback:function(b,c,e){c!=apf.SUCCESS&&(f.$setLoadStatus(a,"potential"),f.$removeLoading(a),f.slideToggle(apf.xmldb.getHtmlNode(a,f),2,!0)),d&&d(b,c,e)}}):this.$applyBindRule("insert",a)&&this.insert(data,{insertPoint:h})}else this.prerender||(this.$setLoadStatus(a,"loaded"),this.$removeLoading(a),g.call(this,{action:"insert",xmlNode:a,result:this.$addNodes(a,b,!0,null,null,null,"extend"),anim:!c}))},this.addEventListener("xmlupdate",g),this.addEventListener("beforerename",function(){this.$tempsel&&(clearTimeout(this.timer),this.select(this.$tempsel),this.$tempsel=null,this.timer=null)}),this.scrollIntoView=function(a,b){var c=apf.xmldb.getHtmlNode(a,this),d;if(!c)return;d=apf.getAbsolutePosition(c,this.$container)[1],b?d<=this.$container.scrollTop&&(this.$container.scrollTop=d):d>this.$container.scrollTop+this.$container.offsetHeight&&(this.$container.scrollTop=d-this.$container.offsetHeight+c.offsetHeight)},this.addEventListener("keydown",function(a){var b=a.keyCode,c=a.ctrlKey,d=a.shiftKey,e=this.$caret||this.$selected,f,g,h,i,j,k,l,m;if(a.returnValue==-1||!e||this.renaming)return;var n=this.caret||this.selected,o=this.$container;switch(b){case 13:this.$tempsel&&this.$selectTemp(),this.ctrlselect=="enter"&&this.select(this.caret,!0),this.choose(e);break;case 32:return this.$tempsel&&this.$selectTemp(),(c||!this.isSelected(this.caret))&&this.select(this.caret,!0),!1;case 46:if(this.disableremove)return;this.$tempsel&&this.$selectTemp(),this.remove();break;case 36:return this.$setTempSelected(this.getFirstTraverseNode(),!1,d),o.scrollTop=0,!1;case 35:var p=this.getLastTraverseNode();while(!this.isCollapsed(p))p=this.getLastTraverseNode(p);return this.$setTempSelected(p,!1,d,!0),o.scrollTop=o.scrollHeight,!1;case 37:return this.$tempsel&&this.$selectTemp(),this.caret.selectSingleNode(this.each)&&!this.isCollapsed(this.caret)?this.slideToggle(this.$caret||this.$selected,2):(l=this.getTraverseParent(this.caret))&&l!=this.xmlRoot&&this.select(l),!1;case 107:case 187:case 39:this.$tempsel&&this.$selectTemp(),(this.$hasLoadStatus(this.caret,"potential")||this.getFirstTraverseNode(this.caret))&&this.slideToggle(this.$caret||this.$selected,1);break;case 109:case 189:this.getFirstTraverseNode(this.caret)&&this.slideToggle(this.$caret||this.$selected,2);break;case 38:if(!n&&!this.$tempsel)return;i=this.$tempsel?apf.xmldb.getNode(this.$tempsel):n,k=this.getNextTraverse(i,!0);if(k&&k!=i){j=this.getTraverseNodes(k);do{m=this.$getLayoutNode("item","container",this.$findHtmlNode(apf.xmldb.getID(k,this)));if(m&&apf.getStyle(m,"display")=="block"&&j.length)k=j[j.length-1];else break}while(k&&(j=this.getTraverseNodes(k)).length)}else{if(this.getTraverseParent(i)==this.xmlRoot){this.dispatchEvent("selecttop");return}k=this.getTraverseParent(i)}if(k&&k.nodeType==1)this.$setTempSelected(k,c,d,!0);else return!1;return e=apf.xmldb.getHtmlNode(k,this),g=apf.getAbsolutePosition(e,this.$container)[1]-e.offsetHeight,g<=o.scrollTop&&(o.scrollTop=g),!1;case 40:if(!n&&!this.$tempsel)return;i=this.$tempsel?apf.xmldb.getNode(this.$tempsel):n,k=this.getFirstTraverseNode(i),k&&(m=this.$getLayoutNode("item","container",this.$findHtmlNode(apf.xmldb.getID(i,this))),m&&apf.getStyle(m,"display")!="block"&&(k=null));while(!k){l=this.getTraverseParent(i);if(!l)break;var q=0;j=this.getTraverseNodes(l);while(j[q]&&j[q]!=i)q++;k=j[q+1],i=l}if(k&&k.nodeType==1)this.$setTempSelected(k,c,d);else return!1;return e=apf.xmldb.getHtmlNode(k,this),g=apf.getAbsolutePosition(e,this.$container)[1]+e.offsetHeight,g>o.scrollTop+o.offsetHeight&&(o.scrollTop=g-o.offsetHeight),!1;case 33:f=apf.getAbsolutePosition(this.$container),h=document.elementFromPoint(f[0]+this.$container.offsetWidth-2,f[1]+2),k=apf.xmldb.findXmlNode(h),k==this.selected&&(o.scrollTop-=o.offsetHeight-apf.getHeightDiff(o),h=document.elementFromPoint(f[0]+this.$container.offsetWidth-2,f[1]+2),k=apf.xmldb.findXmlNode(h)),this.select(k),e=apf.xmldb.getHtmlNode(k,this),g=apf.getAbsolutePosition(e,this.$container)[1]-e.offsetHeight,g<=o.scrollTop&&(o.scrollTop=g);break;case 34:f=apf.getAbsolutePosition(this.$container),h=document.elementFromPoint(f[0]+this.$container.offsetWidth-2,f[1]+this.$ext.offsetHeight-4),k=apf.xmldb.findXmlNode(h),k==this.selected&&(o.scrollTop+=o.offsetHeight-apf.getHeightDiff(o),h=document.elementFromPoint(f[0]+this.$container.offsetWidth-2,f[1]+this.$ext.offsetHeight-4),k=apf.xmldb.findXmlNode(h)),this.select(k),e=apf.xmldb.getHtmlNode(k,this),g=apf.getAbsolutePosition(e,this.$container)[1]+e.offsetHeight,g>o.scrollTop+o.offsetHeight&&(o.scrollTop=g-o.offsetHeight);break;default:if(this.celledit){!c&&!a.altKey&&(b>46&&b<112||b>123)&&this.startRename(null,!0);return}if(b==65&&c)return this.selectAll(),!1;if(this.caption||(this.bindingRules||{}).caption){if(!this.xmlRoot)return;if(!this.lookup||(new Date).getTime()-this.lookup.date.getTime()>300)this.lookup={str:"",date:new Date};this.lookup.str+=String.fromCharCode(b);var j=this.getTraverseNodes();for(var r,q=0;q<j.length;q++){r=this.$applyBindRule("caption",j[q]);if(r&&r.substr(0,this.lookup.str.length).toUpperCase()==this.lookup.str){this.isSelected(j[q])||this.select(j[q]),e&&(this.$container.scrollTop=e.offsetTop-(this.$container.offsetHeight-e.offsetHeight)/2);return}}return}}},!0),this.$getCaptionElement=function(){if(!this.$selected)return!1;var a=this.$getLayoutNode("item","caption",this.$selected);return a.nodeType==1?a:a.parentNode},this.$calcSelectRange=function(a,b){var c=[],d=!1,e=0,f=this.getTraverseParent(a),g=this.getTraverseParent(b),h=this.getTraverseNodes(f);for(;e<h.length;e++)h[e]==a&&(d=!0),d&&c.push(h[e]),h[e]==b&&(d=!1);if(!c.length||d){c=[];for(d=!1,e=h.length-1;e>=0;e--)h[e]==a&&(d=!0),d&&c.push(h[e]),h[e]==b&&(d=!1)}return c},this.$findContainer=function(a){return this.$getLayoutNode("item","container",a)},this.$selectDefault=function(a){var b=this.getFirstTraverseNode(a);if(!b)return;if(this.select(b,null,null,null,!0))return!0;var c=this.getTraverseNodes(a);for(var d=0;d<c.length;d++)if(this.$selectDefault(c[d]))return!0},this.$setEmptyMessage=function(a,b){this.$getNewContext("empty");var c=this.$getLayoutNode("empty");if(!c)return;var d=apf.insertHtmlNode(c,a);d.setAttribute("empty","true");var e=this.$getLayoutNode("empty","caption",d);e&&apf.setNodeValue(e,b||""),a.style?this.slideOpen(a,null,!0):this.nocollapse?a.setAttribute("style","display:inline-block;"):a.setAttribute("style","overflow:visible;height:auto;display:block;")},this.$removeEmptyMessage=function(a){var b=a.firstElementChild||a.firstChild;if(!b)return;do{if(b.getAttribute&&b.getAttribute("empty")){a.removeChild(b);return}b=b.nextSibling}while(b)},this.$drawBase=function(){this.$ext=this.$getExternal(),this.$container=this.$getLayoutNode("main","container",this.$ext),this.opencloseaction=this.$getOption("main","openclose"),apf.hasCssUpdateScrollbarBug&&!this.mode&&this.$fixScrollBug();var a=this;this.$ext.onclick=function(b){a.dispatchEvent("click",{htmlEvent:b||event})},this.$ext.onmousedown=function(b){a.dispatchEvent("mousedown",{htmlEvent:b||event})},this.$ext.onmouseover=function(b){a.dispatchEvent("mouseover",{htmlEvent:b||event})},this.$ext.onmouseout=function(b){a.dispatchEvent("mouseout",{htmlEvent:b||event})},this.$ext.onmousemove=function(b){a.dispatchEvent("mousemove",{htmlEvent:b||event})}},this.addEventListener("DOMNodeInsertedIntoDocument",function(){this.nocollapse?this.startcollapsed=!1:this.startcollapsed===1&&(this.startcollapsed=!apf.isFalse(this.$getOption("main","startcollapsed")))}),this.addEventListener("DOMNodeRemovedFromDocument",function(){this.$ext.onclick=null,apf.destroyHtmlNode(this.oDrag),this.oDrag=null})}.call(apf.BaseTree.prototype=new apf.MultiSelect),apf.__DELAYEDRENDER__=2048,apf.DelayedRender=function(){this.$regbase=this.$regbase|apf.__DELAYEDRENDER__,this.$rendered=!1,this.$render=function(a){if(this.$rendered)return;if(this.dispatchEvent("beforerender")===!1)return;this["render-delay"]||a?$setTimeout("apf.lookup("+this.$uniqueId+").$renderparse()",10):this.$renderparse()},this.$renderparse=function(){if(this.$rendered)return;this.$ext.style.visibility="hidden";var a=this.ownerDocument.$domParser;a.parseFromXml(this.$aml,{amlNode:this,doc:this.ownerDocument,delayedRender:!0}),a.$continueParsing(this),this.$rendered=!0,this.dispatchEvent("afterrender"),this.$ext.style.visibility=""};var a;this.addEventListener("prop.visible",a=function(){arguments[0].value&&(this.$render(),this.removeEventListener("prop.visible",a))})},apf.GuiElement.propHandlers.render=function(a){!this.hasFeature(apf.__DELAYEDRENDER__)&&a=="runtime"&&(this.implement(apf.DelayedRender),this.localName!="page"&&(this.visible=!1,this.$ext.style.display="none"),typeof this["render-delay"]=="undefined"&&this.$setInheritedAttribute("render-delay"))},apf.config.$inheritProperties["render-delay"]=1,apf.__DRAGDROP__=32,apf.DragDrop=function(){function a(){this.$dragInited=!1,this.$ext.onmousedown=this.$ext.onmousemove=this.$ext.onmouseup=null,document.elementFromPointRemove&&document.elementFromPointRemove(this.$ext)}this.$regbase=this.$regbase|apf.__DRAGDROP__,this.$dragInited=!1,this.copy=function(a,b,c,d){a.nodeType&&(a=[a]);var e,f=[],g=0,h=a.length;for(;g<h;g++)f.push({action:d?"moveNode":"appendChild",args:[b,d?a[g]:a[g]=a[g].cloneNode(!0),c]});return this.$actions[d?"movegroup":"copygroup"]?e=this.$executeAction("multicall",f,d?"movegroup":"copygroup",a[0]):e=this.$executeAction("multicall",f,d?"move":"copy",a[0],null,null,a.length>1?a:null),e!==!1?a:!1},this.move=function(a,b,c){return this.copy(a,b,c,!0)},this.isDragAllowed=function(a,b){if(!this.dragroot&&this.xmlRoot.firstChild==a[0])return!1;if(this.disabled||!a||!a.length||!a[0])return!1;if(this.drag||this.dragcopy)return b&&b.merge(a),!0;var c,d=[],e=0,f=a.length;for(;e<f;e++){c=this.$getDataNode("drag",a[e],null,d);if(!c)return!1;b&&b.push(c)}return d.length?d:!1},this.isDropAllowed=function(a,b){if(this.disabled||!a||!a.length||!b)return!1;if(!this.dragroot==0&&this.xmlRoot.firstChild==a[0])return!1;var c,d,e=this.$attrBindings&&this.$attrBindings.drop;this.drop&&(!e||e.value=="true")&&(this.$setDynamicProperty("drop",this.hasFeature(apf.__MULTISELECT__)?"["+this.each+"]":"[node()]"),e=!0);if(e){for(var f=0,g=a.length;f<g;f++){c=this.$getDataNode("drop",a[f]);if(!c)break}if(f==g&&b&&!apf.isChildOf(c,b,!0))return[b,null]}var h=this.$bindings.drop;if(!h||!h.length)return!1;var i,j,k=0,l=h.length;for(;k<l;k++){i=this.$bindings.getRuleIndex("drop",k);for(var f=0,g=a.length;f<g;f++){c=i.cvalue?i.cvalue(a[f]):i.cmatch(a[f]);if(!c)break}if(f!=g)continue;j=i.target,!j||j=="."?d=b:d=(i.ctarget||i.compile("target"))(b);if(d&&!apf.isChildOf(c,d,!0))return[d,i]}return!1},this.$dragDrop=function(a,b,c,d,e,f,g,h){if(i=="tree-append"&&e)return!1;var i=c&&c.action;i?i=(c.caction||c.compile("action"))(b[0]):i=d,g||(g={});var j={internal:apf.DragServer.dragdata&&apf.DragServer.dragdata.host==this,ctrlKey:g.ctrlKey,keyCode:g.keyCode},k=c&&c.copy;if(typeof h=="boolean")k=h;else if(k)j.event=g||{},k=!apf.isFalse((c.ccopy||c.compile("copy"))(b[0],j));else if(typeof this.dragcopy=="boolean"||typeof this.dropcopy=="boolean")if(this.dropcopy)k=this.dropcopy;else if(this.dragcopy)k=g.ctrlKey;else{var l=this.$attrBindings&&this.$attrBindings.dragcopy;l&&(k=!apf.isFalse((l.cvalue2||l.compile("value",{withopt:!0}))(b[0],j)))}if(!k&&f)for(var m=0,n=f.length;m<n;m++){k=typeof f[m]=="object"&&f[m].copy?!apf.isFalse((f[m].ccopy||f[m].compile("copy"))(b[0],j)):g.ctrlKey;if(k)break}var o,p=k?"copy":"move",q=c?c.getAttribute("parent"):null;switch(i){case"list-append":a=e?a:this.getTraverseParent(a),q&&(a.selectSingleNode(q)?a=a.selectSingleNode(q):(a.appendChild(a.ownerDocument.createElement(q)),a=a.selectSingleNode(q))),o=this[p](b,a);break;case"insert-before":o=e?this[p](b,a):this[p](b,a.parentNode,a);break;case"tree-append":q&&(a.selectSingleNode(q)?a=a.selectSingleNode(q):(a.appendChild(a.ownerDocument.createElement(q)),a=a.selectSingleNode(q))),o=this[p](b,a)}return this.selectable&&o&&(this.selectList(o),this.setCaret(o[0]),this.focus()),o},this.enableDragDrop=function(){this.icoAllowed="",this.icoDenied="",this.$ext.dragdrop=!1;var a=this;this.$ext[apf.isIphone?"ontouchstart":"onmousedown"]=function(b){if(a.disabled)return;b=b||window.event;var c,d=b.originalTarget||b.srcElement||b.target,e=a.hasFeature(apf.__MULTISELECT__);if(e&&d==a.$container)return;a.dragging=0;try{if(!apf.isIphone&&a.allowdeselect&&(d==this||d.getAttribute(apf.xmldb.htmlIdTag)&&a.$getLayoutNode("item","select",this)!=this))return}catch(b){return}a.$findValueNode&&(c=a.$findValueNode(d));var f=c?apf.xmldb.getNode(c):apf.xmldb.findXmlNode(d);if(e&&(!a.selected||!f||f==a.xmlRoot))return;a.isDragAllowed(e?a.$getSelection():f)&&apf.DragServer.start(a,d,b)},this.$ext[apf.isIphone?"ontouchmove":"onmousemove"]=function(b){if(this.host.dragging!=1||a.disabled)return},this.$ext.onmouseup=function(){if(a.disabled)return;this.host.dragging=0},this.$ext.ondragcopy=this.$ext.ondragstart=function(){return!1},document.elementFromPointAdd&&document.elementFromPointAdd(this.$ext),this.$initDragDrop&&!this.$dragInited?(this.$initDragDrop(),this.$dragInited=2):this.$dragInited=!0},this.implement(this.hasFeature(apf.__MULTISELECT__)?apf.MultiselectDragDrop:apf.StandardDragDrop),this.$supportedProperties.push("drop","drag","dragcopy"),this.$propHandlers.dragcopy=this.$propHandlers.dropcopy=this.$propHandlers.drag=this.$propHandlers.drop=function(b,c){this[c]=apf.isTrue(b);if(this.$dragInited&&c=="drag"&&b&&this.$dragInited!=2){this.$initDragDrop(),this.$dragInited=2;return}if(c=="dragcopy"||c=="dropcopy")return;!b&&!this.drag&&!this.drop&&!this.$bindings&&this.$attrBindings&&(!this.$attrBindings.drag||!this.$attrBindings.drop)?a.call(this):b&&!this.$dragInited&&this.enableDragDrop()},this.addEventListener("DOMNodeRemovedFromDocument",function(b){a.call(this),this.oDrag&&(apf.destroyHtmlNode(this.oDrag),this.oDrag=null)})},apf.GuiElement.propHandlers.dragcopy=apf.GuiElement.propHandlers.dropcopy=apf.GuiElement.propHandlers.drop=apf.GuiElement.propHandlers.drag=function(a,b){apf.isFalse(a)||(this.hasFeature(apf.__DRAGDROP__)||(this.implement(apf.DragDrop),this.enableDragDrop()),this[b]=apf.isTrue(a))},apf.DragServer={Init:function(){apf.addEventListener("hotkey",function(a){if(apf.window.dragging&&a.keyCode==27)return document.body.lastHost&&document.body.lastHost.dragOut&&document.body.lastHost.dragOut(apf.dragHost),apf.DragServer.stopdrag()})},start:function(a,b,c,d){document.elementFromPointReset&&document.elementFromPointReset(),a.dragging=1;var e=window.document;e=!e.compatMode||e.compatMode=="CSS1Compat"?e.html||e.documentElement:e.body;var f=apf.isIE?e.scrollLeft:window.pageXOffset,g=apf.isIE?e.scrollTop:window.pageYOffset,h=a.$ext.offsetParent,i;while(h&&h!=e&&h.tagName!="BODY")f-=h.scrollLeft,g-=h.scrollTop,h=h.offsetParent;if(!b&&d)i=[0,0];else{var j=b,k;while(j&&j.nodeType==1&&!(k=j.getAttribute(apf.xmldb.htmlIdTag)))j=j.parentNode;if(!k)return;i=apf.getAbsolutePosition(j)}apf.DragServer.coordinates={srcElement:b,doc:e,scrollX:f,scrollY:g,offsetX:c.clientX-i[0],offsetY:c.clientY-i[1],clientX:c.pageX?c.pageX-window.pageXOffset:c.clientX,clientY:c.pageY?c.pageY-window.pageYOffset:c.clientY};var l=d||a.hasFeature(apf.__MULTISELECT__)?a.getSelection():[a.xmlRoot],m=[],n=a.isDragAllowed(l,m);if(!n)return;a.hasEventListener("dragdata")&&(m=a.dispatchEvent("dragdata",{data:m})),this.dragdata={rules:n,selection:l,data:m,indicator:a.$showDragIndicator(l,this.coordinates),host:a};if(a.dispatchEvent("dragstart",this.dragdata)===!1)return!1;a.dragging=2,apf.dragMode=!0,document.onmousemove=this.onmousemove,document.onmouseup=this.onmouseup},stop:function(a,b,c){this.last&&this.dragout(),this.dragdata.host.dispatchEvent("dragstop",apf.extend(this.dragdata,{success:b})),this.dragdata.host.dragging=0,this.dragdata.host.$hideDragIndicator(b),apf.dragMode=!1,document.onmousemove=document.onmouseup=null,this.dragdata=null},dragover:function(a,b,c){function f(b){return a.isDropAllowed&&a.xmlRoot?a.isDropAllowed(d.dragdata.data,b):apf.isTrue(apf.getInheritedAttribute(a,"",function(b){if(b.drop)return a=b,a==apf.DragServer.last?!1:!0}))}var d=this,e=b;c=c||window.event;var g;a.$findValueNode&&(g=a.$findValueNode(b));if(this.lastFel&&this.lastFel==g||!this.lastFel&&this.last==a)return;var h=g?apf.xmldb.getNode(g):apf.xmldb.findXmlNode(b),i=f(h||a.xmlRoot);this.last&&this.last!=a&&this.dragout(this.last,c),this.last=a,this.lastFel=g;if(!i){if(!a||!a.$dragover)return;var j=(h||a.xmlRoot).parentNode;if(!j||!(b=apf.xmldb.findHtmlNode(j,a)))return;a.$findValueNode&&(g=a.$findValueNode(b)),h=g?apf.xmldb.getNode(g):apf.xmldb.findXmlNode(b),i=f(j),this.lastFel=b;if(!i)return}a.dispatchEvent("dragover",this.dragdata,{target:h||a.xmlRoot,lastEl:a.lastel,originalEl:e})===!1&&(i=!1);var k=c.originalTarget||c.srcElement||c.target;a&&a.$dragover&&a.$dragover(b,this.dragdata,i)},dragout:function(a,b){this.lastFel=null,a&&(this.dragdata.htmlEvent=b,a.dispatchEvent("dragout",this.dragdata)),this.last&&this.last.$dragout&&this.last.$dragout(null,this.dragdata),this.last=null},dragdrop:function(a,b,c,d){function f(b){return a.isDropAllowed&&a.xmlRoot?a.isDropAllowed(e.dragdata.data,b):apf.isTrue(apf.getInheritedAttribute(a,"",function(b){if(b.drop)return a=b,!0}))}var e=this,g,h,i=a.$findValueNode?apf.xmldb.getNode(a.$findValueNode(b)):apf.xmldb.findXmlNode(b),j=f(i||a.xmlRoot);this.dragdata.indicator&&(h=this.dragdata.indicator.style.top,this.dragdata.indicator.style.top="10000px");if(!j&&a&&a.$dragover){var k=(i||a.xmlRoot).parentNode,l;k&&(l=apf.xmldb.findHtmlNode(k,a))&&(j=f(k),b=l)}if(j)if(a.dispatchEvent("dragdrop",apf.extend({candrop:j,htmlEvent:d,top:h},this.dragdata))===!1)j=!1;else{if(!a.xmlRoot){var m=a.getModel?a.getModel(!0):apf.nameserver.get("model",a.model);return m&&m.load(this.dragdata.data[0]),!0}var n=j[1]&&j[1].action||(a.$isTreeArch?"tree-append":"list-append");n=="list-append"&&!a.$isTreeArch&&a==this.dragdata.host&&(j=!1)}this.dragdata.indicator&&(this.dragdata.indicator.style.top=h);if(!j)return this.dragout(a,d),!1;if(a.$dragDrop){var o=a.$dragDrop(j[0],this.dragdata.data,j[1],n,g||j[0]==a.xmlRoot,this.dragdata.rules,d);this.dragdata.resultNode=o}return a.$dragdrop&&a.$dragdrop(b,apf.extend({htmlEvent:d,xmlNode:o},this.dragdata),j),this.last=null,this.lastFel=null,!0},onmousemove:function(a){if(!apf.DragServer.dragdata)return;a=a||window.event;var b=apf.DragServer.dragdata,c={clientX:a.pageX?a.pageX-window.pageXOffset:a.clientX,clientY:a.pageY?a.pageY-window.pageYOffset:a.clientY};if(!b.started&&Math.abs(apf.DragServer.coordinates.clientX-c.clientX)<6&&Math.abs(apf.DragServer.coordinates.clientY-c.clientY)<6)return;b.started||(b.host.$dragstart&&b.host.$dragstart(null,b),b.started=!0);if(b.indicator){var d=b.indicator.style.top;b.indicator.style.display="block",b.indicator.style.top="10000px"}apf.DragServer.dragdata.x=a.pageX?a.pageX-(apf.isIE?0:window.pageXOffset):c.clientX,apf.DragServer.dragdata.y=a.pageY?a.pageY-(apf.isIE?0:window.pageYOffset):c.clientY;var e=document.elementFromPoint(apf.DragServer.dragdata.x,apf.DragServer.dragdata.y);e||(e=document.elementFromPoint(apf.DragServer.dragdata.x,apf.DragServer.dragdata.y)),b.indicator&&(b.indicator.style.top=d),b.host.$moveDragIndicator(c);var f=apf.findHost(e);f?apf.DragServer.dragover(f,e,a):apf.DragServer.last&&apf.DragServer.dragout(apf.DragServer.last,a),apf.DragServer.lastTime=(new Date).getTime()},onmouseup:function(a){a=a||window.event;var b={clientX:a.pageX?a.pageX-window.pageXOffset:a.clientX,clientY:a.pageY?a.pageY-window.pageYOffset:a.clientY};if(!apf.DragServer.dragdata.started&&Math.abs(apf.DragServer.coordinates.clientX-b.clientX)<6&&Math.abs(apf.DragServer.coordinates.clientY-b.clientY)<6){apf.DragServer.stop(!0,null,a);return}var c=apf.DragServer.dragdata.indicator,d=c.style.top;c&&(c.style.top="10000px"),apf.DragServer.dragdata.x=a.pageX?a.pageX-(apf.isIE?0:window.pageXOffset):b.clientX,apf.DragServer.dragdata.y=a.pageY?a.pageY-(apf.isIE?0:window.pageYOffset):b.clientY;var e=document.elementFromPoint(apf.DragServer.dragdata.x,apf.DragServer.dragdata.y);e||(e=document.elementFromPoint(apf.DragServer.dragdata.x,apf.DragServer.dragdata.y)),c.style.top=d;var f=apf.findHost(e);apf.DragServer.host&&f!=apf.DragServer.host&&apf.DragServer.dragout(apf.DragServer.host,a);var g=apf.DragServer.dragdrop(f,e,apf.DragServer.dragdata.host,a);apf.DragServer.stop(!0,g,a)}},apf.MultiselectDragDrop=function(){this.diffX=this.diffY=0,this.multiple=!1,this.lastDragNode=null,this.lastel=null,this.$showDragIndicator=function(a,b){var c=b.originalTarget||b.srcElement||b.target;this.multiple=a.length>1;if(this.multiple)this.diffX=b.scrollX,this.diffY=b.scrollY;else{var d=apf.xmldb.findHtmlNode(a[0],this);this.diffX=-1*(b.offsetX-parseInt(apf.getStyleRecur(d,"padding-left").replace(/px$/,"")-10)),this.diffY=-1*b.offsetY}var e=this.oDrag.className.split(" ")[0];this.$setStyleClass(this.oDrag,(this.multiple?e+"_multiple":"")+(this["class"]?" "+this["class"]:""),[e+"_multiple"]);if(this.multiple)return document.body.appendChild(this.oDrag),this.oDrag;if(this.localName=="datagrid"){this.lastDragNode&&apf.destroyHtmlNode(this.lastDragNode),a=this.$selected||this.$caret;var f=a.cloneNode(!0);f.removeAttribute("onmousedown"),f.onmousedown=null,f.removeAttribute("onmouseup"),f.onmouseup=null,f.removeAttribute("onmouseout"),f.onmouseout=null,f.removeAttribute("ondblclick"),f.ondblclick=null,document.body.appendChild(f),f.style.position="absolute",f.style.width=a.offsetWidth+"px",f.style.display="none",f.removeAttribute("id"),this.$setStyleClass(f,"draggrid");var g=a.childNodes,h=f.childNodes;for(var i=g.length-1;i>=0;i--)h[i].nodeType==1&&(h[i].style.width=apf.getStyle(g[i],"width"));return this.lastDragNode=f}var a=this.$selected||this.$caret,j=apf.getStyle(this.oDrag,"width");if(!a)return;if(!j||j=="auto")this.oDrag.style.width=a.offsetWidth-apf.getWidthDiff(this.oDrag)+"px";return this.$updateNode(this.selected,this.oDrag),apf.window.zManager.set("drag",this.oDrag),this.oDrag},this.$hideDragIndicator=function(a){var b=this.lastDragNode||this.oDrag,c=this;if(!this.multiple&&!a&&b.style.display=="block"){if(!this.$selected&&!this.$caret)return;var d=apf.getAbsolutePosition(this.$selected||this.$caret);apf.tween.multi(b,{anim:apf.tween.easeInOutCubic,steps:apf.isIE?15:20,interval:15,tweens:[{type:"left",from:b.offsetLeft,to:d[0]+parseInt(apf.getStyleRecur(this.$selected,"padding-left").replace(/px$/,""))},{type:"top",from:b.offsetTop,to:d[1]}],onfinish:function(){c.lastDragNode?(apf.destroyHtmlNode(c.lastDragNode),c.lastDragNode=null):c.oDrag.style.display="none"}})}else this.lastDragNode?(apf.destroyHtmlNode(this.lastDragNode),this.lastDragNode=null):this.oDrag.style.display="none"},this.$moveDragIndicator=function(a){var b=this.lastDragNode||this.oDrag;b.style.left=a.clientX+this.diffX+"px",b.style.top=a.clientY+this.diffY+(this.multiple?15:0)+"px"},this.addEventListener("$skinchange",function(){this.$initDragDrop()}),this.$initDragDrop=function(){if(!this.$hasLayoutNode("dragindicator"))return;this.oDrag=apf.insertHtmlNode(this.$getLayoutNode("dragindicator"),document.body),apf.window.zManager.set("drag",this.oDrag),this.oDrag.style.position="absolute",this.oDrag.style.cursor="default",this.oDrag.style.display="none"},this.$findValueNode=function(a){if(!a)return null;while(a&&a.nodeType==1&&!a.getAttribute(apf.xmldb.htmlIdTag))this.$isTreeArch&&a.previousSibling&&a.previousSibling.nodeType==1?a=a.previousSibling:a=a.parentNode;return a&&a.nodeType==1&&a.getAttribute(apf.xmldb.htmlIdTag)?a:null},this.$dragout=function(a,b,c){this.lastel&&this.$setStyleClass(this.lastel,"",["dragDenied","dragInsert","dragAppend","selected","indicate"]);var d=this.$getSelection(!0);for(var e=0,f=d.length;e<f;e++)this.$setStyleClass(d[e],"selected",["dragDenied","dragInsert","dragAppend","indicate"]);this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Drop"]),this.lastel=null},this.$dragdrop||(this.$dragdrop=this.$dragout),this.$dragover=function(a,b,c){this.$setStyleClass(this.$ext,this.$baseCSSname+"Drop");var d=this.$getSelection(!0);for(var e=0,f=d.length;e<f;e++)this.$setStyleClass(d[e],"",["dragDenied","dragInsert","dragAppend","selected","indicate"]);this.lastel&&this.$setStyleClass(this.lastel,"",["dragDenied","dragInsert","dragAppend","selected","indicate"]);var g=c[1]&&c[1].action;this.lastel=this.$findValueNode(a);if(this.$isTreeArch&&g=="list-append"){var h=apf.xmldb.findHtmlNode(this.getTraverseParent(apf.xmldb.getNode(this.lastel)),this);this.lastel=h?this.$getLayoutNode("item","container",h):this.$container,this.$setStyleClass(this.lastel,"dragInsert")}else this.$setStyleClass(this.lastel,c?g=="insert-before"?"dragInsert":"dragAppend":"dragDenied")}},apf.StandardDragDrop=function(){this.$showDragIndicator=function(a,b){var c=b.offsetX+22,d=b.offsetY;this.oDrag.startX=c,this.oDrag.startY=d,document.body.appendChild(this.oDrag);var e=this.$getLayoutNode("main","caption",this.oDrag);return e.nodeType!=1&&(e=e.parentNode),e.innerHTML=this.$applyBindRule("caption",this.xmlRoot)||"",this.oDrag},this.$hideDragIndicator=function(){this.oDrag.style.display="none"},this.$moveDragIndicator=function(a){this.oDrag.style.left=a.clientX-this.oDrag.startX+document.documentElement.scrollLeft+"px",this.oDrag.style.top=a.clientY-this.oDrag.startY+document.documentElement.scrollTop+"px"},this.$initDragDrop=function(){if(!this.getAttribute("drag"))return;this.oDrag=document.body.appendChild(this.$ext.cloneNode(!0)),apf.window.zManager.set("drag",this.oDrag),this.oDrag.style.position="absolute",this.oDrag.style.cursor="default",this.oDrag.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=50)",this.oDrag.style.MozOpacity=.5,this.oDrag.style.opacity=.5,this.oDrag.style.display="none"}},apf.DragServer.Init(),apf.__FOCUSSABLE__=1<<26,apf.Focussable=function(){this.$regbase=this.$regbase|apf.__FOCUSSABLE__,this.disabled==undefined&&(this.disabled=!1),this.setTabIndex=function(a){return apf.window.$removeFocus(this),apf.window.$addFocus(this,a),this},this.focus=function(a,b,c){return a?(this.$focus&&!this.editable&&(!b||!b.mouse||this.$focussable==apf.KEYBOARD_MOUSE)&&this.$focus(b),this.dispatchEvent("focus",apf.extend({bubbles:!0},b)),this):(this.$isWindowContainer>-1?apf.window.$focusLast(this,b,!0):apf.window.$focus(this,b),this)},this.blur=function(a,b){return b&&!apf.isChildOf(b.fromElement,b.toElement)&&apf.popup.isShowing(this.$uniqueId)&&apf.popup.forceHide(),this.$blur&&this.$blur(b),a||apf.window.$blur(this),this.dispatchEvent("blur",apf.extend({bubbles:!b||!b.cancelBubble},b)),this},this.hasFocus=function(){return apf.document.activeElement==this||this.$isWindowContainer&&(apf.document.activeElement||{}).$focusParent==this}},apf.__INTERACTIVE__=1<<21,apf.Interactive=function(){function I(c,d){c||(c=event);if(!d&&(!z.draggable||apf.dragMode))return;E=!1;if(z.dispatchEvent("beforedragstart",{htmlEvent:c})===!1)return;apf.dragMode=!0,d?(z.dispatchEvent("beforedrag"),D=!0):D=!1,apf.popup.forceHide(),A="absolute|fixed".indexOf(apf.getStyle(z.$ext,"position"))>-1,A||(z.$ext.style.position=A?"absolute":"relative"),z.editable&&(A=!0),A&&!z.aData&&apf.plane.show(E?W:z.$ext,c.reappend);var e=(d||W&&W.self)&&E?W:z.$ext,f=A?apf.getAbsolutePosition(e,e.offsetParent,!0):[parseInt(apf.getStyle(e,"left"))||0,parseInt(apf.getStyle(e,"top"))||0];return H=[e.style.left,e.style.top,e.style.right,e.style.bottom,e.style.width,e.style.height],a=f[0]-(B=c.clientX),b=f[1]-(C=c.clientY),d||W&&W.self||(z.$ext.style.right&&(z.$ext.style.left=f[0]+"px",z.$ext.style.right=""),z.$ext.style.bottom&&(z.$ext.style.top=f[1]+"px",z.$ext.style.bottom="")),document.onmousemove=J,document.onmouseup=function(a,b){document.onmousemove=document.onmouseup=null,A&&!z.aData&&apf.plane.hide();var c=E?W:z.$ext;if(D&&!z.$multidrag)if(b){var d=z.$ext;d.style.left=H[0],d.style.top=H[1],d.style.right=H[2],d.style.bottom=H[3],d.style.width=H[4],d.style.height=H[5],z.dispatchEvent&&z.dispatchEvent("dragcancel",{htmlNode:c,htmlEvent:a})}else z.setProperty?L():E&&(z.$ext.style.left=g+"px",z.$ext.style.top=h+"px");g=h=o=p=null,A||(z.$ext.style.position="relative"),z.showdragging&&apf.setStyleClass(z.$ext,"",["dragging"]),A&&E&&!W.self&&(W.style.display="none"),apf.dragMode=!1,!b&&z.dispatchEvent&&D&&z.dispatchEvent("afterdrag",{htmlNode:c,htmlEvent:a})},d&&document.onmousemove(c),!1}function J(c){c||(c=event),!D&&z.showdragging&&apf.setStyleClass(z.$ext,"dragging");var d=c.clientX-B,e=c.clientY-C,f;if(!D&&(f=d*d>e*e?d:e)*f<2)return;if(!D){E&&W.style.display!="block"&&(W.style.display="block");if(z.dispatchEvent&&z.dispatchEvent("beforedrag",{htmlEvent:c})===!1){document.onmouseup();return}}var i=E?W:z.$ext;i.style.left=(g=c.clientX+a)+"px",i.style.top=(h=c.clientY+b)+"px";if(z.realtime){var j=z.$stick={};z.$showDrag(g,h,i,c,j),typeof j.l!="undefined"&&(g=j.l,i.style.left=g+"px"),typeof j.t!="undefined"&&(h=j.t,i.style.top=h+"px")}D=!0}function K(a,b){a||(a=event);if(!z.resizable||String(z.height).indexOf("%")>-1&&z.parentNode.localName=="vbox"||String(z.width).indexOf("%")>-1&&z.parentNode.localName=="hbox")return;F=!1;var i=z.$ext;if(!F){var j=apf.getDiff(i);y=j[0],x=j[1]}e=apf.getAbsolutePosition(i),e.push(i.offsetWidth),e.push(i.offsetHeight),G=apf.getAbsolutePosition(i,i.offsetParent,!0),H=[i.style.left,i.style.top,i.style.right,i.style.bottom,i.style.width,i.style.height];var u=0,v=0,w=(B=a.clientX)-e[0]+u+document.documentElement.scrollLeft,E=(C=a.clientY)-e[1]+v+document.documentElement.scrollTop,I;b&&b.resizeType?(A="absolute|fixed".indexOf(apf.getStyle(i,"position"))>-1,I=b.resizeType):I=S.call(i,w,E),c=w,d=E;if(!I)return;if(z.dispatchEvent&&z.dispatchEvent("beforeresize",{type:I,setType:function(a){I=a}})===!1)return;apf.popup.forceHide(),apf.dragMode=!0,D=!1,q=I.indexOf("w")>-1,r=I.indexOf("n")>-1,s=I.indexOf("e")>-1,t=I.indexOf("s")>-1,z.minwidth||(z.minwidth=0),z.minheight||(z.minheight=0),z.maxwidth||(z.maxwidth=1e4),z.maxheight||(z.maxheight=1e4),A&&(k=G[0]+e[2],l=G[1]+e[3],m=G[0]+e[2],n=G[1]+e[3]),A&&apf.plane.show(F?W:i);var J;i.style.right&&(i.style.left=G[0]+"px"),i.style.bottom&&(i.style.top=G[1]+"px");if(!b||!b.nocursor)f===null&&(f=document.body.style.cursor),document.body.style.cursor=V(I)+"-resize";return document.onmousemove=Q,document.onmouseup=function(a,b){document.onmousemove=document.onmouseup=null,A&&apf.plane.hide(),clearTimeout(P);if(F){var c=apf.getDiff(z.$ext);y=c[0],x=c[1]}if(b){var d=z.$ext;d.style.left=H[0],d.style.top=H[1],d.style.right=H[2],d.style.bottom=H[3],d.style.width=H[4],d.style.height=H[5],z.dispatchEvent&&z.dispatchEvent("resizecancel")}else R(a||event,!0);z.setProperty&&L(),document.body.style.cursor=f||"",f=null,F&&(W.style.display="none"),apf.dragMode=!1,!b&&z.dispatchEvent&&z.dispatchEvent("afterresize",{l:g,t:h,w:o+y,h:p+x}),g=h=o=p=null},!1}function L(a,b,c,d,e,f,i,j){typeof a=="undefined"?(a=g,b=h,c=o,d=p,f=x,e=y):A=!0;var k=z.left||z.left===0,l=z.right||z.right===0,m=z.bottom||z.bottom===0,n=z.top||z.top===0;if(A){var q=W&&W.style.display=="block"?W:z.$ext;l&&!i&&i!==0&&(i=apf.getHtmlRight(q)),m&&!j&&j!==0&&(j=apf.getHtmlBottom(q)),l&&(z.setProperty("right",i,0,z.editable),z.left||(q.style.left="")),m&&(z.setProperty("bottom",j,0,z.editable),z.top||(q.style.top="")),(a||a===0)&&(!l||k)&&z.setProperty("left",a,0,z.editable),(b||b===0)&&(!m||n)&&z.setProperty("top",b,0,z.editable)}e!=undefined&&c&&(!k||!l)&&z.setProperty("width",c+e,0,z.editable),f!=undefined&&d&&(!n||!m)&&z.setProperty("height",d+f,0,z.editable)}function Q(a){a||(a=event),clearTimeout(P);if(O&&(new Date).getTime()-O<(F?6:apf.mouseEventBuffer)){var b={clientX:a.clientX,clientY:a.clientY};P=$setTimeout(function(){R(b)},10);return}O=(new Date).getTime(),R(a)}function R(a,b){var f=F&&!b?W:z.$ext,i=document.documentElement.scrollLeft,j=document.documentElement.scrollTop;q&&(A&&(f.style.left=(g=N(m-z.maxwidth,M(k-z.minwidth,G[0]+a.clientX-B+i)))+"px"),f.style.width=(o=M(z.maxwidth-y,N(y,z.minwidth,e[2]-(a.clientX-B)+i)-y))+"px"),r&&(A&&(f.style.top=(h=N(n-z.maxheight,M(l-z.minheight,G[1]+a.clientY-C+j)))+"px"),f.style.height=(p=M(z.maxheight-x,N(x,z.minheight,e[3]-(a.clientY-C)+j)-x))+"px"),s&&(f.style.width=(o=M(z.maxwidth-y,N(y,z.minwidth,a.clientX-e[0]+(e[2]-c)+i)-y))+"px"),t&&(f.style.height=(p=M(z.maxheight-x,N(x,z.minheight,a.clientY-e[1]+(e[3]-d)+j)-x))+"px"),z.parentNode&&z.parentNode.localName=="table"&&(L(),apf.layout.processQueue());if(z.realtime){var u=z.$stick={};z.$showResize(g||apf.getHtmlLeft(f),h||apf.getHtmlTop(f),o&&o+y||f.offsetWidth,p&&p+x||f.offsetHeight,a,u,q,r,s,t),A&&q&&typeof u.l!="undefined"&&(f.style.left=(g=N(m-z.maxwidth,M(k-z.minwidth,u.l)))+"px"),A&&r&&typeof u.t!="undefined"&&(f.style.top=(h=N(n-z.maxheight,M(l-z.minheight,u.t)))+"px"),typeof u.w!="undefined"&&(f.style.width=(o=M(z.maxwidth-y,N(y,z.minwidth,u.w)-y))+"px"),typeof u.h!="undefined"&&(f.style.height=(p=M(z.maxheight-x,N(x,z.minheight,u.h)-x))+"px")}apf.hasSingleRszEvent&&apf.layout.forceResize(z.$int)}function S(a,b){var c="",d="";A="absolute|fixed".indexOf(apf.getStyle(z.$ext,"position"))>-1;if(z.resizable=="true"||z.resizable=="vertical"||z.resizable.indexOf("top")>-1||z.resizable.indexOf("bottom")>-1)b<u+w[0]&&z.resizable.indexOf("bottom")==-1?c=A?"n":"":b>this.offsetHeight-(v||u)&&z.resizable.indexOf("top")==-1&&(c="s");if(z.resizable=="true"||z.resizable=="horizontal"||z.resizable.indexOf("left")>-1||z.resizable.indexOf("right")>-1)a<(c?v:u)+w[0]&&z.resizable.indexOf("right")==-1?c+=d+(A?"w":""):a>this.offsetWidth-(c||d?v:u)&&z.resizable.indexOf("left")==-1&&(c+=d+"e");return c}function U(a){a||(a=event);if(!z.resizable||z.editable||document.onmousemove)return;var b=apf.getAbsolutePosition(z.$ext),c=0,d=0,e=a.clientX-b[0]+c+document.documentElement.scrollLeft,f=a.clientY-b[1]+d+document.documentElement.scrollTop;T||(T=apf.getStyle(this,"cursor"));var g=S.call(z.$ext,e,f);this.style.cursor=g?V(g)+"-resize":T||"default"}function V(a){var b=a;if(apf.isWebkit)if(a=="se"||a=="nw")b="nwse";else if(a=="sw"||a=="ne")b="nesw";else if(a=="s"||a=="n")b="ns";else if(a=="e"||a=="w")b="ew";return b}var a,b,c,d,e,f=null,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=this,A,B,C,D,E,F,G,H;this.$regbase=this.$regbase|apf.__INTERACTIVE__,this.$dragStart=function(a,b){var c=a||event;if(!b&&c.button==2)return;I.apply(c.srcElement||this,arguments)},this.$propHandlers.draggable=function(a){apf.isFalse(a)?this.draggable=a=!1:apf.isTrue(a)&&(this.draggable=a=!0);var b=this.editable?this.$ext:this.oDrag||this.$ext;a?apf.addListener(b,"mousedown",this.$dragStart):apf.removeListener(b,"mousedown",this.$dragStart);if(b.interactive&1)return;b.interactive=(b.interactive||0)+1},this.$propHandlers.resizable=function(a){apf.isFalse(a)?this.resizable=!1:apf.isTrue(a)&&(this.resizable="true"),this.$ext.style.cursor="";var b=this.oResize||this.$ext;if(b.interactive&2)return;z.editable||(apf.addListener(b,"mousedown",function(){K.apply(b,arguments)}),apf.addListener(b,"mousemove",function(){U.apply(b,arguments)})),b.interactive=(b.interactive||0)+2,u=this.$getOption&&parseInt(this.$getOption("Main","resize-border"))||3,v=this.$getOption&&parseInt(this.$getOption("Main","resize-corner"))||12,w=apf.getBox(apf.getStyle(this.$ext,"borderWidth"))},this.$cancelInteractive=function(){document.onmouseup(null,!0)},this.$resizeStart=K,this.$updateProperties=L;var M=Math.min,N=Math.max,O,P,T,W},apf.GuiElement.propHandlers.resizable=function(a){this.implement(apf.Interactive),this.$propHandlers.resizable.apply(this,arguments)},apf.GuiElement.propHandlers.draggable=function(a){this.implement(apf.Interactive),this.$propHandlers.draggable.apply(this,arguments)},apf.Init.run("interactive"),apf.__MEDIA__=1<<20,apf.__MULTICHECK__=1<<22,apf.Teleport=function(){this.$init(!0)},apf.__TELEPORT__=1<<28,function(){this.$parsePrio="002",this.$regbase=this.$regbase|apf.__TELEPORT__,this.$booleanProperties.autoroute=!0,this.$supportedProperties.push("url","timeout","protocol","route-server","autoroute"),this.$propHandlers.url=function(a){var b=new apf.url(a);if(!b.protocol)return apf.console.error(apf.formatErrorString(0,this,"Communication (Teleport) initialization error","Invalid server url provided: '"+a+"'"));this.$host=b.host,this.$rootPath=b.path,this.$server=a.replace(new RegExp(this.$rootPath+"$"),"")},this.$propHandlers.timeout=function(a){this.timeout=parseInt(a)||1e4},this.$propHandlers.protocol=function(a){var b=a.toLowerCase();if(!apf[b])throw new Error(apf.formatErrorString(1025,null,"Teleport baseclass","Could not find Ajax.org Teleport RPC Component '"+b+"'",this));this.implement(apf[b])},this.toString=function(){return"[Ajax.org Teleport Component : "+(this.name||"")+" ("+this.type+")]"},this.addEventListener("DOMNodeInsertedIntoDocument",function(){var a;this.type&&this.type=="socket"?apf.socket?this.implement(apf.socket):a="Socket":apf.http?this.implement(apf.http):a="HTTP";if(a)throw new Error(apf.formatErrorString(1024,null,"Teleport baseclass","Could not find Ajax.org Teleport "+a+" Component",this.$aml));this.id&&(apf.$asyncObjects[this.id]=1)})}.call(apf.Teleport.prototype=new apf.AmlElement),apf.Init.run("teleport"),apf.__TRANSACTION__=8,apf.__VIRTUALVIEWPORT__=1<<19,apf.VirtualViewport=function(){this.$init(!0),this.$regbase=this.$regbase|apf.__VIRTUALVIEWPORT__,this.virtualVTimer=null,this._xmlUpdate=this.$xmlUpdate,apf.setStyleClass(this.$ext,"virtual"),this.$deInitNode=function(a,b){this.$viewport.redraw()},this.$moveNode=function(a,b){this.$viewport.redraw()},this.emptyNode=apf.xmldb.getXml("<empty />"),this.$addEmpty=this.$add,this.$add=function(a,b,c,d,e){var f=this.$pHtmlDoc.getElementById(b);if(!f)return;this.$updateNode(a,f)},this.$fill=function(){},this.clear=function(a,b){this.clearSelection&&this.clearSelection(!b);if(typeof a=="string"){var c=a;a=!1,this[c+"-message"]||this.$setInheritedAttribute(c+"-message")}a?this.$removeClearMessage&&this.$removeClearMessage():(this.$viewport.offset=0,this.$viewport.length=0,this.$viewport.resize(0),this.$viewport.sb&&this.$viewport.sb.$update(),this.$setClearMessage&&this.$setClearMessage(c?this[c+"-message"]:this["empty-message"],c||"empty")),this.$viewport.cache=null};var a=this;this.$viewport=new apf.$viewportVirtual(this),this.getViewport=function(){return this.$viewport},this.$isInViewport=function(a,b){var c=this.getTraverseNodes();for(var d=0,e=c.length;d<e;d++)if(c[d]==a)return!0;return!1},this.scrollTo=function(a,b){var c={};this.$isInViewport(a,c),this.$viewport.change(c.position+(b?this.$viewport.limit-1:0))},this.getFirstTraverseNode=function(a){return this.getTraverseNodes(a)[0]},this.$xmlUpdate=function(){this.$viewport.cache=null,this.$viewport.length=this.xmlRoot.selectNodes(this.each).length,this.$viewport.sb.$update(this.$container),this._xmlUpdate.apply(this,arguments)},this.$load=function(a){apf.xmldb.addNodeListener(a,this),this.$updateTraverseCache(a,!0);if(!this.renderRoot&&!this.$cachedTraverseList.length)return this.clear();this.$viewport.cache=null,this.$viewport.offset=0,this.$viewport.length=this.$cachedTraverseList.length,this.$viewport.length<this.$viewport.limit&&this.$viewport.resize(this.$viewport.length),this.$viewport.prepare();var b=this.$addNodes(a,null,null,this.renderRoot);if(this.selectable)if(this.autoselect)b.length?this.$selectDefault(a):this.setProperty("selected",null);else{this.clearSelection(!0);var c=this.getFirstTraverseNode();c&&this.setCaret(c),this.setProperty("selected",null),this.setProperty("chosen",null)}this.$focussable&&(apf.window.hasFocus(this)?this.$focus():this.$blur()),this.$viewport.setScrollTop(0,!0)},this.$loadSubData=function(){},this.$updateTraverseCache=function(a,b){if(b||!this.$cachedTraverseList||this.$cachedTraverseList.name!=this.each)this.$cachedTraverseList=(a||this.xmlRoot).selectNodes(this.each),this.$cachedTraverseList.name=this.each};var b=this.getTraverseNodes=function(a){if(!this.xmlRoot)return;if(this.$viewport.cache)return this.$viewport.cache;this.$updateTraverseCache(a);var b=this.$viewport.offset,c=Math.min(this.$cachedTraverseList.length,b+this.$viewport.limit),d=[];for(var e=b;e<c;e++)d.push(this.$cachedTraverseList[e]);return this.$sort?this.$sort.apply(d):d},c=this.getNextTraverseSelected;this.getNextTraverseSelected=function(a,d,e){a||(a=this.selected),e||(e=1),this.getTraverseNodes=apf.MultiselectBinding.prototype.getTraverseNodes;var f=c.call(this,a,d,e);return this.getTraverseNodes=b,f},this.caching=!1},apf.$viewportVirtual=function(a){this.amlNode=a;var b=this;this.amlNode.addEventListener("mousescroll",function(a){if(!b.scrollbar||b.scrollbar.horizontal)return;if(a.returnValue===!1)return;var c=b.getScrollHeight()-b.getHeight();c&&(b.setScrollTop(b.getScrollTop()+ -1*a.delta*Math.min(45,b.getHeight()/10),!1,!0),a.preventDefault())}),apf.addListener(this.$getHtmlHost(),"scroll",function(){b.setScrollTop(b.getScrollTop())}),a.addEventListener("resize",function(){b.$findNewLimit()}),a.addEventListener("afterload",function(){var a=b.$getItemHeight();b.$findNewLimit(),a==1e3&&b.$findNewLimit()}),a.scrollbar||(this.sb=new apf.scrollbar,this.sb.parentNode=(new apf.Class).$init(),this.sb.parentNode.$container=a.$pHtmlNode,this.sb.parentNode.$int=a.$pHtmlNode,this.sb.dispatchEvent("DOMNodeInsertedIntoDocument"),this.sb.attach(this))},function(){this.offset=0,this.limit=2,this.length=0,this.host=this,this.cache=null,this.inited=!1,this.setScrollbar=function(a,b){this.scrollbar=a,this.amlNode.addEventListener("scroll",b)},this.isVisible=function(){var a=this.$getHtmlHost();return a.offsetHeight||a.offsetWidth?!0:!1},this.focus=function(){this.amlNode.focus&&this.amlNode.$isWindowContainer!==!0&&this.amlNode.focus()},this.getScrollTop=function(){var a=this.$getHtmlHost();return this.offset*this.$getItemHeight()+a.scrollTop},this.getScrollLeft=function(){var a=this.$getHtmlHost();return a.scrollLeft},this.getScrollHeight=function(){return this.length*this.$getItemHeight()},this.getScrollWidth=function(){var a=this.$getHtmlHost();return apf.isIE&&a.lastChild?a.lastChild.offsetLeft+a.lastChild.offsetWidth+apf.getBox(apf.getStyle(a,"padding"))[1]+(parseInt(apf.getStyle(a,"marginRight"))||0):a.scrollWidth},this.getHeight=function(){var a=this.$getHtmlHost();return a.tagName=="HTML"||a.tagName=="BODY"?apf.getWindowHeight():apf.getHtmlInnerHeight(a)},this.getWidth=function(){var a=this.$getHtmlHost();return a.tagName=="HTML"||a.tagName=="BODY"?apf.getWindowHeight():apf.getHtmlInnerWidth(a)},this.setScrollTop=function(a,b,c){var d=this.$getHtmlHost(),e=this.$getItemHeight();this.change(Math.floor(a/e)),d.scrollTop=a-this.offset*e,b||this.amlNode.dispatchEvent("scroll",{direction:"vertical",byUser:c,viewport:this,scrollbar:this.scrollbar})},this.setScrollLeft=function(a,b,c){var d=this.$getHtmlHost();d.scrollLeft=a,b||this.amlNode.dispatchEvent("scroll",{direction:"horizontal",byUser:c,viewport:this,scrollbar:this.scrollbar})},this.scrollIntoView=function(a,b){var c=this.amlNode,d=apf.xmldb.findHtmlNode(a,c);if(d&&d.offsetTop-c.$container.scrollTop>0&&d.offsetTop+d.offsetHeight-c.$container.scrollTop<c.$container.offsetHeight)return;this.amlNode.$sharedScrollbarMove&&this.amlNode.$sharedScrollbarMove();var e=apf.getChildNumber(a,apf.MultiselectBinding.prototype.getTraverseNodes.call(c)),f=this.$getItemHeight();this.setScrollTop(e*f+(b?f-this.getHeight():0))},this.$getItemHeight=function(){if(this.amlNode.each&&this.amlNode.xmlRoot){var a=this.amlNode.getTraverseNodes();if(a.length){var b=apf.xmldb.findHtmlNode(a[0],this.amlNode);if(b)return this.$lastItemHeight=b.offsetHeight}}return this.$lastItemHeight||1e3},this.$getHtmlHost=function(){var a=this.amlNode.$int||this.amlNode.$container;return a.tagName=="BODY"||a.tagName=="HTML"?apf.isSafari||apf.isChrome?document.body:a.parentNode:a},this.draw=function(){this.inited=!0;var a=this.limit;this.limit=0,this.resize(a,!0)},this.redraw=function(){this.change(this.offset,this.limit,!0)},this.prepare=function(){this.inited||this.draw();var a=this.amlNode,b=a.getTraverseNodes();if(!b)return;var c=b.length,d=apf.xmldb.getXmlDocId(a.xmlRoot),e=a.$container.childNodes,f;for(var g=0,h=0,i=e.length;h<i;h++){if(e[h].nodeType!=1)continue;g>=c?e[h].style.display="none":(f=e[h],a.$deselect(f),f.style.display="block",apf.xmldb.nodeConnect(d,b[g],f,a)),g++}},this.resize=function(a,b){this.cache=null;var c=this.amlNode,d;if(a<this.limit){var e=c.$container.childNodes;for(d=e.length-1;d>=0;d--){if(e[d].nodeType!=1)continue;c.$container.removeChild(e[d]);if(--this.limit==a)break}}else{if(!(a>this.limit))return;for(d=this.limit;d<a;d++)c.$addEmpty(c.emptyNode,"",c.xmlRoot,c.$container)}this.limit=a,b&&this.sb&&this.sb.$update(this.$container)},this.$findNewLimit=function(){if(!this.amlNode.xmlRoot||!this.amlNode.$ext.offsetHeight)return;var a=Math.ceil(this.getHeight()/this.$getItemHeight()+2);this.amlNode.$cachedTraverseList&&this.amlNode.$cachedTraverseList.length<a&&(a=this.amlNode.$cachedTraverseList.length),a!=this.limit&&(this.resize(a),this.redraw())},this.change=function(a,b,c){var d,e=this.amlNode;a>this.length-this.limit?d=Math.floor(this.length-this.limit):d=Math.floor(a),d<0&&(d=0),b||(b=this.limit),c||(c=apf.isGecko);var f=this.getScrollTop();this.cache=null;var g=d-this.offset,h=this.limit;g*g>=this.limit*this.limit&&(g=!1),this.offset=d;if(g>0){var i=e.$container.lastChild;i.nodeType!=1&&(i=i.previousSibling)}var j=e.getTraverseNodes();if(!j||!j.length)return;j.length<this.limit&&(a>0?alert("shouldnt get here"):this.resize(j.length));var k=apf.xmldb.getXmlDocId(e.xmlRoot),l=e.$container.childNodes,m,n,o,p,q,r,s;if(g>0){o=h-g,q=l.length,p=e.$getSelection();for(r=0,s=0;r<g&&s<q;s++)n=e.$container.firstChild,n.nodeType==1&&(r++,m=j[o++],m?(apf.xmldb.nodeConnect(k,m,n,e),e.$updateNode(m,n),p.indexOf(m)>-1?e.$select(n):e.$deselect(n),n.style.display="block"):n.style.display="none"),e.$container.appendChild(n)}else if(g<0){g*=-1,o=0,p=e.$getSelection();for(r=0,s=l.length-1;r<g&&s>=0;s++)n=e.$container.lastChild,n.nodeType==1&&(r++,m=j[o++],apf.xmldb.nodeConnect(k,m,n,e),e.$updateNode(m,n),p.indexOf(m)>-1?e.$select(n):e.$deselect(n),n.style.display="block"),e.$container.insertBefore(n,e.$container.firstChild)}else if(c||g===!1){q=l.length,p=e.$getSelection();for(r=0,s=0;s<q;s++)n=l[s],n.nodeType==1&&(m=j[r++],apf.xmldb.nodeConnect(k,m,n,e),e.$updateNode(m,n),p.indexOf(m)>-1?e.$select(n):e.$deselect(n))}!e.$selected&&p&&p.length&&(e.$selected=apf.xmldb.findHtmlNode(p[0],e));var n=this.$getHtmlHost(),t=this.$getItemHeight();n.scrollTop=f-this.offset*t}}.call(apf.$viewportVirtual.prototype),apf.__XFORMS__=1<<17,apf.clipboard=(new apf.Class).$init(),apf.clipboard.store=null,apf.clipboard.empty=!0,apf.clipboard.copied=null,apf.clipboard.put=function(a){this.store=a,this.setProperty("data",a),this.setProperty("empty",a?!1:!0)},apf.clipboard.clear=function(){this.setProperty("data",null),this.setProperty("empty",!0)},apf.clipboard.get=function(){return this.store},apf.clipboard.$highlightSelection=function(a,b,c){for(var d=0,e=b.length;d<e;d++)apf.setStyleClass(apf.xmldb.getHtmlNode(b[d],a),c?"":"cut",["cut"])},apf.clipboard.copySelection=function(a){var b=this.get()||[];this.$highlightSelection(a,b,!0),this.put(a.getSelection().map(function(a){return apf.xmldb.getCleanCopy(a)})),this.copied=!0},apf.clipboard.cutSelection=function(a){var b=this.get()||[];this.$highlightSelection(a,b,!0),this.put(b=a.getSelection()),this.$highlightSelection(a,b),this.copied=!1},apf.clipboard.pasteSelection=function(a,b){var c=this.get();if(!c)return;b||(b=a.selected||a.getFirstTraverseNode());if(a.hasFeature(apf.__DRAGDROP__)){var d=a.isDropAllowed(apf.clipboard.data,b);if(!d)return!1;var e=d[1]&&d[1].action||(a.$isTreeArch?"tree-append":"list-append");a.$dragDrop(b,this.store,d&&d[1],e,null,null,null,!0)}else if(c[0].parentNode)for(var f=0,g=c.length;f<g;f++)apf.xmldb.moveNode(b,c[f]);else for(var f=0,g=c.length;f<g;f++)apf.xmldb.appendChild(b,c[f]);this.copied||(this.$highlightSelection(a,c,!0),apf.clipboard.clear()),a.selectList(c)},apf.window=function(){function c(a){if(a.name=="blur"){a.srcElement!=this&&this.$blur&&this.$blur();return}a.srcElement!=this&&this.$focus&&(!a||!a.mouse||this.$focussable==apf.KEYBOARD_MOUSE)&&this.$focus();if(a.srcElement==this||a.trackedChild){a.trackedChild=!0;return}this.$lastFocussed=a.srcElement,this.localName&&this.localName.indexOf("window")>-1&&(a.trackedChild=!0)}function d(a){var b=a;do b=b.parentNode;while(b&&!b.$isWindowContainer);return b||apf.document.documentElement}function e(a){if(a&&a.currentTarget!=this)return;this.$isWindowContainer?apf.window.$tabList.pushUnique(this):apf.window.$addFocus(this,this.tabindex,!0)}function f(a){if(a&&(a.currentTarget!=this||a.$doOnlyAdmin))return;var b=this.$focusParent.$tabList,c=this.childNodes;for(var d=0,e=c.length;d<e;d++)b.remove(c[d]);apf.document.activeElement==this&&apf.window.moveNext();if(this.$isWindowContainer){apf.window.$tabList.remove(this);return}if(!this.$focusParent)return;b.remove(this)}this.$uniqueId=apf.all.push(this),this.apf=apf,this.toString=function(){return"[apf.window]"},this.getActionTracker=function(){return this.$at},this.loadCodeFile=function(a){self[a]?apf.importClass(self[a],!0,this.win):apf.include(a)},this.show=function(){apf.isDeskrun&&jdwin.Show()},this.hide=function(){apf.isDeskrun?jdwin.Hide():(this.loaded=!1,this.win&&this.win.close())},this.focus=function(){apf.isDeskrun?jdwin.SetFocus():window.focus()},this.setIcon=function(a){apf.isDeskrun&&(jdwin.icon=parseInt(a)==a?parseInt(a):a)},this.setTitle=function(a){this.title=a||"",apf.isDeskrun?jdwin.caption=a:document.title=a||""},this.loadAml=function(a){a[apf.TAGNAME]=="deskrun"&&this.loadDeskRun(a)},this.vManager=new apf.visibilitymanager,this.zManager=new apf.zmanager,this.$tabList=[],this.$addFocus=function(a,b,g){if(!g){a.addEventListener("DOMNodeInserted",e),a.addEventListener("DOMNodeRemoved",f);if(a.$isWindowContainer>-2){a.addEventListener("focus",c),a.addEventListener("blur",c),a.$focusParent=a;if(a.$isWindowContainer>-1){a.$tabList||(a.$tabList=[a]),this.$tabList.push(a);return}a.$tabList=[a]}}var h=d(a),i=h.$tabList;a.$isWindowContainer?a.$focusParent2=h:a.$focusParent=h,i[b]?i.insertIndex(a,b):i.push(a)},this.$removeFocus=function(a){if(!a.$focusParent)return;a.$focusParent.$tabList.remove(a),a.$isWindowContainer||(a.removeEventListener("DOMNodeInserted",e),a.removeEventListener("DOMNodeRemoved",f)),a.$isWindowContainer>-2&&(a.removeEventListener("focus",c),a.removeEventListener("blur",c))};var a;this.$focus=function(b,c,d){var e=this.document.activeElement;if(e==b&&!d)return;this.$settingFocus=b,c||(c={}),c.toElement=b,c.fromElement=e;if(e&&e!=b&&a!=e){a=e,e.blur(!0,c);if(a!=e)return!1}(apf.activeElement=this.document.activeElement=this.document.documentElement.$lastFocussed=b).focus(!0,c),this.$settingFocus=null,apf.dispatchEvent("movefocus",{toElement:b})},this.$blur=function(a){var b=this.document.activeElement;if(b!=a)return!1;b.$focusParent.$lastFocussed=null,apf.activeElement=this.document.activeElement=null,apf.dispatchEvent("movefocus",{fromElement:a})};var b;this.$focusDefault=function(a,b){var c=d(a);this.$focusLast(c,b)},this.$focusRoot=function(a){var b=apf.document.documentElement;this.$focusLast(b,a)!==!1},this.$focusLast=function(a,b,c){var d=a.$lastFocussed;if(d&&d.parentNode&&d.$focussable===!0&&(c||d.$ext.offsetHeight))this.$focus(d,b,!0);else{var e,f=a,g;while(f){if(!g&&f.focussable!==!1&&f.$focussable===!0&&!f.$tabList&&(c||f.$ext&&f.$ext.offsetHeight)&&f.disabled<1){this.$focus(f,b,!0);break}if(e=!g&&f.firstChild||!(g=!1)&&f.nextSibling)f=e,f.$isWindowContainer>0&&(g=!0);else{if(f==a){f.$isWindowContainer&&this.$focus(f,b,!0);return}do f=f.parentNode;while(f&&!f.nextSibling&&f!=a&&!f.$isWindowContainer);if(f==a){f.$isWindowContainer&&this.$focus(f,b,!0);return}if(f){if(f.$isWindowContainer){this.$focus(f,b,!0);break}f=f.nextSibling}}}f||this.$focus(apf.document.documentElement)}},this.hasFocus=function(a){return this.document.activeElement==a},this.moveNext=function(a,b,c,d){if(c&&apf.document.activeElement){var e=apf.document.activeElement.$focusParent;if(e.visible&&e.modal)return!1}var f,g,h,i=b||apf.document.activeElement,j=i?c&&i.$isWindowContainer&&i.$isWindowContainer!=-1?apf.window:d&&d.innerList?i.$focusParent:i.$focusParent2||i.$focusParent:apf.document.documentElement,k=j.$tabList;if(i&&(c||i!=apf.document.documentElement)){g=(k||[]).indexOf(i);if(g==-1)return}else g=-1;if(this.document.activeElement&&this.document.activeElement==i&&k.length==1||k.length==0)return!1;f=a?-1:1,h=g,g<0&&(g=0);do{h+=f,h>=k.length?h=0:h<0&&(h=k.length-1);if(g==h&&i)return k[0].$isWindowContainer&&this.$focus(k[0],d),!1;i=k[h]}while(!i||i.disabled>0||i==apf.document.activeElement||(c?!i.visible:i.$ext&&!i.$ext.offsetHeight)||i.focussable===!1||c&&!i.$tabList.length);j==apf.window&&i.$isWindowContainer!=-2?this.$focusLast(i,{mouse:!0},c):((d||(d={})).shiftKey=a,this.$focus(i,d))},this.focusDefault=function(){this.moveNext()===!1&&this.moveNext(null,apf.document.documentElement,!0)},apf.addListener(window,"beforeunload",function(){return apf.dispatchEvent("exit")}),apf.addListener(window,"unload",function(){if(!apf)return;apf.window.isExiting=!0,apf.window.destroy()}),apf.addListener(document,"contextmenu",function(a){a||(a=event);var b,c,d=apf.findHost(a.srcElement||a.target)||apf.document.activeElement||apf.document&&apf.document.documentElement;if(d&&d.localName=="menu")return!1;apf.contextMenuKeyboard?(d?b=d.selected?apf.getAbsolutePosition(d.$selected):apf.getAbsolutePosition(d.$ext||d.$pHtmlNode):b=[0,0],c={x:b[0]+10+document.documentElement.scrollLeft,y:b[1]+10+document.documentElement.scrollTop,amlNode:d,htmlEvent:a}):a.htmlEvent?c=a:c={x:a.clientX+document.documentElement.scrollLeft,y:a.clientY+document.documentElement.scrollTop,htmlEvent:a},c.bubbles=!0,apf.contextMenuKeyboard=null;if((d||apf).dispatchEvent("contextmenu",c)===!1||c.returnValue===!1)return a.preventDefault&&a.preventDefault(),!1;if(apf.config.disableRightClick)return a.preventDefault&&a.preventDefault(),!1}),apf.addListener(document,"mouseup",function(a){a||(a=event),apf.dispatchEvent("mouseup",{htmlEvent:a})});var g={INPUT:1,TEXTAREA:1,SELECT:1,EMBED:1,OBJECT:1};apf.addListener(document,"mousedown",this.$mousedown=function(a){a||(a=event);var c,d=apf.findHost(a.srcElement||a.target);apf.popup.last&&(!d||apf.popup.last!=d.$uniqueId)&&apf.popup.cache[apf.popup.last]&&!apf.isChildOf(apf.popup.cache[apf.popup.last].content,a.srcElement||a.target,!0)&&apf.popup.forceHide(),d===!1&&(d=apf.document.activeElement),(!d||(!d.$focussable||d.focussable===!1)&&d.canHaveChildren!=2&&!d.$focusParent)&&apf.config.allowBlur?(b=null,apf.document.activeElement&&apf.document.activeElement.blur()):d&&((c=apf.document.activeElement&&apf.document.activeElement.$focusParent||b)&&c.visible&&c.modal&&d.$focusParent!=c&&d.$isWindowContainer!=-1?apf.window.$focusLast(c,{mouse:!0,ctrlKey:a.ctrlKey}):!d&&apf.document.activeElement?apf.window.$focusRoot():d.$isWindowContainer==-1?d.$tabList.length?apf.window.moveNext(null,d.$tabList[0],null,{mouse:!0,innerList:!0}):apf.window.$focus(d):(d.disabled==undefined||d.disabled<1)&&d.focussable!==!1?d.$focussable?apf.window.$focus(d,{mouse:!0,ctrlKey:a.ctrlKey}):d.canHaveChildren==2?(!apf.config.allowBlur||!apf.document.activeElement||apf.document.activeElement.$focusParent!=d)&&apf.window.$focusLast(d,{mouse:!0,ctrlKey:a.ctrlKey}):(!apf.config.allowBlur||d!=apf.document.documentElement)&&apf.window.$focusDefault(d,{mouse:!0,ctrlKey:a.ctrlKey}):apf.window.$focusDefault(d,{mouse:!0,ctrlKey:a.ctrlKey})),apf.dispatchEvent("mousedown",{htmlEvent:a,amlNode:d||apf.document.documentElement});if(apf.isIE||apf.isIphone)return;var e=!(!apf.document&&(!apf.isParsingPartial||d)||apf.dragMode)||!!g[a.target&&a.target.tagName];if(e&&d){!a.target&&a.srcElement&&(a.target={});var f=(g[a.target.tagName]||a.target.contentEditable=="true")&&!a.target.disabled||d.$isTextInput&&d.$isTextInput(a)&&d.disabled<1;!apf.config.allowSelect&&!f&&d.nodeType!=d.NODE_PROCESSING_INSTRUCTION&&!d.textselect&&(e=!1)}if(!e&&a.button!=2){a.preventDefault&&a.preventDefault();try{document.activeElement&&document.activeElement.contentEditable=="true"&&document.activeElement.blur()}catch(a){}}}),apf.addListener(document,"selectstart",function(a){a||(a=event);var b=apf.findHost(a.srcElement),c=!(!apf.document&&(!apf.isParsingPartial||b)||apf.dragMode);c&&!apf.config.allowSelect&&b&&b.nodeType!=b.NODE_PROCESSING_INSTRUCTION&&!b.textselect&&(c=!1);if(!c)return a.returnValue=!1,!1}),apf.addListener(document,"keyup",this.$keyup=function(a){a||(a=event);var b={keyCode:a.keyCode,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,altKey:a.altkey,htmlEvent:a,bubbles:!0},c=apf.document&&apf.document.activeElement;if((c&&!c.disableKeyboard?c.dispatchEvent("keyup",b):apf.dispatchEvent("keyup",b))===!1)return apf.preventDefault(a),!1});var h=this.$mousewheel=function(b){b||(b=event);var c=null;b.wheelDelta?(c=b.wheelDelta/120,apf.isOpera&&(c*=-1)):b.detail&&(c=-b.detail/3);if(c!==null){if(apf.isIE){var d=b.srcElement||b.target;while(d&&d.scrollHeight<=d.offsetHeight)d=d.parentNode||d.$parentNode;d&&d.nodeType==9&&(d=d.documentElement);if(!d||d.nodeType!=1)return;d&&d.tagName=="BODY"&&"auto|scroll".indexOf(apf.getStyle(d,"overflowY"))==-1&&(d=document.documentElement);if(d&&"auto|scroll".indexOf(apf.getStyle(d,"overflowY"))>-1){var e,f=.35*d.offsetHeight*c;c<0?d&&d.scrollTop>=(e=d.scrollHeight-d.offsetHeight+apf.getVerBorders(d))+f&&(d.scrollTop=e,b.returnValue=!1):d&&d.scrollTop<=f&&(d.scrollTop=0,b.returnValue=!1)}}var g={delta:c,target:b.target||b.srcElement,button:b.button,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,altKey:b.altKey,bubbles:!0,htmlEvent:b},h=apf.findHost(b.srcElement||b.target),i=(h||apf).dispatchEvent("mousescroll",g);if(i===!1||g.returnValue===!1)b.preventDefault&&b.preventDefault(),b.returnValue=!1}};document.addEventListener&&document.addEventListener("DOMMouseScroll",h,!1),window.onmousewheel=document.onmousewheel=h,apf.addListener(document,"keyup",function(a){a=a||event;if(a.ctrlKey&&a.keyCode==9&&apf.document.activeElement){var b=apf.document.activeElement.$focusParent;return b.modal?(a.preventDefault&&a.preventDefault(),!1):(apf.window.moveNext(a.shiftKey,apf.document.activeElement.$focusParent,!0),b=apf.document.activeElement.$focusParent,b&&b.bringToFront&&b.bringToFront(),a.preventDefault&&a.preventDefault(),!1)}}),apf.addListener(document,"keydown",this.$keydown=function(a){a=a||event,a.keyCode==93&&(apf.contextMenuKeyboard=!0);var b=apf.document.activeElement,c=a.explicitOriginalTarget||a.srcElement||a.target,d=(g[c.tagName]||c.contentEditable||c.contentEditable=="true")&&!c.disabled||b&&b.$isTextInput&&b.$isTextInput(a)&&b.disabled<1,e={ctrlKey:a.ctrlKey,metaKey:a.metaKey,shiftKey:a.shiftKey,altKey:a.altKey,keyCode:a.keyCode,htmlEvent:a,isTextInput:d,bubbles:!0};delete e.currentTarget;var f=b;if((f&&!f.disableKeyboard&&!f.editable?f.dispatchEvent("keydown",e):apf.dispatchEvent("keydown",e))===!1){apf.stopEvent(a);if(apf.canDisableKeyCodes)try{a.keyCode=0}catch(a){}return!1}if((!apf.config.disableTabbing||apf.document.activeElement)&&a.keyCode==9){if(a.ctrlKey&&apf.document.activeElement){var h=apf.document.activeElement.$focusParent;if(h.modal)return a.preventDefault&&a.preventDefault(),!1;apf.window.moveNext(a.shiftKey,apf.document.activeElement.$focusParent,!0),h=apf.document.activeElement.$focusParent,h&&h.bringToFront&&h.bringToFront()}else(!apf.document.activeElement||apf.document.activeElement.tagName!="menu")&&apf.window.moveNext(a.shiftKey);return a.preventDefault&&a.preventDefault(),!1}var i=apf.isMac?a.metaKey:a.altKey;if(apf.config.disableBackspace&&a.keyCode==8&&!d){if(apf.canDisableKeyCodes)try{a.keyCode=0}catch(a){}a.returnValue=!1}if(apf.config.disableF5&&(a.keyCode==116||a.keyCode==117))if(apf.canDisableKeyCodes)try{a.keyCode=0}catch(a){}else a.preventDefault(),a.stopPropagation();return a.keyCode==27&&(a.returnValue=!1),!apf.config.allowSelect&&a.shiftKey&&a.keyCode>32&&a.keyCode<41&&!d&&(a.returnValue=!1),a.returnValue===!1&&a.preventDefault&&a.preventDefault(),a.returnValue}),apf.document={},this.init=function(a){apf.actiontracker&&(this.$at=new apf.actiontracker,this.$at.name="default",apf.nameserver.register("actiontracker","default",this.$at)),this.$domParser=new apf.DOMParser,this.document=apf.document=this.$domParser.parseFromString(a,"text/xml",{timeout:apf.config.initdelay,callback:function(a){if(apf.parsed!=2){var b=apf.parsed;apf.parsed=2,apf.dispatchEvent("parse",{initial:b}),apf.parsed=!0}apf.loaded||(!apf.document.activeElement&&(!apf.config.allowBlur||apf.document.documentElement&&apf.document.documentElement.editable)&&apf.window.focusDefault(),apf.loaded=!0,$setTimeout(function(){apf.dispatchEvent("load"),apf.addEventListener("$event.load",function(a){a()})}))}})},this.destroy=function(){this.$at=null,apf.unload(this),apf=this.win=this.window=this.document=null,window.onfocus=window.onerror=window.onunload=window.onbeforeunload=window.onbeforeprint=window.onafterprint=window.onmousewheel=window.onblur=null,document.oncontextmenu=document.onmousedown=document.onmousemove=document.onmouseup=document.onmousewheel=document.onkeyup=document.onkeydown=null,document.body&&(document.body.onmousedown=document.body.onmousemove=document.body.onmouseup=null,document.body.innerHTML="")}},apf.window.prototype=(new apf.Class).$init(),apf.window=new apf.window,apf.runIE=function(){var a=!1,b=!1;apf.getHttpReq=b?function(){return apf.availHTTP.length?apf.availHTTP.pop():new XMLHttpRequest}:function(){return apf.availHTTP.length?apf.availHTTP.pop():new ActiveXObject("microsoft.XMLHTTP")},apf.getXmlDom=b?function(a,b){var c=getDOMParser(a,b);return c}:function(a,b,c){var d=new ActiveXObject("microsoft.XMLDOM");return d.setProperty("SelectionLanguage","XPath"),c&&(d.preserveWhiteSpace=!0),a&&(apf.cantParseXmlDefinition&&(a=a.replace(/\] \]/g,"] ]").replace(/^<\?[^>]*\?>/,"")),d.loadXML(a),b||this.xmlParseError(d)),d},apf.xmlParseError=function(a){var b=a.parseError;if(b!=0)throw new Error(apf.formatErrorString(1050,null,"XML Parse error on line "+b.line,b.reason+"Source Text:\n"+b.srcText.replace(/\t/gi," ")));return a},apf.getStyle=function(a,b){return a.currentStyle[b]},apf.insertHtmlNodes=function(a,b,c,d){var e;if(a)for(e=[],i=0,l=a.length;i<l;i++)e[i]=a[i].xml;e=d||apf.html_entity_decode(e.join("")),apf.isIE<7&&(e=e.replace(/style="background-image:([^"]*)"/g,"find='$1' style='background-image:$1'"));try{(c||b).insertAdjacentHTML(c?"beforebegin":"beforeend",e)}catch(f){document.body.insertAdjacentHTML("beforeend","<table><tr>"+e+"</tr></table>");var g=document.body.lastChild.firstChild.firstChild;for(i=g.childNodes.length-1;i>=0;i--)b.appendChild(g.childNodes[apf.hasDynamicItemList?0:i])}apf.isIE<7&&$setTimeout(function(){var a=b.getElementsByTagName("*");for(var c,d=0,e=a.length;d<e;d++)if(c=a[d].getAttribute("find"))a[d].style.backgroundImage=c.trim()})},apf.insertHtmlNode=function(a,b,c,d){if(b.nodeType!=11&&!b.style)return b.appendChild(a);var e=c||b;d||(d=apf.html_entity_decode(a.serialize?a.serialize(!0):a.xml||a.outerHTML||a.nodeValue));try{e.insertAdjacentHTML(c?"beforeBegin":"beforeEnd",d)}catch(f){return e.insertAdjacentHTML("afterEnd",d),e.nextSibling}return c?c.previousSibling:b.lastChild.nodeType==1?b.lastChild:b.lastChild.previousSibling},apf.getHtmlLeft=function(a){return a.offsetLeft-(apf.isIE>7&&parseInt(a.parentNode.currentStyle.borderLeftWidth)||0)},apf.getHtmlRight=function(a){var b;return((b=a.offsetParent).tagName=="BODY"?apf.getWindowWidth():b.offsetWidth)-a.offsetLeft-a.offsetWidth-(apf.isIE<8&&parseInt(b.currentStyle.borderLeftWidth)||0)-(parseInt(b.currentStyle.borderRightWidth)||0)},apf.getHtmlTop=function(a){return a.offsetTop-(apf.isIE>7&&parseInt(a.offsetParent.currentStyle.borderTopWidth)||0)},apf.getHtmlBottom=function(a){var b;return((b=a.offsetParent).tagName=="BODY"?apf.getWindowHeight():b.offsetHeight)-a.offsetTop-a.offsetHeight-(apf.isIE<8&&parseInt(b.currentStyle.borderTopWidth)||0)-(parseInt(b.currentStyle.borderBottomidth)||0)},apf.getBorderOffset=function(a){return apf.isIE<8&&[0,0]||[parseInt(a.currentStyle.borderLeftWidth)||0,parseInt(a.currentStyle.borderTopWidth)||0]},apf.getOpacity=function(a){return parseInt(((a.currentStyle.filter||"").match(/alpha\(opacity=(\d*)\)/)||[0,0])[1])/100},apf.setOpacity=function(a,b){a.style.filter=b==1?"":"alpha(opacity="+Math.round(b*100)+")"},apf.importClass(apf.runXpath,!0,self)},apf.runNonIe=function(){DocumentFragment.prototype.getElementById=function(a){return this.childNodes.length?this.childNodes[0].ownerDocument.getElementById(a):null},XMLDocument.prototype.__defineGetter__&&(XMLDocument.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)}),XMLDocument.prototype.__defineSetter__("xml",function(){throw new Error(apf.formatErrorString(1042,null,"XML serializer","Invalid assignment on read-only property 'xml'."))}),Node.prototype.__defineGetter__("xml",function(){return this.nodeType==3||this.nodeType==4||this.nodeType==2?this.nodeValue:(new XMLSerializer).serializeToString(this)}),Element.prototype.__defineGetter__("xml",function(){return(new XMLSerializer).serializeToString(this)})),typeof HTMLElement!="undefined"&&(HTMLElement.prototype.insertAdjacentElement||(Text.prototype.insertAdjacentElement=HTMLElement.prototype.insertAdjacentElement=function(a,b){switch(a.toLowerCase()){case"beforebegin":this.parentNode.insertBefore(b,this);break;case"afterbegin":this.insertBefore(b,this.firstChild);break;case"beforeend":this.appendChild(b);break;case"afterend":this.nextSibling?this.parentNode.insertBefore(b,this.nextSibling):this.parentNode.appendChild(b)}}),HTMLElement.prototype.insertAdjacentHTML||(Text.prototype.insertAdjacentHTML=HTMLElement.prototype.insertAdjacentHTML=function(a,b){var c=this.ownerDocument.createRange();c.setStartBefore(apf.isWebkit?document.body:self.document?document.body:this);var d=c.createContextualFragment(b);this.insertAdjacentElement(a,d)}),HTMLBodyElement.prototype.insertAdjacentHTML||(HTMLBodyElement.prototype.insertAdjacentHTML=HTMLElement.prototype.insertAdjacentHTML),HTMLElement.prototype.insertAdjacentText||(Text.prototype.insertAdjacentText=HTMLElement.prototype.insertAdjacentText=function(a,b){var c=document.createTextNode(b);this.insertAdjacentElement(a,c)}),HTMLElement.prototype.removeNode=function(){if(!this.parentNode)return;this.parentNode.removeChild(this)},HTMLElement.prototype.__defineSetter__&&(HTMLElement.prototype.__defineSetter__("innerText",function(a){var b=""+a;this.innerHTML=b.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),HTMLElement.prototype.__defineGetter__("innerText",function(){return this.innerHTML.replace(/<[^>]+>/g,"").replace(/\s\s+/g," ").replace(/^\s+|\s+$/g," ")}),HTMLElement.prototype.__defineGetter__("outerHTML",function(){return(new XMLSerializer).serializeToString(this)})));var a=!1;try{XMLDocument.prototype.async=!0,a=!0}catch(b){}Document.prototype.onreadystatechange=null,Document.prototype.parseError=0,Array.prototype.item=function(a){return this[a]},Array.prototype.expr="",XMLDocument.prototype.$clearDOM=function(){while(this.hasChildNodes())this.removeChild(this.firstChild)},XMLDocument.prototype.$copyDOM=function(a){this.$clearDOM();if(a.nodeType==9||a.nodeType==11){var b=a.childNodes;for(var c=0;c<b.length;c++)this.appendChild(this.importNode(b[c],!0))}else a.nodeType==1&&this.appendChild(this.importNode(a,!0))},XMLDocument.prototype.loadXML=function(a){apf.xmldb.setReadyState(this,1);var b=this.xml||this.serialize(),c=(new DOMParser).parseFromString(a,"text/xml");return apf.xmldb.setReadyState(this,2),this.$copyDOM(c),apf.xmldb.setReadyState(this,3),apf.xmldb.loadHandler(this),b},Node.prototype.getElementById=function(a){},HTMLElement.prototype.replaceNode=Element.prototype.replaceNode=function(a){if(!this.parentNode)return;this.parentNode.insertBefore(a,this),this.parentNode.removeChild(this)},XMLDocument.prototype.$load=XMLDocument.prototype.load,XMLDocument.prototype.load=function(b){var c=document.implementation.createDocument("","",null);c.$copyDOM(this),this.parseError=0,apf.xmldb.setReadyState(this,1);try{if(this.async==0&&a){var d=new XMLHttpRequest;d.open("GET",b,!1),d.overrideMimeType("text/xml"),d.send(null),apf.xmldb.setReadyState(this,2),this.$copyDOM(d.responseXML),apf.xmldb.setReadyState(this,3)}else this.$load(b)}catch(e){this.parseError=-1}finally{apf.xmldb.loadHandler(this)}return c};var c=apf.getStyle=function(a,b){try{return(window.getComputedStyle(a,"")||{})[b]||""}catch(c){}};HTMLDocument.prototype.setProperty=XMLDocument.prototype.setProperty=function(a,b){},apf.getHttpReq=function(){return apf.availHTTP.length?apf.availHTTP.pop():new XMLHttpRequest},apf.getXmlDom=function(a,b,c){var d;return a?(c===!1&&(a=a.replace(/>[\s\n\r]*</g,"><")),d=new DOMParser,d=d.parseFromString(a,"text/xml"),b||this.xmlParseError(d)):d=document.implementation.createDocument("","",null),d},apf.xmlParseError=function(a){if(a.getElementsByTagName("parsererror").length){var b=a.documentElement.firstChild.nodeValue;if(b!=null)var c=b.split("\n"),d=c[2].match(/\w+ (\d+)/)[1],e=c[0].replace(/\w+ \w+ \w+: (.*)/,"$1");else if(b=a.documentElement.firstChild.getElementsByTagName("div")[0].firstChild.nodeValue)var d=b.match(/line\s(\d*)/)[1]||"N/A",e=b.match(/column\s\d*:(.*)/)[1]||"N/A";else var d="N/A",e="N/A";var f=a.documentElement.lastChild.firstChild,g="";throw f&&f.nodeValue&&(g="\nSource Text : "+f.nodeValue.replace(/\t/gi," ")),new Error(apf.formatErrorString(1050,null,"XML Parse Error on line "+d,e+g))}return a},apf.xmldb.setReadyState=function(a,b){a.readyState=b,a.onreadystatechange!=null&&typeof a.onreadystatechange=="function"&&a.onreadystatechange()},apf.xmldb.loadHandler=function(a){if(!a.documentElement||a.documentElement.tagName=="parsererror")a.parseError=-1;apf.xmldb.setReadyState(a,4)},apf.Init.add(function(){var a,b=document.getElementsByTagName("form");for(a=0;a<b.length;a++)b[a].removeNode();b=document.getElementsByTagName("xml");for(a=0;a<b.length;a++)b[a].removeNode();b=null}),document.body&&(document.body.focus=function(){}),apf.getOpacity=function(a){return apf.getStyle(a,"opacity")},apf.setOpacity=function(a,b){a.style.opacity=b}},apf.runWebkit=function(){XMLHttpRequest.prototype.sendAsBinary===undefined&&window.ArrayBuffer&&(XMLHttpRequest.prototype.sendAsBinary=function(a){var b=Array.prototype.map.call(a,function(a){return a.charCodeAt(0)&255});this.send((new Uint8Array(b)).buffer)}),HTMLDocument.prototype.selectNodes=XMLDocument.prototype.selectNodes=function(a,b){a.substr(0,2)=="//"&&(a="."+a);try{var c=this.evaluate(a,b||this,this.createNSResolver(this.documentElement),7,null)}catch(d){try{var c=this.evaluate("child::"+a,b||this,this.createNSResolver(this.documentElement),7,null)}catch(d){throw new Error("XPath error: "+d.message+"\nLine: "+d.lineNumber+"\nExpression: '"+a+"'")}}var e=new Array(c.snapshotLength);e.expr=a;for(var f=e.length-1;f>=0;f--)e[f]=c.snapshotItem(f);return e},Text.prototype.selectNodes=Attr.prototype.selectNodes=Element.prototype.selectNodes=function(a){return this.ownerDocument.selectNodes(a,this)},HTMLDocument.prototype.selectSingleNode=XMLDocument.prototype.selectSingleNode=function(a,b){var c=this.selectNodes("("+a+")[1]",b?b:null);return c.length>0?c[0]:null},Text.prototype.selectSingleNode=Attr.prototype.selectSingleNode=Element.prototype.selectSingleNode=function(a){return this.ownerDocument.selectSingleNode(a,this)};var a=new XMLSerializer;apf.insertHtmlNodes=function(b,c,d,e){var f,g,h,i,j;if(b){g=document.createDocumentFragment(),h=[],i=0,j=b.length;for(;i<j;i++){if(!(f=b[i]))continue;g.appendChild(f)}}(d||c).insertAdjacentHTML(d?"beforebegin":"beforeend",e||apf.html_entity_decode(a.serializeToString(g)).replace(/<([^>]+)\/>/g,"<$1></$1>"))},apf.insertHtmlNode=function(b,c,d,e){return c.nodeType!=11&&!c.style?c.appendChild(b):(e||(e=apf.html_entity_decode(b.serialize?b.serialize(!0):b.nodeType==3||b.nodeType==4||b.nodeType==2?b.nodeValue:a.serializeToString(b))),(d||c).insertAdjacentHTML(d?"beforebegin":"beforeend",e.match(/<(IMG|LINK|META|BR|HR|BASEFONT)[^\/>]*/i)?e.replace(/<([^>]+)\/>/g,"<$1 />"):e.replace(/<([^>]+)\/>/g,"<$1></$1>")),d?d.previousSibling:c.lastChild)},apf.getHtmlLeft=function(a){return a.offsetLeft},apf.getHtmlRight=function(a){var b;return((b=a.offsetParent).tagName=="BODY"?apf.getWindowWidth():b.offsetWidth)-a.offsetLeft-a.offsetWidth-(parseInt(apf.getStyle(b,"borderLeftWidth"))||0)-(parseInt(apf.getStyle(b,"borderRightWidth"))||0)},apf.getHtmlTop=function(a){return a.offsetTop},apf.getHtmlBottom=function(a){var b;return((b=a.offsetParent).tagName=="BODY"?apf.getWindowHeight():b.offsetHeight)-a.offsetTop-a.offsetHeight-(parseInt(apf.getStyle(b,"borderTopWidth"))||0)-(parseInt(apf.getStyle(b,"borderBottomWidth"))||0)},apf.getBorderOffset=function(a){return[0,0]},apf.runNonIe&&apf.runNonIe()},apf.crypto.Base64=function(){function b(b){var c,d,e,f,g,h,i,j,k=0,l=0,m="",n=[];if(!b)return b;b=apf.crypto.UTF8.encode(b+"");do c=b.charCodeAt(k++),d=b.charCodeAt(k++),e=b.charCodeAt(k++),j=c<<16|d<<8|e,f=j>>18&63,g=j>>12&63,h=j>>6&63,i=j&63,n[l++]=a.charAt(f)+a.charAt(g)+a.charAt(h)+a.charAt(i);while(k<b.length);m=n.join("");switch(b.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}function c(b){var c,d,e,f,g,h,i,j,k=0,l=0,m=[];if(!b)return b;b+="";do f=a.indexOf(b.charAt(k++)),g=a.indexOf(b.charAt(k++)),h=a.indexOf(b.charAt(k++)),i=a.indexOf(b.charAt(k++)),j=f<<18|g<<12|h<<6|i,c=j>>16&255,d=j>>8&255,e=j&255,h==64?m[l++]=String.fromCharCode(c):i==64?m[l++]=String.fromCharCode(c,d):m[l++]=String.fromCharCode(c,d,e);while(k<b.length);return apf.crypto.UTF8.decode(m.join(""))}var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:c,encode:b}}(),apf.crypto.UTF8={encode:function(a){a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var b=[],c=0,d=0,e,f;for(var g=0,h=a.length;g<h;g++)e=a.charCodeAt(g),f=null,e<128?d++:e>127&&e<2048?f=String.fromCharCode(e>>6|192)+String.fromCharCode(e&63|128):f=String.fromCharCode(e>>12|224)+String.fromCharCode(e>>6&63|128)+String.fromCharCode(e&63|128),f!==null&&(d>c&&b.push(a.substring(c,d)),b.push(f),c=d=g+1);return d>c&&b.push(a.substring(c,a.length)),b.join("")},decode:function(a){var b=[],c=0,d=0,e=0,f=0,g=0;a+="";while(c<a.length)e=a.charCodeAt(c),e<128?(b[d++]=String.fromCharCode(e),c++):e>191&&e<224?(f=a.charCodeAt(c+1),b[d++]=String.fromCharCode((e&31)<<6|f&63),c+=2):(f=a.charCodeAt(c+1),g=a.charCodeAt(c+2),b[d++]=String.fromCharCode((e&15)<<12|(f&63)<<6|g&63),c+=3);return b.join("")}},apf.crypto.MD5={hexcase:0,b64pad:"",chrsz:8,hex_md5:function(a){return this.binl2hex(this.core_md5(this.str2binl(a),a.length*this.chrsz))},b64_md5:function(a){return this.binl2b64(this.core_md5(this.str2binl(a),a.length*this.chrsz))},str_md5:function(a){return this.binl2str(this.core_md5(this.str2binl(a),a.length*this.chrsz))},hex_hmac_md5:function(a,b){return this.binl2hex(this.core_hmac_md5(a,b))},b64_hmac_md5:function(a,b){return this.binl2b64(this.core_hmac_md5(a,b))},str_hmac_md5:function(a,b){return this.binl2str(this.core_hmac_md5(a,b))},core_md5:function(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;var c=1732584193,d=-271733879,e=-1732584194,f=271733878;for(var g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=this.md5_ff(c,d,e,f,a[g+0],7,-680876936),f=this.md5_ff(f,c,d,e,a[g+1],12,-389564586),e=this.md5_ff(e,f,c,d,a[g+2],17,606105819),d=this.md5_ff(d,e,f,c,a[g+3],22,-1044525330),c=this.md5_ff(c,d,e,f,a[g+4],7,-176418897),f=this.md5_ff(f,c,d,e,a[g+5],12,1200080426),e=this.md5_ff(e,f,c,d,a[g+6],17,-1473231341),d=this.md5_ff(d,e,f,c,a[g+7],22,-45705983),c=this.md5_ff(c,d,e,f,a[g+8],7,1770035416),f=this.md5_ff(f,c,d,e,a[g+9],12,-1958414417),e=this.md5_ff(e,f,c,d,a[g+10],17,-42063),d=this.md5_ff(d,e,f,c,a[g+11],22,-1990404162),c=this.md5_ff(c,d,e,f,a[g+12],7,1804603682),f=this.md5_ff(f,c,d,e,a[g+13],12,-40341101),e=this.md5_ff(e,f,c,d,a[g+14],17,-1502002290),d=this.md5_ff(d,e,f,c,a[g+15],22,1236535329),c=this.md5_gg(c,d,e,f,a[g+1],5,-165796510),f=this.md5_gg(f,c,d,e,a[g+6],9,-1069501632),e=this.md5_gg(e,f,c,d,a[g+11],14,643717713),d=this.md5_gg(d,e,f,c,a[g+0],20,-373897302),c=this.md5_gg(c,d,e,f,a[g+5],5,-701558691),f=this.md5_gg(f,c,d,e,a[g+10],9,38016083),e=this.md5_gg(e,f,c,d,a[g+15],14,-660478335),d=this.md5_gg(d,e,f,c,a[g+4],20,-405537848),c=this.md5_gg(c,d,e,f,a[g+9],5,568446438),f=this.md5_gg(f,c,d,e,a[g+14],9,-1019803690),e=this.md5_gg(e,f,c,d,a[g+3],14,-187363961),d=this.md5_gg(d,e,f,c,a[g+8],20,1163531501),c=this.md5_gg(c,d,e,f,a[g+13],5,-1444681467),f=this.md5_gg(f,c,d,e,a[g+2],9,-51403784),e=this.md5_gg(e,f,c,d,a[g+7],14,1735328473),d=this.md5_gg(d,e,f,c,a[g+12],20,-1926607734),c=this.md5_hh(c,d,e,f,a[g+5],4,-378558),f=this.md5_hh(f,c,d,e,a[g+8],11,-2022574463),e=this.md5_hh(e,f,c,d,a[g+11],16,1839030562),d=this.md5_hh(d,e,f,c,a[g+14],23,-35309556),c=this.md5_hh(c,d,e,f,a[g+1],4,-1530992060),f=this.md5_hh(f,c,d,e,a[g+4],11,1272893353),e=this.md5_hh(e,f,c,d,a[g+7],16,-155497632),d=this.md5_hh(d,e,f,c,a[g+10],23,-1094730640),c=this.md5_hh(c,d,e,f,a[g+13],4,681279174),f=this.md5_hh(f,c,d,e,a[g+0],11,-358537222),e=this.md5_hh(e,f,c,d,a[g+3],16,-722521979),d=this.md5_hh(d,e,f,c,a[g+6],23,76029189),c=this.md5_hh(c,d,e,f,a[g+9],4,-640364487),f=this.md5_hh(f,c,d,e,a[g+12],11,-421815835),e=this.md5_hh(e,f,c,d,a[g+15],16,530742520),d=this.md5_hh(d,e,f,c,a[g+2],23,-995338651),c=this.md5_ii(c,d,e,f,a[g+0],6,-198630844),f=this.md5_ii(f,c,d,e,a[g+7],10,1126891415),e=this.md5_ii(e,f,c,d,a[g+14],15,-1416354905),d=this.md5_ii(d,e,f,c,a[g+5],21,-57434055),c=this.md5_ii(c,d,e,f,a[g+12],6,1700485571),f=this.md5_ii(f,c,d,e,a[g+3],10,-1894986606),e=this.md5_ii(e,f,c,d,a[g+10],15,-1051523),d=this.md5_ii(d,e,f,c,a[g+1],21,-2054922799),c=this.md5_ii(c,d,e,f,a[g+8],6,1873313359),f=this.md5_ii(f,c,d,e,a[g+15],10,-30611744),e=this.md5_ii(e,f,c,d,a[g+6],15,-1560198380),d=this.md5_ii(d,e,f,c,a[g+13],21,1309151649),c=this.md5_ii(c,d,e,f,a[g+4],6,-145523070),f=this.md5_ii(f,c,d,e,a[g+11],10,-1120210379),e=this.md5_ii(e,f,c,d,a[g+2],15,718787259),d=this.md5_ii(d,e,f,c,a[g+9],21,-343485551),c=this.safe_add(c,h),d=this.safe_add(d,i),e=this.safe_add(e,j),f=this.safe_add(f,k)}return[c,d,e,f]},md5_cmn:function(a,b,c,d,e,f){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(b,a),this.safe_add(d,f)),e),c)},md5_ff:function(a,b,c,d,e,f,g){return this.md5_cmn(b&c|~b&d,a,b,e,f,g)},md5_gg:function(a,b,c,d,e,f,g){return this.md5_cmn(b&d|c&~d,a,b,e,f,g)},md5_hh:function(a,b,c,d,e,f,g){return this.md5_cmn(b^c^d,a,b,e,f,g)},md5_ii:function(a,b,c,d,e,f,g){return this.md5_cmn(c^(b|~d),a,b,e,f,g)},core_hmac_md5:function(a,b){var c=this.str2binl(a),d=Array(16),e=Array(16);c.length>16&&(c=this.core_md5(c,a.length*this.chrsz));for(var f=0;f<16;f++)d[f]=c[f]^909522486,e[f]=c[f]^1549556828;return this.core_md5(e.concat(this.core_md5(d.concat(this.str2binl(b)),512+b.length*this.chrsz)),640)},safe_add:function(a,b){var c=(a&65535)+(b&65535),d=(a>>16)+(b>>16)+(c>>16);return d<<16|c&65535},bit_rol:function(a,b){return a<<b|a>>>32-b},str2binl:function(a){var b=[],c,d=(1<<this.chrsz)-1;for(c=0;c<a.length*this.chrsz;c+=this.chrsz)b[c>>5]|=(a.charCodeAt(c/this.chrsz)&d)<<c%32;return b},binl2str:function(a){var b=[],c,d=(1<<this.chrsz)-1;for(c=0;c<a.length*32;c+=this.chrsz)b.push(String.fromCharCode(a[c>>5]>>>c%32&d));return b.join("")},binl2hex:function(a){var b=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",c=[],d;for(d=0;d<a.length*4;d++)c.push(b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15));return c.join("")},binl2b64:function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=[],d;for(d=0;d<a.length*4;d+=3){var e=(a[d>>2]>>8*(d%4)&255)<<16|(a[d+1>>2]>>8*((d+1)%4)&255)<<8|a[d+2>>2]>>8*((d+2)%4)&255;for(var f=0;f<4;f++)d*8+f*6>a.length*32?c.push(this.b64pad):c.push(b.charAt(e>>6*(3-f)&63))}return c.join("")}},function(a){function b(a,b){var c=a<<b|a>>>32-b;return c}function c(a){var b="",c,d;for(c=7;c>=0;c--)d=a>>>c*4&15,b+=d.toString(16);return b}a.SHA1=function(a){var d,e,f,g=new Array(80),h=1732584193,i=4023233417,j=2562383102,k=271733878,l=3285377520,m,n,o,p,q,r;a=apf.crypto.UTF8.encode(a);var s=a.length,t=[];for(e=0;e<s-3;e+=4)f=a.charCodeAt(e)<<24|a.charCodeAt(e+1)<<16|a.charCodeAt(e+2)<<8|a.charCodeAt(e+3),t.push(f);switch(s%4){case 0:e=2147483648;break;case 1:e=a.charCodeAt(s-1)<<24|8388608;break;case 2:e=a.charCodeAt(s-2)<<24|a.charCodeAt(s-1)<<16|32768;break;case 3:e=a.charCodeAt(s-3)<<24|a.charCodeAt(s-2)<<16|a.charCodeAt(s-1)<<8|128}t.push(e);while(t.length%16!=14)t.push(0);t.push(s>>>29),t.push(s<<3&4294967295);for(d=0;d<t.length;d+=16){for(e=0;e<16;e++)g[e]=t[d+e];for(e=16;e<=79;e++)g[e]=b(g[e-3]^g[e-8]^g[e-14]^g[e-16],1);m=h,n=i,o=j,p=k,q=l;for(e=0;e<=19;e++)r=b(m,5)+(n&o|~n&p)+q+g[e]+1518500249&4294967295,q=p,p=o,o=b(n,30),n=m,m=r;for(e=20;e<=39;e++)r=b(m,5)+(n^o^p)+q+g[e]+1859775393&4294967295,q=p,p=o,o=b(n,30),n=m,m=r;for(e=40;e<=59;e++)r=b(m,5)+(n&o|n&p|o&p)+q+g[e]+2400959708&4294967295,q=p,p=o,o=b(n,30),n=m,m=r;for(e=60;e<=79;e++)r=b(m,5)+(n^o^p)+q+g[e]+3395469782&4294967295,q=p,p=o,o=b(n,30),n=m,m=r;h=h+m&4294967295,i=i+n&4294967295,j=j+o&4294967295,k=k+p&4294967295,l=l+q&4294967295}return r=c(h)+c(i)+c(j)+c(k)+c(l),r.toLowerCase()}}(apf.crypto),apf.lm=new function(){function cy(a){var b,c;if(Q[bb-1]=="{{")b=bb-1;else for(c=Z-2,b=0;c>=0&&Q[b=(Y[c]&268435455)-1]!="{{";c-=2);!a&&R>b+1?Q[b]=bu+bA:Q[b]=bu,ba=1}function cz(j,k,H,bf,bu,by,bB){var bE,bF,bG,bH=k?b[k]:H?0:bf?3:bu?4:j?2:15;switch(ba){case 0:case 1:switch(bH){case 0:bj==3&&bi!="$"||bj==4?Q[R++]=" ":f[bi]&&(bj=0);break;case 1:bg++,bq=bB,Q[R-1]!="\n"&&!x[bi]&&(Q[R++]="\n"),f[bi]&&(bj=0);break;case 2:if(bF=e[j])switch(bF){case 1:Y[Z-1]||(Q[R++]=")",Z-=2);if(!ba)Q[R-1]!="\n"&&bi!="{"&&bi!=";"&&(Q[R++]="\n");else if(!Z||Y[Z-1])Q[R++]=";";break;case 2:Y[Z-1]||(Q[R++]=")",Z-=2),Q[R++]=",";break;case 3:Q[R-1]=="\n"||Q[R-1]==";"||bi=="{"||bi=="} "||R==bb?(ba||cy(),Q[R++]="  "):Q[R++]="^";break;case 4:if(bi!="<"&&bi!=">"){!ba&&Q[bb-1]!="("&&cy(!0),Q[R++]=j;for(bF=R;bF>=bb&&!a[Q[bF]]&&(Q[bF]!="  "&&Q[bF]!=(bh?bA:bz)||(Q[bF]="",!1));bF--);if(bj==3&&bk>0&&bi.charAt(0)!="."&&O){R-=2;while(w[Q[R]])R--;bG=bi,Q[R++]=o[j],Q[R++]=bG.slice(0,bk),Q[R++]=",'",Q[R++]=bG.slice(bk+1),Q[R++]="',",Y[Z++]=bb|ba<<28,Y[Z++]=""}}else Q[R++]=j;break;case 5:l[bi]?(Y[Z++]=bb|ba<<28,Y[Z++]=Q[R++]=j,bb=bc=R-1,bh++,ba=5,bd=j):Q[R++]="/";break;case 6:if(Z>2&&Y[Z-1]=="{{"&&R<bb+4&&bj==5||R<bb+3&&(bj==3||bj==4))Q[bb-1]=Y[Z-1]="{",ba=(bF=Y[Z-2])>>28,Y[Z-2]=bF&268435455,bh--;else if(Q[R-3]=="case"||bj==5&&bs=="case")j=";";Q[R++]=":";break;default:Q[R++]=j}else Q[R++]=u[j]||j;break;case 3:case 4:(bF=A[j])?(Q[R++]=j=bF,bH=2):(bF=bE=bG=0,bk=(bs=j).lastIndexOf("."),j.charAt(0)!="."&&((bF=(bE=(q[bi]||Q[R-1]=="\n")&&!p[bi])&&!Y[Z-1].indexOf("{")&&R>bb)||(bG=a[j]))&&!ba&&(bG==2&&Y[Z-1].indexOf("{")&&(bG=0),cy(bG)),bE&&!Y[Z-1]&&(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2),bF&&ba&&!a[j]&&!v[j]&&(Q[R++]=bh?bA:bz),bk>0&&j.charAt(0)!="."?U[Q[R++]=bm=j]=1:Q[R++]=j);break;case 5:(bF=(bE=(q[bi]||Q[R-1]=="\n")&&!p[bi])&&!Y[Z-1].indexOf("{")&&R>bb)&&!ba&&cy(),bE&&!Y[Z-1]&&(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2),bF?Q[R++]=Q[R-2]!="\n"&&t[bi]?"+":bh?bA:bz:t[bi]&&(Q[R++]="+"),Y[Z++]=bb|ba<<28,Y[Z++]=Q[R++]=j,bb=bc=R-1,bh++,ba=5,bd=j;break;case 6:if(j=="*/"||j=="-->")throw{t:"Unmatched comment "+j,p:bB};bn=ba,bo=bi,bp=bj,ba=6,bd=j;break;case 7:Q[R-1]==")  "||Q[R-2]==")  "&&R--?Y[Z-1]!="("&&Y[Z-1]!="["?(Y[Z++]=bb|ba<<28,Y[Z++]="{{",Q[R++]=bC,bb=R,ba=1,bh++,Q[R++]=""):(Y[Z++]=bb,Y[Z++]=Q[R++]=j,bb=R,ba=1):F[Y[Z+1]]&&bi==")   "||n[bi]?(Y[Z++]=bb,Y[Z++]=Q[R++]=j,bb=R,Q[R++]=""):((bF=(bE=(q[bi]||Q[R-1]=="\n")&&!p[bi])&&!Y[Z-1].indexOf("{")&&R>bb)&&!ba&&cy(),bE&&!Y[Z-1]&&(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2),bF?Q[R++]=Q[R-2]!="\n"&&t[bi]?"+''+":bh?bA:bz:t[bi]&&(Q[R++]=bi=="}"?"+''+":"+"),Y[Z++]=bb|ba<<28,Y[Z++]=Q[R++]="{{",!bh&&bb!=R&&V++,bh++,bc=bb=R,ba=0);break;case 8:Y[Z-1]||(Q[R++]=")",Q[R++]="\n",Z-=2);if(c[bF=Y[--Z]]!=(Q[R++]=j))throw{t:"Cannot close "+bF+" with "+j,p:bB};bF=="{{"?(bb==R-1?Y[Z-1]>>28<=1?(Q[bb-1]="{",Q[R-1]="}"):Q[bb-1]=Q[R-1]="'":ba?Q[bb-1]==bC?bb==R-2?(Q[bb-1]="{",Q[R-1]="}"):Q[R-1]=bD:Q[R-1]=bv:(Q[bb-1]="(",Q[R-1]=")"),ba=(bF=Y[--Z])>>28,bb=bF&268435455,bc=R,bh--,bh||V++,ba==7&&(Q[R++]='+"\\"',ba=4)):bb=Y[--Z];break;case 9:(bj==3&&!m[bi]&&bi!="$"||bi==")"||bi=="]")&&Q[R-1]!="\n"?(Q[R++]="[",Y[Z++]=bb|ba<<28,Y[Z++]=j,bc=bb=R):(bl=null,(bG=f[bi])?(R--,bi=Q[R-1]):bG=B[Y[Z-1]]||B[bh?0:K],(bF=(bE=(q[bi]||Q[R-1]=="\n")&&!p[bi])&&!Y[Z-1].indexOf("{")&&(R>bb||Y[Z-1].length==1))&&!ba&&cy(),bE&&!Y[Z-1]&&(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2),bF?Q[R++]=Q[R-2]!="\n"&&t[bi]?"+":bh?bA:bz:t[bi]&&(Q[R++]="+"),!bh&&R!=bb&&V++,bh++,Y[Z++]=bb|ba<<28,Y[Z++]=Q[R++]=bG,bc=bb=R,$[bb]=bB,ba=3);break;case 10:Y[Z-1]||(Q[R++]=")",Z-=2);if(c[bF=Y[--Z]]!=(Q[R++]=j))throw{t:"Cannot close "+bF+" with "+j,p:bB};bb=Y[--Z]&268435455;break;case 11:(bF=(bE=(r[bi]||Q[R-1]=="\n")&&!p[bi])&&!Y[Z-1].indexOf("{")&&R>bb)&&!ba&&cy(),bE&&!Y[Z-1]&&(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2),bF&&ba&&(Q[R++]=bh?bA:bz,bj=0),(bG=F[bi])?(Q[R-1]==" "&&R--,Q[R-1]=bG,Y[Z++]=bb,Y[Z++]=bi,bb=bc=R):(bj==3?bk<0?(bF=0,bi=="function"||Q[R-3]=="function"||Q[R-4]=="function"?(Y[Z++]=bb,Y[Z++]="function",Q[R++]="(",bb=bc=R,bi!="function"&&P&&Z==4&&(Q[bF=Q[R-4]=="function"?R-4:R-5]="var "+bi+" = "+P+"."+bi+" = function",Q[bF+2]="")):!v[bi]&&Q[R-3]!="new"?(Q[R++]=".call(_n",Y[Z++]=bb,Y[Z++]="_call",bb=bc=R):(Y[Z++]=bb,Y[Z++]=Q[R++]=j,bb=bc=R)):bk>1&&J&&(I[bF=bi.substring(0,bk)]||I[bF=bi])?(Q[--R]==" "&&R--,Q[R++]=bw,Q[R++]=bF,Q[R++]=",'",Q[R++]=bi.slice(bk+1),Q[R++]=bx,Y[Z++]=bb,Y[Z++]="async",bb=bc=R,S++):(bi.indexOf(".")!=bk&&(U[bi.slice(0,bk)]=1),Y[Z++]=bb,Y[Z++]=Q[R++]=j,bb=bc=R):(Y[Z++]=bb,Y[Z++]=Q[R++]=j,bb=bc=R),bi==bm&&delete U[bi]);break;case 12:Y[Z-1]||(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2);if(bG=G[bF=Y[--Z]])bF!="_call"&&(j=")   "),(bE=bt[bF])&&bE!=Q[R-1]&&(Q[bb-1]=bE+","),Q[R++]=bG;else if(c[bF]!=(Q[R++]=j))throw{t:"Cannot close "+bF+" with "+j,p:bB};bb=Y[--Z]&268435455;break;case 13:R==bb||s[bi]||Q[R-1]=="\n"?((bF=(bE=(q[bi]||Q[R-1]=="\n")&&!p[bi])&&!Y[Z-1].indexOf("{")&&R>bb)&&!ba&&cy(),bE&&!Y[Z-1]&&(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2),bF?Q[R++]=Q[R-2]!="\n"&&t[bi]?"+''+":bh?bA:bz:t[bi]&&(Q[R++]="+"),br=null,Q[R++]='"',Q[R++]="<",bh++,Y[Z++]=bb|ba<<28,Z+=3,Y[Z-2]=Y[Z-1]=0,bc=bb=R-1,ba=4):Q[R++]="<";break;case 14:Q[R++]=">";break;case 15:Z&&!Y[Z-1]&&(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2)}break;case 2:switch(bH){case 1:bg++,bq=bB,R!=bb&&R!=bc&&(Q[R++]="\\n");break;case 2:R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]=z[j]||j;break;case 3:R==bc&&(Q[R]=R++==bb?'"':'+"'),j.charAt(j.length-1)=="$"?(Q[R++]=j.slice(0,-1),Q[R++]=j="$"):Q[R++]=j;break;case 5:R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]=j=='"'?'\\"':"'";break;case 7:R==bc?R!=bb&&(Q[R++]="+"):(Q[R++]='"+',bh||V++),Y[Z++]=bb|536870912,Y[Z++]=Q[R++]="{{",bh++,bc=bb=R,ba=0;break;case 9:bl=null,(bG=g[bi])&&Q[R-1]==bi?--R-1==bb&&R--:bG=B[bh||bb!=R?0:K],R!=bb&&(Q[R]=R++==bc?"+":(bh||V++,'"+'),bh||V++),Y[Z++]=bb|536870912,Y[Z++]=Q[R++]=bG,bc=bb=R,bh++,ba=3;break;case 15:if(Z)throw{t:"Unclosed "+Y[Z-1]+" found at end in textmode",p:bB};R!=bb&&R!=bc&&(Q[R++]='"',bh||V++);break;default:R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]=j}break;case 3:switch(bH){case 0:R!=bb&&(R==bc&&(Q[R++]='+"'),Q[R++]=j);break;case 1:bg++,bq=bB;break;case 2:if(j==":"&&bi==":"&&!d[bG=Q[R-2]]&&(bF=Y[Z-2])>>28!=6){Q[R-2]=='+"'?(Q[R-2]=Q[R-1]="",bl="#"):(Q[R-1]='"',bc==bb?bl=Q.slice(bc+1,R-1).join(""):bl="#");if(!(bG=C[Q[bb-1]]))throw{t:"Invalid model found for: "+Q[bb-1],p:bB};Q[bb-1]=bG,Q[R++]=",",bc=bb=R}else j==","&&(bF=Y[Z-2]>>28)<=1?(R=bb-1,bE=be.slice($[bb]+1,bB+1),bj=9,ba=bF,Q[R++]=bi="[",Y[Z-2]=Y[Z-2]&268435455|ba<<28,Y[Z-1]=bi,bc=bb=R,bh--,bh||W--,bE.length>1&&(_.push(be),(be=bE).replace(D,cz),be=_.pop())):(R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]=u[j]||j);break;case 3:R==bc&&(Q[R]=R++==bb?'"':'+"'),j.charAt(j.length-1)=="$"?(Q[R++]=j.slice(0,-1),Q[R++]=j="$"):Q[R++]=j;break;case 5:R==bc&&(Q[R]=R++==bb?'"':'+"'),Y[Z-1]=="["?Y[Z-1]=j:Y[Z-1]==j&&(Y[Z-1]="["),j=='"'&&(Q[R++]="\\"),Q[R++]=j;break;case 7:R==bc?R!=bb&&(Q[R++]="+''+"):Q[R++]='"+',Y[Z++]=bb|805306368,Y[Z++]=Q[R++]="{{",bh++,bc=bb=R,ba=0,bl&&Y[Z-3]!=g["$"]&&(T.push(bl,"#"),bl=null,X++);break;case 9:Y[Z-1]=="'"||Y[Z-1]=='"'||(bj!=3||bi=="$")&&bi!=")"&&bi!="]"?(bl&&(T.push(bl,"#"),X++),bl=null,(bG=g[bi])&&Q[R-1]==bi?R--:bG=B[0],R==bc?R!=bb&&(Q[R++]="+"):Q[R++]='"+',Y[Z++]=bb|805306368,Y[Z++]=Q[R++]=bG,bh++,bc=bb=R,ba=3):(R==bc&&(Q[R]=R++==bb?'"':'+"'),Y[Z++]=bb|1610612736,Y[Z++]=Q[R++]="[");break;case 10:Z--,ba=(bG=Y[--Z])>>28,bG&=268435455;if(ba==6){if(Y[Z+1]!="[")throw{t:"In xpath, cannot close "+Y[Z+1]+" with "+j,p:bB};R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]="]",ba=3}else{if(R==bb)Y[Z]>>28<=1?(Q[bb-1]="[",Q[R++]="]"):Q[bb-1]=Q[R++]='"',bc=R;else{R!=bc&&(Q[R++]='"');if(bc==bb){bF=Q.slice(bc+1,R-1).join("");if(N&&Q[bb-1]!=","&&bF!=(bE=bF.replace(E,"$1self::"))&&Y[Z+1]!=g["$"]){Q[bb+1]=bF=bE;for(bE=bb+2;bE<R-1;bE++)Q[bE]=""}}else(bE=Q[bb-1])!=","?(bF="#",N&&(Q[bb-1]=bE+"_injself(",Q[R++]=")")):bF="";Y[Z+1]!=g["$"]&&bF&&(T.push(bl,bF),bl&&X++),Q[R++]=") ",bc=R,ba==7&&(Q[R++]='+"\\"',ba=4)}bh--,bl=null,bh||(V++,W++)}bb=bG;break;case 11:R==bc&&(Q[R]=R++==bb?'"':'+"'),Y[Z++]=bb|805306368,Y[Z++]=Q[R++]="(";break;case 12:R==bc&&(Q[R]=R++==bb?'"':'+"');if(c[bF=Y[--Z]]!=(Q[R++]=j))throw{t:"Cannot close "+bF+" with "+j,p:bB};bb=Y[--Z]&268435455;break;case 15:throw{t:"Unexpected end whilst parsing xpath",p:bB};default:R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]=j}break;case 4:switch(bH){case 0:R==bc&&(Q[R++]='+"'),Q[R++]=" ",bj=0;break;case 1:R==bc&&(Q[R++]='+"'),bg++,bq=bB,Q[R++]="\\n",bj=1;break;case 2:R==bc&&(Q[R++]='+"');if(j=="/"&&bi=="<"){Z-=4;if(Y[Z]||Y[Z+2])throw{t:"Unexpected closing tag whilst parsing xml",p:bB}}else j==":"&&bj==3&&Q[R-2]=="<"&&(br=bi);Q[R++]=z[j]||j;break;case 3:R==bc&&(Q[R++]='+"'),j.charAt(j.length-1)=="$"?(Q[R++]=j.slice(0,-1),Q[R++]=j="$"):Q[R++]=j;break;case 5:R==bc&&(Q[R++]='+"'),j=='"'&&(Q[R++]="\\"),Q[R++]=j;break;case 6:if(j=="//"&&!Y[Z-1])R==bc&&(Q[R++]='+"'),Q[R++]=j;else{if(j=="*/")throw{t:"Unmatched comment "+j,p:bB};bn=ba,bo=bi,bp=bj,ba=6,bd=j}break;case 13:br=null,R==bc&&(Q[R++]='+"'),Q[R++]=j,Y[Z]=Y[Z+2]=0,Z+=4,Y[Z-1]=0;break;case 14:R==bc&&(Q[R++]='+"'),Q[R++]=j;if(bi!="<"){if(bi=="/"){Z-=4;if(Y[Z+2])throw{t:"Unexpected / whilst parsing xml",p:bB};Q[R-3]=="<"&&(R-=2,Q[R-1]="")}else Z-=2;Y[Z]?(bh--,Q[R++]='"',bb=Y[Z],bc=R,ba=bb>>28,bb&=268435455):Y[Z-1]=1}else R--,Q[R-1]="";break;case 9:bl=null,bi=="!"&&Q[R-2]=="<"&&!Y[Z-1]?(Q[R++]=j,Y[Z++]=bb|ba<<28,Y[Z++]="]]>",bb=bc=R-1,bh++,ba=5):(Y[Z-1]?((bF=i[bi])?R--:bF=B[L],Y[Z++]=bb|1073741824):(Y[Z++]=bb|1073741824,(bF=h[bi])?(R--,Q[R-1]=="="&&(bi="=")):bF=B[br?M:8],bi=="="&&(Q[R++]='\\"',Y[Z-1]=bb|1879048192)),Q[R]=R++==bc?"+''+":'"+',bh++,Y[Z++]=Q[R++]=bF,bc=bb=R,ba=3);break;case 7:!Y[Z-1]&&bi=="="?(Q[R++]='\\"',Y[Z++]=bb|1879048192):Y[Z++]=bb|1073741824,Q[R]=R++==bc?"+''+":'"+',Y[Z++]=Q[R++]="{{",bh++,bc=bb=R,ba=0;break;default:R==bc&&(Q[R++]='+"'),Q[R++]=j;break;case 15:throw{t:"Unexpected end whilst parsing xml",p:bB}}break;case 5:switch(bH){case 1:bg++,bq=bB,R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]="\\n";break;case 2:j=="/"&&Y[Z-1]=="/"?(Q[R++]="/",bb=Y[Z-=2],bc=R,ba=bb>>28,bb&=268435455,bh--):(R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]=Y[Z-1]!="/"&&y[j]||j);break;case 3:R==bc&&(Q[R]=R++==bb?"":'+"'),j.charAt(j.length-1)=="$"?(Q[R++]=j.slice(0,-1),Q[R++]=j="$"):Q[R++]=j;break;case 5:Y[Z-1]==j?(bb!=bc?Q[R]=R++!=bc?j+")":")":Q[R++]=j,bb=Y[Z-=2],bc=R,ba=bb>>28,bb&=268435455,bh--):(R==bc&&(Q[R]=R++==bb?'"':'+"'),Q[R++]=j=='"'?'\\"':j);break;case 6:Y[Z-1]=="/"&&j=="*/"?(Q[R++]="*/",bb=Y[Z-=2],bc=R,ba=bb>>28,bb&=268435455,bh--):(R==bc&&(Q[R]=R++==bb?"":'+"'),Q[R++]=j);break;case 7:Y[Z-1]!="'"&&Y[Z-1]!="/"?(Y[Z-1]=='"'&&(Q[bb]='("'),R==bc?R!=bb&&(Q[R++]="+"):Q[R++]='"+',Y[Z++]=bb|1342177280,Q[R++]=Y[Z++]="{{",bh++,bc=bb=R,ba=0):Q[R++]=j;break;case 9:Y[Z-1]!="'"&&Y[Z-1]!="/"&&(Y[Z-1]=='"'&&(Q[bb]='("')||R!=bb+2||bi!="CDATA")?(bl=null,(bG=g[bi])&&Q[R-1]==bi?R--:bG=B[0],R!=bb&&(Q[R]=R++==bc?"+":'"+'),Y[Z++]=bb|1342177280,Y[Z++]=Q[R++]=bG,bc=bb=R,bh++,ba=3):Q[R++]=j;break;case 14:R==bc&&(Q[R]=R++==bb?"":'+"'),Q[R++]=j,Y[Z-1]=="]]>"&&bi=="]"&&Q[R-3]=="]"&&(bb=Y[Z-=2],ba=bb>>28,bb&=268435455,bh--,Z-=4,Y[Z]?(bh--,Q[R++]='"',bb=Y[Z],bc=R,ba=bb>>28,bb&=268435455):Y[Z-1]=1);break;case 15:throw{t:"Unexpected end whilst parsing string",p:bB};default:R==bc&&(Q[R]=R++==bb?"":'+"'),Q[R++]=j}break;case 6:switch(bH){case 1:bg++,bq=bB,bd=="//"&&(ba=bn,j=bi=bo,bH=bj=bp);break;case 6:if(bd=="/*"&&j=="*/"||bd=="<!--"&&j=="-->")ba=bn,j=bi=bo,bH=bj=bp;break;case 15:if(bd!="//")throw{t:"Unexpected end whilst parsing comment",p:bB};ba=bn,j=bi=bo,bH=bj=bp,Z&&!Y[Z-1]&&(Q[R-1]=="\n"&&(Q[R-1]=""),Q[R++]=")",Q[R++]="\n",bF=1,Z-=2)}}bH>1&&(bi=j,bj=bH)}function cA(a,b,c,d){throw a.t?new Error(apf.formatErrorString(0,null,"Parsing live markup source","Error whilst parsing: "+a.t+" on line:"+bg+" col:"+(a.p-b-2)+(c?" part: "+c:"")+"\n"+be)):new Error(apf.formatErrorString(0,null,"Compiling live markup function on line "+d,"Error whilst compiling: "+a.message+"\nInput:\n"+be+"\nGenerated:\n"+apf.lm.lastCode()))}var a={"var":1,"for":1,"while":1,"do":1,"if":1,"else":1,"switch":1,"case":1,"break":1,"continue":1,"default":1,"function":2,"return":1,"try":1,"catch":1,"throw":1,"debugger":1,alert:1,confirm:1,setTimeout:1,setInterval:1,"delete":1,"export":1,"import":1,label:1,foreach:1,each:1,eachrev:1,foreachrev:1,node:1,local:1,yield:1,let:1,"finally":1,"delete":1},b={"\n":1,"\r\n":1,"==":2,"++":2,"--":2,'"':5,"'":5,"<!--":6,"-->":6,"/*":6,"//":6,"*/":6,"{":7,"}":8,"[":9,"]":10,"(":11,")":12,"<":13,">":14,"+=":2,"-=":2,"/=":2,"*=":2,"!=":2},c={"{":"}","[":"]","(":")","{{":"}"},d={ancestor:1,"ancestor-or-self":1,attribute:1,child:1,descendant:1,"descendant-or-self":1,following:1,"following-sibling":1,namespace:1,parent:1,preceding:1,self:1},e={";":1,",":2,"^":3,"=":4,"+=":4,"-=":4,"/=":4,"*=":4,"/":5,":":6},f={"~":"_val(_n,","%":"_nod(_n,","*":"_nods(_n,","#":"_cnt(_n,",$:"_lng("},g={"~":"_val(_n,","%":"_xml(_n,","*":"_xmls(_n,","#":"_cnt(_n,",$:"_lng("},h={"~":"_val(_n,","%":"_val(_n,","*":"_val(_n,","#":"_cnt(_n,",$:"_lng("},i,j={"~":"_val(_n,","%":"_xml(_n,","*":"_xmls(_n,","#":"_cnt(_n,",$:"_lng("},k={"~":"_val(_n,","%":"_xml(_n,","*":"_xmls(_n,","#":"_cnt(_n,",$:"_lnged("},l={"[":1,"(":1,",":1,"=":1,"return":1,"throw":1},m={"else":1,"return":1,"delete":1},n={"do":1,"else":1,"try":1},o={"=":"_asn(","+=":"_add(","-=":"_sub(","/=":"_div(","*=":"_mul("},p={"+":1,"%":1,"-":1,"/":1,"=":1,"(":1,"?":1,"|":1,"^":1,"[":1,"&":1,"*":1,"!":1,":":1,"<":1,",":1},q={"{":1,"} ":1,")":1,")   ":1,";":1,"\n":1,"else":1},r={"{":1,";":1,"\n":1,"else":1},s={"} ":1,")   ":1,"(":1,";":1,"&":1,"^":1,"|":1,",":1,'"':1,"'":1,"=":1,"!=":2,"+=":2,"-=":2,"/=":2,"*=":2,"?":1,"{":1,"}":1,">":1,"[":1,"+":1,":":1,"else":1,"return":1},t={'"':1,"'":1,">":1,"]":1,"}":1},u={'\\"':'"',"\\'":"'","\\{":"{","\\}":"}","\\[":"[","\\]":"]","\\(":"(","\\)":")","\\\\":"\\"},v={alert:1,confirm:1,setTimeout:1,setInterval:1,"switch":1,call:1,"return":1,"throw":1,"case":1,"catch":1,abs:1,acos:1,asin:1,atan:1,atan2:1,ceil:1,cos:1,exp:1,floor:1,log:1,max:1,min:1,pow:1,random:1,round:1,sin:1,sqrt:1,tan:1,lin:1,linear:1,idx:1,sort:1,"typeof":1},w={" ":1,"\n":1},x={"{":1,";":1,"(":1,"\n":1},y={"\\{":"{","\\}":"}","\\[":"[","\\]":"]","\\(":"(","\\)":")"},z={"\\{":"{","\\}":"}","\\[":"[","\\]":"]","\\(":"(","\\)":")","\\\\":"\\\\\\\\","\\":"\\\\","\\<":"<","\\>":">"},A={lte:"<=",gte:">=",lt:"<",gt:">",and:"&&",or:"||",andbin:"&",orbin:"|",LTE:"<=",GTE:">=",LT:"<",GT:">",AND:"&&",OR:"||",ANDBIN:"&",ORBIN:"|"},B={0:"_val(_n,",1:"_valcr(_n,_cr,",2:"_nod(_n,",3:"_nodcr(_n,_cr,",4:"_nods(_n,",5:"_xpt(_n,",6:"_valst(_n,",7:"_valed(_n,",8:"_valattr(_n,",foreach:"_nods(_n,",each:"_nods(_n,",foreachrev:"_nods(_n,",eachrev:"_nods(_n,",xabs:"_valst(_n,",local:"_nod(_n,",tagName:"_nod(_n,",localName:"_nod(_n,",xml:"_xmlq(",_call:"_val(_n,"},C={"_val(_n,":"_valm(","_valcr(_n,_cr,":"_valcr(0,_cr,","_nod(_n,":"_nodm(","_nodcr(_n,_cr,":"_nodcr(0,_cr,","_nods(_n,":"_nodsm(","_argwrap(_n,":"_argwrapm(","_xml(_n,":"_xml(0,","_xmls(_n,":"_xmls(0,","_cnt(_n,":"_cntm(","_xpt(_n,":"_xptm(","_valst(_n,":"_valm(","_valed(_n,":"_valed(0,","_lng(":"_lng(","_lnged(":"_lnged("},D=/(\r?[\n]|\/\*|\*\/|\/\/|\<\!\-\-|\-\-\>|[=\!+\/\*-]=|\+\+|\-\-|["'{(\[\])}\]\<\>]|$)|([ \t]+)|([a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF.$_][\w.$_]*)|(\d[x\d.]*)|(\\?[\w._?,:;!=+-\\\/^&|*"'[\]{}()%$#@~`<>]?)/g,E=/(^|\|)(?!\@|text\(\)|\.\.|[\w\-\:]+?\:\:)/g,F={},G={},H={},I=apf.$asyncObjects||{comm:1,rpc:1,http:1,"apf.ajax":1},J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y=[],Z,$=[],_=[],ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs;F["if"]="if(",G["if"]=")",F["while"]="while(",G["while"]=")",F["for"]="for(",G["for"]=")",F["switch"]="switch(",G["switch"]=")",F["catch"]="catch(",G["catch"]=")",G["function"]=")  ",F.foreach=F.each="\nfor(var _t=_t||[],_t=(_t.push(_n,0,(",G.foreach=G.each=")||[]),_t);(_n=_t[_t.length-1][_t[_t.length-2]++])||(_t.length-=2,_n=_t.pop(),0);)",F.foreachrev=F.eachrev="\nfor(var _t=_t||[],_t=(_t.push(_n,0,(",G.foreachrev=G.eachrev=")||[]),_t);(_n=_t[_t.length-1][_t[_t.length-1].length-(_t[_t.length-2]++)-1])||(_t.length-=2,_n=_t.pop(),0);)",F.local="\nfor(var _t=_t||[],_t=(_t.push(_n,((_n=_local(",G.local=")),1)),_t);(_t[_t.length-1]--&&_n)||(_t.length--,_n=_t.pop(),0);)",F._editlm="_valedx(true, ",F._editnormal="_valedx(false, ",G.edit=")",F.xabs="  (  ",G.xabs="  )  ",F.localName="_localName(_n",G.localName=")",F.output="_o.join(''",G.output=")",F.reset="(_o=[],l=0",G.reset=")",F.index="apf.getChildNumber.call(apf",G.index=")",F.item="(_t[_t.length-1][_t[_t.length-2]-1]",G.item=")",F.first="(_t[_t.length-2]==1",G.first=")",F.last="(_t[_t.length-2]==_t[_t.length-1].length",G.last=")",F.total="(_t[_t.length-1].length",G.total=")",F.pos="(_t[_t.length-2]-1",G.pos=")",F.tagName="_tagName(_n",G.tagName=")",F._nodeValue="_nodeValue(_n",G._nodeValue=")",G.async="])",G.precall="])",G._call=")";var bt={_call:".call(_n",localName:F.localName,tagName:F.tagName,nodeValue:F.nodeValue,index:F.index},bu="(function(){var _o=[],_l=0;\n",bv=";return _l==1?_o[0]:_o.join('');})()",bw="_async(_n,_c,_a,_w,_f,this,",bx="',_a[++_a.i]||[",by="_r=",bz,bA="_o[_l++]=",bB="",bC="{var _o=[],_l=0,_n=this;\n",bD=";\nreturn _l==1?_o[0]:_o.join('');}",bE="(_a=_a||{}).i=0;try{\n",bF="}catch(_e){if(_e.x)return;throw(_e);}\n",bG="(_a=_a||{}).i=0;try{_precall(_w);",bH="}catch(_e){if(_e.x)return;throw(_e);}",bI="with(_w){",bJ="}",bK="var _o=[],_l=0;_o[_l++]=",bL="var _o=[],_l=0;\n",bM=";\nreturn _ret(_l==1?_o[0]:_o.join(''));",bN=";\n_c(_ret(_l==1?_o[0]:_o.join('')),apf.SUCCESS,apf.$lmx);apf.$lmx=null;",bO="return _ret(",bP=");",bQ="_c(_ret(",bR="),apf.SUCCESS,apf.$lmx);apf.$lmx=null;\n",bS="var _r=",bT="var _r;",bU=";\nreturn _r;",bV=";\n_c(_r,apf.SUCCESS,apf.$lmx);apf.$lmx=null;",bW=";\n_c(0,apf.SUCCESS,apf.$lmx);apf.$lmx=null;;",bX="return ",bY="",bZ="_c(",b$=",apf.SUCCESS);",b_="var _f=function(_n,_c,_w,_a){",ca="var _f=function(_n,_w){",cb="var _f=function(_n){",cc="var _f=function(_n,_c,_w,_cr,_a){",cd="var _f=function(_n,_w,_cr,){",ce="var _f=function(_n,_cr){",cf="var _f=function(event,_c,_w,_a,_n){",cg="var _f=function(event,_w,_n){",ch="var _f=function(event,_n){",ci="}",cj="var _f=function(_m){",ck=";\nif(_n=_r){if(!_n.nodeType)_n=_m;",cl=";\nif(_n=",cm="){if(!_n.nodeType)_n=_m;",cn="\nreturn ",co="\nreturn _ret(",cp=");",cq="\nreturn _n;",cr="\nreturn (_r = (",cs="))?(_r.nodeType?_r:_n):(_r===null?null:_n);",ct="var _r, _n = _m;",cu=";\n_n = _m;",cv="\nreturn _ret(_nodeValue(_n));",cw="\nreturn _n;",cx="\n}";this.lastCode=function(){return typeof Q=="object"?Q.join(""):Q};var cB={},cC={};this.resetCache=function(){cB={}};var cD=/^\s*~~(c\d+)~~/;this.compile=function(a,b){b||(b=cC);if(a==null||!a.length)return b.nostring||b.event?function(){return a}:{type:2,str:a};var c,d,e;if(a.charAt(0)=="~"&&(c=a.match(cD)))return(c=apf.lm_exec[c[1]])?c:(alert("ERROR, undefined live markup cache marker found:"+a),{type:2,str:a});var f=(b.xpathmode|(b.withopt&&16)|(b.precall&&32)|(b.alwayscb&&64)|(b.nostring&&128)|(b.parsecode&&256)|(b.nostate&&512)|(b.liveedit&&1024)|(b.langedit&&2048)|(b.injectself&&4096)|(b.event&&8192)|(b.funcglobal&&16384))+a;if(c=cB[f])return c;N=b.injectself,K=b.xpathmode||0,M=b.nostate?0:6,L=0,P=b.funcglobal?"self":b.withopt?"_w":null,J=!b.event,B.edit=b.liveedit?"_argwrap(_n,":"_argwrap(_n,",F.edit=b.liveedit?F._editlm:F._editnormal,i=b.langedit?k:j,U={},T=[],Y=[],Q=["","","",""],be=a,bf=be.length,R=bb=bc=Q.length,V=W=S=X=bh=bg=bj=bq=0,b.parsecode?(ba=0,Z=2,Y[0]=R,Y[1]="{{",bi="{",bz=b.event?"":K<=1?bA:by):(ba=2,Z=bi=0,bz=bA);if(b.nothrow)be.replace(D,cz);else try{be.replace(D,cz)}catch(g){return cA(g,bq),null}if(b.parsecode)(bh||Y[Z-1].length==1)&&cA({t:"Unclosed "+Y[Z-1]+" found at end in codemode",p:bf},bq),bc!=R&&V++;else if((R==7||R==8)&&V==1){e=0;for(c in U)e++;e!=1&&(e=0)}if(!b.nostring&&!b.event&&(ba==2&&bc==4||R==4))return{type:2,str:Q.slice(5,-1).join("").replace(/\\n/g,"\n").replace(/\\"/g,'"')};S||b.alwayscb?(b.event?(ba==1&&(Q[3]=""),Q[R++]=bW):K?ba==1?(Q[3]=Q[3]!=bu?bS:bT,Q[R++]=bV):(Q[3]=bZ,Q[R++]=b$):ba==1?(Q[3]=Q[3]!=bu?bK:bL,Q[R++]=bN):(Q[3]=bQ,Q[R++]=bR),S&&(ba==1?b.precall?(Q[2]=bG,Q[R-1]=bH+Q[R-1]):(Q[2]=bE,Q[R-1]=bF+Q[R-1]):(Q[R++]=Q[3]+"_r"+Q[R-2],b.precall?(Q[2]=bG,Q[3]=bS,Q[R-2]=bH):(Q[2]=bE,Q[3]=bS,Q[R-2]=bF))),b.withopt&&(Q[1]=bI,Q[R++]=bJ),Q[0]=b.event?cf:K==1||K==3?cc:b_,Q[R++]=ci):(b.event?ba==1&&(Q[3]=""):K?ba==1?(Q[3]=Q[3]!=bu?bS:bT,Q[R++]=bU):(Q[3]=bX,Q[R++]=bY):ba==1?(Q[3]=Q[3]!=bu?bK:bL,Q[R++]=bM):(Q[3]=bO,Q[R++]=bP),b.withopt&&(Q[2]=bI,Q[R++]=bJ),Q[0]=b.event?b.withopt?cg:ch:b.withopt?K==1||K==3?cd:ca:K==1||K==3?ce:cb,Q[R++]=ci);if(b.nothrow)d=apf.lm_exec.compile(Q.join(""));else try{d=apf.lm_exec.compile(Q.join(""))}catch(g){if(!apf.isIE){var h=window.onerror;window.onerror=function(a,b,c){return window.onerror=h,cA(g,bq,null,c),!0},apf.include("","",null,Q.join("")),window.onerror=h}else cA(g,bq);return null}return d.type=V==1&&W==1?3:e?4:1,d.xpaths=T,d.models=X,d.props=U,d.asyncs=S,cB[f]=d,d},this.compileMatch=function(a,b){b||(b=cC),U={},T=[],Q=[cj,ct],Y=[],bh=0,R=Q.length,i=j;for(var c,d,e=0,f=a.length;e<f;e+=2){if(be=a[e]){bf=Y.length,K=2,e&&(Q[R++]=cu),Q[R++]="",Y[0]=d=R=bb=bc=Q.length,bz=by,bg=bj=V=W=S=ba=bq=0,Z=2,Y[1]="{{",bi="{",N=1;if(b.nothrow)be.replace(D,cz);else try{be.replace(D,cz)}catch(g){return cA(g,bq),null}(bh||Y[Z-1].length==1)&&cA({t:"Unclosed "+Y[Z-1]+" found at end in codemode",p:bf}),S&&cA({t:"Asynchronous calls not supported in match/value"}),ba==1?(Q[d-1]=Q[d-1]!=bu?bz:"",Q[R++]=ck):(Q[d-1]=cl,Q[R++]=cm)}if(be=a[e+1]){bf=Y.length,!a[e]&&e&&(Q[R++]=cu),Q[R++]="",d=R=bb=bc=Q.length,bz=bA,K=N=bi=Z=bg=V=W=bj=S=bq=0,b.node&&(K=2),ba=2,N=0;if(b.nothrow)be.replace(D,cz);else try{be.replace(D,cz)}catch(g){return cA(g,bq),null}S&&cA({t:"Asynchronous calls not supported in match/value"}),b.node?ba==2&&bc==d||R==d?Q[d-1]=cq:(Q[d-1]=cr,Q[R++]=cs):ba==2&&bc==d||R==d?Q[d-1]=cn:(Q[d-1]=co,Q[R++]=cp);if(a[e])Q[R++]=cx;else break}else a[e]||cA({t:"Both match and value are empty"}),b.node?Q[R++]=cw:Q[R++]=cv,K=2,Q[R++]=cx}Q[R++]=ci;var h;if(b.nothrow)h=apf.lm_exec.compile(Q.join(""));else try{h=apf.lm_exec.compile(Q.join(""))}catch(g){return cA(g,bq),null}return h.type=1,h.xpaths=T,h.props=U,h.asyncs=S,h},this.setWarnLevel=function(a){apf.lm_exec.setWarnLevel(a)},this.parseExpression=function(a,b){b||(b=cC),U={},T=[],Q=[],Y=[],bh=0,i=j,be=a,bf=be.length,ob=R=bb=bc=Q.length,bz=bA,K=N=bi=Z=bg=V=W=bj=S=bq=0,ba=2;if(b.nothrow)be.replace(D,cz);else try{be.replace(D,cz)}catch(c){return cA(c,bq),null}return Q.join("")}},apf.lm_exec=new function(){function wxpath(a,b){apf.console.warn("Live Markup warning in "+b+", no results for xpath: '"+a+"'")}function wnode(a,b){apf.console.warn("Live Markup warning in "+b+", xpath on null node: '"+a+"'")}function wmodel(a,b,c){apf.console.log("Live Markup warning in "+c+", xpath on empty model: '"+a+"' xpath: '"+b+"'")}function wlang(a,b){apf.console.log("Live Markup warning in "+b+", language symbol not found: '"+a+"'")}function xmlParse(a){var b=apf.getXmlDom("<_apflmlist_>"+a+"</_apflmlist_>");return!b||!(b=b.documentElement)?null:b.firstChild==b.lastChild?b.firstChild:b}function __val(a,b){return a?(a=!a.nodeType&&a||(a=a.selectSingleNode(b))&&(a.nodeType!=1&&a||(a=a.firstChild)&&a.nodeType!=1&&a))&&a.nodeValue||"":""}function __valattrrp(a,b){return a=='"'?"&quot;":"&apos;"}function __valattr(a,b){return a?(a=a.nodeType!=1&&a||(a=a.selectSingleNode(b))&&(a.nodeType!=1&&a||(a=a.firstChild)&&a.nodeType!=1&&a))&&a.nodeValue.replace(__valattrrx,__valattrrp)||"":""}function __valm(a,b){var c;return!a||!(c=a.charAt&&(a.charAt(0)=="<"&&xmlParse(a)||(c=apf.nameserver.lookup.model[a])&&c.data)||(a.$isModel?a.data:a.charAt?0:a))?"":(c=c.nodeType!=1&&c||(c=c.selectSingleNode(b))&&(c.nodeType!=1&&c||(c=c.firstChild)&&c.nodeType!=1&&c))&&c.nodeValue||""}function __nod(a,b){return a?a.selectSingleNode(b):null}function _nods(a,b){return a?a.selectNodes(b):[]}function __nodm(a,b){var c;return!a||!(c=a.charAt&&(a.charAt(0)=="<"&&xmlParse(a)||(c=apf.nameserver.lookup.model[a])&&c.data)||(a.$isModel?a.data:a.charAt?0:a))?null:c.selectSingleNode(b)}function _nodsm(a,b){var c;return!a||!(c=a.charAt&&(a.charAt(0)=="<"&&xmlParse(a)||(c=apf.nameserver.lookup.model[a])&&c.data)||(a.$isModel?a.data:a.charAt?0:a))?[]:c.selectNodes(b)}function __cnt(a,b){return a?a.selectNodes(b).length:0}function __cntm(a,b){var c;return!a||!(c=a.charAt&&(a.charAt(0)=="<"&&xmlParse(a)||(c=apf.nameserver.lookup.model[a])&&c.data)||(a.$isModel?a.data:a.charAt?0:a))?0:c.selectNodes(b).length}function _xpt(a,b){return{xpath:b,toString:function(){return"LM Xpath object: "+this.x}}}function _xptm(a,b){if(a&&!a.$isModel){var c=a;a=apf.xmldb.findModel(a),b=apf.xmlToXpath(c,a.data)+"/"+b}return{model:a,xpath:b,toString:function(){return"LM Xpath object with model: "+this.x}}}function _xml(a,b,c){if(a)c=b;else if(!b||!(a=b.charAt&&(b.charAt(0)=="<"&&xmlParse(b)||(a=apf.nameserver.lookup.model[b])&&a.data)||(b.$isModel?b.data:b.charAt?0:b)))return"";return a&&(a=a.selectSingleNode(c))&&a.xml||""}function _xmls(a,b,c){if(a)c=b;else if(!b||!(a=b.charAt&&(b.charAt(0)=="<"&&xmlParse(b)||(a=apf.nameserver.lookup.model[b])&&a.data)||(b.$isModel?b.data:b.charAt?0:b)))return"";for(var d=0,e=(a=a.selectNodes(c)).length,f=[];d<e;d++)f[d]=a[d].xml;return f.join("")}function _valcr(a,b,c,d){if(a)d=c;else if(!c||!(a=c.charAt&&(c.charAt(0)=="<"&&xmlParse(c)||(a=apf.nameserver.lookup.model[c])&&a.data)||(c.$isModel?c.data:c.charAt?0:c)))return"";if(b)apf.createNodeFromXpath(ni,d);else if(a=ni.selectSingleNode(d))return(a=a.nodeType!=1&&a||(a=a.selectSingleNode(d))&&(a.nodeType!=1&&a||(a=a.firstChild)&&a.nodeType!=1&&a))&&a.nodeValue||"";return""}function _nodcr(a,b,c,d){if(a)d=c;else if(!c||!(a=c.charAt&&(c.charAt(0)=="<"&&xmlParse(c)||(a=apf.nameserver.lookup.model[c])&&a.data)||(c.$isModel?c.data:c.charAt?0:c)))return null;return a.selectSingleNode(d)||b&&apf.createNodeFromXpath(a,d)}function _valst(a,b){var c=apf.xmldb.findModel(a);return c?"["+c.id+"::"+apf.xmlToXpath(a,c.data,!0)+(!b||b=="."?"":"/"+b)+"]":""}function _asn(a,b,c){if(!a||typeof a!="object")throw new Error(apf.formatErrorString(0,0,"LM Property Assign","Cannot assign property on non object, property:"+b));return a.setAttribute?a.setAttribute(b,c):a[b]=c,c}function _add(a,b,c){return _asn(a,b,a&&a[b]+c)}function _sub(a,b,c){return _asn(a,b,a&&a[b]-c)}function _div(a,b,c){return _asn(a,b,a&&a[b]/c)}function _mul(a,b,c){return _asn(a,b,a&&a[b]*c)}function _local(a){return a&&a.charAt&&a.charAt(0)=="<"?apf.getXmlDom(a).documentElement:a}function _tagName(a,b){return b&&b.tagName||a&&a.tagName}function _localName(a,b){return b&&b[apf.TAGNAME]||a&&a[apf.TAGNAME]}function _nodeValue(a,b){return b&&(a=b),(a=a.nodeType!=1&&a||a.nodeType!=1&&a||(a=a.firstChild)&&a.nodeType!=1&&a)&&a.nodeValue||""}function __ret(a){return a}function __lng(a,b){return"$["+a+"]"}function _lnged(a,b){return"$["+a+"]"}function _(a,b,c){return'<span class="liveEdit" xpath="'+(a?(b.substr(0,1)!="/"?apf.xmlToXpath(a,null,!1):"")+"/"+b:"")+'">'+((a?__val(a,b):__valm(b,c))||"&#32;")+"</span>"}function _argwrap(a,b){return[a,b]}function _argwrapm(a,b){return[0,a,b]}function _valedx(a,b,c){return b[3]=c,b[4]=a,_valed.apply(this,b)}function _valed(a,b,c,d,e){var f=a?__val(a,b):__valm(b,c);d&&d.multiline&&d.editor!="richtext"&&(f=f.replace(/\n/g,"<br />"));if(e!==!1){var g=f||d&&d.initial||"&#32;";if(!d||!d.richtext)g=apf.htmlentities(g);return d&&d.multiline&&(g=g.replace(/&lt;br ?\/?&gt;/g,"<br />").replace(/&lt;(\/?div)&gt;/g,"<$1>")),'<div onmousedown="apf.LiveEdit.mousedown(this, event)" class="liveEdit'+(d&&d.multiline?" liveeditMultiline":"")+(!f&&d&&d.initial?" liveEditInitial":"")+'" xpath="'+(a?((b.substr(0,1)!="/"?apf.xmlToXpath(a,null,!1):"")+"/"+b).replace(/([\[\{\}\]])/g,"\\$1"):self[b]?(b+".queryNode('"+c.replace(/'/g,"\\'")+"')").replace(/([\[\{\}\]])/g,"\\$1"):"")+'"'+(d?' options="'+JSON.stringify(d).escapeHTML().replace(/"/g,"&quot;").replace(/([\[\{\}\]])/g,"\\$1")+'"'+(d.editor?' editor="'+d.editor+'"':""):"")+">"+g+"</div>"}return f}function _injself(a){return a.charAt?a.replace(selfrx,"$1self::"):a}function _async(a,b,c,d,e,f,g,h,i){var j=c.i,k;c.ret||(c.ret=[]);if(c[j])return c.ret[j];c[j]=!0;if(!g.exec)return c.ret[j]=h?g[h].apply(g,i):g.apply(g,i);var l=function(g,h,i){d&&delete d._pc,h!=apf.SUCCESS?b(null,h,i):(apf.$lmx=i,c.ret[j]=g,d?e.call(f,a,b,d,c):e.call(f,a,b,c))};throw d&&d._pc?d._pc={obj:g,func:h,args:i,message:g.createMessage&&g.createMessage(h,i),_c:b,cb:l}:g.exec(h,i,l),{x:1}}function _precall(a){var b;if(typeof (b=a._pc)!="object"||!b)return;throw b.obj.exec(b.func,b.args,b.cb,{message:b.message}),{x:1}}function sort(a,b,c){var d=new apf.Sort;return c=c||{},b.charAt||(b=""),b.charAt(0)=="@"?(b=b.slice(1),c.getValue=function(a){return a.getAttribute(b)}):c.getValue=function(a){return apf.queryValue(a,b)},d.set(c),d.apply(apf.getArrayFromNodelist(a))}function _cthex(b){var c;if((c=typeof b)=="string"){if(b.indexOf("#")==0)return b.length==7?parseInt(b.slice(-1),16):parseInt(b.slice(-1),16);if(c=_clut[a])return c;if(b=b.match(_cparse)){if((c=b[1])=="rgb")return(((c=b[2])<0?0:c>255?255:parseInt(c))<<16)+(((c=b[3])<0?0:c>255?255:parseInt(c))<<8)+((c=b[4])<0?0:c>255?255:parseInt(c));var d=parseFloat(b[2]),e=parseFloat(b[3]),f=parseFloat(b[4]),g,h=f*(1-e),i=f*(1-e*((g=floor((d<0?-d:d)%1*6))?d-g:1-(d-g)));switch(g){case 6:case 0:return((f&255)<<16)+((i&255)<<8)+(h&255);case 1:return((i&255)<<16)+((f&255)<<8)+(h&255);case 2:return((h&255)<<16)+((f&255)<<8)+(i&255);case 3:return((h&255)<<16)+((i&255)<<8)+(f&255);case 4:return((i&255)<<16)+((h&255)<<8)+(f&255);default:case 5:return((f&255)<<16)+((h&255)<<8)+(i&255)}}}else if(c=="number")return c;return null}function lin(a,b,c){var d=parseFloat(b),e=parseFloat(c),f=1-(a=a<0?0:a>1?1:a);return d!=b||e!=c?((d=_cthex(b))&16711680)*a+((e=_cthex(c))&16711680)*f&16711680|(d&65280)*a+(e&65280)*f&65280|(d&255)*a+(e&255)*f&255:a*d+f*e}function tsin(a){return.5*sin(a)+.5}function tcos(a){return.5*cos(a)+.5}function usin(a){return.5-.5*sin(a)}function ucos(a){return.5-.5*cos(a)}function snap(a,b){return round(a/b)*b}function clamp(a,b,c){return a<b?b:a>c?c:a}var wlvl=1;this.setWarnLevel=function(a){wlvl=a};var __valattrrx=/(["'])/g,selfrx=/(^|\|)(?!\@|text\(\)|\.\.|[\w\-\:]+?\:\:)/g;apf.$lmx=null;var _clut=apf.color?apf.color.colorshex:{},_cparse=/^(rgb|hsv|hsb)\(\s+(\d+)\s+,\s+(\d+)\s+,\s+(\d+)\)/,abs=Math.abs,acos=Math.acos,asin=Math.asin,atan=Math.atan,atan2=Math.atan2,ceil=Math.ceil,cos=Math.cos,exp=Math.exp,floor=Math.floor,log=Math.log,max=Math.max,min=Math.min,pow=Math.pow,random=Math.random,round=Math.round,sin=Math.sin,sqrt=Math.sqrt,tan=Math.tan,linear=lin;this.compile=function(code){var _ret=__ret,_val=__val,_valm=__valm,_nod=__nod,_nodm=__nodm,_cnt=__cnt,_cntm=__cntm,_lng=__lng,_valattr=__valattr;return eval(code),_f},this.compileWith=function(code,withs){var _ret=__ret,_val=__val,_valm=__valm,_nod=__nod,_nodm=__nodm,_cnt=__cnt,_cntm=__cntm,_lng=__lng,_valattr=__valattr;return eval(code),_f};var LMBEGINCACHE,LMENDCACHE},apf.url=function(a){var b,c=window.location&&window.location.toString()||"";a.indexOf(":")==-1&&(b=c).indexOf(":")!=-1&&(b=new apf.url(b),a=apf.getAbsolutePath(b.protocol+"://"+b.host+(b.directory.charAt(0)=="/"?"":"/")+(b.directory.charAt(b.directory.length-1)=="/"?b.directory:b.directory+"/"),a).replace(/\/\/\/\//,"///"));var d=apf.url.options,e=d.parser[d.strictMode?"strict":"loose"].exec(a),f=14;this.uri=a.toString();while(f--)this[d.key[f]]=e[f]||"";this[d.q.name]={};var g=this;this[d.key[12]].replace(d.q.parser,function(a,b,c){b&&(g[d.q.name][b]=c)}),this.isSameLocation=function(){return this.uri.length&&this.uri.charAt(0)=="#"?!1:!this.protocol&&!this.port&&!this.host?!0:!this.protocol&&this.host&&this.port&&window.location.hostname==this.host&&window.location.port==this.port?!0:!this.protocol&&this.host&&!this.port&&window.location.hostname==this.host&&window.location.port==80?!0:window.location.protocol==this.protocol+":"&&window.location.hostname==this.host&&(window.location.port==this.port||!window.location.port&&!this.port)}},apf.url.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},apf.runXpath=function(){function getNodeValue(a){return a.nodeType==1?a.firstChild?a.firstChild.nodeValue:"":a.nodeType>1||a.nodeType<5?a.nodeValue:a}apf.XPath={cache:{},getSelf:function(a,b,c,d,e,f){var g=0,h=null,i=c[d];i?i[0](a,i[1],c,d+1,g++,f):f.push(a)},getChildNode:function(a,b,c,d,e,f){var g=0,h=null,i=c[d],j=a.childNodes;if(!j)return;for(var k=0;k<j.length;k++){if(b&&b!=j[k].tagName&&(j[k].style?j[k].tagName.toLowerCase():j[k].tagName)!=b)continue;a=j[k],i?i[0](j[k],i[1],c,d+1,g++,f):f.push(j[k])}},doQuery:function(htmlNode,qData,info,count,num,sResult){var result=null,data=info[count],query=qData[0],returnResult=qData[1];try{var qResult=eval(query)}catch(e){apf.console.error(e.name+" "+e.type+":"+apf.XPath.lastExpr+"\n\n"+query);return}if(returnResult)return sResult.push(qResult);if(!qResult||qResult.dataType==apf.ARRAY&&!qResult.length)return;data?data[0](htmlNode,data[1],info,count+1,0,sResult):sResult.push(htmlNode)},getTextNode:function(a,b,c,d,e,f){var g=c[d],h=a.childNodes;for(var i=0;i<h.length;i++){if(h[i].nodeType!=3&&h[i].nodeType!=4)continue;g?g[0](h[i],g[1],c,d+1,i,f):f.push(h[i])}},getAnyNode:function(a,b,c,d,e,f){var g=c[d],h=a.getElementsByTagName("*");for(var i=0;i<h.length;i++)g?g[0](h[i],g[1],c,d+1,i,f):f.push(h[i])},getAttributeNode:function(a,b,c,d,e,f){if(!a||a.nodeType!=1)return;if(b=="*"){var g=a.attributes;for(var h=0;h<g.length;h++)arguments.callee.call(this,a,g[h].nodeName,c,d,h,f);return}var i=c[d],j=a.getAttributeNode(b);i?i[0](j,i[1],c,d+1,0,f):j&&f.push(j)},getAllNodes:function(a,b,c,d,e,f){var g=c[d],h=b[0],i=b[1],j=b[2],k,l,m;i&&(a.tagName==h||h=="*"||h=="node()")&&(g?g[0](a,g[1],c,d+1,0,f):f.push(a)),h=="node()"?(h="*",j="",apf.isIE?k=a.getElementsByTagName("*"):(k=[],function n(a){for(var b,c=0;c<a.childNodes.length;c++){b=a.childNodes[c];if(b.nodeType!=1)continue;k.push(b),n(b)}}(a))):k=a.getElementsByTagName((j&&(apf.isGecko||apf.isOpera||a.nodeFunc)?j+":":"")+h);for(l=0,m=k.length;l<m;l++)g?g[0](k[l],g[1],c,d+1,l,f):f.push(k[l])},getAllAncestorNodes:function(a,b,c,d,e,f){var g=c[d],h=b[0],i=b[1],j=0,k=i?a:a.parentNode;while(k&&k.nodeType==1){if(k.tagName==h||h=="*"||h=="node()")g?g[0](k,g[1],c,d+1,++j,f):f.push(k);k=k.parentNode}},getParentNode:function(a,b,c,d,e,f){var g=c[d],h=a.parentNode;g?g[0](h,g[1],c,d+1,0,f):h&&f.push(h)},getPrecedingSibling:function(a,b,c,d,e,f){var g=c[d],h=a.previousSibling;while(h){if(b!="node()"&&(h.style?h.tagName.toLowerCase():h.tagName)!=b){h=h.previousSibling;continue}if(g)g[0](h,g[1],c,d+1,0,f);else if(h){f.push(h);break}}},getFollowingSibling:function(a,b,c,d,e,f){var g=null,h=c[d],i=a.nextSibling;while(i){if(b!="node()"&&(i.style?i.tagName.toLowerCase():i.tagName)!=b){i=i.nextSibling;continue}if(h)h[0](i,h[1],c,d+1,0,f);else if(i){f.push(i);break}}},multiXpaths:function(a,b,c,d,e,f){for(var g=0;g<b.length;g++){c=b[g][0];var h=c[3]?a.ownerDocument.documentElement:a;c[0](h,c[1],b[g],1,0,f)}f.makeUnique()},compile:function(a){var b=a.match(/^\//);return a=a.replace(/\[(\d+)\]/g,"/##$1").replace(/\|\|(\d+)\|\|\d+/g,"##$1").replace(/\.\|\|\d+/g,".").replace(/\[([^\]]*)\]/g,function(a,b){return"/##"+b.replace(/\|/g,"_@_")}),a=="/"||a=="."?a:this.processXpath(a.replace(/\/\//g,"descendant::"),b)},processXpath:function(a,b){var c=[],d,e,f,g;a=a.replace(/'[^']*'/g,function(a){return a.replace("|","_@_")}),a=a.split("|");for(d=0,e=a.length;d<e;d++)a[d]=a[d].replace(/_\@\_/g,"|");if(a.length==1)a=a[0];else{for(d=0,e=a.length;d<e;d++)a[d]=this.processXpath(a[d]);return c.push([this.multiXpaths,a]),c}var h=a.split("/");for(d=0,e=h.length;d<e;d++){if(h[d]=="."||h[d]=="")continue;if(h[d]=="..")c.push([this.getParentNode,null]);else if(h[d].match(/^[\w\-_\.]+(?:\:[\w\-_\.]+){0,1}$/))c.push([this.getChildNode,h[d]]);else if(h[d].match(/^\#\#(\d+)$/))c.push([this.doQuery,["num+1 == "+parseInt(RegExp.$1)]]);else if(h[d].match(/^\#\#(.*)$/)){g=RegExp.$1,f=[g.match(/\(/g),g.match(/\)/g)];if(f[0]||f[1])while(!f[0]&&f[1]||f[0]&&!f[1]||f[0].length!=f[1].length){if(!h[++d])break;g+="/"+h[d],f=[g.match(/\(/g),g.match(/\)/g)]}c.push([this.doQuery,[this.compileQuery(g)]])}else if(h[d]=="*")c.push([this.getChildNode,null]);else if(h[d].substr(0,2)=="[]")c.push([this.getAllNodes,["*",!1]]);else if(h[d].match(/descendant-or-self::node\(\)$/))c.push([this.getAllNodes,["*",!0]]);else if(h[d].match(/descendant-or-self::([^\:]*)(?:\:(.*)){0,1}$/))c.push([this.getAllNodes,[RegExp.$2||RegExp.$1,!0,RegExp.$1]]);else if(h[d].match(/descendant::([^\:]*)(?:\:(.*)){0,1}$/))c.push([this.getAllNodes,[RegExp.$2||RegExp.$1,!1,RegExp.$1]]);else if(h[d].match(/ancestor-or-self::([^\:]*)(?:\:(.*)){0,1}$/))c.push([this.getAllAncestorNodes,[RegExp.$2||RegExp.$1,!0,RegExp.$1]]);else if(h[d].match(/ancestor::([^\:]*)(?:\:(.*)){0,1}$/))c.push([this.getAllAncestorNodes,[RegExp.$2||RegExp.$1,!1,RegExp.$1]]);else if(h[d].match(/^\@(.*)$/))c.push([this.getAttributeNode,RegExp.$1]);else if(h[d]=="text()")c.push([this.getTextNode,null]);else if(h[d]=="node()")c.push([this.getChildNode,null]);else if(h[d].match(/following-sibling::(.*)$/))c.push([this.getFollowingSibling,RegExp.$1.toLowerCase()]);else if(h[d].match(/preceding-sibling::(.*)$/))c.push([this.getPrecedingSibling,RegExp.$1.toLowerCase()]);else if(h[d]=="self::node()")c.push([this.getSelf,null]);else if(h[d].match(/self::(.*)$/))c.push([this.doQuery,["apf.XPath.doXpathFunc(htmlNode, 'local-name') == '"+RegExp.$1+"'"]]);else{g=h[d],f=[g.match(/\(/g),g.match(/\)/g)];if(f[0]||f[1])while(!f[0]&&f[1]||f[0]&&!f[1]||f[0].length!=f[1].length){if(!h[++d])break;g+="/"+h[d],f=[g.match(/\(/g),g.match(/\)/g)]}c.push([this.doQuery,[this.compileQuery(g),!0]])}}return c[0][3]=b,c},compileQuery:function(a){return(new apf.CodeCompilation(a)).compile()},doXpathFunc:function(a,b,c,d,e,f,g){if(!c||c.length==0)c="";if(b=="not")return!c;if(!g){var h,i,j;if(typeof c=="object"||c.dataType==apf.ARRAY){c&&!c.length&&(c=[c]);var k=!1,l;for(i=0,j=c.length;i<j;i++){f=c[i],!f||typeof f=="string"||"position|last|count|local-name|name".indexOf(b)>-1?l=f:(f.nodeType==1&&f.firstChild&&f.firstChild.nodeType!=1&&(f=f.firstChild),l=f.nodeValue);if(k=arguments.callee.call(this,a,b,l,d,e,f,!0))return k}return k}h=c}else h=c;switch(b){case"position":return apf.getChildNumber(a)+1;case"format-number":return apf.formatNumber(h);case"floor":return Math.floor(h);case"ceiling":return Math.ceil(h);case"starts-with":return h?h.substr(0,d.length)==d:!1;case"string-length":return h?h.length:0;case"count":return h?h.length:0;case"last":return h?h[h.length-1]:null;case"name":var m=f||a;return m.nodeName||m.tagName;case"local-name":var m=f||a;if(m.nodeType!=1)return!1;return m.localName||(m.tagName||"").split(":").pop();case"substring":return h&&d?h.substring(d,e||0):"";case"contains":return h&&d?h.indexOf(d)>-1:!1;case"concat":var n="";for(i=1,j=arguments.length;i<j;i++){if(typeof arguments[i]=="object"){n+=getNodeValue(arguments[i][0]);continue}n+=arguments[i]}return n;case"translate":for(i=0,j=d.length;i<j;i++)h=h.replace(d.substr(i,1),e.substr(i,1));return h}},selectNodeExtended:function(a,b,c){var d=this.selectNodes(a,b);if(d.length==0)return null;if(!c)return d;for(var e=0,f=d.length;e<f;e++)if(String(getNodeValue(d[e]))==c)return[d[e]];return null},getRoot:function(a){while(a.parentNode&&a.parentNode.nodeType==1)a=a.parentNode;return a.parentNode},selectNodes:function(a,b){this.cache[a]||(this.cache[a]=this.compile(a));if(typeof this.cache[a]=="string"){if(this.cache[a]==".")return[b];if(this.cache[a]=="/")return[b.nodeType==9?b.documentElement:this.getRoot(b)]}if(typeof this.cache[a]=="string"&&this.cache[a]==".")return[b];var c=this.cache[a][0],d=c[3]?b.nodeType==9?b.documentElement:this.getRoot(b):b,e=[];return d&&c[0](d,c[1],this.cache[a],1,0,e),e}},apf.CodeCompilation=function(a){this.data={F:[],S:[],I:[],X:[]},this.compile=function(){return a=a.replace(/ or /g," || ").replace(/ and /g," && ").replace(/!=/g,"{}").replace(/=/g,"==").replace(/\{\}/g,"!="),this.tokenize(),this.insert(),a=a.replace(/, \)/g,", htmlNode)"),a},this.tokenize=function(){var b=this.data.F;a=a.replace(/(translate|format-number|contains|substring|local-name|last|position|round|starts-with|string|string-length|sum|floor|ceiling|concat|count|not)\s*\(/g,function(a,c){return b.push(c)-1+"F_"}),b=this.data.S,a=a.replace(/'([^']*)'/g,function(a,c){return b.push(c)-1+"S_"}).replace(/"([^"]*)"/g,function(a,c){return b.push(c)-1+"S_"}),b=this.data.X,a=a.replace(/(^|\W|\_)([\@\.\/A-Za-z\*][\*\.\@\/\w\:\-]*(?:\(\)){0,1})/g,function(a,c,d){return c+(b.push(d)-1)+"X_"}).replace(/(\.[\.\@\/\w]*)/g,function(a,c,d){return b.push(c)-1+"X_"}),b=this.data.I,a=a.replace(/(\d+)(\W)/g,function(a,c,d){return b.push(c)-1+"I_"+d})},this.insert=function(){var b=this.data;a=a.replace(/(\d+)X_\s*==\s*(\d+S_)/g,function(a,c,d){return"apf.XPath.selectNodeExtended('"+b.X[c].replace(/'/g,"\\'")+"', htmlNode, "+d+")"}).replace(/(\d+)([FISX])_/g,function(a,c,d){var e=b[d][c];if(d=="F")return"apf.XPath.doXpathFunc(htmlNode, '"+e+"', ";if(d=="S")return"'"+e+"'";if(d=="I")return e;if(d=="X")return"apf.XPath.selectNodeExtended('"+e.replace(/'/g,"\\'")+"', htmlNode)"}).replace(/, \)/g,")")}}},apf.BindingRule=function(a,b){this.$init(b||!0,apf.NODE_HIDDEN,a)},function(){this.$bindingRule=!0,this.compile=function(a){return this["c"+a]=apf.lm.compile(this[a],{xpathmode:3,injectself:!0})},this.$compile=function(a,b){return this["c"+a+"2"]=apf.lm.compile(this[a],b)},this.$attrExcludePropBind=apf.extend({value:1,match:1},this.$attrExcludePropBind),this.$booleanProperties.hasaml=!0,this.$propHandlers.value=this.$propHandlers.match=function(a,b){delete this["c"+b];if(this.$amlLoaded){var c=this;while(c&&c.$bindingRule)c=c.parentNode;if(!c)return;apf.queue.add("reload"+c.$uniqueId,function(){c.reload()}),c.$bindings.$isCompiled&&(c.$bindings.$compiled=c.$bindings.compile(this.localName!="each"&&this.localName))}},this.addEventListener("DOMNodeInserted",function(a){var b=this;while(b.$bindingRule)b=b.parentNode;"expanded|collapsed".indexOf(this.localName)==-1&&apf.queue.add("reload"+b.$uniqueId,function(){b.reload()});if(a.currentTarget==this)(b.$bindings[this.localName]||(b.$bindings[this.localName]=[])).pushUnique(this);else if(!this.attributes.getNamedItem("value"))this.value=apf.serializeChildren(this);else return;b.$bindings.$isCompiled&&(b.$bindings.$compiled=b.$bindings.compile(this.localName!="each"&&this.localName))}),this.addEventListener("DOMNodeRemoved",function(a){if(this.$amlDestroyed)return;var b,c=this;while(c&&c.$bindingRule)c=c.parentNode;if(!c)return;if(a.currentTarget==this)if(c.$bindings&&c.$bindings[this.localName])c.$bindings[this.localName].remove(this);else return;else if(!this.attributes.getNamedItem("value")&&(b=this.firstChild))b.nodeType==this.NODE_PROCESSING_INSTRUCTION?b.target=="lm"?this.value="{"+b.nodeValue+"}":this.value=b.nodeValue:this.value=apf.serializeChildren(this).trim();else return;"expanded|collapsed".indexOf(this.localName)==-1&&apf.queue.add("reload"+c.$uniqueId,function(){c.$amlDestroyed||c.reload()}),c.$bindings.$isCompiled&&(c.$bindings.$compiled=c.$bindings.compile(this.localName!="each"&&this.localName))}),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b;!this.value&&this.localName!="each"&&(b=this.$aml&&this.$aml.firstChild||this.firstChild)&&(b.nodeType==this.NODE_PROCESSING_INSTRUCTION?b.target=="lm"?this.value="{"+b.nodeValue+"}":this.value=b.nodeValue:this.value=apf.serializeChildren(this.$aml).trim());var c=this.parentNode;while(c.$bindingRule)c=c.parentNode;var d=c.$bindings||(c.$bindings=new apf.ruleList);(d[this.localName]||(d[this.localName]=[])).push(this);if(c.localName!="bindings"&&(this.localName!="each"||!this.childNodes.length)){var e=this;while((e=e.nextSibling)&&e.nodeType!=1);if(!e||!e.$bindingRule)c.$cbindings=c.$bindings.compile(c.$bindings.$isCompiled?this.localName:null),c.dispatchEvent("bindingsload",{bindings:c.$bindings,compiled:c.$cbindings}),c.$checkLoadQueue()}})}.call(apf.BindingRule.prototype=new apf.AmlElement),apf.aml.setElement("icon",apf.BindingRule),apf.aml.setElement("image",apf.BindingRule),apf.aml.setElement("caption",apf.BindingRule),apf.aml.setElement("tooltip",apf.BindingRule),apf.aml.setElement("css",apf.BindingRule),apf.aml.setElement("selectable",apf.BindingRule),apf.aml.setElement("value",apf.BindingRule),apf.aml.setElement("src",apf.BindingRule),apf.aml.setElement("collapsed",apf.BindingRule),apf.aml.setElement("expanded",apf.BindingRule),apf.aml.setElement("empty",apf.BindingRule),apf.ActionRule=function(a,b){this.$init(b||!0,apf.NODE_HIDDEN,a)},function(){this.$actionRule=!0,this.compile=function(a,b){return this["c"+a]=apf.lm.compile(this[a],b||{xpathmode:2})},this.$attrExcludePropBind=apf.extend({set:1,get:1,undo:1,lock:1,match:1,parent:1},this.$attrExcludePropBind),this.$propHandlers.set=this.$propHandlers.get=this.$propHandlers.parent=this.$propHandlers.match=function(a,b){delete this["c"+b]},this.addEventListener("DOMNodeInserted",function(a){if(a.currentTarget==this){var b=this.parentNode;b.$actions||(b.$actions=new apf.ruleList),(b.$actions[this.localName]||(b.$actions[this.localName]=[])).push(this)}else{if(this.attributes.getNamedItem("value"))return;this.value=apf.serializeChildren(this)}}),this.addEventListener("DOMNodeRemoved",function(a){if(this.$amlDestroyed)return;if(a.currentTarget==this)this.parentNode.$actions[this.localName].remove(this);else{if(this.attributes.getNamedItem("value"))return;this.value=apf.serializeChildren(this)}}),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.get||(this.get=apf.serializeChildren(this.$aml).trim());var b=this.parentNode.$actions||(this.parentNode.$actions=new apf.ruleList);(b[this.localName]||(b[this.localName]=[])).push(this)})}.call(apf.ActionRule.prototype=new apf.AmlElement),apf.aml.setElement("rename",apf.ActionRule),apf.aml.setElement("remove",apf.ActionRule),apf.aml.setElement("add",apf.ActionRule),apf.aml.setElement("update",apf.ActionRule),apf.aml.setElement("copy",apf.ActionRule),apf.aml.setElement("move",apf.ActionRule),apf.aml.setElement("check",apf.ActionRule),apf.aml.setElement("change",apf.ActionRule),apf.actions=function(a,b){this.$init(b||"actions",apf.NODE_HIDDEN,a),this.$actions=new apf.ruleList,this.$amlNodes={}},function(){this.$smartbinding=null,this.register=function(a){if(a.localName=="smartbinding"){this.$smartbinding=a,this.$smartbinding.add(this);return}this.$amlNodes[a.$uniqueId]=a,a.$actions=this.$actions,a.$actionsElement=this,a.dispatchEvent("actionsload",{bindings:this})},this.unregister=function(a){this.$amlNodes[a.$uniqueId]=null,delete this.$amlNodes[a.$uniqueId],delete a.$actionsElement,delete a.$actions,a.dispatchEvent("actionsunload",{bindings:this})},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=this.childNodes;for(var c,d=0,e=b.length;d<e;d++){if((c=b[d]).nodeType!=1)continue;c.dispatchEvent("DOMNodeInsertedIntoDocument")}this.register(this.parentNode)})}.call(apf.actions.prototype=new apf.AmlElement),apf.aml.setElement("actions",apf.actions),apf.actiontracker=function(a,b){this.$init(b||"actiontracker",apf.NODE_HIDDEN,a),this.$undostack=[],this.$redostack=[],this.$execstack=[]},function(){function a(b,c,d,e){var f=d?this.$undostack:this.$redostack,g=d?this.$redostack:this.$undostack;if(!f.length)return;if(c){var h=f[b];if(!h)return;return f.length--,g.push(h),h.action&&apf.actiontracker.actions[h.action](h,d,this),e||(h.multiple?this.$addToQueue(h.multiple,d,!0):this.$addToQueue(h,d)),this.setProperty("undolength",this.$undostack.length),this.setProperty("redolength",this.$redostack.length),h}if(this.dispatchEvent("beforechange")===!1)return;b==-1&&(b=f.length),b||(b=1);var i=0;while(i<b&&f.length>0){if(!f[f.length-1])return f.length--,this.$undostack=[],this.$redostack=[],!1;a.call(this,f.length-1,!0,d,e),i++}this.dispatchEvent("afterchange",{action:d?"undo":"redo",rollback:e})}this.$lastExecStackItem=null,this.$paused=!1,this.realtime=!0,this.undolength=0,this.redolength=0,this.$booleanProperties={},this.$booleanProperties.realtime=!0,this.$supportedProperties=["realtime","undolength","redolength","alias","length","position"],this.$handlePropSet=function(a,b,c){this.$booleanProperties[a]&&(b=apf.isTrue(b));switch(a){case"undolength":this.undolength=this.$undostack.length;break;case"redolength":this.redolength=this.$redostack.length;break;default:this[a]=b}},this.define=function(a,b){apf.actiontracker.actions[a]=b},this.getParent=function(){return this.parentNode&&this.parentNode.getActionTracker?this.parentNode.getActionTracker(!0):apf.window.$at!=this?apf.window.$at:null},this.getDone=function(a){if(typeof a!="number")return[];for(var b,c=this.$undostack.length;c>=0;--c){if(!(b=this.$undostack[c])||!b.timestamp)continue;if(b.timestamp>=a)return this.$undostack.slice(c)}return[]},this.getUndone=function(a){if(typeof a!="number")return[];for(var b,c=0,d=this.$redostack.length;c<d;++c){if(!(b=this.$redostack[c])||!b.timestamp)continue;if(b.timestamp<=a)return this.$redostack.slice(0,c+1)}return[]},this.execute=function(a){if(this.dispatchEvent("beforechange",a)===!1)return!1;var b=new apf.UndoData(a,this);return a.action&&!a.transaction&&apf.actiontracker.actions[a.action](b,!1,this),this.$paused||(b.id=this.$undostack.push(b)-1),this.setProperty("undolength",this.$undostack.length),b.multiple?this.$addToQueue(b.multiple,!1,!0):this.$addToQueue(b,!1),a.rdb||(this.$redostack.length=0,this.setProperty("redolength",this.$redostack.length)),this.dispatchEvent("afterchange",{action:"do"}),b},this.pauseTracking=function(){this.$paused=!0},this.resumeTracking=function(){this.$paused=!1},this.isTracking=function(){return!this.$paused},this.purge=function(a,b){this.$execstack.length&&(this.$execstack[0].undoObj.saveChange(this.$execstack[0].undo,this),this.$lastExecStackItem=this.$execstack[this.$execstack.length-1])},this.reset=function(){this.$undostack.length=this.$redostack.length=0,this.$paused=!1,this.setProperty("undolength",0),this.setProperty("redolength",0),this.dispatchEvent("afterchange",{action:"reset"})},this.undo=function(b,c,d){a.call(this,b,c,!0,d)},this.redo=function(b,c,d){a.call(this,b,c,!1,d)},this.$receive=function(a,b,c,d,e){if(b==apf.TIMEOUT&&c.tpModule.retryTimeout(c,b,this)===!0)return!0;if(b!=apf.SUCCESS){if(this.dispatchEvent("actionfail",apf.extend(c,{state:b,message:"Could not sent Action RPC request for control "+this.name+"["+this.localName+"] \n\n"+c.message,bubbles:!0}))===!1)return!0;typeof apf.offline!="undefined"&&!apf.offline.reloading&&this.undo(d.id,c.userdata,!0),e&&e(!c.userdata);if(!c.userdata){this.$execstack=[];var f=new Error(apf.formatErrorString(0,this,"Executing action","Error sending action to the server:\n"+(c.url?"Url:"+c.url+"\n\n":"")+c.message));if(this.dispatchEvent("error",apf.extend({error:f,state:b,bubbles:!0},c))===!1)return;throw f}}else this.dispatchEvent("actionsuccess",apf.extend(c,{state:b,bubbles:!0},c)),e&&e();this.$queueNext(d,e)},this.$addToQueue=function(a,b,c){if(!c&&this.$execstack.length&&!a.state&&this.$execstack[this.$execstack.length-1].undoObj==a){this.$execstack.length--;return}var d,e,f;if(c){var e,f=this.$execstack.shift();for(var g=0;g<a.length;g++)e=a[g],this.$execstack.unshift({undoObj:(e.tagName?e:new apf.UndoData(e,this)).preparse(b,this),undo:b});f&&this.$execstack.unshift(f),this.$execstack[0].undoObj.state||this.$execstack[0].undoObj.saveChange(this.$execstack[0].undo,this);return}f={undoObj:a.preparse(b,this),undo:b},this.$execstack.push(f)-1,this.$execstack.length==1&&this.realtime&&a.saveChange(b,this)},this.$queueNext=function(a,b){if(!this.$execstack[0]||this.$execstack[0].undoObj!=a)throw new Error(apf.formatErrorString(0,this,"Executing Next                 action in queue","The execution stack was corrupted. This is                 a fatal error. The application should be restarted. You will                 lose all your changes. Please contact the administrator."));a.state=null;var c=this.$execstack.shift();if(!this.$execstack[0]||c==this.$lastExecStackItem)return;this.$execstack[0].undoObj.saveChange(this.$execstack[0].undo,this,b)}}.call(apf.actiontracker.prototype=new apf.AmlElement),apf.aml.setElement("actiontracker",apf.actiontracker),apf.application=function(){this.$init("application",apf.NODE_HIDDEN),apf.isO3||(this.$int=document.body,this.$tabList=[],this.$focussable=apf.KEYBOARD,this.focussable=!0,this.visible=!0,this.$isWindowContainer=!0,this.focus=function(){this.dispatchEvent("focus")},this.blur=function(){this.dispatchEvent("blur")},apf.window.$addFocus(this))},apf.application.prototype=new apf.AmlElement,apf.aml.setElement("application",apf.application),apf.appsettings=function(a,b){this.$init(b||"appsettings",apf.NODE_HIDDEN,a)},function(){this.$parsePrio="001",this.$attrExcludePropBind={language:1,login:1,logout:1},this.$supportedProperties=["debug","name","baseurl","resource-path","disable-right-click","allow-select","allow-blur","auto-disable-actions","auto-disable","disable-f5","auto-hide-loading","disable-space","disable-backspace","undokeys","initdelay","default-page","query-append","outline","drag-outline","resize-outline","resize-outline","iepngfix","iepngfix-elements","iphone-fullscreen","iphone-statusbar","iphone-icon","iphone-icon-is-glossy","iphone-fixed-viewport","skinset","language","storage","offline","login"],this.$booleanProperties={debug:1,"disable-right-click":1,"allow-select":1,"allow-blur":1,"auto-disable-actions":1,"auto-disable":1,"disable-f5":1,"auto-hide-loading":1,"disable-space":1,"disable-backspace":1,undokeys:1,initdelay:1,outline:1,iepngfix:1,"iphone-fullscreen":1,"iphone-icon-is-glossy":1,"iphone-fixed-viewport":1};var a=this.setProperty;this.setProperty=function(b,c,d,e,f){f!=2&&a.apply(this,arguments)},this.$handlePropSet=function(a,b,c){this.$booleanProperties[a]&&(b=apf.isTrue(b)),this[a]=b,apf.config.setProperty(a,b)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){})}.call(apf.appsettings.prototype=new apf.AmlElement),apf.aml.setElement("appsettings",apf.appsettings),apf.auth=function(a,b){this.$init(b||"auth",apf.NODE_HIDDEN,a),this.$services={},this.$cache={},this.$queue=[],this.$credentials=null},apf.aml.setElement("auth",apf.auth),function(){function b(b){var c=(b.state==apf.TIMEOUT||!a[b.status]?self[this["error-state"]]:self[this["fail-state"]])||self[this["fail-state"]];if(c){this.state=c;if(this.state)return this.state.activate(),!1}}this.autostart=!0,this.authenticated=!1,this.enablequeue=!1,this.$retry=!0,this.loggedIn=!1,this.$needsLogin=!1,this.$hasHost=!1,this.inProcess=0,this.$attrExcludePropBind=apf.extend({login:1,logout:1},this.$attrExcludePropBind),this.$booleanProperties.autostart=!0,this.$booleanProperties.remember=!0,this.$supportedProperties.push("login","logout","fail-state","error-state","login-state","logout-state","waiting-state","window","autostart","remember","authenticated","enablequeue"),this.$propHandlers.login=this.$propHandlers["login-state"]=function(a){this.$services["default"]=a?this:null,this.$needsLogin=a?!0:!1},this.register=function(a){this.$services[a.name]=a,this.$needsLogin=!0},this.unregister=function(a){var b;delete this.$services[a.name],b in this.$services||(this.$needsLogin=!1)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.inited=!0,this.parentNode&&this.parentNode.$setAuth&&(this.parentNode.$setAuth(this),this.$hasHost=!0);if(this.autostart&&!this.$hasHost){var b=this;apf.addEventListener("load",function(){b.authRequired(),apf.removeEventListener("load",arguments.callee)})}}),this.addEventListener("authrequired",function(){if(self[this.window]){this.win=self[this.window];if(this.win)return this.win.show(),!1}if(self[this["authreq-state"]]){this.state=self[this["authreq-state"]];if(this.state)return this.state.activate(),!1}}),this.addEventListener("beforelogin",function(){self[this["waiting-state"]]&&(this.state=self[this["waiting-state"]],this.state&&this.state.activate())});var a={401:1,403:1};this.addEventListener("loginfail",b),this.addEventListener("logoutfail",b),this.addEventListener("logoutsuccess",function(){self[this["logout-state"]]&&(this.state=self[this["logout-state"]],this.state&&this.state.activate())}),this.addEventListener("loginsuccess",function(a){self[this.window]&&(this.win=self[this.window],this.win&&this.win.hide()),self[this["login-state"]]&&(this.state=self[this["login-state"]],this.state&&this.state.activate()),a.data&&this.model&&(this.model=apf.nameserver.get("model",this.model),this.model&&this.model.load(a.data))}),this.logIn=function(a,b,c,d){d||(d={}),d.username=a,d.password=b;if(this.dispatchEvent("beforelogin",d)===!1)return!1;this.inProcess=1;var e=0,f=0,g=this,h=function(){if(f!=++e)return;g.inProcess=0,g.loggedIn=!0,g.clearQueue(),c&&c()};if(this.$hasHost)this.$credentials=d,c=this.$hostCallback,this.$hostCallback=null,f=1,h(),this.dispatchEvent("loginsuccess",{state:1,data:null,bubbles:!0,username:a,password:b}),this.remember||(this.$credentials=null);else if(!d.service){var i=d.$services||this.$services;for(var j in i)f++,this.$do(j,d,"in",null,h)}else d.service&&(f=1,this.$do(d.service,d,"in",null,h))},this.relogin=function(){if(this.dispatchEvent("beforerelogin")===!1)return!1;var a,b=0,c=0,d=this,e=function(){if(c!=++b)return;d.inProcess=0,d.loggedIn=!0,d.clearQueue()};for(a in this.$services){if(!this.$cache[a])return!1;c++,this.$do(a,this.$cache[a],"in",!0,e)}return!0},this.$do=function(a,b,c,d,e){var f=this.$services[a],g=b.userdata=this;b.callback=function(f,h,i){if(h==apf.TIMEOUT&&i.retries<apf.maxHttpRetries)return i.tpModule.retry(i.id);var j=g.dispatchEvent("log"+c+"check",apf.extend({state:h,data:f,service:a,bubbles:!0},i)),k=typeof j=="boolean"?!j:h!=apf.SUCCESS&&(c!="out"||i.status!=401);if(k){g.inProcess=0;if(d)return g.authRequired();var l=new Error(apf.formatErrorString(0,null,"Logging "+c,"Error logging in: "+i.message));if(g.dispatchEvent("log"+c+"fail",apf.extend({error:l,service:a,state:h,data:f,bubbles:!0,username:b.username,password:b.password},i))!==!1)throw l;g.setProperty("authenticated",!1);return}if(c=="in"){if(!d&&g.$retry){var m={};for(var n in b)"object|array".indexOf(typeof b[n])==-1&&(m[n]=b[n]);g.$cache[a||"default"]=m}}else g.$cache[a||"default"]&&(g.$cache[a||"default"]=null);e&&e(),g.dispatchEvent("log"+c+"success",apf.extend({},i,{state:h,service:a,data:f,bubbles:!0,username:b.username,password:b.password})),g.setProperty("authenticated",!0)},apf.saveData(f.getAttribute("log"+c),b)},this.clearQueue=function(){if(!this.loggedIn)return;var a=this.$queue.slice();this.$queue.length=0;for(var b=0;b<a.length;b++){var c=a[b];if(!this.loggedIn){this.$queue.push(c);continue}c.retry?c.$retry.call(c.object):c.id&&c.tpModule.retry(c.id)}this.$queue.length&&this.clearQueue()},this.logOut=function(a,b){b||(b={});if(this.dispatchEvent("beforelogout",b)===!1)return;this.loggedIn=!1;if(!b.service)for(var c in this.$services)this.$do(c,b,"out",null,a);else b.service&&this.$do(b.service,b,"out",null,a)},this.getCredentials=function(a){var b=this.$cache[a||"default"];return b?[b.username,b.password]:["",""]},this.authRequired=function(a,b){if(a&&a.userdata==this)return;if(this.loggedIn&&!b&&this.$retry&&this.relogin())var c=!1;else if(this.inProcess!=1){if(this.$hasHost&&typeof a=="function"){if(this.$credentials)return a();this.$hostCallback=a}var c=this.dispatchEvent("authrequired",apf.extend({bubbles:!0,data:a&&a.data},a))}this.loggedIn=!1;if(c===!1)return this.enablequeue&&a&&this.$queue.push(a),!0}}.call(apf.auth.prototype=new apf.AmlElement),apf.section=function(a,b){this.$init(b||"section",apf.NODE_VISIBLE,a)},apf.menubar=function(a,b){this.$init(b||"menubar",apf.NODE_VISIBLE,a)},apf.bar=function(a,b){this.$init(b||"bar",apf.NODE_VISIBLE,a)},function(){this.$focussable=!1,this.$canLeechSkin=!0,this.$isLeechingSkin=!1,this.$propHandlers.caption=function(a){this.$int.innerHTML=a},this.addEventListener("AMLReparent",function(a,b,c){if(!this.$amlLoaded)return;if(this.$isLeechingSkin&&!c&&this.skinName!=b.skinName||!this.$isLeechingSkin&&this.parentNode.$hasLayoutNode&&this.parentNode.$hasLayoutNode(this.localName))this.$isLeechingSkin=!0,this.$forceSkinChange(this.parentNode.skinName.split(":")[0]+":"+skinName)}),this.$draw=function(){this.$ext=this.$getExternal(this.$isLeechingSkin?this.localName:"main"),this.oDrag&&this.oDrag.parentNode.removeChild(this.oDrag),this.oDrag=this.$getLayoutNode(this.$isLeechingSkin?this.localName:"main","dragger",this.$ext),this.$int=this.$getLayoutNode(this.$isLeechingSkin?this.localName:"main","container",this.$ext)},this.$loadAml=function(a){},this.$skinchange=function(){}}.call(apf.bar.prototype=new apf.Presentation),apf.menubar.prototype=apf.section.prototype=apf.bar.prototype,apf.aml.setElement("bar",apf.bar),apf.aml.setElement("menubar",apf.menubar),apf.aml.setElement("section",apf.section),apf.BindingColorRule=function(a,b){this.$init(b,apf.NODE_HIDDEN,a)},function(){this.addEventListener("DOMNodeInsertedIntoDocument",function(a){if(this.$bindings&&this.$bindings.color){var b=this.$bindings.color[0];apf.setStyleRule("."+this.$baseCSSname+(apf.isIE?" .records .highlight SPAN":" .records .highlight span"),"color",b.getAttribute("text"),null,this.oWin),apf.setStyleRule("."+this.$baseCSSname+(apf.isIE?" .records .highlight SPAN":" .records .highlight span"),"backgroundColor",b.getAttribute("row"),null,this.oWin),apf.setStyleRule("."+this.$baseCSSname+(apf.isIE?" .records .highlight":" .records .highlight"),"backgroundColor",b.getAttribute("row"),null,this.oWin)}apf.importStylesheet([["."+this.className,"width:"+this.$width+(this.$isPercentage?"%;":"px;")+"text-align:"+h.align],["."+this.className,"width:"+this.$width+(this.$isPercentage?"%;":"px;")+"text-align:"+h.align]]),this.$draw()})}.call(apf.BindingColorRule.prototype=new apf.BindingRule),apf.aml.setElement("color",apf.BindingColorRule),apf.BindingColumnRule=function(a,b){this.$init(b||"column",apf.NODE_VISIBLE,a),this.$className="col"+this.$uniqueId},function(){this.$defaultwidth="100",this.$width=0,this.$sortable=!0,this.$resizable=!0,this.$movable=!0,this.$cssInit=!1,this.visible=!0,this.$attrExcludePropBind=apf.extend({css:1,icon:1,caption:1,eachcaption:1,eachvalue:1,each:1,icon:1},this.$attrExcludePropBind),this.$supportedProperties.push("tree","icon","caption","width","options","check","editor","colspan","align","css","sorted","each","eachvalue","eachcaption","model"),this.$booleanProperties.tree=!0,this.$booleanProperties.check=!0,this.$booleanProperties.sorted=!0,this.$booleanProperties.visible=!0,this.$setParentFixedWidth=function(){var a=this.parentNode,b=a.$fixed+"px";this.$isFixedGrid||(apf.setStyleRule("."+a.$baseCSSname+" .row"+a.$uniqueId,"paddingRight",b,null,this.oWin),apf.setStyleRule("."+a.$baseCSSname+" .row"+a.$uniqueId,"marginRight","-"+b,null,a.oWin),a.$container&&(a.$container.style.paddingRight=b),a.$head&&(a.$head.style.paddingRight=b))},this.$propHandlers.width=function(a,b){if(!a)return;var c=a-this.$width;this.$isPercentage=a&&String(a).indexOf("%")>-1,this.$width=parseFloat(a);var d=this.parentNode;this.$isPercentage?apf.setStyleRule("."+this.$className,"width",this.$width+"%"):(apf.setStyleRule("."+this.$className,"width",this.$width+"px",null,d.oWin),d.$amlLoaded&&(this.visible&&(d.$fixed+=c),this.$setParentFixedWidth()))},this.$propHandlers.options=function(a,b){this.$sortable=a.indexOf("sort")>-1,this.$resizable=a.indexOf("size")>-1,this.$movable=a.indexOf("move")>-1},this.$propHandlers.visible=function(a,b,c,d){var e=this.parentNode;if(!d&&!this.$amlLoaded)return;if(a){apf.setStyleRule("."+this.$className,"display","inline-block",null,this.oWin);var f=this.$isPercentage?this.$ext.offsetWidth-(e.$widthdiff-3):this.$width;this.resize(f,e,!0)}else apf.setStyleRule("."+this.$className,"display","none",null,this.oWin),this.resize(0,e,!0)},this.resize=function(a,b,c){var d;if(this.$isPercentage){var e=this.visible&&this.$ext.offsetWidth?this.$ext.offsetWidth-(b.$widthdiff-3):0,f=e?a/e:1,g=[],h=[],i=0,j=c?this.$ext.parentNode.firstChild:this.$ext.nextSibling;while(j&&j.getAttribute("hid"))d=apf.all[j.getAttribute("hid")],d.visible!==!1&&(d.$isPercentage?(g.push(d),i+=d.$width):h.push(d)),j=j.nextSibling;if(h.length&&!g.length)return h[0].resize(h[0].$width+(e-a),b);var k,l;if(f==1&&i<101)f=i/101,l=1/f;else if(i>101)f=f*101/i,l=f;else{k=(f-1)*this.$width,l=(i-k)/i;if(l<.01&&l>0){if(a<20)return;return this.resize(a-10,b)}}for(var m,n=0;n<g.length;n++){m=g[n];if(m==this)continue;m.setProperty("width",String(m.$width*l)+"%",!1,!0)}this.visible!==!1&&this.setProperty("width",String(f*this.$width)+"%",!1,!0)}else if(c){var o=a;b.$fixed+=o,this.$setParentFixedWidth()}else apf.isIE&&b.oIframe&&(this.$ext.style.width=a+"px"),this.setProperty("width",a,!1,!0)},this.hide=function(){return this.setProperty("visible",!1,!1,!0),this},this.show=function(){return this.setProperty("visible",!0,!1,!0),this},this.sort=function(a,b){if(a.$lastSorted==this){apf.setStyleClass(this.$int,a.toggleSortOrder()?"ascending":"descending",["descending","ascending"]);return}var c;if(c=a.$lastSorted)apf.setStyleRule("."+c.$className,"background","white"),apf.setStyleClass(c.$int,"",["descending","ascending"]);apf.setStyleRule("."+this.$className,"background","#f3f3f3"),apf.setStyleClass(this.$int,"ascending",["descending","ascending"]),a.resort({order:"ascending",xpath:(this.cvalue||this.compile("value")).xpaths[1]},!1,b||!a.length),a.$lastSorted=this},this.move=function(a,b){if(a&&this==a)return;var c=this,d=apf.getChildNumber(c.$int),e=a&&apf.getChildNumber(a.$int);b.$head.insertBefore(c.$int,a&&a.$int||null);if(!b.length)return;(function f(a){for(var c,g=0;g<a.length;g++){if(a[g].nodeType!=1)continue;c=a[g],b.$isTreeArch&&c.tagName=="BLOCKQUOTE"?f(c.childNodes):c.insertBefore(c.childNodes[d],e!=undefined&&c.childNodes[e]||null)}})(b.$container.childNodes)},this.$draw=function(a,b,c,d){var a=a||this.parentNode;while(a.$bindingRule)a=a.parentNode;if(!a.hasFeature(apf.__PRESENTATION__))return;c&&this.$propHandlers.width.call(this,c),apf.importStylesheet([["."+this.$className,"width:"+this.$width+(this.$isPercentage?"%;":"px;")+"text-align:"+this.align+";display: inline-block"]]),a.$getNewContext("headitem");var e=a.$getLayoutNode("headitem");e.setAttribute("class",this.$className+(d?" "+d:"")),e.setAttribute("hid",this.$uniqueId);var f=a.$getLayoutNode("headitem","caption");f.nodeValue=this.caption||b||"&nbsp",this.$ext=this.$int=apf.insertHtmlNode(e,a.$head||a.$container);var g=!1,h=this;return this.sorted&&this.sort(a,!0),this.$int.onmouseup=function(b){b||(b=event);if(a.disabled||!apf.isChildOf(g,this,!0))return;apf.setStyleClass(this,"hover",["down"]),h.$sortable&&h.sort(a),a.dispatchEvent("sortcolumn",h)},this.$int.onmousedown=function(b){b||(b=event),g=target=this;if(a.disabled)return;var c=apf.getAbsolutePosition(target),d=a.$head.scrollLeft,e=b.clientX-c[0]+d;if(e<4||target.offsetWidth-e-8<3&&apf.getChildNumber(h.$int)<a.$headings.length-1){var f=e<4&&target.previousSibling||target;if(h.$resizable){c=apf.getAbsolutePosition(f),apf.setStyleClass(a.$pointer,"size_pointer",["move_pointer"]),a.$pointer.style.display="block",a.$pointer.style.left=f.offsetLeft-d-1+"px",a.$pointer.style.width=f.offsetWidth-a.$widthdiff+1+"px",apf.plane.show(a.$pointer,null,!0),g=!0,document.onmouseup=function(){b||(b=event),document.onmouseup=document.onmousemove=null,apf.all[f.getAttribute("hid")].resize(a.$pointer.offsetWidth,a),g=!1,a.$pointer.style.display="none",apf.plane.hide()},document.onmousemove=function(b){b||(b=event),a.$pointer.style.width=Math.max(10,Math.min(a.$container.offsetWidth-a.$pointer.offsetLeft-20,b.clientX-c[0]-1+d))+"px"};return}}apf.setStyleClass(target,"down",["hover"]);if(!h.$movable){document.onmouseup=function(a){document.onmouseup=null,g=!1};return}apf.setStyleClass(a.$pointer,"move_pointer",["size_pointer"]);var i=b.clientX-target.offsetLeft,j=b.clientX,k=b.clientY-target.offsetTop,l=b.clientY,m;document.onmouseup=function(b){b||(b=event),document.onmouseup=document.onmousemove=null,g=!1,a.$pointer.style.display="none";if(!m)return;m.style.top="-100px";var c=document.elementFromPoint(b.clientX,b.clientY);if(c.parentNode==m.parentNode){var d=apf.getAbsolutePosition(c),e=b.clientX-d[0]>c.offsetWidth/2?c.nextSibling:c;h.move(e?apf.all[e.getAttribute("hid")]:null,a)}apf.destroyHtmlNode(m)},document.onmousemove=function(b){b||(b=event);if(!m){if(Math.abs(b.clientX-j)<3&&Math.abs(b.clientY-l)<3)return;m=target.cloneNode(!0),m.style.position="absolute";var c=apf.getWidthDiff(target);m.style.width=target.offsetWidth-c-a.$widthdiff+2+"px",m.style.left=target.offsetLeft,m.style.top=target.offsetTop,m.style.margin=0,m.removeAttribute("hid"),apf.setStyleClass(m,"drag",["ascending","descending"]),target.parentNode.appendChild(m)}m.style.top="-100px",a.$pointer.style.display="none";var d=document.elementFromPoint(b.clientX,b.clientY);if(d.parentNode==m.parentNode){var e=apf.getAbsolutePosition(d);a.$pointer.style.left=d.offsetLeft+(b.clientX-e[0]>d.offsetWidth/2?d.offsetWidth-8:0)+"px",a.$pointer.style.display="block"}m.style.left=b.clientX-i+"px",m.style.top=b.clientY-k+"px"}},this.$int.onmouseout=function(b){b||(b=event);if(a.disabled)return;var c=this;this.$timer=setTimeout(function(){a.$ext.style.cursor="",apf.setStyleClass(c,"",["hover","down"])},10)},this.$int.onmousemove=function(b){if(g||a.disabled)return;b||(b=event);var c=apf.getAbsolutePosition(this),d=a.$head.scrollLeft,e=b.clientX-c[0]+d;if(e<4||this.offsetWidth-e-a.$widthdiff<3&&apf.getChildNumber(h.$int)<a.$headings.length-1){var f=e<4?this.previousSibling:this;a.$ext.style.cursor=f&&h.$resizable?apf.isWebkit?"ew-resize":"w-resize":"default",apf.setStyleClass(this,"",["hover","down"])}else a.$ext.style.cursor="default",apf.setStyleClass(this,"hover",["down"])},!this.options&&a.options&&this.$propHandlers.options.call(this,this.options=a.options),this.visible===!1&&this.$propHandlers.visible.call(this,!1,null,null,!0),this},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.$draw()}),this.addEventListener("DOMNodeRemovedFromDocument",function(a){if(!this.$int)return;this.$int.onmouseover=this.$int.onmouseup=this.$int.onmousedown=this.$int.onmousemove=this.$int.onmouseout=null})}.call(apf.BindingColumnRule.prototype=new apf.BindingRule),apf.aml.setElement("column",apf.BindingColumnRule),apf.BindingDndRule=function(a,b){this.$init(b,apf.NODE_HIDDEN,a)},function(){this.compile=function(a){if(!this[a])return;var b;if(a=="value")b=apf.lm.compile(this[a],{xpathmode:3});else if(a=="match")b=apf.lm.compile(this[a],{xpathmode:3,injectself:!0});else if(a=="target")b=apf.lm.compile(this[a],{xpathmode:2,injectself:!0});else if(a=="action")b=apf.lm.compile(this[a],{nostring:!0});else if(a=="copy")b=apf.lm.compile(this[a],{withopt:!0,nostring:!0});else throw new Error("Missing property handler for compile");return this["c"+a]=b},this.$attrExcludePropBind=apf.extend({target:1,parent:1,action:1,copy:1},this.$attrExcludePropBind),this.$propHandlers.target=this.$propHandlers.parent=this.$propHandlers.action=this.$propHandlers.copy=function(a,b){delete this["c"+b]},this.$noderegister=function(a){apf.GuiElement.propHandlers.drop.call(a.amlNode,!0)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=this;while(b&&b.$bindingRule)b=b.parentNode;if(!b)return;if(b.localName=="bindings"){b.addEventListener("noderegister",this.$noderegister);var c=b.$amlNodes;for(var d=0;d<c.length;d++)apf.GuiElement.propHandlers.drop.call(c[d],!0)}else apf.GuiElement.propHandlers.drop.call(b,!0)})}.call(apf.BindingDndRule.prototype=new apf.BindingRule),apf.aml.setElement("drag",apf.BindingDndRule),apf.aml.setElement("drop",apf.BindingDndRule),apf.BindingEachRule=function(a,b){this.$init(b,apf.NODE_HIDDEN,a);var c=this;this.$noderegister=function(a){a.amlNode.$handleBindingRule(c.match,"each"),a.amlNode.$sort=c.sort?new apf.Sort(c):null}},function(){this.$attrExcludePropBind=apf.extend({sort:1,"data-type":1,"date-format":1,"sort-method":1,order:1,"case-order":1},this.$attrExcludePropBind),this.$booleanProperties.animate=!0,this.$propHandlers.sort=this.$propHandlers["data-type"]=this.$propHandlers["date-format"]=this.$propHandlers.order=this.$propHandlers["case-order"]=function(a,b){delete this["c"+b]},this.$updateEach=function(a){var b=this.parentNode;if(b.localName=="bindings"){var c=b.$amlNodes,d=0,e=c.length;for(;d<e;++d)c[d].each!=a&&c[d].$handleBindingRule(a,"each")}else b.each!=a&&b.$handleBindingRule(a,"each")},this.$getFilteredMatch=function(a){if(!a)return this.match;var b=a.trim().toLowerCase().split(" "),c=this.match.charAt(0)=="["&&this.match.charAt(this.match.length-1)=="]"?this.match.replace(/^\[|\]$/g,""):this.match,d;if(c.indexOf("::")>-1){var e=c.split("::");apf.xPathAxis[e[0]]||(d=e[0],c=e[1])}var f=[],g,h,i=this.$fields||["text()"];for(var j=0,k=b.length;j<k;j++){h=[],g=b[j];for(var l=0,m=i.length;l<m;l++)h.push("contains(translate("+i[l]+", 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'), '"+g+"')");f.push(h.join(" or "))}var n="("+f.join(") and (")+")",o=this["filter-groups"]?this["filter-groups"].split("|"):[];c=c.split("|");var p=[];for(j=0,k=c.length;j<k;j++)o.contains(c[j])||p.push(c[j]+"["+n+"]");var q=p.join("|");for(j=0;j<o.length;j++)p.push(o[j]+"["+q+"]");return p.join("|")},this.$propHandlers.filter=function(a,b){if(!this.$amlLoaded)return;this.$updateEach(this.$getFilteredMatch(a))},this.$propHandlers["filter-fields"]=function(a,b){this.$fields=a.splitSafe(",")},this.addEventListener("prop.match",function(a){if(!this.$amlLoaded)return;this.filter?this.$propHandlers.filter.call(this,this.filter):this.$updateEach(this.match)});var a;this.addEventListener("DOMNodeInserted",a=function(a){if(a.currentTarget!=this)return;var b=this.$getFilteredMatch(this.filter),c=this.parentNode;if(c.localName=="bindings"){c.addEventListener("noderegister",this.$noderegister);var d=c.$amlNodes,e=0,f=d.length;for(;e<f;++e)d[e].$handleBindingRule(b,"each"),d[e].$sort=this.sort?new apf.Sort(this):null}else c.$handleBindingRule(b,"each"),c.$sort=this.sort?new apf.Sort(this):null}),this.addEventListener("DOMNodeRemoved",function(a){if(a.currentTarget!=this)return;var b=this.parentNode;if(b.localName=="bindings"){b.removeEventListener("noderegister",this.$noderegister);var c=b.$amlNodes,d=0,e=c.length;for(;d<e;++d)delete c[d].$sort}else delete b.$sort}),this.addEventListener("DOMNodeInsertedIntoDocument",a)}.call(apf.BindingEachRule.prototype=new apf.BindingRule),apf.aml.setElement("each",apf.BindingEachRule),apf.BindingLoadRule=function(a,b){this.$init(b,apf.NODE_HIDDEN,a)},function(){this.$attrExcludePropBind=apf.extend({get:1},this.$attrExcludePropBind),this.$propHandlers.get=function(a,b){delete this["c"+b]}}.call(apf.BindingLoadRule.prototype=new apf.BindingRule),apf.aml.setElement("load",apf.BindingLoadRule),apf.aml.setElement("insert",apf.BindingLoadRule),apf.BindingQuicksandRule=function(a,b){this.$init(b,apf.NODE_HIDDEN,a)},function(){function getFilteredNodes(a){a=a||this.$parent;var b,c,d=[],e=[],f=a.$getDataNode("quicksand",a.xmlRoot,!1,null,!0),g=a.$ext.childNodes,h=0,i=f.length;if(!g.length||!i)return d;for(;h<i;++h)e.push(f[h].getAttribute("a_id"));for(h=0,i=g.length;h<i;++h){if(!g[h]||!(b=g[h].getAttribute("id")))continue;c=b.split("|"),c.pop(),e.indexOf(c.join("|"))>-1&&d.push(g[h])}return d}function nodeInFilter(a,b){var c=0,d=b.length,e=a.getAttribute("id");for(;c<d;++c)if(b[c].getAttribute("id")==e)return b[c];return null}function quicksand(parent,customOptions){parent=this.$parent.$ext;var i,l,dest,src,offset,_self=this,coll=getFilteredNodes.call(this),parentOffset=apf.getAbsolutePosition(parent),offsets=[],callbackFunction=typeof arguments[1]=="function"?arguments[1]:typeof arguments[2]=="function"?arguments[2]:apf.K,postCallback=function(){_self.dispatchEvent("afterquicksand"),callbackFunction.call(_self)},options={steps:60,anim:apf.tween.easeInOutQuad,onfinish:postCallback,adjustHeight:!0};apf.extend(options,customOptions);if(apf.isIE&&apf.isIE<7){parent.innerHTML="";for(i=0,l=coll.length;i<l;i++)parent.appendChild(coll[i]);return}var $source=parent.childNodes,correctionOffset=[0,0];parent.style.height=parent.offsetHeight+"px",apf.tween.clearQueue(parent,!0);for(i=0,l=$source.length;i<l;++i)src=$source[i],offsets[i]=apf.getAbsolutePosition(src,parent,!1);for(i=0,l=$source.length;i<l;++i){src=$source[i];with(src.style)position="absolute",margin="0",top=offsets[i][1]-parentOffset[1]+"px",left=offsets[i][0]-parentOffset[0]+"px"}var $dest=parent.cloneNode(!1);$dest.setAttribute("id","");for(i=0,l=coll.length;i<l;++i)$dest.appendChild(coll[i].cloneNode(!0)),coll[i].$offset=apf.getAbsolutePosition(coll[i]);parent.parentNode.insertBefore($dest,parent);with($dest.style)zIndex=1,opacity=0,margin=0,position="absolute",top=parentOffset[1]-correctionOffset[1]+"px",left=parentOffset[0]-correctionOffset[0]+"px";var insets=[];for(i=0,l=$source.length;i<l;++i)src=$source[i],(dest=nodeInFilter(src,coll))?(offset=insets.shift()||offsets[i],options.tweens=[{type:"top",from:dest.$offset[1]-parentOffset[1],to:offset[1]-parentOffset[1]},{type:"left",from:dest.$offset[0]-parentOffset[0],to:offset[0]-parentOffset[0]},{type:"opacity",from:apf.getStyle(src,"opacity"),to:1}],apf.supportCSSAnim&&options.tweens.push({type:"transform",subType:"scale",from:0,to:1}),apf.tween.multi(src,options)):(options.tweens=[{type:"opacity",from:apf.getStyle(src,"opacity"),to:0}],apf.supportCSSAnim&&options.tweens.push({type:"transform",subType:"scale",from:1,to:0}),insets.push(offsets[i]),apf.tween.multi(src,options));for(i=0,l=coll.length;i<l;++i){var item=coll[i];if(!nodeInFilter(item,$source)){dest=nodeInFilter(item,coll),options.tweens=[{type:"opacity",from:0,to:1}],!!apf.isIE,offset=apf.getAbsolutePosition(dest),dest=dest.cloneNode(!0);with(dest.style)position="absolute",margin="0",top=offset[1]-parentOffset[1]+"px",left=offset[0]-parentOffset[0]+"px",opacity="0",transform="scale(.0)";parent.appendChild(dest),apf.tween.multi(dest,options)}}}this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=this;while(b&&b.$bindingRule)b=b.parentNode;this.$parent=b;if(!b)return;var c=this;setTimeout(function(){quicksand.call(c)})})}.call(apf.BindingQuicksandRule.prototype=new apf.BindingRule),apf.aml.setElement("quicksand",apf.BindingQuicksandRule),apf.bindings=function(a,b){this.$init(b||"bindings",apf.NODE_HIDDEN,a),this.$bindings=new apf.ruleList,this.$amlNodes={}},function(){this.$smartbinding=null,this.register=function(a){if(a.localName=="smartbinding"){this.$smartbinding=a,this.$smartbinding.add(this);return}if(!a.hasFeature(apf.__DATABINDING__))return;this.$amlNodes[a.$uniqueId]=a;if(!this.$amlLoaded)return;this.$bindings.$isCompiled||(this.$cbindings=this.$bindings.compile()),a.$bindings=this.$bindings,a.$cbindings=this.$cbindings,a.$bindingsElement=this,a.dispatchEvent("bindingsload",{bindings:this.$bindings,compiled:this.$cbindings}),this.dispatchEvent("noderegister",{amlNode:a}),a.$checkLoadQueue()},this.unregister=function(a){this.$amlNodes[a.$uniqueId]=null,delete this.$amlNodes[a.$uniqueId],a.$bindingsElement=a.$bindings=a.$cbindings=!1,a.dispatchEvent("bindingsunload",{bindings:this.$bindings,compiled:this.$cbindings})},this.reload=function(){for(var a in this.$amlNodes)this.$amlNodes[a].reload()},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=this.childNodes;for(var c,d=0,e=b.length;d<e;d++)!(c=b[d]).$amlLoaded&&c.nodeType==1&&c.dispatchEvent("DOMNodeInsertedIntoDocument");this.register(this.parentNode);for(var f in this.$amlNodes)this.register(this.$amlNodes[f])})}.call(apf.bindings.prototype=new apf.AmlElement),apf.ruleList=function(){this.$compiled={}},apf.ruleList.prototype={$isCompiled:!1,getRule:function(a,b){var c=this[a];if(!c)return!1;for(var d,e,f=0,g=c.length;f<g;f++){e=c[f];if(!e.match)return e;d=e.cmatch||e.compile("match",{injectself:!0,xpathmode:2});if(d&&d(b))return e}},compile:function(a){var b,c,d=this.$compiled,e=!1;if(a){c=[],b=this[a];for(var f,g=0,h=b.length;g<h;g++){if(!(f=b[g]).match&&!f.value)continue;c.push(f.match,f.value)}return d[a]=apf.lm.compileMatch(c),d}for(a in this){if(a=="each")continue;b=this[a];if(b.dataType!=apf.ARRAY)continue;c=[],e=!1;for(var f,g=0,h=b.length;g<h;g++){if(!(f=b[g]).match&&!f.value)continue;c.push(f.match,f.value)}d[a]=apf.lm.compileMatch(c)}return this.$isCompiled=!0,d},getRuleIndex:function(a,b){var c=this[a][b];return c.value?c.cvalue||c.compile("value"):c.match&&(c.cmatch||c.compile("match")),c},getDataNode:function(a,b,c,d,e){var f,g,h,i,j,k=this[a];if(!k)return;for(j,f=0,g=k.length;f<g;f++){j=k[f],h=j.cvaluematch,h||(j.match&&j.value&&j.value.match(/^\[.*\]$/)?j.valuematch="{_n = "+j.match+"; %[child::"+j.value.substr(1,j.value.length-2).split("|").join("|child::")+"]}":j.valuematch=j.match||j.value,h=j.$compile("valuematch",{xpathmode:e?4:3,injectself:j.match?!0:!1}));if(h&&(i=h(b,c)))return d&&d.push(j),i}return!1}},apf.aml.setElement("bindings",apf.bindings),apf.BindingSeriesRule=function(a,b){this.$init(b||"series",apf.NODE_HIDDEN,a)},function(){this.$attrExcludePropBind=apf.extend({formula:1},this.$attrExcludePropBind),this.$propHandlers.formula=function(a,b){delete this["c"+b]}}.call(apf.BindingSeriesRule.prototype=new apf.BindingRule),apf.aml.setElement("series",apf.BindingSeriesRule),apf.AmlConfig=function(){this.$init("config",apf.NODE_VISIBLE)},function(){this.focussable=!1,this.$canLeechSkin=!0,this.$draw=function(){this.$ext=this.$int=this.$getExternal(this.$isLeechingSkin?this.localName:"main")}}.call(apf.AmlConfig.prototype=new apf.Presentation),apf.aml.setElement("config",apf.AmlConfig),apf.browser=function(a,b){this.$init(b||"browser",apf.NODE_VISIBLE,a)},function(){this.implement(apf.DataAction,apf.StandardBinding),this.$supportedProperties.push("value","src"),this.$propHandlers.src=this.$propHandlers.value=function(a,b){try{this.$browser.src=a||"about:blank"}catch(c){this.$browser.src="about:blank"}},this.$propHandlers.border=apf.Presentation.prototype.$propHandlers.border,this.getValue=function(){return this.value||this.src},this.getURL=function(){return this.$browser.src},this.back=function(){this.$browser.contentWindow.history.back()},this.forward=function(){this.$browser.contentWindow.history.forward()},this.reload=function(){this.$browser.src=this.$browser.src},this.print=function(){this.$browser.contentWindow.print()},this.runCode=function(a,b){if(b)try{this.$browser.contentWindow.eval(a)}catch(c){}else this.$browser.contentWindow.eval(a)},this.$draw=function(a){a||(a=this.$pHtmlNode);if(apf.cannotSizeIframe){var b=document.createElement("iframe");b.setAttribute("frameborder","0"),this.$ext=a.appendChild(document.createElement("DIV")).appendChild(b).parentNode,this.$ext.style.width="100px",this.$ext.style.height="100px",this.$browser=this.$ext.firstChild,this.$browser.style.width="100%",this.$browser.style.height="100%",this.$browser.frameBorder=0}else this.$ext=a.appendChild(document.createElement("iframe")),this.$ext.setAttribute("frameborder","0"),this.$browser=this.$ext,this.$ext.style.border="1px solid #999",this.$ext.style.background="white";this.$ext.className="apfbrowser",this.getAttribute("style")&&this.$ext.setAttribute("style",this.getAttribute("style"));var c=this;apf.addListener(this.$browser,"load",function(){var a=this.contentWindow.location.href;c.dispatchEvent("load",{href:a}),a&&c.setProperty("src",a)}),apf.addListener(this.$browser,"error",function(){c.dispatchEvent("error"),this.contentWindow.location.href&&c.setProperty("src",this.contentWindow.location.href)}),this.$ext.host=this}}.call(apf.browser.prototype=new apf.GuiElement),apf.aml.setElement("browser",apf.browser),apf.submit=function(a,b){this.$init(b||"submit",apf.NODE_VISIBLE,a)},apf.trigger=function(a,b){this.$init(b||"trigger",apf.NODE_VISIBLE,a)},apf.reset=function(a,b){this.$init(b||"reset",apf.NODE_VISIBLE,a)},apf.button=function(a,b){this.$init(b||"button",apf.NODE_VISIBLE,a)},function(){function a(a){return;var b,c,d}function b(a){var b=self[this.submenu],c;this.value=!this.value,this.value&&this.$setState("Down",{});var d=this.parentNode.menuIsPressed;if(d&&d!=this){d.setValue(!1);var e=self[d.submenu];e!=self[this.submenu]&&e.$propHandlers.visible.call(e,!1,!0)}return this.value?(this.parentNode.menuIsPressed=this,b.display(null,null,!1,this,null,null,this.$ext.offsetWidth-2),this.parentNode.hasMoved=!1,a&&a.htmlEvent&&apf.stopPropagation(a.htmlEvent),!1):(b.hide(),this.$setState("Over",{},"toolbarover"),(c=this.parentNode.$button1)&&c.$setState("Over",{},"toolbarover"),this.parentNode.menuIsPressed=!1,this.parentNode.hasMoved&&(this.value=!1),apf.hasFocusBug&&apf.window.$focusfix(),!1)}function c(){var a=this.parentNode.menuIsPressed;if(!a||a==this)return;var b=self[this.submenu];if(b.pinned)return;a.setValue(!1);var c=self[a.submenu];c.$propHandlers.visible.call(c,!1,!0),this.setValue(!0),this.parentNode.menuIsPressed=this;var d=apf.getAbsolutePosition(this.$ext,b.$ext.offsetParent);return b.display(null,d[1]+this.$ext.offsetHeight,!0,this,null,null,this.$ext.offsetWidth-2),this.$focus(),this.parentNode.hasMoved=!0,!1}this.$useExtraDiv,this.$childProperty="caption",this.$inited=!1,this.$isLeechingSkin=!1,this.$canLeechSkin=!0,this.$focussable=apf.KEYBOARD,this.value=null,this.$init(function(){function d(a){if(a.defaultButtonSet||a.returnValue===!1)return;a.defaultButtonSet=!0,this.$useExtraDiv&&b.$ext.appendChild(apf.button.$extradiv),b.$setStyleClass(b.$ext,b.$baseCSSname+"Default"),a.srcElement!=b&&b.$focusParent&&b.$focusParent.addEventListener("keydown",f)}function e(a){this.$useExtraDiv&&apf.button.$extradiv.parentNode==b.$ext&&b.$ext.removeChild(apf.button.$extradiv),b.$setStyleClass(b.$ext,"",[b.$baseCSSname+"Default"]),a.srcElement!=b&&b.$focusParent&&b.$focusParent.removeEventListener("keydown",f)}function f(a){var c,d=apf.document.activeElement;if(d){if(d.hasFeature(apf.__MULTISELECT__))return;c=d.multiline}if(!b.$ext.onmouseup)return;if(c&&c!="optional"&&a.keyCode==13&&a.ctrlKey||(!c||c=="optional")&&a.keyCode==13&&!a.ctrlKey&&!a.shiftKey&&!a.altKey)apf.preventDefault(a.htmlEvent),b.$ext.onmouseup(a.htmlEvent,!0)}var a,b=this,c;this.$propHandlers["default"]=function(b){parseInt(b)!=b&&(b=apf.isTrue(b)?1:0),this["default"]=parseInt(b),(!this.focussable&&b||a)&&this.setAttribute("focussable",a=b),c&&(c.removeEventListener("focus",d),c.removeEventListener("blur",e));if(!b)return;var f=this.parentNode;while(f&&!f.focussable&&b--)f=f.parentNode;f&&(f.addEventListener("focus",d),f.addEventListener("blur",e))},this.addEventListener("focus",d),this.addEventListener("blur",e),this.$enable=function(){this["default"]&&(d({}),apf.document.activeElement&&apf.document.activeElement.focus(!0)),this.state&&this.value?this.$setState("Down",{}):this.$mouseOver?this.$updateState({},"mouseover"):this.$doBgSwitch(1)},this.$disable=function(){this["default"]&&e({}),this.$doBgSwitch(4),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Over",this.$baseCSSname+"Down"])}}),this.$booleanProperties.state=!0,this.$supportedProperties.push("icon","value","tooltip","state","color","caption","action","target","default","submenu","hotkey"),this.$propHandlers.icon=function(a){if(!this.oIcon)return;a?this.$setStyleClass(this.$ext,this.$baseCSSname+"Icon"):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Icon"]),apf.skins.setIcon(this.oIcon,a,this.iconPath)},this.$propHandlers.value=function(a){if(!this.state&&!this.submenu)return;a===undefined&&(a=!this.value),this.value=a,this.value?this.$setState("Down",{}):this.$setState("Out",{})},this.$propHandlers.state=function(a){a?this.$setStateBehaviour(this.value):this.$setNormalBehaviour()},this.$propHandlers.color=function(a){this.oCaption&&(this.oCaption.parentNode.style.color=a)},this.$propHandlers.caption=function(a){if(!this.oCaption)return;a?this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Empty"]):this.$setStyleClass(this.$ext,this.$baseCSSname+"Empty"),this.oCaption.nodeType==1?this.oCaption.innerHTML=String(a||"").trim():this.oCaption.nodeValue=String(a||"").trim()},this.$propHandlers.hotkey=function(a){this.$hotkey&&apf.setNodeValue(this.$hotkey,a),this.$lastHotkey&&(apf.hotkeys.remove(this.$lastHotkey[0],this.$lastHotkey[1]),delete this.$lastHotkey[0]);if(a){this.$lastHotkey=[a];var b=this;apf.hotkeys.register(a,this.$lastHotkey[1]=function(){b.$setState("Over",{}),$setTimeout(function(){b.$setState("Out",{})},200),b.$clickHandler&&b.$clickHandler()?b.$updateState(e||event,"click"):b.dispatchEvent("click")})}this.tooltip&&apf.GuiElement.propHandlers.tooltip.call(this,this.tooltip)},this.$propHandlers.submenu=function(d){if(!d){this.value&&this.parentNode&&b.call(this),this.$focussable=!0,this.$setNormalBehaviour(),this.removeEventListener("mousedown",b),this.removeEventListener("mouseover",c),this.removeEventListener("keydown",a,!0);return}this.$focussable=!1,this.$setStateBehaviour(),this.addEventListener("mouseover",c),this.addEventListener("mousedown",b),this.addEventListener("keydown",a,!0)},this.setValue=function(a){this.setProperty("value",a,!1,!0)},this.showMenu=function(){this.submenu&&!this.value&&b.call(this)},this.hideMenu=function(){this.submenu&&this.value&&b.call(this)},this.setCaption=function(a){this.setProperty("caption",a,!1,!0)},this.setIcon=function(a){this.setProperty("icon",a,!1,!0)},this.$setStateBehaviour=function(a){this.value=a||!1,this.isBoolean=!0,this.$setStyleClass(this.$ext,this.$baseCSSname+"Bool"),this.value&&(this.$setStyleClass(this.$ext,this.$baseCSSname+"Down"),this.$doBgSwitch(this.states.Down))},this.$setNormalBehaviour=function(){this.value=null,this.isBoolean=!1,this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Bool"])},this.$setState=function(a,b,c){var d=this.parentNode;if(c&&this.dispatchEvent(c,{htmlEvent:b})===!1)return;if(d&&d.$button2&&d.$button2.value&&!this.submenu)return;this.$doBgSwitch(this.states[a]);var e=this.$baseCSSname;this.$setStyleClass(this.$ext,a!="Out"?e+a:"",[this.value?"":e+"Down",e+"Over"]),this.submenu&&(e=this.$baseCSSname+"menu",this.$setStyleClass(this.$ext,a!="Out"?e+a:"",[this.value?"":e+"Down",e+"Over"]))},this.$clickHandler=function(){if(this.isBoolean&&!this.submenu)return this.setProperty("value",!this.value),!0},this.$submenu=function(a,b){a&&(this.setValue(!1),this.$setState("Out",{},"mouseout"),this.parentNode&&(this.parentNode.menuIsPressed=!1))},this.addEventListener("$skinchange",function(a){this.tooltip&&apf.GuiElement.propHandlers.tooltip.call(this,this.tooltip)}),this.$draw=function(){var a,b=(a=this.parentNode)&&a.parentNode&&a.parentNode.localName=="toolbar";b&&(typeof this.focussable=="undefined"&&(this.focussable=!1),this.$focussable=apf.KEYBOARD),this.$ext=this.$getExternal(),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.oCaption=this.$getLayoutNode("main","caption",this.$ext),this.$useExtraDiv=apf.isTrue(this.$getOption("main","extradiv")),!apf.button.$extradiv&&this.$useExtraDiv&&((apf.button.$extradiv=document.createElement("div")).className="extradiv"),this.localName=="submit"?this.action="submit":this.localName=="reset"&&(this.action="reset"),this.$setupEvents()},this.addEventListener("$skinchange",function(){this.caption&&this.$propHandlers.caption.call(this,this.caption),this.icon&&this.$propHandlers.icon.call(this,this.icon),this.$updateState({reset:1})})}.call(apf.button.prototype=new apf.BaseButton),apf.submit.prototype=apf.trigger.prototype=apf.reset.prototype=apf.button.prototype,apf.aml.setElement("submit",apf.submit),apf.aml.setElement("trigger",apf.trigger),apf.aml.setElement("reset",apf.reset),apf.aml.setElement("button",apf.button),apf.checkbox=function(a,b){this.$init(b||"checkbox",apf.NODE_VISIBLE,a)},function(){this.implement(apf.DataAction),this.$focussable=apf.KEYBOARD,this.checked=!1,this.$booleanProperties.checked=!0,this.$supportedProperties.push("value","checked","label","values"),this.$propHandlers.value=function(a){a=typeof a=="string"?a.trim():a,a==""&&this["default"]&&(a=this.value=apf.isTrue(this["default"])),this.$values?this.checked=typeof a!="undefined"&&a!==null&&a.toString()==this.$values[0].toString():this.checked=apf.isTrue(a),this.checked?apf.setStyleClass(this.$ext,this.$baseCSSname+"Checked"):apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Checked"])},this.$propHandlers.checked=function(a){this.$values||this.getAttribute("values")&&this.$propHandler.values.call(this,this.getAttribute("values")),this.setProperty("value",this.$values?this.$values[a?0:1]:!0)},this.$propHandlers.label=function(a){if(!this.$ext)return;var b=this.$getLayoutNode("main","label",this.$ext);if(!b)return;b.nodeType==1?b.innerHTML=a:b.nodeValue=a},this.$propHandlers.values=function(a){this.$values=typeof a=="string"?a.split("|"):a||[1,0],this.$propHandlers.value.call(this,this.value)},this.setValue=function(a){if(!this.$values)return;this.setProperty("value",a,!1,!0)},this.getValue=function(){return this.xmlRoot?this.$values?this.$values[this.checked?0:1]:this.checked:this.value},this.check=function(){this.setProperty("value",this.$values?this.$values[0]:!0,!1,!0)},this.uncheck=function(){this.setProperty("value",this.$values?this.$values[1]:!1,!1,!0)},this.addEventListener("$clear",function(){this.setProperty("value",this.$values?this.$values[1]:!1)}),this.$enable=function(){this.$input&&(this.$input.disabled=!1),this.$doBgSwitch(1)},this.$disable=function(){this.$input&&(this.$input.disabled=!0),this.$doBgSwitch(4)},this.$setState=function(a,b,c){this.$doBgSwitch(this.states[a]),this.$setStyleClass(this.$ext,a!="Out"?this.$baseCSSname+a:"",[this.$baseCSSname+"Down",this.$baseCSSname+"Over"]),this.state=a,c&&this.dispatchEvent(c,{htmlEvent:b})},this.$clickHandler=function(){return this.change(this.$values?this.$values[this.checked?1:0]:!this.checked),this.validate&&this.validate(!0),!0},this.$draw=function(){this.$ext=this.$getExternal(),this.$input=this.$getLayoutNode("main","input",this.$ext),this.$notfromext=this.$input&&this.$input!=this.$ext,this.$setupEvents()},this.$childProperty="label",this.addEventListener("$skinchange",function(){this.label&&this.$propHandlers.label.call(this,this.label)})}.call(apf.checkbox.prototype=new apf.BaseButton),apf.aml.setElement("checkbox",apf.checkbox),apf.colorpicker=function(a,b){this.$init(b||"colorpicker",apf.NODE_VISIBLE,a)},function(){function f(a,b,c){return i(a/(e-1),b/e,Math.min(c/e,1))}function g(a,b,c){var d=255,f=e,g=f*2/3,h=Math.max(Math.max(a,b),c),i=Math.min(Math.min(a,b),c);return L=((h+i)*f+d)/(2*d),h==i?(S=0,H=g):(L<=f/2?S=((h-i)*f+(h+i)/2)/(h+i):S=((h-i)*f+(2*d-h-i)/2)/(2*d-h-i),Rdelta=((h-a)*(f/6)+(h-i)/2)/(h-i),Gdelta=((h-b)*(f/6)+(h-i)/2)/(h-i),Bdelta=((h-c)*(f/6)+(h-i)/2)/(h-i),a==h?H=Bdelta-Gdelta:b==h?H=f/3+Rdelta-Bdelta:H=2*f/3+Gdelta-Rdelta,H<0&&(H+=f),H>f&&(H-=f)),[H,S,L]}function h(a){var b;return a<0?a+=1:a>1&&(a-=1),6*a<1?b=M1+(M2-M1)*a*6:2*a<1?b=M2:3*a<2?b=M1+(M2-M1)*(2/3-a)*6:b=M1,Math.max(Math.floor(255*b),0)}function i(a,b,c){var d,e,f;return b==0?e=f=d=Math.round(255*c):(M2=c<=.5?c*(1+b):c+b-c*b,M1=2*c-M2,d=h(a+1/3),e=h(a),f=h(a-1/3)),Math.decToHex(d)+""+Math.decToHex(e)+""+Math.decToHex(f)}this.implement(apf.StandardBinding,apf.DataAction),this.$focussable=!0,this.setValue=function(a,b){b||(b="RGBHEX");var c;switch(b){case"HSL":this.fill(a[0],a[1],a[2]);break;case"RGB":c=g(a[0],a[1],a[2]),this.fill(c[0],c[1],c[2]);break;case"RGBHEX":var d=arguments[0].match(/(..)(..)(..)/);c=g(Math.hexToDec(d[0]),Math.hexToDec(d[1]),Math.hexToDec(d[2])),this.fill(c[0],c[1],c[2])}},this.getValue=function(d){return f(c,b,a)};var a=120,b=239,c=0,d="#FF0000",e=240;this.fill=function(a,b,c){var d=f(a,b,c);this.value=d;var e=d.match(/(..)(..)(..)/);this.tbRed.value=Math.hexToDec(e[1]),this.tbGreen.value=Math.hexToDec(e[2]),this.tbBlue.value=Math.hexToDec(e[3]),this.tbHue.value=Math.round(a),this.tbSatern.value=Math.round(b),this.tbLuminance.value=Math.round(c),this.tbHexColor.value=d,this.shower.style.backgroundColor=d;var g=f(a,b,120);this.bar1.style.backgroundColor=g,this.bgBar1.style.backgroundColor=f(a,b,240),this.bar2.style.backgroundColor=f(a,b,0),this.bgBar2.style.backgroundColor=g},this.movePointer=function(d){d=d||event;var e=this.pHolder.ty;d.clientY-e>=0&&d.clientY-e<=this.pHolder.offsetHeight-this.pointer.offsetHeight+22&&(this.pointer.style.top=d.clientY-e),d.clientY-e<21&&(this.pointer.style.top=21),d.clientY-e>this.pHolder.offsetHeight-this.pointer.offsetHeight+19&&(this.pointer.style.top=this.pHolder.offsetHeight-this.pointer.offsetHeight+19),a=(255-(this.pointer.offsetTop-22))/2.56*2.4,this.fill(c,b,a),d.returnValue=!1,d.cancelBubble=!0},this.setLogic=function(){var d=this;this.pHolder.style.zIndex=10,this.pHolder.onmousedown=function(){this.ty=apf.getAbsolutePosition(this)[1]-20,d.movePointer(),document.onmousemove=d.movePointer,document.onmouseup=function(){this.onmousemove=function(){}}},this.container.onmousedown=function(e){e=e||event,this.active=!0,e.srcElement==this&&(e.offsetX>=0&&e.offsetX<=256&&e.offsetY>=0&&e.offsetY<=256&&(b=(256-e.offsetY)/2.56*2.4,c=e.offsetX/2.56*2.39),d.fill(c,b,a),d.shower.style.backgroundColor=d.currentColor),d.point.style.display="none",e.cancelBubble=!0},this.container.onmouseup=function(a){a=a||event,this.active=!1,d.point.style.top=a.offsetY-d.point.offsetHeight-2,d.point.style.left=a.offsetX-d.point.offsetWidth-2,d.point.style.display="block",d.change(d.tbHexColor.value)},this.container.onmousemove=function(e){e=e||event,this.active&&(e.offsetX>=0&&e.offsetX<=256&&e.offsetY>=0&&e.offsetY<=256&&(b=(256-e.offsetY)/2.56*2.4,c=e.offsetX/2.56*2.39),d.fill(c,b,a),d.shower.style.backgroundColor=d.currentColor)}},this.$mainBind="color",this.$draw=function(a,b){this.$ext=this.$getExternal(),this.tbRed=this.$getLayoutNode("main","red",this.$ext),this.tbGreen=this.$getLayoutNode("main","green",this.$ext),this.tbBlue=this.$getLayoutNode("main","blue",this.$ext),this.tbHue=this.$getLayoutNode("main","hue",this.$ext),this.tbSatern=this.$getLayoutNode("main","satern",this.$ext),this.tbLuminance=this.$getLayoutNode("main","luminance",this.$ext),this.tbHexColor=this.$getLayoutNode("main","hex",this.$ext);var c=this;this.tbHexColor.onchange=function(){c.setValue(this.value,"RGBHEX")},this.shower=this.$getLayoutNode("main","shower",this.$ext),this.bar1=this.$getLayoutNode("main","bar1",this.$ext),this.bgBar1=this.$getLayoutNode("main","bgbar1",this.$ext),this.bar2=this.$getLayoutNode("main","bar2",this.$ext),this.bgBar2=this.$getLayoutNode("main","bgbar2",this.$ext),this.pHolder=this.$getLayoutNode("main","pholder",this.$ext),this.pointer=this.$getLayoutNode("main","pointer",this.$ext),this.container=this.$getLayoutNode("main","container",this.$ext),this.point=this.$getLayoutNode("main","point",this.$ext);var d=this.$ext.getElementsByTagName("input");for(var e=0;e<d.length;e++)d[e].onselectstart=function(a){a=a||event,a.cancelBubble=!0};this.setLogic(),this.setValue("ffffff")},this.$loadAml=function(a){a.getAttribute("color")&&this.setValue(a.getAttribute("color"))},this.$destroy=function(){this.container.host=this.tbRed.host=this.tbGreen.host=this.tbBlue.host=this.tbHexColor.host=this.pHolder.host=null}}.call(apf.colorpicker.prototype=new apf.GuiElement),apf.aml.setElement("colorpicker",apf.colorpicker),apf.colorpicker=function(a,b){this.$init(b||"colorpicker",apf.NODE_VISIBLE,a)},function(){this.value="ff0000",this.changeTimer=null;var a=apf.color;this.$supportedProperties.push("color","red","green","blue","hue","saturation","brightness","hex","skin-textbox","skin-spinner"),this.$propHandlers.red=this.$propHandlers.green=this.$propHandlers.blue=this.$propHandlers.hue=this.$propHandlers.saturation=this.$propHandlers.brightness=this.$propHandlers.hex=function(a,b){clearTimeout(this.changeTimer);var c=this;this.changeTimer=$setTimeout(function(){c.$change(b)})},this.$propHandlers.value=function(a){this.$restoreOriginal()},this.$restoreOriginal=function(){var b=a.hexToHSB(this.value);this.hue=b.h,this.saturation=b.s,this.brightness=b.b,this.$change(),this.oCustomColor.style.backgroundColor=(this.value.substr(0,1)!="#"?"#":"")+this.value},this.$change=function(b){var d=a.fixHSB({h:this.hue,s:this.saturation,b:this.brightness}),e=a.HSBToHex(d),f=a.HSBToRGB(d);this.oNewColor.style.backgroundColor="#"+e,b!="red"&&b!="green"&&b!="blue"&&(this.setProperty("red",f.r),this.setProperty("green",f.g),this.setProperty("blue",f.b)),b!="hue"&&b!="saturation"&&b!="brightness"&&(this.setProperty("hue",d.h),this.setProperty("saturation",d.s),this.setProperty("brightness",d.b)),b!="hex"&&this.setProperty("hex",e),this.oSelector.style.background="#"+a.HSBToHex({h:d.h,s:100,b:100}),this.oHue.style.top=parseInt(150-150*d.h/360,10)+"px",this.oSelectorInd.style.left=parseInt(150*d.s/100,10)+"px",this.oSelectorInd.style.top=parseInt(150*(100-d.b)/100,10)+"px"},this.$draw=function(){function e(){return document.onmousemove=document.onmouseup=null,b.$change(),!1}function f(){function f(e){e=e||event;var f=e.pageX||e.clientX+(d?d.scrollLeft:0),g=e.pageY||e.clientY+(d?d.scrollTop:0);return b.brightness=parseInt(100*(150-Math.max(0,Math.min(150,g-c[1])))/150,10),b.saturation=parseInt(100*Math.max(0,Math.min(150,f-c[0]))/150,10),b.$change(),c=apf.getAbsolutePosition(a),!1}var a=this,c=apf.getAbsolutePosition(a);document.onmousemove=f,document.onmouseup=function(a){return f(a),e(a)}}function g(a){function g(a){a=a||event;var e=a.pageY||a.clientY+(d?d.scrollTop:0);b.hue=parseInt(360*(150-Math.max(0,Math.min(150,e-f[1])))/150,10),b.$change(),f=apf.getAbsolutePosition(c)}var c=this,f=apf.getAbsolutePosition(c);document.onmousemove=g,document.onmouseup=function(a){return g(a),e(a)}}function h(d){var e=d.currentTarget,f=!1;e.id.indexOf("hue")>-1?b.hue=d.value:e.id.indexOf("saturation")>-1?b.saturation=d.value:e.id.indexOf("brightness")>-1?b.brightness=d.value:e.id.indexOf("red")>-1?(b.red=d.value,f=!0):e.id.indexOf("green")>-1?(b.green=d.value,f=!0):e.id.indexOf("blue")>-1&&(b.blue=d.value,f=!0);if(f){var g=a.RGBToHSB({r:b.red,g:b.green,b:b.blue});b.hex=a.HSBToHex(g),b.hue=g.h,b.saturation=g.s,b.brightness=g.b}else b.hex=a.HSBToHex({h:b.hue,s:b.saturation,b:b.brightness});b.$change(f?"red":"hue")}this.id||this.setProperty("id","colorpicker"+this.$uniqueId),this.$ext=this.$getExternal(),this.oSelector=this.$getLayoutNode("main","selector",this.$ext),this.oSelectorInd=this.$getLayoutNode("main","selector_indic",this.$ext),this.oHue=this.$getLayoutNode("main","hue",this.$ext),this.oNewColor=this.$getLayoutNode("main","newcolor",this.$ext),this.oCustomColor=this.$getLayoutNode("main","customcolor",this.$ext),this.oInputs=this.$getLayoutNode("main","inputs",this.$ext),this.$restoreOriginal();var b=this,d=!document.compatMode||document.compatMode=="CSS1Compat"?document.html:document.body;this.oSelector.onmousedown=f,this.oHue.parentNode.onmousedown=g,this.oCustomColor.onmousedown=function(){b.$restoreOriginal()};var i=apf.getInheritedAttribute(this.parentNode,"skinset");new apf.hbox({htmlNode:this.oInputs,skinset:i,left:212,top:52,width:150,padding:3,childNodes:[new apf.vbox({padding:3,edge:"0 10 0 0",childNodes:[new apf.hbox({childNodes:[new apf.label({width:14,caption:"R:","for":this.id+"_red"}),new apf.spinner({id:this.id+"_red",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:255,value:"{"+this.id+".red}",onafterchange:h})]}),new apf.hbox({edge:"0 0 3 0",childNodes:[new apf.label({width:14,caption:"G:","for":this.id+"_green"}),new apf.spinner({id:this.id+"_green",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:255,value:"{"+this.id+".green}",onafterchange:h})]}),new apf.hbox({edge:"0 0 3 0",childNodes:[new apf.label({width:14,caption:"B:","for":this.id+"_blue"}),new apf.spinner({id:this.id+"_blue",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:255,value:"{"+this.id+".blue}",onafterchange:h})]})]}),new apf.vbox({padding:3,childNodes:[new apf.hbox({childNodes:[new apf.label({width:14,caption:"H:","for":this.id+"_hue"}),new apf.spinner({id:this.id+"_hue",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:360,value:"{"+this.id+".hue}",onafterchange:h})]}),new apf.hbox({edge:"0 0 3 0",childNodes:[new apf.label({width:14,caption:"S:","for":this.id+"_saturation"}),new apf.spinner({id:this.id+"_saturation",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:100,value:"{"+this.id+".saturation}",onafterchange:h})]}),new apf.hbox({edge:"0 0 3 0",childNodes:[new apf.label({width:14,caption:"B:","for":this.id+"_brightness"}),new apf.spinner({id:this.id+"_brightness",skin:this["skin-spinner"],realtime:!0,width:45,min:0,max:100,value:"{"+this.id+".brightness}",onafterchange:h})]})]})]}),new apf.label({htmlNode:this.oInputs,skinset:i,left:212,top:144,width:14,caption:"#","for":this.id+"_hex"}),this.$input=new apf.textbox({htmlNode:this.oInputs,skinset:i,skin:this["skin-textbox"],mask:"<XXXXXX;;_",left:222,top:140,width:60,value:"{"+this.id+".hex}",onafterchange:function(d){b.hex=a.fixHex(d.value);var e=a.hexToHSB(b.hex);b.hue=e.h,b.saturation=e.s,b.brightness=e.b,b.$change()}})},this.$destroy=function(){this.$ext=this.oSelector=this.oSelectorInd=this.oHue=this.oNewColor=this.oCustomColor=this.oInputs=null}}.call(apf.colorpicker.prototype=new apf.StandardBinding),apf.aml.setElement("colorpicker",apf.colorpicker),apf.comment=function(){this.$init("comment",apf.NODE_HIDDEN)},apf.comment.prototype=new apf.AmlComment,apf.aml.setElement("comment",apf.comment),apf.contextmenu=function(){this.$init("contextmenu",apf.NODE_HIDDEN)},function(){this.$amlNodes=[],this.$attrExcludePropBind=apf.extend({match:1},this.$attrExcludePropBind),this.register=function(a){a.contextmenus||(a.contextmenus=[]),a.contextmenus.push(this)},this.unregister=function(a){a.contextmenus.remove(this)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.register(this.parentNode)})}.call(apf.contextmenu.prototype=new apf.AmlElement),apf.aml.setElement("contextmenu",apf.contextmenu),apf.datagrid=function(a,b){this.$init(b||"datagrid",apf.NODE_VISIBLE,a),this.$headings=[],this.$cssRules=[],this.$lastOpened={},this.$editors={},this.$dynCssClasses=[]},function(){function b(){var a=this.current||this.$selected,b=this.$container;b.scrollTop=a.offsetTop-21}var a=this.$treeState;this.implement(apf.DataAction),this.bufferselect=!1,this.$useTable=!1,this.$focussable=!0,this.$isWindowContainer=-1,this.$widthdiff=0,this.$defaultwidth=0,this.$useiframe=0,this.$needsDepth=!0,this.$fixed=0,this.canrename=!1,this.$booleanProperties.iframe=!0,this.$propHandlers.options=function(a){for(var b=0,c=this.$headings.length;b<c;b++)this.$headings[b].setAttribute("options",a)},this.$getCaptionElement=function(){if(!this.$selected)return!1;var a=this.$head.childNodes,b=this.$selected.childNodes,c=0;nodeIter=b[c];while(nodeIter){if(nodeIter.nodeType!=1){nodeIter=nodeIter.nextSibling;continue}h=apf.all[a[c].getAttribute("hid")];if(h.tree||h.rename)return this.$getLayoutNode(h.tree?"treecell":"cell","caption",nodeIter)||nodeIter;c++,nodeIter=nodeIter.nextSibling}throw new Error("Datagrid without rename column specified")},this.$focus=function(){if(!this.$ext||apf.isIE&&this.$useiframe&&this.cssfix)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus"),this.oDoc&&this.$setStyleClass(this.oDoc.documentElement,this.$baseCSSname+"Focus")},this.$blur=function(){if(!this.$ext||apf.isIE&&this.$useiframe&&this.cssfix)return;this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),this.oDoc&&this.$setStyleClass(this.oDoc.documentElement,"",[this.$baseCSSname+"Focus"]),c.call(this)},this.addEventListener("bindingsload",this.$loaddatabinding=function(a){var b=a.bindings.column;if(!b||!b.length)return;this.$cssRules=[],this.$headings=b,this.clearAllCache();var c=0,d=!1;for(var e,f=0,g=b.length;f<g;f++)e=b[f],e.visible!==!1&&(e.$isPercentage?d=!0:c+=parseFloat(e.$width)||0);d||(this.$isFixedGrid=!0,this.$setStyleClass(this.$ext,"fixed"),this.$useiframe&&this.$setStyleClass(this.oDoc.documentElement,"fixed"));if(c>0&&!this.$isFixedGrid){var h=c;this.$cssRules.push(["."+this.$baseCSSname+" .row"+this.$uniqueId,"padding-right:"+h+"px;margin-right:-"+h+"px"]),this.$container.style.paddingRight=h-1+"px",this.$head.style.paddingRight=h-2+"px"}this.$fixed=c,this.$first=0,this.$withContainer=a.bindings.description?!0:!1,apf.importStylesheet(this.$cssRules,window),this.$useiframe&&apf.importStylesheet(this.$cssRules,this.oWin)}),this.$initNode=function(b,c,d,e){this.$getNewContext("item");var f=this.$getLayoutNode("item");f.setAttribute("id",d),f.setAttribute("class",f.getAttribute("class")+" "+a[c]+" item"+this.$uniqueId),this.$setStyleClass(this.$getLayoutNode("item","container"),a[c]),f.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+");o.choose(null, true);"+(this.$withContainer?"o.slideToggle(this, null, true);":"")+(this.celledit&&!this.namevalue?"o.startRename(null, null, true);":"")),this.hasFeature(apf.__DRAGDROP__)?(f.setAttribute("onmouseout","this.hasPassedDown = false;"),f.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 this.hasPassedDown = true;                 if (!o.hasFeature(apf.__DRAGDROP__) || !isSelected && !apf.getCtrlKey(event))                     o.select(this, apf.getCtrlKey(event), event.shiftKey, -1);"+(this.cellselect||this.namevalue?"o.selectCell(event, this, isSelected);":"")),f.setAttribute("onmouseup","if (!this.hasPassedDown) return;                var o = apf.lookup("+this.$uniqueId+");                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 if (o.hasFeature(apf.__DRAGDROP__))                     o.select(this, apf.getCtrlKey(event), event.shiftKey, -1);")):f.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                var wasSelected = o.$selected == this;                o.select(this, apf.getCtrlKey(event), event.shiftKey, -1);"+(this.cellselect||this.namevalue?"o.selectCell(event, this, wasSelected);":""));for(var g,h,i,j=0;j<this.$headings.length;j++){i=this.$headings[j];if(i.tree&&i.check){g="treecheckcell",this.$getNewContext("treecheckcell"),h=this.$getLayoutNode("treecheckcell");var k=this.$getLayoutNode("treecheckcell","openclose");k.setAttribute("style","margin-left:"+((e||0)*15+4)+"px;"),k.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                    o.slideToggle(this, null, null, true);                    event.cancelBubble = true;                    apf.window.$mousedown(event);"),k.setAttribute("ondblclick","event.cancelBubble = true")}else if(i.tree){g="treecell",this.$getNewContext("treecell"),h=this.$getLayoutNode("treecell");var k=this.$getLayoutNode("treecell","openclose");k.setAttribute("style","margin-left:"+((e||0)*15+4)+"px;"),k.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");                    o.slideToggle(this, null, null, true);                    event.cancelBubble = true;                    apf.window.$mousedown(event);"),k.setAttribute("ondblclick","event.cancelBubble = true")}else g="cell",this.$getNewContext(g),h=this.$getLayoutNode(g);apf.setStyleClass(h,i.$className),i.css&&apf.setStyleClass(h,apf.lm.compile(i.css)(b));if(i.icon){var l=this.$getLayoutNode(g,"caption",f.appendChild(h));l=l.nodeType==1&&l||l.parentNode,l.setAttribute("style","background-image:url("+apf.getAbsolutePath(this.iconPath,(i.cicon||i.$compile("icon",{nostring:!0}))(b)||"")+");"),this.$setStyleClass(l,"iconCell",[])}i.value&&(i.cvalue2||i.$compile("value",{nostring:!0}),apf.setNodeValue(this.$getLayoutNode(g,"caption",f.appendChild(h)),i.cvalue2(b)||"&nbsp"))}if(this.$bindings&&this.$bindings.color){var m=this.$getDataNode("color",b);this.$setStyleClass(f,m?"highlight":null,m?["highlight"]:null)}var n=this.$applyBindRule("css",b);return n&&(this.$setStyleClass(f,n),n&&this.$dynCssClasses.push(n)),f},this.$updateNode=function(a,b){if(!b)return;var c=this.$head.childNodes,d=b.childNodes,e,f;!this.namevalue&&this.$curBtn&&(f=this.$curBtn.parentNode);var g,h,i=0;g=d[0];while(g){if(g.nodeType!=1){g=g.nextSibling;continue}h=apf.all[c[i].getAttribute("hid")],e=this.$getLayoutNode(h.tree?"treecell":"cell","caption",g)||g,h.css&&apf.setStyleClass(e,apf.lm.compile(h.css)(a)),!h.tree,h.value&&(h.cvalue2||h.$compile("value",{nostring:!0}),e.innerHTML=h.cvalue2(a)||"&nbsp"),h.icon&&((e.nodeType==1&&e||e.parentNode).style.backgroundImage="url("+apf.getAbsolutePath(this.iconPath,(h.cicon||h.$compile("icon",{nostring:!0}))(a)||"")+")"),i++,g=g.nextSibling}if(this.$bindings&&this.$bindings.color){var j=this.$getDataNode("color",a);this.$setStyleClass(b,j?"highlight":null,j?["highlight"]:null)}var k=this.$applyBindRule("css",a);if(k||this.$dynCssClasses.length)this.$setStyleClass(b,k,this.$dynCssClasses),k&&!this.$dynCssClasses.contains(k)&&this.$dynCssClasses.push(k)},this.$dblclick=function(a){var b=this,d,e;while(!(d=a.getAttribute(apf.xmldb.htmlIdTag))||d.indexOf("|")==-1){a=(e=a).parentNode;if(!a||a.nodeType!=1)return}if(this.$lastEditor&&this.$lastEditor[3]==a)return;var f,g=e.className.match(/(col\d+)/)[1];for(var h=0;h<this.$headings.length;h++)if(this.$headings[h].$className==g){f=this.$headings[h];break}if(!f.editor)return;var i=apf.xmldb.getNode(a),j=f.tree?this.$getLayoutNode("cell","caption",e):e,k,l=f.editor,m=apf.lm.compile(l,{xpathmode:2}),n=j.childNodes;for(var h=0,o=n.length;h<o;h++)n[h].host||(n[h].nodeType==1?n[h].style.display="none":(this.$lastTextValue=n[h].nodeValue,n[h].nodeValue=""));if(m.type==2)if(!this.$editors[f.$uniqueId+":"+l]){var p=apf.namespaces[apf.ns.aml].elements[l],q={htmlNode:j,style:"position:relative;z-index:10000",value:"[{"+this.id+".selected}::"+(v=f.value).substr(1,v.length-2)+"]",focussable:!1};f.tree?q.width="100% - "+(j.offsetLeft+parseInt(this.$getOption("treecell","editoroffset"))):q.width="100%-3";if(p.prototype.hasFeature(apf.__MULTISELECT__)){q.caption=f.eachcaption||"[text()]",q.eachvalue=f.eachvalue;var r;(r=f.getAttribute("model"))?(q.model=r,q.each=f.each):(q.model="{"+this.id+".selected}",q.each=f.each)}f.skin&&(q.skin=f.skin),f["class"]&&(q["class"]=f["class"]),f.fill&&(q.fill=f.fill),k=this.$editors[f.$uniqueId+":"+l]=new p(q);var s=apf.getBox(apf.getStyle(k.$ext,"margin"));(s[1]||s[3])&&k.setAttribute("width","100%+2-"+(s[1]+s[3])),k.addEventListener("blur",function(){c.call(b)}),k.parentNode=this,k.realtime=!1,k.$focusParent=this,k.setAttribute("focussable","true"),k.addEventListener("keydown",function(a){a.keyCode==13?(c.call(b),b.$focus()):a.keyCode==27&&(k.removeAttribute("value"),c.call(b))}),k.$executeAction=function(){this.parentNode.$executeAction.apply(this.parentNode,arguments)}}else k=this.$editors[f.$uniqueId+":"+l],k.hasFeature(apf.__MULTISELECT__)&&!f.model?k.setAttribute("value","[{"+this.id+".selected}::"+(v=f.value).substr(1,v.length-2)+"]"):k.setAttribute("value","[{"+this.id+".selected}::"+(v=f.value).substr(1,v.length-2)+"]"),k.setProperty("visible",!0),j.appendChild(k.$ext),k.setAttribute("width",f.tree?"100% - "+(j.offsetLeft+parseInt(this.$getOption("treecell","editoroffset"))):"100%-3");else{var t=m.call(this,this.xmlRoot);t.localName!="template"}k.localName=="textbox"&&k.select(),k.focus(),k.$focus(),this.$setStyleClass(a,"editing"),this.$lastEditor=[k,j,i,a,this.getActionTracker().undolength]},this.addEventListener("mousedown",function(a){this.$lastEditor&&!apf.isChildOf(this.$lastEditor[1],a.htmlEvent.srcElement||a.htmlEvent.target,!0)&&c.call(this)});var c=function(a){if(this.$lastEditor){var b=this.$lastEditor;this.$lastEditor=null,b[0].hasFeature(apf.__MULTISELECT__)&&b[0].$clearDynamicProperty("value"),b[0].setProperty("visible",!1);var c=b[1].childNodes;for(var d=0,e=c.length;d<e;d++)if(!c[d].host)if(c[d].nodeType==1)c[d].style.display="";else if(!b[0].value||b[0].value==this.$lastTextValue)c[d].nodeValue=this.$lastTextValue;this.$setStyleClass(b[3],"",["editing"]),this.focus()}};this.addEventListener("beforeselect",c),this.getColumn=function(a){return this.$headings[a||this.$lastcol||0]},this.resizeColumn=function(a,b){var c=this.$headings[a];c.resize(b)},this.hideColumn=function(a){var b=this.$headings[a];b.hide()},this.showColumn=function(a){var b=this.$headings[a];b.show()},this.sortColumn=function(a){var b=this.$headings[nr];b.sort()},this.moveColumn=function(a,b){var c=this.$headings[nr];c.move(b)},this.$draw=function(){this.$drawBase();var a=this;this.$ext.onmousedown=function(b){a.dispatchEvent("mousedown",{htmlEvent:b||event})},this.$head=this.$getLayoutNode("main","head",this.$ext),this.$pointer=this.$getLayoutNode("main","pointer",this.$ext),this.$head.firstChild&&this.$head.removeChild(this.$head.firstChild),this.$container.firstChild&&this.$container.removeChild(this.$container.firstChild);var b=this.$widthdiff=this.$getOption("main","widthdiff")||0;this.$defaultwidth=this.$getOption("main","defaultwidth")||"100",this.$useiframe=apf.isIE&&(apf.isTrue(this.$getOption("main","iframe"))||this.iframe);if(this.$useiframe&&!this.oIframe){var c=this.$container.className;this.oIframe=this.$container.appendChild(document.createElement(apf.isIE?"<iframe frameborder='0'></iframe>":"iframe")),this.oIframe.frameBorder=0,this.oWin=this.oIframe.contentWindow,this.oDoc=this.oWin.document,this.oDoc.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">                <html xmlns="http://www.w3.org/1999/xhtml">                    <head><script>                        apf = {                            lookup : function(uid){                                return window.parent.apf.lookup(uid);                            },                            Init : {add:function(){},run:function(){}}                        };</script>                    </head>                    <body></body>                </html>'),this.$container=this.oDoc.body,this.$container.className=c,this.oDoc.documentElement.className=this.$ext.className,apf.skins.loadCssInWindow(this.skinName,this.oWin,this.mediaPath,this.iconPath),apf.isIE&&this.$setStyleClass(this.oDoc.documentElement,this.$baseCSSname+"Focus"),apf.convertIframe(this.oIframe,!0),apf.getStyle(this.oDoc.documentElement,"overflowY")=="auto"&&(this.oIframe.onresize=function(){a.$head.style.marginRight=a.oDoc.documentElement.scrollHeight>a.oDoc.documentElement.offsetHeight?"16px":"0"},this.addEventListener("afterload",this.oIframe.onresize),this.addEventListener("xmlupdate",this.oIframe.onresize)),this.oDoc.documentElement.onscroll=function(){a.$isFixedGrid&&(a.$head.scrollLeft=a.oDoc.documentElement.scrollLeft)}}else apf.getStyle(this.$container,"overflowY")=="auto"&&(this.$resize=function(){a.$head.style.marginRight=a.$container.scrollHeight>a.$container.offsetHeight?"16px":"0"},apf.layout.setRules(this.$ext,this.$uniqueId+"_datagrid","var o = apf.all["+this.$uniqueId+"];                     if (o) o.$resize()"),apf.layout.queue(this.$ext),this.addEventListener("afterload",this.$resize),this.addEventListener("xmlupdate",this.$resize)),this.$container.onscroll=function(){a.$isFixedGrid&&(a.$head.scrollLeft=a.$container.scrollLeft)};this.$container[this.clickedit?"onmousedown":"ondblclick"]=function(b){b||(b=event),a.$dblclick(b.srcElement||b.target)}},this.$destroy=function(){this.$ext.onclick=this.$container.onresize=null,apf.layout.removeRule(this.$container,"dg"+this.$uniqueId),apf.layout.activateRules(this.$container)}}.call(apf.datagrid.prototype=new apf.BaseTree),apf.aml.setElement("datagrid",apf.datagrid),apf.aml.setElement("description",apf.BindingRule),apf.aml.setElement("color",apf.BindingRule),apf.aml.setElement("contents",apf.BindingRule),apf.divider=function(a,b){this.$init(b||"divider",apf.NODE_VISIBLE,a)},function(){this.$focussable=!1,this.minwidth=0,this.minheight=0,this.implement(apf.ChildValue),this.$childProperty="caption",this.addEventListener("AMLReparent",function(a,b,c){if(!this.$amlLoaded)return;!c&&this.skinName!=b.skinName&&this.loadAml()}),this.$supportedProperties.push("caption","value","for","textalign"),this.$propHandlers.caption=function(a){this.$caption?(this.$setStyleClass(this.$ext,this.$baseCSSname+"Caption"),this.$caption.innerHTML=a):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Caption"])},this.$canLeechSkin=!0,this.$draw=function(){this.parentNode.isPaged&&this.parentNode.$buttons&&(this.$pHtmlNode=this.parentNode.$buttons),this.$isLeechingSkin?this.$ext=apf.insertHtmlNode(this.parentNode.$getLayoutNode("divider"),this.$pHtmlNode):(this.$ext=this.$getExternal("main"),this.$caption=this.$getLayoutNode("main","caption",this.$ext))}}.call(apf.divider.prototype=new apf.Presentation),apf.aml.setElement("divider",apf.divider),apf.dropdown=function(a,b){this.$init(b||"dropdown",apf.NODE_VISIBLE,a)},function(){function a(){this.isOpen==2&&this.slideDown()}this.$animType=1,this.$animSteps=5,this.$animSpeed=20,this.$itemSelectEvent="onmouseup",this.dragdrop=!1,this.reselectable=!0,this.$focussable=apf.KEYBOARD,this.autoselect=!1,this.multiselect=!1,this.disableremove=!0,this.delayedselect=!1,this.maxitems=5,this.$booleanProperties.disableremove=!0,this.$supportedProperties.push("maxitems","disableremove","initial-message","fill"),this.$propHandlers.maxitems=function(a){this.sliderHeight=a?Math.min(this.maxitems||100,a)*this.itemHeight:10,this.containerHeight=a?Math.min(this.maxitems||100,a)*this.itemHeight:10},this.addEventListener("prop.class",function(a){this.$setStyleClass(this.oSlider,a.value)}),this.slideToggle=function(a,b){a||(a=event);if(b&&this.disabled)return;this.isOpen?this.slideUp():this.slideDown(a)},this.slideDown=function(a){if(this.dispatchEvent("slidedown")===!1)return!1;this.isOpen=!0,this.$propHandlers.maxitems.call(this,this.xmlRoot&&this.each?this.getTraverseNodes().length:this.childNodes.length),this.oSlider.style.display="block",this.ignoreOverflow||(this.oSlider.style[apf.supportOverflowComponent?"overflowY":"overflow"]="visible",this.$container.style.overflowY="hidden"),this.oSlider.style.display="",this.$setStyleClass(this.$ext,this.$baseCSSname+"Down"),this.oSlider.style.height=this.sliderHeight-1+"px",this.oSlider.style.width=this.$ext.offsetWidth-2-this.widthdiff+"px";var b=this,c=apf.popup.getCurrentElement();apf.popup.show(this.$uniqueId,{x:0,y:this.$ext.offsetHeight,animate:!0,container:this.$getLayoutNode("container","contents",this.oSlider),ref:this.$ext,width:this.$ext.offsetWidth-this.widthdiff,height:this.containerHeight,allowTogether:c&&apf.isChildOf(c.$ext,b.$ext),callback:function(a){b.ignoreOverflow||(b.$container.style.overflowY="auto")}})},this.slideUp=function(){if(this.isOpen==2)return!1;if(this.dispatchEvent("slideup")===!1)return!1;this.isOpen=!1;if(this.selected){var a=apf.xmldb.findHtmlNode(this.selected,this);a&&this.$setStyleClass(a,"",["hover"])}return this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Down"]),apf.popup.last==this.$uniqueId&&apf.popup.hide(),!1},this.$setLabel=function(a){this.oLabel.innerHTML=a||this["initial-message"]||"",this.$setStyleClass(this.$ext,a?"":this.$baseCSSname+"Initial",a?[this.$baseCSSname+"Initial"]:[])},this.addEventListener("afterselect",function(a){a||(a=event),this.slideUp(),this.isOpen||this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Over"]),this.$setLabel(a.selection.length?this.$applyBindRule("caption",this.selected):"")}),this.addEventListener("afterload",a),this.addEventListener("xmlupdate",function(){a.call(this),this.$setLabel(this.$applyBindRule("caption",this.selected))}),this.$blur=function(){this.slideUp(),this.isOpen||this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Over"]),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"])},this.$setClearMessage=function(a){this.$setLabel(a)},this.$removeClearMessage=function(){this.$setLabel("")},this.addEventListener("popuphide",this.slideUp),this.addEventListener("keydown",function(a){var b=a.keyCode;if(!this.xmlRoot)return;var c;switch(b){case 32:this.slideToggle(a.htmlEvent);break;case 38:if(a.altKey){this.slideToggle(a.htmlEvent);return}if(!this.selected)return;c=this.getNextTraverseSelected(this.caret||this.selected,!1),c&&this.select(c);break;case 40:if(a.altKey){this.slideToggle(a.htmlEvent);return}if(!this.selected){c=this.getFirstTraverseNode();if(!c)return}else c=this.getNextTraverseSelected(this.selected,!0);c&&this.select(c);break;default:if(b==9||!this.xmlRoot)return;if(!this.lookup||(new Date).getTime()-this.lookup.date.getTime()>1e3)this.lookup={str:"",date:new Date};this.lookup.str+=String.fromCharCode(b);var d,e=this.getTraverseNodes();for(var f=0;f<e.length;f++){d=this.$applyBindRule("caption",e[f]);if(d&&d.indexOf(this.lookup.str)>-1){this.select(e[f]);return}}return}return!1},!0),this.$draw=function(){this.$getNewContext("main"),this.$getNewContext("container"),this.$animType=this.$getOption("main","animtype")||1,this.clickOpen=this.$getOption("main","clickopen")||"button",this.$ext=this.$getExternal(null,null,function(a){a.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+');o.$setStyleClass(o.$ext, o.$baseCSSname + "Over", null, true);'),a.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+');if(o.isOpen) return;o.$setStyleClass(o.$ext, "", [o.$baseCSSname + "Over"], true);');var b=this.$getLayoutNode("main","button",a);b&&b.setAttribute("onmousedown","apf.lookup("+this.$uniqueId+").slideToggle(event, true);");var c=this.$getLayoutNode("main","label",a);this.clickOpen=="both"&&c.parentNode.setAttribute("onmousedown","apf.lookup("+this.$uniqueId+").slideToggle(event, true);")}),this.oLabel=this.$getLayoutNode("main","label",this.$ext),this.oLabel.nodeType==3&&(this.oLabel=this.oLabel.parentNode),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.$button&&(this.$button=this.$getLayoutNode("main","button",this.$ext)),this.oSlider=apf.insertHtmlNode(this.$getLayoutNode("container"),document.body),this.$container=this.$getLayoutNode("container","contents",this.oSlider),this.$container.host=this,this.$pHtmlDoc=apf.popup.setContent(this.$uniqueId,this.oSlider,apf.skins.getCssString(this.skinName)),this.listtype=parseInt(this.$getLayoutNode("main","type"))||1,this.itemHeight=this.$getOption("main","item-height")||18.5,this.widthdiff=this.$getOption("main","width-diff")||0,this.ignoreOverflow=apf.isTrue(this.$getOption("main","ignore-overflow"))||!1},this.addEventListener("DOMNodeInsertedIntoDocument",function(){typeof this["initial-message"]=="undefined"&&this.$setInheritedAttribute("initial-message"),!this.selected&&this["initial-message"]&&this.$setLabel()}),this.$destroy=function(){apf.popup.removeContent(this.$uniqueId),apf.destroyHtmlNode(this.oSlider),this.oSlider=null}}.call(apf.dropdown.prototype=new apf.BaseList),apf.config.$inheritProperties["initial-message"]=1,apf.aml.setElement("dropdown",apf.dropdown),apf.errorbox=function(a,b){this.$init(b||"errorbox",apf.NODE_VISIBLE,a)},function(){this.$positioning="basic",this.display=function(a){this.host=a;var b=a.$ext;document.body.appendChild(this.$ext);var c=parseFloat(a.$getOption&&a.$getOption("main","erroffsetx")||0),d=parseFloat(a.$getOption&&a.$getOption("main","erroffsety")||0);this.show(),apf.popup.show(this.$uniqueId,{x:c,y:d,animate:!1,ref:b,allowTogether:!0}),this.$setStyleClass(this.$ext,c+this.$ext.offsetWidth>this.$ext.offsetParent.offsetWidth?"rightbox":"leftbox",["leftbox","rightbox"])},this.setMessage=function(a){a&&a.indexOf(";")>-1&&(a=a.split(";"),a="<strong>"+a.shift()+"</strong>"+a.join(";")),this.$int.innerHTML=a||""},this.$draw=function(){this.$ext=this.$getExternal(),this.$int=this.$getLayoutNode("main","container",this.$ext),this.oClose=this.$getLayoutNode("main","close",this.$ext);if(this.oClose){var a=this;this.oClose.onclick=function(){a.hide(),apf.document.activeElement&&apf.document.activeElement.focus(!0,{mouse:!0})}}this.$ext.onmousedown=function(a){(a||event).cancelBubble=!0},apf.popup.setContent(this.$uniqueId,this.$ext,"",null,null)},this.$loadAml=function(a){apf.isTrue(this.getAttribute("visible"))||this.hide()},this.$destroy=function(){this.oClose&&(this.oClose.onclick=null),this.$ext.onmousedown=null,apf.popup.removeContent(this.$uniqueId)}}.call(apf.errorbox.prototype=new apf.Presentation),apf.aml.setElement("errorbox",apf.errorbox),apf.filler=function(a,b){this.$init(b||"filler",apf.NODE_VISIBLE,a)},function(){this.$focussable=!1,this.flex=1,this.$draw=function(){this.$ext=this.$pHtmlNode.appendChild(this.$pHtmlNode.ownerDocument.createElement("div"))}}.call(apf.filler.prototype=new apf.GuiElement),apf.aml.setElement("filler",apf.filler),apf.panel=function(a,b){this.$init(b||"panel",apf.NODE_VISIBLE,a)},apf.fieldset=function(a,b){this.$init(b||"fieldset",apf.NODE_VISIBLE,a)},apf.frame=function(a,b){this.$init(b||"submit",apf.NODE_VISIBLE,a)},function(){this.implement(apf.BaseStateButtons),this.$focussable=!1,this.$supportedProperties.push("caption","url"),this.$propHandlers.caption=function(a){if(!this.oCaption)return;this.oCaption.nodeType==1?this.oCaption.innerHTML=a:this.oCaption.nodeValue=a},this.$propHandlers.icon=function(a){var b=this.$getLayoutNode("main","icon",this.$ext);if(!b)return;b.nodeType==1&&(b.style.display=a?"block":"none"),apf.skins.setIcon(b,a,this.iconPath)},this.$propHandlers.url=function(a){var b=this.oCaption;if(b.tagName=="A"||b.nodeType!=1)b=b.parentNode;b.innerHTML="<a href='"+a+"' "+(a.match(/^http:\/\//)?"target='_blank'":"")+">"+this.caption+"</a>",this.oCaption=this.oCaption.firstChild},this.setTitle=function(a){this.setProperty("title",a)},this.$draw=function(){this.$ext=this.$getExternal(null,null,function(a){this.$initButtons(a)}),this.oCaption=this.$getLayoutNode("main","caption",this.$ext),this.$int=this.$getLayoutNode("main","container",this.$ext),this.$buttons=this.$getLayoutNode("main","buttons",this.$ext)},this.$loadAml=function(a){}}.call(apf.frame.prototype=new apf.Presentation),apf.panel.prototype=apf.fieldset.prototype=apf.frame.prototype,apf.aml.setElement("panel",apf.panel),apf.aml.setElement("fieldset",apf.fieldset),apf.aml.setElement("frame",apf.frame),apf.hbox=function(a,b){this.$init(b||"hbox",apf.NODE_VISIBLE,a)},apf.vbox=function(a,b){this.$init(b||"vbox",apf.NODE_VISIBLE,a)},function(){function c(b){if(this.parentNode.splitters&&!this.$splitter)if(!b.value)this.nextSibling&&this.nextSibling.$splitter?this.nextSibling.removeNode():this.previousSibling&&this.previousSibling.$splitter&&this.previousSibling.removeNode();else{var c=g(this);c?this.previousSibling&&!this.previousSibling.$splitter&&!this.previousSibling.nosplitter&&this.parentNode.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),this):!this.nextSibling.$splitter&&!this.nextSibling.nosplitter&&!f(this)&&!this.nosplitter&&this.parentNode.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),this.nextSibling)}this.parentNode.$propHandlers.padding&&this.parentNode.$propHandlers.padding.call(this.parentNode,this.parentNode.padding),apf.layout.forceResize(this.parentNode.$int);if(apf.hasFlexibleBox){this.$altExt&&(this.$altExt.style.display=b.value?apf.isGecko?a:apf.CSSPREFIX2+"-box":"none");return}b.value?(this.$ext.style.display=this.parentNode.$vbox&&this.parentNode.align=="stretch"?"block":apf.INLINE,apf.needZoomForLayout&&(this.$ext.style.zoom=1),this.$br&&(this.$br.style.display=this.parentNode.align=="stretch"?"none":"")):this.$br&&(this.$br.style.display="none"),this.parentNode.$resize()}function d(){if(!this.flex){if(this.$isRszHandling||this.$lastSizeChild&&this.$lastSizeChild[0]==this.$ext.offsetWidth&&this.$lastSizeChild[1]==this.$ext.offsetHeight)return;this.parentNode.$resize(!0),this.$lastSizeChild=[this.$ext.offsetWidth,this.$ext.offsetHeight]}}function f(a){var b=a.parentNode.firstChild;while(b&&(b.nodeFunc!=apf.NODE_VISIBLE||b.visible===!1||b.visible==2&&apf.isFalse(b.getAttribute("visible"))))b=b.nextSibling;return b&&b==a}function g(a){var b=a.parentNode.lastChild;while(b&&(b.nodeFunc!=apf.NODE_VISIBLE||b.visible===!1||b.visible==2&&apf.isFalse(b.getAttribute("visible"))))b=b.previousSibling;return b&&b==a}function h(a){a.value&&(this.$int.style.display=apf.CSSPREFIX2+"-box")}function i(a){clearInterval(this.$heighttimer);if(a.value||this.align!="stretch")delete this.$heighttimer;else if(!this.$heighttimer){var b=this;this.$heighttimer=$setInterval(function(){if(b.$amlDestroyed)return;var a=b.childNodes;for(var c,d=0,e=a.length;d<e;d++){if(!(c=(node=a[d]).$int||node.$container))continue;if(Math.min(c.scrollHeight,node.maxheight||1e4)>c.offsetHeight)return b.$resize(!0)}b.flex&&clearInterval(this.$heighttimer)},this.flex?1:500)}}this.minwidth=0,this.minheight=0,this.$focussable=!1,this.$useLateDom=!0,this.$box=!0,this.$layout=!0;var a="-moz-stack",b={INPUT:1,SELECT:1,TEXTAREA:1};this.$booleanProperties.splitters=!0,this.$supportedProperties.push("padding","reverse","edge","pack","align","splitters"),this.$propHandlers.padding=function(a){this.padding=parseInt(a);var b,c=this.childNodes,d=[];for(var e=0,f=c.length;e<f;e++)(b=c[e]).nodeFunc==apf.NODE_VISIBLE&&b.$amlLoaded&&b.visible!==!1&&d.push(b);if(!d.length)return;for(var g,h,i,e=d.length-2;e>=0;e--)h=(i=d[e]).margin&&apf.getBox(i.margin)||[0,0,0,0],(!g||!g.$splitter)&&!i.$splitter&&(h[this.$vbox?2:1]+=this.padding,!apf.hasFlexibleBox&&e!=0&&this.align=="stretch"&&this.$vbox&&(h[0]+=this.padding)),i.$ext.style.margin=h.join("px ")+"px",g=i;h=(i=d[d.length-1]).margin&&apf.getBox(i.margin)||[0,0,0,0],i.$ext.style.margin=h.join("px ")+"px",apf.hasFlexibleBox||this.$resize()},this.$propHandlers.reverse=function(a){apf.hasFlexibleBox&&(this.$int.style[apf.CSSPREFIX+"BoxDirection"]=a?"reverse":"normal")},this.$propHandlers.edge=function(a){var b=!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int;b.style.padding=(this.$edge=apf.getBox(a)).join("px ")+"px",apf.hasFlexibleBox||this.$resize()},this.$propHandlers.pack=function(a){if(apf.hasFlexibleBox)this.$int.style[apf.CSSPREFIX+"BoxPack"]=a||"start";else if(this.$amlLoaded)if(this.$vbox)this.$int.style.verticalAlign=a=="center"?"middle":a=="end"?"bottom":"top";else{this.$int.style.textAlign="";var b=this.childNodes;for(var c=0,d=b.length;c<d;c++){if((node=b[c]).nodeFunc!=apf.NODE_VISIBLE||!node.$amlLoaded)continue;node.$ext.style.textAlign=apf.getStyle(node.$ext,"textAlign")||"left"}this.$int.style.textAlign=a=="center"?"center":a=="end"?"right":"left"}},this.$propHandlers.align=function(a){if(apf.hasFlexibleBox){this.$int.style[apf.CSSPREFIX+"BoxAlign"]=a||"stretch",apf.isGecko&&(this.$int.style.overflow="visible");var c=!a||a=="stretch",d=this.childNodes,f=this.$vbox?"width":"height",g=!1,h=this;while(!g&&h){g=h[f]||h.anchors||(h.$vbox?h.top&&h.bottom:h.left&&h.right);if(!h.flex)break;h=h.parentNode||h.$parentNode}for(var i=0,j=d.length;i<j;i++){if(!(l=d[i]).$ext||l.$ext.nodeType!=1)continue;c&&!l[f]?l.$ext.style[f]=apf.isGecko&&(this.flex||l.flex)?g?"1px":"auto":apf.isWebkit&&b[l.$ext.tagName]?"100%":"auto":l[f]&&e["true"][f].call(l,l[f])}}else if(this.$amlLoaded){var c=!a||a=="stretch";if(!this.$vbox){var d=this.childNodes;for(var i=0,j=d.length;i<j;i++){if((l=d[i]).nodeFunc!=apf.NODE_VISIBLE||!l.$amlLoaded)continue;l.$ext.style.verticalAlign=a=="center"?"middle":a=="end"?"bottom":"top"}}else{var k=!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int;k.style.textAlign="";var l,d=this.childNodes;for(var i=0,j=d.length;i<j;i++){if((l=d[i]).nodeFunc!=apf.NODE_VISIBLE||!l.$amlLoaded)continue;l.visible!==!1&&(l.$ext.style.display=a=="stretch"?"block":apf.INLINE,l.$br.style.display=a=="stretch"?"none":"",apf.needZoomForLayout&&(l.$ext.style.zoom=1)),l.$ext.style.textAlign=apf.getStyle(l.$ext,"textAlign")||"left"}k.style.textAlign=a=="center"?"center":a=="end"?"right":"left"}}};var e={"true":{optimize:function(a){this.optimize=apf.isTrue(a)},width:function(a){(this.$altExt||this.$ext).style.width=a?parseFloat(a)==a?a+"px":a:""},height:function(a){(this.$altExt||this.$ext).style.height=a?parseFloat(a)==a?a+"px":a:apf.isGecko&&this.flex&&this.parentNode.$vbox?"auto":""},margin:function(a){var b=apf.getBox(a);g(this)||(b[this.parentNode.$vbox?2:1]+=this.parentNode.padding),this.$ext.style.margin=b.join("px ")+"px"},flex:function(a){this.flex=a=parseInt(a);if(a){if(!this.optimize&&!this.$altExt){this.$altExt=this.$ext.ownerDocument.createElement("div"),this.parentNode.$int.replaceChild(this.$altExt,this.$ext),this.$altExt.appendChild(this.$ext),this.$altExt.style[apf.CSSPREFIX+"BoxSizing"]="border-box",this.$altExt.style.display=apf.CSSPREFIX2+"-box",this.$altExt.style[apf.CSSPREFIX+"BoxOrient"]="vertical",this.$ext.style[apf.CSSPREFIX+"BoxFlex"]=1;var b=this.parentNode.$vbox?"height":"width";apf.isWebkit?this.preventforcezero||(this.$altExt.style[b]="0px"):apf.isGecko&&(this.$altExt.style[b]="0px",this.$box||(this.$altExt.style.overflow="hidden"),apf.getStyle(this.$ext,"overflow")=="visible"&&(this.$ext.style.overflow="hidden"),this.$ext.style[b]="1px",this.$altExt.style.minHeight=this.$ext.style.minHeight,this.$altExt.style.maxHeight=this.$ext.style.maxHeight,this.$altExt.style.minWidth=this.$ext.style.minWidth,this.$altExt.style.maxWidth=this.$ext.style.maxWidth)}(this.$altExt||this.$ext).style[apf.CSSPREFIX+"BoxFlex"]=parseInt(a)||1}else this.$altExt&&(this.parentNode.$int.replaceChild(this.$ext,this.$altExt),this.$ext.style[apf.CSSPREFIX+"BoxFlex"]="",apf.isGecko&&(this.$ext.style.overflow=""),delete this.$altExt)}},"false":{width:function(a){this.$ext.style.width=a?parseFloat(a)==a?Math.max(0,a-apf.getWidthDiff(this.$ext))+"px":a:""},height:function(a){this.$ext.style.height=a?parseFloat(a)==a?Math.max(0,a-apf.getHeightDiff(this.$ext))+"px":a:""},margin:function(a){var b=apf.getBox(a);this.padding&&(g(this)||(b[this.parentNode.$vbox?2:1]+=this.padding),this!=this.parentNode.firstChild&&this.parentNode.align=="stretch"&&this.parentNode.$vbox&&(b[0]+=this.padding)),this.$ext.style.margin=b.join("px ")+"px"},flex:function(a){this.flex=parseInt(a),this.$amlLoaded&&this.parentNode.$resize(!0)}}};this.register=function(a,f){if(a.$altExt)return;a.$propHandlers.left=a.$propHandlers.top=a.$propHandlers.right=a.$propHandlers.bottom=apf.K;var h=e[apf.hasFlexibleBox];for(var i in h)a.$propHandlers[i]=h[i];if(a.nodeFunc==apf.NODE_VISIBLE){if(apf.hasFlexibleBox){if(a.$ext.tagName=="INPUT"||apf.isWebkit&&b[a.$ext.tagName]){var j=a.$ext.ownerDocument;a.$altExt=j.createElement("div"),a.parentNode.$int.replaceChild(a.$altExt,a.$ext),a.$altExt.style[apf.CSSPREFIX+"BoxSizing"]="border-box",a.$altExt.appendChild(a.$ext);if(apf.isWebkit){var k=apf.getDiff(a.$ext);a.$altExt.style.height="100%",a.$altExt.style.width="0",a.$altExt.style.lineHeight=0,a.$altExt.style.margin="-1px 0 0 0",a.$ext.style.width="100%",a.$ext.style.height="100%",a.$ext.style.top="1px",a.$ext.style.position="relative"}else a.$altExt.style.display=apf.CSSPREFIX2+"-box",a.$altExt.style[apf.CSSPREFIX+"BoxOrient"]="horizontal",a.$altExt.style[apf.CSSPREFIX+"BoxAlign"]="stretch",a.$ext.style[apf.CSSPREFIX+"BoxFlex"]=1}else apf.getStyle(a.$ext,"display")=="inline"&&(a.$ext.style.display="block");a.$ext.style[apf.CSSPREFIX+"BoxSizing"]="border-box"}else{this.$vbox?(a.$br=this.$int.insertBefore(a.$ext.ownerDocument.createElement("br"),a.$ext.nextSibling),a.visible===!1&&(a.$br.style.display="none")):(a.visible!==!1&&(a.$ext.style.display=apf.INLINE,apf.needZoomForLayout&&(a.$ext.style.zoom=1)),this.$int.style.whiteSpace="",a.$ext.style.whiteSpace=apf.getStyle(a.$ext,"whiteSpace")||"normal",this.$int.style.whiteSpace="nowrap"),this.$int.style.fontSize="0";if(!a.$box){var l=apf.getStyle(a.$ext,"fontSize");if(l=="0px"){a.$ext.style.fontSize="";var m=this.$int.parentNode;while(apf.getStyle(m,"fontSize")=="0px")m=m.parentNode;l=apf.getStyle(m,"fontSize")}a.$ext.style.fontSize=l}a.addEventListener("resize",d)}a.addEventListener("prop.visible",c),this.$noResize=!0,a.height&&h.height.call(a,a.height),a.width&&h.width.call(a,a.width),a.margin&&h.margin.call(a,a.margin),a.flex&&h.flex.call(a,a.flex);var n=g(a);if(n||f){this.$propHandlers.padding.call(this,this.padding),this.$propHandlers.align.call(this,this.align),apf.hasFlexibleBox||this.$propHandlers.pack.call(this,this.pack),a.visible!==!1&&c.call(a,{value:!0});if(f&&a.previousSibling){var o=a.previousSibling;while(o&&(o.nodeType!=1||o.localName=="splitter"))o=o.previousSibling;o&&c.call(o,{value:!0})}}else if(this.splitters&&!a.$splitter&&a.visible!==!1&&!a.nosplitter)if(a.$ext.nextSibling!=(a.nextSibling&&(a.nextSibling.$altExt||a.nextSibling.$ext))){var p=this;setTimeout(function(){p.insertBefore(p.ownerDocument.createElementNS(apf.ns.aml,"splitter"),a.nextSibling)})}else this.insertBefore(this.ownerDocument.createElementNS(apf.ns.aml,"splitter"),a.nextSibling);delete this.$noResize,!apf.hasFlexibleBox&&n&&this.$resize()}},this.unregister=function(a){if(!a.$propHandlers)return;a.$propHandlers.left=a.$propHandlers.top=a.$propHandlers.right=a.$propHandlers.bottom=null;var b=e[apf.hasFlexibleBox];for(var f in b)delete a.$propHandlers[f];if(a.nodeFunc==apf.NODE_VISIBLE){if(a.flex){var h=a.flex;b.flex.call(a,0),a.flex=h}apf.hasFlexibleBox?(a.$ext.style[apf.CSSPREFIX+"BoxSizing"]="",apf.isGecko&&(this.$int.style.overflow="visible",a.$ext.style.display=="block"&&(a.$ext.style.display=""))):(a.$ext.style.verticalAlign="",a.$ext.style.textAlign="",a.$ext.style.whiteSpace="",a.$br&&(a.$br.parentNode.removeChild(a.$br),delete a.$br),a.removeEventListener("resize",d)),a.removeEventListener("prop.visible",c),a.$ext.style.display=a.visible?"block":"none",a.margin&&(a.$ext.style.margin=""),a.width&&(a.$ext.style.width=""),this.splitters&&!a.$splitter&&(a.nextSibling&&a.nextSibling.$splitter&&a.nextSibling.removeNode(),g(a)&&a.previousSibling&&a.previousSibling.$splitter&&a.previousSibling.removeNode())}},this.addEventListener("DOMNodeRemoved",function(a){if(a.$doOnlyAdmin||a.currentTarget==this)return;a.relatedNode==this&&this.unregister(a.currentTarget)}),this.addEventListener("DOMNodeInserted",function(a){if(a.currentTarget==this){this.visible&&(this.$ext.style.display=apf.CSSPREFIX2+"-box");return}if(a.currentTarget.nodeType!=1||a.currentTarget.nodeFunc!=apf.NODE_VISIBLE)return;if(a.relatedNode==this&&!a.$isMoveWithinParent){a.currentTarget.$setLayout(this.localName,!0);if(a.currentTarget.$altExt)return!1}}),this.$draw=function(){var a=this.$pHtmlNode.ownerDocument;this.$ext=this.$pHtmlNode.appendChild(a.createElement("div")),this.getAttribute("style")&&this.$ext.setAttribute("style",this.getAttribute("style")),this.$ext.className=this.localName,this.$vbox=this.localName=="vbox",this.$int=apf.isGecko&&(!this.parentNode||!this.parentNode.$box)||!apf.hasFlexibleBox&&this.$vbox?this.$ext.appendChild(a.createElement("div")):this.$ext,this.$ext.host=this,apf.isGecko&&(!this.parentNode||!this.parentNode.$box)?(this.$int.style.width="100%",this.$int.style.height="100%"):!apf.hasFlexibleBox&&this.$vbox&&(this.$int.style.display=apf.INLINE,apf.needZoomForLayout&&(this.$int.style.zoom=1),this.$int.style.width="100%");if(apf.hasFlexibleBox)this.$display="-"+apf.CSSPREFIX+"-box",this.$int.style.display=apf.CSSPREFIX2+"-box",this.$int.style[apf.CSSPREFIX+"BoxOrient"]=this.localName=="hbox"?"horizontal":"vertical",apf.isGecko&&(this.$int.style[apf.CSSPREFIX+"BoxSizing"]="border-box"),this.$int.style[apf.CSSPREFIX+"BoxAlign"]="stretch",this.addEventListener("prop.visible",h);else{this.$vbox||(this.$int.style.whiteSpace="nowrap",this.addEventListener("prop.height",i));var b=(!apf.hasFlexibleBox&&this.$vbox?this.$ext:this.$int).appendChild(a.createElement("strong"));b.style.height="100%",b.style.display=apf.INLINE,apf.needZoomForLayout&&(b.style.zoom=1),b.style.verticalAlign="middle",this.addEventListener("resize",this.$resize)}this.getAttribute("class")&&apf.setStyleClass(this.$ext,this.getAttribute("class")),this.$originalMin=[this.minwidth||0,this.minheight||0]},this.$resize=function(a){if(!this.$amlLoaded||this.$noResize)return;if(a!==!0&&this.$lastSize&&this.$lastSize[0]==this.$int.offsetWidth&&this.$lastSize[1]==this.$int.offsetHeight)return;if(!apf.window.vManager.check(this,this.$uniqueId,this.$resize))return;this.$noResize=!0,this.$lastSize=[this.$int.offsetWidth,this.$int.offsetHeight];var c=0,d=this.$vbox?"width":"height",e=this.$vbox?"minWidth":"minHeight",f=this.$vbox?"height":"width",g=this.$vbox?"scrollWidth":"scrollHeight",h=this.$vbox?"offsetWidth":"offsetHeight",i=this.$vbox?"offsetHeight":"offsetWidth",j=this.$vbox?"getWidthDiff":"getHeightDiff",k=this.$vbox?"getHeightDiff":"getWidthDiff",l=this.$vbox?"getHtmlInnerWidth":"getHtmlInnerHeight",m=this.$vbox?"getHtmlInnerHeight":"getHtmlInnerWidth",n=this.$vbox?"getVerBorders":"getHorBorders",o=this.childNodes,p=[],q=0,r=0;for(var s,t=0;t<o.length;t++){if((s=o[t]).nodeFunc!=apf.NODE_VISIBLE||s.visible===!1||!s.$amlLoaded)continue;p.push(s);if(!s[d]){var u=s.margin&&apf.getBox(s.margin);u&&this.$vbox&&u.unshift();var v=u?u[0]+u[2]:0;r=Math.max(r,v+Math.min(s.$ext[g]+apf[n](s.$ext),s["max"+d]||1e4))}if(parseInt(s.flex))c+=parseFloat(s.flex);else{var u=s.margin&&apf.getBox(s.margin);u&&!this.$vbox&&u.shift(),q+=s.$ext[i]+(u?u[0]+u[2]:0)}}!r&&this[d]&&(r=this[d]-apf[k](this.$ext));if(this.align=="stretch"){var w=p.length,x=r;for(var t=0;t<w;t++){s=p[t];if(!s[d]&&!this.$vbox||this.$vbox&&b[s.$ext.tagName]){var u=s.margin&&apf.getBox(s.margin);u&&this.$vbox&&u.unshift();var v=u?u[0]+u[2]:0;r&&Math.min(s.$ext[g],s["max"+d]||1e4)!=r?s.$ext.style[d]=Math.max(0,r-apf[j](s.$ext)-v)+"px":s.$ext.style[d]=""}}}if(c>0){this.$vbox&&(this.$int.style.height="100%"),this.$int.style.overflow="hidden";var y=apf.n(this).children("a:splitter").length()*2,z=this.$int[i]-apf[k](this.$int)-q-(p.length-1-y)*this.padding,A=z,B=0;for(var t=0,w=p.length;t<w;t++)if((s=p[t]).flex){var C=(t%2==0?Math.floor:Math.ceil)(z/c*parseInt(s.flex));B+=parseInt(s.flex);var u=s.margin&&apf.getBox(s.margin);u&&!this.$vbox&&u.shift(),s.$ext.style[f]=Math.max(0,(B==c?A:C)-apf[k](s.$ext)-(u?u[0]+u[2]:0))+"px",A-=C}}else this.$vbox&&(this.$int.style.height=""),this.$int.style.overflow="";this.$noResize=!1},this.$loadAml=function(a){this.padding==undefined&&(this.padding=0),this.edge==undefined&&this.$propHandlers.edge.call(this,this.edge=0),this.pack==undefined&&this.$propHandlers.pack.call(this,this.edge="start"),this.align==undefined&&(this.align="stretch"),!apf.hasFlexibleBox&&!this.$vbox&&!this.height&&this.align=="stretch"&&i.call(this,{})}}.call(apf.vbox.prototype=new apf.GuiElement),apf.hbox.prototype=apf.vbox.prototype,apf.aml.setElement("hbox",apf.hbox),apf.aml.setElement("vbox",apf.vbox),apf.img=function(a,b){this.$init(b||"img",apf.NODE_VISIBLE,a)},apf.preview=function(a,b){this.$init(b||"preview",apf.NODE_VISIBLE,a)},function(){this.setValue=function(a){this.setProperty("value",a,!1,!0)},this.getValue=function(a){return this.value},this.$supportedProperties.push("value","src"),this.$propHandlers.src=this.$propHandlers.value=function(a){this.oImage.nodeType==1?this.oImage.style.backgroundImage="url("+a+")":this.oImage.nodeValue=a;if(this.oImage.nodeType==2&&!this.$resize.done){if(this.oImg){var b=apf.hasSingleRszEvent?this.$pHtmlNode:this.$ext;apf.layout.setRules(b,this.$uniqueId+"_image","var o = apf.all["+this.$uniqueId+"];                     if (o) o.$resize()"),apf.layout.queue(b),this.oImg.onload=function(){apf.layout.forceResize(b)}}this.$resize.done=!0}this.oImg&&(this.oImg.style.display=a?"block":"none")},this.refetch=function(){this.$propHandlers.value.call(this,""),this.$propHandlers.value.call(this,this.value||this.src)},this.addEventListener("$clear",function(){this.value="",this.oImg&&(this.oImg.style.display="none")}),this.$draw=function(){this.$ext=this.$getExternal(),this.$ext.onclick=function(a){this.host.dispatchEvent("click",{htmlEvent:a||event})},this.oImage=this.$getLayoutNode("main","image",this.$ext),this.oImage.nodeType==1&&(this.oImg=this.oImage.getElementsByTagName("img")[0]);if(this.localName=="preview"){var a=this;this.$ext.onclick=function(){if(!a.sPreview)return;a.$ext.innerHTML=a.sPreview,this.onclick=null}}var a=this;apf.addListener(this.$ext,"mouseover",function(b){a.disabled||a.dispatchEvent("mouseover",{htmlEvent:b})}),apf.addListener(this.$ext,"mouseout",function(b){a.disabled||a.dispatchEvent("mouseout",{htmlEvent:b})})},this.addEventListener("DOMNodeInsertedIntoDocument",function(){var a,b="",c=this.childNodes.length;for(;c>=0;--c)(a=this.childNodes[c])&&a.nodeName&&a.nodeName=="#cdata-section"&&(b=a.nodeValue,a.removeNode());this.sPreview=b}),this.$resize=function(){var a=apf.getDiff(this.$ext),b=1,c=1;this.oImg.style.width="",this.oImg.style.height="",this.oImg.offsetWidth>this.$ext.offsetWidth&&(b=this.oImg.offsetWidth/(this.$ext.offsetWidth-a[0])),this.oImg.offsetHeight>this.$ext.offsetHeight&&(c=this.oImg.offsetHeight/(this.$ext.offsetHeight-a[1])),b>c&&b>1?this.oImg.style.width="100%":c>b&&c>1&&(this.oImg.style.height="100%"),this.oImg.style.top=(this.$ext.offsetHeight-apf.getHeightDiff(this.$ext)-this.oImg.offsetHeight)/2+"px"}}.call(apf.img.prototype=new apf.BaseSimple),apf.preview.prototype=apf.img.prototype,apf.aml.setElement("img",apf.img),apf.aml.setElement("preview",apf.preview),apf.aml.setElement("name",apf.BindingRule),apf.aml.setElement("image",apf.BindingRule),apf.item=function(a,b){this.$init(b||"item",apf.NODE_VISIBLE,a)},function(){this.$focussable=!1,this.$childProperty="caption",this.$canLeechSkin="item",this.checked=!1,this.selected=!1,this.implement(apf.ChildValue),this.$attrExcludePropBind=apf.extend({match:1},this.$attrExcludePropBind),this.$booleanProperties.checked=!0,this.$booleanProperties.selected=!0,this.$supportedProperties.push("submenu","value","match","group","icon","checked","selected","disabled","caption","type","values"),this.$propHandlers.submenu=function(a){apf.setStyleClass(this.$ext,"submenu")},this.$propHandlers.select=function(a){this.select=a?"self::"+a.split("|").join("|self::"):a},this.$propHandlers.group=function(a){this.$group&&this.$group.$removeRadio&&this.$group.$removeRadio(this);if(!a){this.$group=null;return}var b=typeof a=="string"?apf.nameserver.get("group",a):a;b||(b=apf.nameserver.register("group",a,new apf.$group),b.setAttribute("id",a),b.dispatchEvent("DOMNodeInsertedIntoDocument"),b.parentNode=this),this.$group=b,this.$group.$addRadio(this)},this.$propHandlers.hotkey=function(a){this.$hotkey&&apf.setNodeValue(this.$hotkey,apf.isMac?apf.hotkeys.toMacNotation(a):a),this.$lastHotkey&&(apf.hotkeys.remove(this.$lastHotkey[0],this.$lastHotkey[1]),delete this.$lastHotkey[0]);if(a){this.$lastHotkey=[a];var b=this;apf.hotkeys.register(a,this.$lastHotkey[1]=function(){if(b.disabled||!b.visible)return;var a=apf.document.getElementsByTagNameNS(apf.ns.aml,"button");for(var c=0;c<a.length;c++)if(a[c].submenu==b.parentNode.name){var d=a[c];d.$setState("Over",{}),$setTimeout(function(){d.$setState("Out",{})},200);break}b.$down(),b.$up(),b.$click()})}},this.$propHandlers.icon=function(a){this.$icon&&apf.skins.setIcon(this.$icon,a,this.parentNode.iconPath)},this.$propHandlers.caption=function(a){this.$caption&&apf.setNodeValue(this.$caption,a)},this.$propHandlers.type=function(a){apf.setStyleClass(this.$ext,a,["item","check","radio"])},this.$propHandlers.values=function(a){this.$values=typeof a=="string"?a.split("|"):a||[1,0],this.$propHandlers.value.call(this,a)},this.$propHandlers.value=function(a){if(this.type!="check")return;a=typeof a=="string"?a.trim():a,this.$values?this.checked=typeof a!="undefined"&&a!==null&&a.toString()==this.$values[0].toString():this.checked=apf.isTrue(a)},this.$propHandlers.checked=function(a){if(this.type!="check")return;apf.isTrue(a)?apf.setStyleClass(this.$ext,"checked"):apf.setStyleClass(this.$ext,"",["checked"]),this.$values||this.getAttribute("values")&&this.$propHandlers.values.call(this,this.getAttribute("values")),this.$values&&this.$values[a?0:1]!=this.value&&this.setProperty("value",this.$values?this.$values[a?0:1]:!0)},this.select=function(){this.parentNode.select(this.group,this.value||this.caption)},this.check=function(){this.setProperty("value",this.$values?this.$values[0]:!0)},this.uncheck=function(){this.setProperty("value",this.$values?this.$values[1]:!1)},this.$check=function(){apf.setStyleClass(this.$ext,"selected")},this.$uncheck=function(){apf.setStyleClass(this.$ext,"",["selected"])},this.$propHandlers.selected=function(a){if(this.type!="radio")return;apf.isTrue(a)?(this.$group&&this.$group.setProperty("value",this.value),this.$check()):this.$uncheck()},this.$propHandlers.disabled=function(a){apf.isTrue(a)||a==-1?apf.setStyleClass(this.$ext,"disabled"):apf.setStyleClass(this.$ext,"",["disabled"])},this.addEventListener("AMLReparent",function(a,b,c){if(!this.$amlLoaded)return;!c&&this.skinName!=b.skinName&&this.loadAml()}),this.$down=function(){},this.$up=function(){this.type=="radio"?this.parentNode.select(this.group,this.value||this.caption):this.type=="check"&&this.setProperty("checked",!this.checked);if(this.submenu){this.$over(null,!0);return}this.parentNode.$hideTree=!0,this.parentNode.sticky||this.parentNode.hide(),this.parentNode.dispatchEvent("itemclick",{value:this.value||this.caption,relatedNode:this,checked:this.checked,selected:this.selected}),this.dispatchEvent("click",{xmlContext:this.parentNode.xmlReference,opener:this.parentNode.opener})},this.$click=function(){};var a;this.$out=function(b){if(apf.isChildOf(this.$ext,b.toElement||b.explicitOriginalTarget)||apf.isChildOf(this.$ext,b.srcElement||b.target))return;clearTimeout(a);if(!this.submenu||this.$submenu(!0)){apf.setStyleClass(this.$ext,"",["hover"]);var c=this.parentNode.$selected;c&&c!=this&&apf.setStyleClass(c.$ext,"",["hover"]),this.parentNode.$selected=null}},this.$over=function(b,c){function f(){e&&e.visible&&(e.hide(),d.parentNode.$showingSubMenu==e&&(d.parentNode.$showingSubMenu=null)),d.submenu&&d.parentNode.opener&&d.parentNode.opener.visible&&d.$submenu()}if(this.parentNode.$selected==this&&b)return;this.parentNode.$selected&&apf.setStyleClass(this.parentNode.$selected.$ext,"",["hover"]),apf.setStyleClass(this.$ext,"hover"),this.parentNode.$selected=this;if(!c&&(apf.isChildOf(this.$ext,b.toElement||b.explicitOriginalTarget)||apf.isChildOf(this.$ext,b.fromElement||b.target)))return;var d=this,e=this.parentNode.$showingSubMenu;if(e&&e.name==this.submenu){this.parentNode.$selected=null,this.parentNode.$showingSubMenu=null,d.$submenu();return}clearTimeout(a),c?f():a=$setTimeout(function(){f(),a=null},210)},this.$submenu=function(a,b){if(!this.submenu)return!0;var c=self[this.submenu];if(!c)return;if(!!a)return c.visible&&!b?!1:(this.parentNode.$showingSubMenu==c&&(this.parentNode.$showingSubMenu=null),apf.setStyleClass(this.$ext,"",["hover"]),c.hide(),!0);this.parentNode.$showingSubMenu=c;var d=apf.getAbsolutePosition(this.$ext,this.parentNode.$ext.offsetParent);c.display(d[0]+this.$ext.offsetWidth-3,d[1]+3,!0,this,this.parentNode.xmlReference,this.parentNode.$uniqueId),c.setAttribute("zindex",(this.parentNode.zindex||this.parentNode.$ext.style.zIndex||1)+1)},this.$draw=function(a){var b=this.parentNode;while(b.$canLeechSkin=="item")b=b.parentNode;if(b.hasFeature(apf.__MULTISELECT__)){var c=this;if(!this.$hasSetSkinListener){var d;this.parentNode.addEventListener("$skinchange",d=function(){if(c.$amlDestroyed)return;c.$ext.parentNode&&this.$deInitNode(c,c.$ext);var a=b==c.parentNode?b.$container:c.parentNode.$container,d=a.lastChild;b.$add(c,c.getAttribute(apf.xmldb.xmlIdTag)+"|"+this.$uniqueId,c.parentNode,a!=b.$container&&a,null),b.$fill(),b.$isTreeArch?c.$container=b.$getLayoutNode("item","container",c.$ext=d&&d.nextSibling||a.firstChild):c.$ext=d&&d.nextSibling||a.firstChild;var e=c;while((e=e.nextSibling)&&e.nodeType!=1);(!e||e.$canLeechSkin!="item")&&b.dispatchEvent("afterload")}),this.addEventListener("DOMNodeRemoved",function(a){a.currentTarget==this&&this.parentNode.removeEventListener("$skinchange",d)}),this.$hasSetSkinListener=!0}b.$itemInited||(b.canrename=!1,b.$removeClearMessage(),b.$itemInited=[b.getTraverseNodes,b.getFirstTraverseNode,b.getTraverseParent],b.getTraverseNodes=function(a){return(a||b).getElementsByTagNameNS(apf.ns.apf,"item")},b.getFirstTraverseNode=function(a){return(a||b).getElementsByTagNameNS(apf.ns.apf,"item")[0]},b.getTraverseParent=function(a){return a&&a.parentNode},b.each=(this.prefix?this.prefix+":":"")+"item",b.$preventDataLoad=!0,b.$initingModel=!0,b.$setDynamicProperty("icon","[@icon]"),b.$setDynamicProperty("image","[@image]"),b.$setDynamicProperty("caption","[label/text()|@caption|text()]"),b.$setDynamicProperty("eachvalue","[value/text()|@value|text()]"),b.$canLoadDataAttr=!1,b.xmlRoot||(b.xmlRoot=b)),this.$loadAml=function(){this.getAttribute("caption")||this.setAttribute("caption",this.caption);var a=b==this.parentNode?b.$container:this.parentNode.$container,c=a.lastChild;b.documentId||(b.documentId=apf.xmldb.getXmlDocId(this)),b.$add(this,apf.xmldb.nodeConnect(b.documentId,this,null,b),this.parentNode,a!=b.$container&&a,null),b.$fill(),b.$isTreeArch?this.$container=b.$getLayoutNode("item","container",this.$ext=c&&c.nextSibling||a.firstChild):this.$ext=c&&c.nextSibling||a.firstChild;var d=this;while((d=d.nextSibling)&&d.nodeType!=1);if(!d||d.$canLeechSkin!="item")b.dispatchEvent("afterload"),b.autoselect&&b.$selectDefault(this.parentNode)};return}this.$ext=this.$getExternal(this.$isLeechingSkin?"item":"main",null,function(a){var b="var o = apf.lookup("+this.$uniqueId+"); if (o.disabled) return; o";a.setAttribute("onmouseup",b+".$up(event)"),a.setAttribute("onmousemove",b+".$over(event)"),a.setAttribute("onmouseout",b+".$out(event)"),a.setAttribute("onmousedown",b+".$down()"),a.setAttribute("onclick",b+".$click()")});var c=this;apf.addListener(this.$ext,"mouseover",function(a){c.disabled||c.dispatchEvent("mouseover",{htmlEvent:a})}),apf.addListener(this.$ext,"mouseout",function(a){c.disabled||c.dispatchEvent("mouseout",{htmlEvent:a})}),this.$caption=this.$getLayoutNode("item","caption",this.$ext),this.$icon=this.$getLayoutNode("item","icon",this.$ext),this.$hotkey=this.$getLayoutNode("item","hotkey",this.$ext),!a&&this.nextSibling&&this.nextSibling.$ext&&this.$ext.parentNode.insertBefore(this.$ext,this.nextSibling.$ext)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=this.$ext?!0:!1;b&&(typeof this.checked!="undefined"?this.$handlePropSet("checked",this.checked):typeof this.selected!="undefined"&&this.$handlePropSet("selected",this.selected),this.disabled&&this.$handlePropSet("disabled",this.disabled),this.caption&&this.$handlePropSet("caption",this.caption))})}.call(apf.item.prototype=new apf.Presentation),apf.aml.setElement("item",apf.item),apf.junction=function(){this.$init("junction",apf.NODE_HIDDEN)},function(){function a(a){var b=this;apf.window.vManager.permanent(this.parentNode,function(){b.$reparent()},function(){})&&this.$reparent()}this.$focussable=!1,this.autoshow=!0,this.$booleanProperties.autoshow=!0,this.$propHandlers["for"]=function(b){this.$amlLoaded&&a.call(this)},this.$reparent=function(){var a=self[this["for"]];if(!a)return;this.autoshow&&a.show(),this.parentNode.insertBefore(a,this)},this.addEventListener("DOMNodeInsertedIntoDocument",a)}.call(apf.junction.prototype=new apf.AmlElement),apf.aml.setElement("junction",apf.junction),apf.label=function(a,b){this.$init(b||"label",apf.NODE_VISIBLE,a)},function(){this.implement(apf.DataAction,apf.ChildValue);var a=this;this.$focussable=!1;var b;this.setValue=function(a){this.setProperty("value",a,!1,!0)},this.getValue=function(){return this.value},this.$supportedProperties.push("caption","for","textalign"),this.$propHandlers.caption=function(a){this.$caption.innerHTML=a},this.$propHandlers["for"]=function(a){b=typeof a=="string"?self[a]:a},this.$propHandlers.textalign=function(a){this.$caption.style.textAlign=a||""},this.$draw=function(){this.$ext=this.$getExternal(),this.$caption=this.$getLayoutNode("main","caption",this.$ext),this.$caption.nodeType!=1&&(this.$caption=this.$caption.parentNode),this.$ext.onmousedown=function(){b&&b.$focussable&&b.focussable&&b.focus()};var a=this;apf.addListener(this.$ext,"click",function(b){a.disabled||a.dispatchEvent("click",{htmlEvent:b})}),apf.addListener(this.$ext,"mouseover",function(b){a.disabled||a.dispatchEvent("mouseover",{htmlEvent:b})}),apf.addListener(this.$ext,"mouseout",function(b){a.disabled||a.dispatchEvent("mouseout",{htmlEvent:b})})},this.$childProperty="caption"}.call(apf.label.prototype=new apf.BaseSimple),apf.aml.setElement("label",apf.label),apf.list=function(a,b){this.$init(b||"list",apf.NODE_VISIBLE,a)},apf.thumbnail=function(a,b){this.$init(b||"thumbnail",apf.NODE_VISIBLE,a)},apf.select=function(a,b){this.$init(b||"select",apf.NODE_VISIBLE,a)},apf.select1=function(a,b){this.$init(b||"selectl",apf.NODE_VISIBLE,a)},function(){function a(a){(!a.action||"insert|add|synchronize|move".indexOf(a.action)>-1)&&this.moreItem&&(this.morePos=="begin"?this.$container.insertBefore(this.moreItem,this.$container.firstChild):this.$container.appendChild(this.moreItem))}this.morePos="end",apf.isIphone||this.implement(apf.Rename),this.$getCaptionElement=function(){if(!this.$caret&&!this.$selected)return;var a=this.$getLayoutNode("item","caption",this.$caret||this.$selected);if(!a)return;return a.nodeType==1?a:a.parentNode},this.$supportedProperties.push("appearance","mode","more","thumbsize","morepos"),this.$propHandlers.morepos=function(a){this.morePos=a},this.$propHandlers.thumbsize=function(a){var b=this.thumbclass;if(apf.isIE){b=b.splitSafe(",");for(var c=0;c<b.length;c++)apf.setStyleRule(b[c],"width",a+"px"),apf.setStyleRule(b[c],"height",a+"px");return}apf.setStyleRule(b,"width",a+"px"),apf.setStyleRule(b,"height",a+"px")},this.$propHandlers.appearance=function(a){},this.$propHandlers.more=function(b){b?(this.delayedselect=!1,this.addEventListener("xmlupdate",a),this.addEventListener("afterload",a),this.$addMoreItem=function(a){this.moreItem||this.$fill(),this.morePos=="begin"?this.$container.insertBefore(this.moreItem,this.$container.firstChild):this.$container.appendChild(this.moreItem)},this.$updateClearMessage=function(){},this.$removeClearMessage=function(){}):(this.removeEventListener("xmlupdate",a),this.removeEventListener("afterload",a))},this.addEventListener("keydown",this.$keyHandler,!0),this.$draw=function(){this.appearance=this.getAttribute("appearance")||"compact",this.$ext=this.$getExternal(),this.$container=this.$getLayoutNode("main","container",this.$ext),apf.hasCssUpdateScrollbarBug&&!this.mode&&this.$fixScrollBug();var a=this;this.$ext.onclick=function(b){a.dispatchEvent("click",{htmlEvent:b||event})},this.listtype=parseInt(this.$getOption("main","type"))||1,this.behaviour=parseInt(this.$getOption("main","behaviour"))||1,this.thumbsize=this.$getOption("main","thumbsize"),this.thumbclass=this.$getOption("main","thumbclass")},this.$loadAml=function(a){},this.$destroy=function(){this.$ext&&(this.$ext.onclick=null),apf.destroyHtmlNode(this.oDrag),this.oDrag=null}}.call(apf.list.prototype=new apf.BaseList),apf.thumbnail.prototype=apf.select.prototype=apf.select1.prototype=apf.list.prototype,apf.aml.setElement("thumbnail",apf.thumbnail),apf.aml.setElement("select",apf.select),apf.aml.setElement("select1",apf.select1),apf.aml.setElement("list",apf.list),apf.loader=function(){this.$init("loader",apf.NODE_HIDDEN),this.show=function(){this.$ext.style.display="block"},this.hide=function(){this.$ext.style.display="none"},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b;if(!(b=this.parentNode.$int))return;this.$ext=apf.insertHtmlNode(null,b,null,(this.$aml?this.$aml.serialize?this.$aml.serialize():this.$aml.xml:this.serialize()).replace(/^<[^>]*>\s*|\s*<[^>]*>$/g,""));if(!apf.loaded){var c=this;apf.config.loaderAnimIndicator&&c.animateLoader(10),apf.addEventListener("load",function(){apf.isTrue(apf.config.autoHideLoading)?(apf.queue.empty(),c.hide()):apf.config.loaderAnimIndicator&&c.animateLoader(20)})}}),this.lastLoaderStep=0,this.animateLoader=function(a){var b=this,c=document.getElementById(apf.config.loaderAnimIndicator);if(!c)return;a=apf.config.loaderWidth*(a/100);var d=this.lastLoaderStep,e=this.lastLoaderStep+a;this.lastLoaderStep=e,e>apf.config.loaderWidth&&(e=apf.config.loaderWidth),apf.tween.single(document.getElementById("animatedLoader"),{steps:5,anim:apf.tween.EASEOUT,type:"width",from:d,to:e,onfinish:function(){e>=apf.config.loaderWidth&&(apf.queue.empty(),b.hide())}})}},apf.loader.prototype=new apf.AmlElement,apf.aml.setElement("loader",apf.loader),apf.menu=function(a,b){this.$init(b||"menu",apf.NODE_VISIBLE,a),this.animate=apf.enableAnim},function(){function b(a){if(this.$showingSubMenu||this.pinned||apf.isChildOf(a.fromElement,a.toElement)||apf.isChildOf(this,a.toElement)||a.name!=="popuphide"&&!a.toElement)return;return this.$hideTree!=-1&&(this.$hideTree=!0,this.hide()),!1}this.$focussable=apf.KEYBOARD,this.$positioning="basic",this.visible=!1,this.matchhide=!1,this.$booleanProperties.animate=!0,this.$booleanProperties.pinned=!0,this.$booleanProperties.sticky=!0,this.$booleanProperties.matchhide=!0,this.$propHandlers.visible=function(a,b,c,d,e){if(a)this.$ext.style.display="block",this.opener&&this.opener.localName.indexOf("item")>-1&&(this.opener.parentNode.$showingSubMenu=this);else{this.$ext.style.display="none";var f=apf.menu.lastFocus,g=this.opener;f!=this.opener&&this.opener&&this.opener.$blur&&this.opener.$blur();if(this.opener&&this.opener.parentNode&&this.opener.parentNode.localName=="menu")this.$hideTree||(this.$hideTree=-1),this.opener.parentNode.focus();else if(f)if(apf.window.$settingFocus)apf.window.$settingFocus!=f&&f.$blur&&f.$blur(),this.$blur(),apf.window.$settingFocus.localName!="menu"&&(apf.menu.lastFocus=null);else if(!apf.window.hasFocus())f.$blur&&f.$blur(),this.$blur(),apf.document.activeElement=f,f.$focusParent&&(f.$focusParent.$lastFocussed=f),apf.menu.lastFocus=null;else if(this.$hideTree){this.$hideTree||(this.$hideTree=-1);var h=(f.disabled||!f.visible)&&f!=apf.document.documentElement;d||h?(f.$blur&&f.$blur(),this.$blur(),apf.document.activeElement=null,h&&apf.window.moveNext()===!1&&apf.window.$focusRoot()):f.focus(null,null,!0),apf.menu.lastFocus=null}clearTimeout(this.$submenuTimer),this.$showingSubMenu&&(this.$showingSubMenu.hide(),this.$showingSubMenu=null),this.opener&&this.opener.$submenu&&(this.opener.$submenu(!0,!0),this.$hideTree===!0&&this.opener&&this.opener.parentNode&&this.opener.parentNode.localName=="menu"&&(this.opener.parentNode.$hideTree=!0,this.opener.parentNode.hide()),this.opener=null),this.$hideTree=null,this.$selected&&(apf.setStyleClass(this.$selected.$ext,"",["hover"]),this.$selected=null),this.dispatchEvent("hide",{opener:g})}};var a;this.display=function(a,b,c,d,e,f,g){function o(){if(a===null)apf.popup.show(this.$uniqueId,{x:0,y:this.ref?0:d.$ext.offsetHeight,animate:c||!this.animate?!1:"fade",steps:10,ref:(this.ref||d).$ext,allowTogether:f,autohide:!this.pinned,noleft:this.left!==undefined,setZindex:this.zindex?!1:!0});else{var g=apf.getAbsolutePosition(document.body);apf.popup.show(this.$uniqueId,{x:a-g[0],y:b-g[1]-(apf.isIE&&apf.isIE<8?1:0),animate:c||!this.animate?!1:"fade",steps:10,allowTogether:f,autohide:!this.pinned,setZindex:this.zindex?!1:!0})}var h=apf.menu.lastFocus=d&&d.$focussable===!0?d:apf.menu.lastFocus||apf.document.activeElement;apf.popup.last=null,this.focus(),h&&h!=this&&h.$focus&&h.$focus(),this.xmlReference=e,this.dispatchEvent("display",{opener:d})}this.opener=d;if(e&&!this.disabled){var h,i,j,k=this.childNodes,l=0,m=k.length,n;for(i=0;i<m;i++){j=k[i];if(j.nodeType!=1||j.localName!="item")continue;n=!e||!j.match||(j.cmatch||(j.cmatch=apf.lm.compile(j.match,{xpathmode:3,injectself:!0})))(e),n?(this.matchhide?j.show():j.enable(),j.localName=="divider"&&this.matchhide?(h=j,l==0&&j.hide(),l=0):l++):(this.matchhide?j.hide():j.disable(),!j.nextSibling&&l==0&&h&&h.hide())}}this.oOverlay&&(g?(this.oOverlay.style.display="block",this.oOverlay.style.width=g+"px"):this.oOverlay.style.display="none"),this.visible=!1,this.$rendered!==!1?(this.show(),o.call(this)):(this.addEventListener("afterrender",o),this.show())},this.getValue=function(a){return this.getSelected(a).value||""},this.getSelected=function(a){var b=this.childNodes,c,d=b.length;for(c=0;c<d;c++){if(b[c].group!=a)continue;if(b[c].selected)return b[c]}return!1},this.select=function(a,b){var c=this.childNodes,d,e=c.length;for(d=0;d<e;d++){if(c[d].group!=a)continue;c[d].value==b||!c[d].value&&c[d].caption==b?c[d].setProperty("selected",!0,!1,!0):c[d].selected&&c[d].setProperty("selected",!1,!1,!0)}},this.addEventListener("keydown",function(a){var b,c=a.keyCode;switch(c){case 13:if(!this.$selected)return;b=this.$selected,b.$down(),b.$up(),b.$click();break;case 27:this.hide();break;case 38:b=this.$selected&&this.$selected.previousSibling||this.lastChild,b&&b.localName=="divider"&&(b=b.previousSibling);if(!b)return;this.$selected&&apf.setStyleClass(this.$selected.$ext,"",["hover"]),apf.setStyleClass(b.$ext,"hover"),this.$selected=b;break;case 40:b=this.$selected&&this.$selected.nextSibling||this.firstChild,b&&b.localName=="divider"&&(b=b.nextSibling);if(!b)return;this.$selected&&apf.setStyleClass(this.$selected.$ext,"",["hover"]),apf.setStyleClass(b.$ext,"hover"),this.$selected=b;break;case 37:if(!this.opener)return;if(this.opener.localName=="button"){b=this.opener.previousSibling;while(b&&!b.submenu)b=b.previousSibling;if(b){b.dispatchEvent("mouseover");var d=b.parentNode.menuIsPressed;d&&self[d.submenu].dispatchEvent("keydown",{keyCode:40})}}else if(this.opener.parentNode.localName=="menu"){var e=this.opener;this.hide(),apf.setStyleClass(e.$ext,"hover"),e.parentNode.$showingSubMenu=null}break;case 39:if(this.$selected&&this.$selected.submenu){this.$selected.$submenu(null,!0),this.$showingSubMenu.dispatchEvent("keydown",{keyCode:40});return}if(this.opener){var e=this.opener;while(e&&e.parentNode&&e.parentNode.localName=="menu")e=e.parentNode.opener;if(e&&e.localName=="button"){b=e.nextSibling;while(b&&!b.submenu)b=b.nextSibling;if(b){b.dispatchEvent("mouseover");var d=b.parentNode.menuIsPressed;d&&self[d.submenu].dispatchEvent("keydown",{keyCode:40});return}}}this.$selected||arguments.callee.call(this,{keyCode:40});break;default:return}return!1},!0),this.addEventListener("focus",function(){apf.popup.last=this.$uniqueId}),this.addEventListener("blur",b),this.addEventListener("popuphide",b),this.$draw=function(){this.$pHtmlNode=document.body,this.$ext=this.$getExternal(),this.oOverlay=this.$getLayoutNode("main","overlay",this.$ext),apf.popup.setContent(this.$uniqueId,this.$ext,"",null,null)},this.$loadAml=function(a){this.$int=this.$getLayoutNode("main","container",this.$ext)},this.$destroy=function(){apf.popup.removeContent(this.$uniqueId)}}.call(apf.menu.prototype=new apf.Presentation),apf.aml.setElement("menu",apf.menu),apf.method=function(a,b){this.$init(b||"method",apf.NODE_HIDDEN,a),this.async=!0,this.caching=!1,this["ignore-offline"]=!1},function(){this.$parsePrio="002",this.$booleanProperties.async=!0,this.$booleanProperties.caching=!0,this.$booleanProperties["ignore-offline"]=!0,this.$supportedProperties.push("name","receive","async","caching","ignore-offline","method-name","type","url"),this.$propHandlers["ignore-offline"]=function(a){this.ignoreOffline=a},this.$propHandlers["method-name"]=function(a){this.methodName=a},this.addEventListener("DOMNodeInserted",function(a){this.parentNode.$addMethod&&a.currentTarget==this&&this.parentNode.$addMethod(this)}),this.addEventListener("DOMNodeRemoved",function(a){this.parentNode.$removeMethod&&a.currentTarget==this&&this.parentNode.$removeMethod(this)}),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.parentNode.$addMethod&&this.parentNode.$addMethod(this)})}.call(apf.method.prototype=new apf.AmlElement),apf.aml.setElement("method",apf.method),apf.WinServer={count:9e3,wins:[],setTop:function(a,b){if(a.zindex||a.modal)return;if(a.$opened){if(a.$opened.visible)return;delete a.$opened}var c;if(!b&&this.wins.length){var c=this.wins[this.wins.length-1];if(c==a)return;!c.modal||!c.visible?c=null:c&&a.modal&&(a.$opener=c,c.$opened=a,c=null)}return this.count+=2,a.setProperty("zindex",this.count),this.wins.remove(a),this.wins.push(a),c&&this.setTop(c,!0),a},setNext:function(){if(this.wins.length<2)return;var a,b=this.wins.shift();do{if(this.setTop(a||b).visible)break;a=this.wins.shift()}while(b!=a)},setPrevious:function(){if(this.wins.length<2)return;this.wins.unshift(this.wins.pop());var a,b=this.wins.pop();do{if(this.setTop(a||b).visible)break;a=this.wins.pop()}while(b!=a)},remove:function(a){this.wins.remove(a)}},apf.toolwindow=function(a,b){this.$init(b||"toolwindow",apf.NODE_VISIBLE,a)},apf.modalwindow=function(a,b){this.$init(b||"modalwindow",apf.NODE_VISIBLE,a)},apf.AmlWindow=function(a,b){this.$init(b||"window",apf.NODE_VISIBLE,a)},function(){this.implement(apf.BaseStateButtons),this.$isWindowContainer=!0,this.collapsedHeight=30,this.canHaveChildren=2,this.visible=!1,this.showdragging=!1,this.kbclose=!1,this.$focussable=apf.KEYBOARD,this.$editableCaption=["title"],this.setTitle=function(a){return this.setProperty("title",a,!1,!0),this},this.setIcon=function(a){return this.setProperty("icon",a,!1,!0),this},this.show=function(a){return this.execAction=a,this.setProperty("visible",!0,!1,!0),this},this.bringToFront=function(){return apf.WinServer.setTop(this),this},this.$booleanProperties.modal=!0,this.$booleanProperties.center=!0,this.$booleanProperties.transaction=!0,this.$booleanProperties.hideselects=!0,this.$booleanProperties.showdragging=!0,this.$booleanProperties.kbclose=!0,this.$supportedProperties.push("title","icon","modal","minwidth","minheight","hideselects","center","kbclose","maxwidth","maxheight","showdragging","transaction"),this.$propHandlers.modal=function(a){a?this.visible&&apf.plane.show(this.$ext,!1,null,null,{color:"black",opacity:this.cover&&this.cover.getAttribute("opacity")||.5,protect:this.$uniqueId,customCover:this.cover||""}):apf.plane.hide(this.$uniqueId)},this.$propHandlers.center=function(a){this.$ext.style.position="absolute"},this.$propHandlers.title=function(a){this.oTitle&&(this.oTitle.nodeValue=a)},this.$propHandlers.icon=function(a){if(!this.oIcon)return;this.oIcon.style.display=a?"":"none",apf.skins.setIcon(this.oIcon,a,this.iconPath)},this.$afterRender=function(){if(this.center&&!this.left&&!this.top&&!this.right&&!this.bottom&&!this.anchors){apf.layout.processQueue();var a=!this.$ext.offsetParent||this.$ext.offsetParent.tagName=="BODY"?[apf.getWindowWidth(),apf.getWindowHeight()]:[this.$ext.offsetParent.offsetWidth,this.$ext.offsetParent.offsetHeight,0,0];a.length==2&&a.push(document.documentElement.scrollLeft,document.documentElement.scrollTop),this.$ext.style.left=Math.max(0,(a[0]-parseInt(this.width||this.$ext.offsetWidth||0))/2)+a[2]+"px",this.$ext.style.top=Math.max(0,(a[1]-parseInt(this.$ext.offsetHeight||0))/3)+a[3]+"px"}this.$amlLoaded&&(this.model||(!this.dockable||!this.aData)&&!this.$isWidget&&this.localName!="toolwindow")&&this.focus(!1,{mouse:!0}),this.dispatchEvent("show")};var a=[],b;this.$propHandlers.visible=function(c){if(apf.isTrue(c)){if(this.dispatchEvent("beforeshow")===!1)return this.visible=!1;this.modal&&apf.plane.show(this.$ext,!1,null,null,{color:"black",opacity:this.cover&&this.cover.getAttribute("opacity")||.5,protect:this.$uniqueId,customCover:this.cover||""}),this.state=this.state.split("|").remove("closed").join("|"),this.$ext.style.display="";if(!apf.canHaveHtmlOverSelects&&this.hideselects){a=[];var d=document.getElementsByTagName("select");for(var e=0;e<d.length;e++){var f=apf.getStyle(d[e],"display");a.push([d[e],f]),d[e].style.display="none"}}if(apf.isIE){var g=this.$ext.className;this.$ext.className="rnd"+Math.random(),this.$ext.className=g}this.$rendered===!1?this.addEventListener("afterrender",this.$afterRender):this.$afterRender()}else{this.modal&&apf.plane.hide(this.$uniqueId),this.$ext.style.display="none";if(!apf.canHaveHtmlOverSelects&&this.hideselects)for(var e=0;e<a.length;e++)a[e][0].style.display=a[e][1];this.hasFocus()&&apf.window.moveNext(!0,this,!0),this.visible=!1,this.dispatchEvent("hide")}apf.layout&&this.$int&&apf.layout.forceResize(this.$int),b=c},this.$propHandlers.zindex=function(a){this.$ext.style.zIndex=a+1},this.addEventListener("keydown",function(a){var b=a.keyCode,c=a.ctrlKey,d=a.shiftKey,e=!1;switch(b){case 38:d&&this.resizable?this.setProperty("height",Math.max(this.minheight||0,this.$ext.offsetHeight-(c?50:10))):this.draggable&&this.setProperty("top",this.$ext.offsetTop-(c?50:10));break;case 37:d&&this.resizable?this.setProperty("width",Math.max(this.minwidth||0,this.$ext.offsetWidth-(c?50:10))):this.draggable&&this.setProperty("left",this.$ext.offsetLeft-(c?50:10));break;case 39:d&&this.resizable?this.setProperty("width",Math.min(this.maxwidth||1e4,this.$ext.offsetWidth+(c?50:10))):this.draggable&&this.setProperty("left",this.$ext.offsetLeft+(c?50:10));break;case 40:d&&this.resizable?this.setProperty("height",Math.min(this.maxheight||1e4,this.$ext.offsetHeight+(c?50:10))):this.draggable&&this.setProperty("top",this.$ext.offsetTop+(c?50:10));break;default:e=null;return}return apf.hasSingleRszEvent&&apf.layout.forceResize(this.$int),e},!0),this.addEventListener("keydown",function(a){a.keyCode==27&&this.buttons.indexOf("close")>-1&&(!this.dockable||!this.aData)&&this.kbclose&&this.close()}),this.$draw=function(){this.popout=apf.isTrue(this.getAttribute("popout")),this.popout&&(this.$pHtmlNode=document.body),this.$ext=this.$getExternal(null,null,function(a){this.$initButtons(a)}),this.oTitle=this.$getLayoutNode("main","title",this.$ext),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.oDrag=this.$getLayoutNode("main","drag",this.$ext),this.$buttons=this.$getLayoutNode("main","buttons",this.$ext),this.cover=this.$getLayoutNode("cover"),this.popout&&(this.$ext.style.position="absolute"),this.oIcon&&(this.oIcon.style.display="none");var a=this;this.oDrag&&(this.oDrag.host=this,this.oDrag.onmousedown=function(b){b||(b=event),!a.$isWidget&&(!a.aData||!a.dockable||a.aData.hidden==3)&&apf.WinServer.setTop(a);if(a.$lastState.maximized)return!1;if(a.aData&&a.dockable)return a.$lastState.normal&&a.startDocking(b),!1}),this.$ext.onmousedown=function(){var b=apf.document.activeElement;if(b&&b.$focusParent!=a&&b.$focusParent.modal)return!1;!a.$isWidget&&(!a.aData||!a.dockable||a.aData.hidden==3)&&apf.WinServer.setTop(a);if(!a.$lastState.normal)return!1},this.$ext.onmousemove=function(){if(!a.$lastState.normal)return!1}},this.$loadAml=function(a){apf.WinServer.setTop(this),this.$int=this.$getLayoutNode("main","container",this.$ext);if(this.oTitle){var b=this;(this.oTitle.nodeType!=1?this.oTitle.parentNode:this.oTitle).ondblclick=function(a){b.state.indexOf("normal")==-1?b.restore():b.buttons.indexOf("max")>-1?b.maximize():b.buttons.indexOf("min")>-1&&b.minimize()}}typeof this.draggable=="undefined"&&((this.$propHandlers.draggable||apf.GuiElement.propHandlers.draggable).call(this,!0),this.draggable=!0),typeof this.buttons=="undefined"&&(this.buttons=""),this.modal===undefined&&(this.$propHandlers.modal.call(this,!0),this.modal=!0);if(!this.visible)this.$ext.style.display="none";else if(this.modal){var b=this;apf.queue.add("focus",function(){b.focus(!1,{mouse:!0})})}this.minwidth===undefined&&(this.minwidth=this.$getOption("Main","min-width")),this.minheight===undefined&&(this.minheight=this.$getOption("Main","min-height")),this.maxwidth===undefined&&(this.maxwidth=this.$getOption("Main","max-width")),this.maxheight===undefined&&(this.maxheight=this.$getOption("Main","max-height"));if(this.center&&this.visible){this.visible=!1,this.$ext.style.display="none";var b=this;$setTimeout(function(){b.setProperty("visible",!0)})}},this.addEventListener("$skinchange",function(){this.title&&this.$propHandlers.title.call(this,this.title),this.icon&&this.$propHandlers.icon.call(this,this.icon)}),this.$destroy=function(a){this.oDrag&&(this.oDrag.host=null,this.oDrag.onmousedown=null,apf.destroyHtmlNode(this.oDrag),this.oDrag=null),this.oTitle=this.oIcon=null,this.$ext&&!a&&(this.$ext.onmousedown=null,this.$ext.onmousemove=null)}}.call(apf.modalwindow.prototype=new apf.Presentation),apf.AmlWindow.prototype=apf.toolwindow.prototype=apf.modalwindow.prototype,apf.aml.setElement("toolwindow",apf.toolwindow),apf.aml.setElement("modalwindow",apf.modalwindow),apf.aml.setElement("window",apf.modalwindow),apf.model=function(a,b){this.$init(b||"model",apf.NODE_HIDDEN,a),this.$amlNodes={},this.$propBinds={},this.$listeners={},this.$proplisteners={},apf.globalModel||(apf.globalModel=this,apf.nameserver.register("model","@default",this))},function(){this.$parsePrio="020",this.$isModel=!0,this.canHaveChildren=!1,this.enablereset=!1,this.$state=0,this.$attrExcludePropBind=apf.extend({submission:1,src:1,session:1},this.$attrExcludePropBind),this.$booleanProperties.whitespace=!0,this.$booleanProperties.autoinit=!0,this.$booleanProperties.enablereset=!0,this.$supportedProperties=["submission","src","session","autoinit","enablereset","remote","whitespace"],this.$propHandlers.src=this.$propHandlers.get=function(a,b){this.$amlLoaded&&this.$loadFrom(a)},this.register=function(a,b){if(!a||!a.load)return this;var c=a.$model==this;a.$model&&!c&&a.$model.unregister(a);var d=this.$amlNodes[a.$uniqueId]={amlNode:a,xpath:b};a.$model=this,typeof a.noloading=="undefined"&&a.$setInheritedAttribute&&!a.$setInheritedAttribute("noloading")&&(a.noloading=!1),this.$state==1?a.clear&&!a.noloading&&a.clear("loading"):this.data?this.$loadInAmlNode(d):a.hasFeature(apf.__CACHE__)&&a.clear("empty");var e,f,g=a.$propsUsingMainModel,h=a.$uniqueId;for(var i in g)this.$unbindXmlProperty(a,i),e=this.$bindXmlProperty(a,i,g[i].xpath,g[i].optimize),this.data&&((f=e.listen?this.data.selectSingleNode(e.listen):this.data)?a.$execProperty(i,f):this.$waitForXml(a,i));return this},this.$register=function(a,b){this.$amlNodes[a.$uniqueId].xpath=b},this.unregister=function(a){delete this.$amlNodes[a.$uniqueId];var b=a.$propsUsingMainModel;for(var c in b)this.$unbindXmlProperty(a,c);a.dispatchEvent("unloadmodel")},this.getXpathByAmlNode=function(a){var b=this.$amlNodes[a.$uniqueId];return b?b.xpath:!1},this.$loadInAmlNode=function(a){var b,c=a.xpath,d=a.amlNode;this.data&&c?b=this.data.selectSingleNode(c):b=this.data||null,b?(delete this.$listeners[d.$uniqueId],d.xmlRoot!=b&&d.load(b)):this.$waitForXml(d)},this.$loadInAmlProp=function(a,b){var c,d,e=this.$propBinds[a],f=apf.all[a];if(!f){delete this.$propBinds[a];return}for(c in e)b&&(d=e[c].listen?b.selectSingleNode(e[c].listen):b)?(apf.xmldb.addNodeListener(b,f,"p|"+a+"|"+c+"|"+this.$uniqueId),delete this.$proplisteners[a+c],f.$execProperty(c,d)):this.$waitForXml(f,c)},this.$bindXmlProperty=function(a,b,c,d,e){var f,g,h=a.$uniqueId;this.$propBinds[h]||(this.$propBinds[h]={}),g=this.$propBinds[h][b]={bind:c};if(d&&!1){(f=this.$amlNodes[h])&&f.xpath&&(c=(g.root=f.xpath)+"/"+c);var i=c.split("/"),j=i.pop();j.indexOf("@")==0||j.indexOf("text()")>-1||j.indexOf("node()")>-1?g.listen=i.join("/"):g.listen=c}else(f=this.$amlNodes[h])&&f.xpath&&(g.listen=f.xpath);e&&(g.listen=".");if(this.data){var k=g.listen?this.data.selectSingleNode(g.listen):this.data;if(k)return apf.xmldb.addNodeListener(k,a,"p|"+a.$uniqueId+"|"+b+"|"+this.$uniqueId),g}return this.$waitForXml(a,b),g},this.$unbindXmlProperty=function(a,b){var c=a.$uniqueId,d=this.$propBinds[c]&&this.$propBinds[c][b];if(!d)return;if(this.data){var e=d.listen?this.data.selectSingleNode(d.listen):this.data;e&&apf.xmldb.removeNodeListener(e,a,"p|"+c+"|"+b+"|"+this.$uniqueId)}return delete this.$proplisteners[c+b],delete this.$propBinds[c][b],d},this.getXml=function(){return this.data?apf.xmldb.cleanNode(this.data.cloneNode(!0)):!1},this.setQueryValue=function(a,b){if(!this.data)return!1;var c=apf.createNodeFromXpath(this.data,a);return c?(apf.setNodeValue(c,b,!0),c):null},this.setQueryValues=function(a,b){if(!this.data)return[];var c=this.data.selectNodes(a);for(var d=0,e=c.length;d<e;d++)apf.setNodeValue(node,b,!0);return c},this.queryValue=function(a){return this.data?apf.queryValue(this.data,a):!1},this.queryValues=function(a){return this.data?apf.queryValue(this.data,a):[]},this.queryNode=function(a){return this.data?this.data.selectSingleNode(a):null},this.queryNodes=function(a){return this.data?this.data.selectNodes(a):[]},this.appendXml=function(a,b){var c=b?apf.createNodeFromXpath(this.data,b):this.data;if(!c)return null;typeof a=="string"?a=apf.getXml(a):a.nodeFunc&&(a=a.getXml());if(!a)return;return a=apf.xmldb.appendChild(c,a),this.dispatchEvent("update",{xmlNode:a}),a},this.removeXml=function(a){if(!this.data)return;var b;typeof a=="string"?b=this.data.selectNodes(a):a.length||(b=[a]),b.length&&apf.xmldb.removeNodeList(b)},this.clear=function(){this.load(null),doc=null},this.reset=function(){var a=this.data.ownerDocument;this.data.parentNode.replaceChild(this.$copy,this.data),this.load(this.$copy)},this.savePoint=function(){this.$copy=apf.xmldb.getCleanCopy(this.data)},this.reloadAmlNode=function(a){if(!this.data)return;var b=this.$amlNodes[a],c=b.xpath?this.data.selectSingleNode(b.xpath):this.data;b.amlNode.load(c)},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=this.$aml;this.parentNode&&this.parentNode.hasFeature(apf.__DATABINDING__)&&(this.name||this.setProperty("id","model"+this.parentNode.$uniqueId),this.register(this.parentNode));if(!this.src){var c,d=b;if(d&&d.childNodes.length){if(apf.getNode(d,[0]))return(c=d.xml||d.serialize()).match(/^[\s\S]*?>([\s\S]*)<[\s\S]*?$/)&&(c=RegExp.$1,apf.supportNamespaces||(c=c.replace(/xmlns=\"[^"]*\"/g,""))),this.whitespace===!1&&(c=c.replace(/>[\s\n\r]*</g,"><")),this.load(apf.getXmlDom(c).documentElement);if(apf.isJson(d.childNodes[0].nodeValue))return this.load(apf.getXmlDom(d.childNodes[0].nodeValue).documentElement)}this.submission&&this.load("<data />")}return apf.isFalse(this.autoinit)||this.init(),this}),this.init=function(a){this.session?this.$loadFrom(this.session,{isSession:!0}):this.src&&this.$loadFrom(this.src,{callback:a})},this.$loadFrom=function(a,b){var c=a.split(":");b||(b={}),b.isSession||(this.src=a,this.$srcOptions=[a,b]),this.dispatchEvent("beforeretrieve");var d,e;for(d in this.$amlNodes){if(!(e=this.$amlNodes[d])||!e.amlNode)continue;e.amlNode.noloading||e.amlNode.clear("loading")}this.$state=1,this.$callCount?this.$callCount++:this.$callCount=1;var f=this,g=this.$callCount,h=b.callback;return b.callback=function(c,d,e){if(g!=f.$callCount)return;f.dispatchEvent("afterretrieve");if(d!=apf.SUCCESS){var i;i=new Error(apf.formatErrorString(1032,f,"Loading xml data","Could not load data\nInstruction: "+a+"\n"+"Url: "+e.url+"\n"+"Info: "+e.message+"\n\n"+c));if(h&&h.apply(this,arguments)===!0)return!0;if(e.tpModule&&e.tpModule.retryTimeout(e,d,f,i)===!0)return!0;throw f.$state=0,i}if(b&&b.isSession&&!c){if(this.src)return f.$loadFrom(this.src)}else{if(b&&b.cancel)return;f.load(c),f.dispatchEvent("receive",{data:c}),h&&h.apply(this,arguments)}},apf.getData(a,b)},this.reload=function(){if(!this.data)return;this.$srcOptions?this.$loadFrom.apply(this,this.$srcOptions):this.src&&this.$loadFrom(this.src)},this.load=function(a,b){if(typeof a=="string")if(a.charAt(0)=="<")a.substr(0,5).toUpperCase()=="<!DOC"&&(a=a.substr(a.indexOf(">")+1)),apf.supportNamespaces||(a=a.replace(/xmlns\=\"[^"]*\"/g,"")),a=apf.getXmlDom(a,null,!0).documentElement;else return this.$loadFrom(a,b);if(this.ownerDocument&&this.ownerDocument.$domParser.$isPaused(this)){var c=this;this.data=a,apf.xmldb.getXmlDocId(a,this),this.$queueLoading=!0,apf.queue.add("modelload"+this.$uniqueId,function(){c.ownerDocument&&c.ownerDocument.$domParser.$isPaused(c)?apf.queue.add("modelload"+c.$uniqueId,arguments.callee):(c.load(a,b),c.$queueLoading=!1)});return}this.$queueLoading&&apf.queue.remove("modelload"+this.$uniqueId),this.$state=0;if(this.dispatchEvent("beforeload",{xmlNode:a})===!1)return!1;var d=a?a.ownerDocument:null;if(a){if(!apf.supportNamespaces){var e=[],f=a.attributes;for(var g=0,h=f.length;g<h;g++)f[g].nodeName.substr(0,5)=="xmlns"&&e.push(f[g].xml);e.length&&d.setProperty("SelectionNamespaces",e.join(" "))}apf.xmldb.addNodeListener(a,this),apf.xmldb.nodeConnect(apf.xmldb.getXmlDocId(a,this),a,null,this),(!b||!b.nocopy)&&this.enablereset&&(this.$copy=apf.xmldb.getCleanCopy(a))}this.data=a,this.dispatchEvent("afterload",{xmlNode:a}),this.dispatchEvent("update",{xmlNode:a});for(var i in this.$amlNodes)this.$loadInAmlNode(this.$amlNodes[i]);for(i in this.$propBinds)this.$loadInAmlProp(i,a);return this},this.$waitForXml=function(a,b){b?this.$proplisteners[a.$uniqueId+b]={id:a.$uniqueId,amlNode:a,prop:b}:this.$listeners[a.$uniqueId]=a,a.xmlRoot&&a.clear()},this.$xmlUpdate=function(a,b,c,d){if(a=="replacenode"&&b==this.data.ownerDocument.documentElement){var e=this;$setTimeout(function(){e.load(b)});return}var f,g;for(var h in this.$listeners)if(b=this.data.selectSingleNode(this.$amlNodes[h].xpath||"."))this.$listeners[h].load(b),delete this.$listeners[h];for(h in this.$proplisteners){f=this.$proplisteners[h],g=this.$propBinds[f.id][f.prop];if(b=g.listen?this.data.selectSingleNode(g.listen):this.data)delete this.$proplisteners[h],apf.xmldb.addNodeListener(b,f.amlNode,"p|"+f.id+"|"+f.prop+"|"+this.$uniqueId),f.amlNode.$execProperty(f.prop,g.root?this.data.selectSingleNode(g.root):this.data)}this.dispatchEvent("update",{xmlNode:b,action:a,undoObj:d})},this.$insertFrom=function(a,b){if(!a)return!1;this.dispatchEvent("beforeretrieve");var c=b.callback,d=this;b.callback=function(a,e,f){d.dispatchEvent("afterretrieve"),f||(f={});if(e!=apf.SUCCESS){var g;if(f.tpModule.retryTimeout(f,e,b.amlNode||d,g)===!0)return!0;if(c&&c.call(this,f.data,e,f)===!1)return;throw g}typeof b.insertPoint=="string"&&(b.insertPoint=d.data.selectSingleNode(b.insertPoint)),typeof b.clearContents=="undefined"&&f.userdata&&(b.clearContents=apf.isTrue(f.userdata[1])),b.whitespace==undefined&&(b.whitespace=d.whitespace),(b.amlNode||d).insert(a,b),c&&c.call(this,f.data,e,f)},apf.getData(a,b)},this.insert=function(a,b){if(typeof a=="string")if(a.charAt(0)=="<")a.substr(0,5).toUpperCase()=="<!DOC"&&(a=a.substr(a.indexOf(">")+1)),apf.supportNamespaces||(a=a.replace(/xmlns\=\"[^"]*\"/g,"")),this.whitespace===!1&&(a=a.replace(/>[\s\n\r]*</g,"><")),a=apf.getXmlDom(a).documentElement;else return this.$insertFrom(a,b);b.insertPoint||(b.insertPoint=this.data),typeof b.copyAttributes=="undefined"&&(b.copyAttributes=!0);var c=apf.mergeXml(a,b.insertPoint,b);return apf.xmldb.applyChanges("insert",b.insertPoint),a},this.convertXml=function(a){return a?apf.convertXml(this.data,a):this.data.xml},this.submit=function(a,b,c,d){function f(a,b,c){if((b==apf.TIMEOUT||e.retryOnError&&b==apf.ERROR)&&c.retries<apf.maxHttpRetries)return c.tpModule.retry(c.id);b!=apf.SUCCESS?e.dispatchEvent("submiterror",c):e.dispatchEvent("submitsuccess",apf.extend({data:a},c))}a||(a=this.submission),c||(c=this.data),b||(b="form");if(this.dispatchEvent("beforesubmit",{instruction:a})===!1)return!1;var e=this,g;b.indexOf("xml")>-1?g=apf.getXmlString(c):b.indexOf("form")>-1?g=apf.convertXml(apf.xmldb.getCleanCopy(c),"cgiobjects"):b.indexOf("json")>-1&&(g=apf.convertXml(c,"json")),apf.saveData(a,apf.extend({xmlNode:c,data:g,callback:f},d)),this.dispatchEvent("aftersubmit")},this.$destroy=function(){this.session&&this.data&&apf.saveData(this.session,{xmlNode:this.getXml()})}}.call(apf.model.prototype=new apf.AmlElement),apf.aml.setElement("model",apf.model),apf.page=function(a,b){this.$init(b||"page",apf.NODE_VISIBLE,a)},function(){function a(a){this.parentNode.set(this),this.canHaveChildren=2,this.$setStyleClass(a,"down",null,!0)}this.canHaveChildren=!0,this.$focussable=!1,this.closebtn=!1,this.setCaption=function(a){this.setProperty("caption",a,!1,!0)},this.setIcon=function(a){this.setProperty("icon",a,!1,!0)},this.addEventListener("beforerender",function(){this.parentNode.dispatchEvent("beforerender",{page:this})}),this.addEventListener("afterrender",function(){this.parentNode.dispatchEvent("afterrender",{page:this})}),this.$booleanProperties.visible=!0,this.$booleanProperties.fake=!0,this.$booleanProperties.closebtn=!0,this.$supportedProperties.push("fake","caption","icon","tooltip","type","buttons","closebtn","trans-in","trans-out"),this.$propHandlers.closebtn=function(a){var b=this;if(a){var c=this.parentNode.$getLayoutNode("button","container",this.$button);this.parentNode.$getNewContext("btnclose");var d=this.parentNode.$getLayoutNode("btnclose");d&&(apf.setStyleClass(this.$button,"btnclose"),d.addEventListener("mousedown",function(a){apf.cancelBubble(a,apf.lookup(b.$uniqueId))},!1),d.addEventListener("click",function(a){var c=apf.lookup(b.$uniqueId);c.parentNode.remove(c,a)},!1),c.appendChild(d))}},this.$propHandlers.tooltip=function(a){if(!this.parentNode)return;var b=this.parentNode.$getLayoutNode("button","caption",this.$button);(b.nodeType==1?b:b.parentNode).setAttribute("title",a||"")},this.$propHandlers.caption=function(a){if(!this.parentNode)return;var b=this.parentNode.$getLayoutNode("button","caption",this.$button);b.nodeType==1?b.innerHTML=a:b.nodeValue=a},this.$propHandlers.icon=function(a){if(!this.parentNode)return;var b=this.parentNode.$getLayoutNode("button","icon",this.$button);b&&b.nodeType==1&&apf.skins.setIcon(b,a,this.parentNode.iconPath)},this.$propHandlers.visible=function(a){if(!this.parentNode)return;if(a){if(this.$fake){this.parentNode.set(this.$fake),this.visible=!1;return}this.$ext.style.display="",this.parentNode.$hasButtons&&(this.$button.style.display="block"),this.parentNode.$activepage||this.parentNode.set(this)}else{if(this.$active){this.$deactivate();var b=this.parentNode.activepagenr+1,c=this.parentNode.getPages(),d=c.length;while(b<d&&!c[b].visible)b++;if(b==d){b=this.parentNode.activepagenr-1;while(b>=0&&d&&!c[b].visible)b--}b>=0?this.parentNode.set(b):this.parentNode.activepage=this.parentNode.activepagenr=this.parentNode.$activepage=null}this.$ext.style.display="none",this.parentNode.$hasButtons&&(this.$button.style.display="none")}},this.$propHandlers.fake=function(a){this.$ext&&(apf.destroyHtmlNode(this.$ext),this.$int=this.$ext=null)},this.$propHandlers.type=function(a){this.setProperty("fake",!0),this.relPage&&this.$active&&this.relPage.$deactivate(),this.relPage=this.parentNode.getPage(a),this.$active&&this.$activate()},this.addEventListener("DOMNodeRemoved",function(a){if(a&&a.currentTarget!=this)return;this.$button&&(this.$position&1&&this.parentNode.$setStyleClass(this.$button,"",["firstbtn","firstcurbtn"]),this.$position&2&&this.parentNode.$setStyleClass(this.$button,"",["lastbtn"])),a.$doOnlyAdmin||(this.$button&&this.$button.parentNode.removeChild(this.$button),this.parentNode&&this.parentNode.$activepage==this&&(this.$button&&this.parentNode.$setStyleClass(this.$button,"",["curbtn"]),this.parentNode.$setStyleClass(this.$ext,"",["curpage"])))}),this.addEventListener("DOMNodeInserted",function(a){if(a&&a.currentTarget!=this||!this.$amlLoaded)return;!a.$isMoveWithinParent&&this.skinName!=this.parentNode.skinName?this.$destroy():this.$button&&(!a.$oldParent||a.$oldParent.$hasButtons)&&this.parentNode.$buttons&&this.parentNode.$buttons.insertBefore(this.$button,a.$beforeNode&&a.$beforeNode.$button||null)},!0),this.$position=0,this.$first=function(a){a?(this.$isFirst=!1,this.$position-=1,this.parentNode.$setStyleClass(this.$button,"",["firstbtn","firstcurbtn"])):(this.$isFirst=!0,this.$position=this.$position|1,this.parentNode.$setStyleClass(this.$button,"firstbtn"+(this.parentNode.$activepage==this?" firstcurbtn":"")))},this.$last=function(a){a?(this.$isLast=!1,this.$position-=2,this.parentNode.$setStyleClass(this.$button,"",["lastbtn"])):(this.$isLast=!0,this.$position=this.$position|2,this.parentNode.$setStyleClass(this.$button,"lastbtn"))},this.$deactivate=function(a){this.$active=!1,this.parentNode.$hasButtons&&(this.$position>0&&this.parentNode.$setStyleClass(this.$button,"",["firstcurbtn"]),this.parentNode.$setStyleClass(this.$button,"",["curbtn"])),(!this.fake||this.relPage)&&!a&&(this.parentNode.$setStyleClass(this.fake?this.relPage.$ext:this.$ext,"",["curpage"]),this.fake&&(this.relPage.visible||(this.relPage.$ext.style.display="none"),this.relPage.dispatchEvent("prop.visible",{value:!1})),this.dispatchEvent("prop.visible",{value:!1}))},this.$deactivateButton=function(){this.parentNode&&this.parentNode.$hasButtons&&(this.$position>0&&this.parentNode.$setStyleClass(this.$button,"",["firstcurbtn"]),this.parentNode.$setStyleClass(this.$button,"",["curbtn"]))},this.$activate=function(){this.$active=!0;if(!this.$drawn){var a;this.addEventListener("DOMNodeInsertedIntoDocument",a=function(b){this.removeEventListener("DOMNodeInsertedIntoDocument",a);if(!this.$active)return;this.$activate()});return}this.parentNode.$hasButtons&&(this.$isFirst&&this.parentNode.$setStyleClass(this.$button,"firstcurbtn"),this.parentNode.$setStyleClass(this.$button,"curbtn"));if(!this.fake||this.relPage)this.fake?this.relPage&&(this.relPage.$ext.style.display="",this.parentNode.$setStyleClass(this.relPage.$ext,"curpage"),this.relPage.$fake=this,this.relPage.$render&&this.relPage.$render(),this.relPage.dispatchEvent("prop.visible",{value:!0})):this.parentNode.$setStyleClass(this.$ext,"curpage"),apf.layout&&this.relPage&&apf.layout.forceResize(this.fake?this.relPage.$int:this.$int);this.$render&&this.$render();if(!this.fake){if(apf.isIE){var b=this.$ext.className;this.$ext.className="rnd"+Math.random(),this.$ext.className=b}this.dispatchEvent("prop.visible",{value:!0})}},this.$activateButton=function(){if(this.$active)return;if(!this.$drawn){var a;this.addEventListener("DOMNodeInsertedIntoDocument",a=function(b){this.removeEventListener("DOMNodeInsertedIntoDocument",a),this.$activateButton()});return}this.parentNode&&this.parentNode.$hasButtons&&(this.$isFirst&&this.parentNode.$setStyleClass(this.$button,"firstcurbtn"),this.parentNode.$setStyleClass(this.$button,"curbtn")),this.$render&&this.$render()},this.addEventListener("$skinchange",function(){this.caption&&this.$propHandlers.caption.call(this,this.caption),this.icon&&this.$propHandlers.icon.call(this,this.icon)}),this.$enable=function(){this.$button&&this.$setStyleClass(this.$button,null,["btnDisabled"])},this.$disable=function(){this.$button&&this.$setStyleClass(this.$button,"btnDisabled")},this.$btnControl={},this.$btnDown=function(b,c){if(this.disabled)return;if(c.button==2&&this.parentNode.contextmenu){this.parentNode.contextPage=this;return}if(this.parentNode.dispatchEvent("tabselectclick",{page:this,htmlEvent:c})===!1)return;this.$btnPressed=!0,a.call(this,b);if(this.parentNode.$order&&this.parentNode.getPages().length>1){if(this.$btnControl[this.$uniqueId])return;this.$dragging=!0;var d=apf.getAbsolutePosition(this.$button,this.parentNode.$ext),e=c.clientX,f=e-d[0],g=apf.getAbsolutePosition(this.$button)[1];b.style.left=b.offsetLeft+"px",b.style.top=b.offsetTop+"px",b.style.position="absolute";var h=document.createElement("div");h.style.width=b.offsetWidth+"px",h.style.marginLeft=apf.getStyle(this.$button,"marginLeft"),h.style.marginRight=apf.getStyle(this.$button,"marginRight"),this.$button.parentNode.insertBefore(h,this.$button);var i=Math.abs(apf.getMargin(h)[0]),j,k,l=this,m;apf.addListener(document,"mousemove",k=function(a){a||(a=event);if(!m){if(Math.abs(e-a.clientX)<3)return;m=!0,b.style.zIndex=1}b.style.left="-2000px";var c=document.elementFromPoint(a.clientX,g+1),d=c&&apf.findHost(c);b.style.left=a.clientX-f+"px";if(d&&d.localName=="page"){d.$button.style.position="relative";var j,k=h.offsetLeft>d.$button.offsetLeft,n=apf.getAbsolutePosition(d.$button);if(k&&d.$button.offsetWidth-a.clientX+n[0]<i)return;if(j=l.$btnControl[d.$uniqueId])if(j.onRight!=k)j.stop();else return;l.$btnControl[d.$uniqueId]={onRight:k};var o=l.$lastPosition=k?d.$button:d.$button.nextSibling;l.$lastLeft=d.$button.offsetLeft,apf.tween.single(d.$button,{steps:20,interval:10,from:0,to:k?d.$button.offsetWidth-i:-1*(d.$button.offsetWidth-i),type:"left",anim:apf.tween.easeInOutCubic,control:l.$btnControl[d.$uniqueId],onstop:function(){},onfinish:function(){d.$button.style.left=d.$button.style.position="",delete l.$btnControl[d.$uniqueId],h&&h.parentNode&&h.parentNode.insertBefore(h,o),l.$lastPosition=l.$lastLeft=undefined}})}}),apf.addListener(document,"mouseup",j=function(a){a||(a=event);var c=l.$lastPosition!==null?apf.findHost(l.$lastPosition||h.nextSibling):null;m&&c!=l.nextSibling?apf.tween.single(l.$button,{steps:20,interval:10,from:l.$button.offsetLeft,to:l.$lastLeft||h.offsetLeft,type:"left",control:l.$btnControl[l.$uniqueId]={},anim:apf.tween.easeInOutCubic,onstop:function(){},onfinish:function(){b.style.position=b.style.zIndex=b.style.top=b.style.left="";var a=l.nextSibling!=c;l.parentNode.insertBefore(l,c),h.parentNode.removeChild(h),a&&l.parentNode.dispatchEvent("reorder",{page:l.localName!="page"?l.parentNode.$activepage:l}),delete l.$btnControl[l.$uniqueId]}}):(b.style.position=b.style.zIndex=b.style.top=b.style.left="",h.parentNode.removeChild(h)),apf.removeListener(document,"mouseup",j),apf.removeListener(document,"mousemove",k)})}},this.$btnUp=function(b){this.parentNode.$setStyleClass(b,"",["down"],!0);if(this.disabled)return;this.$btnPressed=!1,this.parentNode.dispatchEvent("tabselectmouseup")},this.$btnOut=function(a){this.parentNode.$setStyleClass(a,"",["over"],!0),this.canHaveChildren=!0,this.$dragging=!1,this.$btnPressed=!1},this.$canLeechSkin=!0,this.addEventListener("prop.class",function(a){apf.setStyleClass(this.$button,a.value,this.$lastClassValueBtn?[this.$lastClassValueBtn]:null),this.$lastClassValueBtn=a.value}),this.$draw=function(a){this.skinName=this.parentNode.skinName;var b=this.getAttribute("type");b&&(this.fake=!0,this.relPage=this.parentNode.getPage(b)||null);if(this.parentNode.$hasButtons){this.parentNode.$getNewContext("button");var c=this.parentNode.$getLayoutNode("button");c.setAttribute(this.parentNode.$getOption("main","select")||"onmousedown","apf.lookup("+this.$uniqueId+").$btnDown(this, event);"),c.setAttribute("onmouseup","apf.lookup("+this.$uniqueId+").$btnUp(this)"),c.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+").parentNode;if(apf.lookup("+this.$uniqueId+") != o.$activepage"+(this.parentNode.overactivetab?" || true":"")+') o.$setStyleClass(this, "over", null, true);'),c.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+");o&&o.$btnOut(this, event);"),this.$button=apf.insertHtmlNode(c,this.parentNode.$buttons);var d=this.closebtn=this.getAttribute("closebtn");(apf.isTrue(d)||(this.parentNode.buttons||"").indexOf("close")>-1&&!apf.isFalse(d))&&this.$propHandlers.closebtn.call(this,!0);if(this.parentNode.$scale){var e=apf.getHtmlInnerWidth(this.parentNode.$buttons),f=this.parentNode.getPages().length;this.$button.style.width=Math.round(Math.min(e/f,this.parentNode.$maxBtnWidth))+"px"}!a&&this.nextSibling&&this.nextSibling.$button&&this.$button.parentNode.insertBefore(this.$button,this.nextSibling.$button),this.$button.host=this}if(this.fake)return;this.$ext&&this.$ext.parentNode.removeChild(this.$ext),this.$ext=this.parentNode.$getExternal("page",this.parentNode.oPages,null,this),this.$ext.host=this,this.$int=this.parentNode.$getLayoutNode("page","container",this.$ext),this.$isLast&&this.$last(),this.$isFirst&&this.$first()},this.$destroy=function(){this.$button&&(this.parentNode&&!this.parentNode.$amlDestroyed&&this.$button.parentNode&&this.$button.parentNode.removeChild(this.$button),this.$button.host=null,this.$button=null)}}.call(apf.page.prototype=new apf.Presentation),apf.aml.setElement("page",apf.page),apf.param=function(a,b){this.$init(b||"param",apf.NODE_HIDDEN,a)},apf.param.prototype=new apf.AmlElement,apf.param.prototype.$parsePrio="002",apf.aml.setElement("variable",apf.param),apf.aml.setElement("param",apf.param),apf.progress=function(a,b){this.$init(b||"progress",apf.NODE_VISIBLE,a)},apf.progressbar=function(a,b){this.$init(b||"progressbar",apf.NODE_VISIBLE,a)},function(){this.implement(apf.DataAction),this.$focussable=!1,this.value=0,this.min=0,this.max=100,this.$running=!1,this.$timer,this.$booleanProperties.autostart=!0,this.$booleanProperties.autohide=!0,this.$supportedProperties.push("value","min","max","autostart","autohide"),this.$propHandlers.value=function(a){this.value=parseInt(a)||this.min,this.value>=this.max?apf.setStyleClass(this.$ext,this.$baseCSSname+"Complete",[this.$baseCSSname+"Running",this.$baseCSSname+"Half"]):apf.setStyleClass(this.$ext,this.$baseCSSname+"Running",[this.$baseCSSname+"Complete"]),this.value>=this.max/2&&apf.setStyleClass(this.$ext,this.$baseCSSname+"Half",[]),this.oSlider.style.width=this.value*100/(this.max-this.min)+"%",this.oCaption.nodeValue=Math.round(this.value/(this.max-this.min)*100)+"%"},this.$propHandlers.min=function(a){this.min=parseFloat(a)},this.$propHandlers.max=function(a){this.max=parseFloat(a)},this.setValue=function(a){this.setProperty("value",a,!1,!0)},this.getValue=function(){return this.value},this.clear=function(){this.$clear()},this.$clear=function(a,b){clearInterval(this.$timer),this.setValue(this.min),apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Running",this.$baseCSSname+"Complete"]);if(a){var c=this;this.$timer=setInterval(function(){c.start(b)})}this.autohide&&this.hide(),this.$running=!1},this.start=function(a){this.autohide&&this.show(),clearInterval(this.$timer);var b=this;this.$timer=setInterval(function(){b.$amlDestroyed?clearInterval(b.$timer):b.$step()},a||1e3),this.$setStyleClass(this.$ext,this.$baseCSSname+"Running")},this.pause=function(){clearInterval(this.$timer)},this.stop=function(a,b,c){clearInterval(this.$timer),this.setValue(this.max);var d=this;this.$timer=setInterval(function(){d.$clear(a,c||0)},b||500)},this.$step=function(){if(this.value==this.max)return;this.setValue(this.value+1)},this.$draw=function(a,b,c,d){this.$ext=this.$getExternal(),this.oSlider=this.$getLayoutNode("main","progress",this.$ext),this.oCaption=this.$getLayoutNode("main","caption",this.$ext)},this.$loadAml=function(a){this.autostart&&this.start(),this.autohide&&this.hide()}}.call(apf.progressbar.prototype=new apf.StandardBinding),apf.progress.prototype=apf.progressbar.prototype,apf.aml.setElement("progress",apf.progress),apf.aml.setElement("progressbar",apf.progressbar),apf.radiobutton=function(a,b){this.$init(b||"radiobutton",apf.NODE_VISIBLE,a)},function(){this.implement(apf.ChildValue),this.$childProperty="label",this.$focussable=apf.KEYBOARD,this.$booleanProperties.selected=!0,this.$supportedProperties.push("value","background","group","label","selected","tooltip","icon"),this.$propHandlers.group=function(a){if(!this.$ext)return;this.$group&&this.$group.$removeRadio&&this.$group.$removeRadio(this);if(!a){this.$group=null;return}var b=typeof a=="string"?apf.nameserver.get("group",a):a;b||(b=apf.nameserver.register("group",a,new apf.$group),b.setAttribute("id",a),b.dispatchEvent("DOMNodeInsertedIntoDocument"),b.parentNode=this),this.$group=b,this.oInput&&this.oInput.setAttribute("name",a),this.$group.$addRadio(this)},this.$propHandlers.tooltip=function(a){this.$ext.setAttribute("title",a)},this.$propHandlers.icon=function(a){if(!this.oIcon)return;a?this.$setStyleClass(this.$ext,this.$baseCSSname+"Icon"):this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Icon"]),apf.skins.setIcon(this.oIcon,a,this.iconPath)},this.$propHandlers.label=function(a){a?this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Empty"]):this.$setStyleClass(this.$ext,this.$baseCSSname+"Empty"),this.oLabel&&(this.oLabel.innerHTML=a)},this.$propHandlers.selected=function(a){if(!this.$group)return;a&&this.$group.setProperty("value",this.value)},this.addEventListener("prop.model",function(a){this.$group&&this.$group.setProperty("model",a.value)}),this.$propHandlers.background=function(a){var b=this.$getLayoutNode("main","background",this.$ext);if(a){var c=a.split("|");this.$background=c.concat(["vertical",2,16].slice(c.length-1)),b.style.backgroundImage="url("+this.mediaPath+c[0]+")",b.style.backgroundRepeat="no-repeat"}else b.style.backgroundImage="",b.style.backgroundRepeat="",this.$background=null},this.setValue=function(a){this.setProperty("value",a,!1,!0)},this.getValue=function(){return this.value},this.select=function(){this.setProperty("selected",!0,!1,!0)},this.getGroup=function(){return this.$group},this.$check=function(a){this.$setStyleClass(this.$ext,this.$baseCSSname+"Selected"),this.selected=!0,this.oInput&&(this.oInput.selected=!0),this.doBgSwitch(2)},this.$uncheck=function(){this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Selected"]),this.selected=!1,this.oInput&&(this.oInput.selected=!1),this.doBgSwitch(1)},this.$enable=function(){this.oInput&&(this.oInput.disabled=!1);var a=this;this.$ext.onclick=function(b){b||(b=event);if((b.srcElement||b.target)==this)return;a.dispatchEvent("click",{htmlEvent:b}),a.$group.change(a.value)},this.$ext.onmousedown=function(b){b||(b=event);if((b.srcElement||b.target)==this)return;apf.setStyleClass(this,a.$baseCSSname+"Down")},this.$ext.onmouseover=function(b){b||(b=event);if((b.srcElement||b.target)==this)return;apf.setStyleClass(this,a.$baseCSSname+"Over")},this.$ext.onmouseout=this.$ext.onmouseup=function(){apf.setStyleClass(this,"",[a.$baseCSSname+"Down",a.$baseCSSname+"Over"])}},this.$disable=function(){this.oInput&&(this.oInput.disabled=!0),this.$ext.onclick=this.$ext.onmousedown=this.$ext.onmouseover=this.$ext.onmouseout=this.$ext.onmouseup=null},this.doBgSwitch=function(a){if(this.bgswitch&&(this.bgoptions[1]>=a||a==4)){a==4&&(a=this.bgoptions[1]+1);var b=this.bgoptions[0]=="vertical"?"0 -"+parseInt(this.bgoptions[2])*(a-1)+"px":"-"+parseInt(this.bgoptions[2])*(a-1)+"px 0";this.$getLayoutNode("main","background",this.$ext).style.backgroundPosition=b}},this.$focus=function(){if(!this.$ext)return;if(this.oInput&&this.oInput.disabled)return!1;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus")},this.$blur=function(){if(!this.$ext)return;this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"])},this.addEventListener("keydown",function(a){var b=a.keyCode;if(b==13||b==32)return this.$group.change(this.value),!1;if(b==38){var c=this;while(c&&c.previousSibling){c=c.previousSibling;if(c.localName=="radiobutton"&&!c.disabled&&c.$group==this.$group){c.check(),c.focus();return}}}else if(b==40){var c=this;while(c&&c.nextSibling){c=c.nextSibling;if(c.localName=="radiobutton"&&!c.disabled&&c.$group==this.$group){c.check(),c.focus();return}}}},!0),this.$draw=function(){this.$ext=this.$getExternal(),this.oInput=this.$getLayoutNode("main","input",this.$ext),this.oLabel=this.$getLayoutNode("main","label",this.$ext),this.oIcon=this.$getLayoutNode("main","icon",this.$ext),this.oLabel&&this.oLabel.nodeType!=1&&(this.oLabel=this.oLabel.parentNode),this.$enable()},this.$childProperty="label",this.$loadAml=function(a){this.group?this.$propHandlers.group.call(this,this.group):this.parentNode.localName=="group"&&this.$propHandlers.group.call(this,this.parentNode),this.$group||this.$propHandlers.group.call(this,"group"+this.parentNode.$uniqueId)},this.$destroy=function(){this.$group&&this.$group.$removeRadio(this)}}.call(apf.radiobutton.prototype=new apf.Presentation),apf.aml.setElement("radiobutton",apf.radiobutton),apf.$group=apf.group=function(a,b){this.$init(b||"group",apf.NODE_VISIBLE,a),this.implement(apf.StandardBinding,apf.DataAction);var c=[];this.$supportedProperties.push("value","selectedItem"),this.$propHandlers.value=function(a){for(var b=0;b<c.length;b++)if(c[b].value==a)return this.setProperty("selectedItem",c[b]);return this.setProperty("selectedItem",null)};var d;this.$propHandlers.selectedItem=function(a){d&&d.$uncheck();if(!a)return;a.$check(),d=a;for(var b=0;b<c.length;b++)c[b].setProperty("selectedItem",a)},this.$addRadio=function(a){var b=c.push(a)-1;a.value||a.setProperty("value",b);var d=this;a.addEventListener("prop.value",function(a){this.selected?d.setProperty("value",a.value):d.value==a.value&&this.select()}),this.value&&a.value==this.value?this.setProperty("selectedItem",a):a.selected&&this.setProperty("value",a.value)},this.$removeRadio=function(a){c.remove(a),a.value===a.id&&a.setProperty("value",""),a.selectedItem==a&&this.setProperty("value",null)},this.setValue=function(a){this.setProperty("value",a)},this.getValue=function(){return this.value},this.$draw=function(){this.$ext=this.$int=this.$pHtmlNode}},apf.$group.prototype=new apf.GuiElement,apf.aml.setElement("group",apf.$group),apf.rpc=function(a,b){this.$init(b||"rpc",apf.NODE_HIDDEN,a),this.supportMulticall||(this.multicall=!1),this.stack={},this.urls={},this.$methods={}},function(){function a(a){var b,c;if(typeof a.callback=="string"){b=a.callback.split("."),c=self[b.shift()];while(c&&b.length)c=c[b.shift()]}else c=a.callback;return c||apf.K}this.useHTTP=!0,this.namedArguments=!1,this["route-server"]=apf.host+"/cgi-bin/rpcproxy.cgi",this.autoroute=!1,this.$auth=!1,this.$booleanProperties.multicall=!0,this.$supportedProperties.push("protocol","type","multicall","http-method"),this.$propHandlers["route-server"]=function(a){this.autoroute=a?!0:!1},this.$propHandlers.protocol=function(a){if(!a)return;if(!apf[a])return;var b=this;$setTimeout(function(){b.implement(apf[a])})},this.$propHandlers.type=function(a){this.$useXml=typeof a=="string"&&a.toUpperCase()=="XML"},this.setCallback=function(a,b){this.$methods[a].callback=b},this.setUrl=function(a,b){this.$methods[a].setProperty("url",b)},this.$convertArgs=function(a,b){if(!this.namedArguments)return Array.prototype.slice.call(b);var c=this.$methods[a].names;if(!c||!c.length)return{};var d,e,f,g,h={};for(e=0,f=0,g=c.length;f<g;f++)a=c[f].name,d=c[f].value,d?d=apf.parseExpression(d):(d=b[e++],apf.isNot(d)&&c[f]["default"]&&(d=apf.parseExpression(c[f]["default"]))),d=apf.isTrue(c[f].encoded)?encodeURIComponent(d):d,h[a]=d;return h},this.call=function(b,c,d){function i(a,b,c){c.data=a,b!=apf.SUCCESS?e.call(g,null,b,c):g.isValid&&!g.isValid(c)?e.call(g,null,apf.ERROR,c):e.call(g,g.unserialize(c.data),b,c)}var e,f=this.$methods[b];typeof c[c.length-1]=="function"?(c=Array.prototype.slice.call(c),e=c.pop()):e=a(f),c=this.$convertArgs(b,c);if(this.multicall)return this.stack[this.url]||(this.stack[this.url]=this.getMulticallObject?this.getMulticallObject():[]),this.getSingleCall(b,c,this.stack[this.url]),!0;var g=this,h=d&&d.message?d.message:this.createMessage(f["method-name"]||b,c),j,k=apf.getAbsolutePath(this.baseurl||apf.config.baseurl,this.url),l=apf.extend({callback:i,async:f.async,userdata:f.userdata,nocache:this.nocache===!1?!1:!0,data:h,useXML:this.$useXml||f.type=="xml",caching:f.caching,ignoreOffline:f["ignore-offline"]},d);if(f.auth&&this.$auth)if(j=this.$auth.$credentials)l.username=j.username,l.password=j.password;else return this.$auth.authRequired(function(){j=g.$auth.$credentials,l.username=j.username,l.password=j.password,g.$get(k,l)});return this.$get(k,l)},this.purge=function(a,b,c,d){var e=this.createMessage("multicall",[this.stack[this.url]]),f=apf.getAbsolutePath(this.baseurl||apf.config.baseurl,this.url);if(d){for(var g=[],h=0;h<d.length;h++)g.push(encodeURIComponent(d[h][0])+"="+encodeURIComponent(d[h][1]||""));f=f+(f.match(/\?/)?"&":"?")+g.join("&")}var i=this.$get(f,{callback:a,async:c,userdata:b,nocache:!0,data:e,useXML:this.$useXml});this.stack[this.url]=this.getMulticallObject?this.getMulticallObject():[]},this.revert=function(a){this.stack[a.url]=this.getMulticallObject?this.getMulticallObject():[]},this.getStackLength=function(){return this.stack[this.url]?this.stack[this.url].length:0},this.$addMethod=function(a){if(a.localName!="method")return!1;var b=a.name,c=a.receive||this.receive,d=0,e=a.childNodes.length,f;this[b]=function(){return this.call(b,arguments)},c&&(a.callback=c),this.$methods[b]=a,a.names||(a.names=[]);for(;d<e;d++)f=a.childNodes[d],(f.localName=="param"||f.localName=="variable")&&a.names.push(f);return!0},this.$removeMethod=function(a){var b=a.name;delete this[b],delete this.$methods[b]},this.$setAuth=function(a){this.$auth=a},this.exec=function(a,b,c,d){d||(d={}),d.multicall&&(this.forceMulticall=!0);var e=this.$methods[a];d.userdata&&(e.userdata=d.userdata),this.multicall||(e.callback=c);var f=this.call(a,b,d);if(this.multicall)return this.purge(c,"&@^%!@");if(d.multicall)return this.forceMulticall=!1,this;!this.multicall&&!e.async&&c&&c(f,apf.SUCCESS,{tpModule:this})}}.call(apf.rpc.prototype=new apf.Teleport),apf.config.$inheritProperties.baseurl=1,apf.aml.setElement("rpc",apf.rpc),apf.script=function(){this.$init("script",apf.NODE_HIDDEN)},function(){this.$propHandlers.src=function(a){this.type||(this.type=this.getAttribute("type"));if(!this.type||this.type=="text/javascript")apf.isOpera?$setTimeout(function(){apf.window.loadCodeFile(apf.hostPath+a)},1e3):apf.window.loadCodeFile(apf.getAbsolutePath(apf.hostPath,a));else{var b=this;apf.ajax(a,{callback:function(c,d,e){if(d!=apf.SUCCESS)return apf.console.warn("Could not load script "+a);b.$execute(c)}})}},this.$execute=function(a,b){if(!this.type||this.type=="text/javascript")apf.jsexec(a);else if(this.type.indexOf("livemarkup")>-1||this.type.indexOf("lm")>-1){var c=apf.lm.compile(a,{event:!0,parsecode:!0,funcglobal:!0,nostring:!0});c(b||{})}},this.addEventListener("DOMNodeInserted",function(a){(a.currentTarget.nodeType==3||a.currentTarget.nodeType==4)&&this.$execute(a.currentTarget.nodeValue,apf.isIE&&window.event)}),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){var b=this.childNodes,c=[];for(var d=0,e=b.length;d<e;d++)c[c.length]=b[d].nodeValue;var f=c.join("\n");this.$execute(f)})}.call(apf.script.prototype=new apf.AmlElement),apf.aml.setElement("script",apf.script),apf.scrollbar=function(a,b){this.$init(b||"scrollbar",apf.NODE_VISIBLE,a)},function(){this.realtime=!0,this.visible=!1,this.overflow="scroll",this.position=0,this.$visible=!0,this.$scrollSizeValue=0,this.$stepValue=.03,this.$bigStepValue=.1,this.$timer=null,this.$scrollSizeWait,this.$slideMaxSize,this.$booleanProperties=["showonscroll"],this.addEventListener("focus",function(){this.$viewport.focus()}),this.$propHandlers.showonscroll=function(a){clearTimeout(this.$hideOnScrollTimer),a?this.$ext.style.display="none":(this.$ext.style.display="block",this.show())},this.$propHandlers.overflow=function(a){if(this.showonscroll)return;a=="auto"?(this.$ext.style.display="none",this.$resize()):a=="scroll"&&this.setProperty("visible",!0)},this.$propHandlers["for"]=function(a){if(a){var b=typeof a=="string"?self[a]:a;if(!b||!b.$amlLoaded){var c=this;apf.queue.add("scrollbar"+this.$uniqueId,function(){if(!b){b=typeof a=="string"?self[a]:a;if(!b)throw new Error(apf.formatErrorString(0,c,"Attaching scrollbar to element","Could not find element to attach scrollbar to: "+a))}c.attach(b)})}else this.attach(b)}},this.addEventListener("prop.visible",function(a){this.$updating||(this.$visible=a.value)}),this.attach=function(a){a.nodeFunc?a.hasFeature(apf.__VIRTUALVIEWPORT__)?a=a.$viewport:a=new apf.ViewPortAml(a):a.style&&(a=new apf.ViewPortHtml(a)),this.$attach(a)},this.$attach=function(a){if(!a)return apf.console.warn("Scrollbar could not connect to viewport");var b=this;return this.$viewport=a,this.$viewport.scrollbar!=this&&this.$viewport.setScrollbar(this,function(c){if(b.$viewport!=a)return;b.$update(),b.showonscroll&&(b.scrolling=!0,clearTimeout(b.$hideOnScrollTimer),b.$hideOnScrollControl&&b.$hideOnScrollControl.stop(),apf.setOpacity(b.$ext,1),b.visible?b.$ext.style.display="block":b.show(),b.$update(),b.$hideOnScrollTimer=b.animHideScrollbar(500,function(){b.scrolling=!1}))}),this.$recalc(),this.$update(),this},this.$resize=function(){if(!this.$viewport||!this.$viewport.isVisible())return;this.$recalc(),this.$update(),this.setScrollPosition(this.position,!0)},this.$recalc=function(){this.$viewheight=this.$viewport.getHeight(),this.$scrollSizeheight=this.$viewheight,this.$scrollSizeWait=0,this.$stepValue=this.$viewheight/this.$scrollSizeheight/20,this.$bigStepValue=this.$stepValue*3,this.$slideMaxSize=this.$caret.parentNode[this.$offsetSize]-(this.$btnDown?this.$btnDown[this.$offsetSize]:0)-(this.$btnUp?this.$btnUp[this.$offsetSize]:0)},this.$update=function(){if(this.showonscroll&&!this.$ext.offsetHeight)return;var a=this.$viewport;if(!a||!a.isVisible())return;this.$updating=!0;var b=a.getHeight(),c=a.getScrollHeight();if(b>=c)this.overflow=="scroll"?(this.$caret.style.display="none",this.disable()):this.visible&&this.hide();else{this.overflow=="scroll"?(this.$caret.style.display="block",this.enable()):this.visible||this.show(),this.$slideMaxSize||this.$recalc();if(!this.$slideMaxSize)return;this.$caret.style[this.$size]=Math.max(5,b/c*this.$slideMaxSize)-apf[this.$getDiff](this.$caret)+"px",this.position=a.getScrollTop()/(c-b);var d=this.$btnUp?this.$btnUp[this.$offsetSize]:0;this.$caret.style[this.$pos]=d+(apf[this.$getInner](this.$caret.parentNode)-d*2-this.$caret[this.$offsetSize])*this.position+"px"}this.$updating=!1},this.setScrollPosition=function(a,b){if(a==NaN)return;a>1&&(a=1),a<0&&(a=0),this.position=a;var c=this.$btnUp?this.$btnUp[this.$offsetSize]:0;this.$caret.style[this.$pos]=c+(apf[this.$getInner](this.$caret.parentNode)-c*2-this.$caret[this.$offsetSize])*this.position+"px";if(this.animating||!this.$visible)return;var d=this.$viewport,e=(d.getScrollHeight()-d.getHeight())*a;d.setScrollTop(e,b)},this.animShowScrollbar=function(a,b){var c=this;return setTimeout(function(){c.$ext.style.display="block";if(c.$showOnScrollControl&&c.$showOnScrollControl.state==apf.tween.RUNNING)return;c.$hideOnScrollControl&&c.$hideOnScrollControl.stop(),apf.tween.single(c.$ext,{control:c.$hideOnScrollControl={},type:"fade",from:0,to:1,onfinish:function(){b&&b()}})},a)},this.animHideScrollbar=function(a,b){var c=this;return setTimeout(function(){if(c.$hideOnScrollControl&&c.$hideOnScrollControl.state==apf.tween.RUNNING)return;c.$showOnScrollControl&&c.$showOnScrollControl.stop(),apf.tween.single(c.$ext,{control:c.$hideOnScrollControl={},type:"fade",from:1,to:0,steps:20,onfinish:function(){c.$ext.style.display="none",apf.setOpacity(c.$ext,1),b&&b()}})},a)},this.scrollUp=function(a){if(a>this.$caret[this.$offsetPos])return this.$ext.onmouseup();this.setScrollPosition(this.position+this.$bigStepValue),this.$slideFast&&(this.$slideFast.style[this.$size]=Math.max(1,this.$caret[this.$offsetPos]-this.$btnUp[this.$offsetSize])+"px",this.$slideFast.style[this.$pos]=this.$btnUp[this.$offsetSize]+"px")},this.scrollDown=function(a){if(a<this.$caret[this.$offsetPos]+this.$caret[this.$offsetSize])return this.$ext.onmouseup();this.setScrollPosition(this.position+this.$bigStepValue),this.$slideFast&&(this.$slideFast.style[this.$pos]=this.$caret[this.$offsetPos]+this.$caret[this.$offsetSize]+"px",this.$slideFast.style[this.$size]=Math.max(1,apf[this.$getInner](this.$caret.parentNode)-this.$slideFast[this.$offsetPos]-this.$btnUp[this.$offsetSize])+"px")},this.$draw=function(){this.$getNewContext("main"),this.$ext=this.$getExternal(),this.$caret=this.$getLayoutNode("main","indicator",this.$ext),this.$slideFast=this.$getLayoutNode("main","slidefast",this.$ext),this.$btnUp=this.$getLayoutNode("main","btnup",this.$ext),this.$btnDown=this.$getLayoutNode("main","btndown",this.$ext),this.horizontal=apf.isTrue(this.$getOption("main","horizontal")),this.$windowSize=this.horizontal?"getWindowWidth":"getWindowHeight",this.$offsetSize=this.horizontal?"offsetWidth":"offsetHeight",this.$size=this.horizontal?"width":"height",this.$offsetPos=this.horizontal?"offsetLeft":"offsetTop",this.$pos=this.horizontal?"left":"top",this.$scrollSize=this.horizontal?"scrollWidth":"scrollHeight",this.$scrollPos=this.horizontal?"scrollLeft":"scrollTop",this.$getDiff=this.horizontal?"getWidthDiff":"getHeightDiff",this.$getInner=this.horizontal?"getHtmlInnerWidth":"getHtmlInnerHeight",this.$eventDir=this.horizontal?apf.isIE||apf.isWebkit?"offsetX":"layerX":apf.isIE||apf.isWebkit?"offsetY":"layerY",this.$clientDir=this.horizontal?"clientX":"clientY",this.$posIndex=this.horizontal?0:1,this.$startPos=!1,this.$caret.ondragstart=function(){return!1};var a=this;this.$btnUp&&(this.$btnUp.onmousedown=function(b){if(a.disabled)return;b||(b=event),this.className="btnup btnupdown",clearTimeout(a.$timer),a.setScrollPosition(a.position-a.$stepValue),apf.stopPropagation(b),a.$timer=$setTimeout(function(){a.$timer=setInterval(function(){a.setScrollPosition(a.position-a.$stepValue)},20)},300)},this.$btnUp.onmouseout=this.$btnUp.onmouseup=function(){if(a.disabled)return;this.className="btnup",clearInterval(a.$timer)}),this.$btnDown&&(this.$btnDown.onmousedown=function(b){if(a.disabled)return;b||(b=event),this.className="btndown btndowndown",clearTimeout(a.$timer),a.setScrollPosition(a.position+a.$stepValue),apf.stopPropagation(b),a.$timer=$setTimeout(function(){a.$timer=setInterval(function(){a.setScrollPosition(a.position+a.$stepValue)},20)},300)},this.$btnDown.onmouseout=this.$btnDown.onmouseup=function(){if(a.disabled)return;this.className="btndown",clearInterval(a.$timer)}),this.$caret.onmousedown=function(b){if(a.disabled)return;b||(b=event);var c=b.target||b.srcElement,d=c!=this?[c.offsetLeft,c.offsetTop]:[0,0],e=b[a.$eventDir]+d[a.$posIndex];return a.$startPos=e+(a.$btnUp?a.$btnUp[a.$offsetSize]:0),this.setCapture&&this.setCapture(),a.$setStyleClass(a.$ext,a.$baseCSSname+"Down"),a.dispatchEvent("mousedown",{}),a.dragging=!0,document.onmousemove=function(b){b||(b=event);if(a.$startPos===!1)return!1;var c=a.$btnUp?a.$btnUp[a.$offsetSize]:0,d=c+(b[a.$clientDir]-a.$startPos+(apf.isWebkit?document.body:document.documentElement)[a.$scrollPos]-apf.getAbsolutePosition(a.$caret.parentNode)[a.horizontal?0:1]),e=c;d<e&&(d=e);var f=apf[a.$getInner](a.$caret.parentNode)-c-a.$caret[a.$offsetSize];d>f&&(d=f),a.setScrollPosition((d-e)/(f-e))},document.onmouseup=function(){a.$startPos=!1,a.realtime||a.setScrollPosition(a.position),this.releaseCapture&&this.releaseCapture(),a.$setStyleClass(a.$ext,"",[a.$baseCSSname+"Down"]),a.dispatchEvent("mouseup",{}),a.dragging=!1,document.onmouseup=document.onmousemove=null},apf.stopPropagation(b),!1},this.$ext.onmousedown=function(b){if(a.disabled)return;b||(b=event),clearInterval(a.$timer);var c;b[a.$eventDir]>a.$caret[a.$offsetPos]+a.$caret[a.$offsetSize]?(a.setScrollPosition(a.position+a.$bigStepValue),a.$slideFast&&(a.$slideFast.style.display="block",a.$slideFast.style[a.$pos]=a.$caret[a.$offsetPos]+a.$caret[a.$offsetSize]+"px",a.$slideFast.style[a.$size]=apf[a.$getInner](a.$caret.parentNode)-a.$slideFast[a.$offsetPos]-a.$btnUp[a.$offsetSize]+"px"),c=b[a.$eventDir],a.$timer=$setTimeout(function(){a.$timer=setInterval(function(){a.scrollDown(c,null,null,!0)},20)},300)):b[a.$eventDir]<a.$caret[a.$offsetPos]&&(a.setScrollPosition(a.position-a.$bigStepValue),a.$slideFast&&(a.$slideFast.style.display="block",a.$slideFast.style[a.$pos]=a.$btnUp[a.$offsetSize]+"px",a.$slideFast.style[a.$size]=a.$caret[a.$offsetPos]-a.$btnUp[a.$offsetSize]+"px"),c=b[a.$eventDir],a.$timer=$setTimeout(function(){a.$timer=setInterval(function(){a.scrollUp(c,null,null,!0)},20)},300))},this.$ext.onmouseup=function(){if(a.disabled)return;clearInterval(a.$timer),a.realtime||a.setScrollPosition(a.position),a.$slideFast&&(a.$slideFast.style.display="none")},this.$ext.onmouseover=function(b){a.dispatchEvent("mouseover",{htmlEvent:b||event})},this.$ext.onmouseout=function(b){a.dispatchEvent("mouseout",{htmlEvent:b||event})}},this.$loadAml=function(){this.overflow=="scroll"?this.disable():(this.$caret.style.display="block",this.enable()),this.addEventListener("resize",this.$resize),this.$update()}}.call(apf.scrollbar.prototype=new apf.Presentation),apf.aml.setElement("scrollbar",apf.scrollbar),apf.GuiElement.propHandlers.scrollbar=function(a){if(this.$sharedScrollbar==undefined){var b=a.split(" "),c=b[0],d=b[1]||0,e=b[2]||0,f=b[3]||0,g=this;this.$sharedScrollbar=self[c]||!1;function h(){return k&&apf.isTrue(k.getAttribute("showonscroll"))}var i=this.$container||this.$int||this.$ext,j,k,l;apf.addListener(i,"mousemove",l=function(a){g.$sharedScrollbar||(g.$sharedScrollbar=self[c]),k=g.$sharedScrollbar,k.$addedMouseOut||(apf.addListener(k.$ext,"mouseout",function(a){if(!h())return;apf.findHost(a.fromElement)==k&&apf.findHost(a.toElement)!=k&&(clearTimeout(j),n())}),k.$addedMouseOut=!0);if(!k.$viewport||k.$viewport.amlNode!=g){var b=g.$ext==i?g.$ext.parentNode:g.$ext;b.appendChild(k.$ext),apf.getStyle(b,"position")=="static"&&(b.style.position="relative"),k.setProperty("showonscroll",!0),k.$ext.style.display="block",k.setAttribute("top",d),k.setAttribute("right",e),k.setAttribute("bottom",f),k.setAttribute("for",g),k.$ext.style.display="none",k.dragging=!1,k.$hideOnScrollControl&&k.$hideOnScrollControl.stop()}if(h()&&a){clearTimeout(j);var l=apf.getAbsolutePosition(i),o=i.offsetWidth-(a.clientX-l[0]),p=o<25&&o>e;p&&k.$ext.style.display=="none"||!p&&k.$ext.style.display=="block"?p?m():n():p||(k.showonscroll=!0)}}),this.$sharedScrollbarMove=l;function m(){k.setProperty("showonscroll",!1),k.$ext.style.display="none",j=k.animShowScrollbar(200)}function n(a){if(k.scrolling)return;k.dragging?apf.addListener(document,"mouseup",function(a){var b=apf.findHost(a.target);if(b==k)return;b==g?l(a):n(),apf.removeListener(document,"mouseup",arguments.callee)}):j=k.animHideScrollbar(a||200,function(){k.setProperty("showonscroll",!0)})}apf.addListener(i,"mouseout",function(a){if(!h())return;apf.findHost(a.toElement)!=k&&(clearTimeout(j),n())})}},apf.ViewPortAml=function(a){this.amlNode=a;var b=this,c=function(){b.scrollbar&&b.scrollbar.$update()};a.addEventListener("resize",c),a.hasFeature(apf.__DATABINDING__)&&(a.addEventListener("afterload",c),a.addEventListener("xmlupdate",c)),a.addEventListener("prop.value",c),a.$isTreeArch&&(a.addEventListener("collapse",c),a.addEventListener("expand",c)),a.addEventListener("mousescroll",function(a){b.$mousescroll(a)});var d=b.$getHtmlHost();apf.addListener(d,"scroll",function(){if(b.scrollbar.animating||!b.scrollbar.$visible)return;b.setScrollTop(this.scrollTop)});if("HTML|BODY".indexOf(d.tagName)>-1){var e=d.scrollHeight;setInterval(function(){e!=d.scrollHeight&&(e=d.scrollHeight,b.scrollbar.$recalc(),b.scrollbar.$update())},100)}},function(){this.setScrollbar=function(a,b){this.scrollbar=a,this.amlNode.addEventListener("scroll",b)},this.isVisible=function(){var a=this.$getHtmlHost();return a.offsetHeight||a.offsetWidth?!0:!1},this.focus=function(){this.amlNode.focus&&this.amlNode.$isWindowContainer!==!0&&this.amlNode.focus()},this.getScrollTop=function(){var a=this.$getHtmlHost();return a.scrollTop},this.getScrollLeft=function(){var a=this.$getHtmlHost();return a.scrollLeft},this.getScrollHeight=function(){var a=this.$getHtmlHost();return apf.isIE&&a.lastChild?a.lastChild.offsetTop+a.lastChild.offsetHeight+apf.getBox(apf.getStyle(a,"padding"))[2]+(parseInt(apf.getStyle(a,"marginBottom"))||0):a.scrollHeight},this.getScrollWidth=function(){var a=this.$getHtmlHost();return apf.isIE&&a.lastChild?a.lastChild.offsetLeft+a.lastChild.offsetWidth+apf.getBox(apf.getStyle(a,"padding"))[1]+(parseInt(apf.getStyle(a,"marginRight"))||0):a.scrollWidth},this.getHeight=function(){var a=this.$getHtmlHost();return a.tagName=="HTML"||a.tagName=="BODY"?apf.getWindowHeight():apf.getHtmlInnerHeight(a)},this.getWidth=function(){var a=this.$getHtmlHost();return a.tagName=="HTML"||a.tagName=="BODY"?apf.getWindowHeight():apf.getHtmlInnerWidth(a)},this.setScrollTop=function(a,b,c){var d=this.$getHtmlHost();d.scrollTop=a,b||this.amlNode.dispatchEvent("scroll",{direction:"vertical",byUser:c,viewport:this,scrollbar:this.scrollbar})},this.setScrollLeft=function(a,b,c){var d=this.$getHtmlHost();d.scrollLeft=a,b||this.amlNode.dispatchEvent("scroll",{direction:"horizontal",byUser:c,viewport:this,scrollbar:this.scrollbar})},this.$getHtmlHost=function(){var a=this.amlNode.$int||this.amlNode.$container;return a.tagName=="BODY"||a.tagName=="HTML"?apf.isSafari||apf.isChrome?document.body:a.parentNode:a},this.$mousescroll=function(a){if(this.scrollbar.horizontal)return;if(a.returnValue===!1)return;var b=this.$getHtmlHost(),c=this.scrollbar,d=this.getScrollHeight()-this.getHeight();if(d){if(b[c.$scrollPos]==0&&a.delta>0){if(this.$lastScrollState===0)return;setTimeout(function(){this.$lastScrollState=0},300)}else if(b[c.$scrollPos]==this.getScrollHeight()-b[c.$offsetSize]&&a.delta<0){if(this.$lastScrollState===1)return;setTimeout(function(){this.$lastScrollState=1},300)}delete this.$lastScrollState,this.setScrollTop(this.getScrollTop()+ -1*a.delta*Math.min(45,this.getHeight()/10),!1,!0),a.preventDefault()}}}.call(apf.ViewPortAml.prototype),apf.ViewPortHtml=function(a){this.$getHtmlHost=function(){return a};var b=this;a=a.tagName=="BODY"||a.tagName=="HTML"?apf.isSafari||apf.isChrome?document.body:a.parentNode:a,apf.addEventListener("mousescroll",function(c){(a==c.target||a==document.documentElement&&c.target==document.body)&&b.$mousescroll(c)}),apf.addListener(a,"scroll",function(){b.setScrollTop(this.scrollTop)});if("HTML|BODY".indexOf(a.tagName)>-1){var c=a.scrollHeight;setInterval(function(){c!=a.scrollHeight&&(c=a.scrollHeight,b.scrollbar.$recalc(),b.scrollbar.$update())},100)}this.amlNode=(new apf.Class).$init()},apf.ViewPortHtml.prototype=apf.ViewPortAml.prototype,apf.skin=function(a,b){this.$init(b||"skin",apf.NODE_HIDDEN,a)},apf.aml.setElement("skin",apf.skin),function(){function a(a){if(!a.ownerDocument.documentElement)return!1;var b=a.ownerDocument.documentElement.attributes;for(var c=!1,d=0;d<b.length;d++)if(b[d].nodeValue==apf.ns.aml){c=!0;break}return c}function b(a){var b=this.ownerDocument.$domParser;apf.skins.$first||(apf.skins.$first=this);var c=this.attributes.getNamedItem("defer");(!c||!apf.isTrue(c.nodeValue))&&b.$pauseParsing.apply(b,this.$parseContext=b.$parseContext||[this.ownerDocument.documentElement]),d.call(this,a)}function c(a){a&&apf.skins.Init(a,this,this.$path);if(!this.defer){var b=this.ownerDocument.$domParser;b.$continueParsing(this.$parseContext[0])}}function d(a){var b=this;apf.getData(a,{callback:function(d,e,f){if(e!=apf.SUCCESS){var g=new Error(apf.formatErrorString(1007,b,"Loading skin file","Could not load skin file '"+(a||b.src)+"'\nReason: "+f.message));if(f.tpModule.retryTimeout(f,e,null,g)===!0)return!0;throw g}d=d.replace(/\<\!DOCTYPE[^>]*>/,"").replace(/^[\r\n\s]*/,"").replace(/xmlns\=\"[^"]*\"/g,"");if(!d)throw new Error(apf.formatErrorString(0,b,"Loading skin","Empty skin file. Maybe the file does not exist?",b));var h=apf.getXml(d);if(!h)throw new Error(apf.formatErrorString(0,b,"Loading skin","Could not parse skin. Maybe the file does not exist?",b));h.setAttribute("filename",f.url),c.call(b,h)},async:!0,ignoreOffline:!0})}this.$parsePrio="002",this.$includesRemaining=0,this.$propHandlers.src=function(a){if(a.trim().charAt(0)=="<"){apf.skins.Init(apf.getXml(a),this,this.$path);return}this.$path=apf.getAbsolutePath(apf.hostPath,a),b.call(this,this.$path)},this.$propHandlers.name=function(a){this.attributes.getNamedItem("src")||(this.$path=apf.getAbsolutePath(apf.hostPath,a)+"/index.xml",b.call(this,this.$path))},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){if(this.src||this.name)return;apf.skins.Init(this.$aml||this)})}.call(apf.skin.prototype=new apf.AmlElement),apf.smartbinding=function(a,b){this.$init(b||"smartbinding",apf.NODE_HIDDEN,a),this.$bindNodes={}},function(){this.$supportedProperties=["bindings","actions","model"],this.$handlePropSet=function(a,b,c){switch(a){case"model":typeof b=="string"&&(b=apf.nameserver.get("model",b)),this.model=apf.nameserver.register("model",this.name,b);var d;for(var e in this.$bindNodes)d=this.$bindNodes[e],this.model.unregister(d),this.model.register(d,this.$modelXpath[d.getHost?d.getHost().$uniqueId:d.$uniqueId]||this.modelBaseXpath);break;case"bindings":this.$bindings&&this.remove(this.$bindings),this.$bindings=typeof b=="object"?b:apf.nameserver.lookup("bindings",b),this.add(this.$bindings);break;case"actions":this.$actions&&this.remove(this.$actions),this.$actions=typeof b=="object"?b:apf.nameserver.lookup("actions",b),this.add(this.$actions)}this[a]=b},this.add=function(a){for(var b in this.$bindNodes)a.register(this.$bindNodes[b]);this["$"+a.localName]=a},this.remove=function(a){for(var b in this.$bindNodes)a.unregister(this.$bindNodes[b])},this.register=function(a){this.$bindNodes[a.$uniqueId]=a,this.$bindings&&this.$bindings.register(a),this.$actions&&this.$actions.register(a),this.$model&&this.$model.register(a)},this.unregister=function(a){this.$bindNodes[a.$uniqueId]=null,delete this.$bindNodes[a.$uniqueId],this.$bindings&&this.$bindings.unregister(a),this.$actions&&this.$actions.unregister(a),this.$model&&this.$model.unregister(a)},this.load=function(a){(new apf.model).register(this).load(a)},this.clear=function(a){},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.parentNode.hasFeature(apf.__DATABINDING__)&&this.register(this.parentNode)})}.call(apf.smartbinding.prototype=new apf.AmlElement),apf.aml.setElement("smartbinding",apf.smartbinding),apf.source=function(a,b){this.$init(b||"source",apf.NODE_HIDDEN,a)},function(){this.$supportedProperties.push("src","type"),this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.parentNode.$addSource&&this.parentNode.$addSource(this)})}.call(apf.source.prototype=new apf.AmlElement),apf.aml.setElement("source",apf.source),apf.spinner=function(a,b){this.$init(b||"spinner",apf.NODE_VISIBLE,a),this.max=64e3,this.min=-64e3,this.focused=!1,this.value=0,this.realtime=!1},function(){this.implement(apf.DataAction),this.$supportedProperties.push("width","value","max","min","caption","realtime"),this.$booleanProperties.realtime=!0,this.$propHandlers.value=function(a){a=parseInt(a)||0,this.value=this.oInput.value=a>this.max?this.max:a<this.min?this.min:a},this.$propHandlers.min=function(a){if(!(a=parseInt(a)))return;this.min=a,a>this.value&&this.change(a)},this.$propHandlers.max=function(a){if(!(a=parseInt(a)))return;this.max=a,a<this.value&&this.change(a)},this.setValue=function(a){this.setProperty("value",a,!1,!0)},this.getValue=function(){return this.value},this.increment=function(){this.change(parseInt(this.oInput.value)+1)},this.decrement=function(){this.change(parseInt(this.oInput.value)-1)},this.$enable=function(){this.oInput.disabled=!1,this.$setStyleClass(this.oInput,"",["inputDisabled"])},this.$disable=function(){this.oInput.disabled=!0,this.$setStyleClass(this.oInput,"inputDisabled")},this.$focus=function(a){if(!this.$ext||this.focused)return;this.focused=!0,this.$setStyleClass(this.oInput,"focus"),this.$setStyleClass(this.$buttonPlus,"plusFocus"),this.$setStyleClass(this.$buttonMinus,"minusFocus"),this.oLeft&&this.$setStyleClass(this.oLeft,"leftFocus")},this.$blur=function(a){if(!this.$ext&&!this.focused)return;this.$setStyleClass(this.oInput,"",["focus"]),this.$setStyleClass(this.$buttonPlus,"",["plusFocus"]),this.$setStyleClass(this.$buttonMinus,"",["minusFocus"]),this.oLeft&&this.$setStyleClass(this.oLeft,"".leftFocus),this.setValue(this.oInput.value),this.focused=!1},this.addEventListener("keydown",function(a){var b=a.keyCode,c=b<8||b>9&&b<37&&b!==12||b>40&&b<46||b>46&&b<48||b>57&&b<96||b>105&&b<109&&b!==107||b>109&&b!==189;if(c)return!1;switch(b){case 38:this.increment();break;case 40:this.decrement()}},!0),this.addEventListener("keyup",function(a){},!0),this.increment=function(){this.change(parseInt(this.oInput.value)+1)},this.decrement=function(){this.change(parseInt(this.oInput.value)-1)},this.$draw=function(){var a=this;this.$ext=this.$getExternal(null,null,function(a){a.setAttribute("onmousedown",'if (!this.host.disabled)                     this.host.dispatchEvent("mousedown", {htmlEvent : event});'),a.setAttribute("onmouseup",'if (!this.host.disabled)                     this.host.dispatchEvent("mouseup", {htmlEvent : event});'),a.setAttribute("onclick",'if (!this.host.disabled)                     this.host.dispatchEvent("click", {htmlEvent : event});')}),this.$int=this.$getLayoutNode("main","container",this.$ext),this.oInput=this.$getLayoutNode("main","input",this.$ext),this.$buttonPlus=this.$getLayoutNode("main","buttonplus",this.$ext),this.$buttonMinus=this.$getLayoutNode("main","buttonminus",this.$ext),this.oLeft=this.$getLayoutNode("main","left",this.$ext);var b,c=!document.compatMode||document.compatMode=="CSS1Compat"?document.html:document.body,d=0;this.oInput.value=this.value,this.oInput.onmousedown=function(d){function n(a){a=a||window.event;var b=a.pageX||a.clientX+(c?c.scrollLeft:0),d=a.pageY||a.clientY+(c?c.scrollTop:0),e=h-d;if(d>i&&b>j&&d<i+l&&b<j+k){g=0;return}g=Math.pow(Math.min(200,Math.abs(e))/10,2)/10,e<0&&(g=-1*g)}if(a.disabled)return;d=d||window.event,clearTimeout(b);var e,f=parseInt(this.value)||0,g=0,h=d.clientY,i=a.$int.offsetTop,j=a.$int.offsetLeft,k=a.$int.offsetWidth,l=a.$int.offsetHeight,m=function(){clearTimeout(b),b=$setTimeout(m,10);if(!g)return;e=f+g,e<=a.max&&e>=a.min?(f+=g,f=Math.round(f),a.oInput.value=f,a.realtime&&a.change(f)):a.oInput.value=g<0?a.min:a.max};m(),document.onmousemove=n,document.onmouseup=function(c){clearTimeout(b);var d=parseInt(a.oInput.value);d!=a.value&&a.change(d),document.onmousemove=document.onmouseup=null}};var e=!1;this.$buttonPlus.onmousedown=function(c){if(a.disabled)return;c=c||window.event,e=!0;var f=(parseInt(a.oInput.value)||0)+1,g=function(){clearTimeout(b),b=$setTimeout(g,50),d++,f+=Math.pow(Math.min(200,d)/10,2)/10,f=Math.round(f),a.oInput.value=f<=a.max?f:a.max,a.realtime&&a.change(f<=a.max?f:a.max)};apf.setStyleClass(this,"plusDown",["plusHover"]),g()},this.$buttonMinus.onmousedown=function(c){if(a.disabled)return;c=c||window.event,e=!0;var f=(parseInt(a.oInput.value)||0)-1,g=function(){clearTimeout(b),b=$setTimeout(g,50),d++,f-=Math.pow(Math.min(200,d)/10,2)/10,f=Math.round(f),a.oInput.value=f>=a.min?f:a.min,a.realtime&&a.change(f>=a.min?f:a.min)};apf.setStyleClass(this,"minusDown",["minusHover"]),g()},this.$buttonMinus.onmouseout=function(c){if(a.disabled)return;clearTimeout(b),d=0;var e=parseInt(a.oInput.value);e!=a.value&&a.change(e),apf.setStyleClass(this,"",["minusHover"]),a.focused||a.$blur(c)},this.$buttonPlus.onmouseout=function(c){if(a.disabled)return;clearTimeout(b),d=0;var e=parseInt(a.oInput.value);e!=a.value&&a.change(e),apf.setStyleClass(this,"",["plusHover"]),a.focused||a.$blur(c)},this.$buttonMinus.onmouseover=function(b){if(a.disabled)return;apf.setStyleClass(this,"minusHover")},this.$buttonPlus.onmouseover=function(b){if(a.disabled)return;apf.setStyleClass(this,"plusHover")},this.$buttonPlus.onmouseup=function(c){if(a.disabled)return;c=c||event,apf.cancelBubble(c,this),apf.setStyleClass(this,"plusHover",["plusDown"]),clearTimeout(b),d=0;var f=parseInt(a.oInput.value);e?e=!1:(f++,a.oInput.value=f),f!=a.value&&a.change(f)},this.$buttonMinus.onmouseup=function(c){if(a.disabled)return;c=c||event,apf.cancelBubble(c,this),apf.setStyleClass(this,"minusHover",["minusDown"]),clearTimeout(b),d=0;var f=parseInt(a.oInput.value);e?e=!1:(f--,a.oInput.value=f),f!=a.value&&a.change(f)},this.oInput.onselectstart=function(a){a=a||event,a.cancelBubble=!0},this.oInput.host=this},this.$destroy=function(){this.oInput.onkeypress=this.oInput.onmousedown=this.oInput.onkeydown=this.oInput.onkeyup=this.oInput.onselectstart=this.$buttonPlus.onmouseover=this.$buttonPlus.onmouseout=this.$buttonPlus.onmousedown=this.$buttonPlus.onmouseup=this.$buttonMinus.onmouseover=this.$buttonMinus.onmouseout=this.$buttonMinus.onmousedown=this.$buttonMinus.onmouseup=null}}.call(apf.spinner.prototype=new apf.StandardBinding),apf.aml.setElement("spinner",apf.spinner),apf.splitbutton=function(a,b){this.$init(b||"splitbutton",apf.NODE_VISIBLE,a)},function(){this.$focussable=!1,this.$propHandlers.caption=function(a){this.$button1.setProperty("caption",a)},this.$propHandlers.icon=function(a){this.$button1.setProperty("icon",a)},this.$propHandlers.tooltip=function(a){this.$button1.setProperty("tooltip",a)},this.$propHandlers.hotkey=function(a){this.$button1.setProperty("hotkey",a)},this.$propHandlers.disabled=function(a){this.$button1.setProperty("disabled",a),this.$button2.setProperty("disabled",a)},this.$propHandlers.submenu=function(a){this.$button2.setProperty("submenu",a);var b=this;this.$button2.addEventListener("mousedown",function(){self[a].$splitInited||(self[a].addEventListener("display",function(){var a=this.opener.parentNode;this.$ext.style.marginLeft="-"+a.$button1.$ext.offsetWidth+"px"}),self[a].$splitInited=!0),this.removeEventListener("mousedown",arguments.callee)})},this.$draw=function(){var a=this;this.$ext=this.$pHtmlNode.appendChild(document.createElement("div"));var b=this.getAttribute("skin")||this.localName;this.$button1=new apf.button({htmlNode:this.$ext,parentNode:this,skin:b,"class":"main",onmouseover:function(){apf.setStyleClass(this.$ext,"primary"),a.$button2.$setState("Over",{})},onmouseout:function(){apf.setStyleClass(this.$ext,"",["primary"]),a.$button2.$setState("Out",{})},onclick:function(b){a.dispatchEvent("click")}}),this.$button2=new apf.button({htmlNode:this.$ext,parentNode:this,skin:b,"class":"arrow",onmouseover:function(){apf.setStyleClass(this.$ext,"primary"),a.$button1.$setState("Over",{})},onmouseout:function(){a.$button2.value?(apf.setStyleClass(this.$ext,"primary"),a.$button1.$setState("Over",{})):(apf.setStyleClass(this.$ext,"",["primary"]),a.$button1.$setState("Out",{}))}})},this.$loadAml=function(a){}}.call(apf.splitbutton.prototype=new apf.GuiElement),apf.aml.setElement("splitbutton",apf.splitbutton),apf.splitter=function(a,b){this.$init(b||"splitter",apf.NODE_VISIBLE,a)},function(){this.minwidth=0,this.minheight=0,this.$scale=0,this.$focussable=!1,this.$splitter=!0,this.$booleanProperties.realtime=!0,this.$propHandlers.realtime=function(a){this.$setStyleClass(this.$ext,a&&this.$baseCSSname+"Realtime"||"",[this.$baseCSSname+"Realtime"])},this.$propHandlers.scale=function(a){this.$scale=a=="left"||a=="top"?1:a=="right"||"bottom "?2:0},this.$propHandlers.parent=function(a){this.$parent=typeof a=="object"?a:self[a]},this.$propHandlers.type=function(a){this.$setStyleClass(this.$ext,a,[a=="horizontal"?"vertical":"horizontal"]),a=="vertical"?this.$setStyleClass(this.$ext,"w-resize",["n-resize"]):this.$setStyleClass(this.$ext,"n-resize",["w-resize"]),a=="horizontal"?this.$info={pos:"top",opos:"left",size:"width",osize:"height",offsetPos:"offsetTop",offsetSize:"offsetHeight",oOffsetPos:"offsetLeft",oOffsetSize:"offsetWidth",clientPos:"clientY",d1:1,d2:0,x1:0,x2:2}:this.$info={pos:"left",opos:"top",size:"height",osize:"width",offsetPos:"offsetLeft",offsetSize:"offsetWidth",oOffsetPos:"offsetTop",oOffsetSize:"offsetHeight",clientPos:"clientX",d1:0,d2:1,x1:3,x2:1}},this.addEventListener("DOMNodeInserted",function(a){if(a.currentTarget!=this)return;this.init()}),this.update=function(newPos,finalPass){with(this.$info){var max=this.$previous?this.$previous.$ext[offsetSize]+this.$next.$ext[offsetSize]:this.parentNode.getWidth(),method=finalPass?"setAttribute":"setProperty";apf.hasFlexibleBox&&(newPos-=this.$previous?apf.getAbsolutePosition(this.$previous.$ext,this.parentNode.$int)[d1]:0),this.$previous&&this.$next&&(this.$previous.flex||this.$previous.flex===0)&&(this.$next.flex||this.$next.flex===0)?(!finalPass&&!this.realtime&&(newPos-=this.$ext[offsetSize]),(!this.$scale||this.$scale==1)&&this.$previous[method]("flex",newPos),(!this.$scale||this.$scale==2)&&this.$next[method]("flex",this.$totalFlex-newPos)):(this.$next&&!this.$next.flex&&(!this.$scale||this.$scale==2)&&this.$next[method](osize,max-newPos),this.$previous&&!this.$previous.flex&&(!this.$scale||this.$scale==1)&&this.$previous[method](osize,newPos))}apf.hasSingleResizeEvent&&apf.layout.forceResize(this.$ext.parentNode)},this.$setSiblings=function(){this.$previous=this.previousSibling;while(this.$previous&&(this.$previous.nodeType!=1||this.$previous.visible===!1||this.$previous.nodeFunc!=apf.NODE_VISIBLE))this.$previous=this.$previous.previousSibling;this.$next=this.nextSibling;while(this.$next&&(this.$next.nodeType!=1||this.$next.visible===!1||this.$next.nodeFunc!=apf.NODE_VISIBLE))this.$next=this.$next.nextSibling},this.init=function(size,refNode,oItem){this.$setSiblings(),this.$thickness=null,this.parentNode&&this.parentNode.$box&&(this.setProperty("type",this.parentNode.localName=="vbox"?"horizontal":"vertical"),this.$thickness=parseInt(this.parentNode.padding));if(!this.$previous||!this.$next)return this;with(this.$info){var diff=apf.getDiff(this.$ext);if(!this.parentNode.$box){var iSize=Math.max(this.$previous.$ext[offsetSize],this.$next.$ext[offsetSize]);this.$ext.style[size]=iSize-diff[d1]+"px"}var iThick=this[osize]=this.$thickness||this.$next[oOffsetPos]-this.$previous[oOffsetPos]-this.$previous[oOffsetSize];this.$ext.style[osize]=iThick-diff[d2]+"px"}return this},this.$draw=function(){this.$ext=this.$getExternal();var _self=this;this.$ext.onmousedown=function(e){e||(e=event),apf.dragMode=!0,_self.$setSiblings();var changedPosition,pHtml=_self.parentNode.$int,diff=0;"absolute|fixed|relative".indexOf(apf.getStyle(pHtml,"position"))==-1&&(pHtml.style.position="relative",changedPosition=!0),_self.$totalFlex=0;with(_self.$info){if(_self.$parent)if(!_self.$previous){var posNext=apf.getAbsolutePosition(_self.$next.$ext,_self.parentNode.$int),wd=_self.$parent.getWidth();if(_self.$scale==2){var max=posNext[d1]+_self.$next.$ext[offsetSize]-this[offsetSize];diff=_self.parentNode.$int[offsetSize]-max;var min=max-wd-diff}}else!!_self.$next;else{if(_self.$previous)var posPrev=apf.getAbsolutePosition(_self.$previous.$ext,_self.parentNode.$int),min=_self.$scale?0:posPrev[d1]||0;if(_self.$next)var posNext=apf.getAbsolutePosition(_self.$next.$ext,_self.parentNode.$int),max=posNext[d1]+_self.$next.$ext[offsetSize]-this[offsetSize]}if(_self.$previous&&_self.$next){if((_self.$previous.flex||_self.$previous.flex===0)&&(_self.$next.flex||_self.$next.flex===0)){var set=[],nodes=_self.parentNode.childNodes,padding=0;for(var node,i=0,l=nodes.length;i<l;i++){if((node=nodes[i]).visible===!1||node.nodeFunc!=apf.NODE_VISIBLE||node.$splitter)continue;node.flex&&set.push(node,node.$ext[offsetSize]+(apf.hasFlexibleBox&&!_self.realtime&&node==_self.$previous?2*_self.parentNode.padding:0))}for(var i=0,l=set.length;i<l;i+=2)set[i].setAttribute("flex",set[i+1])}_self.$totalFlex+=_self.$next.flex+_self.$previous.flex}var startPos,startOffset;if(apf.hasFlexibleBox){var coords=apf.getAbsolutePosition(this);startPos=e[clientPos]-coords[d1];if(!_self.realtime){if(_self.$previous.flex&&!_self.$next.flex){var mBox=apf.getBox(_self.$next.margin);mBox[x1]=_self.parentNode.padding,_self.$next.$ext.style.margin=mBox.join("px ")+"px"}else{var mBox=apf.getBox(_self.$previous.margin);mBox[x2]=_self.parentNode.padding,_self.$previous.$ext.style.margin=mBox.join("px ")+"px"}var diff=apf.getDiff(this);this.style.left=coords[0]+"px",this.style.top=coords[1]+"px",this.style.width=this.offsetWidth-diff[0]+"px",this.style.height=this.offsetHeight-diff[1]+"px",this.style.position="absolute"}}else{var coords=apf.getAbsolutePosition(this.offsetParent);startOffset=apf.getAbsolutePosition(_self.$previous.$ext)[d1],startPos=e[clientPos]-coords[d1],_self.realtime||(this.style.left="0px",this.style.top="0px",this.style.position="relative"),min=-1e3}}apf.plane.show(this),_self.$setStyleClass(this,_self.$baseCSSname+"Moving"),_self.$setStyleClass(document.body,_self.type=="vertical"?"w-resize":"n-resize",[_self.type=="vertical"?"n-resize":"w-resize"]),_self.dispatchEvent("dragstart"),document.onmouseup=function(e){e||(e=event);with(_self.$info){var newPos;if(e[clientPos]>=0){var coords=apf.getAbsolutePosition(_self.$ext.offsetParent);newPos=Math.min(max,Math.max(min,e[clientPos]-coords[d1]-(apf.hasFlexibleBox?startPos:startOffset)))+diff}}_self.$setStyleClass(_self.$ext,"",[_self.$baseCSSname+"Moving"]),_self.$setStyleClass(document.body,"",["n-resize","w-resize"]),changedPosition&&(pHtml.style.position=""),apf.hasFlexibleBox&&!_self.realtime&&((_self.$previous.flex&&!_self.$next.flex?_self.$next:_self.$previous).$ext.style.margin=apf.getBox(_self.$previous.margin).join("px ")+"px"),newPos&&_self.update(newPos,!0),apf.plane.hide(),_self.realtime||(_self.$ext.style.left="",_self.$ext.style.top="",_self.$ext.style[_self.$info.size]="",_self.$ext.style.position=""),_self.dispatchEvent("dragdrop"),document.onmouseup=document.onmousemove=null,apf.dragMode=!1},document.onmousemove=function(e){e||(e=event);with(_self.$info){var newPos;if(e[clientPos]>=0){var coords=apf.getAbsolutePosition(_self.$ext.offsetParent);newPos=Math.min(max,Math.max(min,e[clientPos]-coords[d1]-(apf.hasFlexibleBox||!_self.realtime?startPos:startOffset)))+diff,_self.realtime?_self.update(newPos):_self.$ext.style[pos]=newPos+"px"}}apf.stopEvent(e),_self.dispatchEvent("dragmove")}},apf.queue.add("splitter"+this.$uniqueId,function(){_self.init()})},this.$loadAml=function(a){this.realtime!==!1&&this.$propHandlers.realtime.call(this,this.realtime=!0)}}.call(apf.splitter.prototype=new apf.Presentation),apf.aml.setElement("splitter",apf.splitter),apf.stateGroup=function(){this.$init("state-group",apf.NODE_HIDDEN)},apf.aml.setElement("state-group",apf.stateGroup),function(){this.$handlePropSet=function(a,b,c){if(a=="id")return;var d,e=this.childNodes;for(var f=0,g=e.length;f<g;f++){d=e[f];if(d.nodeType!=1||d.localName!="state")continue;if(!d[a]||d.$inheritProperties[a]==2)d.$inheritProperties[a]=2,d.setProperty(a,b)}},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.id||(this.id="stategroup"+this.$uniqueId);var b=this.childNodes;for(var c=0,d=b.length;c<d;c++)b[c].setProperty("group",this.id)})}.call(apf.stateGroup.prototype=new apf.AmlElement),apf.StateServer={states:{},groups:{},locs:{},removeGroup:function(a,b){this.groups[a].remove(b),this.groups[a].length||(self[a]&&(self[a].destroy(),self[a]=null),delete this.groups[a])},addGroup:function(a,b,c){if(!this.groups[a]){this.groups[a]=[];var d=new apf.state({id:a});d.parentNode=c,d.toggle=function(){for(var b=0,c=0;c<apf.StateServer.groups[a].length;c++)if(apf.StateServer.groups[a][c].active){b=c+1;break}apf.StateServer.groups[a][b==apf.StateServer.groups[a].length?0:b].activate()},this.groups[a].pState=self[a]=d}return b&&this.groups[a].push(b),this.groups[a].pState},removeState:function(a){delete this.states[a.name]},addState:function(a){this.states[a.name]=a}},apf.state=function(a,b){this.$init(b||"state",apf.NODE_HIDDEN,a),this.$signalElements=[],this.$groupAdded={},this.$locationAdded=""},function(){this.$supportedProperties.push("active"),this.$booleanProperties.active=!0,this.$propHandlers.active=function(a){if(apf.isTrue(a)){if(this.group){var b=apf.StateServer.groups[this.group];b||(apf.StateServer.addGroup(this.group,this),b=apf.StateServer.groups[this.group]);for(var c=0;c<b.length;c++)b[c]!=this&&b[c].active!==!1&&b[c].deactivate()}var d=this.$signalElements;for(var c=0;c<d.length;c++){if(!self[d[c][0]]||!self[d[c][0]].setProperty)continue;self[d[c][0]].setProperty(d[c][1],this[d[c].join(".")])}if(this.group){var e=this.attributes;for(var c=0;c<e.length;c++){if(e[c].nodeName.match(/^on|^(?:group|id)$|^.*\..*$/))continue;self[this.group].setProperty(e[c].nodeName,e[c].nodeValue)}apf.StateServer.groups[this.group].pState.dispatchEvent("change")}this.dispatchEvent("activate")}else this.setProperty("active",!1),this.dispatchEvent("deactivate")},this.setValue=function(a){this.active=9999,this.setProperty("active",a,!1,!0)},this.activate=function(){this.active=9999,this.setProperty("active",!0,!1,!0)},this.deactivate=function(){this.setProperty("active",!1,!1,!0)},this.$propHandlers.group=function(a){a?(apf.StateServer.addGroup(a,this),this.$groupAdded={value:a,elState:this}):(apf.StateServer.removeGroup(this.$groupAdded.value,this.$groupAdded.elState),this.$groupAdded={})},this.$propHandlers.location=function(a){a?(apf.StateServer.locs[a]=this,this.$locationAdded=a):(delete apf.StateServer.locs[this.$locationAdded],this.$locationAdded="")},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){apf.StateServer.addState(this);var b=this.attributes;for(var c,d=0;d<b.length;d++)c=b[d].nodeName.split("."),c.length==2&&this.$signalElements.push(c)}),this.addEventListener("DOMNodeRemovedFromDocument",function(){this.$signalElements=null,apf.StateServer.removeState(this),this.group&&apf.StateServer.removeGroup(this.group,this)})}.call(apf.state.prototype=new apf.AmlElement),apf.aml.setElement("state",apf.state),apf["switch"]=function(a,b){this.$hasButtons=!1,this.$init(b||"switch",apf.NODE_VISIBLE,a)},apf.pages=function(a,b){this.$hasButtons=!1,this.$init(b||"pages",apf.NODE_VISIBLE,a),this.$focussable=!1},apf.tab=function(a,b){this.$hasButtons=!0,this.$init(b||"tab",apf.NODE_VISIBLE,a)},function(){this.$focussable=apf.KEYBOARD,this.$draw=function(a){this.$ext=this.$getExternal(),this.$loadChildren()}}.call(apf.tab.prototype=new apf.BaseTab),apf["switch"].prototype=apf.pages.prototype=apf.tab.prototype,apf.aml.setElement("switch",apf["switch"]),apf.aml.setElement("pages",apf.pages),apf.aml.setElement("tab",apf.tab),apf.table=function(a,b){this.$init(b||"table",apf.NODE_VISIBLE,a)},function(){function a(a){var b=a.parentNode||this.parentNode;if(a.sync||a.value&&!this.$altExt||!a.value&&this.$altExt){var c=b.childNodes,d=apf.getArrayFromNodelist(b.$tbody.getElementsByTagName("td")),e=b.$tbody.getElementsByTagName("tr"),f=[],g=1,h,i,j=b.$columns.length,k=b.$columns.length,l;for(var m,n,o,p=c.length,q=0;q<p;q++){if((m=c[q]).visible===!1)continue;n=m.$altExt=o=d[k++];if(!n)break;e[g]||b.$tbody.appendChild(document.createElement("tr")),e[g].appendChild(n),n.appendChild(m.$ext),n.setAttribute("colspan",h=Math.min(j-(f[0]||0),parseInt(m.colspan||m.span||1))),n.setAttribute("rowspan",i=parseInt(m.rowspan||1)),f[0]||(f[0]=0),f[0]+=h;if(i>1)for(var r=1;r<i;r++)f[r]||(f[r]=0),f[r]+=h;f[0]>=j?(l=!0,f.shift(),g++):l=!1,n.style.padding="0px "+(l?0:b.padding)+"px "+(q==p-1?0:b.padding)+"px 0px"}var s=e[e.length-1].getElementsByTagName("td");for(q=0,il=s.length;q<il;q++)s[q].style.padding="0 "+(q==il-1?0:b.padding)+"px 0 0";for(;k<d.length;k++)d[k].parentNode.removeChild(d[k]);if(a.sync)return;a.value?b.$addTd(c[p-1]):this.$altExt=null}}this.$focussable=!1,this.$useLateDom=!0,this.$layout=!0,this.columns=null,this.padding=2,this.$edge=[5,5,5,5],this.cellheight=19,this.$supportedProperties.push("columns","padding","edge","cellheight","span"),this.$propHandlers.columns=function(b){if(!b.match(/^((?:\d+\%?|\*)\s*(?:,\s*|\s*$))+$/))return;var c,d=this.$columns=b.splitSafe(","),e=0,f=this.$table.getElementsByTagName("col");if(f.length)for(var g,h=0,i=Math.min(f.length,d.length);h<i;h++)f[h].style.width=(g=d[h]).indexOf("%")>-1?g:g+"px",e+=parseInt(g);var j=f.length-d.length;if(j>0)for(var h=f.length-j;h<f.length;h++)f[h].parentNode.removeChild(f[h]);else if(j<0)for(var h=d.length+j;h<d.length;h++)c=this.$table.appendChild(document.createElement("col")),c.style.width=(g=d[h]).indexOf("%")>-1?g:g+"px",c.setAttribute("valign","top"),e+=parseInt(g);this.$table.style.width=String(b).indexOf("%")>-1?"auto":e+(d.length-1)*this.padding+this.$edge[0]+this.$edge[2]+"px";var k=this.$tbody.firstChild.getElementsByTagName("td");for(var h=k.length-1;h>=0;h--)k[h].parentNode.removeChild(k[h]);for(var g,l,h=0;h<d.length;h++)l=this.$tbody.firstChild.appendChild(document.createElement("td")),l.style.width=(g=d[h]).indexOf("%")>-1?g:g+"px";j&&this.$amlLoaded&&a({sync:!0,parentNode:this}),this.$resize()},this.$propHandlers.padding=function(a){if(!this.$columns)return;var b=this.$table.getElementsByTagName("td"),c,d,e,f=this.$tbody.lastChild;for(var g=this.$columns.length,h=b.length;g<h;g++)c=(e=b[g]).parentNode.lastChild==e,d=e.parentNode==f,e.style.padding="0px "+(c?0:a)+"px "+(d?0:a)+"px 0px";this.$resize()},this.$propHandlers.edge=function(a){this.$table.style.padding=(this.$edge=apf.getBox(a)).join("px ")+"px",this.$resize()},this.$addTd=function(a){var b=this.$table.getElementsByTagName("td"),c=0,d=this.$columns.length;for(var e,f=0;f<b.length;f++)c+=Math.min(d,parseInt((e=b[f]).getAttribute("colspan")||1)*parseInt(e.getAttribute("rowspan")||1));if(c%d==0)var g=this.$tbody.appendChild(document.createElement("tr"));else g=b[b.length-1].parentNode;var h=g.appendChild(document.createElement("td"));h.style.position="relative",(a.colspan||a.span)&&h.setAttribute("colspan",a.colspan||a.span),a.rowspan&&h.setAttribute("rowspan",a.rowspan),h.appendChild(a.$ext),a.$altExt=h};var b={width:function(a){this.$ext.style.width=""},height:function(a){this.$ext.style.height=a?Math.max(0,a-apf.getHeightDiff(this.$ext))+"px":"",this.parentNode.$resize()},margin:function(a){this.$ext.style.margin=apf.getBox(a).join("px ")+"px",this.parentNode.$resize()},colspan:function(b){b?this.$altExt.setAttribute("colspan",b):this.$altExt.removeAttribute("colspan"),a.call(this,{sync:!0}),this.parentNode.$resize()},rowspan:function(b){b?this.$altExt.setAttribute("rowspan",b):this.$altExt.removeAttribute("rowspan"),a.call(this,{sync:!0}),this.parentNode.$resize()},valign:function(a){this.$altExt.valign=a},align:function(a){if("left|right".indexOf(a)==-1)return;this.$altExt.align=a}};b.span=b.colspan,this.register=function(c){if(c.$altExt)return;c.$propHandlers.left=c.$propHandlers.top=c.$propHandlers.right=c.$propHandlers.bottom=apf.K;for(var d in b)c.$propHandlers[d]=b[d];c.addEventListener("prop.visible",a),this.$addTd(c),this.$noResize=!0,c.margin&&b.margin.call(c,c.margin),c.$ext.tagName!="INPUT"&&(c.$ext.style.width="auto"),this.lastChild==c&&this.$propHandlers.padding.call(this,this.padding),delete this.$noResize},this.unregister=function(c){c.$propHandlers.left=c.$propHandlers.top=c.$propHandlers.right=c.$propHandlers.bottom=null;for(var d in b)delete c.$propHandlers[d];c.removeEventListener("prop.visible",a),a.call(c,{value:!1}),c.margin&&(c.$ext.style.margin=""),c.width&&(c.$ext.style.width="")},this.addEventListener("DOMNodeRemoved",function(a){if(a.$doOnlyAdmin||a.currentTarget==this)return;a.relatedNode==this&&this.unregister(a.currentTarget)}),this.addEventListener("DOMNodeInserted",function(b){if(b.currentTarget==this||b.currentTarget.nodeType!=1)return;b.relatedNode==this&&(b.$isMoveWithinParent?a.call(b.currentTarget,{sync:!0}):(b.currentTarget.$setLayout("table"),b.currentTarget.nextSibling&&a.call(b.currentTarget,{sync:!0})))}),this.$draw=function(){this.$ext=apf.insertHtmlNode(null,this.$pHtmlNode,null,"<div><table cellSpacing='0' cellPadding='0'><tbody><tr class='first'></tr></tbody></table></div>"),this.$table=this.$ext.firstChild,this.$tbody=this.$table.firstChild,this.$ext.className="table "+(this.getAttribute("class")||""),this.$int=this.$ext,this.$ext.host=this,this.getAttribute("class")&&apf.setStyleClass(this.$ext,this.getAttribute("class")),this.addEventListener("resize",this.$resize),this.$originalMin=[this.minwidth||0,this.minheight||0]},this.$resize=function(){if(!this.$amlLoaded||this.$noResize)return;this.$table.offsetWidth>=this.$ext.offsetWidth?this.$ext.style.minWidth=(this.minwidth=Math.max(0,this.$table.offsetWidth-apf.getWidthDiff(this.$ext)))+"px":(this.$ext.style.minWidth="",this.minwidth=this.$originalMin[0]),this.$table.offsetHeight>=this.$ext.offsetHeight?this.$ext.style.minHeight=(this.minheight=Math.max(0,this.$table.offsetHeight-apf.getHeightDiff(this.$ext)))+"px":(this.$ext.style.minHeight="",this.minheight=this.$originalMin[1])},this.$loadAml=function(a){this.$amlLoaded=!1,this.$columns||this.$propHandlers.columns.call(this,this.columns="150, 200"),this.$amlLoaded=!0}}.call(apf.table.prototype=new apf.GuiElement),apf.aml.setElement("table",apf.table),apf.aml.setElement("teleport",apf.AmlElement),apf.text=function(a,b){this.$init(b||"text",apf.NODE_VISIBLE,a),this.$nodes=[]},function(){this.implement(apf.Cache,apf.ChildValue),this.$focussable=!0,this.focussable=!1,this.textselect=!0,this.$hasStateMessages=!0,this.$textTimer=this.$lastMsg=this.$lastClass=this.$changedHeight=null,this.$booleanProperties.scrolldown=!0,this.$booleanProperties.secure=!0,this.$booleanProperties.textselect=!0,this.$supportedProperties.push("behavior","scrolldown","secure","value"),this.$isTextInput=function(){return this.textselect},this.$propHandlers.scrolldown=function(a){var b=this;a?(this.$scrolldown=!0,apf.addListener(this.$scrollArea,"scroll",this.$scrollFunc=function(){b.$scrolldown=this.scrollTop>=this.scrollHeight-this.offsetHeight+apf.getVerBorders(this)}),this.addEventListener("scroll",this.$scroll),this.addEventListener("afterload",this.$scroll),this.addEventListener("resize",function(){b.$scrollArea&&b.$scrolldown&&b.scrolldown&&(b.$scrollArea.scrollTop=b.$scrollArea.scrollHeight)}),clearInterval(this.$textTimer),this.$textTimer=setInterval(function(){b.$scrollArea&&b.$scrolldown&&b.scrolldown&&(b.$scrollArea.scrollTop=b.$scrollArea.scrollHeight)},200)):(this.removeEventListener("scroll",this.$scroll),this.removeEventListener("afterload",this.$scroll),clearInterval(this.$textTimer),this.$scrollArea&&apf.removeListener(this.$scrollArea,"scoll",this.$scrollFunc))},this.$scroll=function(a){var b=this.$scrollArea;if(a.name=="afterload"){this.$scrolldown=!0,b.scrollTop=b.scrollHeight;return}this.$scrolldown=b.scrollTop>=b.scrollHeight-b.offsetHeight+apf.getVerBorders(b)},this.$propHandlers.value=function(a,b,c,d){if(this.each)return;typeof a!="string"&&(a.nodeType?a=a.nodeType>1&&a.nodeType<5?a.nodeValue:a.firstChild&&a.firstChild.nodeValue||"":a=a?a.toString():""),this.secure&&(a=a.replace(/<a /gi,"<a target='_blank' ").replace(/<object.*?\/object>/g,"").replace(/<script.*?\/script>/g,"").replace(new RegExp("ondblclick|onclick|onmouseover|onmouseout|onmousedown|onmousemove|onkeypress|onkeydown|onkeyup|onchange|onpropertychange","g"),"ona")),a=a.replace(/\<\?xml version="1\.0" encoding="UTF-16"\?\>/,""),d?(apf.insertHtmlNodes(null,this.$container,null,a),this.value||(this.value=""),this.value+=a):this.$container.innerHTML=a,apf.cannotSizeIframe&&this.oIframe&&(this.oIframe.style.width=this.oIframe.offsetWidth+"px"),this.scrolldown&&this.$scrolldown&&(this.$scrollArea.scrollTop=this.$scrollArea.scrollHeight)},this.$eachHandler=function(a){this.$attrExcludePropBind=apf.extend({},this.$attrExcludePropBind),this.$attrExcludePropBind.value=a?2:0},this.addEventListener("prop.each",this.$eachHandler),this.addEventListener("$clear",function(){this.$container.innerHTML="",this.value="",this.dispatchEvent("prop.value",{value:""})}),this.$moveNode=function(){},this.addValue=function(a){this.$propHandlers.value.call(this,a,null,null,!0),this.dispatchEvent("prop.value",{value:this.value})},this.setValue=function(a){this.setProperty("value",a,!1,!0)},this.getValue=function(){return this.$container.innerHTML},this.addEventListener("keydown",function(a){var b=a.keyCode;switch(b){case 33:this.$container.scrollTop-=this.$container.offsetHeight;break;case 34:this.$container.scrollTop+=this.$container.offsetHeight;break;case 35:this.$container.scrollTop=this.$container.scrollHeight;break;case 36:this.$container.scrollTop=0;break;case 38:this.$container.scrollTop-=10;break;case 40:this.$container.scrollTop+=10;break;default:return}return!1},!0),this.$canLoadData=function(){return this.$attrBindings.value?!0:!1},this.$add=function(a,b,c,d,e){var f=this.$attrBindings.value.cvalue,g=f(a);g="<div id='"+b+"'>"+g+"</div>",d?(e?e.insertAdjacentHTML("beforebegin",g):this.$container.insertAdjacentHTML("beforeend",g),apf.cannotSizeIframe&&this.oIframe&&(this.oIframe.style.width=this.oIframe.offsetWidth+"px"),this.scrolldown&&this.$scrolldown&&(this.$scrollArea.scrollTop=this.$scrollArea.scrollHeight)):this.$nodes.push(g)},this.$fill=function(){this.$container.insertAdjacentHTML("beforeend",this.$nodes.join("")),this.$nodes=[]},this.$deInitNode=this.$updateNode=this.$moveNode=apf.K,this.$draw=function(){this.$ext=this.$getExternal(),this.$container=this.$getLayoutNode("main","container",this.$ext),apf.hasCssUpdateScrollbarBug&&!apf.getStyle(this.$container,"padding")&&this.$fixScrollBug(),this.$scrollArea=this.oFocus?this.oFocus.parentNode:this.$container;if(this.$container.tagName.toLowerCase()=="iframe")if(apf.isIE){this.oIframe=this.$container;var a=this.skin.selectSingleNode("iframe_style");this.oIframe.contentWindow.document.write("<!DOCTYPE html>                    <head>                        <style>"+(a?a.firstChild.nodeValue:"")+"</style>                        <script>                            document.onkeydown = function(e){                                if (!e) e = event;                                if ("+"top.apf.disableF5"+" && e.keyCode == 116) {                                    e.keyCode = 0;                                    return false;                                }                            }                        </script>                    </head>                    <body oncontextmenu='return false'></body>"),this.$container=this.oIframe.contentWindow.document.body}else{var b=document.createElement("div");this.$ext.parentNode.replaceChild(b,this.$ext),b.className=this.$ext.className,this.$ext=this.$container=b}this.getAttribute("each")&&this.$eachHandler()},this.addEventListener("DOMNodeRemovedFromDocument",function(){clearInterval(this.$textTimer),apf.destroyHtmlNode(this.oDrag),this.$scrollArea&&(this.$scrollArea.onscoll=this.$scrollArea=null),this.oDrag=this.oIframe=this.oFocus=this.$container=this.$ext=null})}.call(apf.text.prototype=new apf.MultiselectBinding),apf.aml.setElement("text",apf.text),apf.input=function(a,b){this.$init(b||"input",apf.NODE_VISIBLE,a)},apf.secret=function(a,b){this.$init(b||"secret",apf.NODE_VISIBLE,a)},apf.password=function(a,b){this.$init(b||"password",apf.NODE_VISIBLE,a)},apf.textarea=function(a,b){this.$init(b||"textarea",apf.NODE_VISIBLE,a),this.multiline=!0},apf.email=function(a,b){this.$init(b||"email",apf.NODE_VISIBLE,a)},apf.textbox=function(a,b){this.$init(b||"textbox",apf.NODE_VISIBLE,a)},function(){this.implement(apf.DataAction),this.$focussable=!0,this.$masking=!1,this.$autoComplete=!1,this.$childProperty="value",this.value="",this.readonly=!1,this.$isTextInput=!0,this.multiline=!1,this.$booleanProperties.readonly=!0,this.$booleanProperties.focusselect=!0,this.$booleanProperties.realtime=!0,this.$booleanProperties.kbclear=!0,this.$supportedProperties.push("value","mask","initial-message","focusselect","realtime","type","rows","cols","kbclear"),this.$propHandlers.value=function(a,b,c,d){if(!this.$input||!d&&this.getValue()==a)return;if(!d&&!a&&!this.hasFocus())return this.$clear();this.isHTMLBox?this.$input.innerHTML!=a&&(this.$input.innerHTML=a):this.$input.value!=a&&(this.$input.value=a),d||apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Initial"]),this.$button&&(this.$button.style.display=a&&!d?"block":"none")},this.addEventListener("prop.maxlength",function(a){this.$input.tagName.toLowerCase().match(/input|textarea/)&&(this.$input.maxLength=parseInt(a.value)||null)}),this.addEventListener("prop.editable",function(a){apf.isIE?this.$input.unselectable=a.value?"On":"Off":a.value?apf.addListener(this.$input,"mousedown",apf.preventDefault):apf.removeListener(this.$input,"mousedown",apf.preventDefault)}),this.$propHandlers.mask=function(a){if(this.mask.toLowerCase()=="password")return;if(!a)throw new Error("Not Implemented");this.$masking||(this.$masking=!0,this.implement(apf.textbox.masking),this.focusselect=!1),this.setMask(this.mask)},this.$propHandlers["initial-message"]=function(a){!a,this.value||this.$clear(!0),this.type=="password"&&this.$inputInitFix&&(this.$inputInitFix.innerHTML=a,apf.setStyleClass(this.$inputInitFix,"initFxEnabled"))},this.$propHandlers.rows=function(a){this.$input.tagName.toLowerCase()=="textarea"&&a&&(this.setProperty("rows",a),this.$ext&&(this.$ext.rows=a))},this.$propHandlers.cols=function(a){this.$input.tagName.toLowerCase()=="textarea"&&a&&(this.setProperty("cols",a),this.$ext&&(this.$ext.cols=a))},this.$propHandlers.focusselect=function(a){var b=this;this.$input.onmousedown=function(){b.focusselect=!1},this.$input.onmouseup=this.$input.onmouseout=function(){b.focusselect=a}},this.$propHandlers.type=function(a){a&&"password|username".indexOf(a)>-1&&typeof this.focusselect=="undefined"&&(this.focusselect=!0,this.$propHandlers.focusselect.call(this,!0))},this.$isTextInput=function(a){return!0},this.setValue=function(a){return this.setProperty("value",a,!1,!0)},this.clear=function(){this.setProperty("value","")},this.$clear=function(a){this["initial-message"]?(apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial"),this.$propHandlers.value.call(this,this["initial-message"],null,null,!0)):this.$propHandlers.value.call(this,"",null,null,!0),a||this.dispatchEvent("clear")},this.getValue=function(){var a=this.isHTMLBox?this.$input.innerHTML:this.$input.value;return a==this["initial-message"]?"":a.replace(/\r/g,"")},this.select=function(){try{this.$input.select()}catch(a){}},this.deselect=function(){this.$input.deselect()},this.$enable=function(){this.$input.disabled=!1},this.$disable=function(){this.$input.disabled=!0},this.$insertData=function(a){return this.setValue(a)},this.insert=function(a){if(apf.hasMsRangeObject){try{this.$input.focus()}catch(b){}var c=document.selection.createRange();this.oninsert&&(a=this.oninsert(a)),c.pasteHTML(a),c.collapse(!0),c.select()}else this.$input.value+=a},this.addEventListener("$clear",function(){this.value="",this["initial-message"]&&apf.document.activeElement!=this?(this.$propHandlers.value.call(this,this["initial-message"],null,null,!0),apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial")):this.$propHandlers.value.call(this,"");if(!this.$input.tagName.toLowerCase().match(/input|textarea/i)&&apf.hasMsRangeObject)try{var a=document.selection.createRange();a.moveStart("sentence",-1),a.select()}catch(b){}this.dispatchEvent("clear")}),this.$keyHandler=function(a,b,c,d,e){this.$button&&a==27&&this.kbclear&&this.value&&(this.change(""),this.dispatchEvent("keydown",{keyCode:a,ctrlKey:b,shiftKey:c,altKey:d,htmlEvent:e}),e.stopPropagation())},this.$registerElement=function(a){if(!a)return;a.localName=="autocomplete"&&(this.$autoComplete=a)};var a;this.$focus=function(b){function d(){try{if(!a||document.activeElement!=c.$input)c.$input.focus();else{clearInterval(a);return}}catch(b){}c.$masking&&c.setPosition(),c.focusselect&&c.select()}if(!this.$ext||this.$ext.disabled)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus"),this["initial-message"]&&this.$input.value==this["initial-message"]&&(this.$propHandlers.value.call(this,"",null,null,!0),apf.setStyleClass(this.$ext,"",[this.$baseCSSname+"Initial"]));var c=this;(!b||b.mouse)&&apf.isIE?(clearInterval(a),a=setInterval(d,1)):d()},this.$blur=function(b){if(!this.$ext)return;this.realtime||this.change(this.getValue()),b&&(b.cancelBubble=!0),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus","capsLock"]),this["initial-message"]&&this.$input.value==""&&(this.$propHandlers.value.call(this,this["initial-message"],null,null,!0),apf.setStyleClass(this.$ext,this.$baseCSSname+"Initial"));try{(apf.isIE||!b||b.srcElement!=apf.window)&&this.$input.blur()}catch(b){}this.oContainer&&$setTimeout("var o = apf.lookup("+this.$uniqueId+");                o.oContainer.style.display = 'none'",100),clearInterval(a)},this.$draw=function(){var a=this,b=!1;this.localName=="codeeditor"&&(this.skin="textarea",this.$loadSkin()),this.$ext=this.$getExternal(null,null,function(a){var b=this.getAttribute("mask");if(typeof b=="string"&&b.toLowerCase()=="password"||"secret|password".indexOf(this.localName)>-1)this.type="password",this.$getLayoutNode("main","input").setAttribute("type","password");a.setAttribute("onmousedown","if (!this.host.disabled)                 this.host.dispatchEvent('mousedown', {htmlEvent : event});"),a.setAttribute("onmouseup","if (!this.host.disabled)                 this.host.dispatchEvent('mouseup', {htmlEvent : event});"),a.setAttribute("onclick","if (!this.host.disabled)                 this.host.dispatchEvent('click', {htmlEvent : event});")}),this.$input=this.$getLayoutNode("main","input",this.$ext),this.$button=this.$getLayoutNode("main","button",this.$ext),this.$inputInitFix=this.$getLayoutNode("main","initialfix",this.$ext),this.type=="password"&&this.$propHandlers.type.call(this,"password");if(!apf.hasContentEditable&&"input|textarea".indexOf(this.$input.tagName.toLowerCase())==-1){var c=this.$input;this.$input=c.parentNode.insertBefore(document.createElement("textarea"),c),c.parentNode.removeChild(c),this.$input.className=c.className,this.$ext==c&&(this.$ext=this.$input)}this.$button&&(this.$button.onmouseup=function(){a.$clear(),a.change(""),a.focus({mouse:!0})}),this.$input.tagName.toLowerCase()=="textarea"&&this.addEventListener("focus",function(a){}),this.$input.onselectstart=function(a){a||(a=event),a.cancelBubble=!0},this.$input.host=this,this.$input.onkeydown=function(c){c=c||window.event;if(this.host.disabled)return c.returnValue=!1,!1;if(!a.realtime){var d=a.getValue();c.keyCode==13&&d!=a.value&&a.change(d)}else apf.isWebkit&&a.xmlRoot&&a.getValue()!=a.value&&$setTimeout("var o = apf.lookup("+a.$uniqueId+");                    o.change(o.getValue())");if(a.readonly||a.multiline=="optional"&&c.keyCode==13&&!c.shiftKey||c.ctrlKey&&(c.keyCode==66||c.keyCode==73||c.keyCode==85))return c.returnValue=!1,!1;if(b&&this.getAttribute("type")=="password"&&this.value!=""){var e=a.$ext.className.indexOf("capsLock")>-1,f=c.keyCode===20;f&&apf.setStyleClass(a.$ext,e?null:"capsLock",e?["capsLock"]:null)}if(a.$autoComplete||a.oContainer){var g=c.keyCode;$setTimeout(function(){a.$autoComplete?a.$autoComplete.fillAutocomplete(g):a.fillAutocomplete(g)})}if(!a.mask)return a.$keyHandler(c.keyCode,c.ctrlKey,c.shiftKey,c.altKey,c)},this.$input.onkeyup=function(b){b||(b=event);if(this.host.disabled)return!1;var c=b.keyCode;a.$button&&(a.$button.style.display=this.value?"block":"none"),a.realtime?$setTimeout(function(){var b;!a.mask&&(b=a.getValue())!=a.value&&a.change(b),apf.isIE&&a.dispatchEvent("keyup",{keyCode:c})}):apf.isIE&&a.dispatchEvent("keyup",{keyCode:c}),a.isValid&&a.isValid()&&b.keyCode!=13&&b.keyCode!=17&&a.clearError()},apf.hasAutocompleteXulBug&&this.$input.setAttribute("autocomplete","off"),"INPUT|TEXTAREA".indexOf(this.$input.tagName)==-1&&(this.isHTMLBox=!0,this.$input.unselectable="Off",this.$input.contentEditable=!0,this.$input.style.width="1px",this.$input.select=function(){var a=document.selection.createRange();a.moveToElementText(this),a.select()}),this.$input.deselect=function(){if(!document.selection)return;var a=document.selection.createRange();a.collapse(),a.select()};var d;apf.addListener(this.$input,"keypress",d=function(c){if(a.$input.getAttribute("type")!="password")return apf.removeListener(a.$input,"keypress",d);c=c||window.event;var e=-1;c.which?e=c.which:c.keyCode&&(e=c.keyCode);var g=!1;c.shiftKey?g=c.shiftKey:c.modifiers&&(g=!!(c.modifiers&4)),e>=65&&e<=90&&!g||e>=97&&e<=122&&g?apf.setStyleClass(a.$ext,"capsLock"):apf.setStyleClass(a.$ext,null,["capsLock"]),b=!0})},this.$loadAml=function(){typeof this["initial-message"]=="undefined"&&this.$setInheritedAttribute("initial-message"),typeof this.realtime=="undefined"&&this.$setInheritedAttribute("realtime")},this.addEventListener("DOMNodeRemovedFromDocument",function(){this.$button&&(this.$button.onmousedown=null),this.$input&&(this.$input.onkeypress=this.$input.onmouseup=this.$input.onmouseout=this.$input.onmousedown=this.$input.onkeydown=this.$input.onkeyup=this.$input.onselectstart=null)})}.call(apf.textbox.prototype=new apf.StandardBinding),apf.config.$inheritProperties["initial-message"]=1,apf.config.$inheritProperties.realtime=1,apf.input.prototype=apf.secret.prototype=apf.password.prototype=apf.textarea.prototype=apf.email.prototype=apf.textbox.prototype,apf.aml.setElement("input",apf.input),apf.aml.setElement("secret",apf.secret),apf.aml.setElement("password",apf.password),apf.aml.setElement("textarea",apf.textarea),apf.aml.setElement("textbox",apf.textbox),apf.toolbar=function(a,b){this.$init(b||"toolbar",apf.NODE_VISIBLE,a)},function(){this.$focussable=!1,this.$draw=function(){this.$ext=this.$getExternal(),this.$int=this.$getLayoutNode("main","container",this.$ext)}}.call(apf.toolbar.prototype=new apf.Presentation),apf.aml.setElement("toolbar",apf.toolbar),apf.tree=function(a,b){this.$init(b||"tree",apf.NODE_VISIBLE,a)},function(){var a=2,b=4,c=8,d=16,e=this.$treeState;this.$initNode=function(b,c,d){this.$getNewContext("item");var f=c&a||this.emptyMessage&&this.$applyBindRule("empty",b),g=this.$getLayoutNode("item");g.setAttribute("onmouseover","var o = apf.lookup("+this.$uniqueId+");            o.$setStyleClass(this, 'hover', null, true);"),g.setAttribute("onmouseout","var o = apf.lookup("+this.$uniqueId+");            o.$setStyleClass(this, '', ['hover'], true);"),this.$setStyleClass(this.$getLayoutNode("item","class"),e[c]).setAttribute(apf.xmldb.htmlIdTag,d),this.$setStyleClass(this.$getLayoutNode("item","container"),e[c]);var h=this.$getLayoutNode("item","openclose");h&&(h.setAttribute("children",f),h.setAttribute("onmousedown","if (this.getAttribute('children') == false) return;                var o = apf.lookup("+this.$uniqueId+");                o.slideToggle(this, null, null, true);                apf.cancelBubble(event, o);"),h.setAttribute("ondblclick","event.cancelBubble = true"));var i=this.opencloseaction||"ondblclick",j=this.$getLayoutNode("item","icon");j&&j!=h&&(i!="ondblclick"&&j.setAttribute(i,"var o = apf.lookup("+this.$uniqueId+");"+(i=="onmousedown"?"o.select(this, apf.getCtrlKey(event), event.shiftKey, event.button);":"")+"o.slideToggle(this, null, null, true);"),i!="onmousedown"&&j.setAttribute("onmousedown","apf.lookup("+this.$uniqueId+").select(this, apf.getCtrlKey(event), event.shiftKey, event.button);"),j.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+");              o.choose(null, true);"+"o.stopRename();"+(!i=="ondblclick"?"o.slideToggle(this, null, null, true);":"")+"apf.cancelBubble(event,o);"));var k=this.$getLayoutNode("item","select"),l;this.hasFeature(apf.__RENAME__)||this.hasFeature(apf.__DRAGDROP__)?(l="var o = apf.lookup("+this.$uniqueId+");                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 this.hasPassedDown = true;                 if (event.button == 2)                     o.stopRename();                 else if (!o.renaming && o.hasFocus() && isSelected == 1)                     this.dorename = true;                 if (!o.hasFeature(apf.__DRAGDROP__) || !isSelected && !apf.getCtrlKey(event))                     o.select(this, apf.getCtrlKey(event), event.shiftKey, event.button);                 apf.cancelBubble(event, o);",k.setAttribute("onmouseout","this.hasPassedDown = false;"+(k.getAttribute("onmouseout")||"")),k.setAttribute("onmouseup","if (!this.hasPassedDown) return;                var o = apf.lookup("+this.$uniqueId+");"+"if (this.dorename && !o.mode)                    o.startDelayedRename(event, null, true);"+"this.dorename = false;                 var xmlNode = apf.xmldb.findXmlNode(this);                 var isSelected = o.isSelected(xmlNode);                 if (o.hasFeature(apf.__DRAGDROP__))                     o.select(this, apf.getCtrlKey(event), event.shiftKey, event.button);")):l="o.select(this, apf.getCtrlKey(event), event.shiftKey, event.button);                            apf.cancelBubble(event, o);",i!="ondblclick"&&k.setAttribute(i,"var o = apf.lookup("+this.$uniqueId+");"+(i=="onmousedown"?l:"")+"o.slideToggle(this, null, null, true);"),i!="onmousedown"&&k.setAttribute("onmousedown","var o = apf.lookup("+this.$uniqueId+");"+l),k.setAttribute("ondblclick","var o = apf.lookup("+this.$uniqueId+");          o.choose(null, true);"+"o.stopRename();this.dorename=false;"+(i=="ondblclick"?"o.slideToggle(this, null, null, true);":"")+"apf.cancelBubble(event, o);");if(j){var m=this.$applyBindRule("icon",b);m&&(j.tagName.match(/^img$/i)?j.setAttribute("src",apf.getAbsolutePath(this.iconPath,m)):j.setAttribute("style","background-image:url("+apf.getAbsolutePath(this.iconPath,m)+")"))}var n=this.$getLayoutNode("item","caption");n&&apf.setNodeValue(n,this.$applyBindRule("caption",b));var o=this.$applyBindRule("tooltip",b);o&&g.setAttribute("title",o);var p=this.$applyBindRule("css",b);return p&&(this.$setStyleClass(this.$getLayoutNode("item",null,g),p),this.$setStyleClass(this.$getLayoutNode("item","container",g),p),this.$dynCssClasses.push(p)),g},this.$updateNode=function(a,b){var c=this.$getLayoutNode("item","icon",b),d=this.$applyBindRule("icon",a);c&&d&&(c.tagName&&c.tagName.match(/^img$/i)?c.src=apf.getAbsolutePath(this.iconPath,d):c.style.backgroundImage="url("+apf.getAbsolutePath(this.iconPath,d)+")");var e=this.$getLayoutNode("item","caption",b);e&&(e.nodeType==1?e.innerHTML=this.$applyBindRule("caption",a):e.nodeValue=this.$applyBindRule("caption",a));var f=this.$applyBindRule("tooltip",a);f&&b.setAttribute("title",f);var g=this.$applyBindRule("css",a);if(g||this.$dynCssClasses.length)this.$setStyleClass(b,g,this.$dynCssClasses),g&&!this.$dynCssClasses.contains(g)&&this.$dynCssClasses.push(g)},this.$draw=function(){this.$drawBase()}}.call(apf.tree.prototype=new apf.BaseTree),apf.aml.setElement("tree",apf.tree),apf.aml.setElement("checked",apf.BindingRule),apf.webdav=function(a,b){this.$init(b||"webdav",apf.NODE_HIDDEN,a),this.$locks={},this.$lockedStack=[],this.$lockId=0,this.$serverVars={},this.$fsCache={}},function(){function a(){for(var a=0;a<arguments.length;a++)typeof this.$serverVars[arguments[a]]!="undefined"&&(this.$serverVars[arguments[a]]=null,delete this.$serverVars[arguments[a]])}function b(b){a.call(this,"auth-password");var c={username:this.$getVar("auth-username"),server:this.$server,message:b||"Access denied. Please check you username or password."},d=this.$getVar("auth-callback");return d&&(d(null,apf.ERROR,c),a.call(this,"auth-callback")),this.dispatchEvent("authfailure",c)}function c(b){a.call(this,"auth-password");var c={username:this.$getVar("auth-username"),server:this.$server,message:b||"Could not connect to server, please contact your System Administrator."},d=this.$getVar("auth-callback");return d&&(d(null,apf.ERROR,c),a.call(this,"auth-callback")),this.dispatchEvent("connectionerror",c)}function d(a){return new Error(apf.formatErrorString(0,this,"WebDAV Communication error",a))}function e(a){var b,c=!1;if(apf.isIE)try{b=new ActiveXObject("Msxml2.DOMDocument")}catch(d){}else if(document.implementation&&document.implementation.createDocument)try{b=document.implementation.createDocument("","",null)}catch(d){}try{apf.isIE&&(b.async=!1,b.load(this.$rootPath))}catch(d){c=!0}var e=this.ownerDocument.getElementsByTagNameNS(apf.ns.apf,"auth")[0];c?e.authRequired(a):(this.$regVar("authenticated",!0),a&&a.method&&a.method.apply(a.context,a.args))}function f(a){return this.$locks[a]={path:a,id:this.$lockId++,token:null}}function g(a,b,c){var e=parseInt(c.status,10),g=c.url.replace(this.$server,""),i=this.$locks[g]||f.call(this,g);if(e==400||e==409||e==423||e==412){h.call(this,c.url.replace(this.$server,""));var k=d.call(this,"Unable to apply lock to '"+g+"'. Server says: "+apf.webdav.STATUS_CODES[String(e)]);if(this.dispatchEvent("error",{error:k,bubbles:!0})===!1)throw k}var l=apf.webdav.NS,m=$xmlns(a,"owner",l.ns0)[0],n=$xmlns(a,"locktoken",l.D)[0];i.path=g,i.type="write",i.scope=$xmlns(a,"exclusive",l.D).length?"exclusive":"shared",i.depth=$xmlns(a,"depth",l.D)[0].firstChild.nodeValue,i.owner=$xmlns(m,"href",l.ns0)[0].firstChild.nodeValue,i.timeout=$xmlns(a,"timeout",l.D)[0].firstChild.nodeValue,i.token=$xmlns(n,"href",l.D)[0].firstChild.nodeValue.split(":")[1],j.call(this,i)}function h(a){var b=this.$locks[a];if(!b)return;j.call(this,b,!0),this.$locks[a]=b=null,delete this.$locks[a]}function i(a,b,c){return this.$lockedStack.push({lockId:a.id,func:b,args:c})}function j(a,b){for(var c=this.$lockedStack.length-1;c>=0;c--){if(this.$lockedStack[c].lockId!=a.id)continue;b||this[this.$lockedStack[c].func].apply(this,this.$lockedStack[c].args),this.$lockedStack.remove(c)}}function k(a,b){var c=['<?xml version="1.0" encoding="utf-8" ?>','<D:propertyupdate xmlns:D="',apf.webdav.NS.D,'">'],d=!1,e,f,g;for(e in a){d=!0;break}if(d){c.push("<D:set>");for(e in a)for(f in a[e])c.push("<D:prop>",a[e][f],"</D:prop>");c.push("</D:set>")}d=!1;for(e in b){d=!0;break}if(d){c.push("<D:remove><D:prop>");for(e in b)for(f=0,g=b[e].length;f<g;f++)c.push("<",b[e][f],' xmlns="',e,'"/>');c.push("</D:prop></D:remove>")}return c.push("</D:propertyupdate>"),c.join("")}function l(a,c,d,e){var f=parseInt(d.status,10);if(f==403||f==401||!a)return e?e.call(this,null,c,d):b.call(this);typeof a=="string"&&(a=apf.getXml(a));var g=$xmlns(a,"response",apf.webdav.NS.D),h=[];g.length&&this.$regVar("authenticated",!0);var i;for(var j=[],k,l=0,n=g.length;l<n;l++){i=decodeURIComponent($xmlns(g[l],"href",apf.webdav.NS.D)[0].firstChild.nodeValue);if(i===d.url)continue;m.call(this,g[l],k={}),k.data&&j.push({toString:function(){return this.v},data:k.data,v:(k.data.type=="file"?1:0)+""+k.data.name.toLowerCase()})}j.sort();for(var l=0,o=j.length;l<o;l++)h.push(j[l].data.xml);e&&e.call(this,"<files>"+h.join("")+"</files>",c,d)}function m(a,b){var c=apf.webdav.NS,d=decodeURIComponent($xmlns(a,"href",c.D)[0].firstChild.nodeValue.replace(/[\\\/]+$/,"")),e=d.split("/").pop(),f=e.charAt(0)==".";if(!this.$showHidden&&f)return"";var g,h,i=$xmlns(a,"collection",c.D).length>0?"folder":"file",j=$xmlns(a,"getcontenttype",c.D),k=$xmlns(a,"executable",c.lp2);return h=this.$fsCache[d]=apf.extend(this.$fsCache[d]||{},{path:d,type:i,size:parseInt(i=="file"?(g=$xmlns(a,"getcontentlength",c.lp1)).length?g[0].firstChild.nodeValue:0:0,10),name:e,contentType:i=="file"&&j.length?j[0].firstChild.nodeValue:"",creationDate:(g=$xmlns(a,"creationdate",c.lp1)).length?g[0].firstChild.nodeValue:"",lastModified:(g=$xmlns(a,"getlastmodified",c.lp1)).length?g[0].firstChild.nodeValue:"",etag:(g=$xmlns(a,"getetag",c.lp1)).length?g[0].firstChild.nodeValue:"",lockable:$xmlns(a,"locktype",c.D).length>0,executable:k.length>0&&k[0].firstChild.nodeValue=="T"}),b&&(b.data=h),h.xml="<"+i+' path="'+apf.escapeXML(d)+'" type="'+i+'" size="'+h.size+'" name="'+apf.escapeXML(h.name)+'" contenttype="'+h.contentType+'" modifieddate="'+h.lastModified+'" creationdate="'+h.creationDate+'" lockable="'+h.lockable.toString()+'" hidden="'+f.toString()+'" executable="'+h.executable.toString()+'"/>'}this.useHTTP=!0,this.method="GET",this.$showHidden=!1,this.$booleanProperties.showhidden=!0,this.$supportedProperties.push("showhidden","force-host"),this.$propHandlers.showhidden=function(a){this.$showHidden=a},this.$regVar=function(a,b){return this.$serverVars[a]=b,b},this.$getVar=function(a){return this.$serverVars[a]||""},this.doRequest=function(a,b,c,f,g,h,i){if(!this.$getVar("authenticated"))return e.call(this,{method:this.doRequest,context:this,args:arguments});g&&(f||(f={}),f["Content-type"]="text/xml; charset=utf-8");var j=this["force-host"];j&&b.indexOf(j)===-1&&(b=j.replace(/[\/]+$/,"")+"/"+b.replace(/^[\/]+/,""));var k=this;return this.get(b||this.$server,{callback:function(b,c,e){if(c!=apf.SUCCESS){var g;g=d.call(k,"Url: "+e.url+"\nInfo: "+e.message);if(a)return a.call(k,b,c,e,i);throw g}e.headers=f;var h=parseInt(e.status,10);if(h==401)return;var j=e.http.responseText||"";if(j.replace(/^[\s\n\r]+|[\s\n\r]+$/g,"")!=""&&j.indexOf("<?xml version=")==0)try{b=e.http.responseXML&&e.http.responseXML.documentElement?apf.xmlParseError(e.http.responseXML):apf.getXmlDom(e.http.responseText),apf.supportNamespaces||b.setProperty("SelectionLanguage","XPath"),b=b.documentElement,e.data=b}catch(l){if(a)return a.call(k,b,c,e,i);throw d.call(k,"Received invalid XML\n\n"+l.message)}typeof a=="function"&&a.call(k,b,c,e,i)},nocache:!1,useXML:!1,ignoreOffline:!0,data:c||"",binary:h||!1,headers:f,username:this.$getVar("auth-username")||null,password:this.$getVar("auth-password")||null})},this.authenticate=function(b,c,d){this.$regVar("auth-username",b),this.$regVar("auth-password",c),this.$regVar("auth-callback",d);var e=apf.document.getElementsByTagNameNS(apf.ns.apf,"auth")[0];if(!e)return;this.doRequest(function(b,c,d){if(d.status==401)return e.authRequired();this.$regVar("authenticated",!0);var f=this.$getVar("auth-callback");f&&(f(null,c,d),a.call(this,"auth-callback"))},this.$rootPath,null,{},!1,null)},this.reset=function(){a.call(this,"authenticated"),a.call(this,"auth-username"),a.call(this,"auth-password"),a.call(this,"auth-callback")},this.exists=function(a,b){this.getProperties(a,0,function(a,c,d){b(c===apf.SUCCESS)})},this.readFile=this.read=function(a,b){this.method="GET",this.doRequest(function(a,c,e){var f=parseInt(e.status,10);if(f==403){var g=d.call(this,"Unable to read file. Server says: "+apf.webdav.STATUS_CODES[403]);if(this.dispatchEvent("error",{error:g,bubbles:!0})===!1&&!b)throw g}else b?b.call(this,e.http.responseText,c,e):this.dispatchEvent("onfilecontents",{data:e.http.responseTex})},a)},this.readdir=function(a,b){return a.charAt(a.length-1)!="/"&&(a+="/"),this.getProperties(a,1,b)},this.mkdir=function(a,b,c){if(b){var e=this.lock(a);if(!e.token)return i.call(this,e,"mkdir",arguments)}var f=this;this.method="MKCOL",this.doRequest(function(e,g,i){b&&h.call(this,a);var j=parseInt(i.status,10);if(j==201)f.readdir(a.substr(0,a.lastIndexOf("/")),c);else if(j==400||j==403||j==405||j==409||j==415||j==507){var k=d.call(this,"Unable to create directory '"+a+"'. Server says: "+apf.webdav.STATUS_CODES[String(j)]);this.dispatchEvent("error",{error:k,bubbles:!0})===!1&&c&&c(k)}},a,null,b&&e.token?{If:"<"+e.token+">"}:null,!0)},this.list=function(a,b){return this.getProperties(a,0,b)},this.writeFile=this.write=function(a,b,c,e,f){if(c){var g=this.lock(a);if(!g.token)return i.call(this,g,"write",arguments)}typeof f=="undefined"&&typeof e=="function"&&(f=e,e=null),this.method="PUT";var h=this;this.doRequest(function(b,c,e){var g=parseInt(e.status,10);if(c!=apf.SUCCESS){var i=d.call(this,"Unable to write to file. Server says: "+apf.webdav.STATUS_CODES[String(g)]);if(this.dispatchEvent("error",{error:i,bubbles:!0})===!1&&!f)throw i;return f&&f.call(this,b,apf.ERROR,e)}h.getProperties(a,0,f)},a,b,c&&g.token?{If:"<"+g.token+">"}:null,null,e)},this.copy=function(a,b,c,e,f){if(!b||a==b)return f&&f("",apf.SUCCESS,{});if(e){var g=this.lock(a);if(!g.token)return i.call(this,g,"copy",arguments)}this.method="COPY";var j={Destination:b||this.$server};typeof c=="undefined"&&(c=!0),c||(j.Overwrite="F"),e&&g.token&&(j.If="<"+g.token+">"),this.doRequest(function(c,g,i){e&&h.call(this,a);var j=parseInt(i.status,10);if(j==400||j==403||j==409||j==412||j==423||j==424||j==502||j==507){var k=d.call(this,"Unable to copy file '"+a+"' to '"+b+"'. Server says: "+apf.webdav.STATUS_CODES[String(j)]);if(this.dispatchEvent("error",{error:k,bubbles:!0})===!1&&!f)throw k;f&&f.call(this,c,g,i)}else this.getProperties(b,0,f)},a,null,j)},this.rename=this.move=function(a,b,c,e,f){if(!b||a==b)return f&&f("",apf.SUCCESS,{});if(e){var g=this.lock(a);if(!g.token)return i.call(this,g,"move",arguments)}this.method="MOVE";var j={Destination:b||this.$server};typeof c=="undefined"&&(c=!0),c||(j.Overwrite="F"),e&&g.token&&(j.If="<"+g.token+">"),this.doRequest(function(c,g,i){e&&h.call(this,a);var j=parseInt(i.status,10);if(j==400||j==403||j==409||j==412||j==423||j==424||j==501||j==502||j==500){var k=d.call(this,"Unable to move file '"+a+"' to '"+b+"'. Server says: "+apf.webdav.STATUS_CODES[String(j)]);if(this.dispatchEvent("error",{error:k,bubbles:!0})===!1&&!f)throw k}else this.$fsCache[a]&&(this.$fsCache[b]=this.$fsCache[a],this.$fsCache[b].path=b,delete this.$fsCache[a]);f&&f.call(this,c,g,i)},a,null,j)},this.remove=function(a,b,c){if(b){var e=this.lock(a);if(!e.token)return i.call(this,e,"remove",arguments)}this.method="DELETE",this.doRequest(function(e,f,g){b&&h.call(this,a);var i=parseInt(g.status,10);if(i==400||i==423||i==424){var j=d.call(this,"Unable to remove file '"+a+"'. Server says: "+apf.webdav.STATUS_CODES[String(i)]);if(this.dispatchEvent("error",{error:j,bubbles:!0})===!1&&!c)throw j}c&&c.call(this,e,f,g)},a,null,b&&e.token?{If:"<"+e.token+">"}:null)},this.report=function(a,b,c,e){var f=['<?xml version="1.0" encoding="utf-8" ?>',"<D:"+b+' xmlns:D="',apf.webdav.NS.D,'">'];if(c)for(var g in c)f.push("<D:"+g,c[g]?">"+apf.escapeXML(c[g])+"</D:"+g+">":"/>");f.push("</D:",b,">"),this.method="REPORT",this.doRequest(function(b,c,f){var g=parseInt(f.status,10);if(c!=apf.SUCCESS){var h=d.call(this,"Unable to fetch report on '"+a+"'. Server says: "+apf.webdav.STATUS_CODES[String(g)]);if(this.dispatchEvent("error",{error:h,bubbles:!0})===!1&&!e)throw h}e&&e.call(this,b,c,f)},a,f.join(""))},this.lock=function(a,b,c,d,e){var h=this.$locks[a];if(h&&h.token)return h;this.method="LOCK",c=c?"Infinite, Second-4100000000":"Second-"+c;var i={Timeout:c};b&&(i.Depth=b||"Infinity"),d&&(i.If="<"+d+">");var j='<?xml version="1.0" encoding="utf-8"?><D:lockinfo xmlns:D="'+apf.webdav.NS.D+'">'+"<D:lockscope><D:exclusive /></D:lockscope>"+"<D:locktype><D:write /></D:locktype>"+"<D:owner><D:href>"+document.location.toString().escapeHTML()+NaN+"</D:lockinfo>";return this.doRequest(g,a,j,i,!0,null,e),f.call(this,a)},this.unlock=function(a,b){typeof a=="string"&&(a=this.$locks[a]);if(!a||!a.token)return;this.method="UNLOCK",this.doRequest(function(a,b,c){h.call(this,c.url.replace(this.$server,""))},a.path,null,{"Lock-Token":"<"+a.token+">"},!0,b)},this.getProperties=function(a,b,c,d){this.method="PROPFIND";var e='<?xml version="1.0" encoding="utf-8" ?><D:propfind xmlns:D="'+apf.webdav.NS.D+'">'+"<D:allprop />"+"</D:propfind>";d=d||{},d.Depth=typeof b!="undefined"?b:1,this.doRequest(l,a,e,d,!0,null,c)},this.setProperties=function(a,b,c,d){this.method="PROPPATCH",this.doRequest(function(a,b,c){},a,k.call(this,b,c),d?{If:"<"+d+">"}:null,!0)},this.exec=function(a,b,c){var d=function(a,d,e){e.originalArgs=b,typeof b[b.length-1]=="function"&&b[b.length-1](a,d,e),c&&c(a,d,e)};switch(a){case"login":case"authenticate":this.authenticate(b[0],b[1],d);break;case"logout":this.reset();break;case"exists":this.exists(b[0],d);break;case"read":this.readFile(b[0],d);break;case"create":var e=b[0]?b[0]:"";e.charAt(e.length-1)!="/"&&(e+="/"),this.writeFile(e+b[1],b[2],b[3]||!1,d);break;case"write":case"store":case"save":this.writeFile(b[0],b[1],b[2]||!1,d);break;case"copy":case"cp":this.copy(b[0],b[1],b[2]||!0,b[3]||!1,d);break;case"rename":var f=b[1].substr(0,b[1].lastIndexOf("/")+1);this.rename(b[1],f+b[0],b[2]||!1,b[3]||!1,d);break;case"move":case"mv":e=b[1],e.charAt(e.length-1)!="/"&&(e+="/"),this.rename(b[0],e+b[0].substr(b[0].lastIndexOf("/")+1),b[2]||!1,b[3]||!1,d);break;case"remove":case"rmdir":case"rm":this.remove(b[0],b[1]||!1,d);break;case"readdir":case"scandir":this.readdir(b[0],d);break;case"getroot":this.getProperties(this.$rootPath,0,d);break;case"mkdir":e=b[0]?b[0]:"",e.charAt(e.length-1)!="/"&&(e+="/"),this.mkdir(e+b[1],b[2]||!1,d);break;case"lock":this.lock(b[0],null,null,null,d);break;case"unlock":this.unlock(b[0],d);break;case"report":this.report(b[0],b[1],b[2],d);break;default:}}}.call(apf.webdav.prototype=new apf.Teleport),apf.aml.setElement("webdav",apf.webdav),apf.webdav.NS={D:"DAV:",ns0:"DAV:",lp1:"DAV:",lp2:"http://apache.org/dav/props/"},apf.webdav.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"None-Authoritive Information",204:"No Content",1223:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested range not satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version not supported",507:"Insufficient Storage"},apf.UndoData=function(a,b){this.localName="UndoData",this.extra={},apf.extend(this,a),this.timestamp||(this.timestamp=(new Date).getUTCTime()),b?this.at=b:a&&a.tagName=="UndoData"?this.args=a.args.slice():this.selNode=this.selNode||(this.action=="removeNode"?this.args[0]:this.amlNode?this.amlNode.selected:null);var c,d=this;this.saveChange=function(a,b,d){if(this.action=="group"){var e=this.args[1];return b.$addToQueue(e,a,!0),b.$queueNext(this)}var f;this.xmlActionNode&&(f=this.xmlActionNode.getAttribute(a?"undo":"set"),a&&!f&&(f=this.xmlActionNode.getAttribute("set")));if(!f)return b.$queueNext(this);this.state=a?"restoring":"saving";if(!c.asyncs)return b.$receive(null,apf.SUCCESS,{amlNode:this.amlNode},this,d);c.ignoreOffline=!0,apf.saveData(f,c)},this.preparse=function(a,b,e,f){var g;return this.xmlActionNode&&(g=this.xmlActionNode.getAttribute(a?"undo":"set"),a&&!g&&(g=this.xmlActionNode.getAttribute("set"))),g?(c=apf.extend({xmlNode:this.action=="multicall"?this.args[0].xmlNode:this.selNode||this.xmlNode,userdata:apf.isTrue(this.xmlActionNode.getAttribute("ignore-fail")),multicall:e,undo:a,precall:!0,callback:function(a,e,g){if(c.asyncs)return g.amlNode=d.amlNode,b.$receive(a,e,g,d,f)}},this.extra),apf.saveData(g,c),this):this}},apf.actiontracker.actions={setTextNode:function(a,b){var c=a.args;b?apf.xmldb.setTextNode(c[0],a.extra.oldValue,c[2],a):apf.xmldb.setTextNode(c[0],c[1],c[2],a)},setAttribute:function(a,b){var c=a.args;b?a.extra.oldValue?apf.xmldb.setAttribute(c[0],c[1],a.extra.oldValue,c[3],a):apf.xmldb.removeAttribute(c[0],c[1],null,a):(a.extra.name=c[1],a.extra.oldValue=c[0].getAttribute(c[1]),apf.xmldb.setAttribute(c[0],c[1],c[2],c[3],a))},removeAttribute:function(a,b){var c=a.args;b?apf.xmldb.setAttribute(c[0],c[1],a.extra.oldValue,c[2],a):(a.extra.name=c[1],a.extra.oldValue=c[0].getAttribute(c[1]),apf.xmldb.removeAttribute(c[0],c[1],c[2],a))},replaceNode:function(a,b){var c=a.args;b?apf.xmldb.replaceNode(c[1],c[0],c[2],a):apf.xmldb.replaceNode(c[0],c[1],c[2],a)},addChildNode:function(a,b){var c=a.args;b?apf.xmldb.removeNode(a.extra.addedNode,null,a):apf.xmldb.addChildNode(c[0],c[1],c[2],c[3],a)},appendChild:function(a,b){var c=a.args;b?apf.xmldb.removeNode(a.xmlNode,null,a):apf.xmldb.appendChild(c[0],c[1],c[2],c[3],c[4],a)},moveNode:function(a,b){var c=a.args;b?apf.xmldb.moveNode(a.extra.oldParent,c[1],a.extra.beforeNode,c[3],a):apf.xmldb.moveNode(c[0],c[1],c[2],c[3],a)},removeNode:function(a,b){var c=a.args;b?apf.xmldb.appendChild(a.extra.parent,a.extra.removedNode,a.extra.beforeNode,null,null,a):apf.xmldb.removeNode(c[0],c[1],a)},removeNodeList:function(a,b){if(b){var c=a.extra.removeList;for(var d=c.length-1;d>=0;d--)apf.xmldb.appendChild(c[d].pNode,c[d].removedNode,c[d].beforeNode,null,null,a)}else apf.xmldb.removeNodeList(a.args,a)},group:function(a,b,c){if(!a.$undostack){var d=a.args[0];a.$undostack=d,a.$redostack=[]}c[b?"undo":"redo"](a.$undostack.length,!1,a.$undostack,a.$redostack)},setValueByXpath:function(a,b){var c,d=a.args;if(!b)if(c=a.extra.newNode)c.nodeType==2?(apf.xmldb.setAttribute(a.extra.ownerElement,c.nodeName,c.nodeValue),a.extra.newNode=a.extra.ownerElement.getAttributeNode(c.nodeName)):apf.xmldb.appendChild(a.extra.parentNode,a.extra.newNode,null,null,null,a);else{var e=[];apf.setNodeValue(d[0],d[1],!0,{undoObj:a,xpath:d[2],newNodes:e,forceNew:d[3]}),c=a.extra.newNode=e[0],c&&(c.nodeType==2?a.extra.ownerElement=c.ownerElement||c.selectSingleNode(".."):a.extra.parentNode=a.extra.newNode.parentNode)}else(c=a.extra.newNode)?c.nodeType==2?apf.xmldb.removeAttribute(a.extra.ownerElement,c.nodeName,null,a):apf.xmldb.removeNode(a.extra.newNode,null,a):apf.setNodeValue(a.extra.appliedNode,a.extra.oldValue,!0,{undoObj:a})},multicall:function(a,b,c){var d=a.args,e=apf.xmldb.delayUpdate;apf.xmldb.delayUpdate=!0;if(!b)for(var f=0;f<d.length;f++)d[f].extra||(d[f].extra={}),apf.actiontracker.actions[d[f].action](d[f],!1,c);else for(var f=d.length-1;f>=0;f--)apf.actiontracker.actions[d[f].action](d[f],!0,c);apf.xmldb.delayUpdate=e}},apf.cgi=function(){this.supportMulticall=!1,this.namedArguments=!0,this.unserialize=function(a){return a},this.getSingleCall=function(a,b,c){c.push(b)},this.createMessage=function(a,b){function e(a,b){if(a&&a.dataType==apf.ARRAY)for(var f=0;f<a.length;f++)e(a[f],b+"%5B"+f+"%5D");else if(a&&typeof a=="object")if(a.nodeType){try{var g=a.outerHTML||a.serialize&&a.serialize()||apf.getCleanCopy(a).xml}catch(h){var g="Could not serialize object"}d.push(b+"="+encodeURIComponent(g))}else for(c in a){if(typeof a[c]=="function")continue;e(a[c],b+"%5B"+encodeURIComponent(c)+"%5D")}else typeof a!="undefined"&&a!==null&&d.push(b+"="+encodeURIComponent(a))}var c,d=[];if(this.multicall){d.push("func="+this.mcallname);for(var f=0;f<b[0].length;f++)e(b[0][f],"f%5B"+f+"%5D")}else for(c in b)e(b[c],c);return this.baseUrl||(this.baseUrl=this.url),this.url=this.$methods[a].url?this.$methods[a].url:this.baseUrl,this.method!="GET"?d.join("&"):(this.url=this.url+(d.length?(this.url.indexOf("?")>-1?"&":"?")+d.join("&"):""),"")},this.addEventListener("DOMNodeInsertedIntoDocument",function(){this.method=(this["http-method"]||"GET").toUpperCase(),this.contentType=this.method=="GET"?null:"application/x-www-form-urlencoded"}),this.submitForm=function(a,b){this.postform||this.addMethod("postform",b);var c=[];for(var d=0,e=a.elements.length;d<e;d++){if(!a.elements[d].name)continue;if(a.elements[d].tagname=="input"&&(a.elements[d].type=="checkbox"||a.elements[d].type=="radio")&&!a.elements[d].checked)continue;if(a.elements[d].tagname=a.elements[d].multiple)for(var f=0;f<a.elements[d].options.length;f++)a.elements[d].options[f].selected&&c.push(a.elements[d].name+"="+encodeURIComponent(a.elements[d].options[f].value));else c.push(a.elements[d].name+"="+encodeURIComponent(a.elements[d].value))}var g=a.action||location.href;return this.urls.postform=g+(g.indexOf("?")>-1?"&":"?")+c.join("&"),this.postform.call(this),!1}},apf.rest=function(){this.supportMulticall=!1,this.namedArguments=!1,this.nocache=!1,this.unserialize=function(a){return a},this.getSingleCall=function(a,b,c){c.push(b)},this.createMessage=function(a,b){this.baseUrl||(this.baseUrl=this.url);var c=this.$methods[a],d="NOTIFY|SEND|POST|PUT".indexOf(c["http-method"].toUpperCase())>-1?b.pop():"",e;this.method=c["http-method"],c["content-type"]&&(this.contentType=c["content-type"]);var f=0,g=b.length;for(;f<g;++f)b[f]=encodeURIComponent(b[f]);return this.url=(e=c.url?c.url:this.baseUrl)+(g?(e.charAt(e.length-1)=="/"?"":"/")+b.join("/"):""),this.contentType=d?"application/x-www-form-urlencoded":null,d}},apf.LiveMarkupPi=function(){this.$init()},function(){this.mainBind="data",this.implement(apf.StandardBinding),this.getDocument=function(){return this.$data&&this.$data.ownerDocument},this.clear=function(a){a=="loading"&&apf.getInheritedAttribute(this,"loading-message")&&(this.$propHandlers.calcdata.call(this,"<span class='loading'>Loading...</span>"),this.calcdata="")},this.$propHandlers.calcdata=function(a){if(this.$skipChange)return;if(this.$data){var b=this.$data.childNodes;for(var c=b.length-1;c>=0;c--)b[c].destroy(!0)}if(typeof a=="string"&&a.indexOf("<a:")>-1){this.$ext.innerHTML="";var d=this.ownerDocument.$domParser.parseFromString("<a:application xmlns:a='"+apf.ns.apf+"'>"+a+"</a:application>","text/xml",{htmlNode:this.$ext,host:this});this.$data=d.documentElement}else{if(this.$data){var b=this.$data.childNodes;for(var c=0;c<b.length;c++)b[c].destroy(!0)}this.$ext&&(this.$ext.innerHTML=a||"")}}}.call(apf.LiveMarkupPi.prototype=new apf.AmlProcessingInstruction(!0)),apf.aml.setProcessingInstruction("lm",apf.LiveMarkupPi),apf.aml.setProcessingInstruction("lm-debug",apf.LiveMarkupPi),apf.aml.setProcessingInstruction("livemarkup",apf.LiveMarkupPi);if(document.all){var oldWinError=window.onerror,z;window.onerror=z=function(a){apf.console.error("Error caught from early startup. Might be a html parser syntax error (not your fault). "+a);if(!arguments.caller)return!0}}apf.Init.addConditional(function(){document.all&&window.onerror==z&&(window.onerror=oldWinError),apf.dispatchEvent("domready")},null,["body","class"]),apf.addDomLoadEvent(function(){apf.Init.run("body")}),apf.start(),define("js/apf_release",[],function(){}),define("core/document",["require","exports","module"],function(a,b,c){var d=function(a,b){this.$init(),this.getNode=function(){return a},this.setNode=function(b){return this.dispatchEvent("setnode",{node:b}),a=b},this.hasValue=function(){return this.getValue()!==undefined},this.setValue=function(a){this.setProperty("value",a),b=a},this.getValue=function(){return this.hasEventListener("retrievevalue")?this.dispatchEvent("retrievevalue",{value:b}):b}};d.prototype=new apf.Class,c.exports=d}),function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d=typeof location!="undefined"&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,""),f=d&&location.hostname,g=d&&(location.port||void 0),h=[];define("text",[],function(){var l,m,s;return typeof window!="undefined"&&window.navigator&&window.document?m=function(a,b){var c=l.createXhr();c.open("GET",a,!0),c.onreadystatechange=function(){c.readyState===4&&b(c.responseText)},c.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(s=require.nodeRequire("fs"),m=function(a,b){var c=s.readFileSync(a,"utf8");c.indexOf("﻿")===0&&(c=c.substring(1)),b(c)}):typeof Packages!="undefined"&&(m=function(a,b){var c=new java.io.File(a),d=java.lang.System.getProperty("line.separator"),c=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(c),"utf-8")),e,f,g="";try{e=new java.lang.StringBuffer,(f=c.readLine())&&f.length()&&f.charAt(0)===65279&&(f=f.substring(1));for(e.append(f);(f=c.readLine())!==null;)e.append(d),e.append(f);g=String(e.toString())}finally{c.close()}b(g)}),l={version:"1.0.7",strip:function(a){if(a){var a=a.replace(b,""),d=a.match(c);d&&(a=d[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var b,c,d;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(c=0;c<3;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}if(!b)throw Error("createXhr(): XMLHttpRequest not available");return b},get:m,parseName:function(a){var b=!1,c=a.indexOf("."),d=a.substring(0,c),a=a.substring(c+1,a.length),c=a.indexOf("!");return c!==-1&&(b=a.substring(c+1,a.length),b=b==="strip",a=a.substring(0,c)),{moduleName:d,ext:a,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=l.xdRegExp.exec(a),f;return e?(a=e[2],e=e[3],e=e.split(":"),f=e[1],e=e[0],(!a||a===b)&&(!e||e===c)&&(!f&&!e||f===d)):!0},finishLoad:function(a,b,c,d,e){c=b?l.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText)c();else{var j=l.parseName(a),k=j.moduleName+"."+j.ext,m=b.toUrl(k),n=h&&h.text&&h.text.useXhr||l.useXhr;!d||n(m,e,f,g)?l.get(m,function(b){l.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){l.finishLoad(j.moduleName+"."+j.ext,j.strip,a,c,h)})}},write:function(a,b,c){if(b in h){var d=l.jsEscape(h[b]);c.asModule(a+"!"+b,"define(function () { return '"+d+"';});\n")}},writeFile:function(a,b,c,d,e){var b=l.parseName(b),f=b.moduleName+"."+b.ext,g=c.toUrl(b.moduleName+"."+b.ext)+".js";l.load(f,c,function(){var b=function(a){return d(g,a)};b.asModule=function(a,b){return d.asModule(a,g,b)},l.write(a,f,b,e)},e)}}})}(),define("text!ext/main/main.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:appsettings name="ide" debug="false"\n      disable-space             = "true"\n      auto-hide-loading         = "true"\n      allow-select              = "false"\n      allow-blur                = "true"\n      initdelay                 = "false"\n      loaderAnimIndicator       = "animatedLoader"\n      loaderWidth               = "300"\n      autoHideLoading           = "false"\n      storage                   = "cookie"\n      baseurl                   = "{apf.host ? apf.host : \'\'}"\n      requested-with-getparam   = "xhr" />\n\n    <!-- default model -->\n    <a:model />\n\n    <a:state id="stServerConnected" active="false" />\n    <a:state id="stProcessRunning" active="false" />\n\n    <a:menu id="mnuFile">\n    </a:menu>\n    \n    <a:menu id="mnuEdit">\n    </a:menu>\n    \n    <a:menu id="mnuView">\n    </a:menu>\n\n    <a:window\n      id        = "winAlert"\n      title     = ""\n      icon      = ""\n      skin      = "bk-window"\n      class     = "relative"\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "512">\n        <a:vbox width="100%">\n            <a:hbox edge="15 10 25 10" padding="10">\n                <div class="alertWarn" margin="0 10 0 10"/>\n                <a:vbox flex="1" padding="5">\n                    <h3 id="winAlertHeader"></h3>\n                    <div id="winAlertMsg" class="alertMsg">An unexpected error occurred. Please refresh your browser window.</div>\n                </a:vbox>\n            </a:hbox>\n<!--            <a:divider skin="hordivider" />-->\n            <a:hbox edge="6 10 10" pack="end">\n                <a:button id="winAlertButton" default="3" onclick="winAlert.hide();" skin="btn-default-css3">OK</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n      id        = "winReconnect"\n      title     = "Connection Lost"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      skin      = "bk-window"\n      class     = "relative nofooter"\n      width     = "512">\n        <a:vbox width="100%">\n            <a:hbox edge="15 10 25 10" padding="10">\n                <div class="alertWarn" margin="0 10 0 10"/>\n                <a:vbox flex="1" padding="5">\n                    <h3 id="winAlertHeader">Lost server connection</h3>\n                    <div id="winAlertMsg" class="alertMsg">Trying to reconnect ...</div>\n                </a:vbox>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n      id        = "winConfirm"\n      title     = "Confirm"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "512"\n      skin      = "bk-window"\n      class     = "relative">\n        <a:vbox padding="10" edge="15 20 25 20">\n            <h3 id="winConfirmHeader"></h3>\n            <div id="winConfirmMsg" class="alertMsg">An unexpected error occurred. Please refresh your browser window.</div>\n        </a:vbox>\n    \n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button id="btnConfirmOk" default="3" skin="btn-default-css3" class="btn-green" onclick="winConfirm.hide()">Ok</a:button>\n            <a:button id="btnConfirmCancel" onclick="winConfirm.hide()" skin="btn-default-css3">Cancel</a:button>\n        </a:hbox>\n    </a:window>\n    \n    <a:window\n      id        = "winQuestion"\n      title     = "Question"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      kbclose   = "true"\n      buttons   = "close"\n      width     = "512"\n      skin      = "bk-window2"\n      onkeydown = "\n        if(event.keyCode == 89) {\n            btnQuestionYes.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n        if(event.keyCode == 78) {\n            btnQuestionNo.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n      "\n      class     = "relative">\n        <a:vbox padding="10" edge="15 20 25 20">\n            <h3 id="winQuestionHeader"></h3>\n            <div id="winQuestionMsg" class="alertMsg">An unexpected error occurred. Please refresh your browser window.</div>\n        </a:vbox>\n    \n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button id="btnQuestionYesToAll" skin="btn-default-css3" class="btn-green" visible="false">Yes to all</a:button>\n            <a:button id="btnQuestionNoToAll" skin="btn-default-css3" class="btn-red" visible="false">No to all</a:button>\n            <a:filler/>\n            <a:button id="btnQuestionYes" default="3" skin="btn-default-css3" class="btn-green">Yes</a:button>\n            <a:button id="btnQuestionNo" skin="btn-default-css3" class="btn-red">No</a:button>\n        </a:hbox>\n    </a:window>\n\n    <a:scrollbar\n        id       = "sbShared"\n        skin     = "sbios"\n        top      = "0"\n        right    = "0"\n        bottom   = "0"\n        width    = "7"\n        showonscroll = "true"\n        zindex   = "100000"\n    />\n\n    <a:vbox anchors="0 0 0 0" id="vbMain">\n        <a:bar skin="c9-menu-bar" id="logobar">\n            <a:hbox>\n                <a:hbox id="barMenu" edge="8 5 0 5" padding="3" align="center">\n                    <a:button skin="c9-menu-btn" submenu="mnuFile" margin="1 0 0 0">File</a:button>\n                    <a:button skin="c9-menu-btn" submenu="mnuEdit" margin="1 0 0 0">Edit</a:button>\n                    <a:button skin="c9-menu-btn" submenu="mnuView" margin="1 0 0 0">View</a:button>\n                </a:hbox>\n                <a:hbox id="barTools" edge="8 0 0 0" padding="3" align="center">\n                    <a:divider skin="c9-divider-double" />\n                </a:hbox>\n                <a:filler />\n                <a:hbox id="barExtras" edge="8 0 0 0" padding="3" align="center">\n                    <a:divider skin="c9-divider" visible="false" />\n                </a:hbox>\n            </a:hbox>\n        </a:bar>\n\n        <a:vbox id="mainRow" padding="0" flex="1" splitters="true">\n            <a:hbox id="hboxMain" padding="0" edge="0" flex="1">\n                <a:vbox id="navbar" class="black-menu-bar unselectable">\n\n                </a:vbox>\n                <a:vbox id="colLeft" width="200" minwidth="150" visible="false" />\n                <a:splitter width="0" id="splitterPanelLeft" />\n                <a:vbox id="colMiddle" flex="1" padding="3" />\n                <a:vbox id="colRight" padding="0">\n                    <a:hbox id="hboxDockPanel" flex="1" class="hboxdockpanel">\n                    </a:hbox>\n                </a:vbox>\n            </a:hbox>\n        </a:vbox>\n    </a:vbox>\n</a:application>'}),define("text!ext/main/style/skins.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n<a:checkbox name="cboffline">\n    <a:style><![CDATA[\n        .cboffline {\n            width: 55px;\n            height: 21px;\n            background: url(images/sync.png) no-repeat 0 -21px;\n        }\n\n        .cbofflineDown {\n            background-position : 0 0px;\n        }\n\n        .cbofflineChecked {\n            background-position : 0 0px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main>\n            <div class=\'cboffline\'>\n\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:bar name="bar">\n    <a:style><![CDATA[\n        .bar{\n            overflow : hidden;\n            position : relative;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main container="div">\n            <div class="bar">\n                <div class="contents"> </div>\n                <div class="barFooter"><div><div> </div></div></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="basic">\n    <a:style><![CDATA[\n        .basic{\n            position : relative;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="basic">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="c9-header-bar">\n    <a:style><![CDATA[\n        .c9-header-bar{\n            position : relative;\n            background : url(images/headertbleft.png) no-repeat 0 0,\n                url(images/headertbright.png) no-repeat top right,\n                url(images/headertbrepeat.png) repeat-x;\n            padding : 4px 30px 0 30px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="c9-header-bar">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="c9-menu-bar">\n    <a:style><![CDATA[\n        .c9-menu-bar {\n            position      : relative;\n            overflow      : visible;\n            height        : 36px;\n            background    : url(images/c9-menu-backg.png) repeat-x 0 0;\n            border-bottom : 1px solid #000000;\n        }\n\n        .c9-menu-bar .c9-mbar-logo {\n            position   : relative;\n            overflow   : visible;\n            height     : 35px;\n            /*background : url(images/cloud9logo.png) no-repeat right 0;*/\n        }\n\n        .c9-menu-bar .c9-mbar-logo .c9-mbar-bcont {\n            position   : relative;\n            overflow   : visible;\n            height     : 35px;\n            margin-right:164px;\n        }\n\n        .c9-menu-bar .c9-mbar-logo .c9-mbar-bcont .c9-mbar-round {\n            position:absolute;\n            overflow:hidden;\n            top:0;\n            right:0;\n            background:url(images/c9-menu-round.png) no-repeat 0 0;\n            width:42px;\n            height:35px;\n        }\n\n        .c9-menu-bar .c9-mbar-logo .c9-mbar-bcont .c9-offline {\n            width:42px;\n            height:21px;\n            position:absolute;\n            background:url(images/offline.png) no-repeat 0 0;\n            top:23px;\n            right:-30px;\n            display:none;\n            z-index: 100000;\n        }\n\n        .c9-menu-bar.offline .c9-mbar-logo .c9-mbar-bcont .c9-offline {\n            display:block;\n        }\n\n        .c9-menu-bar .c9-mbar-logo .c9-mbar-bcont .c9-mbar-cont {\n            position:relative;\n            overflow:visible;\n            margin:0 42px 0 0;\n            height:35px;\n            background:url(images/c9-menu-backg2.png) repeat-x 0 0px;\n        }\n\n        .c9-menu-bar .mainlogo {\n            background: url("images/cloud9logo_transparent.png") no-repeat scroll 0 0 transparent;\n            bottom: 0;\n            display: block;\n            height: 21px;\n            position: absolute;\n            right: -146px;\n            text-indent: -800em;\n            top: 8px;\n            width: 152px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="div/div/div[1]">\n            <div class="c9-menu-bar">\n                <div class="c9-mbar-logo">\n                    <div class="c9-mbar-bcont">\n                        <div class="c9-mbar-cont"> </div>\n                        <a href="/dashboard.html" class="mainlogo" target="_blank" title="back to dashboard">Dashboard</a>\n                        <div class="c9-mbar-round"></div>\n                        <div class="c9-offline"></div>\n                    </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n\n<a:bar name="black-menu-bar">\n    <a:style><![CDATA[\n        .black-menu-bar {\n            width            : 65px;\n            overflow         : hidden;\n            position         : relative;\n            background-image : url(images/dockLeftBackground.png);\n            border-right    : 1px solid #2E2E2E;\n        }\n\n        /*.deploy.mnubtn {\n            border-bottom : none;\n        }\n\n        .deploy.mnubtn.mnubtnDown {\n            border-bottom: 1px solid #3F3F41;\n        }*/\n\n        .black-menu-bar .c9menulogo {\n            width    : 65px;\n            height   : 32px;\n            position : absolute;\n            bottom   : 20px;\n        }\n\n        .black-menu-bar .c9menulogo span {\n            background  : url(images/c9menulogo.png) no-repeat 0 0;\n            width       : 45px;\n            height      : 29px;\n            position    : absolute;\n            left        : 50%;\n            margin-left : -22px;\n            top         : 0;\n        }\n\n        .black-menu-bar .c9version {\n            color       : #696969;\n            font-family : Tahoma, Arial;\n            font-size   : 10px;\n            text-align  : center;\n            padding     : 0 0 3px 0;\n            position    : absolute;\n            bottom      : 2px;\n            left        : 0;\n            right       : 0;\n        }\n     ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="black-menu-bar"> </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="debug-panel">\n    <a:style><![CDATA[\n        .debug-panel {\n            position         : relative;\n            overflow         : hidden;\n            width            : 39px;\n            border-left      : 1px solid #1e1e1e;\n            /*-webkit-box-shadow: -1px 0px 0px 0px #1e1e1e;\n            -moz-box-shadow: -1px 0px 0px 0px #1e1e1e;\n            box-shadow: -1px 0px 0px 0px #1e1e1e; */\n            background       : url(images/debug-panel_bg.png) 0 0;\n            padding-left: 1px;\n        }\n\n        .debug-panel .bar_inset {\n            width            : 43px;\n            height           : 12px;\n            position         : relative;\n            background       : url(images/sidebar_right_bar_inset.gif);\n        }\n        .debug-panel-border {\n            position: absolute;\n            height: 100%;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            border-left: 1px solid #38393B;\n        }\n        .debug-panel .body {\n            position    : absolute;\n            top         : 0px;\n            left        : 1px;\n            right       : 0;\n            bottom      : 0;\n            /*border-left : 1px solid #38393b;*/\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="div[2]">\n            <div class="debug-panel">\n                <div class="debug-panel-border"></div>\n                <div class="body"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:bar name="dock-panel">\n    <a:style><![CDATA[\n        .dock-panel {\n            position         : relative;\n            overflow         : hidden;\n            width            : 65px;\n            border-right     : 1px solid #333;\n            background       : url(images/dock_cloud9_bg.gif);\n        }\n\n        .docksection{\n            /*border : 1px solid #fff;*/\n            border-bottom: 1px solid #040404;\n            -moz-box-shadow    : 0 1px 0 #404042;\n            -webkit-box-shadow : 0 1px 0 #404042;\n            box-shadow: 0 1px 0 #404042;\n            margin-bottom: 1px;\n        }\n\n        .docksection {\n            background       : url(images/debug-panel_bg.png) 0 0;\n        }\n\n        .docksection div:nth-child(2) {\n            padding-top: 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="dock-panel">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:bar>\n<a:button name="btn-access_request">\n    <a:style><![CDATA[\n        .btn-access_request {\n            background: url(images/red-arrow-down.png) no-repeat right 1px;\n            color: #fec0c0;\n            padding-right: 20px;\n            cursor: default;\n        }\n\n        .btn-access_requestOver {\n            text-decoration: underline;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="btn-access_request"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="button">\n    <a:style><![CDATA[\n        .btn {\n            height             : 27px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            line-height        : 17px;\n        }\n\n        .btn.smallbtn {\n            height             : 23px;\n        }\n\n        .btn .left {\n            float               : left;\n            width               : 4px;\n            height              : 27px;\n            background-color    : transparent;\n            background-image    : url("images/sprite-rounded-vert.png");\n            background-repeat   : no-repeat;\n            background-position : -16px 0;\n        }\n\n        .btn.smallbtn .left {\n            height              : 23px;\n            background-position : -16px -6717px;\n        }\n\n        .btn .lbl {\n            height              : 22px;\n            padding             : 5px 8px 0 8px;\n            margin              : 0 4px;\n            white-space         : nowrap;\n            overflow            : hidden;\n            background-color    : transparent;\n            background-image    : url("images/sprite-rounded-vert.png");\n            background-repeat   : repeat-x;\n            background-position : 0 -27px;\n            position            : relative;\n            text-align          : center;\n            color               : #474747;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n            font-family         : Arial;\n            font-size           : 14px;\n            font-weight         : bold;\n        }\n\n        .btn.smallbtn .lbl {\n            height              : 20px;\n            padding             : 3px 3px 0 3px;\n            background-position : 0 -6740px;\n            font-size           : 12px;\n        }\n\n        .label_small .lbl {\n            padding-left: 2px;\n        }\n\n        .btn .right {\n            float               : right;\n            width               : 4px;\n            height              : 27px;\n            background-color    : transparent;\n            background-image    : url("images/sprite-rounded-vert.png");\n            background-repeat   : no-repeat;\n            background-position : 0 -54px;\n        }\n\n        .btn.smallbtn .right {\n            height              : 23px;\n            background-position : 0 -6763px;\n        }\n\n        .btn .lbl .btnArrow {\n            display             : none;\n            position            : relative;\n            right               : 0;\n            width               : 5px;\n            height              : 3px;\n            vertical-align      : middle;\n        }\n\n        .btnIcon .lbl {\n            overflow : visible;\n        }\n\n        .btnIcon .lbl SPAN {\n            width               : 23px;\n            height              : 23px;\n            background-repeat   : no-repeat;\n            background-position : 0 0;\n            position            : absolute;\n            top                 : 1px;\n            left                : 0;\n        }\n\n        .btnIconOnly .lbl SPAN {\n            background-position: 1px 3px;\n        }\n\n        .btnIconOnly.newFolder .lbl SPAN {\n            background-position: 1px 2px;\n        }\n\n        .smallCaption.btnIconOnly .lbl {\n            color: #323232;\n            font-weight: normal;\n            font-size: 12px;\n            padding-left: 25px;\n        }\n\n        .btnIcon.iconOnTheRight .lbl {\n            padding : 4px 12px 0 0;\n        }\n\n        .btnIcon.iconOnTheRight .lbl SPAN {\n            left  : auto;\n            right : 0;\n        }\n\n        .btnOver .left      {background-position : -16px -81px}\n        .btnOver .lbl       {background-position : 0 -108px}\n        .btnOver .right     {background-position : 0 -135px}\n        .btnFocus .left     {background-position : -16px -243px}\n        .btnFocus .lbl      {background-position : 0 -270px}\n        .btnFocus .right    {background-position : 0 -297px}\n        .btnDown .left      {background-position : -16px -162px}\n        .btnDown .lbl       {background-position : 0 -189px}\n        .btnDown .right     {background-position : 0 -216px}\n        .btnDisabled .left  {background-position : -16px -324px}\n        .btnDisabled .lbl   {\n            background-position : 0 -351px;\n            color               : #b8bbbf;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .btnDisabled .right {background-position : 0 -378px}\n\n        /* small */\n        .btnOver.smallbtn .left      {background-position : -16px -6786px}\n        .btnOver.smallbtn .lbl       {background-position : 0 -6809px}\n        .btnOver.smallbtn .right     {background-position : 0 -6832px}\n        .btnFocus.smallbtn .left     {background-position : -16px -6924px}\n        .btnFocus.smallbtn .lbl      {background-position : 0 -6947px}\n        .btnFocus.smallbtn .right    {background-position : 0 -6970px}\n        .btnDown.smallbtn .left      {background-position : -16px -6855px}\n        .btnDown.smallbtn .lbl       {background-position : 0 -6878px}\n        .btnDown.smallbtn .right     {background-position : 0 -6901px}\n        .btnDisabled.smallbtn .left  {background-position : -16px -6993px}\n        .btnDisabled.smallbtn .lbl   {\n            background-position : 0 -7016px;\n            color               : #b8bbbf;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .btnDisabled.smallbtn .right {background-position : 0 -7039px}\n\n\n        /* Additional styles - DARKGREEN */\n        .ui-btn-greenfont {\n            color               : #37a700;\n        }\n\n        /* Additional styles - DARKGREEN */\n        .ui-btn-darkgreen .left {\n            background-position : -16px -1620px;\n        }\n        .ui-btn-darkgreen .lbl {\n            background-position : 0 -1647px;\n            color            : #4d8110;\n            text-shadow      : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-darkgreen .right {\n            background-position : 0 -1674px;\n        }\n        .ui-btn-darkgreen.btnOver .left  {background-position : -16px -1701px;}\n        .ui-btn-darkgreen.btnOver .lbl   {background-position : 0 -1728px;}\n        .ui-btn-darkgreen.btnOver .right {background-position : 0 -1755px;}\n        .ui-btn-darkgreen.btnFocus .left   {background-position : -16px -1863px;}\n        .ui-btn-darkgreen.btnFocus .lbl    {background-position : 0 -1890px;}\n        .ui-btn-darkgreen.btnFocus .right  {background-position : 0 -1917px;}\n        .ui-btn-darkgreen.btnDown .left   {background-position : -16px -1782px;}\n        .ui-btn-darkgreen.btnDown .lbl    {background-position : 0 -1809px;}\n        .ui-btn-darkgreen.btnDown .right  {background-position : 0 -1836px;}\n\n        /* Additional styles - GREEN */\n        .ui-btn-green .left {\n            background-position : -16px -405px;\n        }\n        .ui-btn-green .lbl {\n            background-position : 0 -432px;\n            color            : #4d8110;\n            text-shadow      : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-green .right {\n            background-position : 0 -459px;\n        }\n        .ui-btn-green.btnOver .left   {background-position : -16px -486px}\n        .ui-btn-green.btnOver .lbl    {background-position : 0 -513px}\n        .ui-btn-green.btnOver .right  {background-position : 0 -540px}\n        .ui-btn-green.btnFocus .left  {background-position : -16px -648px}\n        .ui-btn-green.btnFocus .lbl   {background-position : 0 -675px}\n        .ui-btn-green.btnFocus .right {background-position : 0 -702px}\n        .ui-btn-green.btnDown .left   {background-position : -16px -567px}\n        .ui-btn-green.btnDown .lbl    {background-position : 0 -594px}\n        .ui-btn-green.btnDown .right  {background-position : 0 -621px}\n        .ui-btn-green.btnDisabled .left   {background-position : -16px -729px}\n        .ui-btn-green.btnDisabled .lbl    {\n            background-position : 0 -756px;\n            color               : #91ba63;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-green.btnDisabled .right  {background-position : 0 -783px}\n\n        /* smallbtn */\n        .ui-btn-green.smallbtn .left {\n            background-position : -16px -5889px;\n        }\n        .ui-btn-green.smallbtn .lbl {\n            background-position : 0 -5912px;\n            color            : #4d8110;\n            text-shadow      : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-green.smallbtn .right {\n            background-position : 0 -5935px;\n        }\n        .ui-btn-green.btnOver.smallbtn .left   {background-position : -16px -5958px}\n        .ui-btn-green.btnOver.smallbtn .lbl    {background-position : 0 -5981px}\n        .ui-btn-green.btnOver.smallbtn .right  {background-position : 0 -6004px}\n        .ui-btn-green.btnFocus.smallbtn .left  {background-position : -16px -6096px}\n        .ui-btn-green.btnFocus.smallbtn .lbl   {background-position : 0 -6119px}\n        .ui-btn-green.btnFocus.smallbtn .right {background-position : 0 -6142px}\n        .ui-btn-green.btnDown.smallbtn .left   {background-position : -16px -6027px}\n        .ui-btn-green.btnDown.smallbtn .lbl    {background-position : 0 -6050px}\n        .ui-btn-green.btnDown.smallbtn .right  {background-position : 0 -6073px}\n        .ui-btn-green.btnDisabled.smallbtn .left   {background-position : -16px -6165px}\n        .ui-btn-green.btnDisabled.smallbtn .lbl    {\n            background-position : 0 -6188px;\n            color               : #91ba63;\n            text-shadow         : rgba(255, 255, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-green.btnDisabled.smallbtn .right  {background-position : 0 -6211px}\n\n        /* Additional styles - RED */\n        .ui-btn-red .left {\n            background-position : -16px -810px\n        }\n        .ui-btn-red .lbl {\n            background-position : 0 -837px;\n            color            : white;\n            text-shadow      : rgba(209, 2, 0, .71) 0px 1px 0px;\n        }\n        .ui-btn-red .right {\n            background-position : 0 -864px\n        }\n        .ui-btn-red.btnOver .left   {background-position : -16px -891px}\n        .ui-btn-red.btnOver .lbl    {background-position : 0 -918px}\n        .ui-btn-red.btnOver .right  {background-position : 0 -945px}\n        .ui-btn-red.btnFocus .left  {background-position : -16px -1053px}\n        .ui-btn-red.btnFocus .lbl   {background-position : 0 -1080px}\n        .ui-btn-red.btnFocus .right {background-position : 0 -1107px}\n        .ui-btn-red.btnDown .left   {background-position : -16px -972px}\n        .ui-btn-red.btnDown .lbl    {background-position : 0 -999px}\n        .ui-btn-red.btnDown .right  {background-position : 0 -1026px}\n        .ui-btn-red.btnDisabled .left   {background-position : -16px -1134px}\n        .ui-btn-red.btnDisabled .lbl    {\n            background-position : 0 -1161px;\n            color               : #bd0502;\n            text-shadow         : rgba(255, 255, 255, .31) 0px 1px 0px;\n        }\n        .ui-btn-red.btnDisabled .right  {background-position : 0 -1188px}\n\n        /* small */\n        .ui-btn-red.smallbtn .left {\n            background-position : -16px -6303px\n        }\n        .ui-btn-red.smallbtn .lbl {\n            background-position : 0 -6326px;\n            color            : white;\n            text-shadow      : rgba(209, 2, 0, .71) 0px 1px 0px;\n        }\n        .ui-btn-red.smallbtn .right {\n            background-position : 0 -6349px\n        }\n        .ui-btn-red.btnOver.smallbtn .left   {background-position : -16px -6372px}\n        .ui-btn-red.btnOver.smallbtn .lbl    {background-position : 0 -6395px}\n        .ui-btn-red.btnOver.smallbtn .right  {background-position : 0 -6418px}\n        .ui-btn-red.btnFocus.smallbtn .left  {background-position : -16px -6510px}\n        .ui-btn-red.btnFocus.smallbtn .lbl   {background-position : 0 -6533px}\n        .ui-btn-red.btnFocus.smallbtn .right {background-position : 0 -6556px}\n        .ui-btn-red.btnDown.smallbtn .left   {background-position : -16px -6441px}\n        .ui-btn-red.btnDown.smallbtn .lbl    {background-position : 0 -6464px}\n        .ui-btn-red.btnDown.smallbtn .right  {background-position : 0 -6487px}\n        .ui-btn-red.btnDisabled.smallbtn .left   {background-position : -16px -6579px}\n        .ui-btn-red.btnDisabled.smallbtn .lbl    {\n            background-position : 0 -6602px;\n            color               : #bd0502;\n            text-shadow         : rgba(255, 255, 255, .31) 0px 1px 0px;\n        }\n        .ui-btn-red.btnDisabled.smallbtn .right  {background-position : 0 -6625px}\n\n        /* Additional styles - BLUE */\n        .ui-btn-blue .left {\n            background-position : -16px -1215px\n        }\n        .ui-btn-blue .lbl {\n            background-position : 0 -1242px;\n            color            : #1f78a7;\n            text-shadow      : rgba(205, 243, 255, .71) 0px 1px 0px\n        }\n        .ui-btn-blue .right {\n            background-position : 0 -1269px\n        }\n        .ui-btn-blue.btnOver .left   {background-position : -16px -1296px}\n        .ui-btn-blue.btnOver .lbl    {background-position : 0 -1323px}\n        .ui-btn-blue.btnOver .right  {background-position : 0 -1350px}\n        .ui-btn-blue.btnFocus .lbl   {background-position : 0 -1485px}\n        .ui-btn-blue.btnFocus .right {background-position : 0 -1512px}\n        .ui-btn-blue.btnFocus .left  {background-position : -16px -1458px}\n        .ui-btn-blue.btnDown .left   {background-position : -16px -1377px}\n        .ui-btn-blue.btnDown .lbl    {background-position : 0 -1404px}\n        .ui-btn-blue.btnDown .right  {background-position : 0 -1431px}\n        .ui-btn-blue.btnDisabled .left   {background-position : -16px -1539px}\n        .ui-btn-blue.btnDisabled .lbl    {\n            background-position : 0 -1566px;\n            color               : #33a3d6;\n            text-shadow         : rgba(205, 243, 255, .71) 0px 1px 0px;\n        }\n        .ui-btn-blue.btnDisabled .right  {background-position : 0 -1593px}\n\n        /* Additional styles - BLUE2 */\n        .ui-btn-blue2 .left {\n            background-position : -16px -3945px\n        }\n        .ui-btn-blue2 .lbl {\n            background-position : 0 -3972px;\n            color            : #00536f;\n            text-shadow      : #18c8fe 0px 1px 0px\n        }\n        .ui-btn-blue2 .right {\n            background-position : 0 -3999px\n        }\n        .ui-btn-blue2.btnOver .left   {background-position : -16px -4026px}\n        .ui-btn-blue2.btnOver .lbl    {background-position : 0 -4053px}\n        .ui-btn-blue2.btnOver .right  {background-position : 0 -4080px}\n        .ui-btn-blue2.btnFocus .left  {background-position : -16px -4188px}\n        .ui-btn-blue2.btnFocus .lbl   {background-position : 0 -4215px}\n        .ui-btn-blue2.btnFocus .right {background-position : 0 -4242px}\n        .ui-btn-blue2.btnDown .left   {background-position : -16px -4107px}\n        .ui-btn-blue2.btnDown .lbl    {background-position : 0 -4134px}\n        .ui-btn-blue2.btnDown .right  {background-position : 0 -4161px}\n        .ui-btn-blue2.btnDisabled .left   {background-position : -16px -4269px}\n        .ui-btn-blue2.btnDisabled .lbl    {\n            background-position : 0 -4296px;\n            color               : #36a3d6;\n            text-shadow         : #7bdfff 0px 1px 0px;\n        }\n        .ui-btn-blue2.btnDisabled .right  {background-position : 0 -4323px}\n\n        /* Additional styles - BLUE3 */\n        .ui-btn-blue3 .left {\n            background-position : -16px -3945px\n        }\n        .ui-btn-blue3 .lbl {\n            background-position : 0 -3972px;\n            color               : white;\n            text-shadow         : rgba(3, 156, 208, 1) 0px 1px 0px;\n        }\n        .ui-btn-blue3 .right {\n            background-position : 0 -3999px\n        }\n        .ui-btn-blue3.btnOver .left   {background-position : -16px -4026px}\n        .ui-btn-blue3.btnOver .lbl    {background-position : 0 -4053px}\n        .ui-btn-blue3.btnOver .right  {background-position : 0 -4080px}\n        .ui-btn-blue3.btnFocus .left  {background-position : -16px -4188px}\n        .ui-btn-blue3.btnFocus .lbl   {background-position : 0 -4215px}\n        .ui-btn-blue3.btnFocus .right {background-position : 0 -4242px}\n        .ui-btn-blue3.btnDown .left   {background-position : -16px -4107px}\n        .ui-btn-blue3.btnDown .lbl    {background-position : 0 -4134px}\n        .ui-btn-blue3.btnDown .right  {background-position : 0 -4161px}\n        .ui-btn-blue3.btnDisabled .left   {background-position : -16px -4269px}\n        .ui-btn-blue3.btnDisabled .lbl    {\n            background-position : 0 -4296px;\n            color               : #36a3d6;\n            text-shadow         : #7bdfff 0px 1px 0px;\n        }\n        .ui-btn-blue3.btnDisabled .right  {background-position : 0 -4323px}\n\n\n        /* Additional styles - ORANGE */\n        .ui-btn-orange .left {\n            background-position : -16px -4350px\n        }\n        .ui-btn-orange .lbl {\n            background-position : 0 -4377px;\n            color            : #8a4106;\n            text-shadow      : #ffb639 0px 1px 0px\n        }\n        .ui-btn-orange .right {\n            background-position : 0 -4404px\n        }\n        .ui-btn-orange.btnOver .left   {background-position : -16px -4431px}\n        .ui-btn-orange.btnOver .lbl    {background-position : 0 -4458px}\n        .ui-btn-orange.btnOver .right  {background-position : 0 -4485px}\n        .ui-btn-orange.btnFocus .left  {background-position : -16px -4593px}\n        .ui-btn-orange.btnFocus .lbl   {background-position : 0 -4620px}\n        .ui-btn-orange.btnFocus .right {background-position : 0 -4647px}\n        .ui-btn-orange.btnDown .left   {background-position : -16px -4512px}\n        .ui-btn-orange.btnDown .lbl    {background-position : 0 -4539px}\n        .ui-btn-orange.btnDown .right  {background-position : 0 -4566px}\n        .ui-btn-orange.btnDisabled .left   {background-position : -16px -4674px}\n        .ui-btn-orange.btnDisabled .lbl    {\n            background-position : 0 -4701px;\n            color               : #c47806;\n            text-shadow         : #ffb639 0px 1px 0px;\n        }\n        .ui-btn-orange.btnDisabled .right  {background-position : 0 -4728px}\n\n        /* Additional styles - YELLOW */\n        .ui-btn-yellow .left {\n            background-position : -16px -4755px\n        }\n        .ui-btn-yellow .lbl {\n            background-position : 0 -4782px;\n            color            : #8a5000;\n            text-shadow      : #ffe082 0px 1px 0px\n        }\n        .ui-btn-yellow .right {\n            background-position : 0 -4809px\n        }\n        .ui-btn-yellow.btnOver .left   {background-position : -16px -4836px}\n        .ui-btn-yellow.btnOver .lbl    {background-position : 0 -4863px}\n        .ui-btn-yellow.btnOver .right  {background-position : 0 -4890px}\n        .ui-btn-yellow.btnFocus .left  {background-position : -16px -4998px}\n        .ui-btn-yellow.btnFocus .lbl   {background-position : 0 -5025px}\n        .ui-btn-yellow.btnFocus .right {background-position : 0 -5052px}\n        .ui-btn-yellow.btnDown .left   {background-position : -16px -4917px}\n        .ui-btn-yellow.btnDown .lbl    {background-position : 0 -4944px}\n        .ui-btn-yellow.btnDown .right  {background-position : 0 -4971px}\n        .ui-btn-yellow.btnDisabled .left   {background-position : -16px -5079px}\n        .ui-btn-yellow.btnDisabled .lbl    {\n            background-position : 0 -5106px;\n            color               : #c39658;\n            text-shadow         : #ffe082 0px 1px 0px;\n        }\n        .ui-btn-yellow.btnDisabled .right  {background-position : 0 -5133px}\n\n        .btn.btnDisabled {\n            cursor: default;\n        }\n\n        .submenu .lbl .btnArrow {\n            display             : inline-block;\n            background-image    : url("images/arrow_small.png");\n            background-repeat   : no-repeat;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isSafari || apf.isChrome"><![CDATA[\n        .btn .lbl {\n            margin  : 0;\n            height  : 22px;\n            padding : 5px 8px 0 8px;\n        }\n\n        .btnIcon .lbl {\n            overflow : hidden;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isIE"><![CDATA[\n        .btn .lbl {\n            line-height : 19px;\n        }\n\n        .btn.smallbtn .lbl {\n            line-height : 17px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main caption="div[3]/text()" label="div[3]/text()" background="." icon="div[3]/span" minwidth="30">\n            <div class="btn">\n                <div class="left"> </div>\n                <div class="right"> </div>\n                <div class="lbl">-\n                    <span/>\n                    <div class="btnArrow"> </div>\n                </div>\n\n             </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="github-button">\n        <a:style><![CDATA[\n            .github-button {\n                height             : 22px;\n                padding            : 0 0 0 23px;\n                margin             : 0;\n                overflow           : hidden;\n                position           : relative;\n                cursor             : pointer;\n                -moz-user-select   : none;\n                -khtml-user-select : none;\n                user-select        : none;\n                background-color   : #1f7224;\n                filter     : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#24872b\', endColorstr=\'#1e6c22\');\n                -ms-filter : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#24872b\', endColorstr=\'#1e6c22\')";\n                background : -webkit-gradient(linear, left top, left bottom, from(#24872b), color-stop(1, #1e6c22));\n                background :-moz-linear-gradient(center bottom, #1e6c22 0%, #24872b 80%) repeat scroll 0 0 transparent;\n\n                border             : 1px solid #000101;\n\n                -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.3) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.5);\n                -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.3) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.5);\n                box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.3) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.5);\n            }\n\n            .github-button .icon {\n                width:22px;\n                height:21px;\n                margin:1px 0 0 0;\n                position:absolute;\n                overflow:hidden;\n                top:0;\n                left:0;\n                border-right:1px solid #1e6b22;\n                background-repeat:no-repeat;\n                background-position: 0 0;\n            }\n\n            .github-button SPAN {\n                font-family:Arial;\n                font-size:11px;\n                line-height:11px;\n                font-weight:bold;\n                color:white;\n                position:relative;\n                border-left:1px solid #469547;\n                height:16px;\n                padding:5px 0 0 0;\n                margin:1px 0 0 0;\n                position:relative;\n                display:block;\n                text-align:center;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isSafari || apf.isChrome"><![CDATA[\n            .hbox > .github-button {\n                height:26px;\n            }\n\n            .github-button SPAN {\n                height  : 17px;\n                padding : 4px 0 0 0;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isIE"><![CDATA[\n            .github-button {\n                height  : 21px;\n                padding : 1px 0 0 23px;\n            }\n        ]]></a:style>\n\n         <a:presentation>\n            <a:main\n              caption    = "span/text()"\n              background = "."\n              icon       = "div">\n                <div class="github-button">\n                    <div class="icon"></div><span>-</span>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n<a:button name="btn_console_open">\n    <a:style><![CDATA[\n        .btn_console_open {\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            height             : 31px;\n            width              : 18px;\n            background-repeat   : no-repeat;\n            background-position : -36px 50%;\n        }\n\n        .btn_console_openOver {\n            background-position : -54px 50%;\n        }\n        .btn_console_openOpen.btn_console_openDown {\n            background-position: 0 50%;\n        }\n        .btn_console_openOpen.btn_console_openDown:hover {\n            background-position: -18px 50%;\n        }\n        \n\n        .btn_console_openOpen {\n            background-position: 0 50%;\n        }\n\n\n        .btn_console_open.btnDisabled {\n            cursor: default;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main caption="." label="." background="." icon="." minwidth="18">\n            <div class="btn_console_open"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="btn_icon_only">\n    <a:style><![CDATA[\n        .btn_icon_only {\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            height             : 21px;\n            width              : 22px;\n        }\n\n        .btn_icon_onlyDown.tabmenubtn {\n            z-index : 10000000;\n        }\n\n        .dim22-22.btn_icon_only {\n            width: 22px;\n            height: 22px;\n        }\n\n        .dim14-14.btn_icon_only {\n            width: 14px;\n            height: 14px;\n        }\n\n        .dim8x8.btn_icon_only {\n            width: 8px;\n            height: 8px;\n        }\n\n        .btn_icon_onlyOver {\n            background-position: 0 -23px;\n        }\n\n        .dim22-22.btn_icon_onlyOver {\n            background-position: 0 -22px;\n        }\n\n        .dim14-14.btn_icon_onlyOver {\n            background-position: 0 -14px;\n        }\n\n        .dim8x8.btn_icon_onlyOver {\n            background-position: 0 -8px;\n        }\n\n        .btn_icon_onlyDown {\n            background-position: 0 -46px;\n        }\n\n        .dim22-22.btn_icon_onlyDown {\n            background-position: 0 -44px;\n        }\n\n        .dim14-14.btn_icon_onlyDown {\n            background-position: 0 -28px;\n        }\n\n        .dim8x8.btn_icon_onlyDown {\n            background-position: 0 -16px;\n        }\n\n        .btn_icon_only.btnDisabled {\n            cursor: default;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main caption="." label="." background="." icon=".">\n            <div class="btn_icon_only"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n\n<a:button name="dockButton">\n    <a:style><![CDATA[\n        .dockButton {\n            width              : 37px;\n            height             : 37px;\n            padding-top        : 3px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            background-repeat:no-repeat;\n            background-position: 0 0;\n        }\n\n        .dockButton-footer {\n            height: 10px;\n            /*filter           : progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=\'#f3f3f3\', endColorstr=\'#e5e5e5\');\n            -ms-filter       : "progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=\'#f3f3f3\', endColorstr=\'#e5e5e5\')";\n            background       : -webkit-gradient(linear, left center, right center, from(#f3f3f3), color-stop(1, #e5e5e5));\n            background       : -moz-linear-gradient(center left, #f3f3f3 0%, #e5e5e5 100%) repeat scroll 0 0 transparent;*/\n        }\n\n        .dockButtonOver {\n            background-image    : url(images/dock_button_sprite.png);\n            background-position : 3px -47px;\n        }\n\n        .dockButtonDown {\n            background-image    : url(images/dock_button_sprite.png);\n            background-position : 3px 5px;\n        }\n\n        .dockButtonDown .dockButton-footer {\n            -webkit-border-top-left-radius : 5px;\n            -moz-border-radius-topleft     : 5px;\n        }\n\n        .dockButtonDown.btn-runcommands {\n            background-image: none;\n        }\n\n        .dockButton .icon {\n            width                 : 31px;\n            height                : 32px;\n            -webkit-border-radius : 3px;\n            -moz-border-radius    : 3px;\n            margin                : 0px 1px 2px 4px;\n            /*background-image: -webkit-gradient(\n               linear,\n               left bottom,\n               left top,\n               color-stop(0.5, rgb(175,225,201)),\n               color-stop(1, rgb(221,242,232)),\n               color-stop(0.5, rgb(197,233,216))\n            );\n            background-image: -moz-linear-gradient(\n               center bottom,\n               rgb(175,225,201) 50%,\n               rgb(221,242,232) 100%,\n               rgb(197,233,216) 50%\n            );*/\n        }\n\n        .dockButton .dock_notification {\n            position    : absolute;\n            top         : 1px;\n            right       : 1px;\n            width       : 12px;\n            text-align  : center;\n            background  : url(\'images/dock_notification_bg.png\') 0px 0px no-repeat;\n            color       : #fff;\n            font-size   : 5pt;\n            padding     : 0px 1px 1px 3px;\n            text-shadow : 1px 1px 0px #000;\n            letter-spacing: 1px;\n            line-height : 9pt;\n        }\n\n        .dockButton .dock_icon_image {\n            -webkit-border-radius : 3px;\n            -moz-border-radius    : 3px;\n            display               : inline-block;\n            position              : absolute;\n            top                   : 3px;\n            left                  : 3px;\n            width                 : 34px;\n            height                : 33px;\n        }\n\n        .dockButton .dock_icon_image.dii_primary {\n            left   : 5px;\n            top    : 5px;\n            width  : 31px;\n            height : 31px;\n        }\n\n        .dockButton .dock_icon_image.dii_secondary {\n            -webkit-border-radius : 5px;\n            -moz-border-radius    : 5px;\n        }\n\n        .dockButton.debug1 .icon {\n            background-position: 0 -437px;\n        }\n\n        .dockButtonChecked.debug1 .icon {\n            background-position: 0 -556px;\n        }\n\n        .dockButton.debug2 .icon {\n            background-position: 0 -475px;\n        }\n\n        .dockButton.call_stack .icon {\n            background-position: 0 -515px;\n        }\n\n        .dockButton.todo_check .icon {\n            background-position: 0 -163px;\n        }\n\n        .dockButtonChecked.todo_check .icon {\n            background-position: 0 -201px;\n        }\n\n        .dockButton.contact_list .icon {\n            background-position: 0 -243px;\n        }\n\n        .dockButtonChecked.contact_list .icon {\n            background-position: 0 -281px;\n        }\n\n        .dockButton.defaultUser .icon {\n            background-position: 0 -360px;\n        }\n\n        .dockButtonChecked.defaultUser .icon {\n            background-position: 0 -400px;\n        }\n\n    ]]></a:style>\n\n     <a:presentation>\n        <a:main caption="div" label="div" background="." icon="div">\n            <div class="dockButton">\n                <span class="dock_icon_image dii_tertiary"/>\n                <span class="dock_icon_image dii_secondary"/>\n                <span class="dock_icon_image dii_primary"/>\n                <div class="icon"/>\n                <span class="dock_notification"/>\n                <div class="dockButton-footer"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="toolbarbutton">\n    <a:style><![CDATA[\n        .menubar .toolbarbutton {\n            display: block;\n            height: 17px;\n            float: left;\n            cursor: default;\n            padding: 2px 8px 0 8px;\n            margin-top: 2px;\n            line-height: 13px;\n            text-decoration: none;\n            color: #e8e8e8;\n        }\n\n        .menubar .toolbarbuttonOver, .menubar .toolbarbuttonDown {\n            cursor: default;\n            border-radius: 4px 4px 0px 0px;\n            -moz-border-radius: 4px 4px 0px 0px;\n            -webkit-border-bottom-right-radius: 0px;\n            -webkit-border-bottom-left-radius: 0px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(1, rgb(64,145,216)));\n            background: -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 100%);\n            color : #ffffff;\n        }\n\n        .menubar .toolbarbuttonDisabled, .menubar .toolbarbuttonDisabled {\n            background : none;\n            color : #bebebe;\n        }\n\n        .toolbar .subbar .toolbarbutton {\n            display: block;\n            height: 20px;\n            cursor: default;\n            margin: 2px 1px 0 1px;\n            text-decoration: none;\n            color: #111111;\n            text-align: center;\n            padding: 0 4px 0 0;\n            line-height: 13px;\n            border: 1px solid transparent;\n        }\n\n        .toolbar .subbar .splitbtn.toolbarbutton:first-child {\n            border-right: none;\n        }\n\n        .toolbar .subbar .toolbarbutton div {\n            float: left;\n            margin: 0;\n            height: 15px;\n            padding: 4px 4px 0 8px;\n            border: 0;\n            text-shadow   : #ffffff 0px 1px 0px;\n        }\n\n        .toolbar .subbar .toolbarbuttonOver {\n            border: 1px solid #b3b3b3;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(246,246,246)),color-stop(1, rgb(253,253,253)));\n            background: -moz-linear-gradient(center bottom,rgb(246,246,246) 0%,rgb(253,253,253) 100%);\n        }\n\n        .toolbar .subbar .splitbtn.toolbarbuttonOver:first-child,\n        .toolbar .subbar .splitbtn.toolbarbuttonDown:first-child,\n        .toolbar .subbar .splitbtn.toolbarbuttonChecked:first-child {\n            -webkit-border-top-right-radius: 0px;\n            -webkit-border-bottom-right-radius: 0px;\n            -moz-border-radius-topright: 0px;\n            -moz-border-radius-bottomright: 0px;\n            border-top-right-radius: 0px;\n            border-bottom-right-radius: 0px;\n            border-right: none;\n        }\n\n        .toolbar .subbar .splitbtn.toolbarbuttonOver:last-child,\n        .toolbar .subbar .splitbtn.toolbarbuttonDown:last-child,\n        .toolbar .subbar .splitbtn.toolbarbuttonChecked:last-child {\n            -webkit-border-top-left-radius: 0px;\n            -webkit-border-bottom-left-radius: 0px;\n            -moz-border-radius-topleft: 0px;\n            -moz-border-radius-bottomleft: 0px;\n            border-top-left-radius: 0px;\n            border-bottom-left-radius: 0px;\n        }\n\n        .toolbar .subbar .toolbarbuttonOver div {\n\n        }\n\n        .toolbar .subbar .toolbarbuttonDown {\n            border: 1px solid #b3b3b3;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(239,241,244)),color-stop(1, rgb(224,226,229)));\n            background: -moz-linear-gradient(center bottom,rgb(239,241,244) 0%,rgb(224,226,229) 100%);\n        }\n\n        .toolbar .subbar .toolbarbuttonDown div {\n\n        }\n\n        .toolbar .subbar .toolbarbuttonChecked {\n            border: 1px solid #b3b3b3;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(224,226,229)),color-stop(1, rgb(250,252,255)));\n            background: -moz-linear-gradient(center bottom,rgb(224,226,229) 0%,rgb(250,252,255) 100%);\n        }\n\n        .toolbar .subbar .toolbarbuttonChecked div {\n        }\n\n        .toolbar .subbar .toolbarbuttonDisabled, .toolbar .subbar .toolbarbuttonDisabled div {\n            background: none;\n            color: #bebebe;\n        }\n\n        .toolbar .subbar .toolbarbuttonIcon div{\n            padding-left : 4px;\n        }\n\n        .toolbar .subbar .toolbarbuttonEmpty div{\n            padding: 4px 0 0 7px;\n        }\n\n        .toolbar .subbar .toolbarbuttonIcon span{\n            display: block;\n            float:left;\n            width: 16px;\n            height: 16px;\n            margin: -2px 4px 0 0;\n        }\n\n        .toolbar .subbar .toolbarbuttonIcon.width_20 span {\n            width: 20px;\n        }\n\n        .toolbar .subbar .toolbarbuttonIcon.toolbarbuttonOver span{\n            background-position: 0 -16px;\n        }\n        .toolbar .subbar .toolbarbuttonIcon.toolbarbuttonDown span{\n            background-position: 0 -32px;\n        }\n\n        .toolbar .subbar .toolbarbuttonEmpty span{\n            margin: -2px 3px 0 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="div/text()" label="div/text()" background="div/span" icon="div/span">\n            <div class=\'toolbarbutton\'><div><span> </span>-</div></div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-menu-btn">\n    <a:style><![CDATA[\n        .c9-menu-btn {\n            height             : 24px;\n            overflow           : visible;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            line-height        : 17px;\n        }\n\n        .c9-menu-btn .c9-left {\n            width:5px;\n            height:24px;\n            position:absolute;\n            overflow:hidden;\n            top:0;\n            left:0;\n        }\n\n        .c9-menu-btn .c9-right {\n            width:5px;\n            height:24px;\n            position:absolute;\n            overflow:hidden;\n            top:0;\n            right:0;\n        }\n\n        .c9-menu-btn .c9-label {\n            font-family   : Tahoma, Arial;\n            font-size     : 12px;\n            line-height   : 14px;\n            color         : #e8e8e8;\n            height        : 20px;\n            padding       : 4px 2px 0 2px;\n            margin        : 0 5px;\n            text-shadow   : rgba(41, 42, 43, 1) 0px 1px 0px;\n        }\n\n        .c9-menu-btnOver .c9-left {\n            background:url(images/menu-btn.png) no-repeat 0 0;\n        }\n\n        .c9-menu-btnOver .c9-right {\n            background:url(images/menu-btn.png) no-repeat 0 -48px;\n        }\n\n        .c9-menu-btnOver .c9-label {\n            background:url(images/menu-btn.png) repeat-x 0 -24px;\n        }\n\n        .c9-menu-btnDown .c9-left {\n            background:url(images/menu-btn.png) no-repeat 0 -72px;\n        }\n\n        .c9-menu-btnDown .c9-right {\n            background:url(images/menu-btn.png) no-repeat 0 -120px;\n        }\n\n        .c9-menu-btnDown .c9-label {\n            background:url(images/menu-btn.png) repeat-x 0 -96px;\n        }\n\n        .c9-menu-btnDown .c9-label {\n           color:#d0e6b3;\n           text-shadow : none;\n        }\n\n        .c9-menu-btnDown {\n            z-index : 100000000;\n        }\n\n        /* Why are we using an extra div here??? */\n        .c9-menu-btnDown .c9-fix {\n            height           : 3px;\n            position         : absolute;\n            display          : none;\n            bottom           : -1px;\n            left             : 1px;\n            right            : 1px;\n            background-color : #1c1c1c;\n            z-index          : 20000101;\n        }\n\n        .hbox > DIV > .c9-menu-btn {\n            height : 24px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[2]"\n          minwidth   = "26">\n            <div class="c9-menu-btn">\n                <div class="c9-left"></div>\n                <div class="c9-label">-</div>\n                <div class="c9-right"></div>\n                <div class="c9-fix"></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n\n<a:button name="c9-toolbarbutton">\n    <a:style><![CDATA[\n        .c9-toolbarbutton {\n            height             : 21px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            line-height        : 17px;\n            border:1px solid transparent;\n        }\n\n        .with-arrow.c9-toolbarbutton {\n            padding-right: 5px;\n        }\n\n        .hbox > .c9-toolbarbutton {\n            height: 23px;\n        }\n\n        .c9-toolbarbutton .c9-icon {\n            display: none;\n            width:23px;\n            height:19px;\n            position:absolute;\n            top:2px;\n            left:2px;\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n        }\n\n        .c9-toolbarbuttonIcon .c9-icon{\n            display : block;\n        }\n\n        .c9-toolbarbuttonOver {\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius : 5px;\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #343434;\n            filter             : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#3a3a3a\', endColorstr=\'#333333\');\n            -ms-filter         : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#3a3a3a\', endColorstr=\'#333333\')";\n            background         : -webkit-gradient(linear, left top, left bottom, from(#3a3a3a), color-stop(1, #333333));\n            background         :-moz-linear-gradient(center bottom, #333333 0%, #3a3a3a 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-toolbarbutton .c9-label {\n            position:relative;\n            overflow:hidden;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            height:15px;\n            padding:4px 6px 0 6px;\n        }\n\n        .with-arrow.c9-toolbarbutton .c9-label {\n            background:url(images/btn-arrow.png) no-repeat right 9px;\n            padding-right: 11px;\n        }\n\n        .with-arrow.c9-toolbarbutton .c9-label {\n            background:url(images/btn-arrow.png) no-repeat right 9px;\n            padding-right: 11px;\n        }\n\n        .with-arrow.c9-toolbarbutton .c9-label {\n            background:url(images/btn-arrow.png) no-repeat right 9px;\n            padding-right: 11px;\n        }\n\n        .c9-toolbarbuttonEmpty .c9-icon {\n            position:relative;\n        }\n\n        .c9-toolbarbuttonEmpty .c9-label {\n            display:none;\n        }\n\n        .c9-toolbarbuttonIcon .c9-label{\n            padding:4px 6px 0 22px;\n        }\n        .record.c9-toolbarbuttonIcon .c9-label{\n            padding:4px 6px 0 26px;\n        }\n\n        .c9-toolbarbuttonIcon.preview .c9-label {\n            padding-left : 25px;\n        }\n\n        .c9-toolbarbuttonDown {\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius : 5px;\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #343434;\n            filter             : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#282828\', endColorstr=\'#2e2e2e\');\n            -ms-filter         : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#282828\', endColorstr=\'#2e2e2e\')";\n            background         : -webkit-gradient(linear, left top, left bottom, from(#282828), color-stop(1, #2e2e2e));\n            background         :-moz-linear-gradient(center bottom, #2e2e2e 0%, #282828 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-toolbarbuttonDown .c9-icon {\n            background-position: 0 -19px;\n        }\n\n        .c9-toolbarbuttonDisabled .c9-icon {\n            background-position : 0 -38px;\n        }\n        .record.c9-toolbarbuttonDisabled .c9-icon, .record.c9-toolbarbuttonDown .c9-icon {\n            background-position : 0 0;\n        }\n\n        .c9-toolbarbuttonDisabled .c9-label {\n            color       : #606060;\n            text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[1]">\n            <div class="c9-toolbarbutton">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-sidepanelsbutton">\n    <a:style><![CDATA[\n        .c9-sidepanelsbutton {\n            height             : 21px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            line-height        : 17px;\n            border:1px solid transparent;\n            padding-bottom: 1px;\n            padding-top: 1px;\n\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius : 5px;\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #343434;\n            filter             : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#282828\', endColorstr=\'#2e2e2e\');\n            -ms-filter         : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#282828\', endColorstr=\'#2e2e2e\')";\n            background         : -webkit-gradient(linear, left top, left bottom, from(#282828), color-stop(1, #2e2e2e));\n            background         :-moz-linear-gradient(center bottom, #2e2e2e 0%, #282828 100%) repeat scroll 0 0 transparent;\n\n            width: 25px;\n        }\n\n        .c9-sidepanelsbutton .c9-icon {\n            display: none;\n            width:23px;\n            height:19px;\n            position:absolute;\n            top:1px;\n            left:2px;\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n            left: 1px;\n        }\n\n        .c9-sidepanelsbuttonIcon .c9-icon{\n            display : block;\n        }\n\n        .c9-sidepanelsbuttonOver {\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius : 5px;\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #343434;\n            filter             : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#3a3a3a\', endColorstr=\'#333333\');\n            -ms-filter         : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#3a3a3a\', endColorstr=\'#333333\')";\n            background         : -webkit-gradient(linear, left top, left bottom, from(#3a3a3a), color-stop(1, #333333));\n            background         :-moz-linear-gradient(center bottom, #333333 0%, #3a3a3a 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-sidepanelsbutton.active {\n            background-image: linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(70,94,58) 0%, rgb(74,98,62) 100%);\n         }\n\n        .c9-sidepanelsbutton .c9-label {\n            position:relative;\n            overflow:hidden;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            height:15px;\n            padding:3px 6px 0 6px;\n        }\n\n        .c9-sidepanelsbuttonEmpty .c9-icon {\n            position:relative;\n        }\n\n        .c9-sidepanelsbuttonEmpty .c9-label {\n            display:none;\n        }\n\n        .c9-sidepanelsbuttonIcon .c9-label{\n            padding:3px 6px 0 22px;\n        }\n\n        .c9-sidepanelsbuttonIcon.preview .c9-label {\n            padding-left : 25px;\n        }\n\n        .c9-sidepanelsbuttonDown {}\n\n        .c9-sidepanelsbuttonDown .c9-icon {}\n\n        .c9-sidepanelsbuttonDisabled {\n\n        }\n\n        .c9-sidepanelsbuttonDisabled .c9-icon {\n            background-position : 0 -38px;\n        }\n\n        .c9-sidepanelsbuttonDisabled .c9-label {\n            color       : #606060;\n            text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[1]">\n            <div class="c9-sidepanelsbutton">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-toolbarbutton2">\n    <a:style><![CDATA[\n        .c9-toolbarbutton2 {\n            height             : 20px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            line-height        : 13px;\n            margin:            : 0 1px;\n            border             : 1px solid transparent;\n        }\n\n        .c9-toolbarbutton2 .c9-icon {\n            display: none;\n            width: 18px;\n            height: 18px;\n            background-position : 0 -18px;\n            background-repeat   : no-repeat;\n        }\n\n        .c9-toolbarbutton2Icon .c9-icon {\n            display : block;\n        }\n\n        .c9-toolbarbutton2Over {\n\n        }\n\n        .c9-toolbarbutton2 .c9-label {\n            position:relative;\n            overflow:hidden;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            height:15px;\n            padding:3px 6px 0 6px;\n        }\n\n        .c9-toolbarbutton2Empty .c9-icon {\n            position:relative;\n        }\n\n        .c9-toolbarbutton2Empty .c9-label {\n            display:none;\n        }\n\n        .c9-toolbarbutton2Icon .c9-label {\n            padding:3px 6px 0 22px;\n        }\n\n        .c9-toolbarbutton2Icon.preview .c9-label {\n            padding-left : 25px;\n        }\n\n        .c9-toolbarbutton2Disabled .c9-icon {\n            background-position: 0 1px;\n        }\n\n        .c9-toolbarbutton2Over .c9-icon {\n            background-position: 0 -37px;\n        }\n\n        .c9-toolbarbutton2Down .c9-icon {\n            background-position: 0 -56px;\n        }\n\n        .c9-toolbarbutton2Disabled .c9-label {\n            color       : #606060;\n            text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[2]/text()"\n          background = "."\n          icon       = "div[1]">\n            <div class="c9-toolbarbutton2">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="header-btn">\n    <a:style><![CDATA[\n        .header-btn {\n            height              : 15px;\n            width               : 25px;\n            overflow            : hidden;\n            cursor              : pointer;\n            position            : relative;\n            cursor              : default;\n            -moz-user-select    : none;\n            -khtml-user-select  : none;\n            user-select         : none;\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n        }\n\n        .header-btnOver {\n            background-position : 0 -15px;\n        }\n\n        .header-btnDown {\n            background-position : 0 -30px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="header-btn"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="browser-btn">\n    <a:style><![CDATA[\n        .browser-btn {\n            height              : 27px;\n            width               : 25px;\n            overflow            : hidden;\n            cursor              : pointer;\n            position            : relative;\n            cursor              : default;\n            -moz-user-select    : none;\n            -khtml-user-select  : none;\n            user-select         : none;\n            background-position : 0 27px;\n            background-repeat   : no-repeat;\n            background-image    : url(images/browser_button.png);\n        }\n\n        .browser-btn span{\n            display : block;\n            width : 17px;\n            height : 17px;\n            position : absolute;\n            left : 5px;\n            top : 5px;\n            background-repeat   : no-repeat;\n        }\n\n        .browser-btnOver {\n            background-position : 0 0px;\n        }\n\n        .browser-btnDown {\n            background-position : 0 -27px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = "span">\n            <div class="browser-btn"><span> </span></div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="dockheader">\n    <a:style><![CDATA[\n        .dockheader {\n            /*border-top : 1px solid #595a5c;\n            border-bottom : 1px solid #f1f1f1;*/\n            position : relative;\n            filter           : progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=\'#3E3F41\', endColorstr=\'#303132\');\n            -ms-filter       : "progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=\'#3E3F41\', endColorstr=\'#303132\')";\n            background       : -webkit-gradient(linear, center top, center bottom, from(#3E3F41), color-stop(1, #303132));\n            background       : -moz-linear-gradient(center top , #3E3F41 0%, #303132 100%) repeat scroll 0 0 transparent;\n            height : 10px;\n            cursor : pointer;\n            border-bottom: 1px solid #38393b;\n            border-top: 1px solid #4f5052;\n        }\n\n        .dockcol .dockheader {\n            border-bottom: 1px solid #38393b;\n        }\n\n        .dockheader span{\n            width : 9px;\n            height : 9px;\n            position : absolute;\n            display : block;\n            right : 2px;\n            top : 1px;\n            background : url(images/toolbar-arrows.png) 0 0;\n        }\n\n        .dockheaderOver {\n            /*border-top : 1px solid #595a5c;*/\n            filter           : progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=\'#525354\', endColorstr=\'#454647\');\n            -ms-filter       : "progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=\'#525354\', endColorstr=\'#454647\')";\n            background       : -webkit-gradient(linear, center top, center bottom, from(#525354), color-stop(1, #454647));\n            background       : -moz-linear-gradient(center top, #525354 0%, #454647 100%) repeat scroll 0 0 transparent;\n        }\n\n        .dockheader.expanded span{\n            background-position : 0 -10px;\n            right : 3px;\n        }\n\n        .dockheader .dockheader-footer {\n            border-bottom: 1px solid #1D1E1F;\n            bottom: 0;\n            left: 0;\n            position: absolute;\n            width: 100%;\n        }\n        .dockcol .dockheader .dockheader-footer {\n            top: 9px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="dockheader">\n                <span> </span>\n                <div class="dockheader-footer"></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="mnubtn">\n    <a:style><![CDATA[\n        .mnubtn {\n            width               : 65px;\n            height              : 68px;\n            padding-top         : 47px;\n            border-bottom       : 1px solid #232323;\n            border-top          : 1px solid #3f3f41;\n            position            : relative;\n            cursor              : default;\n            overflow            : hidden;\n        }\n\n        .mnubtnOver,\n        .mnubtnDown {\n            background : url(images/radiobutton_over.png) no-repeat 0 0;\n        }\n\n        .mnubtn .icon {\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n            width               : 40px;\n            height              : 40px;\n            position            : absolute;\n            top                 : 7px;\n            left                : 12px;\n        }\n\n        .mnubtn .pointer {\n            /*background-image    : url(images/gitui_close_arrow.png);\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n            position            : absolute;\n            width               : 11px;\n            height              : 9px;\n            top                 : 6px;\n            right               : 5px;*/\n            display             : none;\n        }\n\n        .mnubtn SPAN {\n            font-family         : Tahoma, Arial;\n            font-size           : 10px;\n            color               : #aaaaaa;\n            text-align          : center;\n            position:relative;\n            display:block;\n            overflow:hidden;\n        }\n\n        .mnubtnDown SPAN {\n            color : white;\n        }\n\n        .mnubtnDown .pointer {\n            /*display:block;*/\n        }\n\n        .mnubtnDown .icon {\n            background-position:-40px 0;\n        }\n\n        .mnubtn.spacer {\n            border     : 0;\n            border-top : 1px solid #3f3f41;\n            width      : 65px;\n            height     : 15px;\n            padding    : 0;\n            position   : relative;\n        }\n\n        .mnubtn.spacer .pointer,\n        .mnubtn.spacer .icon,\n        .mnubtn.spacer SPAN {\n            display : none;\n        }\n\n        .mnubtn.rundebug .icon {\n            background-image:url(images/rundebug.png);\n        }\n\n        .mnubtn.project_files .icon {\n            background-image:url(images/project_files.png);\n        }\n\n        .mnubtn.open_files .icon {\n            background-image:url(images/open_files.png);\n        }\n\n        .mnubtn.testing .icon {\n            background-image:url(images/testing.png);\n        }\n\n        .mnubtn.visual_editor .icon {\n            background-image:url(images/visual_editor.png);\n        }\n\n        .mnubtn.preferences .icon {\n            background-image:url(images/preferences.png);\n        }\n\n        .mnubtn.git_corner .icon {\n            background-image:url(images/git_corner.png);\n        }\n\n        .mnubtn.deploy .icon {\n            background-image:url(images/deploy.png);\n        }\n\n        .mnubtn.the_store .icon {\n            background-image:url(images/the_store.png);\n        }\n\n        .mnubtn.shop {\n            width    : 65px;\n            height   : 45px;\n            padding  : 0;\n            border   : 0;\n            position : relative;\n        }\n\n        .mnubtn.shop1 .icon {\n            background-image:url(images/shop1.png);\n        }\n\n        .mnubtn.shop2 .icon {\n            background-image:url(images/shop2.png);\n        }\n\n        .mnubtn.shop3 .icon {\n            background-image:url(images/shop3.png);\n        }\n\n        .mnubtn.shop4 .icon {\n            background-image:url(images/shop4.png);\n        }\n\n        .mnubtn.shop SPAN {\n            display:none;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="span">\n            <div class="mnubtn">\n                <div class="icon"></div>\n                <div class="pointer"></div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:button name="c9-topbar-btn">\n    <a:style><![CDATA[\n        .c9-topbar-btn {\n            height              : 25px;\n            width               : 25px;\n            overflow            : hidden;\n            cursor              : pointer;\n            position            : relative;\n            cursor              : default;\n            -moz-user-select    : none;\n            -khtml-user-select  : none;\n            user-select         : none;\n            background-repeat   : no-repeat;\n            background-image    : url("images/c9-topbar-btns.png");\n            background-position : 0 0;\n        }\n\n        // dashboard\n        .c9-topbar-btn.c9-topbar-btnDown.dashboard {\n            background-position : -25px 0;\n        }\n        .c9-topbar-btn.c9-topbar-btnOver.dashboard {\n            background-position : -50px 0;\n        }\n        .c9-topbar-btn.dashboard {\n            background-position : 0 0;\n        }\n\n        // home\n        .c9-topbar-btn.c9-topbar-btnDown.home {\n            background-position : -25px -25px;\n        }\n        .c9-topbar-btn.c9-topbar-btnOver.home {\n            background-position : -50px -25px;\n        }\n        .c9-topbar-btn.home {\n            background-position : 0 -25px;\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="c9-topbar-btn"> </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n\n<a:button name="btn-default-css3">\n    <a:style><![CDATA[\n        .btn-default-css3 {\n            background-image: linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n\n            -moz-border-radius    : 6px;\n            -webkit-border-radius : 6px;\n            border-radius         : 6px;\n\n            text-shadow   : #383838 0px 1px 0px;\n            color: #ffffff;\n            font-weight: bold;\n            font-size: 14px;\n\n            -webkit-box-shadow: 0 0px 3px 0 #000000;\n            -moz-box-shadow: 0 0px 3px 0 #000000;\n            box-shadow: 0 0px 3px 0 #000000;\n\n            position: relative;\n        }\n\n        .win-deploy-target .btn-default-css3 {\n            font-size: 13px;\n        }\n\n        .btn-default-css3Over {\n            background-image: linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(92,92,98) 0%, rgb(116,116,119) 100%);\n        }\n\n        .btn-default-css3Focus {\n            background-image: linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n        }\n\n        .btn-default-css3Down {\n            background-image: linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(100,100,104) 0%, rgb(73,73,80) 100%);\n        }\n\n        .btn-default-css3Disabled {\n            background-image: linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(73,73,80) 0%, rgb(100,100,104) 100%);\n\n            text-shadow   : #626267 0px 1px 0px;\n            color: #38383d;\n        }\n\n        .btn-default-css3 .caption {\n            border-top: 1px solid #93939B;\n            padding: 3px 18px 4px;\n            -moz-border-radius    : 6px;\n            -webkit-border-radius : 6px;\n            border-radius         : 6px;\n\n            cursor: default;\n            text-align: center;\n        }\n\n        .btn-default-css3.btn-default-css3Over .caption {\n            border-top: 1px solid #ababb1;\n        }\n\n        .btn-default-css3.btn-default-css3Focus .caption {\n            border-top: 1px solid #6c6c74;\n        }\n        .btn-default-css3.btn-default-css3Down .caption {\n            border-top: 1px solid #93939b;\n        }\n        .btn-default-css3.btn-default-css3Disabled .caption {\n            border-top: 1px solid #93939b;\n        }\n\n        .btn-default-css3 .border {\n            display: none;\n\n            border: 1px solid #ffffff;\n\n            position: absolute;\n            top: 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            border-radius: 6px 6px 6px 6px;\n        }\n        .btn-default-css3.btn-default-css3Focus .border {\n\n        }\n        /*-----------*/\n\n        /*-- GREEN --*/\n        .btn-default-css3.btn-green {\n            background-image: linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n\n            text-shadow   : #068e02 0px 1px 0px;\n        }\n\n        .btn-default-css3Over.btn-green {\n            background-image: linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(53,164,51) 0%, rgb(109,183,67) 100%);\n        }\n\n        .btn-default-css3Focus.btn-green {\n            background-image: linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(70,165,19) 100%);\n        }\n\n        .btn-default-css3Down.btn-green {\n            background-image: linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(73,165,20) 0%, rgb(2,141,0) 100%);\n        }\n\n        .btn-default-css3Disabled.btn-green {\n            background-image: linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(2,141,0) 0%, rgb(73,165,20) 100%);\n\n            text-shadow   : #3da110 0px 1px 0px;\n            color: #037a01;\n        }\n\n        .btn-default-css3.btn-green .caption {\n            border-top: 1px solid #88c464;\n        }\n\n        .btn-default-css3.btn-default-css3Over.btn-green .caption {\n            border-top: 1px solid #57b357;\n        }\n\n        .btn-default-css3.btn-default-css3Focus.btn-green .caption {\n            border-top: 1px solid #88c464;\n        }\n        .btn-default-css3.btn-default-css3Down.btn-green .caption {\n            border-top: 1px solid #88c464;\n        }\n        .btn-default-css3.btn-default-css3Disabled.btn-green .caption {\n            border-top: 1px solid #88c464;\n        }\n        /*-----------*/\n        /*-- RED --*/\n        .btn-default-css3.btn-red {\n            background-image: linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n\n            text-shadow   : #b60000 0px 1px 0px;\n        }\n\n        .btn-default-css3Over.btn-red {\n            background-image: linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(197,51,51) 0%, rgb(213,51,51) 100%);\n        }\n\n        .btn-default-css3Focus.btn-red {\n            background-image: linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n        }\n\n        .btn-default-css3Down.btn-red {\n            background-image: linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(203,0,0) 0%, rgb(182,0,0) 100%);\n        }\n\n        .btn-default-css3Disabled.btn-red {\n            background-image: linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(182,0,0) 0%, rgb(203,0,0) 100%);\n\n            text-shadow   : #db0000 0px 1px 0px;\n            color: #9c0000;\n        }\n\n        .btn-default-css3.btn-red .caption {\n            border-top: 1px solid #e47979;\n        }\n\n        .btn-default-css3.btn-default-css3Over.btn-red .caption {\n            border-top: 1px solid #dd5757;\n        }\n\n        .btn-default-css3.btn-default-css3Focus.btn-red .caption {\n            border-top: 1px solid #dd5757;\n        }\n        .btn-default-css3.btn-default-css3Down.btn-red .caption {\n            border-top: 1px solid #cf5757;\n        }\n        .btn-default-css3.btn-default-css3Disabled.btn-red .caption {\n            border-top: 1px solid #dd5757;\n        }\n        /*-----------*/\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "div[1]/text()"\n          background = "."\n          icon       = ".">\n            <div class="btn-default-css3">\n                <div class="caption"> </div>\n                <div class="border"></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n\n<a:button name="btn-default-simple">\n    <a:style><![CDATA[\n        .btn-default-simple {\n            color: #ffffff;\n            font-weight: bold;\n            font-size: 14px;\n            position: relative;\n            cursor: default;\n        }\n\n        .btn-default-simpleOver {\n            color: #bfbfbf;\n        }\n\n        .win-deploy-target .btn-default-simple {\n            font-size          : 11px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          caption      = "text()"\n          background = "."\n          icon       = ".">\n            <div class="btn-default-simple">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:button>\n<a:checkbox name="checkbox">\n    <a:style><![CDATA[\n        .cbcontainer {\n            padding    : 2px 2px 2px 16px;\n            position   : relative;\n            overflow   : visible;\n            color      : #333;\n        }\n\n        .cbcontainer span {\n            font-family : Tahoma, Arial;\n            font-size   : 11px;\n            cursor      : default;\n            padding     : 1px 3px 2px 3px;\n            position    : relative;\n            top         : -2px;\n            overflow    : visible;\n            display     : inline-block;\n            line-height : 13px;\n            white-space        : nowrap;\n            text-overflow      : ellipsis;\n        }\n\n        .cbcontainerFocus span {\n            padding : 0px 2px 1px 2px;\n            border  : 1px dotted #BBB;\n        }\n\n        .cbcontainerChecked.cbcontainerDown.cbcontainerFocus .checkbox {\n            background-position : 0 -48px;\n        }\n\n        .cbcontainer .checkbox {\n            width      : 12px;\n            height     : 12px;\n            overflow   : hidden;\n            position   : absolute;\n            left       : 2px;\n            top        : 2px;\n            background : url("images/checkbox.png") no-repeat 0 -12px;\n        }\n        \n        .cbcontainerDown .checkbox {\n            background-position : 0 -36px;\n        }\n\n        .cbcontainerChecked .checkbox {\n            background-position : 0 -24px;\n        }\n\n        .cbcontainerError span {\n            background-color : #ffb500;\n            color            : #fbfbfb;\n        }\n\n        .cbcontainerDisabled .checkbox {\n            background-position : 0 -0px;\n        }\n\n        .cbcontainerDisabled span {\n            color : #bebebe;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit"><![CDATA[\n        .cbcontainer span {\n            top : -2px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'cbcontainer\'>\n                <div class=\'checkbox\'> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox name="checkbox-menu">\n    <a:style><![CDATA[\n        .cbmcontainer {\n            padding: 3px 16px 5px 23px;\n            white-space: nowrap;\n            cursor : default;\n            z-index:1100000;\n            position: relative;\n            height: 20px;\n        }\n\n        .cbmcontainer span {\n\n            font-family   : Tahoma, Arial;\n            font-size     : 11px;\n            line-height   : 14px;\n            color         : #f1f1f1;\n            cursor:default;\n            \n            padding     : 1px 3px 2px 0px;\n            position    : relative;\n            top         : -2px;\n            overflow    : visible;\n            display     : inline-block;\n            line-height : 13px;\n            white-space        : nowrap;\n            text-overflow      : ellipsis;\n        }\n\n        .cbmcontainerFocus span {\n        }\n        \n        .cbmcontainerOver  {\n            background-color : #393939;\n        }\n        \n        .cbmcontainerChecked.cbmcontainerDown.cbmcontainerFocus .checkbox {\n            \n        }\n\n        .cbmcontainer .checkbox {\n            width      : 12px;\n            height     : 12px;\n            overflow   : hidden;\n            position   : absolute;\n            left       : 2px;\n            top        : 1px;\n            background: none;\n        }\n        \n        .cbmcontainerDown .checkbox {\n            \n        }\n\n        .cbmcontainerChecked .checkbox {\n            background-image: url(images/check.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n\n        .cbmcontainerError span {\n            right: 15px;\n            margin-top: 0px;\n            z-index: 10;\n            text-align: right;\n            padding-left: 15px;\n            /*margin-right: -15px;\n            position : absolute;*/\n            float : right;\n        }\n\n        .cbmcontainerDisabled .checkbox {\n            background : none;\n        }\n\n        .cbmcontainerDisabled span {\n            color : #bebebe;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'cbmcontainer\'>\n                <div class=\'checkbox\'> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox name="checkbox_black">\n    <a:style><![CDATA[\n        .cbblack.cbcontainer {\n            padding    : 2px 2px 2px 20px;\n        }\n\n        .cbblack.cbcontainer span {\n            color : #C0C0C0;\n            top         : 0;\n        }\n\n        .cbblack.cbcontainer .checkbox {\n            width      : 16px;\n            height     : 17px;\n            background : url("images/checkbox_black.png") no-repeat 0 0;\n        }\n\n        .cbblack.cbcontainerOver .checkbox{\n            background-position : 0 -85px;\n        }\n\n        .cbblack.cbcontainerDown .checkbox{\n            background-position : 0 -17px;\n        }\n\n        .cbblack.cbcontainerChecked .checkbox {\n            background-position : 0 -34px;\n        }\n\n        .cbblack.cbcontainerOver.cbcontainerChecked .checkbox{\n            background-position : 0 -102px;\n        }\n\n        .cbblack.cbcontainerChecked.cbcontainerDown .checkbox {\n            background-position : 0 -51px;\n        }\n\n        .cbblack.cbcontainerError span {\n            background-color : #ffb500;\n            color            : #fbfbfb;\n        }\n\n        .cbblack.cbcontainerDisabled .checkbox {\n            background-position : 0 -68px;\n        }\n\n        .cbblack.cbcontainerDisabled span {\n            color : #bebebe;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'cbcontainer cbblack\'>\n                <div class=\'checkbox\'> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox name="checkbox_grey">\n    <a:style><![CDATA[\n        .cbgrey.cbcontainer {\n            padding    : 2px 2px 2px 20px;\n        }\n\n        .cbgrey.cbcontainer span {\n            color : #333;\n            top   : 1px;\n        }\n\n        .cbgrey.cbcontainer .checkbox {\n            width      : 16px;\n            height     : 17px;\n            background : url("images/checkbox_grey.png") no-repeat 0 0;\n        }\n\n        .cbgrey.cbcontainerOver .checkbox{\n            background-position : 0 -85px;\n        }\n\n        .cbgrey.cbcontainerDown .checkbox{\n            background-position : 0 -17px;\n        }\n\n        .cbgrey.cbcontainerChecked .checkbox {\n            background-position : 0 -34px;\n        }\n\n        .cbgrey.cbcontainerOver.cbcontainerChecked .checkbox{\n            background-position : 0 -102px;\n        }\n\n        .cbgrey.cbcontainerChecked.cbcontainerDown .checkbox {\n            background-position : 0 -51px;\n        }\n\n        .cbgrey.cbcontainerError span {\n            background-color : #ffb500;\n            color            : #fbfbfb;\n        }\n\n        .cbgrey.cbcontainerDisabled .checkbox {\n            background-position : 0 -68px;\n        }\n\n        .cbgrey.cbcontainerDisabled span {\n            color : #bebebe;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()" minheight="18" minwidth="18">\n            <div class=\'cbcontainer cbgrey\'>\n                <div class=\'checkbox\'> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:checkbox name="db-checkbox">\n    <a:style><![CDATA[\n        .db-checkbox {\n            overflow    : hidden;\n            position    : relative;\n            cursor      : default;\n            height      : 14px;\n            padding     : 2px 0 0 22px;\n            font-family : Arial;\n            font-size   : 12px;\n            color       : #404040;\n        }\n\n        .db-checkbox.bluecheck {\n            height      : 17px;\n        }\n\n        .db-checkbox .check {\n            width      : 16px;\n            height     : 16px;\n            position   : absolute;\n            top        : 0;\n            left       : 0;\n            background : url(images/checkbox.png) no-repeat 0 0;\n        }\n\n        .db-checkbox.bluecheck .check {\n            width      : 17px;\n            height     : 17px;\n            background : url(images/checkbox-blue.png) no-repeat -1px 2px;\n        }\n\n        .db-checkboxChecked {}\n\n        .db-checkboxChecked .check{\n            background-position: 0 -16px;\n        }\n        .bluecheck.db-checkboxChecked .check{\n            background-position: 0 -17px;\n        }\n\n        .db-checkboxOver {\n\n        }\n\n        .db-checkbox.bold {\n            font-weight : bold;\n            color       : #202020;\n        }\n\n        .vbox > DIV > .db-checkbox {\n            height  : 14px;\n            overflow: visible;\n        }\n\n        .db-checkboxDisabled {\n            color: #ababab;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n        .vbox > .db-checkbox {\n            height  : 16px;\n            overflow: visible;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main label="text()">\n            <div class="db-checkbox">-<div class="check"></div></div>\n        </a:main>\n    </a:presentation>\n</a:checkbox>\n<a:codeeditor name="codeeditor">\n    <a:style><![CDATA[\n        .ace_editor {\n          position: relative;\n          overflow: hidden;\n        }\n\n        .ace_scroller {\n          position: absolute;\n          overflow-x: scroll;\n          overflow-y: hidden;\n          background-color: #fbfbfb;\n          -webkit-border-top-left-radius: 6px;\n          -moz-border-radius-topleft: 6px;\n          border-top-left-radius: 6px;\n          top: 0;\n          bottom: 0\n        }\n\n        .ace_gutter {\n          -moz-user-select: -moz-none;\n          -khtml-user-select: none;\n          -webkit-user-select: none;\n          -o-user-select: none;\n          user-select: none;\n        }\n\n        .ace_editor .ace_sb {\n          position: absolute;\n          overflow-x: hidden;\n          overflow-y: scroll;\n          right: 0;\n        }\n\n        .ace_editor .ace_sb div {\n          position: absolute;\n          width: 1px;\n          left: 0px;\n        }\n\n        .ace_editor .ace_printMargin {\n          position: absolute;\n          height: 100%;\n          width: 1px;\n          background-color: rgb(191, 191, 191);\n        }\n\n        .ace_layer {\n          z-index: 0;\n          position: absolute;\n          overflow: hidden;\n          white-space: nowrap;\n          height: 100%;\n        }\n\n        .ace_text-layer {\n          font-family: Monaco, Menlo, Consolas, monospace;\n          color: black;\n        }\n\n        .ace_cursor-layer {\n          cursor: text;\n        }\n\n        .ace_cursor {\n          z-index: 3;\n          position: absolute;\n        }\n\n        .ace_line {\n          white-space: nowrap;\n        }\n\n        .ace_marker-layer {\n        }\n\n        .ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n          position: absolute;\n          z-index: 2;\n        }\n\n        .ace_marker-layer .ace_selection {\n          position: absolute;\n          z-index: 3;\n        }\n\n        .ace_marker-layer .ace_bracket {\n          position: absolute;\n          z-index: 4;\n        }\n\n        .ace_marker-layer .ace_active_line {\n          position: absolute;\n          z-index: 1;\n        }\n\n        .ceDisabled {\n            border: 1px solid #c3c3c3;\n            color: #bebebe;\n        }\n\n        .ceError{\n            border: 1px solid #ffb500;\n            padding : 5px;\n        }\n\n        /*** TM ***/\n\n       .ace_gutter-layer .ace_gutter-cell.ace_breakpoint {\n          background-image: url("icons/debugger/brkp_obj.png");\n          background-repeat: no-repeat;\n          background-position: 4px center;\n       }\n\n       .ace_gutter-layer .ace_gutter-cell.ace_breakpoint.ace_arrow {\n          background-image: url("icons/debugger/brkp_obj_current_line.png");\n          background-repeat: no-repeat;\n          background-position: 4px center;\n       }\n\n       .ace_gutter-layer .ace_gutter-cell.ace_arrow {\n          background-image: url("icons/debugger/current_line.png");\n          background-repeat: no-repeat;\n          background-position: 4px center;\n       }\n\n       .ace_gutter-layer .ace_gutter-cell.ace_stack {\n          background-image: url("icons/debugger/stack_co.png");\n          background-repeat: no-repeat;\n          background-position: 4px center;\n       }\n    ]]></a:style>\n    <a:presentation>\n        <a:main content=".">\n            <div class="ce"> </div>\n        </a:main>\n    </a:presentation>\n</a:codeeditor>\n\n<a:datagrid name="datagrid">\n    <a:style><![CDATA[\n        .datagrid{\n            position: relative;\n            border: 1px solid #c3c3c3;\n            background-color: white;\n            /*cursor: default;*/\n            overflow : hidden;\n\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n\n            padding: 19px 0 0 0;\n            color : #333;\n        }\n\n\n        .datagrid .headings{\n            position : relative;\n            top : 0;\n            left : 0;\n            height : 20px;\n            z-index : 10;\n            /*padding-left : 5px;*/\n            background-color : #e6e6e6;\n            margin : -20px 15px 0 0;\n            white-space : nowrap;\n        }\n\n        .noscrollbar .headings {\n    \t    margin : -21px 1px 0 0;\n\t\t}\n\t\t.noscrollbar .datagrid{\n\t\t    background : transparant;\n\t\t}\n\n        .datagrid .headings div{\n            background : -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(229,229,229)),color-stop(1, rgb(248,248,248)));\n            background: -moz-linear-gradient(center bottom,rgb(229,229,229) 0%,rgb(248,248,248) 100%);\n            overflow : hidden;\n            text-overflow : ellipsis;\n            color: #333;\n            border-bottom: 1px solid #BFBFBF;\n        }\n\n        .docktab .datagrid .headings div {\n            background-image: linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 49%, rgb(244,246,248) 50%, rgb(250,252,254) 100%);\n            border-bottom: 1px solid #e1e5ea;\n        }\n\n        .datagrid .headings div u{\n            padding : 2px 4px 1px 3px;\n            display : block;\n            height : 15px;\n            text-decoration : none;\n            border-left : 1px solid white;\n            border-right : 1px solid #bfbfbf;\n            border-top : 1px solid white;\n        }\n\n        .docktab .datagrid .headings div u{\n            border-top: 1px solid #fafcfe;\n            border-left : 1px solid #fafbfc;\n            border-right : 1px solid #c8c8c8;\n        }\n\n        .datagrid .headings div.hover,\n        .datagrid .headings div.down,\n        .datagrid .headings div.drag{\n            background : -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(221,221,221)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(221,221,221) 0%,rgb(255,255,255) 100%);\n            color : #555;\n        }\n\n        .datagrid .headings div.drag{\n            border : 1px solid white;\n        }\n\n        .datagrid .headings div.down u,\n        .datagrid .headings div.hover u {\n            border-left: 1px solid transparent;\n        }\n\n        .datagrid .headings div.ascending u{\n            background-image : url(images/sort_asc.gif);\n            background-repeat : no-repeat;\n            background-position : right 7px;\n        }\n\n\n        .datagrid .headings div.descending u {\n            background-image : url(images/sort_desc.gif);\n            background-repeat : no-repeat;\n            background-position : right 6px;\n        }\n\n        .datagrid .records{\n            overflow-x: hidden;\n            overflow-y: scroll;\n            height : 100%;\n            padding : 18px 0 0 0;\n            position : relative;\n            top : -19px;\n            white-space : nowrap;\n            border-color:white;\n            border-style:solid;\n            border-width:1px 0 0;\n        }\n\n        .with-noise .records {\n            background: #E1E1E1 url(images/dg_noise.png) repeat 0 0;\n        }\n\n        .noscrollbar .records{\n            overflow-y : hidden;\n        }\n\n        .datagrid .records .row span{\n            height : 18px;\n            background : white no-repeat 0 50%;\n            /*border-bottom : 1px solid #d6d6d6;*/\n        }\n\n        .datagrid .records .row span u{\n            padding : 2px 3px 2px 4px;\n            height : 15px;\n            display : block;\n            text-decoration : none;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n            overflow : hidden;\n            cursor: default;\n            border-right:1px solid #D6D6D6;\n            border-left : 1px solid white;\n        }\n\n        .with-noise .records .row span {\n            border-left : 1px solid #D1D1D1;\n            margin-left : -1px;\n        }\n\n        .with-noise .records .row span {\n            background-image: url(images/dg_noise.png);\n            background-repeat: repeat;\n            border-top: #f0f0f0;\n            background-color: #e1e1e1;\n        }\n        .noscrollbar .datagrid .records .row span{\n            background-color : transparent;\n        }\n\n        .datagrid .records .row{\n            height : 18px;\n            padding-left : 0;\n        }\n\n        .datagrid .records .highlight span{\n\n        }\n\n        .datagrid .records .highlight{\n\n        }\n\n        .datagridFocus .records .indicate span{\n            /*border: 1px dotted #BBB;\n            border-width : 1px 0 1px 0;*/\n            padding : 0;\n            color : #333;\n        }\n\n        .datagridFocus .records .indicate span u{\n        }\n\n        .datagridFocus .records .row span{\n        }\n\n        .datagrid .row:nth-child(4n-1) span{\n            background: #f0f0f0;\n        }\n        .with-noise .row:nth-child(4n-1) span {\n            background: #d1d1d1;\n            background-image: url(images/dg_noise.png);\n        }\n\n        .datagrid .records .testhead{\n            height : 22px;\n        }\n\n        .datagrid .records .testhead span {\n            border-top : 4px solid #c3c3c3;\n            /*background : #ddd;*/\n        }\n\n        .datagrid .records .current_execution span {\n            background : #d4e0c6;\n        }\n\n        .datagrid .records .selected, .datagrid .records .selected span{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #CECECE),color-stop(1, #DEDEDE));\n            background: -moz-linear-gradient(center bottom,#CECECE 0%,#DEDEDE 100%);\n        }\n        .datagridFocus .records .selected, .datagridFocus .records .selected span,\n        .datagridFocus .records .dragAppend, .datagridFocus .records .dragAppend span{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(1, rgb(64,145,216)));\n            background: -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 100%);\n            color : white;\n        }\n        /*.datagrid .records .editing, .datagrid .records .editing span{\n            background-color : white;\n            color : #333;\n        }*/\n        .datagridFocus .records .selected span u {\n            border-left : 1px solid #8bc0ed;\n        }\n\n        .datagrid .move_pointer{\n            height : 100px;\n            width : 2px;\n            position : absolute;\n            top : 0;\n            margin : -10px 0 0 -4px;\n            width : 9px;\n            height : 38px;\n            background : url(images/column_picker.gif) no-repeat 0 0;\n            overflow : hidden;\n            z-index : 1000;\n        }\n\n        .datagrid .size_pointer{\n            border : 1px dotted gray;\n            border-width : 0 1px 0 1px;\n            height : 100%;\n            position : absolute;\n            top : 0px;\n            z-index : 1000;\n            cursor : e-resize;\n            cursor : ew-resize;\n        }\n\n        .datagrid .message{\n            font-weight : normal;\n            color : #333;\n            padding : 0 0 10px 50px;\n            font-size : 11px;\n            margin-top : 10px;\n            /*text-align : center;*/\n            border-bottom : 1px solid #eee;\n        }\n\n        .datagrid .message label{\n            padding : 2px 0 0 4px;\n            height : 14px;\n            display : inline-block;\n            position : relative;\n            top : -3px;\n        }\n\n        /*.datagrid .message span{\n            background : url(icons/cog.png) no-repeat left bottom;\n            width : 16px;\n            height : 16px;\n            display : inline-block;\n        }*/\n\n        .datagrid .loading,\n        .datagrid .empty,\n        .datagrid .offline{\n            padding : 5px;\n            margin : 0;\n            white-space : normal;\n        }\n\n        .datagrid .loading span,\n        .datagrid .empty span,\n        .datagrid .offline span{\n            background : white;\n            display : inline;\n        }\n\n        .datagrid .empty {\n            position:absolute;\n            top:18px;\n            left:0;\n            right:0;\n            height:15px;\n            line-height:12px;\n        }\n\n        .datagrid .root .message{\n            padding : 0;\n            margin : 0;\n            border-bottom : 0;\n            height : 0;\n        }\n        .datagrid .root .message label{\n            top : 0;\n            padding : 0;\n            height : 0;\n            overflow : hidden;\n        }\n\n        .pointer{\n            display : none;\n        }\n\n        .dginfo{\n            display : none;\n            overflow : hidden;\n            white-space : normal;\n            padding : 5px;\n            background-color : #f3f3f3;\n            margin-top : 3px;\n            margin-left : 6px;\n            position : relative;\n            left : -3px;\n            margin-bottom : 3px;\n        }\n\n        .dginfo h3{\n            margin : 0 0 5px 0;\n        }\n\n        .dginfo p{\n            margin : 0;\n        }\n\n        .datagrid .records .stdel, .datagridFocus .records .stdel,\n        .datagrid .records .stdel span, .datagridFocus .records .stdel span{\n            color : #ccc;\n        }\n\n        .dragdg{\n            border : 2px solid black;\n            width : 10px;\n            height : 5px;\n        }\n\n        .datagrid .records .dragInsert{\n            height : 19px;\n            margin-top : -1px;\n        }\n\n        .datagrid .records .dragInsert span{\n            border-top : 1px solid gray;\n        }\n\n        .datagrid blockquote{\n            padding : 0;\n            margin : 0;\n            display: none;\n            height: 0;\n            overflow: hidden;\n            background: repeat-y 0px center;\n        }\n\n        .datagrid .records span.treecell u{\n            text-decoration : none;\n            display : inline-block;\n            width : 100%;\n            padding : 1px 2px 3px 2px;\n            border : 0;\n        }\n\n        .datagrid .records span.treecell u {\n            background-repeat: no-repeat;\n            padding-left:20px;\n        }\n\n        .datagrid.noicon .records span.treecell u {\n            padding-left: 0;\n        }\n\n        .datagrid .records .row .treecell .iconCell, .datagrid .records .row .iconCell  {\n            background-position : 1px 1px;\n            background-repeat   : no-repeat;\n            padding             : 2px 0 2px 22px;\n        }\n\n        .datagrid .treecell strong{\n            width : 9px;\n            height : 9px;\n            margin : 4px 4px 0 4px;\n            position : relative;\n            top : -5px;\n            display : inline-block;\n        }\n\n        .datagrid .plus>.treecell strong,\n        .datagrid .pluslast>.treecell strong{\n            background-image:url(images/plus.png);\n        }\n\n        .datagrid .min>.treecell strong,\n        .datagrid .minlast>.treecell strong{\n            background-image:url(images/min.png);\n        }\n\n        .datagrid .slider{\n            margin : 5px 5px 0 3px;\n        }\n\n        .datagrid .tb{\n            border : 0;\n            padding : 2px 0 4px 4px;\n            background : white;\n            border-left : 1px solid #eee;\n            border-bottom : 1px solid #eee;\n            height : 13px;\n            position : relative;\n            top : -6px;\n        }\n\n        .datagrid .treecell .tb{\n            padding : 1px 0 0 0;\n            top : 0;\n            border : 0;\n            border-bottom : 1px solid #eee;\n        }\n\n\n    ]]></a:style>\n    <a:style condition="apf.isIE &amp;&amp; !apf.isIE8"><![CDATA[\n        .datagrid .headings div{\n            float : left;\n        }\n\n        .datagrid .records .row span{\n            float : left;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isGecko &amp;&amp; apf.versionGecko &lt; 3"><![CDATA[\n        .datagrid .headings{\n            padding-top : 2px;\n            height : 15px;\n        }\n\n        .datagrid .headings div{\n            display : -moz-inline-box;\n            overflow : visible;\n            position : relative;\n        }\n\n        .datagrid .records{\n        }\n\n        .datagrid .records .row span{\n            display : -moz-inline-box;\n            overflow : visible;\n            position : relative;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWin">\n    \t.datagrid .headings{\n            margin : -20px 17px 0 0;\n        }\n    </a:style>\n    <a:style condition="apf.isWebkit"><![CDATA[\n        .datagrid {\n            position: relative;\n            border: 1px solid #c3c3c3;\n            background-color: white;\n            /*cursor: default;*/\n            overflow : hidden;\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n            padding: 0;\n            color : #333;\n        }\n\n        .datagrid .headings {\n            position : absolute;\n            top : 20px;\n            left : 0;\n            right: -1px;\n            height : 20px;\n            z-index : 10;\n            background-color : #e6e6e6;\n            white-space : nowrap;\n        }\n\n        .datagrid .records {\n            overflow-x: hidden;\n            overflow-y: scroll;\n            position : absolute;\n            top : 0px;\n            bottom:0;\n            height:auto;\n            left:0;\n            right:0;\n            white-space : nowrap;\n            border-color:white;\n            border-style:solid;\n            border-width:1px 0 0;\n            display:block;\n            margin:0;\n        }\n\n        .noscrollbar .records{\n            overflow-y : hidden;\n        }\n\n        .datagrid div.records .treecell strong {\n\t\t\ttop : 0px;\n\t\t}\n\n        .draggrid .treecell .iconCell,\n        .datagrid .records span.treecell .iconCell {\n            padding : 2px 0 1px 24px;\n        }\n    ]]></a:style>\n\n\n    <a:presentation>\n        <a:main head="div[1]" container="div[3]" pointer="div[2]" widthdiff="1" iframe2="true">\n            <div class="datagrid">\n                <div class="headings">\n\n                </div>\n                <div class="pointer"> </div>\n                <div class="records"> </div>\n            </div>\n        </a:main>\n\n        <a:headitem class="." caption="u/text()">\n            <div><u>-<span/></u></div>\n        </a:headitem>\n\n        <a:rowheaditem class="." caption="text()">\n            <span>-</span>\n        </a:rowheaditem>\n\n        <a:item class="." container="following-sibling::blockquote">\n            <div class="row"/>\n            <blockquote> </blockquote>\n        </a:item>\n\n        <a:dragindicator>\n            <div class="dragdg"> </div>\n        </a:dragindicator>\n\n        <a:cell caption="u"><span><u>-</u></span></a:cell>\n\n        <a:treecell caption="u" openclose="strong" editoroffset="41"><span class="treecell"><strong> </strong><u>-</u></span></a:treecell>\n\n        <a:container container=".">\n            <div class="dginfo">-</div>\n        </a:container>\n\n        <a:loading>\n            <div class="message"><span/><label>Calculating...</label></div>\n        </a:loading>\n\n        <a:empty caption=".">\n            <div class="empty"> </div>\n        </a:empty>\n    </a:presentation>\n</a:datagrid>\n<a:datagrid name="dgcheck">\n    <a:style><![CDATA[\n        .dgcheck {\n            position         : relative;\n            background-color : white;\n            cursor           : default;\n            font-family      : Tahoma, Arial;\n            font-size        : 12px;\n            padding          : 16px 0 0 0;\n            color            : #333;\n        }\n\n        .dgcheck .headings {\n            position         : relative;\n            top              : 0;\n            left             : 0;\n            height           : 15px;\n            z-index          : 10;\n            margin           : -16px 16px 0 0;\n            border           : 1px solid #d6d6d6;\n            border-left      : 0;\n            border-right     : 0;\n            white-space      : nowrap;\n\n            background    : #e6e6e6 no-repeat 0 50%;\n            filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#fefefe\', endColorstr=\'#ebebeb\');\n            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#fefefe\', endColorstr=\'#ebebeb\')";\n\n            background: -webkit-gradient(linear, left top, left bottom, from(#fefefe), color-stop(1, #ebebeb));\n            -webkit-background-origin: padding-box;\n            -webkit-background-clip: content-box;\n\n            background:-moz-linear-gradient(center bottom, #ebebeb 0%, #fefefe 100%) repeat scroll 0 0 transparent;\n        }\n\n        .noscrollbar .headings {\n            margin : -21px 1px 0 0;\n        }\n\n        .noscrollbar .dgcheck{\n            background : transparant;\n        }\n\n        .dgcheck .headings div {\n            display       : inline-block;\n            height        : 15px;\n            overflow      : hidden;\n            text-overflow : ellipsis;\n            color         : #202020;\n            text-shadow   : rgba(255, 255, 255, 1) 0px 1px 0px;\n\n            background    : #e6e6e6 no-repeat 0 50%;\n            filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#fefefe\', endColorstr=\'#ebebeb\');\n            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#fefefe\', endColorstr=\'#ebebeb\')";\n\n            background: -webkit-gradient(linear, left top, left bottom, from(#fefefe), color-stop(1, #ebebeb));\n            -webkit-background-origin: padding-box;\n            -webkit-background-clip: content-box;\n\n            background:-moz-linear-gradient(center bottom, #ebebeb 0%, #fefefe 100%) repeat scroll 0 0 transparent;\n        }\n\n        .dgcheck .headings div u {\n            padding         : 1px 4px 3px 5px;\n            display         : inline-block;\n            height          : 12px;\n            text-decoration : none;\n            border-left     : 1px solid #d6d6d6;\n            font-size       : 11px;\n            position        : relative;\n        }\n\n        .dgcheck .headings div.hover {\n\n        }\n\n        .dgcheck .headings div.down,\n        .dgcheck .headings div.drag {\n\n        }\n\n        .dgcheck .headings div.drag {\n\n        }\n\n        .dgcheck .headings div.ascending,\n        .dgcheck .headings div.descending {\n            filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#d2d2d2\', endColorstr=\'#e2e2e2\');\n            -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#d2d2d2\', endColorstr=\'#e2e2e2\')";\n\n            background: -webkit-gradient(linear, left top, left bottom, from(#d2d2d2), color-stop(1, #e2e2e2));\n            -webkit-background-origin: padding-box;\n            -webkit-background-clip: content-box;\n\n            background:-moz-linear-gradient(center bottom, #d2d2d2 0%, #e2e2e2 100%) repeat scroll 0 0 transparent;\n        }\n\n        .dgcheck .records {\n            overflow-x   : hidden;\n            overflow-y   : scroll;\n            height       : 100%;\n            margin-top   : -17px;\n            padding      : 17px 25px 0 0;\n            position     : relative;\n            top          : 0;\n            white-space  : nowrap;\n        }\n\n        .noscrollbar .records {\n            overflow-y : hidden;\n        }\n\n        .dgcheck .records DIV:nth-of-type(2n) SPAN {\n            background-color : white;\n            border-bottom    : 1px solid white;\n        }\n\n        .dgcheck .records DIV:nth-of-type(2n+1) SPAN {\n            background-color : #ecf0f4;\n            border-bottom    : 1px solid #ecf0f4;\n        }\n\n        .dgcheck .records .row span {\n            display       : inline-block;\n            height        : 18px;\n            background    : white no-repeat 0 50%;\n        }\n\n        .dgcheck .records .row span u {\n            padding         : 2px 3px 2px 4px;\n            height          : 15px;\n            display         : inline-block;\n            text-decoration : none;\n            border-left     : 1px solid #d2d2d2;\n\n            text-overflow   : ellipsis;\n            white-space     : nowrap;\n            overflow        : hidden;\n        }\n\n        .dgcheck .records .row SPAN:nth-of-type(1) U {\n            border-left : 1px solid #f4f4f4;\n        }\n\n        .noscrollbar .dgcheck .records .row span{\n            background-color : transparent;\n        }\n\n        .dgcheck .records .row{\n            height       : 19px;\n            padding-left : 0;\n            border-top:0;\n        }\n\n        .dgcheck .records .highlight span{\n\n        }\n\n        .dgcheck .records .highlight{\n\n        }\n\n        .dgcheckFocus .records .indicate span{\n            /*border: 1px dotted #BBB;\n            border-width : 1px 0 1px 0;*/\n            padding : 0;\n            color : #333;\n        }\n\n        .dgcheckFocus .records .indicate span u{\n        }\n\n        .dgcheckFocus .records .row span{\n        }\n\n        .dgcheck .records DIV.selected,\n        .dgcheck .records DIV.selected span{\n            background-color : #6e7e8d;\n            color            : white;\n        }\n\n        .dgcheckFocus .records DIV.selected,\n        .dgcheckFocus .records DIV.selected span{\n            color            : white;\n            background-color : #6e7e8d;\n        }\n\n        .dgcheck .records DIV.selected span,\n        .dgcheckFocus .records DIV.selected span {\n            border-bottom : 1px solid #6e7e8d;\n        }\n\n        .dgcheck .records DIV.editing,\n        .dgcheck .records DIV.editing span{\n            background-color : white;\n            color : #333;\n        }\n\n        .dgcheck .move_pointer{\n            height : 100px;\n            width : 2px;\n            position : absolute;\n            top : 0;\n            margin : -10px 0 0 -4px;\n            width : 9px;\n            height : 38px;\n            background : url(images/column_picker.gif) no-repeat 0 0;\n            overflow : hidden;\n            z-index : 1000;\n        }\n\n        .dgcheck .size_pointer{\n            border : 1px dotted gray;\n            border-width : 0 1px 0 1px;\n            height : 100%;\n            position : absolute;\n            top : 0px;\n            z-index : 1000;\n            cursor : w-resize;\n        }\n\n        .dgcheck .message{\n            font-weight : normal;\n            color : #333;\n            padding : 0 0 10px 50px;\n            font-size : 11px;\n            margin-top : 10px;\n            /*text-align : center;*/\n            border-bottom : 1px solid #eee;\n        }\n\n        .dgcheck .message label{\n            padding : 2px 0 0 4px;\n            height : 14px;\n            display : inline-block;\n            position : relative;\n            top : -3px;\n        }\n\n        /*.dgcheck .message span{\n            background : url(icons/cog.png) no-repeat left bottom;\n            width : 16px;\n            height : 16px;\n            display : inline-block;\n        }*/\n\n        .dgcheck .loading, .dgcheck .empty, .dgcheck .offline{\n            padding : 5px;\n            margin : 0;\n        }\n\n        .dgcheck .loading span, .dgcheck .empty span, .dgcheck .offline span{\n            background : white;\n            display : inline;\n        }\n\n        .pointer{\n            display : none;\n        }\n\n        .dginfo{\n            display : none;\n            overflow : hidden;\n            white-space : normal;\n            padding : 5px;\n            background-color : #f3f3f3;\n            margin-top : 3px;\n            margin-left : 6px;\n            position : relative;\n            left : -3px;\n            margin-bottom : 3px;\n        }\n\n        .dginfo h3{\n            margin : 0 0 5px 0;\n        }\n\n        .dginfo p{\n            margin : 0;\n        }\n\n        .dgcheck .records .stdel, .dgcheckFocus .records .stdel,\n        .dgcheck .records .stdel span, .dgcheckFocus .records .stdel span{\n            color : #ccc;\n        }\n\n        .dragdg{\n            border : 2px solid black;\n            width : 10px;\n            height : 5px;\n        }\n\n        .dgcheck .records .dragInsert{\n            border-top : 2px solid gray;\n            height : 17px;\n        }\n\n        .dgcheck .records .dragInsert span{\n            padding-top : 0px;\n            margin-bottom : 0;\n            background-position : 0 0;\n        }\n\n        .dgcheck blockquote{\n            padding : 0;\n            margin : 0;\n            display: none;\n            height: 0;\n            overflow: hidden;\n            background: repeat-y 0px center;\n        }\n\n        .dgcheck .records span.treecell u{\n            text-decoration : none;\n            display : inline-block;\n            padding : 1px 2px 3px 2px;\n            border : 0;\n        }\n\n        .dgcheck .treecell strong{\n            width : 9px;\n            height : 9px;\n            margin : 4px 4px 0 4px;\n            position : relative;\n            top : -5px;\n            display : inline-block;\n        }\n\n        .dgcheck .plus>.treecell strong,\n        .dgcheck .pluslast>.treecell strong{\n            background-image:url(images/plus.png);\n        }\n\n        .dgcheck .min>.treecell strong,\n        .dgcheck .minlast>.treecell strong{\n            background-image:url(images/min.png);\n        }\n\n        .dgcheck .slider{\n            margin : 5px 5px 0 3px;\n        }\n\n        .dgcheck .tb{\n            border : 0;\n            padding : 2px 0 4px 4px;\n            background : white;\n            border-left : 1px solid #eee;\n            border-bottom : 1px solid #eee;\n            height : 13px;\n            position : relative;\n            top : -6px;\n        }\n\n        .dgcheck .treecell .tb{\n            padding : 1px 0 0 0;\n            top : 0;\n            border : 0;\n            border-bottom : 1px solid #eee;\n        }\n\n        .dgcheck b {\n            overflow    : hidden;\n            margin      : 2px;\n            width       : 12px;\n            height      : 12px;\n            background  : url("images/tree_checkbox.png") no-repeat 0 -12px;\n            float       : left;\n        }\n\n        .dgcheck .treecell b {\n            margin-left : -31px;\n        }\n\n        .dgcheck .checkcell {\n            position    : relative;\n        }\n\n        .dgcheck .checkcell B {\n            float:none;\n            margin: 0;\n            position:absolute;\n            top:3px;\n            left:50%;\n            margin-left:-6px;\n        }\n\n        .dgcheck .records .row .checkcell U {\n            border-left:1px solid #f4f4f4;\n            width:0;\n            padding:2px 0;\n        }\n\n        .dgcheck .checked b {\n            background-position : 0 -24px;\n        }\n\n        .dgcheck .partial b {\n            background-position : 0 -48px;\n        }\n\n        .dgcheckDisabled .checked b {\n            background-position : 0 -0px;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isIE &amp;&amp; !apf.isIE8"><![CDATA[\n        .dgcheck .headings div{\n            float : left;\n        }\n\n        .dgcheck .records .row span{\n            float : left;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isGecko &amp;&amp; apf.versionGecko &lt; 3"><![CDATA[\n        .dgcheck .headings{\n            padding-top : 2px;\n            height : 15px;\n        }\n\n        .dgcheck .headings div{\n            display : -moz-inline-box;\n            overflow : visible;\n            position : relative;\n        }\n\n        .dgcheck .records{\n        }\n\n        .dgcheck .records .row span{\n            display : -moz-inline-box;\n            overflow : visible;\n            position : relative;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main head="div[1]" container="div[3]" pointer="div[2]" widthdiff="1" iframe2="true">\n            <div class="dgcheck">\n                <div class="headings">\n\n                </div>\n                <div class="pointer"> </div>\n                <div class="records"> </div>\n            </div>\n        </a:main>\n\n        <a:headitem class="." caption="u/text()">\n            <div><u>-<span/></u></div>\n        </a:headitem>\n\n        <a:rowheaditem class="." caption="text()">\n            <span>-</span>\n        </a:rowheaditem>\n\n        <a:item class="." container="following-sibling::blockquote">\n            <div class="row"/>\n            <blockquote> </blockquote>\n        </a:item>\n\n        <a:dragindicator>\n            <div class="dragdg"> </div>\n        </a:dragindicator>\n\n        <a:cell caption="u"><span><u>-</u></span></a:cell>\n\n        <a:checkcell caption="u" check="b"><span class="checkcell"><b> </b><u>-</u></span></a:checkcell>\n\n        <a:treecell caption="u" check="b" openclose="strong"><span class="treecell"><strong> </strong><b> </b><u>-</u></span></a:treecell>\n\n        <a:treecheckcell caption="u" check="b" openclose="strong"><span class="treecell"><strong> </strong><b> </b><u>-</u></span></a:treecheckcell>\n\n        <a:container container=".">\n            <div class="dginfo">-</div>\n        </a:container>\n\n        <a:loading>\n            <div class="message"><span/><label>Calculating...</label></div>\n        </a:loading>\n\n        <a:empty caption=".">\n            <div class="empty"> </div>\n        </a:empty>\n    </a:presentation>\n</a:datagrid>\n\n<a:divider name="divider">\n    <a:style><![CDATA[\n        .divider{\n            height : 0;\n            border: 1px solid white;\n            border-width : 1px 0 1px 0;\n            border-color : #c3c3c3 white white #c3c3c3;\n            line-height : 0;\n            cursor : default;\n        }\n\n        .hbox .divider, .vdivider{\n            width : 0;\n            margin : 0 10px 0 10px;\n            height: 17px;\n            border-width : 0 1px 0 1px;\n            height: 17px;\n        }\n\n        .divider span{\n            color : #333;\n            background : #f5f5f5;\n            padding : 0 2px 0 2px;\n            position : relative;\n            top : -1px;\n            display : none;\n            font-size : 8pt;\n        }\n\n        .table .divider, .vbox .divider, .hbox .divider{\n            margin : 0;\n        }\n\n        .modal-divider {\n            border-color : #b0b2b4 #E6E6E6 #E6E6E6 #b0b2b4;\n        }\n        \n        .divider-status-bar {\n            border: none;\n            background: url(images/toolbar-divider.png) 0px 0px repeat-y;\n        }\n        \n        .ace_dark .divider-status-bar {\n            background: url(images/toolbar-divider.png) -6px 0px repeat-y;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." caption="span" minheight="2" minwidth="2">\n            <div class="divider"><span> </span> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider name="divider_console">\n    <a:style><![CDATA[\n        .divider_console {\n            width : 0;\n            height:23px;\n            border-left:1px solid black;\n            border-right:1px solid #333333;\n            cursor : default;\n        }\n\n        .tab_console .btncontainer > .divider_console {\n            height:23px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." caption="." minheight="2" minwidth="0">\n            <div class="divider_console"> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n\n<a:divider name="divider-debugpanel">\n    <a:style><![CDATA[\n        .divider-debugpanel {\n            position      : relative;\n            overflow      : hidden;\n            height        : 8px;\n            z-index       : 1;\n        }\n\n        .divider-debugpanel .container {\n            border-top    : 1px dotted #000000;\n            border-bottom : 1px dotted #39393b;\n        }\n\n        .divider-debugpanel .inner_container {\n            border-bottom : 1px dotted #000000;\n            border-top    : 1px dotted #39393b;\n        }\n\n        .divider-debugpanel:hover {\n            position      : relative;\n            overflow      : hidden;\n        }\n\n        .divider-debugpanel:hover .container {\n            border-top    : 1px dotted #737373;\n            border-bottom : 1px dotted #040404;\n        }\n\n        .divider-debugpanel:hover .inner_container {\n            border-bottom : 1px dotted #737373;\n            border-top    : 1px dotted #040404;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isGecko">\n        .divider-debugpanel div div {\n            position : relative;\n            left : -1px;\n        }\n    </a:style>\n\n    <a:presentation>\n        <a:main container="div/div" caption="div/div">\n            <div class="divider-debugpanel">\n                <div class="container">\n                    <div class="inner_container"> </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n    <a:divider name="c9-divider">\n    <a:style><![CDATA[\n        .c9-divider {\n            position   : relative;\n            overflow   : hidden;\n            width:0px;\n            height     : 23px;\n            border-left:1px solid #000000;\n            border-right:1px solid #404040;\n        }\n        .expandedpanel .c9-divider.runcommandsdivider {\n            display: none;\n        }\n\n        .expandedpanel .c9-divider,\n        .dockbar .c9-divider {\n            border-left:1px solid #1d1e1f;\n            border-right:1px solid #373737;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main>\n            <div class="c9-divider"> </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider name="c9-divider-hor">\n    <a:style><![CDATA[\n        .c9-divider-hor {\n            position   : relative;\n            height     : 0px;\n            border-top:1px solid #000000;\n            border-bottom:1px solid #404040;\n        }\n\n        .c9-divider-hor span{\n            color : #606060;\n            text-shadow: rgba(0, 0, 0, 1) 0px 1px 0px;\n            background : #1d1d1d;\n            font-size: 7pt;\n            top: -8px;\n            position: relative;\n            left: 4px;\n            padding : 0 3px 0 3px;\n            display :none;\n        }\n\n        .c9-divider-horCaption span{\n            display : block;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="span">\n            <div class="c9-divider-hor"><span> </span></div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n<a:divider name="c9-divider-double">\n    <a:style><![CDATA[\n        .c9-divider-double {\n            position   : relative;\n            overflow   : hidden;\n            width      : 2px;\n            height     : 23px;\n            border-left:1px solid #000000;\n            border-right:1px solid #404040;\n        }\n\n        .c9-divider-double DIV {\n            position:relative;\n            width:1px;\n            height:23px;\n            border-left:1px solid #404040;\n            border-right:1px solid #000000;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main>\n            <div class="c9-divider-double">\n                <div></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:divider>\n\n<a:dropdown name="black_dropdown">\n    <a:style><![CDATA[\n        .black_dropdown {\n            position : relative;\n            overflow : hidden;\n            height   : 21px;\n\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius         : 5px;\n            border                : 1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            background         : #383838;\n            filter             : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#383838\', endColorstr=\'#323232\');\n            -ms-filter         : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#383838\', endColorstr=\'#323232\')";\n            background         : -webkit-gradient(linear, left top, left bottom, from(#383838), color-stop(1, #323232));\n            background         :-moz-linear-gradient(center bottom, #323232 0%, #383838 100%) repeat scroll 0 0 transparent;\n         }\n\n         .black_dropdown .label {\n            position:relative;\n            overflow:hidden;\n            height:17px;\n            padding:4px 0 0 6px;\n            margin:0 15px 0 0;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            border-right:1px solid #1c1c1c;\n         }\n\n         .black_dropdown .button {\n            width:14px;\n            border-left:1px solid #4d4c4d;\n            height:21px;\n            position:absolute;\n            top:0;\n            right:0;\n            background:url(images/btn-arrow.png) no-repeat 4px 9px;\n         }\n\n         .black_dropdownDown {\n            background         : #2d2d2d;\n            filter             : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#272727\', endColorstr=\'#2d2d2d\');\n            -ms-filter         : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#272727\', endColorstr=\'#2d2d2d\')";\n            background         : -webkit-gradient(linear, left top, left bottom, from(#272727), color-stop(1, #2d2d2d));\n            background         :-moz-linear-gradient(center bottom, #2d2d2d 0%, #272727 100%) repeat scroll 0 0 transparent;\n         }\n\n         .c9-optionList {\n            width               : 174px;\n            overflow            : hidden;\n            z-index             : 99999;\n            position            : absolute;\n            margin              : 0 0 0 0;\n            display             : none;\n            background-color    : #1c1c1c;\n            border              : 1px solid rgba(255, 255, 255, 0.1);\n            padding             : 0 0 0 0;\n\n            -moz-box-shadow    : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n            -webkit-box-shadow : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n            box-shadow         : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n\n            filter             : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#1c1c1c\', endColorstr=\'#262626\');\n            -ms-filter         : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#1c1c1c\', endColorstr=\'#262626\')";\n            background         : -webkit-gradient(linear, left top, left bottom, from(#1c1c1c), color-stop(0.9, #262626));\n            background         :-moz-linear-gradient(center bottom, #262626 0%, #1c1c1c 20%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-optionList .c9-dd-item {\n            height:18px;\n            padding:3px 6px 0 6px;\n            position:relative;\n            overflow:hidden;\n            font-family   : Tahoma, Arial;\n            font-size     : 11px;\n            line-height   : 14px;\n            color         : white;\n            cursor:default;\n        }\n\n        .c9-optionList .c9-dd-item.hover {\n            background-color : #292929;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1" item-height="21" minheight="23" maxheight="23">\n            <div class="black_dropdown">\n                <div class="label">-</div>\n                <div class="button"> </div>\n            </div>\n        </a:main>\n        <a:container contents=".">\n            <div class="c9-optionList">\n            </div>\n        </a:container>\n        <a:item\n          class       = "."\n          caption     = "text()"\n          select      = "."\n          inherit     = "true">\n            <div class="c9-dd-item">-</div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n<a:dropdown name="dropdown">\n    <a:style><![CDATA[\n        .dropdown{\n            position: relative;\n            background-color: #dedede;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(222,222,222)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(222,222,222) 0%,rgb(255,255,255) 100%);\n            -webkit-border-radius: 2px;\n            -moz-border-radius: 2px;\n            border-radius: 2px;\n            -webkit-box-shadow: 0px 1px 1px #9fa0a3;\n            -moz-box-shadow: 0px 1px 1px #9fa0a3;\n            box-shadow: 0px 1px 1px #9fa0a3;\n            border-top: 1px solid #dddddd;\n            border-bottom: 1px solid #fafafa;\n            border-left: 1px solid #fafafa;\n            border-right: 1px solid #fafafa;\n            width:  134px;\n            height: 15px;\n            margin: 0;\n            padding : 2px 21px 2px 0;\n\n            color: #333;\n            font-family : Tahoma, Arial;\n            font-size : 11px;\n        }\n\n        .dropdownError {\n\n        }\n\n        .dropdownDisabled {\n            color: #bebebe;\n        }\n\n        .dropdownOver {\n\n        }\n\n        .dropdownDown {\n            position: relative;\n        }\n\n        .dropdown .dropdownArrow {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(222,222,222)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(222,222,222) 0%,rgb(255,255,255) 100%);\n            height:15px;\n            margin: 2px 0 4px;\n            position:absolute;\n            right:0;\n            top:0;\n            width:18px;\n\n            -webkit-border-top-right-radius: 2px;\n            -webkit-border-bottom-right-radius: 2px;\n            -moz-border-radius-topright: 2px;\n            -moz-border-radius-bottomright: 2px;\n            border-top-right-radius: 2px;\n            border-bottom-right-radius: 2px;\n        }\n\n        .dropdown .dropdownArrow span {\n            background: url("images/ddarrow.png") no-repeat center center;\n            display:block;\n            height:15px;\n            position:absolute;\n            width:18px;\n        }\n\n        .dropdown .dropdownArrow div {\n            border-left:1px solid #B9B9B9;\n            height:13px;\n            width: 1px;\n            background-color: #fff;\n            padding-bottom:2px;\n        }\n\n        .dropdown .dropdownlabel{\n            padding: 1px 1px 1px 5px;\n            cursor : default;\n            height: 13px;\n            margin : 0 0 0 2px;\n            overflow : hidden;\n            white-space : nowrap;\n            text-overflow : ellipsis;\n        }\n\n        .dropdownFocus .dropdownlabel {\n            border: 1px dotted #B8B8B8;\n            padding: 0 0 0 4px;\n        }\n\n        .dropdownError .dropdownArrow {\n\n        }\n\n        .dropdownInitial .dropdownArrow {\n        }\n\n        .dropdownFocus .dropdownArrow {\n            background: none;\n        }\n\n        .dropdownOver .dropdownArrow {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.48, rgb(207,207,207)),color-stop(0.53, rgb(230,230,230)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(207,207,207) 48%,rgb(230,230,230) 53%,rgb(255,255,255) 100%);\n        }\n\n        .dropdownDown .dropdownArrow {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.48, rgb(255,255,255)),color-stop(0.53, rgb(230,230,230)),color-stop(1, rgb(207,207,207)));\n            background: -moz-linear-gradient(center bottom,rgb(255,255,255) 48%,rgb(230,230,230) 53%,rgb(207,207,207) 100%);\n        }\n\n        .optionList{\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 120px;\n            margin-top : 2px;\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n            -webkit-box-shadow: 0 2px 8px #8A8A8A;\n            -moz-box-shadow: 0 2px 8px #8A8A8A;\n            box-shadow: 0 2px 8px #8A8A8A;\n            background: #ffffff;\n            z-index: 1000;\n            color: #333333;\n            font-family : Tahoma, Arial;\n            font-size : 11px;\n            display : none;\n            overflow : auto;\n        }\n\n        .optionList .dditem {\n            display: block;\n            height: 16px;\n            padding: 2px 3px 2px 20px;\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            background-color: white;\n            color: #333333;\n            position: relative;\n            cursor: default;\n        }\n\n        .optionList .dditem:first-child{\n            -webkit-border-top-left-radius: 4px;\n            -webkit-border-top-right-radius: 4px;\n            -moz-border-radius-topleft: 4px;\n            -moz-border-radius-topright: 4px;\n            border-top-left-radius: 4px;\n            border-top-right-radius: 4px;\n        }\n\n        .optionList .dditem:last-child{\n            -webkit-border-bottom-right-radius: 4px;\n            -webkit-border-bottom-left-radius: 4px;\n            -moz-border-radius-bottomright: 4px;\n            -moz-border-radius-bottomleft: 4px;\n            border-bottom-right-radius: 4px;\n            border-bottom-left-radius: 4px;\n        }\n\n        .optionList .dditem.hover {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(1, rgb(64,145,216)));\n            background: -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 100%);\n            color : white;\n        }\n\n        .optionList .selected span{\n            background: url("images/dot_blue.png") no-repeat 0 0;\n            height: 8px;\n            left: 5px;\n            position:absolute;\n            top: 6px;\n            width: 9px;\n        }\n\n        .optionList .selected.hover span{\n            background-position: 0 -8px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="div[1]/text()" button="." width-diff="-1" item-height="20" minheight="20" maxheight="20">\n            <div class="dropdown">\n                <div class="dropdownlabel">-</div>\n                <div class="dropdownArrow">\n                    <span/>\n                    <div> </div>\n                </div>\n            </div>\n        </a:main>\n        <a:container contents=".">\n            <div class="optionList">\n            </div>\n        </a:container>\n        <a:item class="." caption="text()" select="." inherit="true">\n            <span class="dditem">\n                -<span/>\n            </span>\n        </a:item>\n        <a:empty caption=".">\n            <div class="empty">-</div>\n        </a:empty>\n    </a:presentation>\n</a:dropdown>\n\n<a:frame name="frame">\n    <a:alias>fieldset</a:alias>\n    <a:style><![CDATA[\n        .frame{\n\n            border: 1px solid #bbbbbb;\n            color: #333;\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n            position: relative;\n            cursor : default;\n            margin : 0;\n            -webkit-box-shadow: 0px 1px 0px #EDEDED;\n            -moz-box-shadow: 0px 1px 0px #EDEDED;\n            box-shadow: 0px 1px 0px #EDEDED, inset 0px 1px 0px 0px #ededed;\n            padding-bottom: 5px;\n            padding-left: 6px;\n            padding-right: 6px;\n        }\n        .frame .legend{\n            /*margin-top: 0px;\n            position: absolute;\n            background : #fafbfc;\n            left: 5px;\n            top: -8px;\n            padding: 0 2px 0 2px;\n            margin: 0px;*/\n            margin : 0 0 2px -7px;\n            cursor : default;\n            z-index : 10000;\n            position : relative;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isIE6">\n        .frame {\n    \t    height: 1%;\n    \t}\n    </a:style>\n    <a:style condition="!apf.isIE">\n    \t.frame .legend{\n    \t    margin : 5px 0 2px -3px;\n    \t}\n    </a:style>\n    <a:style condition="apf.isWebkit">\n    \t.frame .legend{\n    \t    height:15px\n    \t}\n    </a:style>\n    <a:style condition="apf.isIE &gt; 7">\n        .frame {\n            padding-top : 10px;\n        }\n        .frame .legend{\n    \t    margin : -15px 0 2px -3px;\n    \t}\n    </a:style>\n    <a:style condition="apf.isChrome"><![CDATA[\n        .frame {\n            padding-top:4px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." caption="legend">\n            <fieldset class="frame">\n                <legend class="legend"> </legend>\n            </fieldset>\n        </a:main>\n    </a:presentation>\n</a:frame>\n\n<a:label name="black_label">\n    <a:style><![CDATA[\n        .black_label{\n            font-size: 8pt;\n            font-family: Tahoma, Arial;\n            overflow: hidden;\n            cursor: default;\n            color : #606060;\n            text-shadow: rgba(0, 0, 0, 1) 0px 1px 0px;\n            padding : 2px;\n            white-space : nowrap;\n        }\n\n        .black_labelDisabled{\n            color: #bebebe;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="." for="@for" minheight="17">\n            <div class="black_label"> </div>\n        </a:main>\n    </a:presentation>\n</a:label>\n<a:label name="label">\n    <a:style><![CDATA[\n        .label{\n            font-size: 8pt;\n            font-family: Tahoma, Arial;\n            overflow: hidden;\n            cursor: default;\n            color : #333;\n            padding : 2px;\n            white-space : nowrap;\n        }\n\n        .labelDisabled{\n            color: #bebebe;\n        }\n\n        .tiny {\n            font-size : 9px;\n        }\n\n        .error .label{\n            background : url(images/alert.png) no-repeat 0 0;\n            min-height : 37px;\n            padding : 3px 0 0 45px;\n        }\n\n        .modal-label {\n            text-shadow: #f0f0f0 0px 1px 0px;\n            padding: 0px 2px 2px;\n            color: #303030;\n            font-size: 12px;\n        }\n        \n        .menu-bk .label {\n            color: #F1F1F1;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="." for="@for" minheight="17">\n            <div class="label"> </div>\n        </a:main>\n    </a:presentation>\n</a:label>\n<a:list name="lineselect">\n    <a:style><![CDATA[\n        .lineselect{\n            \n        }\n        \n        .searchresults {\n            position : relative;\n        }\n        \n        .searchresults>div{\n            background : rgba(255,255,255,0.4);   \n            color : #666;\n            padding : 2px 3px 4px 10px;\n            border-top : 1px solid rgba(255,255,255,0.8);\n            border-bottom : 1px solid rgba(0,0,0,0.1);\n            font-size : 11px;\n            cursor : default;\n            white-space : nowrap;\n        }\n        .searchresults>div:hover{\n            background : rgba(255,255,255,0.6);\n        }\n        .searchresults>div>span{\n            font-size : 14px;\n            color : #333;\n            display : block;\n            padding : 2px;\n        }\n        .searchresults>div>span>strong{\n            color : #111;\n        }\n        .searchresults>div.selected{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(1, rgb(64,145,216)));\n            background: -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 100%);\n            color : white;\n        }\n        .searchresults>div.selected>span{\n            color : #f1f1f1;\n        }\n        .searchresults>div.selected>span>strong{\n            color : #fff;\n        }\n        .searchresults .message{\n            border : 0;\n            padding : 3px;\n            text-align : center;\n            background : transparent;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class=\'lineselect\'>\n            </div>\n        </a:main>\n        <a:item\n            class     = "."\n            container = "."\n            caption   = "."\n            select    = "."\n        >\n            <div> </div>\n        </a:item>\n        <a:empty caption=".">\n            <div class="message">-</div>\n        </a:empty>\n    </a:presentation>\n</a:list>\n<a:list name="list">\n    <a:style><![CDATA[\n        .list{\n            overflow: auto;\n            position: relative;\n            border: 1px solid #c3c3c3;\n            background-color: #fafbfc;\n            cursor: default;\n        }\n        .noscrollbar{\n            overflow: hidden;\n        }\n\n        .white{\n            background : white;\n        }\n\n        .list, .draglist{\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n        }\n\n        .list>DIV, .draglist{\n            padding: 0;\n            height: 18px;\n        }\n\n        .list>DIV>SPAN, .draglist SPAN{\n            padding: 0 0 0 20px;\n            background: no-repeat 1px center;\n            height: 16px;\n            float: left;\n        }\n\n        .list>DIV>SPAN>U, .draglist U{\n            text-decoration: none;\n            color: black;\n            cursor: default;\n            display: block;\n            padding: 2px 4px 2px 2px;\n            text-decoration: none;\n            white-space: nowrap;\n        }\n\n        .listFocus>.indicate>SPAN>U{\n            border: 1px dotted #BBB;/*#25a8e7;*/\n            color : black;\n            /*background-color : #e4f4fc;*/\n            padding: 1px 3px 1px 1px;\n        }\n\n        .list>.selected>SPAN>U{\n            background-color: #f0f0f0;\n            color: black;\n        }\n        .listFocus>.selected>SPAN>U, .draglist U{\n            color: white;\n            background-color: #25a8e7;\n        }\n\n        .list #txt_rename{\n            border: 1px solid #bbb;\n            padding: 1px 15px 1px 1px;\n            font-family: Tahoma, Arial;\n            font-size: 8pt;\n            color: black;\n            word-break: keep-all;\n            overflow: visible;\n            margin-top : 0px;\n            cursor: text;\n            height: 13px;\n            display: block;\n            outline : none;\n        }\n\n        .list .empty, .list .offline, .list .loading{\n            text-align: center;\n            padding: 8px 0 0 5px;\n            color: #AAA;\n            font-weight : normal;\n        }\n\n        .list.emptyLeft .empty {\n            text-align: left;\n        }\n\n        .shortlist{\n            border : 0;\n            overflow-y : auto;\n            overflow-x : hidden;\n            max-height : 90px;\n            width : auto;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="list">\n            </div>\n        </a:main>\n        <a:item class="." caption="span/u" icon="span" select="span">\n            <div><span><u>-</u></span></div>\n        </a:item>\n        <a:dragindicator>\n            <div class="draglist"><span><u>-</u></span></div>\n        </a:dragindicator>\n        <a:loading>\n            <div class="loading">Loading...</div>\n        </a:loading>\n        <a:empty caption=".">\n            <div class="message">-</div>\n        </a:empty>\n    </a:presentation>\n</a:list>\n\n<a:menu name="menu">\n    <a:style><![CDATA[\n        .menu {\n            margin: -1px 0 0 0;\n            padding: 3px 0 3px 0;\n            z-index: 10000;\n            position: absolute;\n            overflow:visible;\n\n            font-family   : Tahoma, Arial;\n            font-size     : 11px;\n            line-height   : 14px;\n            color         : #f1f1f1;\n            cursor:default;\n\n            display : none;\n            border:1px solid rgba(255, 255, 255, 0.1);\n\n            -moz-box-shadow    : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n            -webkit-box-shadow : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n            box-shadow         : 0px 3px 15px 0px rgba(0, 0, 0, 0.65);\n\n            background-color   : #1c1c1c;\n            filter             : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#1c1c1c\', endColorstr=\'#262626\');\n            -ms-filter         : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#1c1c1c\', endColorstr=\'#262626\')";\n            background         : -webkit-gradient(linear, left top, left bottom, from(#1c1c1c), color-stop(0.9, #262626));\n            background         :-moz-linear-gradient(center bottom, #262626 0%, #1c1c1c 20%) repeat scroll 0 0 transparent;\n        }\n\n        .menu>div.menu_item{\n            padding: 3px 16px 5px 23px;\n            white-space: nowrap;\n            cursor : default;\n            z-index:1100000;\n        }\n        .menu>div.menu_item{\n            height: 13px;\n        }\n        .menu>div.menu_item.hover {\n            background-color : #393939;\n        }\n\n        .menu>div.menu_divider{\n            overflow: visible;\n            padding: 0;\n            font-size: 1px;\n\n            margin:2px 3px;\n            border-top:1px solid #000000;\n            border-bottom:1px solid #313131;\n        }\n\n        .menu>div.menu_divider{\n            height: 0;\n        }\n\n        .menu>div.menu_item>span{\n            right: 15px;\n            margin-top: 0px;\n            z-index: 10;\n            text-align: right;\n            padding-left: 15px;\n            /*margin-right: -15px;\n            position : absolute;*/\n            float : right;\n        }\n\n        .menu>div.submenu>span{\n            background: url(images/submenu_arrow.gif) no-repeat right -15px;\n            width: 4px;\n            height: 7px;\n            display: block;\n            position: absolute;\n            right: 8px;\n            margin: 4px 0 0 0;\n            z-index: 10;\n        }\n\n        .menu>div.menu_item.hover>span{\n            background-position : right -15px;\n        }\n\n        .menu>div.menu_item.disabled{\n            color: gray;\n            /*text-shadow : rgba(255, 255, 255, .71) 1px 1px 1px;*/\n        }\n        .menu>div.menu_item.disabled>span{\n            /*display : none;*/\n        }\n\n        .menu>div.menu_item>u{\n            width: 16px;\n            height: 16px;\n            position: absolute;\n            left: 3px;\n            margin-top : -1px;\n        }\n\n        .menu>div.menu_item.selected>u{\n            background-image: url(images/radio.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n\n        .menu>div.menu_item.checked>u{\n            background-image: url(images/check.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main container="." overlay="strong">\n            <blockquote class=\'menu\'>\n\n            </blockquote>\n        </a:main>\n        <a:item caption="text()" icon="u" hotkey="span" inherit="true">\n            <div class="menu_item"><span> </span><u> </u>-</div>\n        </a:item>\n        <a:divider inherit="true">\n            <div class=\'menu_divider\'></div>\n        </a:divider>\n    </a:presentation>\n</a:menu>\n<a:menu name="menu-bk">\n    <a:style><![CDATA[\n        .menu-bk {\n            display  : none;\n            \n            /* fallback (Older Opera) */\n            background: #272727;\n            /* Mozilla: */\n            background-image: -moz-linear-gradient(top, #2f2f2f, #202020);\n            /* Chrome, Safari:*/\n            background-image: -webkit-gradient(linear, left top, left bottom, from(#2f2f2f), to(#202020));\n            -moz-border-radius    : 9px;\n            -webkit-border-radius : 9px;\n            border-radius         : 9px;\n            -moz-box-shadow       : 0 1px 5px rgba(0,0,0,0.7), inset 0 1px 0px rgba(255,255,255,0.18);\n            -webkit-box-shadow    : 0 1px 5px rgba(0,0,0,0.7), inset 0 1px 0px rgba(255,255,255,0.21);\n            box-shadow            : 0 1px 5px rgba(0,0,0,0.7), inset 0 1px 0px rgba(255,255,255,0.18);\n            border: 1px solid #000000;\n            \n            margin-left: 5px;\n            \n            \n            margin: -1px 0 0 0;\n            padding: 3px 0 3px 0;\n            z-index: 10000;\n            position: absolute;\n            overflow:visible;\n\n            font-family   : Tahoma, Arial;\n            font-size     : 11px;\n            line-height   : 14px;\n            color         : #f1f1f1;\n            cursor:default;\n        }\n        \n        .menu-bk.moveleft {\n            margin-left: 6px;\n        }\n\n        .menu-bk.upward {\n            margin-top: -10px;\n            margin-left: 6px;\n        }\n        \n        .menu-bk.downward {\n            margin-left: 6px;\n            margin-top: 30px;\n        }\n        \n        .menu-bk.moveright {\n            margin-left: -8px;\n        }\n        \n        .menu-bk .arrow {\n            position : absolute;\n            width: 24px;\n            height: 14px;\n            top: -13px;\n            right: 9px;\n            z-index: 10001;\n            background: url(images/flyout_arrows.png) no-repeat -20px 0;\n        }\n        .menu-bk.moveright .arrow {\n            left: 9px;\n        }\n        \n        .menu-bk.upward .arrow {\n            top: auto;\n            bottom: -14px;\n            width: 20px;\n            background-position: -22px -45px;\n        }\n\n        .menu-bk.mnuSbPrefs.upward .arrow, .menu-bk.mnuSbTools.upward .arrow {\n            right: 5px;\n        }\n        \n        .menu-bk.mnuSbPrefs.downward .arrow, .menu-bk.mnuSbTools.downward .arrow {\n            right: 4px;\n        }\n\n        .menu-bk>div.menu_item{\n            padding: 3px 16px 5px 23px;\n            white-space: nowrap;\n            cursor : default;\n            z-index:1100000;\n            height: 13px;\n        }\n        .menu-bk>div:nth-child(2){\n            -webkit-border-top-left-radius: 7px;\n            -webkit-border-top-right-radius: 7px;\n            -moz-border-radius-topleft: 7px;\n            -moz-border-radius-topright: 7px;\n            border-top-left-radius: 7px;\n            border-top-right-radius: 7px;\n        }\n        .menu-bk>div:last-child {\n            -webkit-border-bottom-right-radius: 5px;\n            -webkit-border-bottom-left-radius: 5px;\n            -moz-border-radius-bottomright: 5px;\n            -moz-border-radius-bottomleft: 5px;\n            border-bottom-right-radius: 5px;\n            border-bottom-left-radius: 5px;\n        }\n        .menu-bk>div.menu_item.hover {\n            background-color : #393939;\n        }\n\n        .menu-bk>div.menu_divider{\n            overflow: visible;\n            padding: 0;\n            font-size: 1px;\n\n            margin:2px 3px;\n            border-top:1px solid #000000;\n            border-bottom:1px solid #313131;\n        }\n\n        .menu-bk>div.menu_divider{\n            height: 0;\n        }\n\n        .menu-bk>div.menu_item>span{\n            right: 15px;\n            margin-top: 0px;\n            z-index: 10;\n            text-align: right;\n            padding-left: 15px;\n            /*margin-right: -15px;\n            position : absolute;*/\n            float : right;\n        }\n\n        .menu-bk>div.submenu>span{\n            background: url(images/submenu_arrow.gif) no-repeat right -15px;\n            width: 4px;\n            height: 7px;\n            display: block;\n            position: absolute;\n            right: 8px;\n            margin: 4px 0 0 0;\n            z-index: 10;\n        }\n\n        .menu-bk>div.menu_item.hover>span{\n            background-position : right -15px;\n        }\n\n        .menu-bk>div.menu_item.disabled{\n            color: gray;\n            /*text-shadow : rgba(255, 255, 255, .71) 1px 1px 1px;*/\n        }\n        .menu-bk>div.menu_item.disabled>span{\n            /*display : none;*/\n        }\n\n        .menu-bk>div.menu_item>u{\n            width: 16px;\n            height: 16px;\n            position: absolute;\n            left: 3px;\n            margin-top : -1px;\n        }\n\n        .menu-bk>div.menu_item.selected>u{\n            background-image: url(images/radio.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n\n        .menu-bk>div.menu_item.checked>u{\n            background-image: url(images/check.gif);\n            background-repeat: no-repeat;\n            background-position: 0 -16px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="menu-bk">\n                <div class="arrow"> </div>\n            </div>\n        </a:main>\n        <a:item caption="text()" icon="u" hotkey="span" inherit="true">\n            <div class="menu_item"><span> </span><u> </u>-</div>\n        </a:item>\n        <a:divider inherit="true">\n            <div class=\'menu_divider\'></div>\n        </a:divider>\n    </a:presentation>\n</a:menu>\n<a:menu name="dockwindowblack">\n    <a:style><![CDATA[\n        .dockwindowblack {\n            position              : relative;\n            border                : 1px solid #000;\n            -moz-border-radius    : 8px;\n            -webkit-border-radius : 8px;\n            border-radius         : 8px;\n            background            : -webkit-gradient(linear,left bottom,left top,color-stop(0, #202020),color-stop(1, #2f2f2f));\n            background            : -moz-linear-gradient(center bottom,#202020 0%, #2f2f2f 100%);\n            padding               : 5px 4px 4px;\n\n\n            /*margin-left : -42px;*/\n            margin-top : -20px;\n            border : 1px solid #000;\n\n            -webkit-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            -moz-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n        }\n        \n        .dockwindowblack .arrow {\n            background-image: url(images/black-panel_arrow.png);\n            background-repeat: no-repeat;\n            background-position: 0 0;\n            position: absolute;\n            top: 39px;\n            right: -22px;\n            width: 22px;\n            height: 22px;\n        }\n        \n        .dockwindowblack.left .arrow {\n            background-position: 0 -22px;\n            right: auto;\n            left: -22px;\n        }\n        \n        .dockwindowblack.noarrow .arrow {\n            display: none;\n        }\n\n        .dockwindowblack .noise_top {\n            background : url(images/glossy-header.png) 0 0;\n            height: 13px;\n            left: 0;\n            position: absolute;\n            right: 0;\n            top: 0;\n            -moz-border-radius    : 8px 8px 0px 0px;\n            -webkit-border-radius : 8px 8px 0px 0px;\n            border-radius         : 8px 8px 0px 0px;\n        }\n\n        .dockwindowblack .noise_bg {\n            background: url(images/noise_pattern_transparent.png) 0 0;\n            bottom: 0;\n            left: 0;\n            opacity: 0.1;\n            position: absolute;\n            right: 0;\n            top: 0;\n        }\n\n        .dockwindowblack .page {\n            overflow: hidden;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="dockwindowblack">\n                <div class="noise_bg"></div>\n                <div class="noise_top"></div>\n                <div class="arrow"></div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:menu>\n<a:menu name="dockwin_runbtns">\n    <a:style><![CDATA[\n        .dockwin_runbtns {\n            position              : relative;\n            padding               : 5px 4px;\n            margin-left : -42px;\n            margin-top : 6px;\n        }\n\n        .dockwin_runbtns .dockwin_runbtns-bg {\n            border-top : 1px solid #606166;\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius         : 5px;\n\n            background-image: linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(50,51,54) 0%, rgb(68,69,72) 100%);\n\n            background-image: -webkit-gradient(\n                linear,\n                left bottom,\n                left top,\n                color-stop(0, rgb(50,51,54)),\n                color-stop(1, rgb(68,69,72))\n            );\n\n            -webkit-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            -moz-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n\n            bottom: -2px;\n            position: absolute;\n            right: -39px;\n            top: 1px;\n            width: 184px;\n        }\n\n        .dockwin_runbtns .dockwin_runbtns-bg .dockwin_runbtns-icon {\n            background: url(images/play-button-active.png) no-repeat 0 0;\n            height: 19px;\n            position: absolute;\n            right: 10px;\n            top: 5px;\n            width: 11px;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome"><![CDATA[\n        .dockwin_runbtns {\n            margin-top: 4px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main container=".">\n            <div class="dockwin_runbtns">\n                <div class="dockwin_runbtns-bg" onmousedown="apf.findHost(this).hide()">\n                    <div class="dockwin_runbtns-icon"> </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:menu>\n\n<a:menu name="dockwindowbasic">\n    <a:style><![CDATA[\n        .dockwindowbasic{\n            position : relative;\n            background: #333;\n            border : 1px solid #333;\n            /*-moz-border-radius: 7px 0 0 0;\n            -webkit-border-radius: 7px 0 0 0;*/\n            margin-left : -42px;\n            margin-top : 10px;\n            border-top : 3px solid #333;\n            -webkit-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            -moz-box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n            box-shadow: -3px 3px 8px rgba(0, 0, 0, 0.2);\n        }\n\n        .dockwindowbasic .page {\n            overflow: hidden;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="dockwindowbasic">\n            </div>\n        </a:main>\n    </a:presentation>\n</a:menu>\n\n<a:modalwindow name="fm-window">\n        <a:style><![CDATA[\n            .fm-window {\n                position : relative;\n                overflow : hidden;\n                z-index  : 10000;\n                padding  : 30px 0 0 0;\n            }\n\n            .fm-window .fm-header {\n                position : relative;\n                overflow : hidden;\n                height   : 30px;\n                top      : -30px;\n            }\n\n            .fm-window .fm-header .hcontent {\n                background    : url(images/header_backg.png)  repeat-x 0 0;\n                margin-right  : 6px;\n                position      : relative;\n                overflow      : hidden;\n                height        : 23px;\n                padding       : 7px 0 0 7px;\n                font-family   : Arial;\n                font-size     : 12px;\n                line-height   : 16px;\n                font-weight   : bold;\n                color         : #e8e8e8;\n                text-shadow   : #2a2c2d 0px 1px 0px;\n            }\n\n            .fm-window .fm-header .right {\n                width:6px;\n                height:30px;\n                position:absolute;\n                top:0;\n                right:0;\n                background:url(images/header_right.png) no-repeat 0 0;\n            }\n\n            .fm-window .fm-content {\n                position:absolute;\n                overflow:visible;\n                border-right:1px solid #7b7b7b;\n                left : 0;\n                top  : 30px;\n                right : 0;\n                bottom : 0;\n                background:url(images/panelBg.png) repeat-y right 0;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main\n              collapsed-height = "30"\n              minheight        = "30"\n              minwidth         = "60"\n              container        = "div[2]"\n              drag             = "div[2]"\n              title            = "div[1]/div[1]/text()"\n              icon             = "div[1]/div[1]/div[1]"\n              buttons          = "div[1]/div[1]/div[2]">\n                <div class="fm-window">\n                    <div class="fm-header">\n                        <div class="hcontent">-<div class="icon"></div><div class="buttons"></div></div>\n                        <div class="right"></div>\n                    </div>\n                    <div class="fm-content"> </div>\n                </div>\n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n        </a:presentation>\n    </a:modalwindow>\n<a:scrollbar name="sbios">\n    <a:style><![CDATA[\n        .sbios {\n            position            : relative;\n            width               : 6px;\n            overflow            : hidden;\n            padding             : 6px 3px 3px 0;\n        }\n\n        .sbios SPAN {\n            width               : 6px;\n            bottom              : 0;\n            height              : 3px;\n            position            : absolute;\n        }\n\n        .sbios .filler {\n            height              : 100%;\n            width               : 6px;\n            position            : absolute;\n            top                 : 0;\n            bottom              : 0;\n            z-index             : 1;\n        }\n        \n        .deploy-sb.sbios .filler {\n            left: 2px;\n        }\n        \n        .sbios .mainrail {\n            height              : 100%;\n            width               : 6px;\n            position            : relative;\n        }\n\n        .sbios .indicator {\n            height   : 6px;\n            display  : none;\n            position : absolute;\n            overflow : hidden;\n            width    : 7px;\n            margin   : 0 0 0 0;\n            min-height: 20px;\n            background: #616161;\n            opacity  : 0.8;\n            -webkit-border-radius: 3px;\n            -moz-border-radius: 3px;\n        }\n\n        .sbios .indicator .indi_left {\n            height              : 3px;\n            width               : 7px;\n            position            : absolute;\n            top                 : 0;\n            left                : 0;\n        }\n\n        .sbios .indicator .indi_middle {\n            position            : absolute;\n            top                 : 3px;\n            bottom              : 3px;\n            left                : 0;\n            width               : 7px;\n        }\n\n        .sbios .indicator .indi_right {\n            height              : 3px;\n            width               : 7px;\n            position            : absolute;\n            bottom              : 0;\n            left                : 0;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit">\n        .sbios{\n            display : -webkit-box;\n        }\n\n        .sbios span{\n            left : 0;\n        }\n\n        .sbios .mainrail {\n            height : auto;\n        }\n\n        .sbios .filler{\n            left : 0;\n            height : auto;\n            top : 0;\n            bottom : 0;\n        }\n    </a:style>\n\n    <a:presentation>\n        <a:main indicator="div/div">\n            <div class=\'sbios\'>\n                <div class="filler">\n                    <div class=\'indicator\'>\n                        <div class="indi_left"></div>\n                        <div class="indi_middle"></div>\n                        <div class="indi_right"></div>\n                    </div>\n                </div>\n                <div class="mainrail"></div>\n                <span> </span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:scrollbar>\n<a:modalwindow name="dockwin">\n    <a:alias>panel</a:alias>\n\n    <a:style><![CDATA[\n        .dockwin {\n            font-family : "Arial";\n            font-size   : 11px;\n            padding     : 19px 0 1px 0;\n            position    : relative;\n            overflow    : hidden;\n        }\n\n        .smallheader.dockwin {\n            padding-top: 12px;\n        }\n\n        .dockwinFocus {\n\n        }\n\n        .dockwin .docktitle {\n            background   : -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(51,124,188)),color-stop(0.93, rgb(64,145,216)),color-stop(1, rgb(55,120,176)));\n            background   : -moz-linear-gradient(center bottom,rgb(51,124,188) 0%,rgb(64,145,216) 93%,rgb(55,120,176) 100%);\n            height       : 17px;\n            color        : white;\n            position     : absolute;\n            margin       : 0;\n            padding      : 2px 0 0 7px;\n            top          : 0;\n            left         : 0;\n            right        : 0;\n            font-weight  : bold;\n            margin-top   : 0;\n            cursor       : default;\n            white-space  : nowrap;\n            overflow     : hidden;\n            text-shadow  : rgba(17, 92, 158, .71) 0px 1px 0px;\n            border-bottom : 1px solid #1d3a55;\n            border-radius : 4px 4px 0 0;\n            text-transform:uppercase;\n            -moz-border-radius: 4px 4px 0 0;\n            -webkit-border-top-right-radius: 4px;\n            -webkit-border-top-left-radius: 4px;\n        }\n\n        .smallheader.dockwin .docktitle {\n            height: 10px;\n        }\n\n        .nocorners .docktitle{\n            -moz-border-radius: 0 0 0 0;\n            -webkit-border-top-right-radius: 0;\n            -webkit-border-top-left-radius: 0;\n        }\n\n        .dockwin .dockcontent {\n            background    : #f5f5f5;\n            // overflow   : hidden;\n            position      : relative;\n            border-bottom : 1px solid #8C8C8C;\n            position      : absolute;\n            top           : 19px;\n            right         : 0;\n            left          : 0;\n            bottom        : 1px;\n        }\n\n        .smallheader.dockwin .dockcontent {\n            top: 12px;\n        }\n\n        .noborder .dockcontent {\n            border-width : 0;\n        }\n\n        .dockwinMin .dockcontent {\n            overflow : hidden;\n            position : relative;\n        }\n\n        .dockwin .docktitle blockquote {\n            margin     : 0;\n            width      : 49px;\n            position   : absolute;\n            padding    : 1px 1px 2px 0;\n            top        : 0;\n            right      : 0;\n        }\n\n        .dockwin .docktitle blockquote div {\n            width      : 10px;\n            height     : 6px;\n            float      : right;\n            margin-top : 5px;\n            padding-bottom:3px;\n            padding-left:3px;\n            padding-right:0px;\n            background : no-repeat 0 0;\n            background-color    : transparent;\n            cursor     : pointer;\n            _overflow  : hidden; /* IE6 bug fix */\n        }\n\n        .smallheader.dockwin .docktitle blockquote div {\n            margin-top: 1px;\n        }\n\n        .dockwin .docktitle blockquote div.hover {\n            background-position : 0 -9px;\n        }\n\n        .dockwin .docktitle blockquote div.down {\n            background-position : 0 -18px;\n        }\n\n        .dockwin .docktitle .max {\n            background-image : url(images/win_max.gif);\n        }\n\n        .dockwinMax .docktitle .max {\n            background-image : url(images/win_restore.gif);\n        }\n\n        .dockwin .docktitle .min {\n            background-image : url(images/win_min.gif);\n        }\n\n        .dockwinMin .docktitle .min {\n            background-image : url(images/win_restore.gif);\n        }\n\n        .dockwin .docktitle .close {\n            width            : 11px;\n            background-image : url(images/win_x.png);\n        }\n        .smallheader .docktitle .close {\n            margin-right : -3px;\n        }\n\n        .dockwin .docktitle span {\n            width   : 16px;\n            height  : 16px;\n            display : block;\n        }\n\n        body .whitebg .content {\n            background : white;\n        }\n\n        .north{cursor : url(images/cursor/n-point.cur);}\n        .west{cursor : url(images/cursor/w-point.cur);}\n        .east{cursor : url(images/cursor/e-point.cur);}\n        .south{cursor : url(images/cursor/s-point.cur);}\n        .same{cursor : not-allowed;}\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main collapsed-height="22" min-width="150" min-height="80" caption="div[1]/text()" container="div[2]" drag="div[1]" title="div[1]/text()" buttons="div[1]/blockquote">\n            <div class="dockwin">\n                <div class="docktitle">-\n                    <blockquote> </blockquote>\n                </div>\n                <div class="dockcontent"> </div>\n            </div>\n        </a:main>\n        <a:button>\n            <div> </div>\n        </a:button>\n        <a:cover>\n            <div class="cover"> </div>\n        </a:cover>\n    </a:presentation>\n</a:modalwindow>\n<a:modalwindow name="change_photo">\n    <a:alias>window</a:alias>\n    <a:style><![CDATA[\n        .winadv {\n            position : relative;\n            width    : 498px;\n            overflow : hidden;\n            padding  : 42px 11px 15px 11px;\n            z-index  : 100000;\n        }\n\n        .winadv .wn_cp_corner_tl,\n        .winadv .wn_cp_corner_tr,\n        .winadv .wn_cp_corner_bl,\n        .winadv .wn_cp_corner_br {\n            position          : absolute;\n            background-repeat : no-repeat;\n        }\n\n        .winadv .wn_cp_corner_tl {\n            width               : 15px;\n            height              : 42px;\n            top                 : 0;\n            left                : 0;\n            background-image    : url(images/sprite_boxes_hor.png);\n            background-position : 0 0;\n        }\n\n        .winadv .wn_cp_corner_tr {\n            width               : 15px;\n            height              : 42px;\n            top                 : 0;\n            right               : 0;\n            background-image    : url(images/sprite_boxes_hor.png);\n            background-position : 0 -42px;\n        }\n\n        .winadv .wn_cp_corner_bl {\n            width               : 15px;\n            height              : 15px;\n            bottom              : 0;\n            left                : 0;\n            background-image    : url(images/sprite_boxes_hor.png);\n            background-position : 0 -84px;\n        }\n\n        .winadv .wn_cp_corner_br {\n            width               : 15px;\n            height              : 15px;\n            bottom              : 0;\n            right               : 0;\n            background-image    : url(images/sprite_boxes_hor.png);\n            background-position : 0 -99px;\n        }\n\n        .winadv .wn_cp_border_t,\n        .winadv .wn_cp_border_l,\n        .winadv .wn_cp_border_r,\n        .winadv .wn_cp_border_b {\n            position : absolute;\n            overflow : hidden;\n        }\n\n        .winadv .wn_cp_border_t {\n            height            : 42px;\n            top               : 0;\n            left              : 15px;\n            right             : 15px;\n            background-repeat : repeat-x;\n            background-image  : url(images/sprite_boxes_hor.png);\n            background-position : 0 -114px;\n        }\n\n        .winadv .wn_cp_border_b {\n            height            : 15px;\n            bottom            : 0;\n            left              : 15px;\n            right             : 15px;\n            background-repeat : repeat-x;\n            background-image  : url(images/sprite_boxes_hor.png);\n            background-position : 0 -156px;\n        }\n\n        .winadv .wn_cp_border_l {\n            width             : 11px;\n            bottom            : 15px;\n            top               : 42px;\n            left              : 0;\n            background-repeat : repeat-y;\n            background-image  : url(images/sprite_boxes_ver.png);\n            background-position : 0 0;\n        }\n\n        .winadv .wn_cp_border_r {\n            width             : 11px;\n            bottom            : 15px;\n            top               : 42px;\n            right             : 0;\n            background-repeat : repeat-y;\n            background-image  : url(images/sprite_boxes_ver.png);\n            background-position : -11px 0;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_title {\n            font-size   : 15px;\n            color       : #747475;\n            font-weight : bold;\n            font-family : Arial;\n            text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n            height      : 28px;\n            padding     : 14px 0 0 6px;\n            position    : relative;\n            top         : 0;\n            left        : 0;\n            cursor      : default;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons {\n            float : right;\n            margin : 11px 0 0 0;\n            position : relative;\n            z-index : 100;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons div{\n            color: #bfbfbf;\n            font-size : 18px;\n            font-family : Arial;\n            margin : 3px;\n            cursor : pointer;\n            font-weight : bold;\n        }\n        .winadv .wn_cp_border_t .wn_cp_buttons div:hover{\n            color: #7d7d7d;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons .close {\n            background: url(images/big_close.png) no-repeat 0 0;\n            width: 14px;\n            height: 15px;\n            margin-top: 6px;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons .close.hover {\n            background-position: -15px 0;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons .close.down {\n            background-position: -30px 0;\n        }\n\n        .winadv .wn_cp_content {\n            position            : relative;\n            width               : 100%;\n            height              : 100%;\n            background-image    : url(images/change_photo_win_backg.png);\n            background-position : 0 0;\n            background-repeat   : repeat-x;\n            background-color    : #eff1f4;\n            color               : #222222;\n            font-size           : 13px;\n            font-family         : Arial;\n        }\n\n        .winadv .wn_cp_content > H3 {\n            font-size   : 18px;\n            color       : #333333;\n            font-family : Arial;\n            font-weight : bold;\n            margin      : 0;\n            display:block;\n            position:relative;\n            overflow:hidden;\n        }\n\n        .winadv .wn_cp_content H3.wheader {\n            font-size   : 18px;\n            color       : #333333;\n            font-family : Arial;\n            font-weight : bold;\n            margin      : 0;\n            display:block;\n            position:relative;\n            overflow:hidden;\n        }\n\n        .winadv .wn_cp_content > H4 {\n            font-size   : 13px;\n            color       : #222222;\n            font-family : Arial;\n            font-weight : bold;\n            margin      : 0;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome"><![CDATA[\n        .winadv .wn_cp_border_t .wn_cp_title {\n            height      : 25px;\n            padding     : 17px 0 0 6px;\n        }\n\n        .winadv .wn_cp_border_t .wn_cp_buttons {\n            margin : 13px 0 0 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main collapsed-height="26" minheight="50" minwidth="50" container="div[1]" drag="div[6]" title="div[6]/div[3]/text()" icon="div[6]/div[2]" buttons="div[6]/div[1]">\n            <div class="winadv">\n                <div class="wn_cp_content"/>\n                <div class="wn_cp_corner_tl"/>\n                <div class="wn_cp_corner_tr"/>\n                <div class="wn_cp_corner_bl"/>\n                <div class="wn_cp_corner_br"/>\n\n                <div class="wn_cp_border_t">\n                    <div class="wn_cp_buttons"/>\n                    <div class="wn_cp_icon"/>\n                    <div class="wn_cp_title">-</div>\n                </div>\n                <div class="wn_cp_border_b"/>\n                <div class="wn_cp_border_l"/>\n                <div class="wn_cp_border_r"/>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n    </a:presentation>\n</a:modalwindow>\n\n<a:modalwindow name="bk-window">\n    <a:style><![CDATA[\n        .bk-window {\n            position : relative;\n            overflow : hidden;\n            z-index  : 10000;\n            padding  : 33px 0 0 0;\n\n            -moz-border-radius    : 6px 6px 6px 6px;\n            -webkit-border-radius : 6px 6px 6px 6px;\n            border-radius         : 6px 6px 6px 6px;\n\n            -webkit-box-shadow: 0 2px 10px 1px #000000;\n            -moz-box-shadow: 0 2px 10px 1px #000000;\n            box-shadow: 0 2px 10px 1px #000000;\n        }\n\n        .win-deploy-target.bk-window {\n            overflow: visible;\n        }\n\n        .bk-window.relative {\n            padding-top: 0;\n        }\n\n        .bk-window .bk-header {\n            position : relative;\n            overflow : hidden;\n            height   : 33px;\n            top      : -33px;\n            background    : url(images/bk-win-header.png)  repeat-x 0 0;\n            -moz-border-radius    : 6px 6px 0 0;\n            -webkit-border-radius : 6px 6px 0 0;\n            border-radius         : 6px 6px 0 0;\n        }\n\n        .bk-window.relative .bk-header {\n            top: 0;\n        }\n\n        .bk-window .bk-header .hcontent {\n            \n            position      : relative;\n            /*overflow      : hidden;*/\n            height        : 26px;\n            margin       : 8px 14px 0;\n            font-family   : Arial;\n            font-size     : 14px;\n            line-height   : 16px;\n            font-weight   : bold;\n            color         : #ffffff;\n            cursor        : default;\n        }\n\n        .bk-window .bk-header .hcontent .buttons {\n            position: absolute;\n            right: -7px;\n            top: 1px;\n        }\n\n        .bk-window .bk-header .hcontent .buttons .close {\n            background: url(images/bk-close-btn.png)  no-repeat 0 0;\n            width: 13px;\n            height: 15px;\n        }\n\n        .bk-window .bk-header .hcontent .buttons .close.hover {\n            background-position: 0 -19px;\n        }\n        .bk-window .bk-header .hcontent .buttons .close.down {\n            background-position: 0 -39px;\n        }\n\n        .bk-window .bk-container {\n            position:absolute;\n            overflow:visible;\n            left : 0;\n            top  : 33px;\n            right : 0;\n            bottom : 0;\n            z-index: 1;\n        }\n\n        .bk-window.relative .bk-container {\n            top: 0;\n            position: relative;\n        }\n\n        .bg-bk-content {\n            background:url(images/modalbg.png) repeat 0 0;\n            position: absolute;\n            top  : 33px;\n            bottom: 46px;\n            right: 0;\n            left: 0;\n            z-index: 0;\n        }\n\n        .bk-window.nofooter .bg-bk-content {\n            bottom: 0;\n        }\n\n        .bk-window .bk-win-footer {\n            background:url(images/bk-win-footer.png) repeat-x 0 0;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            height: 46px;\n            position: absolute;\n\n            -moz-border-radius    : 0 0 6px 6px;\n            -webkit-border-radius : 0 0 6px 6px;\n            border-radius         : 0 0 6px 6px;\n            z-index: 0;\n        }\n\n        .bk-window.nofooter .bk-win-footer {\n            display: none;\n        }\n\n        .bk-window-cover {\n            background:url(images/bg-overlay.png) repeat 0 0;\n            opacity: 1;\n        }\n\n        .bk-window-cover .header {\n            background: url(images/cover-heaeder.png) repeat-x 0 0;\n            height: 12px;\n            position: absolute;\n            top: 0;\n            right: 0;\n            left: 0;\n        }\n        .bk-window-cover .logo {\n            background: url(images/cover-logo.png) no-repeat 0 0;\n            width: 215px;\n            height: 44px;\n            position: absolute;\n            right: 20px;\n            top: 25px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main\n          collapsed-height = "26"\n          minheight        = "50"\n          minwidth         = "50"\n          container        = "div[3]"\n          drag             = "div[1]/div[1]"\n          title            = "div[1]/div[1]/text()"\n          icon             = "div[1]/div[1]/div[1]"\n          buttons          = "div[1]/div[1]/div[2]">\n            <div class="bk-window">\n                <div class="bk-header">\n                    <div class="hcontent">\n                        -\n                        <div class="icon"></div>\n                        <div class="buttons"></div>\n                    </div>\n                </div>\n                <div class="bg-bk-content"></div>\n                <div class="bk-container">\n                    <div class="bk-win-footer"></div>\n                </div>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n        <a:cover>\n            <div class="bk-window-cover" opacity="1">\n                <div class="header"> </div>\n                <div class="logo"> </div>\n            </div>\n        </a:cover>\n    </a:presentation>\n</a:modalwindow>\n<a:modalwindow name="bk-window2">\n    <a:presentation>\n        <a:main\n          collapsed-height = "26"\n          minheight        = "50"\n          minwidth         = "50"\n          container        = "div[3]"\n          drag             = "div[1]/div[1]"\n          title            = "div[1]/div[1]/text()"\n          icon             = "div[1]/div[1]/div[1]"\n          buttons          = "div[1]/div[1]/div[2]">\n            <div class="bk-window">\n                <div class="bk-header">\n                    <div class="hcontent">\n                        -\n                        <div class="icon"></div>\n                        <div class="buttons"></div>\n                    </div>\n                </div>\n                <div class="bg-bk-content"></div>\n                <div class="bk-container">\n                    <div class="bk-win-footer"></div>\n                </div>\n            </div>\n        </a:main>\n        <a:button>\n            <div/>\n        </a:button>\n    </a:presentation>\n</a:modalwindow>\n<a:pages name="pages">\n    <a:style><![CDATA[\n        .pages{\n            overflow : hidden;\n            position : relative;\n        }\n\n        .pages .page{\n            display: none;\n\n            position : absolute;\n            left : 0;\n            top : 0;\n            right : 0;\n            bottom : 0;\n        }\n\n        .pages .curpage{\n            display: block;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main pages=".">\n            <div class="pages">\n            </div>\n        </a:main>\n        <a:page container=".">\n            <div class="page"/>\n        </a:page>\n    </a:presentation>\n</a:pages>\n\n<a:radiobutton name="classic">\n    <a:style><![CDATA[\n        .rbclassic {\n            height   : 15px;\n            position : relative;\n            overflow : hidden;\n            color    : #333;\n            cursor   : default;\n            padding-left:14px;\n            margin-bottom:1px;\n        }\n\n        .rbclassic .radio {\n            width      : 12px;\n            height     : 12px;\n            position   : absolute;\n            top:1px;\n            left:0;\n            background : url("images/radio.png") no-repeat 0 -12px;\n        }\n\n        .rbclassic span {\n            font-family : Tahoma, Arial;\n            font-size   : 11px;\n            padding     : 0 2px 0px 2px;\n            height      : 15px;\n            margin      : 0;\n            overflow    : hidden;\n            position:relative;\n        }\n\n        .rbclassicFocus span {\n            border : 1px dotted #BBB;\n        }\n\n        .rbclassicDown .radio{\n            background-position: 0 -36px;\n        }\n\n        .rbclassicSelected .radio{\n            background-position: 0 -24px;\n        }\n\n        .rbclassicDisabled .radio{\n            background-position: 0 -0px;\n        }\n\n        .rbclassicDisabled span{\n            color: #bebebe;\n        }\n\n        .rbclassicError span{\n            background-color : #ffb500;\n            color: #fbfbfb;\n        }\n\n        .rbclassic br{\n            display: none;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span">\n            <div class="rbclassic">\n                <div class="radio"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n<a:radiobutton name="radiobutton">\n    <a:style><![CDATA[\n        .rbcontainer {\n            border: 1px solid #8C8C8C;\n            color: #f5f5f5;\n            cursor: pointer;\n            font-family: "Arial";\n            font-size:11px;\n            position:relative;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            text-shadow  : rgba(17, 92, 158, .71) 0px 1px 0px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(71,73,77)),color-stop(1, rgb(49,52,55)));\n            background: -moz-linear-gradient(center bottom,rgb(71,73,77) 0%,rgb(49,52,55) 100%);\n            text-align : center;\n            width : 91px;\n            height : 22px;\n            padding: 2px 0 2px 0;\n        }\n\n        .rbcontainerOver {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(105,107,109)),color-stop(1, rgb(92,93,96)));\n            background: -moz-linear-gradient(center bottom,rgb(105,107,109) 0%,rgb(92,93,96) 100%);\n        }\n\n        .rbcontainerSelected {\n            color:#000000;\n            text-shadow: none;\n            border-top : 0;\n            padding-top: 3px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(255,255,255)),color-stop(1, rgb(232,232,232)));\n            background: -moz-linear-gradient(center bottom,rgb(255,255,255) 0%,rgb(232,232,232) 100%);\n        }\n\n        .rbcontainerFocus {\n        }\n\n        .rbcontainerDisabled {\n            color: #bebebe;\n        }\n\n        .rbcontainerError {\n            background-color : #ffb500;\n            color: #fbfbfb;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="div">\n            <div class="rbcontainer">\n                <div>\n\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n\n<a:radiobutton name="radio_grey">\n    <a:style><![CDATA[\n        .rb_grey {\n            position : relative;\n            color    : #333;\n            cursor   : default;\n            padding: 2px 2px 2px 20px;\n            overflow: visible;\n        }\n\n        .rb_grey .radio {\n            width      : 16px;\n            height     : 17px;\n            position   : absolute;\n            background : url("images/radio-grey.png") no-repeat 0 0px;\n            overflow: hidden;\n            left: 2px;\n            top: 2px;\n        }\n\n        .rb_grey span {\n            top         : 1px;\n            overflow    : hidden;\n            position    : relative;\n            font-family: Tahoma, Arial;\n            font-size: 11px;\n            cursor: default;\n            padding: 1px 3px 2px 3px;\n            display: inline-block;\n            line-height: 13px;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            color: #333;\n        }\n\n        .rb_greyFocus span {\n\n        }\n\n        .rb_greyOver .radio{\n            background-position: 0 -119px;\n        }\n\n        .rb_greyDown .radio{\n            background-position: 0 -17px;\n        }\n\n        .rb_greySelected .radio{\n            background-position: 0 -34px;\n        }\n\n        .rb_greyOver.rb_greySelected .radio{\n            background-position: 0 -102px;\n        }\n\n        .rb_greyChecked.rb_greyDown .radio{\n            background-position: 0 -51px;\n        }\n\n        .rb_greyDisabled .radio{\n            background-position: 0 -68px;\n        }\n\n        .rb_greyDisabled.rb_greySelected .radio{\n            background-position: 0 -85px;\n        }\n\n        .rb_greyDisabled span{\n            color: #bebebe;\n        }\n\n        .rb_greyError span{\n            background-position: 0 -68px;\n            color: #fbfbfb;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span">\n            <div class="rb_grey">\n                <div class="radio"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n\n<a:radiobutton name="radio_black">\n    <a:style><![CDATA[\n        .rb_black {\n            position : relative;\n            color    : #333;\n            cursor   : default;\n            padding: 2px 2px 2px 20px;\n            overflow: visible;\n        }\n\n        .rb_black .radio {\n            width      : 16px;\n            height     : 17px;\n            position   : absolute;\n            background : url("images/radio-black.png") no-repeat 0 0px;\n            overflow: hidden;\n            left: 2px;\n            top: 2px;\n        }\n\n        .rb_black span {\n            top         : 1px;\n            overflow    : hidden;\n            position    : relative;\n            font-family: Tahoma, Arial;\n            font-size: 11px;\n            cursor: default;\n            padding: 1px 3px 2px 3px;\n            display: inline-block;\n            line-height: 13px;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            color: #333;\n        }\n\n        .rb_blackFocus span {\n        }\n\n        .rb_blackOver .radio{\n            background-position: 0 -119px;\n        }\n\n        .rb_blackDown .radio{\n            background-position: 0 -17px;\n        }\n\n        .rb_blackSelected .radio{\n            background-position: 0 -34px;\n        }\n\n        .rb_blackOver.rb_greySelected .radio{\n            background-position: 0 -102px;\n        }\n\n        .rb_blackChecked.rb_greyDown .radio{\n            background-position: 0 -51px;\n        }\n\n        .rb_blackDisabled .radio{\n            background-position: 0 -68px;\n        }\n\n        .rb_blackDisabled.rb_greySelected .radio{\n            background-position: 0 -85px;\n        }\n\n        .rb_blackDisabled span{\n            color: #bebebe;\n        }\n\n        .rb_blackError span{\n            background-position: 0 -68px;\n            color: #fbfbfb;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span">\n            <div class="rb_black">\n                <div class="radio"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:radiobutton>\n\n<a:scrollbar name="scrollbar">\n    <a:style><![CDATA[\n        .scrollbar{\n            height: 200px;\n            position: absolute;\n            background: #D4D0C8 url(images/raster.gif);\n            width: 16px;\n            overflow: hidden;\n        }\n\n        .scrollbar .btnup, .scrollbar .btndown, .scrollbar .indicator{\n            font-family: MS Sans Serif;\n            font-size: 8pt;\n            width : 100%;\n            overflow: hidden;\n            text-align: center;\n            font-weight: bold;\n            cursor: default;\n            position : relative;\n            background-color: #D4D0C8;\n\n            -moz-border-top-colors: #D4D0C8 #FFFFFF;\n            -moz-border-left-colors: #D4D0C8 #FFFFFF;\n            -moz-border-bottom-colors: black gray;\n            -moz-border-right-colors: black gray;\n        }\n\n        .scrollbar img{\n            visibility : hidden;\n        }\n\n        .scrollbar .btnup div, .scrollbar .btndown div{\n            border: 2px outset;\n        }\n\n        body .scrollbar .btnupdown div, body .scrollbar .btndowndown div{\n            border: 1px solid gray;\n            padding: 1px 1px 1px 1px;\n        }\n\n        body .scrollbar .btnupdown span, body .scrollbar .btndowndown span{\n            margin : -1px 0 0 -3px;\n        }\n\n        .scrollbar .btndown span, .scrollbar .btnup span{\n            position : absolute;\n            left : 50%;\n            top : 50%;\n            width : 7px;\n            height : 4px;\n            margin : -2px 0 0 -4px;\n        }\n\n        .scrollbar .btnup span{\n            background: #D4D0C8 url(images/scrollup.gif) no-repeat;\n        }\n\n        .scrollbar .btndown{\n            position: absolute;\n            bottom: 0px;\n        }\n\n        .scrollbar .btndown span{\n            background: #D4D0C8 url(images/scrolldown.gif) no-repeat;\n        }\n\n        .scrollbar .indicator{\n            height: 6px;\n            display : none;\n            position: absolute;\n            overflow: hidden;\n            background-color: #D4D0C8;\n            width : 100%;\n            padding-bottom : 4px;\n        }\n        .scrollbar .indicator div{\n            border: 2px outset;\n            height : 100%;\n        }\n\n        .scrollbar .slidefast{\n            position: absolute;\n            overflow: hidden;\n            background-color: #353535;\n            height: 10px;\n            width: 100%;\n            display: none;\n            overflow: hidden;\n        }\n\n        .scrollbarDisabled .btnup span{\n            background: #D4D0C8 url(images/scrollupdisabled.gif) no-repeat;\n            width : 8px;\n            height : 5px;\n            margin : -3px 0 0 -4px;\n        }\n        .scrollbarDisabled .btndown span{\n            background: #D4D0C8 url(images/scrolldowndisabled.gif) no-repeat;\n            width : 8px;\n            height : 5px;\n            margin : -3px 0 0 -4px;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isIE &gt; 7"><![CDATA[\n        .scrollbar .btnup div, .scrollbar .btndown div, .scrollbar .indicator div{\n            border: 2px outset white;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main btnup="div[1]" indicator="div[2]" btndown="div[3]" slidefast="div[4]">\n            <div class="scrollbar">\n                <div class="btnup"><span> </span><div><img src="images/spacer.gif" width="100%"/></div></div>\n                <div class="indicator"> <div> </div> </div>\n                <div class="btndown"><span> </span><div><img src="images/spacer.gif" width="100%"/></div></div>\n                <div class="slidefast"> </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:scrollbar>\n<a:scrollbar name="console_scrollbar">\n    <a:style><![CDATA[\n        .console_scrollbar {\n            position            : relative;\n            width               : 17px;\n            overflow            : hidden;\n            padding             : 6px 0 3px 0;\n            background-repeat   : no-repeat;\n            background-image    : url(images/scrollbar/sprite_ver_scrollbar.png);\n            background-position : 0 0;\n        }\n\n        .console_scrollbar SPAN {\n            width               : 17px;\n            bottom              : 0;\n            height              : 3px;\n            position            : absolute;\n            background-repeat   : no-repeat;\n            background-image    : url(images/scrollbar/sprite_ver_scrollbar.png);\n            background-position : -34px 0;\n        }\n\n        .console_scrollbar .filler {\n            height              : 100%;\n            width               : 17px;\n            position            : absolute;\n            top                 : 0;\n            bottom              : 0;\n            z-index             : 1;\n        }\n        .console_scrollbar .mainrail {\n            height              : 100%;\n            width               : 17px;\n            position            : relative;\n            background-image    : url(images/scrollbar/sprite_ver_scrollbar.png);\n            background-position : -17px 0;\n        }\n\n        .console_scrollbarDisabled {\n\n        }\n\n        .console_scrollbarDisabled span {\n\n        }\n\n        .console_scrollbarDisabled .filler {\n\n        }\n\n        .console_scrollbar .indicator {\n            height   : 6px;\n            display  : none;\n            position : absolute;\n            overflow : hidden;\n            width    : 18px;\n            margin   : 0 0 0 0;\n            min-height: 20px;\n        }\n\n        .console_scrollbar .indicator .indi_left {\n            height              : 3px;\n            width               : 18px;\n            position            : absolute;\n            top                 : 0;\n            left                : 0;\n            background-image    : url(images/scrollbar/grabber.png);\n            background-repeat   : no-repeat;\n            background-position : 0 0;\n        }\n\n        .console_scrollbar .indicator .indi_middle {\n            background-image    : url(images/scrollbar/grabber.png);\n            background-repeat   : no-repeat;\n            background-position : 0px 50%;\n            position            : absolute;\n            top                 : 3px;\n            bottom              : 3px;\n            left                : 0;\n            width               : 18px;\n        }\n\n        .console_scrollbar .indicator .indi_right {\n            height              : 3px;\n            width               : 18px;\n            position            : absolute;\n            bottom              : 0;\n            left                : 0;\n            background-image    : url(images/scrollbar/grabber.png);\n            background-repeat   : no-repeat;\n            background-position : 0 bottom;\n        }\n\n        .console_scrollbarDown .indicator .indi_left {\n            background-position : -18px 0;\n        }\n\n        .console_scrollbarDown .indicator .indi_middle {\n            background-position : -18px 50%;\n        }\n\n        .console_scrollbarDown .indicator .indi_right {\n            background-position : -18px bottom;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit">\n        .console_scrollbar{\n            display : -webkit-box;\n        }\n\n        .console_scrollbar span{\n            left : 0;\n        }\n\n        .console_scrollbar .mainrail {\n            height : auto;\n        }\n\n        .console_scrollbar .filler{\n            left : 0;\n            height : auto;\n            top : 0;\n            bottom : 0;\n        }\n    </a:style>\n\n    <a:presentation>\n        <a:main indicator="div/div">\n            <div class="console_scrollbar">\n                <div class="filler">\n                    <div class="indicator">\n                        <div class="indi_left"/>\n                        <div class="indi_middle"/>\n                        <div class="indi_right"/>\n                    </div>\n                </div>\n                <div class="mainrail"/>\n                <span> </span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:scrollbar>\n\n<a:slider name="slider">\n    <a:alias>range</a:alias>\n    <a:alias>horizontal</a:alias>\n\n    <a:style><![CDATA[\n        .slider {\n            background: url("images/bar_right.png") no-repeat top right;\n            height: 8px;\n            position: relative;\n\n            font-family : Tahoma, Arial;\n            font-size : 9px;\n            text-align : center;\n        }\n\n        .sliderDisabled {\n            background-position: right -8px;\n        }\n\n        .slider .left{\n            background: url("images/bar_left.png") no-repeat top left;\n            height: 8px;\n            overflow: hidden;\n            margin-right : 4px;\n        }\n\n        .sliderDisabled .left{\n            background-position: left -8px;\n        }\n\n        .sliderDisabled .filledbar {\n            background-position: 0 -8px;\n        }\n\n        .slider .grabber {\n            background: url("images/slider.png") no-repeat top left;\n            width: 20px;\n            height: 8px;\n            overflow: hidden;\n            position: absolute;\n            z-index : 10;\n        }\n\n        .sliderDisabled .grabber {\n            background-position: left -8px;\n        }\n\n        .slider u{\n            position : absolute;\n            background : #c3c3c3;\n            overflow : hidden;\n            height : 4px;\n            margin : 2px 0 0 0;\n            display : block;\n            width : 1px;\n            margin-left : 10px;\n        }\n\n        .slider .balloon {\n            background : url(images/ballon_middle.png) no-repeat top right;\n            height     : 16px;\n            padding    : 4px 8px 3px 1px;\n            overflow   : visible;\n            margin     : -32px 0 0 2px;\n            position   : absolute;\n            z-index    : 12000;\n            display    : none;\n        }\n\n        .slider .balloon .balleft {\n            width      : 3px;\n            background : url(images/ballon_left.png) no-repeat 0 0;\n            height     : 23px;\n            position   : absolute;\n            left       : -3px;\n            top        : 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main slider="div[1]" container="." status="div[3]/text()" markers="div[2]" direction="horizontal" balloon="div[3]" minheight="8" maxheight="8">\n            <div class="slider">\n                <div class="grabber"> </div>\n                <div class="left"> </div>\n                <div class="balloon">-\n                    <div class="balleft"> </div>\n                </div>\n            </div>\n        </a:main>\n        <marker>\n            <u> </u>\n        </marker>\n    </a:presentation>\n</a:slider>\n\n<a:spinner name="spinner">\n    <a:style><![CDATA[\n        .spinner {\n            position  : relative;\n            height    : 19px;\n            margin    : 0;\n            padding   : 0;\n        }\n\n        .spinner .divfix {\n            display    : block;\n            position   : absolute;\n            text-align : right;\n            height     : 19px;\n            left       : 0;\n            right      : 19px;\n            margin     : 0;\n            z-index    : 9000;\n            padding    : 0;\n            border     : 0;\n        }\n\n        .fixMargin2 {\n             margin-bottom: 2px !important;\n         }\n\n         .fixMargin5 {\n             margin-bottom: 5px !important;\n         }\n\n        .spinner .divfix input {\n            outline             : none;\n            display             : block;\n            border-top          : 1px solid #b2b2b2;\n            border-left         : 1px solid #b2b2b2;\n            border-bottom       : 1px solid #b2b2b2;\n            border-right        : 0;\n            padding             : 1px 1px 2px 0;\n            position            : absolute;\n            text-align          : right;\n            left                : 0;\n            height              : 14px;\n            background-position : 0 0;\n            background-image    : url(images/spinner_body2.png);\n            color               : black;\n            font-family         : Tahoma, Arial;\n            font-size           : 11px;\n            width               : 100%;\n            margin              : 0;\n            z-index             : 10000;\n        }\n\n        .spinner .buttons {\n            display  : block;\n            width    : 18px;\n            height   : 19px;\n            position : absolute;\n            right    : 0;\n            z-index  : 11000;\n        }\n\n        .spinner .buttons .plus {\n            height              : 9px;\n            width               : 18px;\n            cursor              : default;\n            border-left         : 0;\n            border-right        : 1px solid #b2b2b2;\n            border-bottom       : 0;\n            border-top          : 1px solid #b2b2b2;\n            background-image    : url(images/spinner_plus.png);\n            background-position : 0 0;\n            margin              : 0;\n        }\n\n        .spinner .buttons .minus {\n            height              : 8px;\n            width               : 18px;\n            cursor              : default;\n            border-left         : 0;\n            border-right        : 1px solid #b2b2b2;\n            border-bottom       : 1px solid #b2b2b2;\n            border-top          : 0;\n            background-image    : url(images/spinner_minus.png);\n            background-position : 0 0;\n        }\n\n        .spinner .buttons .plusFocus {\n            background-position : 0 27px;\n            border-top          : 1px solid #327fbd;\n            border-right        : 1px solid #327fbd;\n        }\n\n        .spinner .buttons .minusFocus {\n            background-position : 0 24px;\n            border-bottom       : 1px solid #327fbd;\n            border-right        : 1px solid #327fbd;\n        }\n\n        .spinner .buttons .plusDown {\n            background-position : 0 9px;\n            border-top          : 1px solid #327fbd;\n            border-right        : 1px solid #327fbd;\n        }\n\n        .spinner .buttons .minusDown {\n            background-position : 0 8px;\n            border-bottom       : 1px solid #327fbd;\n            border-right        : 1px solid #327fbd;\n        }\n\n        .spinner .buttons .plusHover {\n            background-position : 0 18px;\n        }\n\n        .spinner .buttons .minusHover {\n            background-position : 0 16px;\n        }\n\n        .spinner .divfix .focus {\n            background-position : 0 17px;\n            border-top          : 1px solid #327fbd;\n            border-bottom       : 1px solid #327fbd;\n            border-left         : 1px solid #327fbd;\n            border-right        : 0;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isOpera"><![CDATA[\n        .spinner .divfix {\n            right : 20px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main container="." input="div[2]/input" buttonplus="div/div[1]" buttonminus="div/div[2]" minwidth="35" minheight="19" maxheight="19">\n            <div class="spinner">\n                <div class="buttons">\n                    <div class="plus"> </div>\n                    <div class="minus"> </div>\n                </div>\n                <div class="divfix">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:spinner>\n\n<a:splitbutton name="splitbutton">\n    <a:style><![CDATA[\n        .c9-dropdown-btn {\n            height             : 21px;\n            overflow           : hidden;\n            cursor             : default;\n            position           : relative;\n            -moz-user-select   : none;\n            -khtml-user-select : none;\n            user-select        : none;\n            line-height        : 17px;\n            border             : 1px solid transparent;\n            float              : left;\n        }\n\n        .c9-dropdown-btn.main {\n            border-width:1px 0 1px 1px;\n        }\n\n        .c9-dropdown-btn.arrow {\n            border-width:1px 1px 1px 0;\n        }\n\n        .c9-dropdown-btn .c9-icon {\n            width:19px;\n            height:19px;\n            position:absolute;\n            top:2px;\n            left:4px;\n            background-position: 0 0;\n            background-repeat:no-repeat;\n            display : none;\n        }\n        .c9-dropdown-btnIcon .c9-icon {\n            display : block;\n        }\n\n         .c9-dropdown-btn .c9-label {\n            position:relative;\n            overflow:hidden;\n            font-family:Arial;\n            font-size:12px;\n            color:#d6d6d6;\n            line-height:14px;\n            height             : 14px;\n            padding:1px 5px 0 7px;\n            margin:3px 0 0 0;\n            border-right:1px solid #1c1c1c;\n         }\n         .c9-dropdown-btnIcon .c9-label {\n            padding:1px 5px 0 26px;\n         }\n\n         .c9-dropdown-btn .c9-arrow {\n            width:14px;\n            height:15px;\n            margin:3px 0 0 0;\n            position:relative;\n            border-left:1px solid #4d4d4d;\n            background:url(images/btn-arrow.png) no-repeat 4px 6px;\n         }\n\n         .c9-dropdown-btn.arrow .c9-icon,\n         .c9-dropdown-btn.arrow .c9-label,\n         .c9-dropdown-btn.main .c9-arrow {\n            display:none;\n         }\n\n         .c9-dropdown-btnOver {\n            border                : 1px solid #1c1c1c;\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius         : 5px;\n\n            background : #333333;\n            filter     : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#393939\', endColorstr=\'#333333\');\n            -ms-filter : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#393939\', endColorstr=\'#333333\')";\n            background : -webkit-gradient(linear, left top, left bottom, from(#393939), color-stop(1, #333333));\n            background : -moz-linear-gradient(center bottom, #333333 0%, #393939 100%) repeat scroll 0 0 transparent;\n\n            border:1px solid #1c1c1c;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n\n            float:left;\n        }\n\n        .c9-dropdown-btnOver.main {\n            -moz-border-radius    : 5px 0 0 5px;\n            -webkit-border-radius : 5px 0 0 5px;\n            border-radius         : 5px 0 0 5px;\n            border-right          : 0;\n        }\n\n        .c9-dropdown-btnOver.arrow,\n        .c9-dropdown-btnDown.main.arrow {\n            -moz-border-radius    : 0 5px 5px 0;\n            -webkit-border-radius : 0 5px 5px 0;\n            border-radius         : 0 5px 5px 0;\n            border-left:0;\n        }\n\n        .c9-dropdown-btnDown.main .c9-label,\n        .c9-dropdown-btnOver .c9-label {\n            height       : 17px;\n            padding      : 4px 5px 0 7px;\n            margin       : 0;\n        }\n        .c9-dropdown-btnIcon.c9-dropdown-btnDown .c9-label,\n        .c9-dropdown-btnIcon.c9-dropdown-btnOver .c9-label {\n            padding      : 4px 5px 0 26px;\n         }\n\n        .c9-dropdown-btnDown.main .c9-arrow,\n        .c9-dropdown-btnOver .c9-arrow {\n            width               : 14px;\n            height              : 21px;\n            margin              : 0;\n            background-position : 4px 9px;\n        }\n\n        .c9-dropdown-btnDown {\n            border                : 1px solid #1c1c1c;\n            -moz-border-radius    : 5px;\n            -webkit-border-radius : 5px;\n            border-radius         : 5px;\n\n            background : #333333;\n            filter     : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#393939\', endColorstr=\'#333333\');\n            -ms-filter : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#393939\', endColorstr=\'#333333\')";\n            background : -webkit-gradient(linear, left top, left bottom, from(#393939), color-stop(1, #333333));\n            background : -moz-linear-gradient(center bottom, #333333 0%, #393939 100%) repeat scroll 0 0 transparent;\n\n            -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.15);\n            -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.15);\n            box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.15) inset, 0px 1px 0px 0px rgba(255, 255, 255, 0.15);\n\n            float:left;\n        }\n\n        .c9-dropdown-btnDown.main {\n            -moz-border-radius    : 5px 0 0 5px;\n            -webkit-border-radius : 5px 0 0 5px;\n            border-radius         : 5px 0 0 5px;\n            border-right          : 0;\n\n            background : #333333;\n            filter     : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#282828\', endColorstr=\'#2e2e2e\');\n            -ms-filter : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#282828\', endColorstr=\'#2e2e2e\')";\n            background : -webkit-gradient(linear, left top, left bottom, from(#282828), color-stop(1, #2e2e2e));\n            background : -moz-linear-gradient(center bottom, #2e2e2e 0%, #282828 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-dropdown-btnDown.main .c9-icon {\n            background-position: 0 -19px;\n        }\n\n        .c9-dropdown-btnDown.arrow {\n            -moz-border-radius    : 0 5px 5px 0;\n            -webkit-border-radius : 0 5px 5px 0;\n            border-radius         : 0 5px 5px 0;\n            border-left           : 0;\n\n            background : #333333;\n            filter     : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#282828\', endColorstr=\'#1f1f1f\');\n            -ms-filter : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#282828\', endColorstr=\'#1f1f1f\')";\n            background : -webkit-gradient(linear, left top, left bottom, from(#282828), color-stop(1, #1f1f1f));\n            background : -moz-linear-gradient(center bottom, #1f1f1f 0%, #282828 100%) repeat scroll 0 0 transparent;\n        }\n\n        .c9-dropdown-btnDisabled.main .c9-icon {\n            background-position: 0 -37px;\n        }\n\n         .c9-dropdown-btnDisabled .c9-label {\n            color:#18191a;\n            text-shadow   : rgba(62, 63, 64, 1) 0px 1px 0px;\n            border-right:0;\n            padding:1px 6px 0 7px;\n         }\n         .c9-dropdown-btnIcon.c9-dropdown-btnDisabled .c9-label {\n            padding:1px 6px 0 26px;\n         }\n\n         .c9-dropdown-btnDisabled .c9-arrow {\n            width:15px;\n            height:15px;\n            margin:3px 0 0 0;\n            border-left:0;\n            background:url(images/btn-arrow2.png) no-repeat 0 6px;\n         }\n    ]]></a:style>\n    <a:style condition="apf.isSafari || apf.isChrome"><![CDATA[\n        .c9-dropdown-btn .c9-label {\n            padding : 1px 3px 0 7px;\n        }\n        .c9-dropdown-btnIcon .c9-label {\n            padding : 1px 3px 0 26px;\n        }\n\n        .c9-dropdown-btnOver .c9-label,\n        .c9-dropdown-btnDown.main .c9-label {\n            height  : 17px;\n            padding : 4px 3px 0 7px;\n            margin  : 0;\n        }\n\n        .c9-dropdown-btnIcon.c9-dropdown-btnOver .c9-label,\n        .c9-dropdown-btnIcon.c9-dropdown-btnDown.main .c9-label {\n            padding : 4px 3px 0 26px;\n        }\n\n        .c9-dropdown-btnDisabled .c9-label {\n            padding:1px 4px 0 7px;\n        }\n        .c9-dropdown-btnIcon.c9-dropdown-btnDisabled .c9-label {\n            padding:1px 4px 0 26px;\n         }\n\n        .c9-dropdown-btnDisabled .c9-arrow {\n            background-position : 0 6px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main caption="div[2]/text()" background="div/span" icon="div[1]">\n            <div class="c9-dropdown-btn">\n                <div class="c9-icon"></div>\n                <div class="c9-label">-</div>\n                <div class="c9-arrow"></div>\n             </div>\n        </a:main>\n    </a:presentation>\n</a:splitbutton>\n\n<a:splitter name="splitter">\n    <a:style><![CDATA[\n        .splitter {\n            position : relative;\n            z-index  : 90000;\n        }\n\n        .splitterFocus {\n        }\n\n        .w-resize {\n            cursor : ew-resize;\n        }\n\n        .n-resize {\n            cursor : ns-resize;\n        }\n\n        .splitterMoving {\n            background-color : gray;\n        }\n\n        .splitterRealtime{\n            background : url(images/spacer.gif);\n        }\n\n        .splitter.vertical{\n            display  : -moz-box;\n            display  : -webkit-box;\n            display  : -ms-box;\n            width    : 0;\n        }\n\n        .splitter.vertical div{\n            width : 5px;\n            margin-left : -3px;\n            background : url(images/spacer.gif);\n        }\n\n        .splitter.vertical.panelsplitter div {\n            /*margin-left: -5px;*/\n            width: 3px;\n        }\n\n        .splitter.horizontal{\n            margin : -2px 0 0 0;\n        }\n\n        .splitter.horizontal div{\n            height : 5px;\n            margin-top : -2px;\n            background : url(images/spacer.gif);\n            position : absolute;\n            width : 100%;\n        }\n\n        .dockcol .splitter.horizontal{\n            height : 0px;\n            margin : 0;\n            border-bottom: 1px solid #393A3B;\n            border-top: 1px solid black;\n        }\n\n        .dockcol .splitter.horizontal div{\n            height : 4px;\n        }\n\n        .splitter-editor-right {\n            background: url(images/editor_header.png) repeat-x 0 0;\n            border-right: 1px solid #1E1E1E;\n        }\n\n        .splitter-editor-right.panelsplitter {\n            border-left: 1px solid #1E1E1E;\n            border-right: 1px solid #38393B;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main handle=".">\n            <div class="splitter">\n                <div> </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:splitter>\n\n<a:splitter name="darksplitter">\n    <a:style><![CDATA[\n        .darksplitter {\n            position : relative;\n            z-index  : 90000;\n            background-color: #8c8c8c;\n        }\n\n        .darksplitterFocus {\n        }\n\n        .w-resize {\n            cursor : ew-resize;\n        }\n\n        .n-resize {\n            cursor : ns-resize;\n        }\n\n        .darksplitterMoving {\n            background-color : #8c8c8c;\n        }\n\n        .darksplitterRealtime {\n            background-image : url(images/spacer.gif);\n        }\n\n        .darksplitter span {\n            position: absolute;\n            width: 11px;\n            height: 3px;\n            margin-left: 49%;\n            margin-top: 2px;\n            background: url(images/splitter_dark_grab.png) no-repeat 0 0;\n        }\n\n        .darksplitter.vertical {\n            display  : -moz-box;\n            display  : -webkit-box;\n            display  : -ms-box;\n\n            border-top: 0px;\n            border-right: 1px solid #fff;\n            border-bottom: 0px;\n            border-left: 1px solid #eaeaea;\n\n            vertical-align: middle;\n            width: 3px;\n        }\n\n        .darksplitter.vertical span {\n            display: none;\n        }\n\n        .darksplitter.horizontal {\n            position: relative;\n            margin : -2px 0 0 0;\n\n            border: 0;\n            /*border-top: 1px solid #3d3d3d;\n            border-right: 0px;\n            border-bottom: 1px solid #3d3d3d;\n            border-left: 0px;*/\n\n            height: 6px;\n            background: url(images/splitter_dark_bg.png) repeat-x 0 0;\n        }\n\n        .darksplitter.horizontal span {\n            display: inline;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main handle=".">\n            <div class="darksplitter">\n                <span>&#160;</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:splitter>\n\n<a:statusbar name="statusbar">\n    <a:style><![CDATA[\n        .statusbar {\n            border-top: 1px solid #b2b2b2;\n            overflow: hidden;\n            color: #333;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(222,224,227)),color-stop(1, rgb(239,241,244)));\n            background: -moz-linear-gradient(center bottom,rgb(222,224,227) 0%,rgb(239,241,244) 100%);\n            height: 21px;\n            width: 100%;\n            padding: 0 0 0 0;\n        }\n\n        .statusbar .sbsection {\n            //padding: 1px 5px 0 5px;\n\n            font-size: 11px;\n            font-family: Tahoma, Arial;\n            background: no-repeat 3px 1px;\n            //height: 15px;\n            //float: left;\n            display: inline-block;\n            //margin : 2px 2px 0 0;\n\n            border-right: 1px solid #c3c3c3;\n            border-left: 1px solid #FFFFFF;\n\n            position : relative;\n        }\n\n        .statusbar .sbsectionLast {\n            float: none;\n            margin: 2px 0 0 -2px;\n            border-right: 0;\n        }\n\n        .statusbar .sbsectionIcon {\n            padding-left: 23px\n        }\n\n        .windowMax .statusbar .corner {\n            display: none;\n        }\n\n        .statusbar .corner {\n            width: 13px;\n            height: 13px;\n            position: absolute;\n            right: 0;\n            top: 7px;\n            display: block;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." corner="span">\n            <div class="statusbar"><span class="corner"/></div>\n        </a:main>\n        <a:section icon="." caption="text()" container="." inherit="true">\n            <div class="sbsection"> </div>\n        </a:section>\n    </a:presentation>\n</a:statusbar>\n\n<a:statusbar name="status">\n    <a:style><![CDATA[\n        .statuscontainer{\n            margin: 8px 4px 0 0;\n            padding: 4px 0 0 8px;\n            width: 50px;\n            height: 50px;\n            float: left;\n        }\n\n        .statuscontainer span{\n            font-family: MS Sans Serif;\n            font-size: 8pt;\n            float: left;\n            margin-left: 4px;\n            cursor: default;\n            padding-right: 2px;\n            text-align: center;\n            width: 50px;\n            margin-top: 5px;\n        }\n\n        .statuscontainerFocus span{\n            margin: 4px 0 0 3px;\n            padding-right: 1px;\n            border: 1px dotted gray;\n        }\n\n        .scheckbox{\n            width: 32px;\n            height: 32px;\n            overflow: hidden;\n            margin: 0 3px 0 13px;\n\n            background: url(icons/icoOff.gif) no-repeat 50% 50%;\n        }\n\n        .statuscontainerDown .scheckbox{\n        }\n\n        .statuscontainerChecked .scheckbox{\n            background: url(icons/icoOn.gif) no-repeat 50% 50%;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main label="span/text()">\n            <div class="statuscontainer">\n                <div class="scheckbox"> </div>\n                <span>-</span>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:statusbar>\n\n<a:progressbar name="progressbar">\n    <a:style><![CDATA[\n        .progressbar {\n            position: relative;\n            width: 147px;\n            height : 8px;\n            cursor : default;\n        }\n\n        .progressbar .lbl {\n            position: relative;\n            background: url("images/bar_right.png") no-repeat top left;\n            font-family: Tahoma, Arial;\n            font-size: 9px;\n            float: right;\n            height: 8px;\n            width: 30px;\n            padding: 0;\n        }\n\n        .progressbar .lbl span {\n            display: block;\n            position: absolute;\n            top: -2px;\n            left: 6px;\n        }\n\n        .progressbar .left {\n            background: url("images/bar_left.png") no-repeat top left;\n            height: 8px;\n            margin: 0 30px 0 0;\n            _margin: 0;\n        }\n\n        .lowlabel {\n        }\n\n        .lowlabel .lbl {\n            position: static;\n            width: 4px;\n        }\n\n        .lowlabel .lbl span {\n            display: block;\n            positiom: absolute;\n            top: 10px;\n            left: 0;\n        }\n\n        .lowlabel .left {\n            margin: 0 4px 0 0;\n        }\n\n        .progressbarDisabled {\n            color: #bebebe;\n        }\n\n        .progressbarDisabled .left {\n            background-position: left -8px;\n        }\n\n        .progressbarDisabled .lbl{\n            background-position: left -8px;\n        }\n\n        .progressbar .filledbar {\n            background: url("images/progressbar.png") no-repeat top left;\n            height: 8px;\n            overflow: hidden;\n            padding : 0 0 0 3px;\n            border-right : 1px solid #327fbd;\n            display : none;\n            width : 0%;\n            margin-right: -1px;\n            _margin-right: -4px;\n            z-index: 1000;\n        }\n\n        .progressbarDisabled .filledbar {\n            background-position: 0 -8px;\n            border-right : 1px solid #cfd0d0;\n        }\n\n        .progressbarDisabled .left {\n            background-position: left -8px;\n        }\n\n        .progressbarRunning .filledbar {\n            display: block;\n        }\n\n        .progressbarComplete .left {\n            background: url("images/progressbar.png") no-repeat top left;\n\n        }\n\n        .progressbarComplete .lbl {\n            background: url("images/progressbar.png") no-repeat -496px 0;\n        }\n\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main progress="div[2]/div" caption="div[1]/span/text()">\n            <div class="progressbar">\n                <div class="lbl"><span>0%</span></div>\n                <div class="left">\n                    <div class="filledbar"> </div>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:progressbar>\n\n<a:tab name="tab_console">\n<a:style><![CDATA[\n    .tab_console {\n        padding : 0 0 0 0;\n        border: 0px solid #8c8c8c;\n        border-top: 1px solid #000000;\n        margin : 0 auto;\n        overflow: hidden;\n        position:relative;\n        padding-top: 29px;\n        -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset;\n        -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset;\n        box-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset;\n    }\n\n    .tab_console .btncontainer{\n        padding : 5px 6px 3px;\n        z-index : 100;\n        height: 20px;\n        overflow: visible;\n        white-space: nowrap;\n        color: #aaaaaa;\n        text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n        font-family : Arial;\n        font-size : 12px;\n\n        border-top: 1px solid #404040;\n        border-bottom: 1px solid #000000;\n\n        background: #282828;\n        background: -webkit-linear-gradient(top,#282828 0%, #181818 100%);\n        background:    -moz-linear-gradient(top,#282828 0%, #181818 100%);\n        background:         linear-gradient(top,#282828 0%, #181818 100%);\n        margin-top : -29px;\n        width : auto;\n    }\n\n    .tab_console .btncontainer>div {\n        display: block;\n        display : inline-block;\n        margin: 0 0 0 0;\n        padding: 0;\n        position : relative;\n        vertical-align : bottom;\n        height : 19px;\n    }\n\n    .tab_console .btncontainer .btntab {\n        padding      : 4px 20px 2px 20px;\n        position     : relative;\n        margin-top:-1px;\n        text-align: center;\n    }\n\n    .tab_console .btncontainer .btntab.btnclose {\n        padding      : 4px 15px 2px 15px;\n    }\n\n    .tab_console .btncontainer .btntab .tab_console_icon {\n        height:16px;\n        left:1px;\n        position:absolute;\n        top:1px;\n        width:16px;\n    }\n\n    .tab_console .btncontainer .btntab .tab_console_title {\n        overflow : hidden;\n        padding  : 0 0 0 0;\n\t\t-moz-user-select: -moz-none;\n\t    -khtml-user-select: none;\n\t    -webkit-user-select: none;\n\t    -o-user-select: none;\n\t    user-select: none;\n    }\n\n    .tab_console .btncontainer .btntab.btnclose .tab_console_title {\n        margin-right : 15px;\n    }\n\n    .tab_console .scale .btntab .tab_console_title{\n        display : block;\n        overflow : hidden;\n        text-overflow : ellipsis;\n        white-space : nowrap;\n    }\n\n    .tab_console .btncontainer div.over {\n        color: #ffffff;\n        cursor: default;\n    }\n\n    .tab_console .btncontainer div.curbtn {\n        color       : #cbfaa9;\n        cursor      : default;\n        z-index     : 1;\n        background  : #1d1d1d url(images/console-tab-btn-curr.png) repeat-x 0 0;\n        border-top  : 1px solid #4f4f4f;\n        z-index     : 101;\n        padding     : 2px 20px 2px 20px;\n        text-shadow : rgba(0, 0, 0, 1) 0px 1px 0px;\n    }\n\n    .tab_console .btncontainer div.curbtn.btnclose {\n        padding     : 2px 15px 2px 15px;\n    }\n\n    .tab_console .scale .btntab .tab_console_middle {\n        display : block;\n        overflow : hidden;\n        text-overflow : ellipsis;\n        white-space : nowrap;\n    }\n\n    .tab_consoleFocus .curbtn{\n    }\n\n    .tab_console .btncontainer .btnclose strong {\n        width               : 14px;\n        height              : 14px;\n        display             : block;\n        position            : absolute;\n        right               : 6px;\n        top                 : 6px;\n        /*cursor              : default;*/\n        background-image    : url(images/console-tab-close-button.png);\n        background-repeat   : no-repeat;\n        background-position : 0 0;\n    }\n\n    .tab_console .btncontainer .btnclose strong:hover {\n        background-position : 0 -14px;\n    }\n\n    .tab_console .btncontainer .btnclose strong:active {\n        background-position : 0 -28px;\n    }\n\n    .tab_console .btncontainer .curbtn.btnclose strong {\n        background-position : 0 0;\n        top: 4px;\n        right: 6px;\n    }\n\n    .tab_console .btncontainer .curbtn.btnclose strong:hover {\n        background-position : 0 -14px;\n    }\n\n    .tab_console .btncontainer .curbtn.btnclose strong:active {\n        background-position : 0 -28px;\n    }\n\n    .tab_console .page {\n        display : none;\n        position : absolute;\n        top : 28px;\n        bottom : 0;\n        left : 0;\n        right : 0;\n        z-index : 10;\n        margin: 0 auto;\n\n        overflow: hidden;\n        clear: both;\n        font-family : Arial;\n        font-family: 12px;\n        color: #eeeeee;\n\n        border-top: 1px solid #333333;\n\n        background-color: #303030;\n        background-image: -webkit-linear-gradient(top,#1e1e1e 0%, #2a2a2a 8px, #303030 13px, transparent 13px);\n        background-image:    -moz-linear-gradient(top,#1e1e1e 0%, #2a2a2a 8px, #303030 13px, transparent 13px);\n        background-image:         linear-gradient(top,#1e1e1e 0%, #2a2a2a 8px, #303030 13px, transparent 13px);\n        -webkit-box-shadow: 0 -1px 0 0 #000;\n           -moz-box-shadow: 0 -1px 0 0 #000;\n                box-shadow: 0 -1px 0 0 #000;\n    }\n\n    .tab_console .page.curpage{\n        display : block;\n    }\n]]></a:style>\n<a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n    .tab_console .btncontainer .btntab {\n        padding      : 5px 20px 1px 20px;\n    }\n\n    .tab_console .btncontainer div.curbtn {\n        padding      : 3px 20px 1px 20px;\n    }\n]]></a:style>\n\n<a:presentation>\n    <a:main pages="." buttons="div[1]">\n        <div class="tab_console">\n            <div class="btncontainer"> </div>\n        </div>\n    </a:main>\n    <a:button caption="div/text()" container="div" icon="div[2]" maxwidth="90" minwidth="10">\n        <div class="btntab">\n            <div class="tab_console_title">-</div>\n            <div class="tab_console_icon"> </div>\n        </div>\n    </a:button>\n    <a:btnclose>\n        <strong> </strong>\n    </a:btnclose>\n    <a:page container=".">\n        <div class="page"> </div>\n    </a:page>\n</a:presentation>\n</a:tab>\n\n<a:tab name="editor_tab">\n    <a:style><![CDATA[\n    .editor_tab {\n        padding : 0 0 0 0;\n        margin : 0 auto;\n        overflow: hidden;\n        position:relative;\n        padding-top: 32px;\n        background-color:#e8e8e8;\n    }\n\n    .editor_tab .btnsesssioncontainer {\n        padding : 5px 45px 0 21px;\n        z-index : 100;\n        height: 25px;\n        overflow: visible;\n        white-space: nowrap;\n        color: #f5f5f5;\n        font-family : Arial;\n        font-size : 12px;\n        border-bottom : 1px solid white;\n        background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #262829),color-stop(1, #2f3031));\n        background: -moz-linear-gradient(center bottom,#262829 0%, #2f3031 100%);\n        margin-top : -32px;\n        width : auto;\n\n        -moz-box-shadow    : 0px 1px 0px rgba(255, 255, 255, 0.05) inset;\n        -webkit-box-shadow : 0px 1px 0px rgba(255, 255, 255, 0.05) inset;\n        box-shadow         : 0px 1px 0px rgba(255, 255, 255, 0.05) inset;\n    }\n\n    .editor_tab .btnsesssioncontainer>div {\n        cursor: default;\n        display: block;\n        display : inline-block;\n        margin: 0 0 0 0;\n        padding: 0;\n        position : relative;\n        vertical-align : bottom;\n    }\n\n    .editor_tab .btnsesssioncontainer .session_btn {\n        padding      : 0 20px;\n        position     : relative;\n        margin-right : -20px;\n        margin-top   : 0;\n        height:25px;\n        border-bottom:1px solid white;\n    }\n\n    .editor_tab .btnsesssioncontainer .session_btn .tab_middle {\n        background-image    : url(images/editor_tab.png);\n        background-position : 0 -104px;\n        height              : 20px;\n        position            : relative;\n        overflow            : hidden;\n        padding             : 5px 0 0 0;\n    }\n\n    .editor_tab .btnsesssioncontainer .session_btn .tab_middle .sessiontab_icon {\n        height:8px;\n        left:0;\n        position:absolute;\n        top:10px;\n        width:5px;\n    }\n\n    .editor_tab .btnsesssioncontainer .session_btn .sessiontab_icon {\n        background-repeat: no-repeat;\n        background-position: 0 0;\n    }\n\n    .editor_tab .btnsesssioncontainer .sessiontab_saving {\n        position: absolute;\n        right: 0;\n        top: 7px;\n        z-index: 10;\n    }\n\n    .editor_tab .btnsesssioncontainer .loading_active .sessiontab_saving,\n    .editor_tab .btnsesssioncontainer .saving_active .sessiontab_saving {\n        height: 15px;\n        width: 15px;\n        background-image: url(images/tab-save-spinner-active.gif);\n    }\n\n    .editor_tab .btnsesssioncontainer .loading .sessiontab_saving,\n    .editor_tab .btnsesssioncontainer .saving .sessiontab_saving {\n        height: 13px;\n        width: 13px;\n        background-image: url(images/tab-save-spinner-inactive.gif);\n    }\n\n    .editor_tab .btnsesssioncontainer .over .sessiontab_saving {\n        display: none;\n    }\n\n    /*.editor_tab .btnsesssioncontainer .saving_active .sessiontab_icon {\n        background-image: url(images/save-indicator-active-tab.gif);\n    }\n    .editor_tab .btnsesssioncontainer .saving .sessiontab_icon {\n        background-image: url(images/save-indicator-inactive-tab.gif);\n    }*/\n\n    /*.editor_tab .btnsesssioncontainer .loading_active .sessiontab_icon {\n\n        background-image: url(images/load-indicator-active-tab.gif);\n    }\n\n    .editor_tab .btnsesssioncontainer .loading .sessiontab_icon {\n        background-image: url(images/load-indicator-inactive-tab.gif);\n    }*/\n\n    .editor_tab .btnsesssioncontainer .session_btn .tab_middle .sessiontab_title {\n        overflow : hidden;\n        padding  : 0 0 0 0;\n        -moz-user-select: -moz-none;\n        -khtml-user-select: none;\n        -webkit-user-select: none;\n        -o-user-select: none;\n        user-select: none;\n    }\n\n    .editor_tab .btnsesssioncontainer .session_btn.btnclose .tab_middle .sessiontab_title {\n        margin-right : 15px;\n        margin-left : 4px;\n    }\n\n    .editor_tab .scale .session_btn .sessiontab_title{\n        display : block;\n        overflow : hidden;\n        text-overflow : ellipsis;\n        white-space : nowrap;\n    }\n\n    .editor_tab .btnsesssioncontainer .tab_left,\n    .editor_tab .btnsesssioncontainer .tab_right {\n        position            : absolute;\n        height              : 25px;\n        width               : 20px;\n        background-image    : url(images/editor_tab.png);\n        background-repeat   : no-repeat;\n        top                 : 0;\n    }\n\n    .editor_tab .btnsesssioncontainer .tab_left {\n        background-position : 0 -78px;\n        left                : 0;\n    }\n    .editor_tab .btnsesssioncontainer .tab_right {\n        background-position : 0 -130px;\n        right               : 0;\n    }\n\n    .editor_tab .btnsesssioncontainer div.down {\n        text-shadow: none;\n        color: #d9d9d9;\n    }\n\n    .editor_tab .btnsesssioncontainer div.over .tab_middle {\n        background-position : 0 -182px;\n    }\n    .editor_tab .btnsesssioncontainer div.over .tab_left {\n        background-position : 0 -156px;\n    }\n    .editor_tab .btnsesssioncontainer div.over .tab_right {\n        background-position : 0 -208px;\n    }\n\n    .editor_tab .btnsesssioncontainer div.curbtn {\n        color       : #333333;\n        cursor      : default;\n        text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n        z-index     : 10;\n        height:25px;\n        border-bottom:1px solid #e8e8e8;\n    }\n\n    .editor_tab .btnsesssioncontainer div.curbtn .tab_middle {\n        background-position : 0 -26px;\n        padding             : 6px 0 0 0;\n        height:19px;\n        color:#000000;\n    }\n    .editor_tab .btnsesssioncontainer div.curbtn .tab_left {\n        background-position : 0 0;\n    }\n    .editor_tab .btnsesssioncontainer div.curbtn .tab_right {\n        background-position : 0 -52px;\n    }\n\n    .editor_tab .scale .btn .tab_middle {\n        display : block;\n        overflow : hidden;\n        text-overflow : ellipsis;\n        white-space : nowrap;\n    }\n\n    .editor_tabFocus .curbtn{\n    }\n\n    .editor_tab .btnsesssioncontainer .btnclose strong {\n        width               : 14px;\n        height              : 14px;\n        display             : block;\n        position            : absolute;\n        right               : 0;\n        top                 : 7px;\n        background-image    : url(images/close_tab_btn.png);\n        background-repeat   : no-repeat;\n        background-position : 0 -14px;\n    }\n\n    .editor_tab .btnsesssioncontainer .btnclose strong:hover {\n        background-position : -14px -14px;\n    }\n\n    .editor_tab .btnsesssioncontainer .btnclose strong:active {\n        background-position : -28px -14px;\n    }\n\n    .editor_tab .btnsesssioncontainer .curbtn.btnclose strong {\n        background-position : 0 0;\n        top: 7px;\n    }\n\n    .editor_tab .btnsesssioncontainer .curbtn.btnclose strong:hover {\n        background-position : -14px 0;\n    }\n\n    .editor_tab .btnsesssioncontainer .curbtn.btnclose strong:active {\n        background-position : -28px 0;\n    }\n\n    .editor_tab .editor_bg {\n        top : 32px;\n        bottom : 0px;\n        height : auto;\n        position : absolute;\n        margin: 0 auto;\n        background: #e8e8e8 url(images/editor_tab_bg.png) repeat 0 0;\n        /*border-bottom: 1px solid #8c8c8c;\n        border-left: 1px solid #8c8c8c;\n        border-right: 1px solid #8c8c8c;*/\n        overflow: hidden;\n        clear: both;\n        left: 0;\n        right: 0;\n    }\n\n    .editor_tab .editor_bg .editor_bg_content {\n        width: 430px;\n        margin: 100px auto 0;\n        background: url(images/empty_editor_icon.png) no-repeat center 0;\n        padding-top: 170px;\n        text-align: center;\n        color: #333333;\n        text-shadow : rgba(255, 255, 255, .71) 1px 1px 1px;\n        font-size: 18px;\n    }\n\n    .infraeditor.editor_tab .editor_bg .editor_bg_content {\n        margin-top: 0;\n    }\n\n    .editor_tab .editor_bg .editor_bg_content .editor_bg_message2 {\n        background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(237,237,237)),color-stop(1, rgb(255,255,255)));\n        background: -moz-linear-gradient(center bottom,rgb(237,237,237) 0%,rgb(255,255,255) 100%);\n        -webkit-box-shadow: 1px 1px 3px #aaaaaa;\n        -moz-box-shadow: 1px 1px 3px #aaaaaa;\n        box-shadow: 1px 1px 1px #aaaaaa;\n        padding: 15px 20px;\n        margin-top: 21px;\n        color: #2270b2;\n        font-size: 11px;\n        text-transform:uppercase;\n        border-radius : 4px;\n        -moz-border-radius: 4px;\n        -webkit-border-radius: 4px;\n        -webkit-border-radius: 4px;\n    }\n\n    .editor_tab .editor_bg .editor_bg_content .editor_bg_message {\n        color: #489829;\n        font-family: georgia;\n        padding-top: 4px;\n        background: url(images/green-arrow-left.png) no-repeat 0 0;\n        text-shadow : rgba(240, 240, 240, .71) 1px 1px 1px;\n    }\n\n    .editor_tab .editor_bg .editor_bg_message-top {\n        color: #489829;\n        font-family: georgia;\n        padding-top: 4px;\n        text-shadow : rgba(240, 240, 240, .71) 0px 1px 1px;\n        font-size: 16px;\n        margin: 35px auto 0;\n        width: 430px;\n        text-align: center;\n        display: none;\n    }\n\n    .infraeditor.editor_tab .editor_bg .editor_bg_message-top {\n        display: block;\n    }\n\n    .editor_tab .editor_bg .editor_bg_message-top span {\n        color: #a1a1a1;\n        font-size: 12px;\n    }\n\n    .editor_tab .editor_bg .editor_divider {\n        background: url(images/empty_editor_divider.png) no-repeat center center;\n        height: 14px;\n        width: 430px;\n        margin-top: 20px;\n    }\n\n    .editor_tab .session_page {\n        display : none;\n        position : absolute;\n        top : 32px;\n        bottom : 0;\n        left : 0;\n        right : 0;\n        z-index : 10;\n        margin: 0 auto;\n        background-color: #e8e8e8;\n        /*border-bottom: 1px solid #8C8C8C;*/\n        border-top:3px solid #e8e8e8;\n        overflow: hidden;\n        clear: both;\n    }\n\n    .editor_tab .session_page.curpage{\n        display : block;\n    }\n]]></a:style>\n\n<a:presentation>\n    <a:main pages="." buttons="div[1]">\n        <div class="editor_tab">\n            <div class="btnsesssioncontainer"> </div>\n            <div class="editor_bg">\n                <div class="editor_bg_message-top">\n                    Invite people to this project by sharing the URL with them.\n<!--                    <span>To access private projects both parties must have a Premium Account.</span>-->\n                    <div class="editor_divider"></div>\n                </div>\n                <div class="editor_bg_content">\n                    <div class="editor_bg_message">Open a file or create a new one to get started</div>\n                </div>\n            </div>\n        </div>\n    </a:main>\n    <a:button\n      caption   = "div[1]/div[2]/text()"\n      container = "div"\n      icon      = "div[1]/div"\n      maxwidth  = "150"\n      minwidth  = "17">\n        <div class="session_btn">\n            <div class="tab_middle">\n                <div class="sessiontab_icon"> </div>\n                <div class="sessiontab_title">-</div>\n                <div class="sessiontab_saving"> </div>\n            </div>\n            <div class="tab_left"> </div>\n            <div class="tab_right"> </div>\n        </div>\n    </a:button>\n    <a:btnclose>\n        <strong> </strong>\n    </a:btnclose>\n    <a:page container=".">\n        <div class="session_page"> </div>\n    </a:page>\n</a:presentation>\n</a:tab>\n<a:tab name="tab">\n    <a:style><![CDATA[\n        .tab {\n            padding : 0 0 0 0;\n            border: 0px solid #c3c3c3;\n            margin : 0 auto;\n            overflow: hidden;\n            position:relative;\n            padding-top: 17px;\n            /*border-bottom: 1px solid white;*/\n        }\n\n        .tab .btncontainer{\n            padding : 0 0 1px;\n            z-index : 100;\n            height: 15px;\n            overflow: visible;\n            white-space: nowrap;\n            color: #404040;\n            text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n            font-family : Tahoma, Arial;\n            font-size : 11px;\n            border-bottom : 1px solid #8c8c8c;\n\n            /*border-top : 1px solid #ffffff;\n            border-right : 1px solid #8c8c8c;\n            border-left : 1px solid #8c8c8c;*/\n\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n            margin-top : -16px;\n            width : auto;\n        }\n\n        .tab .btncontainer>div {\n            display: block;\n            /*float: left;*/\n            display : inline-block;\n            margin: 0 0 0 0;\n            padding: 0;\n            position : relative;\n            vertical-align : bottom;\n            cursor : default;\n        }\n\n        .tab .btncontainer .btntab {\n            padding      : 1px 10px 2px 10px;\n            position     : relative;\n            margin-top:-1px;\n            text-align: center;\n            border-top : 1px solid #ffffff;\n            border-right : 1px solid #8c8c8c;\n            border-bottom : 1px solid #8c8c8c;\n\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(199,199,199)),color-stop(1, rgb(214,214,214)));\n            background: -moz-linear-gradient(center bottom,rgb(199,199,199) 50%,rgb(214,214,214) 100%);\n        }\n\n        /*.tab .btncontainer div.firstbtn {\n            margin-left: 0;\n        }*/\n\n        .tab .btncontainer .btntab .tab_icon {\n            height:16px;\n            left:1px;\n            position:absolute;\n            top:1px;\n            width:16px;\n        }\n\n        .tab .btncontainer .btntab .tab_title {\n            overflow : hidden;\n            padding  : 0 0 0 0;\n        }\n\n        .tab .btncontainer .btntab.btnclose .tab_title {\n            margin-right : 15px;\n        }\n\n        .tab .scale .btntab .tab_title{\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .tab .btncontainer div.over {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n            cursor: default;\n        }\n\n        .tab .btncontainer div.curbtn {\n            color       : #202020;\n            cursor      : default;\n            z-index     : 1;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.6 rgb(246,246,246)),color-stop(1, rgb(237,237,237)));\n            background: -moz-linear-gradient(center bottom,rgb(246,246,246) 60%,rgb(237,237,237) 100%);\n            border-right : 1px solid #8c8c8c;\n            border-top: 1px solid #f9f9f9;\n            border-bottom: 1px solid #F6F6F6;\n        }\n\n        .tab .scale .btntab .tab_middle {\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .tabFocus .curbtn{\n        }\n\n        .tab .btncontainer .btnclose strong {\n            width               : 14px;\n            height              : 14px;\n            display             : block;\n            position            : absolute;\n            right               : 0;\n            top                 : 7px;\n            /*cursor              : pointer;*/\n            background-image    : url(images/close_tab_btn.png);\n            background-repeat   : no-repeat;\n            background-position : 0 -14px;\n        }\n\n        .tab .btncontainer .btnclose strong:hover {\n            background-position : -14px -14px;\n        }\n\n        .tab .btncontainer .btnclose strong:active {\n            background-position : -28px -14px;\n        }\n\n        .tab .btncontainer .curbtn.btnclose strong {\n            background-position : 0 0;\n            top: 7px;\n        }\n\n        .tab .btncontainer .curbtn.btnclose strong:hover {\n            background-position : -14px 0;\n        }\n\n        .tab .btncontainer .curbtn.btnclose strong:active {\n            background-position : -28px 0;\n        }\n\n        .tab .page {\n            display : none;\n            position : absolute;\n            top : 18px;\n            bottom : 0;\n            left : 0;\n            right : 0;\n            z-index : 10;\n            margin: 0 auto;\n            background-color: #f6f6f6;\n            /*border-left: 1px solid #8c8c8c;\n            border-right: 1px solid #8c8c8c;\n            border-bottom: 1px solid #8c8c8c;*/\n            overflow: hidden;\n            clear: both;\n            font-family : Arial;\n            font-family: 12px;\n        }\n\n        .tab .page.curpage{\n            display : block;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main pages="." buttons="div[1]">\n            <div class="tab">\n                <div class="btncontainer"> </div>\n            </div>\n        </a:main>\n        <a:button caption="div[1]/text()" container="div" maxwidth="90" minwidth="10">\n            <div class="btntab">\n                <!--div class="tab_icon"> </div-->\n                <div class="tab_title">-</div>\n            </div>\n        </a:button>\n        <a:btnclose>\n            <strong> </strong>\n        </a:btnclose>\n        <a:page container=".">\n            <div class="page"> </div>\n        </a:page>\n    </a:presentation>\n</a:tab>\n<a:tab name="extensions_tab">\n    <a:style><![CDATA[\n        .extensions_tab {\n            padding : 0 0 0 0;\n            border: 0px solid #c3c3c3;\n            margin : 0 auto;\n            overflow: hidden;\n            position:relative;\n        }\n\n        .extensions_tab .btncontainer{\n            float: left;\n            z-index : 100;\n            white-space: nowrap;\n            color: #404040;\n            text-shadow : rgba(255, 255, 255, 1) 0px 1px 0px;\n            font-family : Tahoma, Arial;\n            font-size : 11px;\n\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n            width : auto;\n        }\n\n        .extensions_tab .btncontainer>div {\n            display: block;\n            margin: 0 0 0 0;\n            padding: 0;\n            position : relative;\n        }\n\n        .extensions_tab .btncontainer .btntab {\n            padding      : 10px;\n            position     : relative;\n            border-bottom : 1px solid #8c8c8c;\n            cursor : default;\n            width : 110px;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(234,234,234)),color-stop(1, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(234,234,234) 50%,rgb(255,255,255) 100%);\n        }\n\n        .extensions_tab .btncontainer .btntab .tab_icon {\n            height:16px;\n            left:1px;\n            position:absolute;\n            top:1px;\n            width:16px;\n        }\n\n        .extensions_tab .btncontainer .btntab .tab_title {\n            overflow : hidden;\n            padding  : 0 0 0 0;\n            font-size: 12px;\n        }\n\n        .extensions_tab .btncontainer .btntab.btnclose .tab_title {\n            margin-right : 15px;\n        }\n\n        .extensions_tab .scale .btntab .tab_title{\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .extensions_tab .btncontainer div.over {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n        }\n\n        .extensions_tab .btncontainer div.curbtn {\n            color       : #202020;\n            z-index     : 1;\n            /*background: -webkit-gradient(linear,left bottom,left top,color-stop(0.6 rgb(246,246,246)),color-stop(1, rgb(237,237,237)));\n            background: -moz-linear-gradient(center bottom,rgb(246,246,246) 60%,rgb(237,237,237) 100%);*/\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);\n            -webkit-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.2) inset;\n            -moz-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.2) inset;\n        }\n\n        .extensions_tab .scale .btntab .tab_middle {\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .extensions_tab .page {\n            display : none;\n            position : absolute;\n            padding: 10px 14px;\n            top : 0;\n            bottom : 0;\n            left : 130px;\n            right : 0;\n            z-index : 10;\n            background-color: #f6f6f6;\n            overflow: hidden;\n            clear: both;\n            font-family : Arial;\n            font-family: 12px;\n        }\n\n        .extensions_tab .page.curpage{\n            display : block;\n            border-left : 1px solid #8c8c8c;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main pages="." buttons="div[1]">\n            <div class="extensions_tab">\n                <div class="btncontainer"> </div>\n            </div>\n        </a:main>\n        <a:button caption="div[1]/text()" container="div" maxwidth="90" minwidth="10">\n            <div class="btntab">\n                <!--div class="tab_icon"> </div-->\n                <div class="tab_title">-</div>\n            </div>\n        </a:button>\n        <a:btnclose>\n            <strong> </strong>\n        </a:btnclose>\n        <a:page container=".">\n            <div class="page"> </div>\n        </a:page>\n    </a:presentation>\n</a:tab>\n<a:tab name="dockbar">\n    <a:style><![CDATA[\n        .dockbar {\n            position:relative;\n            overflow: visible;\n        }\n\n        .expandedpanel .dockbar {\n            /*border-bottom: 1px solid #000000;\n            box-shadow: 0 1px 0 #505053;*/\n            border-bottom: 1px solid #38393b;\n        }\n\n        .dockcol .dockbar {\n\n        }\n\n        .dockbar .btncontainer{\n            display: none;\n        }\n\n        .dockbar .page {\n            display : none;\n        }\n\n        .dockcol .dockbar .page {\n\n        }\n\n        .dockbar .page.curpage{\n            display : block;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit"><![CDATA[\n\n    ]]></a:style>\n    <a:presentation>\n        <a:main pages="." buttons="div[1]">\n            <div class="dockbar">\n                <div class="btncontainer"> </div>\n            </div>\n        </a:main>\n        <a:button\n          caption   = "text()"\n          container = "."\n          maxwidth  = "100"\n          minwidth  = "10">\n            <div class="btntab">\n            </div>\n        </a:button>\n        <a:btnclose>\n            <strong> </strong>\n        </a:btnclose>\n        <a:page container=".">\n            <div class="page"> </div>\n        </a:page>\n    </a:presentation>\n</a:tab>\n<a:tab name="docktab">\n    <a:style><![CDATA[\n        .docktab {\n            border: 0px solid #c3c3c3;\n            margin : 0 auto;\n            overflow: hidden;\n            position:relative;\n\n            -webkit-border-radius: 4px;\n            -moz-border-radius: 4px;\n            border-radius: 4px;\n\n            /*-webkit-border-bottom-left-radius: 4px;\n            -webkit-border-bottom-right-radius: 4px;\n            -moz-border-radius-bottomleft: 4px;\n            -moz-border-radius-bottomright: 4px;\n            border-bottom-left-radius: 4px;\n            border-bottom-right-radius: 4px;*/\n\n            /*border-bottom: 1px solid white;*/\n        }\n\n        .dockcol .docktab,\n        .dragging.docktab {\n            -webkit-border-radius: 0;\n            -moz-border-radius: 0;\n            border-radius: 0;\n            /*-webkit-box-shadow: 0 2px 10px 1px #6d6d6d;\n            -moz-box-shadow: 0 2px 10px 1px #6d6d6d;\n            box-shadow: 0 2px 10px 1px #6d6d6d;*/\n        }\n\n        .docktab .btncontainer{\n            padding : 0;\n            z-index : 100;\n            height: 22px;\n            overflow: visible;\n            white-space: nowrap;\n            width : auto;\n            /*border-bottom : 1px solid #ffffff;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);*/\n        }\n        .dockcol .docktab .btncontainer{\n            padding-top: 4px;\n            padding-left: 3px;\n            padding-right: 5px;\n        }\n\n        .dragging.docktab .btncontainer {\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, #202020),color-stop(1, #2f2f2f));\n            background: -moz-linear-gradient(center bottom,#202020 0%, #2f2f2f 100%);\n        }\n\n        .docktab .btncontainer>div {\n            display: block;\n            display : inline-block;\n            margin: 0 0 0 0;\n            padding: 0;\n            position : relative;\n            vertical-align : bottom;\n            cursor : default;\n        }\n\n        .docktab .btncontainer .btntab {\n            float: left;\n            padding       : 3px 2px 4px;\n            position      : relative;\n            text-align    : center;\n            border-right  : 1px solid #464646;\n            border-bottom : 1px solid #464646;\n\n            -moz-box-shadow: 0 1px 0 rgba(100, 100, 100, 0.26) inset;\n            -webkit-box-shadow: 0 1px 0 rgba(100, 100, 100, 0.26) inset;\n\n            background: url(images/black-tab_btn_bg.png) 0 0;\n\n            /*background : -moz-linear-gradient(top, #d6d6d6, #c7c7c7 );\n            background : -webkit-gradient(linear, 0% 0%, 0% 100%, from(#d6d6d6), to(#c7c7c7));\n            -moz-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;\n            -webkit-box-shadow: 0 1px 0 rgba(255, 255, 255, 0.5) inset;*/\n\n            /*-webkit-border-top-left-radius: 4px;\n            -webkit-border-top-right-radius: 4px;\n            -moz-border-radius-topleft: 4px;\n            -moz-border-radius-topright: 4px;\n            border-top-left-radius: 4px;\n            border-top-right-radius: 4px;*/\n        }\n\n        .docktab .btncontainer .btntab.firstbtn {\n            -webkit-border-top-left-radius : 4px;\n            -moz-border-radius-topleft     : 4px;\n            border-top-left-radius: 4px;\n        }\n        .docktab .btncontainer .btntab.lastbtn {\n            -webkit-border-top-right-radius : 4px;\n            -moz-border-radius-topright     : 4px;\n            border-top-right-radius: 4px;\n        }\n\n        .expandedpanel .docktab .btncontainer .btntab {\n            padding-top: 2px;\n            -webkit-border-radius: 0;\n            -moz-border-radius: 0;\n            border-radius: 0;\n        }\n\n        .dragging.docktab .btncontainer .btntab {\n            -webkit-border-radius: 0;\n            -moz-border-radius: 0;\n            border-radius: 0;\n        }\n\n        .docktab .btncontainer .btntab .tab_icon {\n            height   : 16px;\n            left     : 1px;\n            position : absolute;\n            top      : 1px;\n            width    : 16px;\n        }\n\n        .docktab .btncontainer .btntab .tab_title {\n            overflow : hidden;\n            padding  : 1px 0 0 2px;\n            color    : #bbbbbb;\n\n            text-shadow : #303030 0px 1px 0px;\n            font-family : "Arial", Tahoma;\n            font-size : 11px;\n        }\n\n        .docktab .btncontainer .btntab.btnclose .tab_title {\n            margin-right : 15px;\n        }\n\n        .docktab .scale .btntab .tab_title{\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .docktab .btncontainer div.over {\n            /*background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(209,209,209)),color-stop(1, rgb(227,227,227)));\n            background: -moz-linear-gradient(center bottom,rgb(209,209,209) 0%,rgb(227,227,227) 100%);*/\n\n            background: url(images/black-tab_btn_bg.png) 0 -22px;\n            cursor: default;\n        }\n\n        .docktab .btncontainer div.curbtn {\n            color       : #202020;\n            cursor      : default;\n            z-index     : 1;\n            background-image: linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(250,252,254) 60%, rgb(255,255,255) 100%);\n            border-right : 1px solid #8c8c8c;\n            border-bottom: 1px solid #FAFCFE;\n        }\n\n        .docktab .btncontainer .btntab.curbtn .tab_title {\n            color: #373d43;\n            text-shadow : rgba(255,255,255,0.7) 0px 1px 0px;\n        }\n\n        .docktab .scale .btntab .tab_middle {\n            display : block;\n            overflow : hidden;\n            text-overflow : ellipsis;\n            white-space : nowrap;\n        }\n\n        .tabFocus .curbtn{\n        }\n\n        .docktab .btncontainer .btnclose strong {\n            width               : 14px;\n            height              : 14px;\n            /*display             : none;*/\n            position            : absolute;\n            right               : 2px;\n            top                 : 5px;\n            /*cursor              : pointer;*/\n            background-image    : url(images/close_tab_btn.png);\n            background-repeat   : no-repeat;\n            background-position : 0 -14px;\n        }\n\n        .docktab .btncontainer .btnclose:hover strong {\n            display: block;\n        }\n\n        .docktab .btncontainer .btnclose strong:hover {\n            background-position : -14px -14px;\n        }\n\n        .docktab .btncontainer .btnclose strong:active {\n            background-position : -28px -14px;\n        }\n\n        .docktab .btncontainer .curbtn.btnclose strong {\n            background-position : 0 0;\n            top: 4px;\n        }\n\n        .docktab .btncontainer .curbtn.btnclose strong:hover {\n            background-position : -14px 0;\n        }\n\n        .docktab .btncontainer .curbtn.btnclose strong:active {\n            background-position : -28px 0;\n        }\n\n        .expandedpanel .docktab .btncontainer .btnclose strong {\n            top: 4px;\n        }\n\n        .expandedpanel .docktab .btncontainer .curbtn.btnclose strong {\n            top: 3px;\n        }\n\n        .dockcol .docktab .noise_bg {\n            background: url(images/noise_pattern_transparent.png) 0 0;\n            bottom: 0;\n            left: 0;\n            opacity: 0.1;\n            position: absolute;\n            right: 0;\n            top: 0;\n            display: none;\n        }\n\n        .dockcol .docktab .noise_bg {\n            display: block;\n        }\n\n        .docktab .page {\n            display : none;\n            position : absolute;\n            top : 19px;\n            bottom : 0;\n            left : 0;\n            right : 0;\n            z-index : 10;\n            margin: 0 auto;\n            background-color: #f6f6f6;\n            /*border-left: 1px solid #8c8c8c;\n            border-right: 1px solid #8c8c8c;\n            border-bottom: 1px solid #8c8c8c;*/\n            overflow: hidden;\n            border-radius: 0 0 4px 4px;\n        }\n        .docktab .page > div {\n            border-radius: 0 0 4px 4px;\n        }\n\n        .docktab .page .ace_gutter {\n            border-radius: 0 0 0 4px;\n        }\n\n        .expandedpanel .docktab .page > div,\n        .expandedpanel .docktab .page .ace_gutter {\n            border-radius: 0;\n        }\n\n        .dockcol .docktab .page {\n            top: 23px;\n            right: 4px;\n            left: 3px;\n            bottom: 5px;\n        }\n\n        .docktab .page.curpage{\n            display : block;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isWebkit">\n        .docktab .btncontainer .btntab {\n            padding : 2px 2px 3px 2px;\n        }\n\n        .docktab .btncontainer .btnclose strong {\n            top: 4px;\n        }\n\n        .docktab .btncontainer .curbtn.btnclose strong {\n            top: 3px;\n        }\n    </a:style>\n\n    <a:presentation>\n        <a:main pages="." buttons="div[3]">\n            <div class="docktab">\n                <div class="expand-panel-bg"> </div>\n                <div class="noise_bg"> </div>\n                <div class="btncontainer"> </div>\n            </div>\n        </a:main>\n        <a:button\n          caption   = "div[1]/text()"\n          container = "."\n          maxwidth  = "100"\n          minwidth  = "10">\n            <div class="btntab">\n                <!--div class="tab_icon"> </div-->\n                <div class="tab_title">-</div>\n            </div>\n        </a:button>\n        <a:btnclose>\n            <strong> </strong>\n        </a:btnclose>\n        <a:page container=".">\n            <div class="page"> </div>\n        </a:page>\n    </a:presentation>\n</a:tab>\n\n<a:text name="text">\n    <a:style><![CDATA[\n        .text{\n            font-family: "Lucida Grande", Verdana;\n            font-size: 8pt;\n            color: #333;\n            background : white;\n            overflow : auto;\n        }\n        .dockblank .text{\n            height : 100%;\n        }\n\n        .textEmpty{\n            font-size : 8pt;\n            font-weight : bold;\n            color : #ccc;\n            text-align : center;\n        }\n\n        .textFocus{\n        }\n\n        .text.modal_text {\n            font-family: Arial;\n            font-size: 12px;\n            background-color: transparent;\n            color: #202020;\n            line-height: 18px;\n        }\n\n        .console_text {\n            font-family : menlo,courier new,fixed,swiss,sans-serif;\n            background: none;\n            font-size : 12px;\n            margin : 3px 0 0 0;\n            padding : 7px 0 3px 0;\n            color : #eee;\n            overflow : hidden;\n        }\n\n        .console_text .item{\n            /*border-bottom : 1px solid #3F3F3F;*/\n            padding : 2px 10px;\n        }\n\n        .console_text .red {\n            color: #c93a40;\n        }\n\n        .console_text .blue,\n        .console_text .item a:link,\n        .console_text .item a:hover,\n        .console_text .item a:active {\n            color: #86c2f6;\n        }\n        .console_text .gray,\n        .console_text .item a:visited {\n            color: #909090;\n        }\n        .console_text .white {\n            color: #eeeeee;\n        }\n\n        .apf_console{\n            border : 1px solid #c3c3c3;\n            border-width : 0 1px 0 0;\n            font-size : 11px;\n            font-family : Monaco,"Courier New",monospace;\n        }\n\n        .apf_console .item{\n            min-height : 13px;\n            padding : 2px 2px 2px 2px;\n            line-height : 13px;\n            border-bottom : 1px solid #EEE;\n            word-wrap : break-word;\n        }\n\n        .apf_console .console_time{\n            background : url(resources/time.png) no-repeat 2px 2px;\n        }\n\n        .apf_console .console_log{\n            color : #eeeeee;\n            background : url(resources/bullet_green.png) no-repeat 2px 2px;\n        }\n\n        .apf_console .console_custom{\n            background : url(resources/bullet_green.png) no-repeat 2px 2px;\n        }\n\n        .apf_console .console_warn{\n            background : url(resources/error.png) no-repeat 2px 2px;\n            color      : green;\n        }\n\n        .apf_console .console_error{\n            background : url(resources/exclamation.png) no-repeat 2px 2px;\n            color      : #c93a40;\n        }\n\n        .apf_console .console_repeat{\n            background : url(resources/bullet_green.png) no-repeat 2px 2px;\n            color      : #909090;\n        }\n\n        .apf_console .item a{\n            text-decoration : none;\n        }\n        .apf_console .item a:hover{\n            text-decoration : underline;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="text"/>\n        </a:main>\n    </a:presentation>\n</a:text>\n\n<a:textbox name="tb_console">\n    <a:style><![CDATA[\n        .tb_console {\n            position : relative;\n            height   : 31px;\n            margin-right: 1px !important\n        }\n\n        .tb_console .sbtb_middle {\n            border          : 1px solid #000;\n            background      : #eee;\n            box-shadow      : inset 0 2px 3px 0 rgba(0,0,0,.5);\n            color           : #202020;\n            font-size       : 14px;\n            height          : 20px;\n            line-height     : 18px;\n            margin          : 1px 0 0 6px;\n            padding         : 1px 4px 0px 4px;\n            outline         : none;\n            text-overflow   : ellipsis;\n        }\n        .tb_consoleFocus .sbtb_middle,\n        .tb_consoleOver .sbtb_middle,\n        .tb_console .sbtb_middle:hover {\n            /*background      : #eee;*/\n        }\n\n        .topborder .sbtb_middle{\n            border-width : 1px 0 0 0;\n        }\n\n        .tb_console .sbtb_middle INPUT {\n            border           : 0;\n            height           : 17px;\n            line-height      : 15px;\n            font-size        : 12px;\n            color            : #303030;\n            font-family      : menlo,courier new,fixed,swiss,sans-serif;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n            padding : 0;\n        }\n\n        .tb_consoleInitial .sbtb_middle INPUT {\n            color : #a3a3a3;\n            font-size : 10px;\n        }\n\n        .tb_consoleFocus .sbtb_middle input,\n        .tb_consoleOver .sbtb_middle input,\n        .tb_console .sbtb_middle:hover input {\n            color           : #202020;\n        }\n\n        .tb_consoleDisabled .sbtb_middle {\n            background      : #e2e2e2;\n        }\n        .tb_consoleDisabled .sbtb_middle INPUT {\n            color : #b3b3b3;\n        }\n\n        .tb_consoleDisabled .sbtb_middle{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(235,235,235)),color-stop(0.4, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(235,235,235) 0%,rgb(255,255,255) 40%);\n            cursor : default;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input="div[1]/input">\n            <div class="tb_console">\n                <div class="sbtb_middle">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="tbsimple">\n    <a:style><![CDATA[\n        .tbsimple{\n            border : 0;\n            padding : 1px 1px 2px 1px;\n            margin : 1px 0 0 2px;\n            font-family : Tahoma, Arial;\n            outline : none;\n        }\n\n        .tbsimple.tbtree{\n            margin : -1px 0 0 -2px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input=".">\n            <input type="text" class="tbsimple" />\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="textbox">\n    <a:alias>input</a:alias>\n    <a:alias>secret</a:alias>\n    <a:style><![CDATA[\n        .tb_textbox {\n            position : relative;\n            height   : 25px;\n        }\n\n        .tb_textbox .sbtb_middle {\n            height           : 19px;\n            padding          : 2px 5px;\n            border: 1px solid #afafaf;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(255,255,255)),color-stop(1, rgb(235,235,235)));\n            background: -moz-linear-gradient(center bottom,rgb(255,255,255) 50%,rgb(235,235,235) 100%);\n            color: #333333;\n            margin: 0;\n            outline: none;\n            font-family: Tahoma, Arial;\n            font-size: 12px;\n            text-overflow: ellipsis;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n        }\n\n        .topborder .sbtb_middle{\n            border-width : 1px 0 0 0;\n        }\n\n        .tb_textbox .sbtb_middle INPUT {\n            border           : 0;\n            height           : 17px;\n            font-size        : 12px;\n            color            : #333333;\n            font-family      : Arial;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n        }\n\n        .tb_textboxInitial .sbtb_middle INPUT {\n            color : #777777;\n        }\n\n        .tb_textboxDisabled .sbtb_middle INPUT {\n            color : #CCC;\n        }\n\n        .tb_textboxDisabled .sbtb_middle{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(235,235,235)),color-stop(0.4, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(235,235,235) 0%,rgb(255,255,255) 40%);\n            cursor : default;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input="div[1]/input">\n            <div class="tb_textbox">\n                <div class="sbtb_middle">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="black_textbox">\n    <a:style><![CDATA[\n        .btextbox {\n            position : relative;\n            -webkit-box-shadow: 0px 1px 0px #424242;\n            -moz-box-shadow: 0px 1px 0px #424242;\n            box-shadow: 0px 1px 0px #424242;\n            background-image: linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(92,92,92) 0%, rgb(105,105,105) 75%, rgb(92,92,92) 100%);\n\n            padding          : 1px;\n            color: #ffffff;\n            margin: 0;\n            outline: none;\n            font-family: Tahoma, Arial;\n            font-size: 12px;\n            text-overflow: ellipsis;\n            border : 1px solid #262626;\n        }\n\n        .btextbox INPUT {\n            border           : 0;\n            font-size        : 11px;\n            color            : #ffffff;\n            font-family      : Arial;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n        }\n\n        .btextboxFocus {\n            background-color: #96a28f;\n            background-image: none;\n        }\n\n        .btextboxInitial INPUT {\n            color : #777777;\n        }\n\n        .btextboxError {\n            background-color: #9f3636;\n            background-image: none;\n        }\n\n        .btextboxDisabled INPUT {\n            color : #fff;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input="input">\n            <div class="btextbox">\n                <input type="text"/>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="searchbox_textbox">\n    <a:style><![CDATA[\n        .searchbox_textbox {\n            position : relative;\n            height   : 25px;\n        }\n\n        .searchbox_textbox .sbtb_middle {\n            height           : 19px;\n            padding          : 2px 25px 2px 4px;\n\n\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(255,255,255)),color-stop(1, rgb(235,235,235)));\n            background: -moz-linear-gradient(center bottom,rgb(255,255,255) 50%,rgb(235,235,235) 100%);\n            color: #333333;\n            border: 1px solid #afafaf;\n            border-radius : 3px;\n            margin: 0;\n            outline: none;\n            font-family: Tahoma, Arial;\n            font-size: 12px;\n            text-overflow: ellipsis;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n        }\n\n        .searchbox_textbox .sbtb_middle INPUT {\n            border           : 0;\n            height           : 17px;\n            font-size        : 12px;\n            color            : #333333;\n            font-family      : Arial;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n        }\n\n        .searchbox_textbox.small_font .sbtb_middle,\n            .searchbox_textbox.small_font .sbtb_middle INPUT {\n            font-size: 11px;\n        }\n\n        .searchbox_textboxInitial .sbtb_middle INPUT {\n            color : #777777;\n        }\n\n        .searchbox_textbox .sbtb_arrow {\n\n        }\n\n        .searchbox_textbox .sbtb_icon {\n            width               : 18px;\n            height              : 18px;\n            position            : absolute;\n            top                 : 4px;\n            left                : 5px;\n            background-image    : url(images/searchbox_textbox_icon.png);\n            background-position : 0 0;\n            background-repeat   : no-repeat;\n        }\n\n        .searchbox_textboxFocus .sbtb_icon {\n            background-position : 0 -18px;\n        }\n\n        .searchbox_textboxFocus .btnclose {\n            position : absolute;\n            right : 8px;\n            top : 5px;\n            width : 14px;\n            height : 14px;\n            background : url(images/btnclose.gif) no-repeat 0 0;\n            display : none;\n            cursor: pointer;\n        }\n\n        .searchbox_textboxFocus .btnclose:hover{\n            background-position : 0 -14px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input="div[2]/input" button="div[3]">\n            <div class="searchbox_textbox">\n                <div class="sbtb_arrow"/>\n                <!--div class="sbtb_icon"/-->\n                <div class="sbtb_middle">\n                    <input type="text"/>\n                </div>\n                <div class="btnclose"> </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n<a:textbox name="textarea">\n    <a:style><![CDATA[\n        .ta{\n            overflow: auto;\n            resize: none;\n            \n            padding: 2px 6px;\n            border: 1px solid #AFAFAF;\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, white),color-stop(1, #EBEBEB));\n            background: -moz-linear-gradient(center bottom,white 50%,#EBEBEB 100%);\n            margin: 0;\n            text-overflow: ellipsis;\n            -webkit-box-shadow: 0px 1px 0px #ffffff;\n            -moz-box-shadow: 0px 1px 0px #ffffff;\n            box-shadow: 0px 1px 0px #ffffff;\n            \n            font-size: 12px;\n            color: #333;\n            font-family: Arial;\n            outline: none;\n            background-color: transparent;\n        }\n\n        .taFocus{\n        }\n\n        .taDisabled{\n            border: 1px solid #c3c3c3;\n            color: #bebebe;\n        }\n\n        .taInitial{\n            color : gray;\n        }\n\n        .taError{\n            border: 2px solid #ffb500;\n            padding : 5px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input=".">\n            <textarea type="text" class="ta" />\n        </a:main>\n    </a:presentation>\n</a:textbox>\n\n<a:textarea name="textarea_ide">\n    <a:style><![CDATA[\n        .textarea_ide {\n            font-family: Arial;\n            font-size: 10px;\n            color: #202020;\n            padding: 5px;\n            word-wrap: break-word;\n            line-height: 14px;\n            margin-left: 70px;\n            border-top: 1px solid #737373;\n            border-bottom: 1px solid #999999;\n            border-left: 1px solid #999999;\n            border-right: 1px solid #999999;\n            overflow    : auto;\n            outline     : none;\n            background-color: #ffffff;\n        }\n\n        .textarea_ideFocus {\n\n        }\n\n        .textarea_ideDisabled{\n\n        }\n\n        .textarea_ideInitial{\n\n        }\n\n        .textarea_ideError{\n\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main input=".">\n            <textarea type=\'text\' class="textarea_ide" />\n        </a:main>\n    </a:presentation>\n</a:textarea>\n\n<a:textbox name="textbox-modal">\n    <a:style><![CDATA[\n        .textbox-modal {\n            position : relative;\n            height   : 29px;\n\n            border-bottom: 1px solid #E3E3E3;\n            border-radius: 0 0px 6px 6px;\n        }\n\n        .textbox-modal .sbtb_middle {\n            margin: 0;\n            outline: none;\n            font-family: Arial;\n            font-size: 11px;\n            text-overflow: ellipsis;\n            color: #333333;\n\n            height           : 22px;\n            padding          : 2px 5px;\n            background-color: #ffffff;\n\n            -webkit-box-shadow: inset 0px 1px 1px 0px #cccccc;\n            -moz-box-shadow: inset 0px 1px 1px 0px #cccccc;\n            box-shadow: inset 0px 1px 1px 0px #cccccc;\n\n            border-width: 1px;\n            border-style: solid;\n            border-color: #8d8d8e #9e9e9c #a5a5a5;\n\n            -webkit-border-radius: 6px;\n            -moz-border-radius: 6px;\n            border-radius: 6px;\n        }\n\n        .textbox-modal.required-tb .sbtb_middle {\n            background-color: #e9f3d0;\n        }\n\n        .textbox-modal .sbtb_middle INPUT {\n            border           : 0;\n            height           : 21px;\n            font-size        : 11px;\n            color            : #333333;\n            font-family      : Arial;\n            outline          : none;\n            background-color : transparent;\n            width: 100%;\n        }\n\n        .textbox-modalInitial .sbtb_middle INPUT {\n            color : #bdbdbd;\n            text-shadow : #ffffff 0px 1px 0px;\n        }\n\n        .textbox-modalInitial.required-tb .sbtb_middle INPUT {\n            color : #9fa987;\n            text-shadow : #fbfff1 0px 1px 0px;\n        }\n\n        .textbox-modalDisabled.required-tb .sbtb_middle INPUT {\n            color : #CCC;\n        }\n\n        .textbox-modalDisabled .sbtb_middle{\n            background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(235,235,235)),color-stop(0.4, rgb(255,255,255)));\n            background: -moz-linear-gradient(center bottom,rgb(235,235,235) 0%,rgb(255,255,255) 40%);\n            cursor : default;\n            box-shadow: none;\n        }\n\n        .textbox-modalDisabled .sbtb_middle INPUT {\n            color : #CCC;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n        .textbox-modal .sbtb_middle {\n            padding: 1px 5px 3px;\n        }\n    ]]></a:style>\n    <a:presentation>\n        <a:main input="div[1]/input">\n            <div class="textbox-modal">\n                <div class="sbtb_middle">\n                    <input type="text"/>\n                </div>\n            </div>\n        </a:main>\n    </a:presentation>\n</a:textbox>\n\n<a:toolbar name="toolbar">\n    <a:style><![CDATA[\n        .docktab .toolbar {\n            border-bottom: 1px solid #e1e5ea;\n        }\n\n        .toolbar .menubar {\n            background: url(images/menubar_row.png) repeat-x top left;\n            height: 22px;\n            z-index: 1;\n            font-family: Tahoma, Arial;\n            font-size: 12px;\n            position: relative;\n        }\n\n        .toolbar .subbar {\n            /*background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(222,224,227)),color-stop(1, rgb(239,241,244)));\n            background: -moz-linear-gradient(center bottom,rgb(222,224,227) 0%,rgb(239,241,244) 100%);*/\n\n            background-image: linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(236,239,242) 0%, rgb(237,240,243) 50%, rgb(243,246,248) 51%, rgb(249,251,254) 100%);\n\n\n\n            font-family: Arial;\n            font-size: 12px;\n            /*border-bottom: 1px solid #b2b2b2;*/\n            border-bottom: 1px solid #E1E5EA;\n            position: relative;\n            padding: 0;\n            width : 100%;\n            overflow : hidden;\n            height : 27px;\n        }\n\n        .docktab .toolbar .subbar {\n            border-bottom: 1px solid #e8ecef;\n        }\n\n        .toolbar.modal-toolbar .subbar {\n            background-image: linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n            background-image: -o-linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n            background-image: -moz-linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n            background-image: -webkit-linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n            background-image: -ms-linear-gradient(bottom, rgb(217,217,217) 0%, rgb(237,237,237) 100%);\n\n            border-top: 1px solid #f6f6f6;\n            border-bottom: 1px solid #bfbfbf;\n        }\n        .toolbar .subbar.no_border {\n            border-bottom: none;\n            padding-top: 1px;\n        }\n\n        .toolbar>.subbar>*{\n            display : inline-block;\n            float : left;\n            margin : 2px;\n        }\n\n        .toolbar>.subbar>.hbox, .toolbar>.subbar>.vbox, .toolbar>.subbar>.table{\n            display : block;\n            float : none;\n            margin : 0;\n        }\n\n        .toolbar>.subbar>.divider {\n            border-left: 1px solid #c4c4c4;\n            border-right: 1px solid #fafafa;\n            border-bottom: none;\n            border-top: none;\n            height: 17px;\n            float: left;\n            margin: 4px 0 0 0;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container=".">\n            <div class="toolbar"> </div>\n        </a:main>\n        <a:bar container="." inherit="true" minheight="28">\n            <div class="subbar"> </div>\n        </a:bar>\n        <a:menubar container="." inherit="true">\n            <div class="menubar">\n            </div>\n        </a:menubar>\n        <a:button link="toolbarbutton" inherit="true"/>\n        <a:divider inherit="true">\n            <div class="divider"> </div>\n        </a:divider>\n    </a:presentation>\n</a:toolbar>\n\n<a:tree name="tree">\n    <a:style><![CDATA[\n        .filemgr-tree {\n            cursor           : default;\n            position         : relative;\n            padding          : 0;\n            overflow         : hidden;\n            border-right     : 1px solid #f5f5f5;\n\n            -webkit-user-select: none;\n            -khtml-user-select: none;\n            -moz-user-select: none;\n            -o-user-select: none;\n            user-select: none;\n        }\n\n        .hboxTrFiles {\n            background :url(images/tree-shadow-left.png) repeat-y left 0, url(images/tree-shadow-right.png) repeat-y right 0, url(images/tree_backg.png) repeat 0 0;\n        }\n\n        .filemgr-tree U {\n            position:relative;\n            overflow:hidden;\n            display:block;\n            margin:0;\n            padding:0 0 0 0;\n            text-decoration:none;\n        }\n\n        .filemgr-tree U .item-fix {\n            padding-left : 15px;\n        }\n\n        .filemgr-tree U U .item-fix {\n            padding-left : 30px;\n        }\n\n        .filemgr-tree U U U .item-fix {\n            padding-left : 45px;\n        }\n\n        .filemgr-tree U U U U .item-fix {\n            padding-left : 60px;\n        }\n\n        .filemgr-tree U U U U U .item-fix {\n            padding-left : 75px;\n        }\n\n        .filemgr-tree U U U U U U .item-fix {\n            padding-left : 90px;\n        }\n\n        .filemgr-tree U U U U U U U .item-fix {\n            padding-left : 105px;\n        }\n\n        .filemgr-tree U U U U U U U U .item-fix {\n            padding-left : 120px;\n        }\n\n        .filemgr-tree U U U U U U U U U .item-fix {\n            padding-left : 135px;\n        }\n\n        .filemgr-tree U U U U U U U U U U .item-fix {\n            padding-left : 150px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U .item-fix {\n            padding-left : 165px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U .item-fix {\n            padding-left : 180px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U .item-fix {\n            padding-left : 195px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U .item-fix {\n            padding-left : 210px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 225px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 240px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 255px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 270px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 285px;\n        }\n\n        .filemgr-tree U U U U U U U U U U U U U U U U U U U U .item-fix {\n            padding-left : 300px;\n        }\n\n        .filemgr-tree .item-fix {\n            position:relative;\n            height:18px;\n            border-top:1px solid transparent;\n            border-bottom:1px solid transparent;\n            /*width:100%;*/\n        }\n\n        .filemgr-tree .item-fix .item {\n            height:18px;\n            padding:0 0 0 14px;\n            position:relative;\n            /*overflow:hidden;*/\n        }\n\n        .filemgr-tree .item-fix.selected {\n            background : url(images/tree_selected.png) repeat 0 0;\n        }\n\n        .filemgr-dragtree .item .caption,\n        .filemgr-tree .item-fix.dragAppend .item {\n            color: white;\n            margin-right: 5px;\n        }\n\n        .filemgr-dragtree .item .caption,\n        .filemgr-tree .item-fix.dragAppend .label-content {\n            -webkit-border-radius: 10px;\n            -moz-border-radius: 10px;\n            border-radius: 10px;\n            filter     : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#2890e5\', endColorstr=\'#1f82d2\');\n            -ms-filter : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#2890e5\', endColorstr=\'#1f82d2\')";\n            background : -webkit-gradient(linear, left top, left bottom, from(#2890e5), color-stop(1, #1f82d2));\n            background : -moz-linear-gradient(center bottom, #1f82d2 0%, #2890e5 100%) repeat scroll 0 0 transparent;\n        }\n\n        .filemgr-tree .item-fix.dragDenied {\n\n        }\n\n        .filemgr-tree .item-fix.dragInsert {\n\n        }\n\n        .filemgr-treeFocus .item-fix.selected {\n            border-top:1px solid #3a9bec;\n            border-bottom:1px solid #185f97;\n            filter     : progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#2890e5\', endColorstr=\'#1f82d2\');\n            -ms-filter : "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#2890e5\', endColorstr=\'#1f82d2\')";\n            background : -webkit-gradient(linear, left top, left bottom, from(#2890e5), color-stop(1, #1f82d2));\n            background : -moz-linear-gradient(center bottom, #1f82d2 0%, #2890e5 100%) repeat scroll 0 0 transparent;\n        }\n\n        .filemgr-dragtree,\n        .filemgr-treeFocus .item-fix.selected .item LABEL .caption,\n        .filemgr-treeFocus .item-fix.dragAppend .item LABEL .caption {\n            color:white;\n        }\n\n        .filemgr-tree .item SPAN {\n            top:5px;\n            left:4px;\n            width:10px;\n            height:10px;\n            position:absolute;\n            overflow:hidden;\n        }\n\n        .filemgr-tree U.root .item-fix.min .item SPAN,\n        .filemgr-tree U.root .item-fix.minlast .item SPAN,\n        .filemgr-tree U.root .item-fix.plus .item SPAN,\n        .filemgr-tree U.root .item-fix.pluslast .item SPAN,\n        .filemgr-tree .item-fix.root .item SPAN {\n            background-image:url(images/tree_close_arrow_small.png);\n            background-repeat: no-repeat;\n        }\n\n        .filemgr-tree .item-fix.min .item SPAN,\n        .filemgr-tree .item-fix.minlast .item SPAN {\n            background-position: -10px -1px;\n        }\n\n        .filemgr-tree .item-fix.plus .item SPAN,\n        .filemgr-tree .item-fix.pluslast .item SPAN {\n            background-position: 0 0;\n        }\n\n        .filemgr-tree .item LABEL {\n            display:block;\n            position:relative;\n            /*overflow:hidden;*/\n            height:18px;\n            background-position:3px 1px;\n            background-repeat:no-repeat;\n            padding-left:21px;\n        }\n\n        .filemgr-tree .item LABEL .caption {\n            font-family : Tahoma, Arial;\n            font-size   : 11px;\n            color       : #101010;\n            display:block;\n            position:relative;\n            overflow:hidden;\n            height:16px;\n            padding:1px 0 0 2px;\n            text-decoration:none;\n            white-space: nowrap;\n        }\n\n        .filemgr-tree .loading .item {\n            background : url(images/file-tree-load-spinner.gif) no-repeat 16px 1px;\n        }\n\n        .filemgr-tree .loading .item LABEL {\n            background-position : -1000px 0;\n        }\n\n        .filemgr-tree .loading.selected .item {\n            background : url(images/file-tree-load-spinner-selected.gif) no-repeat 16px 1px;\n        }\n\n        .filemgr-tree .ldng,\n        .filemgr-tree .empty {\n            display : none;\n        }\n\n        #txt_rename {\n            /*border:1px solid #2084d6;\n            background-color: #d7e7f4;*/\n\n            height:16px;\n            padding-left:1px;\n            margin-top:0px;\n\n            font-family : Tahoma, Arial;\n            font-size   : 11px;\n            color       : #101010;\n            position:relative;\n            overflow:visible;\n            text-decoration:none;\n            white-space: nowrap;\n            word-break: keep-all;\n            cursor: text;\n            outline : none;\n\n            -webkit-user-select: text;\n            -khtml-user-select: text;\n            -moz-user-select: text;\n            -o-user-select: text;\n            user-select: text;\n\n            overflow: visible;\n            display: inline-block;\n            background-color: #EAF1F7;\n            border: 1px solid #90C3EF;\n            -moz-box-shadow: 0px 0px 6px #76839A;\n            -webkit-box-shadow: 0px 0px 6px #76839A;\n            box-shadow: 0px 0px 6px #76839A;\n        }\n\n        #txt_rename::selection {\n            background: #90C3EF;\n            }\n        #txt_rename::-moz-selection {\n            background: #90C3EF;\n        }\n\n        .filemgr-dragtree {\n            overflow:hidden;\n            height:22px;\n            opacity: .6;\n        }\n\n        .filemgr-dragtree .item SPAN {\n            display:none;\n        }\n\n        .filemgr-dragtree .item LABEL {\n            display:block;\n            position:relative;\n            overflow:hidden;\n            height:20px;\n            background-position:0 2px;\n            background-repeat:no-repeat;\n            margin-left:6px;\n            padding-right:6px;\n            float:left;\n        }\n\n        .filemgr-dragtree .item LABEL .caption {\n            font-family     : Tahoma, Arial;\n            font-size       : 11px;\n            color           : white;\n            display         : block;\n            position        : relative;\n            overflow        : hidden;\n            height          : 16px;\n            padding         : 0 5px 0;\n            margin-left     : 18px;\n            margin-top      : 3px;\n            text-decoration : none;\n            white-space     : nowrap;\n            text-shadow : #8394a2 0px 1px 0px;\n        }\n    ]]></a:style>\n    <a:style condition="apf.isChrome || apf.isSafari"><![CDATA[\n        .filemgr-tree .item LABEL .caption {\n            height:16px;\n            padding:2px 0 0 2px;\n        }\n\n        #txt_rename {\n            height:15px;\n            padding-top:1px;\n        }\n\n        .filemgr-dragtree2 .item LABEL .caption {\n            height          : 16px;\n            padding         : 3px 0 0 20px;\n        }\n    ]]></a:style>\n\n    <a:presentation>\n        <a:main container="." startclosed="false">\n            <div class="filemgr-tree">\n\n            </div>\n        </a:main>\n        <a:item\n          class     = "."\n          caption   = "div/div/label/u"\n          icon      = "div/div/label"\n          openclose = "div/span"\n          select    = "div/div/label"\n          container = "following-sibling::u">\n            <div class="item-fix">\n                <div class="item">\n                    <span> </span>\n                    <div class="label-content">\n                        <label>\n                            <u class="caption">-</u>\n                        </label>\n                    </div>\n                </div>\n            </div>\n            <u> </u>\n        </a:item>\n        <a:dragindicator>\n            <div class="filemgr-dragtree">\n                <div class="item">\n                    <span> </span>\n                    <div class="label-content">\n                        <label>\n                            <u class="caption">-</u>\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </a:dragindicator>\n        <a:loading>\n            <div class="ldng">\n                <span> </span>\n                <label>Loading...</label>\n            </div>\n        </a:loading>\n        <a:empty caption=".">\n            <div class="message"></div>\n        </a:empty>\n    </a:presentation>\n</a:tree>\n<a:errorbox name="errorbox">\n        <a:style><![CDATA[\n            .errorbox {\n                cursor      : default;\n                z-index     : 2000000;\n                position    : absolute;\n                margin      : 33px 0 0 5px;\n            }\n\n            .errorbox.upward {\n                margin-top: -5px;\n            }\n\n            .errorReserveUrl {\n                max-width: 350px !important;\n            }\n\n            .errorbox strong{\n                display : block;\n                margin  : 0 0 3px 0;\n            }\n\n            .errorbox .errorbox_ctl,\n            .errorbox .errorbox_ctr,\n            .errorbox .errorbox_cbl,\n            .errorbox .errorbox_cbr {\n                position            : absolute;\n                width               : 12px;\n                background-repeat   : no-repeat;\n                background-position : 0 0;\n            }\n\n            .errorbox .errorbox_ctl {\n                background-image    : url(images/hp_errorbox_ctl.png);\n                height              : 12px;\n                top                 : 0;\n                left                : 0;\n            }\n\n            .errorbox .errorbox_ctr {\n                background-image    : url(images/hp_errorbox_ctr.png);\n                height              : 12px;\n                top                 : 0;\n                right               : 0;\n            }\n\n            .errorbox .errorbox_cbl {\n                background-image    : url(images/hp_errorbox_cbl.png);\n                height              : 20px;\n                bottom              : 0;\n                left                : 0;\n            }\n\n            .errorbox .errorbox_cbr {\n                background-image    : url(images/hp_errorbox_cbr.png);\n                height              : 20px;\n                bottom              : 0;\n                right               : 0;\n            }\n\n            .errorbox .errorbox_bt,\n            .errorbox .errorbox_bl,\n            .errorbox .errorbox_br,\n            .errorbox .errorbox_bb {\n                position            : absolute;\n            }\n\n            .errorbox .errorbox_bt,\n            .errorbox .errorbox_bb {\n                background-repeat : repeat-x;\n            }\n\n            .errorbox .errorbox_bl,\n            .errorbox .errorbox_br {\n                background-repeat : repeat-y;\n            }\n\n            .errorbox .errorbox_bt {\n                background-image    : url(images/hp_errorbox_bt.png);\n                top                 : 0;\n                left                : 12px;\n                right               : 12px;\n                height              : 12px;\n                background-position : 0 0px;\n            }\n\n            .errorbox .errorbox_bb {\n                background-image    : url(images/hp_errorbox_bb.png);\n                bottom              : 0;\n                left                : 12px;\n                right               : 12px;\n                height              : 20px;\n                background-position : 0 0px;\n            }\n\n            .errorbox .errorbox_bl {\n                bottom              : 20px;\n                top                 : 12px;\n                left                : 0;\n                width               : 12px;\n                background-image    : url(images/hp_errorbox_bl.png);\n                background-position : 0 0;\n            }\n\n            .errorbox .errorbox_br {\n                bottom              : 20px;\n                top                 : 12px;\n                right               : 0;\n                width               : 12px;\n                background-image    : url(images/hp_errorbox_br.png);\n                background-position : 0 0;\n            }\n\n            .errorbox .errorboxContent {\n                top         : 12px;\n                left        : 12px;\n                right       : 12px;\n                bottom      : 12px;\n                padding     : 12px 12px 20px 12px;\n            }\n\n            .errorReserveUrl .errorboxContent {\n                width       : 325px;\n            }\n\n            .errorbox .errorboxContent SPAN {\n                padding         : 6px 8px 6px 2px;\n                display         : block;\n                background-color: #bf0202;\n                font-family     : Tahoma, Arial;\n                font-size       : 8pt;\n                color           : #ffffff;\n            }\n\n            .errorReserveUrl .errorboxContent SPAN {\n                text-align: center;\n            }\n\n            .errorbox .errbox_arrow {\n                background : url("images/hp_errorbox_arrow.png") no-repeat top left;\n                width      : 11px;\n                height     : 9px;\n                position   : absolute;\n                top        : -8px;\n                left       : 15px;\n                padding    : 0;\n                margin     : 0;\n                border     : 0;\n                z-index    : 10000000;\n            }\n\n            .errorbox.upward .errbox_arrow {\n                background-position: 0 -9px;\n                top: 54px;\n            }\n\n            .errorReserveUrl .errbox_arrow {\n                display: none;\n            }\n\n            .errorbox .close {\n                width      : 9px;\n                height     : 10px;\n                background : url("images/hp_errorbox_close.png") no-repeat top left;\n                position   : absolute;\n                top        : 5px;\n                left       : -5px;\n                z-index    : 999999;\n            }\n\n            .errorbox .close:hover {\n                background-position : 0 -10px;\n            }\n\n            .errorReserveUrl .close {\n                display: none;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main\n              container = "div[1]/span"\n              caption   = "div[1]/span"\n              for       = "@for"\n              close     = "div[3]/a"\n              maxwidth  = "275">\n                <div class="errorbox">\n                    <div class="errorboxContent">\n                        <span> </span>\n                    </div>\n                    <div class="errorbox_ctl"> </div>\n                    <div class="errorbox_ctr">\n                        <a class="close" href="javascript:void(0)" onclick="return false;"> </a>\n                    </div>\n                    <div class="errorbox_cbl"> </div>\n                    <div class="errorbox_cbr"> </div>\n                    <div class="errorbox_bt">\n                        <div class="errbox_arrow"> </div>\n                    </div>\n                    <div class="errorbox_bl"> </div>\n                    <div class="errorbox_br"> </div>\n                    <div class="errorbox_bb"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:errorbox>\n\n    <a:img name="img">\n        <a:style><![CDATA[\n            .img{\n                overflow: auto;\n            }\n\n            .img div {\n                width : 100%;\n                height : 100%;\n                display: -moz-box;\n                display: -webkit-box;\n                -moz-box-orient: horizontal;\n                -webkit-box-orient: horizontal;\n                box-orient: horizontal;\n                -moz-box-pack: center;\n                -webkit-box-pack: center;\n                box-pack: center;\n                -moz-box-align: center;\n                -webkit-box-align: center;\n                box-align: center;\n            }\n\n            .img IMG {\n                display: block;\n            }\n\n            .img span{\n                display:block;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main image="div/span/img/@src">\n                <div class="img">\n                    <div>\n                        <span><img src="" /></span>\n                    </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:img>\n</a:skin>\n'}),function(){function a(a){if(typeof requirejs!="undefined"){var b=c.define;c.define=function(a,c,d){return typeof d!="function"?b.apply(this,arguments):b(a,c,function(a,b,e){return c[2]=="module"&&(e.packaged=!0),d.apply(this,arguments)})},c.define.packaged=!0;return}var f=function(a,b){return e("",a,b)};f.packaged=!0;var g=c;a&&(c[a]||(c[a]={}),g=c[a]),g.define&&(d.original=g.define),g.define=d,g.require&&(e.original=g.require),g.require=f}var b="",c=function(){return this}(),d=function(a,b,c){if(typeof a!="string"){d.original?d.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(c=b),d.modules||(d.modules={}),d.modules[a]=c},e=function(a,b,c){if(Object.prototype.toString.call(b)==="[object Array]"){var d=[];for(var f=0,h=b.length;f<h;++f){var i=g(a,b[f]);if(!i&&e.original)return e.original.apply(window,arguments);d.push(i)}c&&c.apply(null,d)}else{if(typeof b=="string"){var j=g(a,b);return!j&&e.original?e.original.apply(window,arguments):(c&&c(),j)}if(e.original)return e.original.apply(window,arguments)}},f=function(a,b){if(b.indexOf("!")!==-1){var c=b.split("!");return f(a,c[0])+"!"+f(a,c[1])}if(b.charAt(0)=="."){var d=a.split("/").slice(0,-1).join("/");b=d+"/"+b;while(b.indexOf(".")!==-1&&e!=b){var e=b;b=b.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return b},g=function(a,b){b=f(a,b);var c=d.modules[b];if(!c)return null;if(typeof c=="function"){var g={},h={id:b,uri:"",exports:g,packaged:!0},i=function(a,c){return e(b,a,c)},j=c(i,g,h);return g=j||h.exports,d.modules[b]=g,g}return c};a(b)}(),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/multi_select","ace/worker/worker_client","ace/keyboard/hash_handler","ace/keyboard/state_handler","ace/placeholder","ace/config","ace/theme/textmate"],function(a,b,c){"use strict",a("./lib/fixoldbrowsers");var d=a("./lib/dom"),e=a("./lib/event"),f=a("./editor").Editor,g=a("./edit_session").EditSession,h=a("./undomanager").UndoManager,i=a("./virtual_renderer").VirtualRenderer,j=a("./multi_select").MultiSelect;a("./worker/worker_client"),a("./keyboard/hash_handler"),a("./keyboard/state_handler"),a("./placeholder"),a("./config").init(),b.edit=function(b){typeof b=="string"&&(b=document.getElementById(b));var c=new g(d.getInnerText(b));c.setUndoManager(new h),b.innerHTML="";var k=new f(new i(b,a("./theme/textmate")));new j(k),k.setSession(c);var l={};return l.document=c,l.editor=k,k.resize(),e.addListener(window,"resize",function(){k.resize()}),b.env=l,k.env=l,k}}),define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(a,b,c){"use strict",a("./regexp"),a("./es5-shim")}),define("ace/lib/regexp",["require","exports","module"],function(a,b,c){function d(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function e(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(var d=c||0;d<a.length;d++)if(a[d]===b)return d;return-1}"use strict";var f={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},g=f.exec.call(/()??/,"")[1]===undefined,h=function(){var a=/^/g;return f.test.call(a,""),!a.lastIndex}();RegExp.prototype.exec=function(a){var b=f.exec.apply(this,arguments),c,i;if(typeof a=="string"&&b){!g&&b.length>1&&e(b,"")>-1&&(i=RegExp(this.source,f.replace.call(d(this),"g","")),f.replace.call(a.slice(b.index),i,function(){for(var a=1;a<arguments.length-2;a++)arguments[a]===undefined&&(b[a]=undefined)}));if(this._xregexp&&this._xregexp.captureNames)for(var j=1;j<b.length;j++)c=this._xregexp.captureNames[j-1],c&&(b[c]=b[j]);!h&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--}return b},h||(RegExp.prototype.test=function(a){var b=f.exec.call(this,a);return b&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--,!!b})}),define("ace/lib/es5-shim",["require","exports","module"],function(a,b,c){function d(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var c=h.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(h.call(arguments)));return g!==null&&Object(g)===g?g:f}return b.apply(a,c.concat(h.call(arguments)))};return d});var e=Function.prototype.call,f=Array.prototype,g=Object.prototype,h=f.slice,i=e.bind(g.toString),j=e.bind(g.hasOwnProperty),k,l,m,n,o;if(o=j(g,"__defineGetter__"))k=e.bind(g.__defineGetter__),l=e.bind(g.__defineSetter__),m=e.bind(g.__lookupGetter__),n=e.bind(g.__lookupSetter__);Array.isArray||(Array.isArray=function(a){return i(a)=="[object Array]"}),Array.prototype.forEach||(Array.prototype.forEach=function(a){var b=G(this),c=arguments[1],d=0,e=b.length>>>0;if(i(a)!="[object Function]")throw new TypeError;while(d<e)d in b&&a.call(c,b[d],d,b),d++}),Array.prototype.map||(Array.prototype.map=function(a){var b=G(this),c=b.length>>>0,d=Array(c),e=arguments[1];if(i(a)!="[object Function]")throw new TypeError;for(var f=0;f<c;f++)f in b&&(d[f]=a.call(e,b[f],f,b));return d}),Array.prototype.filter||(Array.prototype.filter=function(a){var b=G(this),c=b.length>>>0,d=[],e=arguments[1];if(i(a)!="[object Function]")throw new TypeError;for(var f=0;f<c;f++)f in b&&a.call(e,b[f],f,b)&&d.push(b[f]);return d}),Array.prototype.every||(Array.prototype.every=function(a){var b=G(this),c=b.length>>>0,d=arguments[1];if(i(a)!="[object Function]")throw new TypeError;for(var e=0;e<c;e++)if(e in b&&!a.call(d,b[e],e,b))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a){var b=G(this),c=b.length>>>0,d=arguments[1];if(i(a)!="[object Function]")throw new TypeError;for(var e=0;e<c;e++)if(e in b&&a.call(d,b[e],e,b))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var b=G(this),c=b.length>>>0;if(i(a)!="[object Function]")throw new TypeError;if(!c&&arguments.length==1)throw new TypeError;var d=0,e;if(arguments.length>=2)e=arguments[1];else do{if(d in b){e=b[d++];break}if(++d>=c)throw new TypeError}while(!0);for(;d<c;d++)d in b&&(e=a.call(void 0,e,b[d],d,b));return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var b=G(this),c=b.length>>>0;if(i(a)!="[object Function]")throw new TypeError;if(!c&&arguments.length==1)throw new TypeError;var d,e=c-1;if(arguments.length>=2)d=arguments[1];else do{if(e in b){d=b[e--];break}if(--e<0)throw new TypeError}while(!0);do e in this&&(d=a.call(void 0,d,b[e],e,b));while(e--);return d}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=G(this),c=b.length>>>0;if(!c)return-1;var d=0;arguments.length>1&&(d=E(arguments[1])),d=d>=0?d:Math.max(0,c+d);for(;d<c;d++)if(d in b&&b[d]===a)return d;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a){var b=G(this),c=b.length>>>0;if(!c)return-1;var d=c-1;arguments.length>1&&(d=Math.min(d,E(arguments[1]))),d=d>=0?d:c-Math.abs(d);for(;d>=0;d--)if(d in b&&a===b[d])return d;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__||(a.constructor?a.constructor.prototype:g)});if(!Object.getOwnPropertyDescriptor){var p="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(a,b){if(typeof a!="object"&&typeof a!="function"||a===null)throw new TypeError(p+a);if(!j(a,b))return;var c,d,e;c={enumerable:!0,configurable:!0};if(o){var f=a.__proto__;a.__proto__=g;var d=m(a,b),e=n(a,b);a.__proto__=f;if(d||e)return d&&(c.get=d),e&&(c.set=e),c}return c.value=a[b],c}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)}),Object.create||(Object.create=function(a,b){var c;if(a===null)c={"__proto__":null};else{if(typeof a!="object")throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var d=function(){};d.prototype=a,c=new d,c.__proto__=a}return b!==void 0&&Object.defineProperties(c,b),c});if(Object.defineProperty){var q=d({}),r=typeof document=="undefined"||d(document.createElement("div"));if(!q||!r)var s=Object.defineProperty}if(!Object.defineProperty||s){var t="Property description must be an object: ",u="Object.defineProperty called on non-object: ",v="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(a,b,c){if(typeof a!="object"&&typeof a!="function"||a===null)throw new TypeError(u+a);if(typeof c!="object"&&typeof c!="function"||c===null)throw new TypeError(t+c);if(s)try{return s.call(Object,a,b,c)}catch(d){}if(j(c,"value"))if(o&&(m(a,b)||n(a,b))){var e=a.__proto__;a.__proto__=g,delete a[b],a[b]=c.value,a.__proto__=e}else a[b]=c.value;else{if(!o)throw new TypeError(v);j(c,"get")&&k(a,b,c.get),j(c,"set")&&l(a,b,c.set)}return a}}Object.defineProperties||(Object.defineProperties=function(a,b){for(var c in b)j(b,c)&&Object.defineProperty(a,c,b[c]);return a}),Object.seal||(Object.seal=function(a){return a}),Object.freeze||(Object.freeze=function(a){return a});try{Object.freeze(function(){})}catch(w){Object.freeze=function(a){return function(b){return typeof b=="function"?b:a(b)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(a){return a}),Object.isSealed||(Object.isSealed=function(a){return!1}),Object.isFrozen||(Object.isFrozen=function(a){return!1}),Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)===a)throw new TypeError;var b="";while(j(a,b))b+="?";a[b]=!0;var c=j(a,b);return delete a[b],c});if(!Object.keys){var x=!0,y=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],z=y.length;for(var A in{toString:null})x=!1;Object.keys=function H(a){if(typeof a!="object"&&typeof a!="function"||a===null)throw new TypeError("Object.keys called on a non-object");var H=[];for(var b in a)j(a,b)&&H.push(b);if(x)for(var c=0,d=z;c<d;c++){var e=y[c];j(a,e)&&H.push(e)}return H}}if(!Date.prototype.toISOString||(new Date(-621987552e5)).toISOString().indexOf("-000001")===-1)Date.prototype.toISOString=function(){var a,b,c,d;if(!isFinite(this))throw new RangeError;a=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],d=this.getUTCFullYear(),d=(d<0?"-":d>9999?"+":"")+("00000"+Math.abs(d)).slice(0<=d&&d<=9999?-4:-6),b=a.length;while(b--)c=a[b],c<10&&(a[b]="0"+c);return d+"-"+a.slice(0,2).join("-")+"T"+a.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(a){if(typeof this.toISOString!="function")throw new TypeError;return this.toISOString()}),Date.parse("+275760-09-13T00:00:00.000Z")!==864e13&&(Date=function(a){var b=function e(b,c,d,f,g,h,i){var j=arguments.length;if(this instanceof a){var k=j==1&&String(b)===b?new a(e.parse(b)):j>=7?new a(b,c,d,f,g,h,i):j>=6?new a(b,c,d,f,g,h):j>=5?new a(b,c,d,f,g):j>=4?new a(b,c,d,f):j>=3?new a(b,c,d):j>=2?new a(b,c):j>=1?new a(b):new a;return k.constructor=e,k}return a.apply(this,arguments)},c=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var d in a)b[d]=a[d];return b.now=a.now,b.UTC=a.UTC,b.prototype=a.prototype,b.prototype.constructor=b,b.parse=function(b){var d=c.exec(b);if(d){d.shift();for(var e=1;e<7;e++)d[e]=+(d[e]||(e<3?1:0)),e==1&&d[e]--;var f=+d.pop(),g=+d.pop(),h=d.pop(),i=0;if(h){if(g>23||f>59)return NaN;i=(g*60+f)*6e4*(h=="+"?-1:1)}var j=+d[0];return 0<=j&&j<=99?(d[0]=j+400,a.UTC.apply(this,d)+i-126227808e5):a.UTC.apply(this,d)+i}return a.parse.apply(this,arguments)},b}(Date));var B="\t\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||B.trim()){B="["+B+"]";var C=new RegExp("^"+B+B+"*"),D=new RegExp(B+B+"*$");String.prototype.trim=function(){return String(this).replace(C,"").replace(D,"")}}var E=function(a){return a=+a,a!==a?a=0:a!==0&&a!==1/0&&a!==-Infinity&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a},F="a"[0]!="a",G=function(a){if(a==null)throw new TypeError;return F&&typeof a=="string"&&a?a.split(""):Object(a)}}),define("ace/lib/dom",["require","exports","module"],function(a,b,c){"use strict";var d="http://www.w3.org/1999/xhtml";b.createElement=function(a,b){return document.createElementNS?document.createElementNS(b||d,a):document.createElement(a)},b.setText=function(a,b){a.innerText!==undefined&&(a.innerText=b),a.textContent!==undefined&&(a.textContent=b)},b.hasCssClass=function(a,b){var c=a.className.split(/\s+/g);return c.indexOf(b)!==-1},b.addCssClass=function(a,c){b.hasCssClass(a,c)||(a.className+=" "+c)},b.removeCssClass=function(a,b){var c=a.className.split(/\s+/g);for(;;){var d=c.indexOf(b);if(d==-1)break;c.splice(d,1)}a.className=c.join(" ")},b.toggleCssClass=function(a,b){var c=a.className.split(/\s+/g),d=!0;for(;;){var e=c.indexOf(b);if(e==-1)break;d=!1,c.splice(e,1)}return d&&c.push(b),a.className=c.join(" "),d},b.setCssClass=function(a,c,d){d?b.addCssClass(a,c):b.removeCssClass(a,c)},b.hasCssString=function(a,b){var c=0,d;b=b||document;if(b.createStyleSheet&&(d=b.styleSheets)){while(c<d.length)if(d[c++].owningElement.id===a)return!0}else if(d=b.getElementsByTagName("style"))while(c<d.length)if(d[c++].id===a)return!0;return!1},b.importCssString=function(a,c,e){e=e||document;if(c&&b.hasCssString(c,e))return null;var f;if(e.createStyleSheet)f=e.createStyleSheet(),f.cssText=a,c&&(f.owningElement.id=c);else{f=e.createElementNS?e.createElementNS(d,"style"):e.createElement("style"),f.appendChild(e.createTextNode(a)),c&&(f.id=c);var g=e.getElementsByTagName("head")[0]||e.documentElement;g.appendChild(f)}},b.importCssStylsheet=function(a,c){if(c.createStyleSheet)c.createStyleSheet(a);else{var d=b.createElement("link");d.rel="stylesheet",d.href=a;var e=c.getElementsByTagName("head")[0]||c.documentElement;e.appendChild(d)}},b.getInnerWidth=function(a){return parseInt(b.computedStyle(a,"paddingLeft"),10)+parseInt(b.computedStyle(a,"paddingRight"),10)+a.clientWidth},b.getInnerHeight=function(a){return parseInt(b.computedStyle(a,"paddingTop"),10)+parseInt(b.computedStyle(a,"paddingBottom"),10)+a.clientHeight},window.pageYOffset!==undefined?(b.getPageScrollTop=function(){return window.pageYOffset},b.getPageScrollLeft=function(){return window.pageXOffset}):(b.getPageScrollTop=function(){return document.body.scrollTop},b.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?b.computedStyle=function(a,b){return b?(window.getComputedStyle(a,"")||{})[b]||"":window.getComputedStyle(a,"")||{}}:b.computedStyle=function(a,b){return b?a.currentStyle[b]:a.currentStyle},b.scrollbarWidth=function(a){var c=b.createElement("p");c.style.width="100%",c.style.minWidth="0px",c.style.height="200px";var d=b.createElement("div"),e=d.style;e.position="absolute",e.left="-10000px",e.overflow="hidden",e.width="200px",e.minWidth="0px",e.height="150px",d.appendChild(c);var f=a.body||a.documentElement;f.appendChild(d);var g=c.offsetWidth;e.overflow="scroll";var h=c.offsetWidth;return g==h&&(h=d.clientWidth),f.removeChild(d),g-h},b.setInnerHtml=function(a,b){var c=a.cloneNode(!1);return c.innerHTML=b,a.parentNode.replaceChild(c,a),c},b.setInnerText=function(a,b){var c=a.ownerDocument;c.body&&"textContent"in c.body?a.textContent=b:a.innerText=b},b.getInnerText=function(a){var b=a.ownerDocument;return b.body&&"textContent"in b.body?a.textContent:a.innerText||a.textContent||""},b.getParentWindow=function(a){return a.defaultView||a.parentWindow}}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent","ace/lib/dom"],function(a,b,c){function d(a,b,c){var d=0;f.isOpera&&f.isMac?d=0|(b.metaKey?1:0)|(b.altKey?2:0)|(b.shiftKey?4:0)|(b.ctrlKey?8:0):d=0|(b.ctrlKey?1:0)|(b.altKey?2:0)|(b.shiftKey?4:0)|(b.metaKey?8:0);if(c in e.MODIFIER_KEYS){switch(e.MODIFIER_KEYS[c]){case"Alt":d=2;break;case"Shift":d=4;break;case"Ctrl":d=1;break;default:d=8}c=0}return d&8&&(c==91||c==93)&&(c=0),!!d||c in e.FUNCTION_KEYS||c in e.PRINTABLE_KEYS?a(b,d,c):!1}"use strict";var e=a("./keys"),f=a("./useragent"),g=a("./dom");b.addListener=function(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);if(a.attachEvent){var d=function(){c(window.event)};c._wrapper=d,a.attachEvent("on"+b,d)}},b.removeListener=function(a,b,c){if(a.removeEventListener)return a.removeEventListener(b,c,!1);a.detachEvent&&a.detachEvent("on"+b,c._wrapper||c)},b.stopEvent=function(a){return b.stopPropagation(a),b.preventDefault(a),!1},b.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},b.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},b.getDocumentX=function(a){return a.clientX?a.clientX+g.getPageScrollLeft():a.pageX},b.getDocumentY=function(a){return a.clientY?a.clientY+g.getPageScrollTop():a.pageY},b.getButton=function(a){return a.type=="dblclick"?0:a.type=="contextmenu"?2:a.preventDefault?a.button:{1:0,2:2,4:1}[a.button]},document.documentElement.setCapture?b.capture=function(a,c,d){function e(a){return c(a),b.stopPropagation(a)}function f(e){c(e),g||(g=!0,d(e)),b.removeListener(a,"mousemove",c),b.removeListener(a,"mouseup",f),b.removeListener(a,"losecapture",f),a.releaseCapture()}var g=!1;b.addListener(a,"mousemove",c),b.addListener(a,"mouseup",f),b.addListener(a,"losecapture",f),a.setCapture()}:b.capture=function(a,b,c){function d(a){b(a),a.stopPropagation()}function e(a){b&&b(a),c&&c(a),document.removeEventListener("mousemove",d,!0),document.removeEventListener("mouseup",e,!0),a.stopPropagation()}document.addEventListener("mousemove",d,!0),document.addEventListener("mouseup",e,!0)},b.addMouseWheelListener=function(a,c){var d=8,e=function(a){a.wheelDelta!==undefined?a.wheelDeltaX!==undefined?(a.wheelX=-a.wheelDeltaX/d,a.wheelY=-a.wheelDeltaY/d):(a.wheelX=0,a.wheelY=-a.wheelDelta/d):a.axis&&a.axis==a.HORIZONTAL_AXIS?(a.wheelX=(a.detail||0)*5,a.wheelY=0):(a.wheelX=0,a.wheelY=(a.detail||0)*5),c(a)};b.addListener(a,"DOMMouseScroll",e),b.addListener(a,"mousewheel",e)},b.addMultiMouseDownListener=function(a,c,d,e,g){var h=0,i,j,k=function(a){h+=1,h==1&&(i=a.clientX,j=a.clientY,setTimeout(function(){h=0},e||600));var f=b.getButton(a)==c;if(!f||Math.abs(a.clientX-i)>5||Math.abs(a.clientY-j)>5)h=0;h==d&&(h=0,g(a));if(f)return b.preventDefault(a)};b.addListener(a,"mousedown",k),f.isOldIE&&b.addListener(a,"dblclick",k)},b.addCommandKeyListener=function(a,c){var e=b.addListener;if(f.isOldGecko||f.isOpera){var g=null;e(a,"keydown",function(a){g=a.keyCode}),e(a,"keypress",function(a){return d(c,a,g)})}else{var h=null;e(a,"keydown",function(a){return h=a.keyIdentifier||a.keyCode,d(c,a,a.keyCode)})}};if(window.postMessage){var h=1;b.nextTick=function(a,c){c=c||window;var d="zero-timeout-message-"+h;b.addListener(c,"message",function e(f){f.data==d&&(b.stopPropagation(f),b.removeListener(c,"message",e),a())}),c.postMessage(d,"*")}}else b.nextTick=function(a,b){b=b||window,window.setTimeout(a,0)}}),define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(a,b,c){"use strict";var d=a("./oop"),e=function(){var a={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,meta:8,command:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'}};for(var b in a.FUNCTION_KEYS){var c=a.FUNCTION_KEYS[b].toUpperCase();a[c]=parseInt(b,10)}return d.mixin(a,a.MODIFIER_KEYS),d.mixin(a,a.PRINTABLE_KEYS),d.mixin(a,a.FUNCTION_KEYS),a}();d.mixin(b,e),b.keyCodeToString=function(a){return(e[a]||String.fromCharCode(a)).toLowerCase()}}),define("ace/lib/oop",["require","exports","module"],function(a,b,c){"use strict",b.inherits=function(){var a=function(){};return function(b,c){a.prototype=c.prototype,b.super_=c.prototype,b.prototype=new a,b.prototype.constructor=b}}(),b.mixin=function(a,b){for(var c in b)a[c]=b[c]},b.implement=function(a,c){b.mixin(a,c)}}),define("ace/lib/useragent",["require","exports","module"],function(a,b,c){"use strict";var d=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),e=navigator.userAgent;b.isWin=d=="win",b.isMac=d=="mac",b.isLinux=d=="linux",b.isIE=navigator.appName=="Microsoft Internet Explorer"&&parseFloat(navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]+)/)[1]),b.isOldIE=b.isIE&&b.isIE<9,b.isGecko=b.isMozilla=window.controllers&&window.navigator.product==="Gecko",b.isOldGecko=b.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4,b.isOpera=window.opera&&Object.prototype.toString.call(window.opera)=="[object Opera]",b.isWebKit=parseFloat(e.split("WebKit/")[1])||undefined,b.isChrome=parseFloat(e.split(" Chrome/")[1])||undefined,b.isAIR=e.indexOf("AdobeAIR")>=0,b.isIPad=e.indexOf("iPad")>=0,b.isTouchPad=e.indexOf("TouchPad")>=0,b.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},b.getOS=function(){return b.isMac?b.OS.MAC:b.isLinux?b.OS.LINUX:b.OS.WINDOWS}}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands"],function(a,b,c){"use strict",a("./lib/fixoldbrowsers");var d=a("./lib/oop"),e=a("./lib/lang"),f=a("./lib/useragent"),g=a("./keyboard/textinput").TextInput,h=a("./mouse/mouse_handler").MouseHandler,i=a("./mouse/fold_handler").FoldHandler,j=a("./keyboard/keybinding").KeyBinding,k=a("./edit_session").EditSession,l=a("./search").Search,m=a("./range").Range,n=a("./lib/event_emitter").EventEmitter,o=a("./commands/command_manager").CommandManager,p=a("./commands/default_commands").commands,q=function(a,b){var c=a.getContainerElement();this.container=c,this.renderer=a,this.textInput=new g(a.getTextAreaContainer(),this),this.keyBinding=new j(this),f.isIPad||(this.$mouseHandler=new h(this),new i(this)),this.$blockScrolling=0,this.$search=(new l).set({wrap:!0}),this.commands=new o(f.isMac?"mac":"win",p),this.setSession(b||new k(""))};((function(){d.implement(this,n),this.setKeyboardHandler=function(a){this.keyBinding.setKeyboardHandler(a)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(a){if(this.session==a)return;if(this.session){var b=this.session;this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeLeftTop",this.$onScrollLeftChange);var c=this.session.getSelection();c.removeEventListener("changeCursor",this.$onCursorChange),c.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=a,this.$onDocumentChange=this.onDocumentChange.bind(this),a.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(a),this.$onChangeMode=this.onChangeMode.bind(this),a.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),a.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.updateText.bind(this.renderer),a.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),a.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),a.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),a.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=a.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull(),this._emit("changeSession",{session:a,oldSession:b})},this.getSession=function(){return this.session},this.getSelection=function(){return this.selection},this.resize=function(){this.renderer.onResize()},this.setTheme=function(a){this.renderer.setTheme(a)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(a){this.renderer.setStyle(a)},this.unsetStyle=function(a){this.renderer.unsetStyle(a)},this.setFontSize=function(a){this.container.style.fontSize=a,this.renderer.updateFontSize()},this.$highlightBrackets=function(){this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null);if(this.$highlightPending)return;var a=this;this.$highlightPending=!0,setTimeout(function(){a.$highlightPending=!1;var b=a.session.findMatchingBracket(a.getCursorPosition());if(b){var c=new m(b.row,b.column,b.row,b.column+1);a.session.$bracketHighlight=a.session.addMarker(c,"ace_bracket","text")}},10)},this.focus=function(){var a=this;setTimeout(function(){a.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus")},this.onBlur=function(){this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur")},this.onDocumentChange=function(a){var b=a.data,c=b.range,d;c.start.row==c.end.row&&b.action!="insertLines"&&b.action!="removeLines"?d=c.end.row:d=Infinity,this.renderer.updateLines(c.start.row,d),this._emit("change",a),this.onCursorChange()},this.onTokenizerUpdate=function(a){var b=a.data;this.renderer.updateLines(b.first,b.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.renderer.updateCursor(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.renderer.moveTextAreaToCursor(this.textInput.getElement()),this.$highlightBrackets(),this.$updateHighlightActiveLine()},this.$updateHighlightActiveLine=function(){var a=this.getSession();a.$highlightLineMarker&&a.removeMarker(a.$highlightLineMarker),typeof this.$lastrow=="number"&&this.renderer.removeGutterDecoration(this.$lastrow,"ace_gutter_active_line"),a.$highlightLineMarker=null,this.$lastrow=null;if(this.getHighlightActiveLine()){var b=this.getCursorPosition(),c=this.session.getFoldLine(b.row);if(this.getSelectionStyle()!="line"||!this.selection.isMultiLine()){var d;c?d=new m(c.start.row,0,c.end.row+1,0):d=new m(b.row,0,b.row+1,0),a.$highlightLineMarker=a.addMarker(d,"ace_active_line","background")}this.renderer.addGutterDecoration(this.$lastrow=b.row,"ace_gutter_active_line")}},this.onSelectionChange=function(a){var b=this.getSession();b.$selectionMarker&&b.removeMarker(b.$selectionMarker),b.$selectionMarker=null;if(!this.selection.isEmpty()){var c=this.selection.getRange(),d=this.getSelectionStyle();b.$selectionMarker=b.addMarker(c,"ace_selection",d)}else this.$updateHighlightActiveLine();this.$highlightSelectedWord&&this.session.getMode().highlightSelection(this)},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.setBreakpoints(this.session.getBreakpoints())},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(){this.renderer.updateText()},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getCopyText=function(){var a="";return this.selection.isEmpty()||(a=this.session.getTextRange(this.getSelectionRange())),this._emit("copy",a),a},this.onCut=function(){this.commands.exec("cut",this)},this.insert=function(a){var b=this.session,c=b.getMode(),d=this.getCursorPosition();if(this.getBehavioursEnabled()){var e=c.transformAction(b.getState(d.row),"insertion",this,b,a);e&&(a=e.text)}a=a.replace("\t",this.session.getTabString());if(!this.selection.isEmpty())d=this.session.remove(this.getSelectionRange()),this.clearSelection();else if(this.session.getOverwrite()){var f=new m.fromPoints(d,d);f.end.column+=a.length,this.session.remove(f)}this.clearSelection();var g=d.column,h=b.getState(d.row),i=c.checkOutdent(h,b.getLine(d.row),a),j=b.getLine(d.row),k=c.getNextLineIndent(h,j.slice(0,d.column),b.getTabString()),l=b.insert(d,a);e&&e.selection&&(e.selection.length==2?this.selection.setSelectionRange(new m(d.row,g+e.selection[0],d.row,g+e.selection[1])):this.selection.setSelectionRange(new m(d.row+e.selection[0],e.selection[1],d.row+e.selection[2],e.selection[3])));var h=b.getState(d.row);if(b.getDocument().isNewLine(a)){this.moveCursorTo(d.row+1,0);var n=b.getTabSize(),o=Number.MAX_VALUE;for(var p=d.row+1;p<=l.row;++p){var q=0;j=b.getLine(p);for(var r=0;r<j.length;++r)if(j.charAt(r)=="\t")q+=n;else{if(j.charAt(r)!=" ")break;q+=1}/[^\s]/.test(j)&&(o=Math.min(q,o))}for(var p=d.row+1;p<=l.row;++p){var s=o;j=b.getLine(p);for(var r=0;r<j.length&&s>0;++r)j.charAt(r)=="\t"?s-=n:j.charAt(r)==" "&&(s-=1);b.remove(new m(p,0,p,r))}b.indentRows(d.row+1,l.row,k)}i&&c.autoOutdent(h,b,d.row)},this.onTextInput=function(a,b){b&&this._emit("paste",a),this.keyBinding.onTextInput(a,b)},this.onCommandKey=function(a,b,c){this.keyBinding.onCommandKey(a,b,c)},this.setOverwrite=function(a){this.session.setOverwrite(a)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(a){this.$mouseHandler.setScrollSpeed(a)},this.getScrollSpeed=function(){return this.$mouseHandler.getScrollSpeed()},this.setDragDelay=function(a){this.$mouseHandler.setDragDelay(a)},this.getDragDelay=function(){return this.$mouseHandler.getDragDelay()},this.$selectionStyle="line",this.setSelectionStyle=function(a){if(this.$selectionStyle==a)return;this.$selectionStyle=a,this.onSelectionChange(),this._emit("changeSelectionStyle",{data:a})},this.getSelectionStyle=function(){return this.$selectionStyle},this.$highlightActiveLine=!0,this.setHighlightActiveLine=function(a){if(this.$highlightActiveLine==a)return;this.$highlightActiveLine=a,this.$updateHighlightActiveLine()},this.getHighlightActiveLine=function(){return this.$highlightActiveLine},this.$highlightSelectedWord=!0,this.setHighlightSelectedWord=function(a){if(this.$highlightSelectedWord==a)return;this.$highlightSelectedWord=a,a?this.session.getMode().highlightSelection(this):this.session.getMode().clearSelectionHighlight(this)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(a){this.renderer.setAnimatedScroll(a)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(a){if(this.getShowInvisibles()==a)return;this.renderer.setShowInvisibles(a)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setShowPrintMargin=function(a){this.renderer.setShowPrintMargin(a)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(a){this.renderer.setPrintMarginColumn(a)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.$readOnly=!1,this.setReadOnly=function(a){this.$readOnly=a},this.getReadOnly=function(){return this.$readOnly},this.$modeBehaviours=!0,this.setBehavioursEnabled=function(a){this.$modeBehaviours=a},this.getBehavioursEnabled=function(){return this.$modeBehaviours},this.setShowFoldWidgets=function(a){var b=this.renderer.$gutterLayer;if(b.getShowFoldWidgets()==a)return;this.renderer.$gutterLayer.setShowFoldWidgets(a),this.$showFoldWidgets=a,this.renderer.updateFull()},this.getShowFoldWidgets=function(){return this.renderer.$gutterLayer.getShowFoldWidgets()},this.remove=function(a){this.selection.isEmpty()&&(a=="left"?this.selection.selectLeft():this.selection.selectRight());var b=this.getSelectionRange();if(this.getBehavioursEnabled()){var c=this.session,d=c.getState(b.start.row),e=c.getMode().transformAction(d,"deletion",this,c,b);e&&(b=e)}this.session.remove(b),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var a=this.getSelectionRange();a.start.column==a.end.column&&a.start.row==a.end.row&&(a.end.column=0,a.end.row++),this.session.remove(a),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var a=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(a)},this.transposeLetters=function(){if(!this.selection.isEmpty())return;var a=this.getCursorPosition(),b=a.column;if(b===0)return;var c=this.session.getLine(a.row),d,e;b<c.length?(d=c.charAt(b)+c.charAt(b-1),e=new m(a.row,b-1,a.row,b+1)):(d=c.charAt(b-1)+c.charAt(b-2),e=new m(a.row,b-2,a.row,b)),this.session.replace(e,d)},this.toLowerCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toLowerCase()),this.selection.setSelectionRange(a)},this.toUpperCase=function(){var a=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var b=this.getSelectionRange(),c=this.session.getTextRange(b);this.session.replace(b,c.toUpperCase()),this.selection.setSelectionRange(a)},this.indent=function(){var a=this.session,b=this.getSelectionRange();if(!(b.start.row<b.end.row||b.start.column<b.end.column)){var c;if(this.session.getUseSoftTabs()){var d=a.getTabSize(),f=this.getCursorPosition(),g=a.documentToScreenColumn(f.row,f.column),h=d-g%d;c=e.stringRepeat(" ",h)}else c="\t";return this.insert(c)}var i=this.$getSelectedRows();a.indentRows(i.first,i.last,"\t")},this.blockOutdent=function(){var a=this.session.getSelection();this.session.outdentRows(a.getRange())},this.toggleCommentLines=function(){var a=this.session.getState(this.getCursorPosition().row),b=this.$getSelectedRows();this.session.getMode().toggleCommentLines(a,this.session,b.first,b.last)},this.removeLines=function(){var a=this.$getSelectedRows(),b;a.first===0||a.last+1<this.session.getLength()?b=new m(a.first,0,a.last+1,0):b=new m(a.first-1,this.session.getLine(a.first-1).length,a.last,this.session.getLine(a.last).length),this.session.remove(b),this.clearSelection()},this.moveLinesDown=function(){this.$moveLines(function(a,b){return this.session.moveLinesDown(a,b)})},this.moveLinesUp=function(){this.$moveLines(function(a,b){return this.session.moveLinesUp(a,b)})},this.moveText=function(a,b){return this.$readOnly?null:this.session.moveText(a,b)},this.copyLinesUp=function(){this.$moveLines(function(a,b){return this.session.duplicateLines(a,b),0})},this.copyLinesDown=function(){this.$moveLines(function(a,b){return this.session.duplicateLines(a,b)})},this.$moveLines=function(a){var b=this.$getSelectedRows(),c=this.selection;if(!c.isMultiLine())var d=c.getRange(),e=c.isBackwards();var f=a.call(this,b.first,b.last);d?(d.start.row+=f,d.end.row+=f,c.setSelectionRange(d,e)):(c.setSelectionAnchor(b.last+f+1,0),c.$moveSelection(function(){c.moveCursorTo(b.first+f,0)}))},this.$getSelectedRows=function(){var a=this.getSelectionRange().collapseRows();return{first:a.start.row,last:a.end.row}},this.onCompositionStart=function(a){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(a){this.renderer.setCompositionText(a)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(a){return a>=this.getFirstVisibleRow()&&a<=this.getLastVisibleRow()},this.isRowFullyVisible=function(a){return a>=this.renderer.getFirstFullyVisibleRow()&&a<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$getPageDownRow=function(){return this.renderer.getScrollBottomRow()},this.$getPageUpRow=function(){var a=this.renderer.getScrollTopRow(),b=this.renderer.getScrollBottomRow();return a-(b-a)},this.selectPageDown=function(){var a=this.$getPageDownRow()+Math.floor(this.$getVisibleRowCount()/2);this.scrollPageDown();var b=this.getSelection(),c=this.session.documentToScreenPosition(b.getSelectionLead()),d=this.session.screenToDocumentPosition(a,c.column);b.selectTo(d.row,d.column)},this.selectPageUp=function(){var a=this.renderer.getScrollTopRow()-this.renderer.getScrollBottomRow(),b=this.$getPageUpRow()+Math.round(a/2);this.scrollPageUp();var c=this.getSelection(),d=this.session.documentToScreenPosition(c.getSelectionLead()),e=this.session.screenToDocumentPosition(b,d.column);c.selectTo(e.row,e.column)},this.gotoPageDown=function(){var a=this.$getPageDownRow(),b=this.getCursorPositionScreen().column;this.scrollToRow(a),this.getSelection().moveCursorToScreen(a,b)},this.gotoPageUp=function(){var a=this.$getPageUpRow(),b=this.getCursorPositionScreen().column;this.scrollToRow(a),this.getSelection().moveCursorToScreen(a,b)},this.scrollPageDown=function(){this.scrollToRow(this.$getPageDownRow())},this.scrollPageUp=function(){this.renderer.scrollToRow(this.$getPageUpRow())},this.scrollToRow=function(a){this.renderer.scrollToRow(a)},this.scrollToLine=function(a,b){this.renderer.scrollToLine(a,b)},this.centerSelection=function(){var a=this.getSelectionRange(),b=Math.floor(a.start.row+(a.end.row-a.start.row)/2);this.renderer.scrollToLine(b,!0)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(a,b){this.selection.moveCursorTo(a,b)},this.moveCursorToPosition=function(a){this.selection.moveCursorToPosition(a)},this.jumpToMatching=function(){var a=this.getCursorPosition(),b=this.session.findMatchingBracket(a);b||(a.column+=1,b=this.session.findMatchingBracket(a)),b||(a.column-=2,b=this.session.findMatchingBracket(a)),b&&(this.clearSelection(),this.moveCursorTo(b.row,b.column))},this.gotoLine=function(a,b){this.selection.clearSelection(),this.session.unfold({row:a-1,column:b||0}),this.$blockScrolling+=1,this.moveCursorTo(a-1,b||0),this.$blockScrolling-=1,this.isRowFullyVisible(this.getCursorPosition().row)||this.scrollToLine(a,!0)},this.navigateTo=function(a,b){this.clearSelection(),this.moveCursorTo(a,b)},this.navigateUp=function(a){this.selection.clearSelection(),a=a||1,this.selection.moveCursorBy(-a,0)},this.navigateDown=function(a){this.selection.clearSelection(),a=a||1,this.selection.moveCursorBy(a,0)},this.navigateLeft=function(a){if(!this.selection.isEmpty()){var b=this.getSelectionRange().start;this.moveCursorToPosition(b)}else{a=a||1;while(a--)this.selection.moveCursorLeft()}this.clearSelection()},this.navigateRight=function(a){if(!this.selection.isEmpty()){var b=this.getSelectionRange().end;this.moveCursorToPosition(b)}else{a=a||1;while(a--)this.selection.moveCursorRight()}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(a,b){b&&this.$search.set(b);var c=this.$search.find(this.session),d=0;return c?(this.$tryReplace(c,a)&&(d=1),c!==null&&(this.selection.setSelectionRange(c),this.renderer.scrollSelectionIntoView(c.start,c.end)),d):d},this.replaceAll=function(a,b){b&&this.$search.set(b);var c=this.$search.findAll(this.session),d=0;if(!c.length)return d;var e=this.getSelectionRange();this.clearSelection(),this.selection.moveCursorTo(0,0),this.$blockScrolling+=1;for(var f=c.length-1;f>=0;--f)this.$tryReplace(c[f],a)&&d++;return this.selection.setSelectionRange(e),this.$blockScrolling-=1,d},this.$tryReplace=function(a,b){var c=this.session.getTextRange(a);return b=this.$search.replace(c,b),b!==null?(a.end=this.session.replace(a,b),a):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(a,b){this.clearSelection(),b=b||{},b.needle=a,this.$search.set(b),this.$find()},this.findNext=function(a){a=a||{},typeof a.backwards=="undefined"&&(a.backwards=!1),this.$search.set(a),this.$find()},this.findPrevious=function(a){a=a||{},typeof a.backwards=="undefined"&&(a.backwards=!0),this.$search.set(a),this.$find()},this.$find=function(a){this.selection.isEmpty()||this.$search.set({needle:this.session.getTextRange(this.getSelectionRange())}),typeof a!="undefined"&&this.$search.set({backwards:a});var b=this.$search.find(this.session);if(b){this.session.unfold(b),this.$blockScrolling+=1,this.selection.setSelectionRange(b),this.$blockScrolling-=1;if(this.getAnimatedScroll()){var c=this.getCursorPosition();this.isRowFullyVisible(c.row)||this.scrollToLine(c.row,!0)}else this.renderer.scrollSelectionIntoView(b.start,b.end)}},this.undo=function(){this.session.getUndoManager().undo()},this.redo=function(){this.session.getUndoManager().redo()},this.destroy=function(){this.renderer.destroy()}})).call(q.prototype),b.Editor=q}),define("ace/lib/lang",["require","exports","module"],function(a,b,c){"use strict",b.stringReverse=function(a){return a.split("").reverse().join("")},b.stringRepeat=function(a,b){return(new Array(b+1)).join(a)};var d=/^\s\s*/,e=/\s\s*$/;b.stringTrimLeft=function(a){return a.replace(d,"")},b.stringTrimRight=function(a){return a.replace(e,"")},b.copyObject=function(a){var b={};for(var c in a)b[c]=a[c];return b},b.copyArray=function(a){var b=[];for(var c=0,d=a.length;c<d;c++)a[c]&&typeof a[c]=="object"?b[c]=this.copyObject(a[c]):b[c]=a[c];return b},b.deepCopy=function(a){if(typeof a!="object")return a;var b=a.constructor();for(var c in a)typeof a[c]=="object"?b[c]=this.deepCopy(a[c]):b[c]=a[c];return b},b.arrayToMap=function(a){var b={};for(var c=0;c<a.length;c++)b[a[c]]=1;return b},b.arrayRemove=function(a,b){for(var c=0;c<=a.length;c++)b===a[c]&&a.splice(c,1)},b.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},b.deferredCall=function(a){var b=null,c=function(){b=null,a()},d=function(a){return d.cancel(),b=setTimeout(c,a||0),d};return d.schedule=d,d.call=function(){return this.cancel(),a(),d},d.cancel=function(){return clearTimeout(b),b=null,d},d}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom"],function(a,b,c){"use strict";var d=a("../lib/event"),e=a("../lib/useragent"),f=a("../lib/dom"),g=function(a,b){function c(){try{i.select()}catch(a){}}function g(a){if(!l){var d=a||i.value;if(d){d.charCodeAt(d.length-1)==j.charCodeAt(0)?(d=d.slice(0,-1),d&&b.onTextInput(d,m)):b.onTextInput(d,m);if(!h())return!1}}l=!1,m=!1,i.value=j,c()}function h(){return document.activeElement===i}var i=f.createElement("textarea");e.isTouchPad&&i.setAttribute("x-palm-disable-auto-cap",!0),i.style.left="-10000px",i.style.position="fixed",a.insertBefore(i,a.firstChild);var j=String.fromCharCode(0);g();var k=!1,l=!1,m=!1,n="",o=function(a){setTimeout(function(){k||g(a.data)},0)},p=function(a){if(e.isOldIE&&i.value.charCodeAt(0)>128)return;setTimeout(function(){k||g()},0)},q=function(a){k=!0,b.onCompositionStart(),e.isGecko||setTimeout(r,0)},r=function(){if(!k)return;b.onCompositionUpdate(i.value)},s=function(a){k=!1,b.onCompositionEnd()},t=function(a){l=!0;var d=b.getCopyText();d?i.value=d:a.preventDefault(),c(),setTimeout(function(){g()},0)},u=function(a){l=!0;var d=b.getCopyText();d?(i.value=d,b.onCut()):a.preventDefault(),c(),setTimeout(function(){g()},0)};d.addCommandKeyListener(i,b.onCommandKey.bind(b));if(e.isOldIE){var v={13:1,27:1};d.addListener(i,"keyup",function(a){k&&(!i.value||v[a.keyCode])&&setTimeout(s,0);if((i.value.charCodeAt(0)|0)<129)return;k?r():q()})}"onpropertychange"in i&&!("oninput"in i)?d.addListener(i,"propertychange",p):d.addListener(i,"input",o),d.addListener(i,"paste",function(a){m=!0,a.clipboardData&&a.clipboardData.getData?(g(a.clipboardData.getData("text/plain")),a.preventDefault()):p()}),"onbeforecopy"in i&&typeof clipboardData!="undefined"?(d.addListener(i,"beforecopy",function(a){var c=b.getCopyText();c?clipboardData.setData("Text",c):a.preventDefault()}),d.addListener(a,"keydown",function(a){if(a.ctrlKey&&a.keyCode==88){var c=b.getCopyText();c&&(clipboardData.setData("Text",c),b.onCut()),d.preventDefault(a)}})):(d.addListener(i,"copy",t),d.addListener(i,"cut",u)),d.addListener(i,"compositionstart",q),e.isGecko&&d.addListener(i,"text",r),e.isWebKit&&d.addListener(i,"keyup",r),d.addListener(i,"compositionend",s),d.addListener(i,"blur",function(){b.onBlur()}),d.addListener(i,"focus",function(){b.onFocus(),c()}),this.focus=function(){b.onFocus(),c(),i.focus()},this.blur=function(){i.blur()},this.isFocused=h,this.getElement=function(){return i},this.onContextMenu=function(a,b){a&&(n||(n=i.style.cssText),i.style.cssText="position:fixed; z-index:1000;left:"+(a.x-2)+"px; top:"+(a.y-2)+"px;"),b&&(i.value="")},this.onContextMenuClose=function(){setTimeout(function(){n&&(i.style.cssText=n,n=""),g()},0)}};b.TextInput=g}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event"],function(a,b,c){"use strict";var d=a("../lib/event"),e=a("./default_handlers").DefaultHandlers,f=a("./default_gutter_handler").GutterHandler,g=a("./mouse_event").MouseEvent,h=function(a){this.editor=a,new e(a),new f(a),d.addListener(a.container,"mousedown",function(b){return a.focus(),d.preventDefault(b)}),d.addListener(a.container,"selectstart",function(a){return d.preventDefault(a)});var b=a.renderer.getMouseEventTarget();d.addListener(b,"mousedown",this.onMouseEvent.bind(this,"mousedown")),d.addListener(b,"click",this.onMouseEvent.bind(this,"click")),d.addListener(b,"mousemove",this.onMouseMove.bind(this,"mousemove")),d.addMultiMouseDownListener(b,0,2,500,this.onMouseEvent.bind(this,"dblclick")),d.addMultiMouseDownListener(b,0,3,600,this.onMouseEvent.bind(this,"tripleclick")),d.addMultiMouseDownListener(b,0,4,600,this.onMouseEvent.bind(this,"quadclick")),d.addMouseWheelListener(a.container,this.onMouseWheel.bind(this,"mousewheel"));var c=a.renderer.$gutter;d.addListener(c,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),d.addListener(c,"click",this.onMouseEvent.bind(this,"gutterclick")),d.addListener(c,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),d.addListener(c,"mousemove",this.onMouseMove.bind(this,"gutter"))};((function(){this.$scrollSpeed=1,this.setScrollSpeed=function(a){this.$scrollSpeed=a},this.getScrollSpeed=function(){return this.$scrollSpeed},this.onMouseEvent=function(a,b){this.editor._emit(a,new g(b,this.editor))},this.$dragDelay=250,this.setDragDelay=function(a){this.$dragDelay=a},this.getDragDelay=function(){return this.$dragDelay},this.onMouseMove=function(a,b){var c=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;if(!c||!c.length)return;this.editor._emit(a,new g(b,this.editor))},this.onMouseWheel=function(a,b){var c=new g(b,this.editor);c.speed=this.$scrollSpeed*2,c.wheelX=b.wheelX,c.wheelY=b.wheelY,this.editor._emit(a,c)}})).call(h.prototype),b.MouseHandler=h}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/event","ace/lib/dom","ace/lib/browser_focus"],function(a,b,c){function d(a){this.editor=a,this.$clickSelection=null,this.browserFocus=new h,a.setDefaultHandler("mousedown",this.onMouseDown.bind(this)),a.setDefaultHandler("dblclick",this.onDoubleClick.bind(this)),a.setDefaultHandler("tripleclick",this.onTripleClick.bind(this)),a.setDefaultHandler("quadclick",this.onQuadClick.bind(this)),a.setDefaultHandler("mousewheel",this.onScroll.bind(this))}function e(a,b,c,d){return Math.sqrt(Math.pow(c-a,2)+Math.pow(d-b,2))}"use strict";var f=a("../lib/event"),g=a("../lib/dom"),h=a("../lib/browser_focus").BrowserFocus,i=0,j=1,k=2,l=5;((function(){this.onMouseDown=function(a){function b(b){a.getShiftKey()?n.selection.selectToPosition(b):o.$clickSelection||(n.moveCursorToPosition(b),n.selection.clearSelection()),r=j}var c=a.inSelection(),d=a.pageX,h=a.pageY,m=a.getDocumentPosition(),n=this.editor,o=this,p=n.getSelectionRange(),q=p.isEmpty(),r=i;if(c&&(!this.browserFocus.isFocused()||(new Date).getTime()-this.browserFocus.lastFocus<20||!n.isFocused())){n.focus();return}var s=a.getButton();if(s!==0){q&&n.moveCursorToPosition(m),s==2&&(n.textInput.onContextMenu({x:a.clientX,y:a.clientY},q),f.capture(n.container,function(){},n.textInput.onContextMenuClose));return}c||b(m);var t=d,u=h,v=(new Date).getTime(),w,x,y,z=function(a){t=f.getDocumentX(a),u=f.getDocumentY(a)},A=function(a){clearInterval(F),r==i?b(m):r==k&&B(a),o.$clickSelection=null,r=i},B=function(a){g.removeCssClass(n.container,"ace_dragging"),n.session.removeMarker(y),n.$mouseHandler.$clickSelection||w||(n.moveCursorToPosition(m),n.selection.clearSelection());if(!w)return;if(x.contains(w.row,w.column)){w=null;return}n.clearSelection();if(a&&(a.ctrlKey||a.altKey))var b=n.session,c=b.insert(w,b.getTextRange(x));else var c=n.moveText(x,w);if(!c){w=null;return}n.selection.setSelectionRange(c)},C=function(){if(r==i){var a=e(d,h,t,u),c=(new Date).getTime();if(a>l){r=j;var f=n.renderer.screenToTextCoordinates(t,u);b(f)}else if(c-v>n.getDragDelay()){r=k,x=n.getSelectionRange();var m=n.getSelectionStyle();y=n.session.addMarker(x,"ace_selection",m),n.clearSelection(),g.addCssClass(n.container,"ace_dragging")}}r==k?E():r==j&&D()},D=function(){var a,b=n.renderer.screenToTextCoordinates(t,u);o.$clickSelection?o.$clickSelection.contains(b.row,b.column)?n.selection.setSelectionRange(o.$clickSelection):(o.$clickSelection.compare(b.row,b.column)==-1?a=o.$clickSelection.end:a=o.$clickSelection.start,n.selection.setSelectionAnchor(a.row,a.column),n.selection.selectToPosition(b)):n.selection.selectToPosition(b),n.renderer.scrollCursorIntoView()},E=function(){w=n.renderer.screenToTextCoordinates(t,u),n.moveCursorToPosition(w)};f.capture(n.container,z,A);var F=setInterval(C,20);return a.preventDefault()},this.onDoubleClick=function(a){var b=a.getDocumentPosition(),c=this.editor;c.moveCursorToPosition(b),c.selection.selectWord(),this.$clickSelection=c.getSelectionRange()},this.onTripleClick=function(a){var b=a.getDocumentPosition(),c=this.editor;c.moveCursorToPosition(b),c.selection.selectLine(),this.$clickSelection=c.getSelectionRange()},this.onQuadClick=function(a){var b=this.editor;b.selectAll(),this.$clickSelection=b.getSelectionRange()},this.onScroll=function(a){var b=this.editor;b.renderer.scrollBy(a.wheelX*a.speed,a.wheelY*a.speed);if(b.renderer.isScrollableBy(a.wheelX*a.speed,a.wheelY*a.speed))return a.preventDefault()}})).call(d.prototype),b.DefaultHandlers=d}),define("ace/lib/browser_focus",["require","exports","module","ace/lib/oop","ace/lib/event","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./oop"),e=a("./event"),f=a("./event_emitter").EventEmitter,g=function(a){a=a||window,this.lastFocus=(new Date).getTime(),this._isFocused=!0;var b=this;"onfocusin"in a.document?(e.addListener(a.document,"focusin",function(a){b._setFocused(!0)}),e.addListener(a.document,"focusout",function(a){b._setFocused(!!a.toElement)})):(e.addListener(a,"blur",function(a){b._setFocused(!1)}),e.addListener(a,"focus",function(a){b._setFocused(!0)}))};((function(){d.implement(this,f),this.isFocused=function(){return this._isFocused},this._setFocused=function(a){if(this._isFocused==a)return;a&&(this.lastFocus=(new Date).getTime()),this._isFocused=a,this._emit("changeFocus")}})).call(g.prototype),b.BrowserFocus=g}),define("ace/lib/event_emitter",["require","exports","module"],function(a,b,c){"use strict";var d={};d._emit=d._dispatchEvent=function(a,b){this._eventRegistry=this._eventRegistry||{},this._defaultHandlers=this._defaultHandlers||{};var c=this._eventRegistry[a]||[],d=this._defaultHandlers[a];if(!c.length&&!d)return;b=b||{},b.type=a,b.stopPropagation||(b.stopPropagation=function(){this.propagationStopped=!0}),b.preventDefault||(b.preventDefault=function(){this.defaultPrevented=!0});for(var e=0;e<c.length;e++){c[e](b);if(b.propagationStopped)break}d&&!b.defaultPrevented&&d(b)},d.setDefaultHandler=function(a,b){this._defaultHandlers=this._defaultHandlers||{};if(this._defaultHandlers[a])throw new Error("The default handler for '"+a+"' is already set");this._defaultHandlers[a]=b},d.on=d.addEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(!c)var c=this._eventRegistry[a]=[];c.indexOf(b)==-1&&c.push(b)},d.removeListener=d.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(!c)return;var d=c.indexOf(b);d!==-1&&c.splice(d,1)},d.removeAllListeners=function(a){this._eventRegistry&&(this._eventRegistry[a]=[])},b.EventEmitter=d}),define("ace/mouse/default_gutter_handler",["require","exports","module"],function(a,b,c){function d(a){a.setDefaultHandler("gutterclick",function(b){var c=b.getDocumentPosition().row,d=a.session.selection;d.moveCursorTo(c,0),d.selectLine()})}"use strict",b.GutterHandler=d}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event"],function(a,b,c){"use strict";var d=a("../lib/event"),e=b.MouseEvent=function(a,b){this.domEvent=a,this.editor=b,this.pageX=d.getDocumentX(a),this.pageY=d.getDocumentY(a),this.clientX=a.clientX,this.clientY=a.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};((function(){this.stopPropagation=function(){d.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){d.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){if(this.$pos)return this.$pos;var a=d.getDocumentX(this.domEvent),b=d.getDocumentY(this.domEvent);return this.$pos=this.editor.renderer.screenToTextCoordinates(a,b),this.$pos},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var a=this.editor;if(a.getReadOnly())this.$inSelection=!1;else{var b=a.getSelectionRange();if(b.isEmpty())this.$inSelection=!1;else{var c=this.getDocumentPosition();this.$inSelection=b.contains(c.row,c.column)}}return this.$inSelection},this.getButton=function(){return d.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=function(){return this.domEvent.ctrlKey||this.domEvent.metaKey}})).call(e.prototype)}),define("ace/mouse/fold_handler",["require","exports","module"],function(a,b,c){function d(a){a.on("click",function(b){var c=b.getDocumentPosition(),d=a.session,e=d.getFoldAt(c.row,c.column,1);e&&(b.getAccelKey()?d.removeFold(e):d.expandFold(e),b.stop())}),a.on("gutterclick",function(b){if(b.domEvent.target.className.indexOf("ace_fold-widget")!=-1){var c=b.getDocumentPosition().row;a.session.onFoldWidgetClick(c,b.domEvent),b.stop()}})}"use strict",b.FoldHandler=d}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event","ace/commands/default_commands"],function(a,b,c){"use strict";var d=a("../lib/keys"),e=a("../lib/event");a("../commands/default_commands");var f=function(a){this.$editor=a,this.$data={},this.$handlers=[this]};((function(){this.setKeyboardHandler=function(a){if(this.$handlers[this.$handlers.length-1]==a)return;this.$data={},this.$handlers=a?[this,a]:[this]},this.addKeyboardHandler=function(a){this.removeKeyboardHandler(a),this.$handlers.push(a)},this.removeKeyboardHandler=function(a){var b=this.$handlers.indexOf(a);return b==-1?!1:(this.$handlers.splice(b,1),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(a,b,c,d){var f;for(var g=this.$handlers.length;g--;){f=this.$handlers[g].handleKeyboard(this.$data,a,b,c,d);if(f&&f.command)break}if(!f||!f.command)return!1;var h=!1,i=this.$editor.commands;return f.command!="null"?h=i.exec(f.command,this.$editor,f.args):h=!0,h&&d&&e.stopEvent(d),h},this.handleKeyboard=function(a,b,c){return{command:this.$editor.commands.findKeyCommand(b,c)}},this.onCommandKey=function(a,b,c){var e=d.keyCodeToString(c);this.$callKeyboardHandlers(b,e,c,a)},this.onTextInput=function(a,b){var c=!1;!b&&a.length==1&&(c=this.$callKeyboardHandlers(0,a)),c||this.$editor.commands.exec("insertstring",this.$editor,a)}})).call(f.prototype),b.KeyBinding=f}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang"],function(a,b,c){function d(a,b){return{win:a,mac:b}}"use strict";var e=a("../lib/lang");b.commands=[{name:"selectall",bindKey:d("Ctrl-A","Command-A"),exec:function(a){a.selectAll()},readOnly:!0},{name:"centerselection",bindKey:d(null,"Ctrl-L"),exec:function(a){a.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:d("Ctrl-L","Command-L"),exec:function(a){var b=parseInt(prompt("Enter line number:"),10);isNaN(b)||a.gotoLine(b)},readOnly:!0},{name:"fold",bindKey:d("Alt-L","Alt-L"),exec:function(a){a.session.toggleFold(!1)},readOnly:!0},{name:"unfold",bindKey:d("Alt-Shift-L","Alt-Shift-L"),exec:function(a){a.session.toggleFold(!0)},readOnly:!0},{name:"foldall",bindKey:d("Alt-0","Alt-0"),exec:function(a){a.session.foldAll()},readOnly:!0},{name:"unfoldall",bindKey:d("Alt-Shift-0","Alt-Shift-0"),exec:function(a){a.session.unfold()},readOnly:!0},{name:"findnext",bindKey:d("Ctrl-K","Command-G"),exec:function(a){a.findNext()},readOnly:!0},{name:"findprevious",bindKey:d("Ctrl-Shift-K","Command-Shift-G"),exec:function(a){a.findPrevious()},readOnly:!0},{name:"find",bindKey:d("Ctrl-F","Command-F"),exec:function(a){var b=prompt("Find:",a.getCopyText());a.find(b)},readOnly:!0},{name:"overwrite",bindKey:d("Insert","Insert"),exec:function(a){a.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:d("Ctrl-Shift-Home|Alt-Shift-Up","Command-Shift-Up"),exec:function(a){a.getSelection().selectFileStart()},readOnly:!0},{name:"gotostart",bindKey:d("Ctrl-Home|Ctrl-Up","Command-Home|Command-Up"),exec:function(a){a.navigateFileStart()},readOnly:!0},{name:"selectup",bindKey:d("Shift-Up","Shift-Up"),exec:function(a){a.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:d("Up","Up|Ctrl-P"),exec:function(a,b){a.navigateUp(b.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:d("Ctrl-Shift-End|Alt-Shift-Down","Command-Shift-Down"),exec:function(a){a.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoend",bindKey:d("Ctrl-End|Ctrl-Down","Command-End|Command-Down"),exec:function(a){a.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"selectdown",bindKey:d("Shift-Down","Shift-Down"),exec:function(a){a.getSelection().selectDown()},multiSelectAction:"forEach",readOnly:!0},{name:"golinedown",bindKey:d("Down","Down|Ctrl-N"),exec:function(a,b){a.navigateDown(b.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectwordleft",bindKey:d("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(a){a.getSelection().selectWordLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"gotowordleft",bindKey:d("Ctrl-Left","Option-Left"),exec:function(a){a.navigateWordLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttolinestart",bindKey:d("Alt-Shift-Left","Command-Shift-Left"),exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"gotolinestart",bindKey:d("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(a){a.navigateLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectleft",bindKey:d("Shift-Left","Shift-Left"),exec:function(a){a.getSelection().selectLeft()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoleft",bindKey:d("Left","Left|Ctrl-B"),exec:function(a,b){a.navigateLeft(b.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectwordright",bindKey:d("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(a){a.getSelection().selectWordRight()},multiSelectAction:"forEach",readOnly:!0},{name:"gotowordright",bindKey:d("Ctrl-Right","Option-Right"),exec:function(a){a.navigateWordRight()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttolineend",bindKey:d("Alt-Shift-Right","Command-Shift-Right"),exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"gotolineend",bindKey:d("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(a){a.navigateLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"selectright",bindKey:d("Shift-Right","Shift-Right"),exec:function(a){a.getSelection().selectRight()},multiSelectAction:"forEach",readOnly:!0},{name:"gotoright",bindKey:d("Right","Right|Ctrl-F"),exec:function(a,b){a.navigateRight(b.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selectpagedown",bindKey:d("Shift-PageDown","Shift-PageDown"),exec:function(a){a.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:d(null,"PageDown"),exec:function(a){a.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:d("PageDown","Option-PageDown|Ctrl-V"),exec:function(a){a.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:d("Shift-PageUp","Shift-PageUp"),exec:function(a){a.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:d(null,"PageUp"),exec:function(a){a.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:d("PageUp","Option-PageUp"),exec:function(a){a.gotoPageUp()},readOnly:!0},{name:"selectlinestart",bindKey:d("Shift-Home","Shift-Home"),exec:function(a){a.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectlineend",bindKey:d("Shift-End","Shift-End"),exec:function(a){a.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"togglerecording",bindKey:d("Ctrl-Alt-E","Command-Option-E"),exec:function(a){a.commands.toggleRecording()},readOnly:!0},{name:"replaymacro",bindKey:d("Ctrl-Shift-E","Command-Shift-E"),exec:function(a){a.commands.replay(a)},readOnly:!0},{name:"jumptomatching",bindKey:d("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(a){a.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"cut",exec:function(a){var b=a.getSelectionRange();a._emit("cut",b),a.selection.isEmpty()||(a.session.remove(b),a.clearSelection())},multiSelectAction:"forEach"},{name:"removeline",bindKey:d("Ctrl-D","Command-D"),exec:function(a){a.removeLines()},multiSelectAction:"forEach"},{name:"togglecomment",bindKey:d("Ctrl-7","Command-7"),exec:function(a){a.toggleCommentLines()},multiSelectAction:"forEach"},{name:"replace",bindKey:d("Ctrl-R","Command-Option-F"),exec:function(a){var b=prompt("Find:",a.getCopyText());if(!b)return;var c=prompt("Replacement:");if(!c)return;a.replace(c,{needle:b})}},{name:"replaceall",bindKey:d("Ctrl-Shift-R","Command-Shift-Option-F"),exec:function(a){var b=prompt("Find:");if(!b)return;var c=prompt("Replacement:");if(!c)return;a.replaceAll(c,{needle:b})}},{name:"undo",bindKey:d("Ctrl-Z","Command-Z"),exec:function(a){a.undo()}},{name:"redo",bindKey:d("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(a){a.redo()}},{name:"copylinesup",bindKey:d("Ctrl-Alt-Up","Command-Option-Up"),exec:function(a){a.copyLinesUp()}},{name:"movelinesup",bindKey:d("Alt-Up","Option-Up"),exec:function(a){a.moveLinesUp()}},{name:"copylinesdown",bindKey:d("Ctrl-Alt-Down","Command-Option-Down"),exec:function(a){a.copyLinesDown()}},{name:"movelinesdown",bindKey:d("Alt-Down","Option-Down"),exec:function(a){a.moveLinesDown()}},{name:"del",bindKey:d("Delete","Delete|Ctrl-D"),exec:function(a){a.remove("right")},multiSelectAction:"forEach"},{name:"backspace",bindKey:d("Command-Backspace|Option-Backspace|Shift-Backspace|Backspace","Ctrl-Backspace|Command-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(a){a.remove("left")},multiSelectAction:"forEach"},{name:"removetolinestart",bindKey:d("Alt-Backspace","Command-Backspace"),exec:function(a){a.removeToLineStart()},multiSelectAction:"forEach"},{name:"removetolineend",bindKey:d("Alt-Delete","Ctrl-K"),exec:function(a){a.removeToLineEnd()},multiSelectAction:"forEach"},{name:"removewordleft",bindKey:d("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(a){a.removeWordLeft()},multiSelectAction:"forEach"},{name:"removewordright",bindKey:d("Ctrl-Delete","Alt-Delete"),exec:function(a){a.removeWordRight()},multiSelectAction:"forEach"},{name:"outdent",bindKey:d("Shift-Tab","Shift-Tab"),exec:function(a){a.blockOutdent()},multiSelectAction:"forEach"},{name:"indent",bindKey:d("Tab","Tab"),exec:function(a){a.indent()},multiSelectAction:"forEach"},{name:"insertstring",exec:function(a,b){a.insert(b)},multiSelectAction:"forEach"},{name:"inserttext",exec:function(a,b){a.insert(e.stringRepeat(b.text||"",b.times||1))},multiSelectAction:"forEach"},{name:"splitline",bindKey:d(null,"Ctrl-O"),exec:function(a){a.splitLine()},multiSelectAction:"forEach"},{name:"transposeletters",bindKey:d("Ctrl-T","Ctrl-T"),exec:function(a){a.transposeLetters()},multiSelectAction:function(a){a.transposeSelections(1)}},{name:"touppercase",bindKey:d("Ctrl-U","Ctrl-U"),exec:function(a){a.toUpperCase()},multiSelectAction:"forEach"},{name:"tolowercase",bindKey:d("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(a){a.toLowerCase()},multiSelectAction:"forEach"}]}),define("ace/edit_session",["require","exports","module","ace/config","ace/lib/oop","ace/lib/lang","ace/lib/net","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/edit_session/folding","ace/edit_session/bracket_match"],function(a,b,c){"use strict";var d=a("./config"),e=a("./lib/oop"),f=a("./lib/lang"),g=a("./lib/net"),h=a("./lib/event_emitter").EventEmitter,i=a("./selection").Selection,j=a("./mode/text").Mode,k=a("./range").Range,l=a("./document").Document,m=a("./background_tokenizer").BackgroundTokenizer,n=function(a,b){this.$modified=!0,this.$breakpoints=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$rowCache=[],this.$wrapData=[],this.$foldData=[],this.$undoSelect=!0,this.$foldData.toString=function(){var a="";return this.forEach(function(b){a+="\n"+b.toString()}),a},a instanceof l?this.setDocument(a):this.setDocument(new l(a)),this.selection=new i(this),b?this.setMode(b):this.setMode(new j)};((function(){function b(a){return a<4352?!1:a>=4352&&a<=4447||a>=4515&&a<=4519||a>=4602&&a<=4607||a>=9001&&a<=9002||a>=11904&&a<=11929||a>=11931&&a<=12019||a>=12032&&a<=12245||a>=12272&&a<=12283||a>=12288&&a<=12350||a>=12353&&a<=12438||a>=12441&&a<=12543||a>=12549&&a<=12589||a>=12593&&a<=12686||a>=12688&&a<=12730||a>=12736&&a<=12771||a>=12784&&a<=12830||a>=12832&&a<=12871||a>=12880&&a<=13054||a>=13056&&a<=19903||a>=19968&&a<=42124||a>=42128&&a<=42182||a>=43360&&a<=43388||a>=44032&&a<=55203||a>=55216&&a<=55238||a>=55243&&a<=55291||a>=63744&&a<=64255||a>=65040&&a<=65049||a>=65072&&a<=65106||a>=65108&&a<=65126||a>=65128&&a<=65131||a>=65281&&a<=65376||a>=65504&&a<=65510}e.implement(this,h),this.setDocument=function(a){if(this.doc)throw new Error("Document is already set");this.doc=a,a.on("change",this.onChange.bind(this)),this.on("changeFold",this.onChangeFold.bind(this)),this.bgTokenizer&&(this.bgTokenizer.setDocument(this.getDocument()),this.bgTokenizer.start(0))},this.getDocument=function(){return this.doc},this.$resetRowCache=function(a){if(a==0){this.$rowCache=[];return}var b=this.$rowCache;for(var c=0;c<b.length;c++)if(b[c].docRow>=a){b.splice(c,b.length);return}},this.onChangeFold=function(a){var b=a.data;this.$resetRowCache(b.start.row)},this.onChange=function(a){var b=a.data;this.$modified=!0,this.$resetRowCache(b.range.start.row);var c=this.$updateInternalDataOnChange(a);!this.$fromUndo&&this.$undoManager&&!b.ignore&&(this.$deltasDoc.push(b),c&&c.length!=0&&this.$deltasFold.push({action:"removeFolds",folds:c}),this.$informUndoManager.schedule()),this.bgTokenizer.start(b.range.start.row),this._emit("change",a)},this.setValue=function(a){this.doc.setValue(a),this.selection.moveCursorTo(0,0),this.selection.clearSelection(),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(a){return this.bgTokenizer.getState(a)},this.getTokens=function(a,b){return this.bgTokenizer.getTokens(a,b)},this.getTokenAt=function(a,b){var c=this.bgTokenizer.getTokens(a,a)[0].tokens,d,e=0;if(b==null)f=c.length-1,e=this.getLine(a).length;else for(var f=0;f<c.length;f++){e+=c[f].value.length;if(e>=b)break}return d=c[f],d?(d.index=f,d.start=e-d.value.length,d):null},this.setUndoManager=function(a){this.$undoManager=a,this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel();if(a){var b=this;this.$syncInformUndoManager=function(){b.$informUndoManager.cancel(),b.$deltasFold.length&&(b.$deltas.push({group:"fold",deltas:b.$deltasFold}),b.$deltasFold=[]),b.$deltasDoc.length&&(b.$deltas.push({group:"doc",deltas:b.$deltasDoc}),b.$deltasDoc=[]),b.$deltas.length>0&&a.execute({action:"aceupdate",args:[b.$deltas,b]}),b.$deltas=[]},this.$informUndoManager=f.deferredCall(this.$syncInformUndoManager)}},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?f.stringRepeat(" ",this.getTabSize()):"\t"},this.$useSoftTabs=!0,this.setUseSoftTabs=function(a){if(this.$useSoftTabs===a)return;this.$useSoftTabs=a},this.getUseSoftTabs=function(){return this.$useSoftTabs},this.$tabSize=4,this.setTabSize=function(a){if(isNaN(a)||this.$tabSize===a)return;this.$modified=!0,this.$tabSize=a,this._emit("changeTabSize")},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(a){return this.$useSoftTabs&&a.column%this.$tabSize==0},this.$overwrite=!1,this.setOverwrite=function(a){if(this.$overwrite==a)return;this.$overwrite=a,this._emit("changeOverwrite")},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(a){this.$breakpoints=[];for(var b=0;b<a.length;b++)this.$breakpoints[a[b]]=!0;this._emit("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._emit("changeBreakpoint",{})},this.setBreakpoint=function(a){this.$breakpoints[a]=!0,this._emit("changeBreakpoint",{})},this.clearBreakpoint=function(a){delete this.$breakpoints[a],this._emit("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.addMarker=function(a,b,c,d){var e=this.$markerId++,f={range:a,type:c||"line",renderer:typeof c=="function"?c:null,clazz:b,inFront:!!d};return d?(this.$frontMarkers[e]=f,this._emit("changeFrontMarker")):(this.$backMarkers[e]=f,this._emit("changeBackMarker")),e},this.removeMarker=function(a){var b=this.$frontMarkers[a]||this.$backMarkers[a];if(!b)return;var c=b.inFront?this.$frontMarkers:this.$backMarkers;b&&(delete c[a],this._emit(b.inFront?"changeFrontMarker":"changeBackMarker"))},this.getMarkers=function(a){return a?this.$frontMarkers:this.$backMarkers},this.setAnnotations=function(a){this.$annotations={};for(var b=0;b<a.length;b++){var c=a[b],d=c.row;this.$annotations[d]?this.$annotations[d].push(c):this.$annotations[d]=[c]}this._emit("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||{}},this.clearAnnotations=function(){this.$annotations={},this._emit("changeAnnotation",{})},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r?\n)/m);b?this.$autoNewLine=b[1]:this.$autoNewLine="\n"},this.getWordRange=function(a,b){var c=this.getLine(a),d=!1;b>0&&(d=!!c.charAt(b-1).match(this.tokenRe)),d||(d=!!c.charAt(b).match(this.tokenRe));var e=d?this.tokenRe:this.nonTokenRe,f=b;if(f>0){do f--;while(f>=0&&c.charAt(f).match(e));f++}var g=b;while(g<c.length&&c.charAt(g).match(e))g++;return new k(a,f,a,g)},this.getAWordRange=function(a,b){var c=this.getWordRange(a,b),d=this.getLine(c.end.row);while(d.charAt(c.end.column).match(/[ \t]/))c.end.column+=1;return c},this.setNewLineMode=function(a){this.doc.setNewLineMode(a)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.$useWorker=!0,this.setUseWorker=function(a){if(this.$useWorker==a)return;this.$useWorker=a,this.$stopWorker(),a&&this.$startWorker()},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(a){var b=a.data;this.bgTokenizer.start(b.first),this._emit("tokenizerUpdate",a)},this.$modes={},this._loadMode=function(b,c){function e(a){if(h.$modes[b])return c(h.$modes[b]);h.$modes[b]=new a.Mode,h._emit("loadmode",{name:b,mode:h.$modes[b]}),c(h.$modes[b])}function f(a){if(!d.get("packaged"))return a();var c=b.split("/").pop(),e=d.get("modePath")+"/mode-"+c+d.get("suffix");g.loadScript(e,a)}if(this.$modes[b])return c(this.$modes[b]);var h=this,i;try{i=a(b)}catch(j){}if(i)return e(i);f(function(){a([b],e)})},this.$mode=null,this.$origMode=null,this.setMode=function(a){this.$origMode=a;if(typeof a=="string"){var b=this;this._loadMode(a,function(c){if(b.$origMode!==a)return;b.setMode(c)});return}if(this.$mode===a)return;this.$mode=a,this.$stopWorker(),this.$useWorker&&this.$startWorker();var c=a.getTokenizer();if(c.addEventListener!==undefined){var d=this.onReloadTokenizer.bind(this);c.addEventListener("update",d)}if(!this.bgTokenizer){this.bgTokenizer=new m(c);var b=this;this.bgTokenizer.addEventListener("update",function(a){b._emit("tokenizerUpdate",a)})}else this.bgTokenizer.setTokenizer(c);this.bgTokenizer.setDocument(this.getDocument()),this.bgTokenizer.start(0),this.tokenRe=a.tokenRe,this.nonTokenRe=a.nonTokenRe,this.$setFolding(a.foldingRules),this._emit("changeMode")},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if(typeof Worker!="undefined"&&!a.noWorker)try{this.$worker=this.$mode.createWorker(this)}catch(b){console.log("Could not load worker"),console.log(b),this.$worker=null}else this.$worker=null},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(a){a=Math.round(Math.max(0,a));if(this.$scrollTop===a)return;this.$scrollTop=a,this._emit("changeScrollTop",a)},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(a){a=Math.round(Math.max(0,a));if(this.$scrollLeft===a)return;this.$scrollLeft=a,this._emit("changeScrollLeft",a)},this.getScrollLeft=function(){return this.$scrollLeft},this.getWidth=function(){return this.$computeWidth(),this.width},this.getScreenWidth=function(){return this.$computeWidth(),this.screenWidth},this.$computeWidth=function(a){if(this.$modified||a){this.$modified=!1;var b=this.doc.getAllLines(),c=0,d=0;for(var e=0;e<b.length;e++){var f=this.getFoldLine(e),g,h;g=b[e];if(f){var i=f.range.end;g=this.getFoldDisplayLine(f),e=i.row}h=g.length,c=Math.max(c,h),this.$useWrapMode||(d=Math.max(d,this.$getStringScreenWidth(g)[0]))}this.width=c,this.$useWrapMode?this.screenWidth=this.$wrapLimit:this.screenWidth=d}},this.getLine=function(a){return this.doc.getLine(a)},this.getLines=function(a,b){return this.doc.getLines(a,b)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(a){return this.doc.getTextRange(a)},this.insert=function(a,b){return this.doc.insert(a,b)},this.remove=function(a){return this.doc.remove(a)},this.undoChanges=function(a,b){if(!a.length)return;this.$fromUndo=!0;var c=null;for(var d=a.length-1;d!=-1;d--){var e=a[d];e.group=="doc"?(this.doc.revertDeltas(e.deltas),c=this.$getUndoSelection(e.deltas,!0,c)):e.deltas.forEach(function(a){this.addFolds(a.folds)},this)}return this.$fromUndo=!1,c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c),c},this.redoChanges=function(a,b){if(!a.length)return;this.$fromUndo=!0;var c=null;for(var d=0;d<a.length;d++){var e=a[d];e.group=="doc"&&(this.doc.applyDeltas(e.deltas),c=this.$getUndoSelection(e.deltas,!1,c))}return this.$fromUndo=!1,c&&this.$undoSelect&&!b&&this.selection.setSelectionRange(c),c},this.setUndoSelect=function(a){this.$undoSelect=a},this.$getUndoSelection=function(a,b,c){function d(a){var c=a.action=="insertText"||a.action=="insertLines";return b?!c:c}var e=a[0],f,g,h=!1;d(e)?(f=e.range.clone(),h=!0):(f=k.fromPoints(e.range.start,e.range.start),h=!1);for(var i=1;i<a.length;i++)e=a[i],d(e)?(g=e.range.start,f.compare(g.row,g.column)==-1&&f.setStart(e.range.start),g=e.range.end,f.compare(g.row,g.column)==1&&f.setEnd(e.range.end),h=!0):(g=e.range.start,f.compare(g.row,g.column)==-1&&(f=k.fromPoints(e.range.start,e.range.start)),h=!1);if(c!=null){var j=c.compareRange(f);j==1?f.setStart(c.start):j==-1&&f.setEnd(c.end)}return f},this.replace=function(a,b){return this.doc.replace(a,b)},this.moveText=function(a,b){var c=this.getTextRange(a);this.remove(a);var d=b.row,e=b.column;!a.isMultiLine()&&a.start.row==d&&a.end.column<e&&(e-=c.length);if(a.isMultiLine()&&a.end.row<d){var f=this.doc.$split(c);d-=f.length-1}var g=d+a.end.row-a.start.row,h=a.isMultiLine()?a.end.column:e+a.end.column-a.start.column,i=new k(d,e,g,h);return this.insert(i.start,c),i},this.indentRows=function(a,b,c){c=c.replace(/\t/g,this.getTabString());for(var d=a;d<=b;d++)this.insert({row:d,column:0},c)},this.outdentRows=function(a){var b=a.collapseRows(),c=new k(0,0,0,0),d=this.getTabSize();for(var e=b.start.row;e<=b.end.row;++e){var f=this.getLine(e);c.start.row=e,c.end.row=e;for(var g=0;g<d;++g)if(f.charAt(g)!=" ")break;g<d&&f.charAt(g)=="\t"?(c.start.column=g,c.end.column=g+1):(c.start.column=0,c.end.column=g),this.remove(c)}},this.moveLinesUp=function(a,b){if(a<=0)return 0;var c=this.doc.removeLines(a,b);return this.doc.insertLines(a-1,c),-1},this.moveLinesDown=function(a,b){if(b>=this.doc.getLength()-1)return 0;var c=this.doc.removeLines(a,b);return this.doc.insertLines(a+1,c),1},this.duplicateLines=function(a,b){var a=this.$clipRowToDocument(a),b=this.$clipRowToDocument(b),c=this.getLines(a,b);this.doc.insertLines(a,c);var d=b-a+1;return d},this.$clipRowToDocument=function(a){return Math.max(0,Math.min(a,this.doc.getLength()-1))},this.$clipColumnToRow=function(a,b){return b<0?0:Math.min(this.doc.getLine(a).length,b)},this.$clipPositionToDocument=function(a,b){b=Math.max(0,b);if(a<0)a=0,b=0;else{var c=this.doc.getLength();a>=c?(a=c-1,b=this.doc.getLine(c-1).length):b=Math.min(this.doc.getLine(a).length,b)}return{row:a,column:b}},this.$clipRangeToDocument=function(a){a.start.row<0?(a.start.row=0,a.start.column=0):a.start.column=this.$clipColumnToRow(a.start.row,a.start.column);var b=this.doc.getLength()-1;return a.end.row>b?(a.end.row=b,a.end.column=this.doc.getLine(b).length):a.end.column=this.$clipColumnToRow(a.end.row,a.end.column),a},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(a){if(a!=this.$useWrapMode){this.$useWrapMode=a,this.$modified=!0,this.$resetRowCache(0);if(a){var b=this.getLength();this.$wrapData=[];for(var c=0;c<b;c++)this.$wrapData.push([]);this.$updateWrapData(0,b-1)}this._emit("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(a,b){if(this.$wrapLimitRange.min!==a||this.$wrapLimitRange.max!==b)this.$wrapLimitRange.min=a,this.$wrapLimitRange.max=b,this.$modified=!0,this._emit("changeWrapMode")},this.adjustWrapLimit=function(a){var b=this.$constrainWrapLimit(a);return b!=this.$wrapLimit&&b>0?(this.$wrapLimit=b,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._emit("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(a){var b=this.$wrapLimitRange.min;b&&(a=Math.max(b,a));var c=this.$wrapLimitRange.max;return c&&(a=Math.min(c,a)),Math.max(1,a)},this.getWrapLimit=function(){return this.$wrapLimit},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(a){var b=this.$useWrapMode,c,d=a.data.action,e=a.data.range.start.row,f=a.data.range.end.row,g=a.data.range.start,h=a.data.range.end,i=null;d.indexOf("Lines")!=-1?(d=="insertLines"?f=e+a.data.lines.length:f=e,c=a.data.lines?a.data.lines.length:f-e):c=f-e;if(c!=0)if(d.indexOf("remove")!=-1){b&&this.$wrapData.splice(e,c);var j=this.$foldData;i=this.getFoldsInRange(a.data.range),this.removeFolds(i);var k=this.getFoldLine(h.row),l=0;if(k){k.addRemoveChars(h.row,h.column,g.column-h.column),k.shiftRow(-c);var m=this.getFoldLine(e);m&&m!==k&&(m.merge(k),k=m),l=j.indexOf(k)+1}for(l;l<j.length;l++){var k=j[l];k.start.row>=h.row&&k.shiftRow(-c)}f=e}else{var n;if(b){n=[e,0];for(var o=0;o<c;o++)n.push([]);this.$wrapData.splice.apply(this.$wrapData,n)}var j=this.$foldData,k=this.getFoldLine(e),l=0;if(k){var p=k.range.compareInside(g.row,g.column);p==0?(k=k.split(g.row,g.column),k.shiftRow(c),k.addRemoveChars(f,0,h.column-g.column)):p==-1&&(k.addRemoveChars(e,0,h.column-g.column),k.shiftRow(c)),l=j.indexOf(k)+1}for(l;l<j.length;l++){var k=j[l];k.start.row>=e&&k.shiftRow(c)}}else{c=Math.abs(a.data.range.start.column-a.data.range.end.column),d.indexOf("remove")!=-1&&(i=this.getFoldsInRange(a.data.range),this.removeFolds(i),c=-c);var k=this.getFoldLine(e);k&&k.addRemoveChars(e,g.column,c)}return b&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),b&&this.$updateWrapData(e,f),i},this.$updateWrapData=function(a,b){var c=this.doc.getAllLines(),d=this.getTabSize(),e=this.$wrapData,g=this.$wrapLimit,h,i,k=a;b=Math.min(b,c.length-1);while(k<=b){i=this.getFoldLine(k,i);if(!i)h=this.$getDisplayTokens(f.stringTrimRight(c[k])),e[k]=this.$computeWrapSplits(h,g,d),k++;else{h=[],i.walk(function(a,b,d,e){var f;if(a){f=this.$getDisplayTokens(a,h.length),f[0]=j;for(var g=1;g<f.length;g++)f[g]=l}else f=this.$getDisplayTokens(c[b].substring(e,d),h.length);h=h.concat(f)}.bind(this),i.end.row,c[i.end.row].length+1);while(h.length!=0&&h[h.length-1]>=o)h.pop();e[i.start.row]=this.$computeWrapSplits(h,g,d),k=i.end.row+1}}};var c=1,i=2,j=3,l=4,n=9,o=10,p=11,q=12;this.$computeWrapSplits=function(a,b){function c(b){var c=a.slice(f,b),e=c.length;c.join("").replace(/12/g,function(){e-=1}).replace(/2/g,function(){e-=1}),g+=e,d.push(g),f=b}if(a.length==0)return[];var d=[],e=a.length,f=0,g=0;while(e-f>b){var h=f+b;if(a[h]>=o){while(a[h]>=o)h++;c(h);continue}if(a[h]==j||a[h]==l){for(h;h!=f-1;h--)if(a[h]==j)break;if(h>f){c(h);continue}h=f+b;for(h;h<a.length;h++)if(a[h]!=l)break;if(h==a.length)break;c(h);continue}var i=Math.max(h-10,f-1);while(h>i&&a[h]<j)h--;while(h>i&&a[h]==n)h--;if(h>i){c(++h);continue}h=f+b,c(h)}return d},this.$getDisplayTokens=function(a,d){var e=[],f;d=d||0;for(var g=0;g<a.length;g++){var h=a.charCodeAt(g);if(h==9){f=this.getScreenTabSize(e.length+d),e.push(p);for(var j=1;j<f;j++)e.push(q)}else h==32?e.push(o):h>39&&h<48||h>57&&h<64?e.push(n):h>=4352&&b(h)?e.push(c,i):e.push(c)}return e},this.$getStringScreenWidth=function(a,c,d){if(c==0)return[0,0];c==null&&(c=d+a.length*Math.max(this.getTabSize(),2)),d=d||0;var e,f;for(f=0;f<a.length;f++){e=a.charCodeAt(f),e==9?d+=this.getScreenTabSize(d):e>=4352&&b(e)?d+=2:d+=1;if(d>c)break}return[d,f]},this.getRowLength=function(a){return!this.$useWrapMode||!this.$wrapData[a]?1:this.$wrapData[a].length+1},this.getRowHeight=function(a,b){return this.getRowLength(b)*a.lineHeight},this.getScreenLastRowColumn=function(a){var b=this.screenToDocumentPosition(a,Number.MAX_VALUE);return this.documentToScreenColumn(b.row,b.column)},this.getDocumentLastRowColumn=function(a,b){var c=this.documentToScreenRow(a,b);return this.getScreenLastRowColumn(c)},this.getDocumentLastRowColumnPosition=function(a,b){var c=this.documentToScreenRow(a,b);return this.screenToDocumentPosition(c,Number.MAX_VALUE/10)},this.getRowSplitData=function(a){return this.$useWrapMode?this.$wrapData[a]:undefined},this.getScreenTabSize=function(a){return this.$tabSize-a%this.$tabSize},this.screenToDocumentRow=function(a,b){return this.screenToDocumentPosition(a,b).row},this.screenToDocumentColumn=function(a,b){return this.screenToDocumentPosition(a,b).column},this.screenToDocumentPosition=function(a,b){if(a<0)return{row:0,column:0};var c,d=0,e=0,f,g=0,h=0,i=this.$rowCache;for(var j=0;j<i.length;j++)if(i[j].screenRow<a)g=i[j].screenRow,d=i[j].docRow;else break;var k=!i.length||j==i.length,l=this.getLength()-1,m=this.getNextFoldLine(d),n=m?m.start.row:Infinity;while(g<=a){h=this.getRowLength(d);if(g+h-1>=a||d>=l)break;g+=h,d++,d>n&&(d=m.end.row+1,m=this.getNextFoldLine(d,m),n=m?m.start.row:Infinity),k&&i.push({docRow:d,screenRow:g})}if(m&&m.start.row<=d)c=this.getFoldDisplayLine(m),d=m.start.row;else{if(g+h<=a||d>l)return{row:l,column:this.getLine(l).length};c=this.getLine(d),m=null}if(this.$useWrapMode){var o=this.$wrapData[d];o&&(f=o[a-g],a>g&&o.length&&(e=o[a-g-1]||o[o.length-1],c=c.substring(e)))}return e+=this.$getStringScreenWidth(c,b)[1],this.$useWrapMode&&e>=f&&(e=f-1),m?m.idxToPosition(e):{row:d,column:e}},this.documentToScreenPosition=function(a,b){if(typeof b=="undefined")var c=this.$clipPositionToDocument(a.row,a.column);else c=this.$clipPositionToDocument(a,b);a=c.row,b=c.column;var d;if(this.$useWrapMode){d=this.$wrapData;if(a>d.length-1)return{row:this.getScreenLength(),column:d.length==0?0:d[d.length-1].length-1}}var e=0,f=null,g=null;g=this.getFoldAt(a,b,1),g&&(a=g.start.row,b=g.start.column);var h,i=0,j=this.$rowCache;for(var k=0;k<j.length;k++)if(j[k].docRow<a)e=j[k].screenRow,i=j[k].docRow;else break;var l=!j.length||k==j.length,m=this.getNextFoldLine(i),n=m?m.start.row:Infinity;while(i<a){if(i>=n){h=m.end.row+1;if(h>a)break;m=this.getNextFoldLine(h,m),n=m?m.start.row:Infinity}else h=i+1;e+=this.getRowLength(i),i=h,l&&j.push({docRow:i,screenRow:e})}var o="";m&&i>=n?(o=this.getFoldDisplayLine(m,a,b),f=m.start.row):(o=this.getLine(a).substring(0,b),f=a);if(this.$useWrapMode){var p=d[f],q=0;while(o.length>=p[q])e++,q++;o=o.substring(p[q-1]||0,o.length)}return{row:e,column:this.$getStringScreenWidth(o)[0]}},this.documentToScreenColumn=function(a,b){return this.documentToScreenPosition(a,b).column},this.documentToScreenRow=function(a,b){return this.documentToScreenPosition(a,b).row},this.getScreenLength=function(){var a=0,b=null;if(!this.$useWrapMode){a=this.getLength();var c=this.$foldData;for(var d=0;d<c.length;d++)b=c[d],a-=b.end.row-b.start.row}else{var e=this.$wrapData.length,f=0,d=0,b=this.$foldData[d++],g=b?b.start.row:Infinity;while(f<e)a+=this.$wrapData[f].length+1,f++,f>g&&(f=b.end.row+1,b=this.$foldData[d++],g=b?b.start.row:Infinity)}return a}})).call(n.prototype),a("./edit_session/folding").Folding.call(n.prototype),a("./edit_session/bracket_match").BracketMatch.call(n.prototype),b.EditSession=n}),define("ace/config",["require","exports","module","ace/lib/lang"],function(a,b,c){function d(a){return a.replace(/-(.)/g,function(a,b){return b.toUpperCase()})}"no use strict";var e=a("./lib/lang"),f=function(){return this}(),g={packaged:!1,workerPath:"",modePath:"",themePath:"",suffix:".js"};b.get=function(a){if(!g.hasOwnProperty(a))throw new Error("Unknown confik key: "+a);return g[a]},b.set=function(a,b){if(!g.hasOwnProperty(a))throw new Error("Unknown confik key: "+a);g[a]=b},b.all=function(){return e.copyObject(g)},b.init=function(){g.packaged=a.packaged||c.packaged||f.define&&define.packaged;if(!f.document)return"";var e={},h="",i,j=document.getElementsByTagName("script");for(var k=0;k<j.length;k++){var l=j[k],m=l.src||l.getAttribute("src");if(!m)continue;var n=l.attributes;for(var o=0,p=n.length;o<p;o++){var q=n[o];q.name.indexOf("data-ace-")===0&&(e[d(q.name.replace(/^data-ace-/,""))]=q.value)}var r=m.match(/^(?:(.*\/)ace\.js|(.*\/)ace((-uncompressed)?(-noconflict)?\.js))(?:\?|$)/);r&&(h=r[1]||r[2],i=r[3])}h&&(e.base=e.base||h,e.packaged=!0),e.suffix=e.suffix||i,e.workerPath=e.workerPath||e.base,e.modePath=e.modePath||e.base,e.themePath=e.themePath||e.base,delete e.base;for(var s in e)typeof e[s]!="undefined"&&b.set(s,e[s])}}),define("ace/lib/net",["require","exports","module"],function(a,b,c){"use strict",b.get=function(a,c){var d=b.createXhr();d.open("GET",a,!0),d.onreadystatechange=function(a){d.readyState===4&&c(d.responseText)},d.send(null)};var d=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];b.createXhr=function(){var a,b,c;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(b=0;b<3;b++){c=d[b];try{a=new ActiveXObject(c)}catch(e){}if(a){d=[c];break}}if(!a)throw new Error("createXhr(): XMLHttpRequest not available");return a},b.loadScript=function(a,b){var c=document.getElementsByTagName("head")[0],d=document.createElement("script");d.src=a,c.appendChild(d),d.onload=b}}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/lang"),f=a("./lib/event_emitter").EventEmitter,g=a("./range").Range,h=function(a){this.session=a,this.doc=a.getDocument(),this.clearSelection(),this.selectionLead=this.doc.createAnchor(0,0),this.selectionAnchor=this.doc.createAnchor(0,0);var b=this;this.selectionLead.on("change",function(a){b._emit("changeCursor"),b.$isEmpty||b._emit("changeSelection"),!b.$keepDesiredColumnOnChange&&a.old.column!=a.value.column&&(b.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){b.$isEmpty||b._emit("changeSelection")})};((function(){d.implement(this,f),this.isEmpty=function(){return this.$isEmpty||this.selectionAnchor.row==this.selectionLead.row&&this.selectionAnchor.column==this.selectionLead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.selectionLead.getPosition()},this.setSelectionAnchor=function(a,b){this.selectionAnchor.setPosition(a,b),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.selectionAnchor.getPosition()},this.getSelectionLead=function(){return this.selectionLead.getPosition()},this.shiftSelection=function(a){if(this.$isEmpty){this.moveCursorTo(this.selectionLead.row,this.selectionLead.column+a);return}var b=this.getSelectionAnchor(),c=this.getSelectionLead(),d=this.isBackwards();(!d||b.column!==0)&&this.setSelectionAnchor(b.row,b.column+a),(d||c.column!==0)&&this.$moveSelection(function(){this.moveCursorTo(c.row,c.column+a)})},this.isBackwards=function(){var a=this.selectionAnchor,b=this.selectionLead;return a.row>b.row||a.row==b.row&&a.column>b.column},this.getRange=function(){var a=this.selectionAnchor,b=this.selectionLead;return this.isEmpty()?g.fromPoints(b,b):this.isBackwards()?g.fromPoints(b,a):g.fromPoints(a,b)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var a=this.doc.getLength()-1;this.setSelectionAnchor(a,this.doc.getLine(a).length),this.moveCursorTo(0,0)},this.setSelectionRange=function(a,b){b?(this.setSelectionAnchor(a.end.row,a.end.column),this.selectTo(a.start.row,a.start.column)):(this.setSelectionAnchor(a.start.row,a.start.column),this.selectTo(a.end.row,a.end.column)),this.$desiredColumn=null},this.$moveSelection=function(a){var b=this.selectionLead;this.$isEmpty&&this.setSelectionAnchor(b.row,b.column),a.call(this)},this.selectTo=function(a,b){this.$moveSelection(function(){this.moveCursorTo(a,b)})},this.selectToPosition=function(a){this.$moveSelection(function(){this.moveCursorToPosition(a)})},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.selectWord=function(){var a=this.getCursor(),b=this.session.getWordRange(a.row,a.column);this.setSelectionRange(b)},this.selectAWord=function(){var a=this.getCursor(),b=this.session.getAWordRange(a.row,a.column);this.setSelectionRange(b)},this.selectLine=function(){var a=this.selectionLead.row,b,c=this.session.getFoldLine(a);c?(a=c.start.row,b=c.end.row):b=a,this.setSelectionAnchor(a,0),this.$moveSelection(function(){this.moveCursorTo(b+1,0)})},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var a=this.selectionLead.getPosition(),b;if(b=this.session.getFoldAt(a.row,a.column,-1))this.moveCursorTo(b.start.row,b.start.column);else if(a.column==0)a.row>0&&this.moveCursorTo(a.row-1,this.doc.getLine(a.row-1).length);else{var c=this.session.getTabSize();this.session.isTabStop(a)&&this.doc.getLine(a.row).slice(a.column-c,a.column).split(" ").length-1==c?this.moveCursorBy(0,-c):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var a=this.selectionLead.getPosition(),b;if(b=this.session.getFoldAt(a.row,a.column,1))this.moveCursorTo(b.end.row,b.end.column);else if(this.selectionLead.column==this.doc.getLine(this.selectionLead.row).length)this.selectionLead.row<this.doc.getLength()-1&&this.moveCursorTo(this.selectionLead.row+1,0);else{var c=this.session.getTabSize(),a=this.selectionLead;this.session.isTabStop(a)&&this.doc.getLine(a.row).slice(a.column,a.column+c).split(" ").length-1==c?this.moveCursorBy(0,c):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var a=this.selectionLead.row,b=this.selectionLead.column,c=this.session.documentToScreenRow(a,b),d=this.session.screenToDocumentPosition(c,0),e=this.session.getDisplayLine(a,null,d.row,d.column),f=e.match(/^\s*/);f[0].length==b?this.moveCursorTo(d.row,d.column):this.moveCursorTo(d.row,d.column+f[0].length)},this.moveCursorLineEnd=function(){var a=this.selectionLead,b=this.session.getDocumentLastRowColumnPosition(a.row,a.column);this.moveCursorTo(b.row,b.column)},this.moveCursorFileEnd=function(){var a=this.doc.getLength()-1,b=this.doc.getLine(a).length;this.moveCursorTo(a,b)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorWordRight=function(){var a=this.selectionLead.row,b=this.selectionLead.column,c=this.doc.getLine(a),d=c.substring(b),e;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var f=this.session.getFoldAt(a,b,1);if(f){this.moveCursorTo(f.end.row,f.end.column);return}if(e=this.session.nonTokenRe.exec(d))b+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,d=c.substring(b);if(b>=c.length){this.moveCursorTo(a,c.length),this.moveCursorRight(),a<this.doc.getLength()-1&&this.moveCursorWordRight();return}if(e=this.session.tokenRe.exec(d))b+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(a,b)},this.moveCursorWordLeft=function(){var a=this.selectionLead.row,b=this.selectionLead.column,c;if(c=this.session.getFoldAt(a,b,-1)){this.moveCursorTo(c.start.row,c.start.column);return}var d=this.session.getFoldStringAt(a,b,-1);d==null&&(d=this.doc.getLine(a).substring(0,b));var f=e.stringReverse(d),g;this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;if(g=this.session.nonTokenRe.exec(f))b-=this.session.nonTokenRe.lastIndex,f=f.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0;if(b<=0){this.moveCursorTo(a,0),this.moveCursorLeft(),a>0&&this.moveCursorWordLeft();return}if(g=this.session.tokenRe.exec(f))b-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0;this.moveCursorTo(a,b)},this.moveCursorBy=function(a,b){var c=this.session.documentToScreenPosition(this.selectionLead.row,this.selectionLead.column);b===0&&(this.$desiredColumn?c.column=this.$desiredColumn:this.$desiredColumn=c.column);var d=this.session.screenToDocumentPosition(c.row+a,c.column);this.moveCursorTo(d.row,d.column+b,b===0)},this.moveCursorToPosition=function(a){this.moveCursorTo(a.row,a.column)},this.moveCursorTo=function(a,b,c){var d=this.session.getFoldAt(a,b,1);d&&(a=d.start.row,b=d.start.column),this.$keepDesiredColumnOnChange=!0,this.selectionLead.setPosition(a,b),this.$keepDesiredColumnOnChange=!1,c||(this.$desiredColumn=null)},this.moveCursorToScreen=function(a,b,c){var d=this.session.screenToDocumentPosition(a,b);this.moveCursorTo(d.row,d.column,c)},this.detach=function(){this.selectionLead.detach(),this.selectionAnchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(a){this.setSelectionRange(a,a.cursor==a.start),this.$desiredColumn=a.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(a){var b=this.getRange();return a?(a.start.column=b.start.column,a.start.row=b.start.row,a.end.column=b.end.column,a.end.row=b.end.row):a=b,a.cursor=this.isBackwards()?a.start:a.end,a.desiredColumn=this.$desiredColumn,a}})).call(h.prototype),b.Selection=h}),define("ace/range",["require","exports","module"],function(a,b,c){"use strict";var d=function(a,b,c,d){this.start={row:a,column:b},this.end={row:c,column:d}};((function(){this.isEqual=function(a){return this.start.row==a.start.row&&this.end.row==a.end.row&&this.start.column==a.start.column&&this.end.column==a.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(a,b){return this.compare(a,b)==0},this.compareRange=function(a){var b,c=a.end,d=a.start;return b=this.compare(c.row,c.column),b==1?(b=this.compare(d.row,d.column),b==1?2:b==0?1:0):b==-1?-2:(b=this.compare(d.row,d.column),b==-1?-1:b==1?42:0)},this.comparePoint=function(a){return this.compare(a.row,a.column)},this.containsRange=function(a){return this.comparePoint(a.start)==0&&this.comparePoint(a.end)==0},this.intersectsRange=function(a){var b=this.compareRange(a);return b==-1||b==0||b==1},this.isEnd=function(a,b){return this.end.row==a&&this.end.column==b},this.isStart=function(a,b){return this.start.row==a&&this.start.column==b},this.setStart=function(a,b){typeof a=="object"?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=b)},this.setEnd=function(a,b){typeof a=="object"?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=b)},this.inside=function(a,b){return this.compare(a,b)==0?this.isEnd(a,b)||this.isStart(a,b)?!1:!0:!1},this.insideStart=function(a,b){return this.compare(a,b)==0?this.isEnd(a,b)?!1:!0:!1},this.insideEnd=function(a,b){return this.compare(a,b)==0?this.isStart(a,b)?!1:!0:!1},this.compare=function(a,b){return!this.isMultiLine()&&a===this.start.row?b<this.start.column?-1:b>this.end.column?1:0:a<this.start.row?-1:a>this.end.row?1:this.start.row===a?b>=this.start.column?0:-1:this.end.row===a?b<=this.end.column?0:1:0},this.compareStart=function(a,b){return this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.compareEnd=function(a,b){return this.end.row==a&&this.end.column==b?1:this.compare(a,b)},this.compareInside=function(a,b){return this.end.row==a&&this.end.column==b?1:this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.clipRows=function(a,b){if(this.end.row>b)var c={row:b+1,column:0};if(this.start.row>b)var e={row:b+1,column:0};if(this.start.row<a)var e={row:a,column:0};if(this.end.row<a)var c={row:a,column:0};return d.fromPoints(e||this.start,c||this.end)},this.extend=function(a,b){var c=this.compare(a,b);if(c==0)return this;if(c==-1)var e={row:a,column:b};else var f={row:a,column:b};return d.fromPoints(e||this.start,f||this.end)},this.fixOrientation=function(){if(this.start.row<this.end.row||this.start.row==this.end.row&&this.start.column<this.end.column)return!1;var a=this.start;return this.end=this.start,this.start=a,!0},this.isEmpty=function(){return this.start.row==this.end.row&&this.start.column==this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return d.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new d(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new d(this.start.row,0,this.end.row,0)},this.toScreenRange=function(a){var b=a.documentToScreenPosition(this.start),c=a.documentToScreenPosition(this.end);return new d(b.row,b.column,c.row,c.column)}})).call(d.prototype),d.fromPoints=function(a,b){return new d(a.row,a.column,b.row,b.column)},b.Range=d}),define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode"],function(a,b,c){"use strict";var d=a("../tokenizer").Tokenizer,e=a("./text_highlight_rules").TextHighlightRules,f=a("./behaviour").Behaviour,g=a("../unicode"),h=function(){this.$tokenizer=new d((new e).getRules()),this.$behaviour=new f};((function(){this.tokenRe=new RegExp("^["+g.packages.L+g.packages.Mn+g.packages.Mc+g.packages.Nd+g.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+g.packages.L+g.packages.Mn+g.packages.Mc+g.packages.Nd+g.packages.Pc+"\\$_]|s])+","g"),this.getTokenizer=function(){return this.$tokenizer},this.toggleCommentLines=function(a,b,c,d){},this.getNextLineIndent=function(a,b,c){return""},this.checkOutdent=function(a,b,c){return!1},this.autoOutdent=function(a,b,c){},this.$getIndent=function(a){var b=a.match(/^(\s+)/);return b?b[1]:""},this.createWorker=function(a){return null},this.highlightSelection=function(a){var b=a.session;b.$selectionOccurrences||(b.$selectionOccurrences=[]),b.$selectionOccurrences.length&&this.clearSelectionHighlight(a);var c=a.getSelectionRange();if(c.isEmpty()||c.isMultiLine())return;var d=c.start.column-1,e=c.end.column+1,f=b.getLine(c.start.row),g=f.length,h=f.substring(Math.max(d,0),Math.min(e,g));if(d>=0&&/^[\w\d]/.test(h)||e<=g&&/[\w\d]$/.test(h))return;h=f.substring(c.start.column,c.end.column);if(!/^[\w\d]+$/.test(h))return;var i=a.getCursorPosition(),j={wrap:!0,wholeWord:!0,caseSensitive:!0,needle:h},k=a.$search.getOptions();a.$search.set(j);var l=a.$search.findAll(b);l.forEach(function(a){if(!a.contains(i.row,i.column)){var c=b.addMarker(a,"ace_selected_word","text");b.$selectionOccurrences.push(c)}}),a.$search.set(k)},this.clearSelectionHighlight=function(a){if(!a.session.$selectionOccurrences)return;a.session.$selectionOccurrences.forEach(function(b){a.session.removeMarker(b)}),a.session.$selectionOccurrences=[]},this.createModeDelegates=function(a){if(!this.$embeds)return;this.$modes={};for(var b=0;b<this.$embeds.length;b++)a[this.$embeds[b]]&&(this.$modes[this.$embeds[b]]=new a[this.$embeds[b]]);var c=["toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction"];for(var b=0;b<c.length;b++)(function(a){var d=c[b],e=a[d];a[c[b]]=function(){return this.$delegator(d,arguments,e)}})(this)},this.$delegator=function(a,b,c){var d=b[0];for(var e=0;e<this.$embeds.length;e++){if(!this.$modes[this.$embeds[e]])continue;var f=d.split(this.$embeds[e]);if(!f[0]&&f[1]){b[0]=f[1];var g=this.$modes[this.$embeds[e]];return g[a].apply(g,b)}}var h=c.apply(this,b);return c?h:undefined},this.transformAction=function(a,b,c,d,e){if(this.$behaviour){var f=this.$behaviour.getBehaviours();for(var g in f)if(f[g][b]){var h=f[g][b].apply(this,arguments);if(h)return h}}}})).call(h.prototype),b.Mode=h}),define("ace/tokenizer",["require","exports","module"],function(a,b,c){"use strict";var d=function(a,b){b=b?"g"+b:"g",this.rules=a,this.regExps={},this.matchMappings={};for(var c in this.rules){var d=this.rules[c],e=d,f=[],g=0,h=this.matchMappings[c]={};for(var i=0;i<e.length;i++){e[i].regex instanceof RegExp&&(e[i].regex=e[i].regex.toString().slice(1,-1));var j=(new RegExp("(?:("+e[i].regex+")|(.))")).exec("a").length-2,k=e[i].regex.replace(/\\([0-9]+)/g,function(a,b){return"\\"+(parseInt(b,10)+g+1)});if(j>1&&e[i].token.length!==j-1)throw new Error("Matching groups and length of the token array don't match in rule #"+i+" of state "+c);h[g]={rule:i,len:j},g+=j,f.push(k)}this.regExps[c]=new RegExp("(?:("+f.join(")|(")+")|(.))",b)}};((function(){this.getLineTokens=function(a,b){var c=b,d=this.rules[c],e=this.matchMappings[c],f=this.regExps[c];f.lastIndex=0;var g,h=[],i=0,j={type:null,value:""};while(g=f.exec(a)){var k="text",l=null,m=[g[0]];for(var n=0;n<g.length-2;n++){if(g[n+1]===undefined)continue;l=d[e[n].rule],e[n].len>1&&(m=g.slice(n+2,n+1+e[n].len)),typeof l.token=="function"?k=l.token.apply(this,m):k=l.token;var o=l.next;o&&o!==c&&(c=o,d=this.rules[c],e=this.matchMappings[c],i=f.lastIndex,f=this.regExps[c],f.lastIndex=i);break}if(m[0]){typeof k=="string"&&(m=[m.join("")],k=[k]);for(var n=0;n<m.length;n++){if(!m[n])continue;(!l||l.merge||k[n]==="text")&&j.type===k[n]?j.value+=m[n]:(j.type&&h.push(j),j={type:k[n],value:m[n]})}}if(i==a.length)break;i=f.lastIndex}return j.type&&h.push(j),{tokens:h,state:c}}})).call(d.prototype),b.Tokenizer=d}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(a,b,c){"use strict";var d=a("../lib/lang"),e=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{token:"text",regex:".+"}]}};((function(){this.addRules=function(a,b){for(var c in a){var d=a[c];for(var e=0;e<d.length;e++){var f=d[e];f.next?f.next=b+f.next:f.next=b+c}this.$rules[b+c]=d}},this.getRules=function(){return this.$rules},this.embedRules=function(a,b,c,e){var f=(new a).getRules();if(e)for(var g=0;g<e.length;g++)e[g]=b+e[g];else{e=[];for(var h in f)e.push(b+h)}this.addRules(f,b);for(var g=0;g<e.length;g++)Array.prototype.unshift.apply(this.$rules[e[g]],d.deepCopy(c));this.$embeds||(this.$embeds=[]),this.$embeds.push(b)},this.getEmbeds=function(){return this.$embeds}})).call(e.prototype),b.TextHighlightRules=e}),define("ace/mode/behaviour",["require","exports","module"],function(a,b,c){"use strict";var d=function(){this.$behaviours={}};((function(){this.add=function(a,b,c){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[a]:this.$behaviours[a]={}}this.$behaviours[a][b]=c},this.addBehaviours=function(a){for(var b in a)for(var c in a[b])this.add(b,c,a[b][c])},this.remove=function(a){this.$behaviours&&this.$behaviours[a]&&delete this.$behaviours[a]},this.inherit=function(a,b){if(typeof a=="function")var c=(new a).getBehaviours(b);else var c=a.getBehaviours(b);this.addBehaviours(c)},this.getBehaviours=function(a){if(!a)return this.$behaviours;var b={};for(var c=0;c<a.length;c++)this.$behaviours[a[c]]&&(b[a[c]]=this.$behaviours[a[c]]);return b}})).call(d.prototype),b.Behaviour=d}),define("ace/unicode",["require","exports","module"],function(a,b,c){function d(a){var c=/\w{4}/g;for(var d in a)b.packages[d]=a[d].replace(c,"\\u$&")}"use strict",b.packages={},d({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=a("./range").Range,g=a("./anchor").Anchor,h=function(a){this.$lines=[],Array.isArray(a)?this.insertLines(0,a):a.length==0?this.$lines=[""]:this.insert({row:0,column:0},a)};((function(){d.implement(this,e),this.setValue=function(a){var b=this.getLength();this.remove(new f(0,0,b,this.getLine(b-1).length)),this.insert({row:0,column:0},a)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(a,b){return new g(this,a,b)},"aaa".split(/a/).length==0?this.$split=function(a){return a.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(a){return a.split(/\r\n|\r|\n/)},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r\n|\r|\n)/m);b?this.$autoNewLine=b[1]:this.$autoNewLine="\n"},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";case"auto":return this.$autoNewLine}},this.$autoNewLine="\n",this.$newLineMode="auto",this.setNewLineMode=function(a){if(this.$newLineMode===a)return;this.$newLineMode=a},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(a){return a=="\r\n"||a=="\r"||a=="\n"},this.getLine=function(a){return this.$lines[a]||""},this.getLines=function(a,b){return this.$lines.slice(a,b+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(a){if(a.start.row==a.end.row)return this.$lines[a.start.row].substring(a.start.column,a.end.column);var b=[];return b.push(this.$lines[a.start.row].substring(a.start.column)),b.push.apply(b,this.getLines(a.start.row+1,a.end.row-1)),b.push(this.$lines[a.end.row].substring(0,a.end.column)),b.join(this.getNewLineCharacter())},this.$clipPosition=function(a){var b=this.getLength();return a.row>=b&&(a.row=Math.max(0,b-1),a.column=this.getLine(b-1).length),a},this.insert=function(a,b){if(!b||b.length===0)return a;a=this.$clipPosition(a),this.getLength()<=1&&this.$detectNewLine(b);var c=this.$split(b),d=c.splice(0,1)[0],e=c.length==0?null:c.splice(c.length-1,1)[0];return a=this.insertInLine(a,d),e!==null&&(a=this.insertNewLine(a),a=this.insertLines(a.row,c),a=this.insertInLine(a,e||"")),a},this.insertLines=function(a,b){if(b.length==0)return{row:a,column:0};var c=[a,0];c.push.apply(c,b),this.$lines.splice.apply(this.$lines,c);var d=new f(a,0,a+b.length,0),e={action:"insertLines",range:d,lines:b};return this._emit("change",{data:e}),d.end},this.insertNewLine=function(a){a=this.$clipPosition(a);var b=this.$lines[a.row]||"";this.$lines[a.row]=b.substring(0,a.column),this.$lines.splice(a.row+1,0,b.substring(a.column,b.length));var c={row:a.row+1,column:0},d={action:"insertText",range:f.fromPoints(a,c),text:this.getNewLineCharacter()};return this._emit("change",{data:d}),c},this.insertInLine=function(a,b){if(b.length==0)return a;var c=this.$lines[a.row]||"";this.$lines[a.row]=c.substring(0,a.column)+b+c.substring(a.column);var d={row:a.row,column:a.column+b.length},e={action:"insertText",range:f.fromPoints(a,d),text:b};return this._emit("change",{data:e}),d},this.remove=function(a){a.start=this.$clipPosition(a.start),a.end=this.$clipPosition(a.end);if(a.isEmpty())return a.start;var b=a.start.row,c=a.end.row;if(a.isMultiLine()){var d=a.start.column==0?b:b+1,e=c-1;a.end.column>0&&this.removeInLine(c,0,a.end.column),e>=d&&this.removeLines(d,e),d!=b&&(this.removeInLine(b,a.start.column,this.getLine(b).length),this.removeNewLine(a.start.row))}else this.removeInLine(b,a.start.column,a.end.column);return a.start},this.removeInLine=function(a,b,c){if(b==c)return;var d=new f(a,b,a,c),e=this.getLine(a),g=e.substring(b,c),h=e.substring(0,b)+e.substring(c,e.length);this.$lines.splice(a,1,h);var i={action:"removeText",range:d,text:g};return this._emit("change",{data:i}),d.start},this.removeLines=function(a,b){var c=new f(a,0,b+1,0),d=this.$lines.splice(a,b-a+1),e={action:"removeLines",range:c,nl:this.getNewLineCharacter(),lines:d};return this._emit("change",{data:e}),d},this.removeNewLine=function(a){var b=this.getLine(a),c=this.getLine(a+1),d=new f(a,b.length,a+1,0),e=b+c;this.$lines.splice(a,2,e);var g={action:"removeText",range:d,text:this.getNewLineCharacter()};this._emit("change",{data:g})},this.replace=function(a,b){if(b.length==0&&a.isEmpty())return a.start;if(b==this.getTextRange(a))return a.end;this.remove(a);if(b)var c=this.insert(a.start,b);else c=a.start;return c},this.applyDeltas=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=f.fromPoints(c.range.start,c.range.end);c.action=="insertLines"?this.insertLines(d.start.row,c.lines):c.action=="insertText"?this.insert(d.start,c.text):c.action=="removeLines"?this.removeLines(d.start.row,d.end.row-1):c.action=="removeText"&&this.remove(d)}},this.revertDeltas=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b],d=f.fromPoints(c.range.start,c.range.end);c.action=="insertLines"?this.removeLines(d.start.row,d.end.row-1):c.action=="insertText"?this.remove(d):c.action=="removeLines"?this.insertLines(d.start.row,c.lines):c.action=="removeText"&&this.insert(d.start,c.text)}}})).call(h.prototype),b.Document=h}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=b.Anchor=function(a,b,c){this.document=a,typeof c=="undefined"?this.setPosition(b.row,b.column):this.setPosition(b,c),this.$onChange=this.onChange.bind(this),a.on("change",this.$onChange)};((function(){d.implement(this,e),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.onChange=function(a){var b=a.data,c=b.range;if(c.start.row==c.end.row&&c.start.row!=this.row)return;if(c.start.row>this.row)return;if(c.start.row==this.row&&c.start.column>this.column)return;var d=this.row,e=this.column;b.action==="insertText"?c.start.row===d&&c.start.column<=e?c.start.row===c.end.row?e+=c.end.column-c.start.column:(e-=c.start.column,d+=c.end.row-c.start.row):c.start.row!==c.end.row&&c.start.row<d&&(d+=c.end.row-c.start.row):b.action==="insertLines"?c.start.row<=d&&(d+=c.end.row-c.start.row):b.action=="removeText"?c.start.row==d&&c.start.column<e?c.end.column>=e?e=c.start.column:e=Math.max(0,e-(c.end.column-c.start.column)):c.start.row!==c.end.row&&c.start.row<d?(c.end.row==d&&(e=Math.max(0,e-c.end.column)+c.start.column),d-=c.end.row-c.start.row):c.end.row==d&&(d-=c.end.row-c.start.row,e=Math.max(0,e-c.end.column)+c.start.column):b.action=="removeLines"&&c.start.row<=d&&(c.end.row<=d?d-=c.end.row-c.start.row:(d=c.start.row,e=0)),this.setPosition(d,e,!0)},this.setPosition=function(a,b,c){var d;c?d={row:a,column:b}:d=this.$clipPositionToDocument(a,b);if(this.row==d.row&&this.column==d.column)return;var e={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._emit("change",{old:e,value:d})},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.$clipPositionToDocument=function(a,b){var c={};return a>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):a<0?(c.row=0,c.column=0):(c.row=a,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,b))),b<0&&(c.column=0),c}})).call(f.prototype)}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=function(a,b){this.running=!1,this.lines=[],this.currentLine=0,this.tokenizer=a;var c=this;this.$worker=function(){if(!c.running)return;var a=new Date,b=c.currentLine,d=c.doc,e=0,f=d.getLength();while(c.currentLine<f){c.lines[c.currentLine]=c.$tokenizeRows(c.currentLine,c.currentLine)[0],c.currentLine++,e+=1;if(e%5==0&&new Date-a>20){c.fireUpdateEvent(b,c.currentLine-1),c.running=setTimeout(c.$worker,20);return}}c.running=!1,c.fireUpdateEvent(b,f-1)}};((function(){d.implement(this,e),this.setTokenizer=function(a){this.tokenizer=a,this.lines=[],this.start(0)},this.setDocument=function(a){this.doc=a,this.lines=[],this.stop()},this.fireUpdateEvent=function(a,b){var c={first:a,last:b};this._emit("update",{data:c})},this.start=function(a){this.currentLine=Math.min(a||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(a,b){return this.$tokenizeRows(a,b)},this.getState=function(a){return this.$tokenizeRows(a,a)[0].state},this.$tokenizeRows=function(a,b){if(!this.doc||isNaN(a)||isNaN(b))return[{state:"start",tokens:[]}];var c=[],d="start",e=!1;a>0&&this.lines[a-1]?(d=this.lines[a-1].state,e=!0):a==0?(d="start",e=!0):this.lines.length>0&&(d=this.lines[this.lines.length-1].state);var f=this.doc.getLines(a,b);for(var g=a;g<=b;g++)if(!this.lines[g]){var h=this.tokenizer.getLineTokens(f[g-a]||"",d),d=h.state;c.push(h),e&&(this.lines[g]=h)}else{var h=this.lines[g];d=h.state,c.push(h)}return c}})).call(f.prototype),b.BackgroundTokenizer=f}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(a,b,c){function d(){this.getFoldAt=function(a,b,c){var d=this.getFoldLine(a);if(!d)return null;var e=d.folds;for(var f=0;f<e.length;f++){var g=e[f];if(g.range.contains(a,b)){if(c==1&&g.range.isEnd(a,b))continue;if(c==-1&&g.range.isStart(a,b))continue;return g}}},this.getFoldsInRange=function(a){a=a.clone();var b=a.start,c=a.end,d=this.$foldData,e=[];b.column+=1,c.column-=1;for(var f=0;f<d.length;f++){var g=d[f].range.compareRange(a);if(g==2)continue;if(g==-2)break;var h=d[f].folds;for(var i=0;i<h.length;i++){var j=h[i];g=j.range.compareRange(a);if(g==-2)break;if(g==2)continue;if(g==42)break;e.push(j)}}return e},this.getAllFolds=function(){function a(c){b.push(c);if(!c.subFolds)return;for(var d=0;d<c.subFolds.length;d++)a(c.subFolds[d])}var b=[],c=this.$foldData;for(var d=0;d<c.length;d++)for(var e=0;e<c[d].folds.length;e++)a(c[d].folds[e]);return b},this.getFoldStringAt=function(a,b,c,d){d=d||this.getFoldLine(a);if(!d)return null;var e={end:{column:0}},f,g;for(var h=0;h<d.folds.length;h++){g=d.folds[h];var i=g.range.compareEnd(a,b);if(i==-1){f=this.getLine(g.start.row).substring(e.end.column,g.start.column);break}if(i===0)return null;e=g}return f||(f=this.getLine(g.start.row).substring(e.end.column)),c==-1?f.substring(0,b-e.end.column):c==1?f.substring(b-e.end.column):f},this.getFoldLine=function(a,b){var c=this.$foldData,d=0;b&&(d=c.indexOf(b)),d==-1&&(d=0);for(d;d<c.length;d++){var e=c[d];if(e.start.row<=a&&e.end.row>=a)return e;if(e.end.row>a)return null}return null},this.getNextFoldLine=function(a,b){var c=this.$foldData,d=0;b&&(d=c.indexOf(b)),d==-1&&(d=0);for(d;d<c.length;d++){var e=c[d];if(e.end.row>=a)return e}return null},this.getFoldedRowCount=function(a,b){var c=this.$foldData,d=b-a+1;for(var e=0;e<c.length;e++){var f=c[e],g=f.end.row,h=f.start.row;if(g>=b){h<b&&(h>=a?d-=b-h:d=0);break}g>=a&&(h>=a?d-=g-h:d-=g-a+1)}return d},this.$addFoldLine=function(a){return this.$foldData.push(a),this.$foldData.sort(function(a,b){return a.start.row-b.start.row}),a},this.addFold=function(a,b){var c=this.$foldData,d=!1,e;a instanceof g?e=a:e=new g(b,a),this.$clipRangeToDocument(e.range);var h=e.start.row,i=e.start.column,j=e.end.row,k=e.end.column;if(e.placeholder.length<2)throw"Placeholder has to be at least 2 characters";if(h==j&&k-i<2)throw"The range has to be at least 2 characters width";var l=this.getFoldAt(h,i,1),m=this.getFoldAt(j,k,-1);if(l&&m==l)return l.addSubFold(e);if(l&&!l.range.isStart(h,i)||m&&!m.range.isEnd(j,k))throw"A fold can't intersect already existing fold"+e.range+l.range;var n=this.getFoldsInRange(e.range);n.length>0&&(this.removeFolds(n),e.subFolds=n);for(var o=0;o<c.length;o++){var p=c[o];if(j==p.start.row){p.addFold(e),d=!0;break}if(h==p.end.row){p.addFold(e),d=!0;if(!e.sameRow){var q=c[o+1];if(q&&q.start.row==j){p.merge(q);break}}break}if(j<=p.start.row)break}return d||(p=this.$addFoldLine(new f(this.$foldData,e))),this.$useWrapMode&&this.$updateWrapData(p.start.row,p.start.row),this.$modified=!0,this._emit("changeFold",{data:e}),e},this.addFolds=function(a){a.forEach(function(a){this.addFold(a)},this)},this.removeFold=function(a){var b=a.foldLine,c=b.start.row,d=b.end.row,e=this.$foldData,f=b.folds;if(f.length==1)e.splice(e.indexOf(b),1);else if(b.range.isEnd(a.end.row,a.end.column))f.pop(),b.end.row=f[f.length-1].end.row,b.end.column=f[f.length-1].end.column;else if(b.range.isStart(a.start.row,a.start.column))f.shift(),b.start.row=f[0].start.row,b.start.column=f[0].start.column;else if(a.sameRow)f.splice(f.indexOf(a),1);else{var g=b.split(a.start.row,a.start.column);f=g.folds,f.shift(),g.start.row=f[0].start.row,g.start.column=f[0].start.column}this.$useWrapMode&&this.$updateWrapData(c,d),this.$modified=!0,this._emit("changeFold",{data:a})},this.removeFolds=function(a){var b=[];for(var c=0;c<a.length;c++)b.push(a[c]);b.forEach(function(a){this.removeFold(a)},this),this.$modified=!0},this.expandFold=function(a){this.removeFold(a),a.subFolds.forEach(function(a){this.addFold(a)},this),a.subFolds=[]},this.expandFolds=function(a){a.forEach(function(a){this.expandFold(a)},this)},this.unfold=function(a,b){var c,d;a==null?c=new e(0,0,this.getLength(),0):typeof a=="number"?c=new e(a,0,a,this.getLine(a).length):"row"in a?c=e.fromPoints(a,a):c=a,d=this.getFoldsInRange(c);if(b)this.removeFolds(d);else while(d.length)this.expandFolds(d),d=this.getFoldsInRange(c)},this.isRowFolded=function(a,b){return!!this.getFoldLine(a,b)},this.getRowFoldEnd=function(a,b){var c=this.getFoldLine(a,b);return c?c.end.row:a},this.getFoldDisplayLine=function(a,b,c,d,e){d==null&&(d=a.start.row,e=0),b==null&&(b=a.end.row,c=this.getLine(b).length);var f=this.doc,g="";return a.walk(function(a,b,c,h){if(b<d)return;if(b==d){if(c<e)return;h=Math.max(e,h)}a?g+=a:g+=f.getLine(b).substring(h,c)}.bind(this),b,c),g},this.getDisplayLine=function(a,b,c,d){var e=this.getFoldLine(a);if(!e){var f;return f=this.doc.getLine(a),f.substring(d||0,b||f.length)}return this.getFoldDisplayLine(e,a,b,c,d)},this.$cloneFoldData=function(){var a=[];return a=this.$foldData.map(function(b){var c=b.folds.map(function(a){return a.clone()});return new f(a,c)}),a},this.toggleFold=function(a){var b=this.selection,c=b.getRange(),d,e;if(c.isEmpty()){var f=c.start;d=this.getFoldAt(f.row,f.column);if(d){this.expandFold(d);return}(e=this.findMatchingBracket(f))?c.comparePoint(e)==1?c.end=e:(c.start=e,c.start.column++,c.end.column--):(e=this.findMatchingBracket({row:f.row,column:f.column+1}))?(c.comparePoint(e)==1?c.end=e:c.start=e,c.start.column++):c=this.getCommentFoldRange(f.row,f.column)||c}else{var g=this.getFoldsInRange(c);if(a&&g.length){this.expandFolds(g);return}g.length==1&&(d=g[0])}d||(d=this.getFoldAt(c.start.row,c.start.column));if(d&&d.range.toString()==c.toString()){this.expandFold(d);return}var h="...";if(!c.isMultiLine()){h=this.getTextRange(c);if(h.length<4)return;h=h.trim().substring(0,2)+".."}this.addFold(h,c)},this.getCommentFoldRange=function(a,b){var c=new h(this,a,b),d=c.getCurrentToken();if(d&&/^comment|string/.test(d.type)){var f=new e,g=new RegExp(d.type.replace(/\..*/,"\\."));do d=c.stepBackward();while(d&&g.test(d.type));c.stepForward(),f.start.row=c.getCurrentTokenRow(),f.start.column=c.getCurrentTokenColumn()+2,c=new h(this,a,b);do d=c.stepForward();while(d&&g.test(d.type));return d=c.stepBackward(),f.end.row=c.getCurrentTokenRow(),f.end.column=c.getCurrentTokenColumn()+d.value.length,f}},this.foldAll=function(a,b){var c=this.foldWidgets;b=b||this.getLength();for(var d=a||0;d<b;d++){c[d]==null&&(c[d]=this.getFoldWidget(d));if(c[d]!="start")continue;var e=this.getFoldWidgetRange(d);if(e&&e.end.row<b)try{this.addFold("...",e)}catch(f){}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(a){if(!this.$foldStyles[a])throw new Error("invalid fold style: "+a+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle==a)return;this.$foldStyle=a,a=="manual"&&this.unfold();var b=this.$foldMode;this.$setFolding(null),this.$setFolding(b)},this.$setFolding=function(a){if(this.$foldMode==a)return;this.$foldMode=a,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation");if(!a||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=a.getFoldWidget.bind(a,this,this.$foldStyle),this.getFoldWidgetRange=a.getFoldWidgetRange.bind(a,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets)},this.onFoldWidgetClick=function(a,b){var c=this.getFoldWidget(a),d=this.getLine(a),e=b.shiftKey,f=e||b.ctrlKey||b.altKey||b.metaKey,g;c=="end"?g=this.getFoldAt(a,0,-1):g=this.getFoldAt(a,d.length,1);if(g){f?this.removeFold(g):this.expandFold(g);return}var h=this.getFoldWidgetRange(a);if(h){if(!h.isMultiLine()){g=this.getFoldAt(h.start.row,h.start.column,1);if(g&&h.isEqual(g.range)){this.removeFold(g);return}}e||this.addFold("...",h),f&&this.foldAll(h.start.row+1,h.end.row)}else f&&this.foldAll(a+1,this.getLength()),b.target.className+=" invalid"},this.updateFoldWidgets=function(a){var b=a.data,c=b.range,d=c.start.row,e=c.end.row-d;if(e===0)this.foldWidgets[d]=null;else if(b.action=="removeText"||b.action=="removeLines")this.foldWidgets.splice(d,e+1,null);else{var f=Array(e+1);f.unshift(d,1),this.foldWidgets.splice.apply(this.foldWidgets,f)}}}"use strict";var e=a("../range").Range,f=a("./fold_line").FoldLine,g=a("./fold").Fold,h=a("../token_iterator").TokenIterator;b.Folding=d}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(a,b,c){function d(a,b){this.foldData=a,Array.isArray(b)?this.folds=b:b=this.folds=[b];var c=b[b.length-1];this.range=new e(b[0].start.row,b[0].start.column,c.end.row,c.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(a){a.setFoldLine(this)},this)}"use strict";var e=a("../range").Range;((function(){this.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(b){b.start.row+=a,b.end.row+=a})},this.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw"Can't add a fold to this FoldLine as it has no connection";this.folds.push(a),this.folds.sort(function(a,b){return-a.range.compareEnd(b.start.row,b.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else{if(a.end.row!=this.start.row)throw"Trying to add fold to FoldRow that doesn't have a matching row";this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column}a.foldLine=this},this.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},this.walk=function(a,b,c){var d=0,e=this.folds,f,g,h,i=!0;b==null&&(b=this.end.row,c=this.end.column);for(var j=0;j<e.length;j++){f=e[j],g=f.range.compareStart(b,c);if(g==-1){a(null,b,c,d,i);return}h=a(null,f.start.row,f.start.column,d,i),h=!h&&a(f.placeholder,f.start.row,f.start.column,d);if(h||g==0)return;i=!f.sameRow,d=f.end.column}a(null,b,c,d,i)},this.getNextFoldTo=function(a,b){var c,d;for(var e=0;e<this.folds.length;e++){c=this.folds[e],d=c.range.compareEnd(a,b);if(d==-1)return{fold:c,kind:"after"};if(d==0)return{fold:c,kind:"inside"}}return null},this.addRemoveChars=function(a,b,c){var d=this.getNextFoldTo(a,b),e,f;if(d){e=d.fold;if(d.kind=="inside"&&e.start.column!=b&&e.start.row!=a)throw"Moving characters inside of a fold should never be reached";if(e.start.row==a){f=this.folds;var g=f.indexOf(e);g==0&&(this.start.column+=c);for(g;g<f.length;g++){e=f[g],e.start.column+=c;if(!e.sameRow)return;e.end.column+=c}this.end.column+=c}}},this.split=function(a,b){var c=this.getNextFoldTo(a,b).fold,e=this.folds,f=this.foldData;if(!c)return null;var g=e.indexOf(c),h=e[g-1];this.end.row=h.end.row,this.end.column=h.end.column,e=e.splice(g,e.length-g);var i=new d(f,e);return f.splice(f.indexOf(this)+1,0,i),i},this.merge=function(a){var b=a.folds;for(var c=0;c<b.length;c++)this.addFold(b[c]);var d=this.foldData;d.splice(d.indexOf(a),1)},this.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(b){a.push("  "+b.toString())}),a.push("]"),a.join("\n")},this.idxToPosition=function(a){var b=0,c;for(var d=0;d<this.folds.length;d++){var c=this.folds[d];a-=c.start.column-b;if(a<0)return{row:c.start.row,column:c.start.column+a};a-=c.placeholder.length;if(a<0)return c.start;b=c.end.column}return{row:this.end.row,column:this.end.column+a}}})).call(d.prototype),b.FoldLine=d}),define("ace/edit_session/fold",["require","exports","module"],function(a,b,c){"use strict";var d=b.Fold=function(a,b){this.foldLine=null,this.placeholder=b,this.range=a,this.start=a.start,this.end=a.end,this.sameRow=a.start.row==a.end.row,this.subFolds=[]};((function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(a){this.foldLine=a,this.subFolds.forEach(function(b){b.setFoldLine(a)})},this.clone=function(){var a=this.range.clone(),b=new d(a,this.placeholder);return this.subFolds.forEach(function(a){b.subFolds.push(a.clone())}),b},this.addSubFold=function(a){if(this.range.isEqual(a))return this;if(!this.range.containsRange(a))throw"A fold can't intersect already existing fold"+a.range+this.range;var b=a.range.start.row,c=a.range.start.column;for(var d=0,e=-1;d<this.subFolds.length;d++){e=this.subFolds[d].range.compare(b,c);if(e!=1)break}var f=this.subFolds[d];if(e==0)return f.addSubFold(a);var b=a.range.end.row,c=a.range.end.column;for(var g=d,e=-1;g<this.subFolds.length;g++){e=this.subFolds[g].range.compare(b,c);if(e!=1)break}var h=this.subFolds[g];if(e==0)throw"A fold can't intersect already existing fold"+a.range+this.range;var i=this.subFolds.splice(d,g-d,a);return a.setFoldLine(this.foldLine),a}})).call(d.prototype)}),define("ace/token_iterator",["require","exports","module"],function(a,b,c){"use strict";var d=function(a,b,c){this.$session=a,this.$row=b,this.$rowTokens=a.getTokens(b,b)[0].tokens;var d=a.getTokenAt(b,c);this.$tokenIndex=d?d.index:-1};((function(){this.stepBackward=function(){this.$tokenIndex-=1;while(this.$tokenIndex<0){this.$row-=1;if(this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row,this.$row)[0].tokens,this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var a=this.$session.getLength();this.$tokenIndex+=1;while(this.$tokenIndex>=this.$rowTokens.length){this.$row+=1;if(this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row,this.$row)[0].tokens,this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var a=this.$rowTokens,b=this.$tokenIndex,c=a[b].start;if(c!==undefined)return c;c=0;while(b>0)b-=1,c+=a[b].value.length;return c}})).call(d.prototype),b.TokenIterator=d}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator"],function(a,b,c){function d(){this.findMatchingBracket=function(a){if(a.column==0)return null;var b=this.getLine(a.row).charAt(a.column-1);if(b=="")return null;var c=b.match(/([\(\[\{])|([\)\]\}])/);return c?c[1]?this.$findClosingBracket(c[1],a):this.$findOpeningBracket(c[2],a):null},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(a,b){var c=this.$brackets[a],d=1,f=new e(this,b.row,b.column),g=f.getCurrentToken();if(!g)return null;var h=new RegExp("(\\.?"+g.type.replace(".","|").replace("rparen","lparen|rparen")+")+"),i=b.column-f.getCurrentTokenColumn()-2,j=g.value;for(;;){while(i>=0){var k=j.charAt(i);if(k==c){d-=1;if(d==0)return{row:f.getCurrentTokenRow(),column:i+f.getCurrentTokenColumn()}}else k==a&&(d+=1);i-=1}do g=f.stepBackward();while(g&&!h.test(g.type));if(g==null)break;j=g.value,i=j.length-1}return null},this.$findClosingBracket=function(a,b){var c=this.$brackets[a],d=1,f=new e(this,b.row,b.column),g=f.getCurrentToken();if(!g)return null;var h=new RegExp("(\\.?"+g.type.replace(".","|").replace("lparen","lparen|rparen")+")+"),i=b.column-f.getCurrentTokenColumn();for(;;){var j=g.value,k=j.length;while(i<k){var l=j.charAt(i);if(l==c){d-=1;if(d==0)return{row:f.getCurrentTokenRow(),column:i+f.getCurrentTokenColumn()}}else l==a&&(d+=1);i+=1}do g=f.stepForward();while(g&&!h.test(g.type));if(g==null)break;i=0}return null}}"use strict";var e=a("../token_iterator").TokenIterator;b.BracketMatch=d}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,b,c){"use strict";var d=a("./lib/lang"),e=a("./lib/oop"),f=a("./range").Range,g=function(){this.$options={needle:"",backwards:!1,wrap:!1,caseSensitive:!1,wholeWord:!1,scope:g.ALL,regExp:!1}};g.ALL=1,g.SELECTION=2,function(){this.set=function(a){return e.mixin(this.$options,a),this},this.getOptions=function(){return d.copyObject(this.$options)},this.find=function(a){if(!this.$options.needle)return null;if(this.$options.backwards)var b=this.$backwardMatchIterator(a);else b=this.$forwardMatchIterator(a);var c=null;return b.forEach(function(a){return c=a,!0}),c},this.findAll=function(a){var b=this.$options;if(!b.needle)return[];if(b.backwards)var c=this.$backwardMatchIterator(a);else c=this.$forwardMatchIterator(a);var d=!b.start&&b.wrap&&b.scope==g.ALL;d&&(b.start={row:0,column:0});var e=[];return c.forEach(function(a){e.push(a)}),d&&(b.start=null),e},this.replace=function(a,b){var c=this.$assembleRegExp(),d=c.exec(a);return d&&d[0].length==a.length?this.$options.regExp?a.replace(c,b):b:null},this.$forwardMatchIterator=function(a){var b=this.$assembleRegExp(),c=this;return{forEach:function(d){c.$forwardLineIterator(a).forEach(function(a,e,f){e&&(a=a.substring(e));var g=[];a.replace(b,function(a){var b=arguments[arguments.length-2];return g.push({str:a,offset:e+b}),a});for(var h=0;h<g.length;h++){var i=g[h],j=c.$rangeFromMatch(f,i.offset,i.str.length);if(d(j))return!0}})}}},this.$backwardMatchIterator=function(a){var b=this.$assembleRegExp(),c=this;return{forEach:function(d){c.$backwardLineIterator(a).forEach(function(a,e,f){e&&(a=a.substring(e));var g=[];a.replace(b,function(a,b){return g.push({str:a,offset:e+b}),a});for(var h=g.length-1;h>=0;h--){var i=g[h],j=c.$rangeFromMatch(f,i.offset,i.str.length);if(d(j))return!0}})}}},this.$rangeFromMatch=function(a,b,c){return new f(a,b,a,b+c)},this.$assembleRegExp=function(){if(this.$options.regExp)var a=this.$options.needle;else a=d.escapeRegExp(this.$options.needle);this.$options.wholeWord&&(a="\\b"+a+"\\b");var b="g";this.$options.caseSensitive||(b+="i");var c=new RegExp(a,b);return c},this.$forwardLineIterator=function(a){function b(b){var f=a.getLine(b);return c&&b==d.end.row&&(f=f.substring(0,d.end.column)),k&&b==e.row&&(f=f.substring(0,e.column)),f}var c=this.$options.scope==g.SELECTION,d=this.$options.range||a.getSelection().getRange(),e=this.$options.start||d[c?"start":"end"],f=c?d.start.row:0,h=c?d.start.column:0,i=c?d.end.row:a.getLength()-1,j=this.$options.wrap,k=!1;return{forEach:function(a){var c=e.row,d=b(c),g=e.column,l=!1;k=!1;while(!a(d,g,c)){if(l)return;c++,g=0;if(c>i){if(!j)return;c=f,g=h,k=!0}c==e.row&&(l=!0),d=b(c)}}}},this.$backwardLineIterator=function(a){var b=this.$options.scope==g.SELECTION,c=this.$options.range||a.getSelection().getRange(),d=this.$options.start||c[b?"end":"start"],e=b?c.start.row:0,f=b?c.start.column:0,h=b?c.end.row:a.getLength()-1,i=this.$options.wrap;return{forEach:function(g){var j=d.row,k=a.getLine(j).substring(0,d.column),l=0,m=!1,n=!1;while(!g(k,l,j)){if(m)return;j--,l=0;if(j<e){if(!i)return;j=h,n=!0}j==d.row&&(m=!0),k=a.getLine(j),b&&(j==e?l=f:j==h&&(k=k.substring(0,c.end.column))),n&&j==d.row&&(l=d.column)}}}}}.call(g.prototype),b.Search=g}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../keyboard/hash_handler").HashHandler,f=a("../lib/event_emitter").EventEmitter,g=function(a,b){this.platform=a,this.commands={},this.commmandKeyBinding={},this.addCommands(b),this.setDefaultHandler("exec",function(a){a.command.exec(a.editor,a.args||{})})};d.inherits(g,e),function(){d.implement(this,f),this.exec=function(a,b,c){return typeof a=="string"&&(a=this.commands[a]),a?b&&b.$readOnly&&!a.readOnly?!1:(this._emit("exec",{editor:b,command:a,args:c}),!0):!1},this.toggleRecording=function(){if(this.$inReplay)return;return this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(a){this.macro.push([a.command,a.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(a){if(this.$inReplay||!this.macro)return;if(this.recording)return this.toggleRecording();try{this.$inReplay=!0,this.macro.forEach(function(b){typeof b=="string"?this.exec(b,a):this.exec(b[0],a,b[1])},this)}finally{this.$inReplay=!1}},this.trimMacro=function(a){return a.map(function(a){return typeof a[0]!="string"&&(a[0]=a[0].name),a[1]||(a=a[0]),a})}}.call(g.prototype),b.CommandManager=g}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys"],function(a,b,c){function d(a,b){this.platform=b,this.commands={},this.commmandKeyBinding={},this.addCommands(a)}"use strict";var e=a("../lib/keys");((function(){function a(a,c,d){var f,g=0,h=b(a.toLowerCase());for(var i=0,j=h.length;i<j;i++)e.KEY_MODS[h[i]]?g|=e.KEY_MODS[h[i]]:f=h[i]||"-";return{key:f,hashId:g}}function b(a){return a.trim().split(new RegExp("[\\s ]*\\-[\\s ]*","g"),999)}this.addCommand=function(a){this.commands[a.name]&&this.removeCommand(a),this.commands[a.name]=a,a.bindKey&&this._buildKeyHash(a)},this.removeCommand=function(a){var b=typeof a=="string"?a:a.name;a=this.commands[b],delete this.commands[b];var c=this.commmandKeyBinding;for(var d in c)for(var e in c[d])c[d][e]==a&&delete c[d][e]},this.addCommands=function(a){a&&Object.keys(a).forEach(function(b){var c=a[b];if(typeof c=="string")return this.bindKey(c,b);typeof c=="function"&&(c={exec:c}),c.name||(c.name=b),this.addCommand(c)},this)},this.removeCommands=function(a){Object.keys(a).forEach(function(b){this.removeCommand(a[b])},this)},this.bindKey=function(b,c){if(!b)return;var d=this.commmandKeyBinding;b.split("|").forEach(function(b){var e=a(b,c),f=e.hashId;(d[f]||(d[f]={}))[e.key]=c})},this.bindKeys=function(a){Object.keys(a).forEach(function(b){this.bindKey(b,a[b])},this)},this._buildKeyHash=function(a){var b=a.bindKey;if(!b)return;var c=typeof b=="string"?b:b[this.platform];this.bindKey(c,a)},this.findKeyCommand=function(a,b){var c=this.commmandKeyBinding;return c[a]&&c[a][b.toLowerCase()]},this.handleKeyboard=function(a,b,c,d){return{command:this.findKeyCommand(b,c)}}})).call(d.prototype),b.HashHandler=d}),define("ace/undomanager",["require","exports","module"],function(a,b,c){"use strict";var d=function(){this.reset()};((function(){this.execute=function(a){var b=a.args[0];this.$doc=a.args[1],this.$undoStack.push(b),this.$redoStack=[]},this.undo=function(a){var b=this.$undoStack.pop(),c=null;return b&&(c=this.$doc.undoChanges(b,a),this.$redoStack.push(b)),c},this.redo=function(a){var b=this.$redoStack.pop(),c=null;return b&&(c=this.$doc.redoChanges(b,a),this.$undoStack.push(b)),c},this.reset=function(){this.$undoStack=[],this.$redoStack=[]},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0}})).call(d.prototype),b.UndoManager=d}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/useragent","ace/config","ace/lib/net","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","ace/lib/event_emitter","text!ace/css/editor.css"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./lib/event"),g=a("./lib/useragent"),h=a("./config"),i=a("./lib/net"),j=a("./layer/gutter").Gutter,k=a("./layer/marker").Marker,l=a("./layer/text").Text,m=a("./layer/cursor").Cursor,n=a("./scrollbar").ScrollBar,o=a("./renderloop").RenderLoop,p=a("./lib/event_emitter").EventEmitter,q=a("text!./css/editor.css");e.importCssString(q,"ace_editor");var r=function(a,b){var c=this;this.container=a,e.addCssClass(a,"ace_editor"),this.setTheme(b),this.$gutter=e.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=e.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=e.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new j(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onResize.bind(this,!0)),this.$markerBack=new k(this.content);var d=this.$textLayer=new l(this.content);this.canvas=d.element,this.$markerFront=new k(this.content),this.characterWidth=d.getCharacterWidth(),this.lineHeight=d.getLineHeight(),this.$cursorLayer=new m(this.content),this.$cursorPadding=8,this.$horizScroll=!0,this.$horizScrollAlwaysVisible=!0,this.$animatedScroll=!1,this.scrollBar=new n(a),this.scrollBar.addEventListener("scroll",function(a){c.session.setScrollTop(a.data)}),this.scrollTop=0,this.scrollLeft=0,f.addListener(this.scroller,"scroll",function(){var a=c.scroller.scrollLeft;c.scrollLeft=a,c.session.setScrollLeft(a),a==0?c.$gutter.className="ace_gutter":c.$gutter.className="ace_gutter horscroll"}),this.cursorPos={row:0,column:0},this.$textLayer.addEventListener("changeCharacterSize",function(){c.characterWidth=d.getCharacterWidth(),c.lineHeight=d.getLineHeight(),c.$updatePrintMargin(),c.onResize(!0),c.$loop.schedule(c.CHANGE_FULL)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:1,characterWidth:1,minHeight:1,maxHeight:1,offset:0,height:1},this.$loop=new o(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.setPadding(4),this.$updatePrintMargin()};((function(){this.showGutter=!0,this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,d.implement(this,p),this.setSession=function(a){this.session=a,this.$cursorLayer.setSession(a),this.$markerBack.setSession(a),this.$markerFront.setSession(a),this.$gutterLayer.setSession(a),this.$textLayer.setSession(a),this.$loop.schedule(this.CHANGE_FULL)},this.updateLines=function(a,b){b===undefined&&(b=Infinity),this.$changedLines?(this.$changedLines.firstRow>a&&(this.$changedLines.firstRow=a),this.$changedLines.lastRow<b&&(this.$changedLines.lastRow=b)):this.$changedLines={firstRow:a,lastRow:b},this.$loop.schedule(this.CHANGE_LINES)},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(){this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.onResize=function(a){var b=this.CHANGE_SIZE,c=this.$size,d=e.getInnerHeight(this.container);if(a||c.height!=d)c.height=d,this.scroller.style.height=d+"px",c.scrollerHeight=this.scroller.clientHeight,this.scrollBar.setHeight(c.scrollerHeight),this.session&&(this.session.setScrollTop(this.getScrollTop()),b|=this.CHANGE_FULL);var f=e.getInnerWidth(this.container);if(a||c.width!=f){c.width=f;var g=this.showGutter?this.$gutter.offsetWidth:0;this.scroller.style.left=g+"px",c.scrollerWidth=Math.max(0,f-g-this.scrollBar.getWidth()),this.scroller.style.width=c.scrollerWidth+"px";if(this.session.getUseWrapMode()&&this.adjustWrapLimit()||a)b|=this.CHANGE_FULL}this.$loop.schedule(b)},this.adjustWrapLimit=function(){var a=this.$size.scrollerWidth-this.$padding*2,b=Math.floor(a/this.characterWidth);return this.session.adjustWrapLimit(b)},this.setAnimatedScroll=function(a){this.$animatedScroll=a},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(a){this.$textLayer.setShowInvisibles(a)&&this.$loop.schedule(this.CHANGE_TEXT)},this.getShowInvisibles=function(){return this.$textLayer.showInvisibles},this.$showPrintMargin=!0,this.setShowPrintMargin=function(a){this.$showPrintMargin=a,this.$updatePrintMargin()},this.getShowPrintMargin=function(){return this.$showPrintMargin},this.$printMarginColumn=80,this.setPrintMarginColumn=function(a){this.$printMarginColumn=a,this.$updatePrintMargin()},this.getPrintMarginColumn=function(){return this.$printMarginColumn},this.getShowGutter=function(){return this.showGutter},this.setShowGutter=function(a){if(this.showGutter===a)return;this.$gutter.style.display=a?"block":"none",this.showGutter=a,this.onResize(!0)},this.$updatePrintMargin=function(){var a;if(!this.$showPrintMargin&&!this.$printMarginEl)return;this.$printMarginEl||(a=e.createElement("div"),a.className="ace_print_margin_layer",this.$printMarginEl=e.createElement("div"),this.$printMarginEl.className="ace_print_margin",a.appendChild(this.$printMarginEl),this.content.insertBefore(a,this.$textLayer.element));var b=this.$printMarginEl.style;b.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",b.visibility=this.$showPrintMargin?"visible":"hidden"},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.moveTextAreaToCursor=function(a){if(g.isIE)return;if(this.layerConfig.lastRow===0)return;var b=this.$cursorLayer.getPixelPosition();if(!b)return;var c=this.content.getBoundingClientRect(),d=this.layerConfig.offset;a.style.left=c.left+b.left+"px",a.style.top=c.top+b.top-this.scrollTop+d+"px"},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var a=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+a},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(a){this.$padding=a,this.$textLayer.setPadding(a),this.$cursorLayer.setPadding(a),this.$markerFront.setPadding(a),this.$markerBack.setPadding(a),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.getHScrollBarAlwaysVisible=function(){return this.$horizScrollAlwaysVisible},this.setHScrollBarAlwaysVisible=function(a){this.$horizScrollAlwaysVisible!=a&&(this.$horizScrollAlwaysVisible=a,(!this.$horizScrollAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL))},this.$updateScrollBar=function(){this.scrollBar.setInnerHeight(this.layerConfig.maxHeight),this.scrollBar.setScrollTop(this.scrollTop)},this.$renderChanges=function(a){if(!a||!this.session||!this.container.offsetWidth)return;(a&this.CHANGE_FULL||a&this.CHANGE_SIZE||a&this.CHANGE_TEXT||a&this.CHANGE_LINES||a&this.CHANGE_SCROLL)&&this.$computeLayerConfig();if(a&this.CHANGE_H_SCROLL){this.scroller.scrollLeft=this.scrollLeft;var b=this.scroller.scrollLeft;this.scrollLeft=b,this.session.setScrollLeft(b)}if(a&this.CHANGE_FULL){this.$textLayer.checkForSizeChanges(),this.$updateScrollBar(),this.$textLayer.update(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig);return}if(a&this.CHANGE_SCROLL){this.$updateScrollBar(),a&this.CHANGE_TEXT||a&this.CHANGE_LINES?this.$textLayer.update(this.layerConfig):this.$textLayer.scrollLines(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig),this.$markerBack.update(this.layerConfig),this.$markerFront.update(this.layerConfig),this.$cursorLayer.update(this.layerConfig);return}a&this.CHANGE_TEXT?(this.$textLayer.update(this.layerConfig),this.showGutter&&this.$gutterLayer.update(this.layerConfig)):a&this.CHANGE_LINES?this.$updateLines()&&(this.$updateScrollBar(),this.showGutter&&this.$gutterLayer.update(this.layerConfig)):a&this.CHANGE_GUTTER&&this.showGutter&&this.$gutterLayer.update(this.layerConfig),a&this.CHANGE_CURSOR&&this.$cursorLayer.update(this.layerConfig),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(this.layerConfig),a&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(this.layerConfig),a&this.CHANGE_SIZE&&this.$updateScrollBar()},this.$computeLayerConfig=function(){var a=this.session,b=this.scrollTop%this.lineHeight,c=this.$size.scrollerHeight+this.lineHeight,d=this.$getLongestLine(),e=this.$horizScrollAlwaysVisible||this.$size.scrollerWidth-d<0,f=this.$horizScroll!==e;this.$horizScroll=e,f&&(this.scroller.style.overflowX=e?"scroll":"hidden",e||this.session.setScrollLeft(0));var g=this.session.getScreenLength()*this.lineHeight;this.session.setScrollTop(Math.max(0,Math.min(this.scrollTop,g-this.$size.scrollerHeight)));var h=Math.ceil(c/this.lineHeight)-1,i=Math.max(0,Math.round((this.scrollTop-b)/this.lineHeight)),j=i+h,k,l,m={lineHeight:this.lineHeight};i=a.screenToDocumentRow(i,0);var n=a.getFoldLine(i);n&&(i=n.start.row),k=a.documentToScreenRow(i,0),l=a.getRowHeight(m,i),j=Math.min(a.screenToDocumentRow(j,0),a.getLength()-1),c=this.$size.scrollerHeight+a.getRowHeight(m,j)+l,b=this.scrollTop-k*this.lineHeight,this.layerConfig={width:d,padding:this.$padding,firstRow:i,firstRowScreen:k,lastRow:j,lineHeight:this.lineHeight,characterWidth:this.characterWidth,minHeight:c,maxHeight:g,offset:b,height:this.$size.scrollerHeight},this.$gutterLayer.element.style.marginTop=-b+"px",this.content.style.marginTop=-b+"px",this.content.style.width=d+2*this.$padding+"px",this.content.style.height=c+"px",f&&this.onResize(!0)},this.$updateLines=function(){var a=this.$changedLines.firstRow,b=this.$changedLines.lastRow;this.$changedLines=null;var c=this.layerConfig;if(c.width!=this.$getLongestLine())return this.$textLayer.update(c);if(a>c.lastRow+1)return;if(b<c.firstRow)return;if(b===Infinity){this.showGutter&&this.$gutterLayer.update(c),this.$textLayer.update(c);return}return this.$textLayer.updateLines(c,a,b),!0},this.$getLongestLine=function(){var a=this.session.getScreenWidth();return this.$textLayer.showInvisibles&&(a+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(a*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(a,b){this.$gutterLayer.addGutterDecoration(a,b),this.$loop.schedule(this.CHANGE_GUTTER)},this.removeGutterDecoration=function(a,b){this.$gutterLayer.removeGutterDecoration(a,b),this.$loop.schedule(this.CHANGE_GUTTER)},this.setBreakpoints=function(a){this.$gutterLayer.setBreakpoints(a),this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(a){this.$gutterLayer.setAnnotations(a),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(a,b){this.scrollCursorIntoView(a),this.scrollCursorIntoView(b)},this.scrollCursorIntoView=function(a){if(this.$size.scrollerHeight===0)return;var b=this.$cursorLayer.getPixelPosition(a),c=b.left,d=b.top;this.scrollTop>d&&this.session.setScrollTop(d),this.scrollTop+this.$size.scrollerHeight<d+this.lineHeight&&this.session.setScrollTop(d+this.lineHeight-this.$size.scrollerHeight);var e=this.scrollLeft;e>c&&(c<this.$padding+2*this.layerConfig.characterWidth&&(c=0),this.session.setScrollLeft(c)),e+this.$size.scrollerWidth<c+this.characterWidth&&this.session.setScrollLeft(Math.round(c+this.characterWidth-this.$size.scrollerWidth))},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(a){this.session.setScrollTop(a*this.lineHeight)},this.STEPS=10,this.$calcSteps=function(a,b){var c=0,d=this.STEPS,e=[],f=function(a,b,c){return(a/=.5)<1?c/2*Math.pow(a,3)+b:c/2*(Math.pow(a-2,3)+2)+b};for(c=0;c<d;++c)e.push(f(c/this.STEPS,a,b-a));return e.push(b),e},this.scrollToLine=function(a,b){var c=this.$cursorLayer.getPixelPosition({row:a,column:0}),d=c.top;b&&(d-=this.$size.scrollerHeight/2);if(this.$animatedScroll&&Math.abs(d-this.scrollTop)<1e4){var e=this,f=e.$calcSteps(this.scrollTop,d);clearInterval(this.$timer),this.$timer=setInterval(function(){e.session.setScrollTop(f.shift()),f.length||clearInterval(e.$timer)},10)}else this.session.setScrollTop(d)},this.scrollToY=function(a){this.scrollTop!==a&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=a)},this.scrollToX=function(a){a<=this.$padding&&(a=0),this.scrollLeft!==a&&(this.scrollLeft=a),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollBy=function(a,b){b&&this.session.setScrollTop(this.session.getScrollTop()+b),a&&this.session.setScrollLeft(this.session.getScrollLeft()+a)},this.isScrollableBy=function(a,b){if(b<0&&this.session.getScrollTop()>0)return!0;if(b>0&&this.session.getScrollTop()+this.$size.scrollerHeight<this.layerConfig.maxHeight)return!0},this.pixelToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=Math.round((a+this.scrollLeft-c.left-this.$padding-e.getPageScrollLeft())/this.characterWidth),f=Math.floor((b+this.scrollTop-c.top-e.getPageScrollTop())/this.lineHeight);return{row:f,column:d}},this.screenToTextCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=Math.round((a+this.scrollLeft-c.left-this.$padding-e.getPageScrollLeft())/this.characterWidth),f=Math.floor((b+this.scrollTop-c.top-e.getPageScrollTop())/this.lineHeight);return this.session.screenToDocumentPosition(f,Math.max(d,0))},this.textToScreenCoordinates=function(a,b){var c=this.scroller.getBoundingClientRect(),d=this.session.documentToScreenPosition(a,b),e=this.$padding+Math.round(d.column*this.characterWidth),f=d.row*this.lineHeight;return{pageX:c.left+e-this.scrollLeft,pageY:c.top+f-this.scrollTop}},this.visualizeFocus=function(){e.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){e.removeCssClass(this.container,"ace_focus")},this.showComposition=function(a){this.$composition||(this.$composition=e.createElement("div"),this.$composition.className="ace_composition",this.content.appendChild(this.$composition)),this.$composition.innerHTML="&#160;";var b=this.$cursorLayer.getPixelPosition(),c=this.$composition.style;c.top=b.top+"px",c.left=b.left+this.$padding+"px",c.height=this.lineHeight+"px",this.hideCursor()},this.setCompositionText=function(a){e.setInnerText(this.$composition,a)},this.hideComposition=function(){this.showCursor();if(!this.$composition)return;var a=this.$composition.style;a.top="-10000px",a.left="-10000px"},this._loadTheme=function(a,b){if(!h.get("packaged"))return b();var c=a.split("/").pop(),d=h.get("themePath")+"/theme-"+c+h.get("suffix");i.loadScript(d,b)},this.setTheme=function(b){function c(a){e.importCssString(a.cssText,a.cssClass,d.container.ownerDocument),d.$theme&&e.removeCssClass(d.container,d.$theme),d.$theme=a?a.cssClass:null,d.$theme&&e.addCssClass(d.container,d.$theme),a&&a.isDark?e.addCssClass(d.container,"ace_dark"):e.removeCssClass(d.container,"ace_dark"),d.$size&&(d.$size.width=0,d.onResize())}var d=this;this.$themeValue=b;if(!b||typeof b=="string"){var f=b||"ace/theme/textmate",g;try{g=a(f)}catch(h){}if(g)return c(g);d._loadTheme(f,function(){a([f],function(a){if(d.$themeValue!==b)return;c(a)})})}else c(b)},this.getTheme=function(){return this.$themeValue},this.setStyle=function(a){e.addCssClass(this.container,a)},this.unsetStyle=function(a){e.removeCssClass(this.container,a)},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}})).call(r.prototype),b.VirtualRenderer=r}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/dom"),e=a("../lib/oop"),f=a("../lib/event_emitter").EventEmitter,g=function(a){this.element=d.createElement("div"),this.element.className="ace_layer ace_gutter-layer",a.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$breakpoints=[],this.$annotations=[],this.$decorations=[]};((function(){e.implement(this,f),this.setSession=function(a){this.session=a},this.addGutterDecoration=function(a,b){this.$decorations[a]||(this.$decorations[a]=""),this.$decorations[a]+=" "+b},this.removeGutterDecoration=function(a,b){this.$decorations[a]=this.$decorations[a].replace(" "+b,"")},this.setBreakpoints=function(a){this.$breakpoints=a.concat()},this.setAnnotations=function(a){this.$annotations=[];for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];if(!c)continue;var d=this.$annotations[b]={text:[]};for(var e=0;e<c.length;e++){var f=c[e],g=f.text.replace(/"/g,"&quot;").replace(/'/g,"&#8217;").replace(/</,"&lt;");d.text.indexOf(g)===-1&&d.text.push(g);var h=f.type;h=="error"?d.className="ace_error":h=="warning"&&d.className!="ace_error"?d.className="ace_warning":h=="info"&&!d.className&&(d.className="ace_info")}}},this.update=function(a){this.$config=a;var b={className:"",text:[]},c=[],e=a.firstRow,f=a.lastRow,g=this.session.getNextFoldLine(e),h=g?g.start.row:Infinity,i=this.$showFoldWidgets&&this.session.foldWidgets;for(;;){e>h&&(e=g.end.row+1,g=this.session.getNextFoldLine(e,g),h=g?g.start.row:Infinity);if(e>f)break;var j=this.$annotations[e]||b;c.push("<div class='ace_gutter-cell",this.$decorations[e]||"",this.$breakpoints[e]?" ace_breakpoint ":" ",j.className,"' title='",j.text.join("\n"),"' style='height:",a.lineHeight,"px;'>",e+1);if(i){var k=i[e];k==null&&(k=i[e]=this.session.getFoldWidget(e)),k&&c.push("<span class='ace_fold-widget ",k,k=="start"&&e==h&&e<g.end.row?" closed":" open","'></span>")}var l=this.session.getRowLength(e)-1;while(l--)c.push("</div><div class='ace_gutter-cell' style='height:",a.lineHeight,"px'>¦");c.push("</div>"),e++}this.element=d.setInnerHtml(this.element,c.join("")),this.element.style.height=a.minHeight+"px";var m=this.element.offsetWidth;m!==this.gutterWidth&&(this.gutterWidth=m,this._emit("changeGutterWidth",m))},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(a){a?d.addCssClass(this.element,"ace_folding-enabled"):d.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=a},this.getShowFoldWidgets=function(){return this.$showFoldWidgets}})).call(g.prototype),b.Gutter=g}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(a,b,c){"use strict";var d=a("../range").Range,e=a("../lib/dom"),f=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_marker-layer",a.appendChild(this.element)};((function(){this.$padding=0,this.setPadding=function(a){this.$padding=a},this.setSession=function(a){this.session=a},this.setMarkers=function(a){this.markers=a},this.update=function(a){var a=a||this.config;if(!a)return;this.config=a;var b=[];for(var c in this.markers){var d=this.markers[c],f=d.range.clipRows(a.firstRow,a.lastRow);if(f.isEmpty())continue;f=f.toScreenRange(this.session);if(d.renderer){var g=this.$getTop(f.start.row,a),h=Math.round(this.$padding+f.start.column*a.characterWidth);d.renderer(b,f,h,g,a)}else f.isMultiLine()?d.type=="text"?this.drawTextMarker(b,f,d.clazz,a):this.drawMultiLineMarker(b,f,d.clazz,a,d.type):this.drawSingleLineMarker(b,f,d.clazz,a,null,d.type)}this.element=e.setInnerHtml(this.element,b.join(""))},this.$getTop=function(a,b){return(a-b.firstRowScreen)*b.lineHeight},this.drawTextMarker=function(a,b,c,e){var f=b.start.row,g=new d(f,b.start.column,f,this.session.getScreenLastRowColumn(f));this.drawSingleLineMarker(a,g,c,e,1,"text"),f=b.end.row,g=new d(f,0,f,b.end.column),this.drawSingleLineMarker(a,g,c,e,0,"text");for(f=b.start.row+1;f<b.end.row;f++)g.start.row=f,g.end.row=f,g.end.column=this.session.getScreenLastRowColumn(f),this.drawSingleLineMarker(a,g,c,e,1,"text")},this.drawMultiLineMarker=function(a,b,c,d,e){var f=e==="background"?0:this.$padding,g=d.width+2*this.$padding-f,h=d.lineHeight,i=Math.round(g-b.start.column*d.characterWidth),j=this.$getTop(b.start.row,d),k=Math.round(f+b.start.column*d.characterWidth);a.push("<div class='",c,"' style='","height:",h,"px;","width:",i,"px;","top:",j,"px;","left:",k,"px;'></div>"),j=this.$getTop(b.end.row,d),i=Math.round(b.end.column*d.characterWidth),a.push("<div class='",c,"' style='","height:",h,"px;","width:",i,"px;","top:",j,"px;","left:",f,"px;'></div>"),h=(b.end.row-b.start.row-1)*d.lineHeight;if(h<0)return;j=this.$getTop(b.start.row+1,d),a.push("<div class='",c,"' style='","height:",h,"px;","width:",g,"px;","top:",j,"px;","left:",f,"px;'></div>")},this.drawSingleLineMarker=function(a,b,c,d,e,f){var g=f==="background"?0:this.$padding,h=d.lineHeight;if(f==="background")var i=d.width;else i=Math.round((b.end.column+(e||0)-b.start.column)*d.characterWidth);var j=this.$getTop(b.start.row,d),k=Math.round(g+b.start.column*d.characterWidth);a.push("<div class='",c,"' style='","height:",h,"px;","width:",i,"px;","top:",j,"px;","left:",k,"px;'></div>")}})).call(f.prototype),b.Marker=f}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../lib/dom"),f=a("../lib/lang"),g=a("../lib/useragent"),h=a("../lib/event_emitter").EventEmitter,i=function(a){this.element=e.createElement("div"),this.element.className="ace_layer ace_text-layer",a.appendChild(this.element),this.$characterSize=this.$measureSizes()||{width:0,height:0},this.$pollSizeChanges()};((function(){d.implement(this,h),this.EOF_CHAR="¶",this.EOL_CHAR="¬",this.TAB_CHAR="→",this.SPACE_CHAR="·",this.$padding=0,this.setPadding=function(a){this.$padding=a,this.element.style.padding="0 "+a+"px"},this.getLineHeight=function(){return this.$characterSize.height||1},this.getCharacterWidth=function(){return this.$characterSize.width||1},this.checkForSizeChanges=function(){var a=this.$measureSizes();a&&(this.$characterSize.width!==a.width||this.$characterSize.height!==a.height)&&(this.$characterSize=a,this._emit("changeCharacterSize",{data:a}))},this.$pollSizeChanges=function(){var a=this;this.$pollSizeChangesTimer=setInterval(function(){a.checkForSizeChanges()},500)},this.$fontStyles={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1},this.$measureSizes=g.isIE||g.isOldGecko?function(){var a=1e3;if(!this.$measureNode){var b=this.$measureNode=e.createElement("div"),c=b.style;c.width=c.height="auto",c.left=c.top=-a*40+"px",c.visibility="hidden",c.position="fixed",c.overflow="visible",c.whiteSpace="nowrap",b.innerHTML=f.stringRepeat("Xy",a);if(this.element.ownerDocument.body)this.element.ownerDocument.body.appendChild(b);else{var d=this.element.parentNode;while(!e.hasCssClass(d,"ace_editor"))d=d.parentNode;d.appendChild(b)}}if(!this.element.offsetWidth)return null;var c=this.$measureNode.style,g=e.computedStyle(this.element);for(var h in this.$fontStyles)c[h]=g[h];var i={height:this.$measureNode.offsetHeight,width:this.$measureNode.offsetWidth/(a*2)};return i.width==0||i.height==0?null:i}:function(){if(!this.$measureNode){var a=this.$measureNode=e.createElement("div"),b=a.style;b.width=b.height="auto",b.left=b.top="-100px",b.visibility="hidden",b.position="fixed",b.overflow="visible",b.whiteSpace="nowrap",a.innerHTML="X";var c=this.element.parentNode;while(c&&!e.hasCssClass(c,"ace_editor"))c=c.parentNode;if(!c)return this.$measureNode=null;c.appendChild(a)}var d=this.$measureNode.getBoundingClientRect(),f={height:d.height,width:d.width};return f.width==0||f.height==0?null:f},this.setSession=function(a){this.session=a},this.showInvisibles=!1,this.setShowInvisibles=function(a){return this.showInvisibles==a?!1:(this.showInvisibles=a,!0)},this.$tabStrings=[],this.$computeTabString=function(){var a=this.session.getTabSize(),b=this.$tabStrings=[0];for(var c=1;c<a+1;c++)this.showInvisibles?b.push("<span class='ace_invisible'>"+this.TAB_CHAR+(new Array(c)).join("&#160;")+"</span>"):b.push((new Array(c+1)).join("&#160;"))},this.updateLines=function(a,b,c){this.$computeTabString(),(this.config.lastRow!=a.lastRow||this.config.firstRow!=a.firstRow)&&this.scrollLines(a),this.config=a;var d=Math.max(b,a.firstRow),f=Math.min(c,a.lastRow),g=this.element.childNodes,h=0;for(var i=a.firstRow;i<d;i++){var j=this.session.getFoldLine(i);if(j){if(j.containsRow(d)){d=j.start.row;break}i=j.end.row}h++}for(var k=d;k<=f;k++){var l=g[h++];if(!l)continue;var m=[],n=this.session.getTokens(k,k);this.$renderLine(m,k,n[0].tokens,!this.$useLineGroups()),l=e.setInnerHtml(l,m.join("")),k=this.session.getRowFoldEnd(k)}},this.scrollLines=function(a){this.$computeTabString();var b=this.config;this.config=a;if(!b||b.lastRow<a.firstRow)return this.update(a);if(a.lastRow<b.firstRow)return this.update(a);var c=this.element;if(b.firstRow<a.firstRow)for(var d=this.session.getFoldedRowCount(b.firstRow,a.firstRow-1);d>0;d--)c.removeChild(c.firstChild);if(b.lastRow>a.lastRow)for(var d=this.session.getFoldedRowCount(a.lastRow+1,b.lastRow);d>0;d--)c.removeChild(c.lastChild);if(a.firstRow<b.firstRow){var e=this.$renderLinesFragment(a,a.firstRow,b.firstRow-1);c.firstChild?c.insertBefore(e,c.firstChild):c.appendChild(e)}if(a.lastRow>b.lastRow){var e=this.$renderLinesFragment(a,b.lastRow+1,a.lastRow);c.appendChild(e)}},this.$renderLinesFragment=function(a,b,c){var d=this.element.ownerDocument.createDocumentFragment(),f=b,g=this.session.getNextFoldLine(f),h=g?g.start.row:Infinity;for(;;){f>h&&(f=g.end.row+1,g=this.session.getNextFoldLine(f,g),h=g?g.start.row:Infinity);if(f>c)break;var i=e.createElement("div"),j=[],k=this.session.getTokens(f,f);k.length==1&&this.$renderLine(j,f,k[0].tokens,!1),i.innerHTML=j.join("");if(this.$useLineGroups())i.className="ace_line_group",d.appendChild(i);else{var l=i.childNodes;while(l.length)d.appendChild(l[0])}f++}return d},this.update=function(a){this.$computeTabString(),this.config=a;var b=[],c=a.firstRow,d=a.lastRow,f=c,g=this.session.getNextFoldLine(f),h=g?g.start.row:Infinity;for(;;){f>h&&(f=g.end.row+1,g=this.session.getNextFoldLine(f,g),h=g?g.start.row:Infinity);if(f>d)break;this.$useLineGroups()&&b.push("<div class='ace_line_group'>");var i=this.session.getTokens(f,f);i.length==1&&this.$renderLine(b,f,i[0].tokens,!1),this.$useLineGroups()&&b.push("</div>"),f++}this.element=e.setInnerHtml(this.element,b.join(""))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(a,b,c,d){var e=this,f=/\t|&|<|( +)|([\v\f \u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000])|[\u1100-\u115F]|[\u11A3-\u11A7]|[\u11FA-\u11FF]|[\u2329-\u232A]|[\u2E80-\u2E99]|[\u2E9B-\u2EF3]|[\u2F00-\u2FD5]|[\u2FF0-\u2FFB]|[\u3000-\u303E]|[\u3041-\u3096]|[\u3099-\u30FF]|[\u3105-\u312D]|[\u3131-\u318E]|[\u3190-\u31BA]|[\u31C0-\u31E3]|[\u31F0-\u321E]|[\u3220-\u3247]|[\u3250-\u32FE]|[\u3300-\u4DBF]|[\u4E00-\uA48C]|[\uA490-\uA4C6]|[\uA960-\uA97C]|[\uAC00-\uD7A3]|[\uD7B0-\uD7C6]|[\uD7CB-\uD7FB]|[\uF900-\uFAFF]|[\uFE10-\uFE19]|[\uFE30-\uFE52]|[\uFE54-\uFE66]|[\uFE68-\uFE6B]|[\uFF01-\uFF60]|[\uFFE0-\uFFE6]/g,h=function(a,c,d,f,h){if(a.charCodeAt(0)==32)return(new Array(a.length+1)).join("&#160;");if(a=="\t"){var i=e.session.getScreenTabSize(b+f);return b+=i-1,e.$tabStrings[i]}if(a=="&")return g.isOldGecko?"&":"&amp;";if(a=="<")return"&lt;";if(a=="　"){var j=e.showInvisibles?"ace_cjk ace_invisible":"ace_cjk",k=e.showInvisibles?e.SPACE_CHAR:"";return b+=1,"<span class='"+j+"' style='width:"+e.config.characterWidth*2+"px'>"+k+"</span>"}if(a.match(/[\v\f \u00a0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]/)){if(e.showInvisibles){var k=(new Array(a.length+1)).join(e.SPACE_CHAR);return"<span class='ace_invisible'>"+k+"</span>"}return"&#160;"}return b+=1,"<span class='ace_cjk' style='width:"+e.config.characterWidth*2+"px'>"+a+"</span>"},i=d.replace(f,h);if(!this.$textToken[c.type]){var j="ace_"+c.type.replace(/\./g," ace_"),k="";c.type=="fold"&&(k=" style='width:"+c.value.length*this.config.characterWidth+"px;' "),a.push("<span class='",j,"'",k,">",i,"</span>")}else a.push(i);return b+d.length},this.$renderLineCore=function(a,b,c,d,e){var f=0,g=0,h,i=0,j=this;!d||d.length==0?h=Number.MAX_VALUE:h=d[0],e||a.push("<div class='ace_line' style='height:",this.config.lineHeight,"px","'>");for(var k=0;k<c.length;k++){var l=c[k],m=l.value;if(f+m.length<h)i=j.$renderToken(a,i,l,m),f+=m.length;else{while(f+m.length>=h)i=j.$renderToken(a,i,l,m.substring(0,h-f)),m=m.substring(h-f),f=h,e||a.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px","'>"),g++,i=0,h=d[g]||Number.MAX_VALUE;m.length!=0&&(f+=m.length,i=j.$renderToken(a,i,l,m))}}this.showInvisibles&&(b!==this.session.getLength()-1?a.push("<span class='ace_invisible'>"+this.EOL_CHAR+"</span>"):a.push("<span class='ace_invisible'>"+this.EOF_CHAR+"</span>")),e||a.push("</div>")},this.$renderLine=function(a,b,c,d){if(!this.session.isRowFolded(b)){var e=this.session.getRowSplitData(b);this.$renderLineCore(a,b,c,e,d)}else this.$renderFoldLine(a,b,c,d)},this.$renderFoldLine=function(a,b,c,d){function e(a,b,c){var d=0,e=0;while(e+a[d].value.length<b){e+=a[d].value.length,d++;if(d==a.length)return}if(e!=b){var f=a[d].value.substring(b-e);f.length>c-b&&(f=f.substring(0,c-b)),h.push({type:a[d].type,value:f}),e=b+f.length,d+=1}while(e<c){var f=a[d].value;f.length+e>c&&(f=f.substring(0,c-e)),h.push({type:a[d].type,value:f}),e+=f.length,d+=1}}var f=this.session,g=f.getFoldLine(b),h=[];g.walk(function(a,b,d,f,g){a?h.push({type:"fold",value:a}):(g&&(c=this.session.getTokens(b,b)[0].tokens),c.length!=0&&e(c,f,d))}.bind(this),g.end.row,this.session.getLine(g.end.row).length);var i=this.session.$useWrapMode?this.session.$wrapData[b]:null;this.$renderLineCore(a,b,h,i,d)},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}})).call(i.prototype),b.Text=i}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(a,b,c){"use strict";var d=a("../lib/dom"),e=function(a){this.element=d.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.cursors=[],this.cursor=this.addCursor()};((function(){this.$padding=0,this.setPadding=function(a){this.$padding=a},this.setSession=function(a){this.session=a},this.addCursor=function(){var a=d.createElement("div"),b="ace_cursor";return this.isVisible||(b+=" ace_hidden"),this.overwrite&&(b+=" ace_overwrite"),a.className=b,this.element.appendChild(a),this.cursors.push(a),a},this.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},this.hideCursor=function(){this.isVisible=!1;for(var a=this.cursors.length;a--;)d.addCssClass(this.cursors[a],"ace_hidden");clearInterval(this.blinkId)},this.showCursor=function(){this.isVisible=!0;for(var a=this.cursors.length;a--;)d.removeCssClass(this.cursors[a],"ace_hidden");this.element.style.visibility="",this.restartTimer()},this.restartTimer=function(){clearInterval(this.blinkId);if(!this.isVisible)return;var a=this.element;this.blinkId=setInterval(function(){a.style.visibility="hidden",setTimeout(function(){a.style.visibility="visible"},400)},1e3)},this.getPixelPosition=function(a,b){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var c=this.session.documentToScreenPosition(a),d=Math.round(this.$padding+c.column*this.config.characterWidth),e=(c.row-(b?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:d,top:e}},this.update=function(a){this.config=a;if(this.session.selectionMarkerCount>1){var b=this.session.$selectionMarkers,c=0,d,e=0;for(var c=b.length;c--;){d=b[c];var f=this.getPixelPosition(d.cursor,!0),g=(this.cursors[e++]||this.addCursor()).style;g.left=f.left+"px",g.top=f.top+"px",g.width=a.characterWidth+"px",g.height=a.lineHeight+"px"}if(e>1)while(this.cursors.length>e)this.removeCursor()}else{var f=this.getPixelPosition(null,!0),g=this.cursor.style;g.left=f.left+"px",g.top=f.top+"px",g.width=a.characterWidth+"px",g.height=a.lineHeight+"px";while(this.cursors.length>1)this.removeCursor()}var h=this.session.getOverwrite();h!=this.overwrite&&this.$setOverite(h),this.restartTimer()},this.$setOverite=function(a){this.overwrite=a;for(var b=this.cursors.length;b--;)a?d.addCssClass(this.cursors[b],"ace_overwrite"):d.removeCssClass(this.cursors[b],"ace_overwrite")},this.destroy=function(){clearInterval(this.blinkId)}})).call(e.prototype),b.Cursor=e}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(a,b,c){"use strict";var d=a("./lib/oop"),e=a("./lib/dom"),f=a("./lib/event"),g=a("./lib/event_emitter").EventEmitter,h=function(a){this.element=e.createElement("div"),this.element.className="ace_sb",this.inner=e.createElement("div"),this.element.appendChild(this.inner),a.appendChild(this.element),this.width=e.scrollbarWidth(a.ownerDocument),this.element.style.width=(this.width||15)+5+"px",f.addListener(this.element,"scroll",this.onScroll.bind(this))};((function(){d.implement(this,g),this.onScroll=function(){this._emit("scroll",{data:this.element.scrollTop})},this.getWidth=function(){return this.width},this.setHeight=function(a){this.element.style.height=a+"px"},this.setInnerHeight=function(a){this.inner.style.height=a+"px"},this.setScrollTop=function(a){this.element.scrollTop=a}})).call(h.prototype),b.ScrollBar=h}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(a,b,c){"use strict";var d=a("./lib/event"),e=function(a,b){this.onRender=a,this.pending=!1,this.changes=0,this.window=b||window};((function(){this.schedule=function(a){this.changes=this.changes|a;if(!this.pending){this.pending=!0;var b=this;d.nextTick(function(){b.pending=!1;var a;while(a=b.changes)b.changes=0,b.onRender(a)},this.window)}}})).call(e.prototype),b.RenderLoop=e}),define("text!ace/css/editor.css",[],"@import url(//fonts.googleapis.com/css?family=Droid+Sans+Mono);\n\n.ace_editor {\n    position: absolute;\n    overflow: hidden;\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Droid Sans Mono', 'Consolas', monospace;\n    font-size: 12px;\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow-x: scroll;\n    overflow-y: hidden;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    cursor: text;\n}\n\n.ace_composition {\n    position: absolute;\n    background: #555;\n    color: #DDD;\n    z-index: 4;\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    height: 100%;\n    width: auto;\n    cursor: default;\n    z-index: 1000;\n}\n\n.ace_gutter.horscroll {\n    box-shadow: 0px 0px 20px rgba(0,0,0,0.4);\n}\n\n.ace_gutter-cell {\n    padding-left: 19px;\n    padding-right: 6px;\n}\n\n.ace_gutter-cell.ace_error {\n    background-image: url(\"data:image/gif,GIF89a%10%00%10%00%D5%00%00%F5or%F5%87%88%F5nr%F4ns%EBmq%F5z%7F%DDJT%DEKS%DFOW%F1Yc%F2ah%CE(7%CE)8%D18E%DD%40M%F2KZ%EBU%60%F4%60m%DCir%C8%16(%C8%19*%CE%255%F1%3FR%F1%3FS%E6%AB%B5%CA%5DI%CEn%5E%F7%A2%9A%C9G%3E%E0a%5B%F7%89%85%F5yy%F6%82%80%ED%82%80%FF%BF%BF%E3%C4%C4%FF%FF%FF%FF%FF%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%25%00%2C%00%00%00%00%10%00%10%00%00%06p%C0%92pH%2C%1A%8F%C8%D2H%93%E1d4%23%E4%88%D3%09mB%1DN%B48%F5%90%40%60%92G%5B%94%20%3E%22%D2%87%24%FA%20%24%C5%06A%00%20%B1%07%02B%A38%89X.v%17%82%11%13q%10%0Fi%24%0F%8B%10%7BD%12%0Ei%09%92%09%0EpD%18%15%24%0A%9Ci%05%0C%18F%18%0B%07%04%01%04%06%A0H%18%12%0D%14%0D%12%A1I%B3%B4%B5IA%00%3B\");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning {\n    background-image: url(\"data:image/gif,GIF89a%10%00%10%00%D5%00%00%FF%DBr%FF%DE%81%FF%E2%8D%FF%E2%8F%FF%E4%96%FF%E3%97%FF%E5%9D%FF%E6%9E%FF%EE%C1%FF%C8Z%FF%CDk%FF%D0s%FF%D4%81%FF%D5%82%FF%D5%83%FF%DC%97%FF%DE%9D%FF%E7%B8%FF%CCl%7BQ%13%80U%15%82W%16%81U%16%89%5B%18%87%5B%18%8C%5E%1A%94d%1D%C5%83-%C9%87%2F%C6%84.%C6%85.%CD%8B2%C9%871%CB%8A3%CD%8B5%DC%98%3F%DF%9BB%E0%9CC%E1%A5U%CB%871%CF%8B5%D1%8D6%DB%97%40%DF%9AB%DD%99B%E3%B0p%E7%CC%AE%FF%FF%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00!%F9%04%01%00%00%2F%00%2C%00%00%00%00%10%00%10%00%00%06a%C0%97pH%2C%1A%8FH%A1%ABTr%25%87%2B%04%82%F4%7C%B9X%91%08%CB%99%1C!%26%13%84*iJ9(%15G%CA%84%14%01%1A%97%0C%03%80%3A%9A%3E%81%84%3E%11%08%B1%8B%20%02%12%0F%18%1A%0F%0A%03'F%1C%04%0B%10%16%18%10%0B%05%1CF%1D-%06%07%9A%9A-%1EG%1B%A0%A1%A0U%A4%A5%A6BA%00%3B\");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info {\n    background-image: url(\"data:image/gif;base64,R0lGODlhEAAQAMQAAAAAAEFBQVJSUl5eXmRkZGtra39/f4WFhYmJiZGRkaampry8vMPDw8zMzNXV1dzc3OTk5Orq6vDw8P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABQALAAAAAAQABAAAAUuICWOZGmeaBml5XGwFCQSBGyXRSAwtqQIiRuiwIM5BoYVbEFIyGCQoeJGrVptIQA7\");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_editor .ace_sb {\n    position: absolute;\n    overflow-x: hidden;\n    overflow-y: scroll;\n    right: 0;\n}\n\n.ace_editor .ace_sb div {\n    position: absolute;\n    width: 1px;\n    left: 0;\n}\n\n.ace_editor .ace_print_margin_layer {\n    z-index: 0;\n    position: absolute;\n    overflow: hidden;\n    margin: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n}\n\n.ace_editor .ace_print_margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_editor textarea {\n    position: fixed;\n    z-index: 0;\n    width: 10px;\n    height: 30px;\n    opacity: 0;\n    background: transparent;\n    appearance: none;\n    -moz-appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    white-space: nowrap;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter .ace_layer {\n    position: relative;\n    min-width: 40px;\n    text-align: right;\n    pointer-events: auto;\n}\n\n.ace_text-layer {\n    color: black;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n}\n\n.ace_cursor.ace_hidden {\n    opacity: 0.2;\n}\n\n.ace_line {\n    white-space: nowrap;\n}\n\n.ace_marker-layer .ace_step {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_active_line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_gutter .ace_gutter_active_line{\n    background-color : #dcdcdc;\n}\n\n.ace_marker-layer .ace_selected_word {\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    \n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image: \n        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),\n        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%3AIDAT8%11c%FC%FF%FF%7F%18%03%1A%60%01%F2%3F%A0%891%80%04%FF%11-%F8%17%9BJ%E2%05%B1ZD%81v%26t%E7%80%F8%A3%82h%A12%1A%20%A3%01%02%0F%01%BA%25%06%00%19%C0%0D%AEF%D5%3ES%00%00%00%00IEND%AEB%60%82\");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    -moz-border-radius: 2px;\n    -webkit-border-radius: 2px;\n    border-radius: 2px;\n    \n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image: \n        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),\n        url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%003IDAT8%11c%FC%FF%FF%7F%3E%03%1A%60%01%F2%3F%A3%891%80%04%FFQ%26%F8w%C0%B43%A1%DB%0C%E2%8F%0A%A2%85%CAh%80%8C%06%08%3C%04%E8%96%18%00%A3S%0D%CD%CF%D8%C1%9D%00%00%00%00IEND%AEB%60%82\");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n}\n\n.ace_dragging .ace_content {\n    cursor: move;\n}\n\n.ace_folding-enabled > .ace_gutter-cell {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n\n    margin: 0 -12px 1px 1px;\n    display: inline-block;\n    height: 14px;\n    width: 11px;\n    vertical-align: text-bottom;\n    \n    background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAe%8A%B1%0D%000%0C%C2%F2%2CK%96%BC%D0%8F9%81%88H%E9%D0%0E%96%C0%10%92%3E%02%80%5E%82%E4%A9*-%EEsw%C8%CC%11%EE%96w%D8%DC%E9*Eh%0C%151(%00%00%00%00IEND%AEB%60%82\");\n    background-repeat: no-repeat;\n    background-position: center 5px;\n\n    border-radius: 3px;\n}\n\n.ace_fold-widget.end {\n    background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAm%C7%C1%09%000%08C%D1%8C%ECE%C8E(%8E%EC%02)%1EZJ%F1%C1'%04%07I%E1%E5%EE%CAL%F5%A2%99%99%22%E2%D6%1FU%B5%FE0%D9x%A7%26Wz5%0E%D5%00%00%00%00IEND%AEB%60%82\");\n}\n\n.ace_fold-widget.closed {\n    background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%03%00%00%00%06%08%06%00%00%00%06%E5%24%0C%00%00%009IDATx%DA5%CA%C1%09%000%08%03%C0%AC*(%3E%04%C1%0D%BA%B1%23%A4Uh%E0%20%81%C0%CC%F8%82%81%AA%A2%AArGfr%88%08%11%11%1C%DD%7D%E0%EE%5B%F6%F6%CB%B8%05Q%2F%E9tai%D9%00%00%00%00IEND%AEB%60%82\");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    -moz-box-shadow:inset 0 1px 1px rgba(255, 255, 255, 0.7);\n    -moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n    -webkit-box-shadow:inset 0 1px 1px rgba(255, 255, 255, 0.7);\n    -webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n    box-shadow:inset 0 1px 1px rgba(255, 255, 255, 0.7);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n    background-position: center 4px;\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    -moz-box-shadow:inset 0 1px 1px rgba(255, 255, 255);\n    -moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n    -webkit-box-shadow:inset 0 1px 1px rgba(255, 255, 255);\n    -webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n    box-shadow:inset 0 1px 1px rgba(255, 255, 255);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n\n.ace_fold-widget.invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n"),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor"],function(a,b,c){function d(a,b,c){return l.$options.wrap=!0,l.$options.needle=b,l.$options.backwards=c==-1,l.find(a)}function e(a,b){return a.row==b.row&&a.column==b.column}function f(a){a.$onAddRange=a.$onAddRange.bind(a),a.$onRemoveRange=a.$onRemoveRange.bind(a),a.$onMultiSelect=a.$onMultiSelect.bind(a),a.$onSingleSelect=a.$onSingleSelect.bind(a),b.onSessionChange.call(a,a),a.on("changeSession",b.onSessionChange.bind(a)),a.on("mousedown",j),a.commands.addCommands(b.commands.defaultCommands)}var g=a("./range_list").RangeList,h=a("./range").Range,i=a("./selection").Selection,j=a("./mouse/multi_select_handler").onMouseDown;b.commands=a("./commands/multi_select_commands");var k=a("./search").Search,l=new k,m=a("./edit_session").EditSession;((function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}})).call(m.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(a){if(!this.inMultiSelectMode&&this.rangeCount==0){var b=this.toOrientedRange();if(!a||!a.isEqual(b))this.rangeList.add(b),this.$onAddRange(b)}if(!a)return;a.cursor||(a.cursor=a.end);var c=this.rangeList.add(a);this.$onAddRange(a),c.length&&this.$onRemoveRange(c),this.rangeCount>0&&!this.inMultiSelectMode&&(this._emit("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session))},this.toSingleRange=function(a){a=a||this.ranges[0];var b=this.rangeList.removeAll();b.length&&this.$onRemoveRange(b),a&&this.fromOrientedRange(a)},this.substractPoint=function(a){var b=this.rangeList.substractPoint(a);if(b)return this.$onRemoveRange(b),b[0]},this.mergeOverlappingRanges=function(){var a=this.rangeList.merge();a.length?this.$onRemoveRange(a):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(a){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(a),this.fromOrientedRange(a),this._emit("addRange",{range:a})},this.$onRemoveRange=function(a){this.rangeCount=this.rangeList.ranges.length;if(this.rangeCount==1&&this.inMultiSelectMode){var b=this.rangeList.ranges.pop();a.push(b),this.rangeCount=0}for(var c=a.length;c--;){var d=this.ranges.indexOf(a[c]);this.ranges.splice(d,1)}this._emit("removeRange",{ranges:a}),this.rangeCount==0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._emit("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),b=b||this.ranges[0],b&&!b.isEqual(this.getRange())&&this.fromOrientedRange(b)},this.$initRangeList=function(){if(this.rangeList)return;this.rangeList=new g,this.ranges=[],this.rangeCount=0},this.getAllRanges=function(){return this.rangeList.ranges.concat()},this.splitIntoLines=function(){if(this.rangeCount>1){var a=this.rangeList.ranges,b=a[a.length-1],c=h.fromPoints(a[0].start,b.end);this.toSingleRange(),this.setSelectionRange(c,b.cursor==b.start)}else{var d=this.session.documentToScreenPosition(this.selectionLead),e=this.session.documentToScreenPosition(this.selectionAnchor),f=this.rectangularRangeBlock(d,e);f.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(a,b,c){var d=[],f=a.column<b.column;if(f)var g=a.column,i=b.column;else var g=b.column,i=a.column;var j=a.row<b.row;if(j)var k=a.row,l=b.row;else var k=b.row,l=a.row;g<0&&(g=0),k<0&&(k=0),k==l&&(c=!0);for(var m=k;m<=l;m++){var n=h.fromPoints(this.session.screenToDocumentPosition(m,g),this.session.screenToDocumentPosition(m,i));if(n.isEmpty()){if(o&&e(n.end,o))break;var o=n.end}n.cursor=f?n.start:n.end,d.push(n)}j&&d.reverse();if(!c){var p=d.length-1;while(d[p].isEmpty()&&p>0)p--;if(p>0){var q=0;while(d[q].isEmpty())q++}for(var r=p;r>=q;r--)d[r].isEmpty()&&d.splice(r,1)}return d}}.call(i.prototype);var n=a("./editor").Editor;((function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(a){a.cursor||(a.cursor=a.end);var b=this.getSelectionStyle();return a.marker=this.session.addMarker(a,"ace_selection",b),this.session.$selectionMarkers.push(a),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,a},this.removeSelectionMarkers=function(a){for(var b=a.length;b--;){var c=a[b];if(!c.marker)continue;this.session.removeMarker(c.marker);var d=this.session.$selectionMarkers.indexOf(c);d!=-1&&this.session.$selectionMarkers.splice(d,1)}this.session.selectionMarkerCount=this.session.$selectionMarkers.length},this.$onAddRange=function(a){this.addSelectionMarker(a.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(a){this.removeSelectionMarkers(a.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(a){if(this.inMultiSelectMode)return;this.inMultiSelectMode=!0,this.setStyle("multiselect"),this.keyBinding.addKeyboardHandler(b.commands.keyboardHandler),this.commands.on("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onSingleSelect=function(a){if(this.session.multiSelect.inVirtualMode)return;this.inMultiSelectMode=!1,this.unsetStyle("multiselect"),this.keyBinding.removeKeyboardHandler(b.commands.keyboardHandler),this.commands.removeEventListener("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelectExec=function(a){var b=a.command,c=a.editor;b.multiSelectAction?b.multiSelectAction=="forEach"?c.forEachSelection(b,a.args):b.multiSelectAction=="single"?(c.exitMultiSelectMode(),b.exec(c,a.args||{})):b.multiSelectAction(c,a.args||{}):(b.exec(c,a.args||{}),c.multiSelect.addRange(c.multiSelect.toOrientedRange()),c.multiSelect.mergeOverlappingRanges()),a.preventDefault()},this.forEachSelection=function(a,b){if(this.inVirtualSelectionMode)return;var c=this.session,d=this.selection,e=d.rangeList,f=d._eventRegistry;d._eventRegistry={};var g=new i(c);this.inVirtualSelectionMode=!0;for(var h=e.ranges.length;h--;)g.fromOrientedRange(e.ranges[h]),this.selection=c.selection=g,a.exec(this,b||{}),g.toOrientedRange(e.ranges[h]);g.detach(),this.selection=c.selection=d,this.inVirtualSelectionMode=!1,d._eventRegistry=f,d.mergeOverlappingRanges(),this.onCursorChange(),this.onSelectionChange()},this.exitMultiSelectMode=function(){if(this.inVirtualSelectionMode)return;this.multiSelect.toSingleRange()},this.getCopyText=function(){var a="";if(this.inMultiSelectMode){var b=this.multiSelect.rangeList.ranges;a=[];for(var c=0;c<b.length;c++)a.push(this.session.getTextRange(b[c]));a=a.join(this.session.getDocument().getNewLineCharacter())}else this.selection.isEmpty()||(a=this.session.getTextRange(this.getSelectionRange()));return a},this.selectMoreLines=function(a,b){var c=this.selection.toOrientedRange(),d=c.cursor==c.end,e=this.session.documentToScreenPosition(c.cursor);this.selection.$desiredColumn&&(e.column=this.selection.$desiredColumn);var f=this.session.screenToDocumentPosition(e.row+a,e.column);if(!c.isEmpty())var g=this.session.documentToScreenPosition(d?c.end:c.start),i=this.session.screenToDocumentPosition(g.row+a,g.column);else var i=f;if(d){var j=h.fromPoints(f,i);j.cursor=j.start}else{var j=h.fromPoints(i,f);j.cursor=j.end}j.desiredColumn=e.column;if(!this.selection.inMultiSelectMode)this.selection.addRange(c);else if(b)var k=c.cursor;this.selection.addRange(j),k&&this.selection.substractPoint(k)},this.transposeSelections=function(a){var b=this.session,c=b.multiSelect,d=c.ranges;for(var e=d.length;e--;){var f=d[e];if(f.isEmpty()){var g=b.getWordRange(f.start.row,f.start.column);f.start.row=g.start.row,f.start.column=g.start.column,f.end.row=g.end.row,f.end.column=g.end.column}}c.mergeOverlappingRanges();var h=[];for(var e=d.length;e--;){var f=d[e];h.unshift(b.getTextRange(f))}a<0?h.unshift(h.pop()):h.push(h.shift());for(var e=d.length;e--;){var f=d[e],g=f.clone();b.replace(f,h[e]),f.start.row=g.start.row,f.start.column=g.start.column}},this.selectMore=function(a,b){var c=this.session,e=c.multiSelect,f=e.toOrientedRange();if(f.isEmpty()){var f=c.getWordRange(f.start.row,f.start.column);f.cursor=f.end,this.multiSelect.addRange(f)}var g=c.getTextRange(f),h=d(c,g,a);h&&(h.cursor=a==-1?h.start:h.end,this.multiSelect.addRange(h)),b&&this.multiSelect.substractPoint(f.cursor)}})).call(n.prototype),b.onSessionChange=function(a){var b=a.session;b.multiSelect||(b.$selectionMarkers=[],b.selection.$initRangeList(),b.multiSelect=b.selection),this.multiSelect=b.multiSelect;var c=a.oldSession;c&&(c.multiSelect&&c.multiSelect.editor==this&&(c.multiSelect.editor=null),b.multiSelect.removeEventListener("addRange",this.$onAddRange),b.multiSelect.removeEventListener("removeRange",this.$onRemoveRange),b.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect),b.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)),b.multiSelect.on("addRange",this.$onAddRange),b.multiSelect.on("removeRange",this.$onRemoveRange),b.multiSelect.on("multiSelect",this.$onMultiSelect),b.multiSelect.on("singleSelect",this.$onSingleSelect),this.inMultiSelectMode!=b.selection.inMultiSelectMode&&(b.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},b.MultiSelect=f}),define("ace/range_list",["require","exports","module"],function(a,b,c){"use strict";var d=function(){this.ranges=[]};((function(){this.comparePoints=function(a,b){return a.row-b.row||a.column-b.column},this.pointIndex=function(a,b){var c=this.ranges;for(var d=b||0;d<c.length;d++){var e=c[d],f=this.comparePoints(a,e.end);if(f>0)continue;return f==0?d:(f=this.comparePoints(a,e.start),f>=0?d:-d-1)}return-d-1},this.add=function(a){var b=this.pointIndex(a.start);b<0&&(b=-b-1);var c=this.pointIndex(a.end,b);return c<0?c=-c-1:c++,this.ranges.splice(b,c-b,a)},this.addList=function(a){var b=[];for(var c=a.length;c--;)b.push.call(b,this.add(a[c]));return b},this.substractPoint=function(a){var b=this.pointIndex(a);if(b>=0)return this.ranges.splice(b,1)},this.merge=function(){var a=[],b=this.ranges,c=b[0],d;for(var e=1;e<b.length;e++){d=c,c=b[e];var f=this.comparePoints(d.end,c.start);if(f<0)continue;if(f==0&&!d.isEmpty()&&!c.isEmpty())continue;this.comparePoints(d.end,c.end)<0&&(d.end.row=c.end.row,d.end.column=c.end.column),b.splice(e,1),a.push(c),c=d,e--}return a},this.contains=function(a,b){return this.pointIndex({row:a,column:b})>=0},this.containsPoint=function(a){return this.pointIndex(a)>=0},this.rangeAtPoint=function(a){var b=this.pointIndex(a);if(b>=0)return this.ranges[b]},this.clipRows=function(a,b){var c=this.ranges;if(c[0].start.row>b||c[c.length-1].start.row<a)return[];var d=this.pointIndex({row:a,column:0});d<0&&(d=-d-1);var e=this.pointIndex({row:b,column:0},d);e<0&&(e=-e-1);var f=[];for(var g=d;g<e;g++)f.push(c[g]);return f},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(a){this.session&&this.detach(),this.session=a,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){if(!this.session)return;this.session.removeListener("change",this.onChange),this.session=null},this.$onChange=function(a){var b=a.data.range;if(a.data.action[0]=="i")var c=b.start,d=b.end;else var d=b.start,c=b.end;var e=c.row,f=d.row,g=f-e,h=-c.column+d.column,i=this.ranges;for(var j=0,k=i.length;j<k;j++){var l=i[j];if(l.end.row<e)continue;if(l.start.row>e)break;l.start.row==e&&l.start.column>=c.column&&(l.start.column+=h,l.start.row+=g),l.end.row==e&&l.end.column>=c.column&&(l.end.column+=h,l.end.row+=g)}if(g!=0&&j<k)for(;j<k;j++){var l=i[j];l.start.row+=g,l.end.row+=g}}})).call(d.prototype),b.RangeList=d}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event"],function(a,b,c){function d(a,b){return a.row==b.row&&a.column==b.column}function e(a){var b=a.domEvent,c=b.altKey,e=b.shiftKey,g=a.getAccelKey(),h=a.getButton();if(!g&&!c){if(a.editor.inMultiSelectMode)if(h==0)a.editor.exitMultiSelectMode();else if(h==2){var i=a.editor,j=i.selection.isEmpty();i.textInput.onContextMenu({x:a.clientX,y:a.clientY},j),f.capture(i.container,function(){},i.textInput.onContextMenuClose),a.stop()}return}var i=a.editor,k=i.selection,l=i.inMultiSelectMode,m=a.getDocumentPosition(),n=k.getCursor(),o=a.inSelection()||k.isEmpty()&&d(m,n),p=a.pageX,q=a.pageY,r=function(a){p=f.getDocumentX(a),q=f.getDocumentY(a)},s=function(){var a=i.renderer.pixelToScreenCoordinates(p,q),b=t.screenToDocumentPosition(a.row,a.column);if(d(v,a)&&d(b,k.selectionLead))return;v=a,i.selection.moveCursorToPosition(b),i.selection.clearSelection(),i.renderer.scrollCursorIntoView(),i.removeSelectionMarkers(x),x=k.rectangularRangeBlock(v,u),x.forEach(i.addSelectionMarker,i),i.updateSelectionMarkers()},t=i.session,u=i.renderer.pixelToScreenCoordinates(p,q),v=u;if(g&&!e&&!c&&h==0){if(!l&&o)return;l||k.addRange(k.toOrientedRange());var w=k.rangeList.rangeAtPoint(m);f.capture(i.container,function(){},function(){var a=k.toOrientedRange();w&&a.isEmpty()&&d(w.cursor,a.cursor)?k.substractPoint(a.cursor):k.addRange(a)})}else if(!e&&c&&h==0){a.stop(),l&&!g?k.toSingleRange():!l&&g&&k.addRange(),k.moveCursorToPosition(m),k.clearSelection();var x=[],y=function(a){clearInterval(A),i.removeSelectionMarkers(x);for(var b=0;b<x.length;b++)k.addRange(x[b])},z=s;f.capture(i.container,r,y);var A=setInterval(function(){z()},20);return a.preventDefault()}}var f=a("../lib/event");b.onMouseDown=e}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(a,b,c){b.defaultCommands=[{name:"addCursorAbove",exec:function(a){a.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(a){a.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(a){a.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(a){a.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(a){a.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(a){a.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(a){a.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(a){a.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(a){a.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Shift-L",mac:"Ctrl-Shift-L"},readonly:!0}],b.multiEditCommands=[{name:"singleSelection",bindKey:"esc",exec:function(a){a.exitMultiSelectMode()},readonly:!0}];var d=a("../keyboard/hash_handler").HashHandler;b.keyboardHandler=new d(b.multiEditCommands)}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/config"],function(a,b,c){"use strict";var d=a("../lib/oop"),e=a("../lib/event_emitter").EventEmitter,f=a("../config"),g=function(b,c,d,e){this.changeListener=this.changeListener.bind(this);if(f.get("packaged"))this.$worker=new Worker(f.get("workerPath")+"/"+c);else{var g=this.$normalizePath(a.nameToUrl("ace/worker/worker",null,"_"));this.$worker=new Worker(g);var h={};for(var i=0;i<b.length;i++){var j=b[i],k=this.$normalizePath(a.nameToUrl(j,null,"_").replace(/.js$/,""));h[j]=k}}this.$worker.postMessage({init:!0,tlns:h,module:d,classname:e}),this.callbackId=1,this.callbacks={};var l=this;this.$worker.onerror=function(a){throw window.console&&console.log&&console.log(a),a},this.$worker.onmessage=function(a){var b=a.data;switch(b.type){case"log":window.console&&console.log&&console.log(b.data);break;case"event":l._emit(b.name,{data:b.data});break;case"call":var c=l.callbacks[b.id];c&&(c(b.data),delete l.callbacks[b.id])}}};((function(){d.implement(this,e),this.$normalizePath=function(a){return a=a.replace(/^[a-z]+:\/\/[^\/]+/,""),a=location.protocol+"//"+location.host+(a.charAt(0)=="/"?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+a.replace(/^[\/]+/,""),a},this.terminate=function(){this._emit("terminate",{}),this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(a,b){this.$worker.postMessage({command:a,args:b})},this.call=function(a,b,c){if(c){var d=this.callbackId++;this.callbacks[d]=c,b.push(d)}this.send(a,b)},this.emit=function(a,b){try{this.$worker.postMessage({event:a,data:{data:b.data}})}catch(c){}},this.attachToDocument=function(a){this.$doc&&this.terminate(),this.$doc=a,this.call("setValue",[a.getValue()]),a.on("change",this.changeListener)},this.changeListener=function(a){a.range={start:a.data.range.start,end:a.data.range.end},this.emit("change",a)}})).call(g.prototype),b.WorkerClient=g}),define("ace/keyboard/state_handler",["require","exports","module"],function(a,b,c){function d(a){this.keymapping=this.$buildKeymappingRegex(a)}"use strict";var e=!1;d.prototype={$buildKeymappingRegex:function(a){for(var b in a)this.$buildBindingsRegex(a[b]);return a},$buildBindingsRegex:function(a){a.forEach(function(a){a.key?a.key=new RegExp("^"+a.key+"$"):Array.isArray(a.regex)?("key"in a||(a.key=new RegExp("^"+a.regex[1]+"$")),a.regex=new RegExp(a.regex.join("")+"$")):a.regex&&(a.regex=new RegExp(a.regex+"$"))})},$composeBuffer:function(a,b,c,d){if(a.state==null||a.buffer==null)a.state="start",a.buffer="";var e=[];b&1&&e.push("ctrl"),b&8&&e.push("command"),b&2&&e.push("option"),b&4&&e.push("shift"),c&&e.push(c);var f=e.join("-"),g=a.buffer+f;b!=2&&(a.buffer=g);var h={bufferToUse:g,symbolicName:f};return d&&(h.keyIdentifier=d.keyIdentifier),h},$find:function(a,b,c,d,f,g){var h={};return this.keymapping[a.state].some(function(i){var j;if(i.key&&!i.key.test(c))return!1;if(i.regex&&!(j=i.regex.exec(b)))return!1;if(i.match&&!i.match(b,d,f,c,g))return!1;if(i.disallowMatches)for(var k=0;k<i.disallowMatches.length;k++)if(!!j[i.disallowMatches[k]])return!1;if(i.exec){h.command=i.exec;if(i.params){var l;h.args={},i.params.forEach(function(a){a.match!=null&&j!=null?l=j[a.match]||a.defaultValue:l=a.defaultValue,a.type==="number"&&(l=parseInt(l)),h.args[a.name]=l})}a.buffer=""}return i.then&&(a.state=i.then,a.buffer=""),h.command==null&&(h.command="null"),e&&console.log("KeyboardStateMapper#find",i),!0}),h.command?h:(a.buffer="",!1)},handleKeyboard:function(a,b,c,d,f){if(b==0||c!=""&&c!=String.fromCharCode(0)){var g=this.$composeBuffer(a,b,c,f),h=g.bufferToUse,i=g.symbolicName,j=g.keyIdentifier;return g=this.$find(a,h,i,b,c,j),e&&console.log("KeyboardStateMapper#match",h,i,g),g}return null}},b.matchCharacterOnly=function(a,b,c,d){return b==0?!0:b==4&&c.length==1?!0:!1},b.StateHandler=d}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(a,b,c){"use strict";var d=a("./range").Range,e=a("./lib/event_emitter").EventEmitter,f=a("./lib/oop"),g=function(a,b,c,d,e,f){var g=this;this.length=b,this.session=a,this.doc=a.getDocument(),this.mainClass=e,this.othersClass=f,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=d,this.$onCursorChange=function(){setTimeout(function(){g.onCursorChange()})},this.$pos=c;var h=a.getUndoManager().$undoStack||a.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),a.selection.on("changeCursor",this.$onCursorChange)};((function(){f.implement(this,e),this.setup=function(){var a=this,b=this.doc,c=this.session,e=this.$pos;this.pos=b.createAnchor(e.row,e.column),this.markerId=c.addMarker(new d(e.row,e.column,e.row,e.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(b){c.removeMarker(a.markerId),a.markerId=c.addMarker(new d(b.value.row,b.value.column,b.value.row,b.value.column+a.length),a.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(c){var d=b.createAnchor(c.row,c.column);a.others.push(d)}),c.setUndoSelect(!1)},this.showOtherMarkers=function(){if(this.othersActive)return;var a=this.session,b=this;this.othersActive=!0,this.others.forEach(function(c){c.markerId=a.addMarker(new d(c.row,c.column,c.row,c.column+b.length),b.othersClass,null,!1),c.on("change",function(e){a.removeMarker(c.markerId),c.markerId=a.addMarker(new d(e.value.row,e.value.column,e.value.row,e.value.column+b.length),b.othersClass,null,!1)})})},this.hideOtherMarkers=function(){if(!this.othersActive)return;this.othersActive=!1;for(var a=0;a<this.others.length;a++)this.session.removeMarker(this.others[a].markerId)},this.onUpdate=function(a){var b=a.data,c=b.range;if(c.start.row!==c.end.row)return;if(c.start.row!==this.pos.row)return;if(this.$updating)return;this.$updating=!0;var e=b.action==="insertText"?c.end.column-c.start.column:c.start.column-c.end.column;if(c.start.column>=this.pos.column&&c.start.column<=this.pos.column+this.length+1){var f=c.start.column-this.pos.column;this.length+=e;if(!this.session.$fromUndo){if(b.action==="insertText")for(var g=this.others.length-1;g>=0;g--){var h=this.others[g],i={row:h.row,column:h.column+f};h.row===c.start.row&&c.start.column<h.column&&(i.column+=e),this.doc.insert(i,b.text)}else if(b.action==="removeText")for(var g=this.others.length-1;g>=0;g--){var h=this.others[g],i={row:h.row,column:h.column+f};h.row===c.start.row&&c.start.column<h.column&&(i.column+=e),this.doc.remove(new d(i.row,i.column,i.row,i.column-e))}c.start.column===this.pos.column&&b.action==="insertText"?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-e);for(var a=0;a<this.others.length;a++){var b=this.others[a],d={row:b.row,column:b.column-e};b.row===c.start.row&&c.start.column<b.column&&(d.column+=e),b.setPosition(d.row,d.column)}}.bind(this),0):c.start.column===this.pos.column&&b.action==="removeText"&&setTimeout(function(){for(var a=0;a<this.others.length;a++){var b=this.others[a];b.row===c.start.row&&c.start.column<b.column&&b.setPosition(b.row,b.column-e)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var g=0;g<this.others.length;g++)this.others[g]._emit("change",{value:this.others[g]})}this.$updating=!1},this.onCursorChange=function(a){if(this.$updating)return;var b=this.session.selection.getCursor();b.row===this.pos.row&&b.column>=this.pos.column&&b.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",a)):(this.hideOtherMarkers(),this._emit("cursorLeave",a))},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var a=0;a<this.others.length;a++)this.others[a].detach();this.session.setUndoSelect(!0)},this.cancel=function(){if(this.$undoStackDepth===-1)throw Error("Canceling placeholders only supported with undo manager attached to session.");var a=this.session.getUndoManager(),b=(a.$undoStack||a.$undostack).length-this.$undoStackDepth;for(var c=0;c<b;c++)a.undo(!0)}})).call(g.prototype),b.PlaceHolder=g}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(a,b,c){"use strict",b.isDark=!1,b.cssClass="ace-tm",b.cssText=".ace-tm .ace_editor {  border: 2px solid rgb(159, 159, 159);}.ace-tm .ace_editor.ace_focus {  border: 2px solid #327fbd;}.ace-tm .ace_gutter {  background: #e8e8e8;  color: #333;}.ace-tm .ace_print_margin {  width: 1px;  background: #e8e8e8;}.ace-tm .ace_fold {    background-color: #6B72E6;}.ace-tm .ace_text-layer {  cursor: text;}.ace-tm .ace_cursor {  border-left: 1px solid black;}.ace-tm .ace_cursor.ace_overwrite {  border-left: 0px;  border-bottom: 1px solid black;}        .ace-tm .ace_line .ace_invisible {  color: rgb(191, 191, 191);}.ace-tm .ace_line .ace_storage,.ace-tm .ace_line .ace_keyword {  color: blue;}.ace-tm .ace_line .ace_constant {  color: rgb(197, 6, 11);}.ace-tm .ace_line .ace_constant.ace_buildin {  color: rgb(88, 72, 246);}.ace-tm .ace_line .ace_constant.ace_language {  color: rgb(88, 92, 246);}.ace-tm .ace_line .ace_constant.ace_library {  color: rgb(6, 150, 14);}.ace-tm .ace_line .ace_invalid {  background-color: rgb(153, 0, 0);  color: white;}.ace-tm .ace_line .ace_support.ace_function {  color: rgb(60, 76, 114);}.ace-tm .ace_line .ace_support.ace_constant {  color: rgb(6, 150, 14);}.ace-tm .ace_line .ace_support.ace_type,.ace-tm .ace_line .ace_support.ace_class {  color: rgb(109, 121, 222);}.ace-tm .ace_line .ace_keyword.ace_operator {  color: rgb(104, 118, 135);}.ace-tm .ace_line .ace_string {  color: rgb(3, 106, 7);}.ace-tm .ace_line .ace_comment {  color: rgb(76, 136, 107);}.ace-tm .ace_line .ace_comment.ace_doc {  color: rgb(0, 102, 255);}.ace-tm .ace_line .ace_comment.ace_doc.ace_tag {  color: rgb(128, 159, 191);}.ace-tm .ace_line .ace_constant.ace_numeric {  color: rgb(0, 0, 205);}.ace-tm .ace_line .ace_variable {  color: rgb(49, 132, 149);}.ace-tm .ace_line .ace_xml_pe {  color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {  color: #0000A2;}.ace-tm .ace_markup.ace_markupine {    text-decoration:underline;}.ace-tm .ace_markup.ace_heading {  color: rgb(12, 7, 255);}.ace-tm .ace_markup.ace_list {  color:rgb(185, 6, 144);}.ace-tm .ace_marker-layer .ace_selection {  background: rgb(181, 213, 255);}.ace-tm .ace_marker-layer .ace_step {  background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {  background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {  margin: -1px 0 0 -1px;  border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active_line {  background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_marker-layer .ace_selected_word {  background: rgb(250, 250, 255);  border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_meta.ace_tag {  color:rgb(28, 2, 255);}.ace-tm .ace_string.ace_regex {  color: rgb(255, 0, 0)}";var d=a("../lib/dom");d.importCssString(b.cssText,b.cssClass)}),function(){window.require(["ace/ace"],function(a){window.ace||(window.ace={});for(var b in a)a.hasOwnProperty(b)&&(ace[b]=a[b])})}(),define("../support/ace/build/src/ace",function(){}),define("debug/Breakpoint",["require","exports","module"],function(a,b,c){"use strict";var d=c.exports=function(a,b,c,d){this.source=a,this.line=b,this.column=c||0,this.enabled=!0,this.condition="",this.ignoreCount=0,d?(this.$dbg=d,this.state="connected",this.$listen()):this.state="initialized"};((function(){this.attach=function(a,b){var c=this;if(this.state!=="initialized")throw new Error("Already attached");this.$dbg=a,this.state="connecting",this.$listen(),a.setbreakpoint("script",c.source,c.line,c.column,c.enabled,c.condition,c.ignoreCount,function(a){c.state="connected",c.$id=a.breakpoint,c.line=a.line,b(c)})},this.$listen=function(){var a=this;this.$onbreak=function(b){if(a.state!=="connected")return},this.$dbg.on("break",this.$onbreak)},this.clear=function(a){if(this.state!=="connected")throw new Error("Not connected!");var b=this;this.$dbg.clearbreakpoint(this.$id,function(){this.$id=null,this.$dbg=null,this.state="initialized",a&&a(b)})},this.setEnabled=function(a){this.enabled=a},this.setCondition=function(a){this.condition=a},this.setIgnoreCount=function(a){this.ignoreCount=a},this.flush=function(a){if(this.state!=="connected")throw new Error("Not connected");this.$dbg.changeBreakpoint(this.$id,this.enabled,this.condition,this.ignoreCount,a)},this.destroy=function(){dbg.removeListener("break",this.$onbreak)}})).call(d.prototype),d.fromJson=function(a,b){if(a.type!="scriptName")throw new Error("unsupported breakpoint type: "+a.type);var c=new d(a.script_name,a.line,a.column,b);return c.condition=a.condition||"",c.ignoreCount=a.ignoreCount||0,c.enabled=a.active,c.$id=a.number,c}}),define("debug/util",["require","exports","module"],function(a,b,c){"use strict",b.inherits=function(){var a=function(){};return function(b,c){a.prototype=c.prototype,b.super_=c.prototype,b.prototype=new a,b.prototype.constructor=b}}(),b.mixin=function(a,b){for(var c in b)a[c]=b[c]},b.implement=function(a,c){b.mixin(a,c)};var d={};d._emit=d.emit=d._dispatchEvent=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(!c||!c.length)return;var b=b||{};b.type=a;for(var d=0,e=c.length;d<e;d++)c[d](b)},d.on=d.addEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(!c)var c=this._eventRegistry[a]=[];c.indexOf(b)==-1&&c.push(b)},d.removeListener=d.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(!c)return;var d=c.indexOf(b);d!==-1&&c.splice(d,1)},d.removeAllListeners=function(a){this._eventRegistry&&(this._eventRegistry[a]=[])},b.EventEmitter=d}),define("debug/ChromeDebugMessageStream",["require","exports","module","./util"],function(a,b,c){"use strict";var d=a("./util"),e=d.EventEmitter,f=c.exports=function(a){this.$socket=a};((function(){d.implement(this,e),this.$received="",this.connect=function(){var a=this.$socket,b=this;a.on("connect",function(){b.$onconnect()}),a.on("data",function(a){b.$onhandshake(a)}),a.connect()},this.sendRequest=function(a){this.$socket.send(a.stringify())},this.$onconnect=function(){this.$socket.send(this.MSG_HANDSHAKE)},this.$onhandshake=function(a){this.$received+=a;if(this.$received.length<this.MSG_HANDSHAKE.length)return;if(this.$received.indexOf(this.MSG_HANDSHAKE)!==0)return this.$socket.removeAllListeners("data"),this.$onerror();this.$received=this.$received.substring(this.MSG_HANDSHAKE.length),this.$socket.removeAllListeners("data"),this.$reader=new MessageReader(this.$socket,this.$onMessage.bind(this)),this.emit("connect")},this.$onMessage=function(a){var b=this;setTimeout(function(){var c=new DevToolsMessage.fromString(a);b.emit("message",{data:c})},0)},this.$onerror=function(){this.emit("error")},this.MSG_HANDSHAKE="ChromeDevToolsHandshake\r\n"})).call(f.prototype)}),define("debug/WSChromeDebugMessageStream",["require","exports","module","./util"],function(a,b,c){"use strict";var d=a("./util"),e=d.EventEmitter,f=c.exports=function(a){this.$socket=a,this.$attached=!1};((function(){d.implement(this,e),this.$received="",this.connect=function(){if(this.$attached)return;var a=this;this.$socket.on("message",function(b){var c;try{c=JSON.parse(data)}catch(b){return _self.$onerror()}if(c.type=="chrome-debug-ready")a._dispatchEvent("connect");else{var d=new DevToolsMessage.fromString(b.body);a._dispatchEvent("message",{data:d})}})},this.sendRequest=function(a){var b={command:"debugChrome",message:a.stringify()};this.$socket.send(JSON.stringify(a))},this.$onerror=function(){this.$dispatchEvent("error")}})).call(f.prototype)}),define("debug/DevToolsMessage",["require","exports","module"],function(a,b,c){"use strict";var d=c.exports=function(a,b){this.$headers={},this.$content="",a&&(this.$headers=a),b&&this.setContent(b)};((function(){this.setContent=function(a){this.$content=a.toString()},this.getContent=function(){return this.$content},this.setHeader=function(a,b){this.$headers[a]=b},this.parse=function(a){var b=this.$headers={},c=a.split("\r\n\r\n"),d=c[0];this.$content=c[1];var e=/([\w\-\d]+):([\w\-\d]*)(\r\n|$)/g;return d.replace(e,function(a,c,d){b[c]=d}),this},this.stringify=function(){var a=this.getHeaders(),b=[];for(var c in a)b.push(c,":",a[c],"\r\n");return this.$content&&b.push("\r\n",this.$content),b.join("")},this.getHeaders=function(){return this.$headers["Content-Length"]=this.$content.length,this.$headers.Tool=this.$headers.Tool||"DevToolsService",this.$headers}})).call(d.prototype),d.fromString=function(a){return(new d).parse(a)}}),define("debug/V8DebuggerService",["require","exports","module","./util","./DevToolsMessage"],function(a,b,c){"use strict";var d=a("./util"),e=d.EventEmitter,f=a("./DevToolsMessage"),g=c.exports=function(a){this.$msgStream=a,this.$pending={};var b=this;this.$msgStream.addEventListener("message",function(a){var c=a.data;if(c.getHeaders().Tool!=="V8Debugger")return;var d=JSON.parse(c.getContent()),e=d.command,f=b.$pending[e];f&&f.length&&f.shift()(d.data);var g=e,h=c.getHeaders().Destination;h&&(g+="_"+h),b.emit(g,{data:d.data})})};((function(){d.implement(this,e),this.attach=function(a,b){this.$send(a,"attach",null,b)},this.detach=function(a,b){this.$send(a,"detach",null,b)},this.evaluateJavaScript=function(a,b){this.$send(a,"evaluate_javascript",'"'+b+'"',null)},this.debuggerCommand=function(a,b){this.$send(a,"debugger_command",b);var c=this;setTimeout(function(){c.$send(a,"evaluate_javascript",'"javascript:void(0);"',null)},100)},this.$send=function(a,b,c,d){var e={Tool:"V8Debugger",Destination:a},g=['{"command":"',b,'"'];c&&g.push(',"data":',c),g.push("}");var h=new f(e,g.join(""));this.$msgStream.sendRequest(h),d&&(this.$pending[b]||(this.$pending[b]=[]),this.$pending[b].push(d))}})).call(g.prototype)}),define("debug/DevToolsService",["require","exports","module","./DevToolsMessage"],function(a,b,c){"use strict";var d=a("./DevToolsMessage"),e=c.exports=function(a){this.$msgStream=a,this.$pending=[];var b=this;this.$msgStream.on("message",function(a){var c=a.data;if(c.getHeaders().Tool!=="DevToolsService")return;b.$pending.length&&b.$pending.shift()(JSON.parse(c.getContent()).data)})};((function(){this.ping=function(a){this.$send("ping",a)},this.getVersion=function(a){this.$send("version",a)},this.listTabs=function(a){this.$send("list_tabs",a)},this.$send=function(a,b){var c=new d(null,'{"command":"'+a+'"}');this.$msgStream.sendRequest(c),this.$pending.push(b)}})).call(e.prototype)}),define("debug/V8Message",["require","exports","module","./util"],function(a,b,c){"use strict";var d=a("./util"),e=c.exports=function(a){this.seq=e.$seq++,this.type=a};((function(){this.$msgKeys=["seq","type","command","arguments","request_seq","body","running","success","message","event"];var a=this.$msgKeys.length;this.parse=function(a){var b=JSON.parse(a);return d.mixin(this,b),this},this.stringify=function(){var b={};for(var c=0;c<a;c++){var d=this.$msgKeys[c];typeof this[d]!="undefined"&&(b[d]=this[d])}return JSON.stringify(b)}})).call(e.prototype),e.$seq=1,e.fromString=function(a){return(new e).parse(a)},e.fromObject=function(a){var b=new e;return d.mixin(b,a),b}}),define("debug/V8Debugger",["require","exports","module","./util","./V8Message"],function(a,b,c){"use strict";var d=a("./util"),e=d.EventEmitter,f=a("./V8Message"),g=c.exports=function(a,b){this.tabId=a,this.$running=!0,this.$service=b;var c=this.$pending={},d=this;this.$service.addEventListener("debugger_command_"+a,function(a){var b=f.fromObject(a.data),e=b.request_seq;if(c[e])c[e](b.body,b.refs||null,!b.success&&{message:b.message}||null),delete c[e];else if(b.event)if(b.event=="break"){var g=JSON.stringify(b.body);this.lastBreak!=g&&(this.lastBreak=g,d.emit(b.event,{data:b.body}))}else d.emit(b.event,{data:b.body});d.$updateRunning(b)})};((function(){d.implement(this,e),this.$seq=0,this.$updateRunning=function(a){if(a.event=="scriptCollected")return;var b=!0;a.type=="response"?b=a.running:a.type=="event"&&(a.event=="break"||a.event=="exception")&&(b=!1),b!==this.$running&&(this.$running=b,this.emit("changeRunning",{data:b}))},this.isRunning=function(){return this.$running},this.continueScript=function(a,b,c){var d=new f("request");d.command="continue",a&&(d.arguments={stepcount:b||1,stepaction:a}),this.$send(d,c)},this.lookup=function(a,b,c){var d=new f("request");d.command="lookup",d.arguments={inlineRefs:!1,handles:a},b&&(d.arguments.includesSource=b),this.$send(d,c)},this.backtrace=function(a,b,c,d,e){var g=new f("request");g.command="backtrace",g.arguments={inlineRefs:!!d},a&&(g.arguments.fromFrame=a),b&&(g.arguments.toFrame=b),typeof c=="boolean"&&(g.arguments.bottom=c),this.$send(g,e)},this.scope=function(a,b,c,d){var e=new f("request");e.command="scope",e.arguments={number:a,inlineRefs:!!c},typeof b=="number"&&(e.arguments.frameNumber=b),this.$send(e,d)},this.version=function(a){var b=new f("request");b.command="version",this.$send(b,a)},this.scripts=function(a,b,c,d){var e=new f("request");e.command="scripts",e.arguments={types:a||g.NORMAL_SCRIPTS,includeSource:!!c},b&&(e.arguments.ids=b),this.$send(e,function(a,b,c){d(a||[],b,c)})},this.evaluate=function(a,b,c,d,e){var g=this,h=new f("request");h.command="evaluate",h.arguments={expression:a},b&&(h.arguments.frame=b),c&&(h.arguments.global=c),d&&(h.arguments.disable_break=d),this.backtrace(null,null,!1,!0,function(a){var b={};for(var c=0,d=a.frames,f=d[c];c<d.length;f=d[++c])for(var i=0,j=f.locals[i];i<f.locals.length;j=f.locals[++i])b[j.name]||(b[j.name]=j.value.ref);h.arguments.additional_context=[];for(var k in b){if(!b.hasOwnProperty(k))continue;h.arguments.additional_context.push({name:k,handle:b[k]})}g.$send(h,e)})},this.setbreakpoint=function(a,b,c,d,e,g,h,i){var j=new f("request");j.command="setbreakpoint",j.arguments={type:a,target:b,line:c,enabled:e===undefined?e:!0},d&&(j.column=d),g&&(j.condition=g),h&&(j.ignoreCount=h),this.$send(j,i)},this.changebreakpoint=function(a,b,c,d,e){var g=new f("request");g.command="changebreakpoint",g.arguments={enabled:b!==!0?!1:!0,breakpoint:a},c&&(g.condition=c),d&&(g.ignoreCount=d),this.$send(g,e)},this.clearbreakpoint=function(a,b){var c=new f("request");c.command="clearbreakpoint",c.arguments={breakpoint:a},this.$send(c,b)},this.listbreakpoints=function(a){var b=new f("request");b.command="listbreakpoints",this.$send(b,a)},this.suspend=function(a){var b=new f("request");b.command="suspend",this.$send(b,a)},this.changelive=function(a,b,c,d){var e=new f("request");e.command="changelive",e.arguments={script_id:a,new_source:b,preview_only:!!c},this.$send(e,d)},this.$send=function(a,b){b&&(this.$pending[a.seq]=b),this.$service.debuggerCommand(this.tabId,a.stringify())}})).call(g.prototype),g.NATIVE_SCRIPTS=1,g.EXTENSION_SCRIPTS=2,g.NORMAL_SCRIPTS=4}),define("debug/MessageReader",["require","exports","module"],function(a,b,c){"use strict";var d=c.exports=function(a,b){this.$socket=a,this.$callback=b,this.$received="",this.$cbReceive=this.$onreceive.bind(this),a.on("data",this.$cbReceive)};((function(){this.$onreceive=function(a){this.$received+=a;var b;while(b=this.$checkForWholeMessage())this.$callback(b)},this.$checkForWholeMessage=function(){var a,b,c,d,e=!1,f=this.$received;return(a=f.indexOf("\r\n\r\n"))!=-1&&(b=f.indexOf("Content-Length:"))!=-1&&(c=f.substring(b+15),c=c.substring(0,c.indexOf("\r\n")),d=a+4+parseInt(c,10),d<=f.length?(e=f.substring(0,d),this.$received=f.substring(d),this.$socket.setMinReceiveSize(0)):this.$socket.setMinReceiveSize(d-f.length)),e},this.destroy=function(){this.$socket.removeListener("data",this.$cbReceive),delete this.$socket,delete this.$callback,this.$received=""}})).call(d.prototype)}),define("debug/StandaloneV8DebuggerService",["require","exports","module","./util","./MessageReader","./DevToolsMessage"],function(a,b,c){"use strict";var d=a("./util"),e=d.EventEmitter,f=a("./MessageReader"),g=a("./DevToolsMessage"),h=c.exports=function(a){this.$socket=a,this.$attached=!1};((function(){d.implement(this,e),this.attach=function(a,b){if(this.$attached)throw new Error("already attached!");var c=this;this.$reader=new f(this.$socket,function(a){c.$reader.destroy(),c.emit("connect"),c.$reader=new f(c.$socket,c.$onMessage.bind(c)),b()}),this.$socket.connect()},this.detach=function(a,b){this.$socket.close(),this.$attached=!1,this.$reader&&this.$reader.destroy(),b()},this.$onMessage=function(a){var b=new g.fromString(a),c=b.getContent();if(!c)return;var d;try{d=JSON.parse(c)}catch(e){return}this.emit("debugger_command_0",{data:d})},this.debuggerCommand=function(a,b){this.$send(b)},this.$send=function(a){var b=["Content-Length:",a.length,"\r\n\r\n",a].join("");this.$socket.send(b)}})).call(h.prototype)}),define("debug/WSV8DebuggerService",["require","exports","module","./util"],function(a,b,c){"use strict";var d=a("./util"),e=d.EventEmitter,f=c.exports=function(a){this.$socket=a,this.$state="initialized",this.$onAttach=[]};((function(){d.implement(this,e),this.attach=function(a,b){if(this.$state=="connected")return b(new Error("already attached!"));this.$onAttach.push(b),this.$state=="initialized"&&(this.$socket.send(JSON.stringify({command:"DebugAttachNode"})),this.$onMessageHandler=this.$onMessage.bind(this),this.$socket.on("message",this.$onMessageHandler),this.$state="connecting")},this.$onMessage=function(a){var b;try{b=JSON.parse(a)}catch(c){return}if(b.type=="node-debug-ready"){this.pid=b.pid,this.$state="connected";for(var d=0,e=this.$onAttach.length;d<e;d++)this.$onAttach[d]();this.$onAttach=[]}else b.type=="node-debug"&&this.emit("debugger_command_0",{data:b.body})},this.detach=function(a,b){this.$state="initialized",this.$socket.removeListener("message",this.$onMessageHandler),b()},this.debuggerCommand=function(a,b){this.$socket.send(JSON.stringify({command:"debugNode",pid:this.pid,body:JSON.parse(b)}))}})).call(f.prototype)}),define("treehugger/tree",["require","exports","module"],function(a,b,c){function d(a,b){if(a&&a.sl<=b.line&&a.el>=b.line){if(a.sl<b.line&&a.el>b.line)return!0;if(a.sl==b.line&&a.el>b.line)return a.sc<=b.col;if(a.sl==b.line&&a.el===b.line)return a.sc<=b.col&&a.ec>=b.col;if(a.sl<b.line&&a.el===b.line)return a.ec>=b.col}}function e(){}function f(a,b){this.cons=a;for(var c=0;c<b.length;c++)this[c]=b[c];this.length=b.length}function g(a){for(var b=0;b<a.length;b++)this[b]=a[b];this.length=a.length}function h(a){this.value=a}function i(a){this.value=a}function j(a){this.id=a}function l(a){function c(c){for(var d=0;d<c.length&&b+d<a.length;d++)if(c[d]!=a[b+d])return!1;return d==c.length}function d(){return a[b]>="a"&&a[b]<="z"||a[b]>="A"&&a[b]<="Z"||a[b]==="_"||a[b]>="0"&&a[b]<="9"}function e(){while(b<a.length&&(a[b]===" "||a[b]==="\n"||a[b]==="\r"||a[b]==="\t"))b++}function l(){var c=b;if(a[b]>="0"&&a[b]<="9"){var d=a[b];b++;while(b<a.length&&a[b]>="0"&&a[b]<="9")d+=a[b],b++;return e(),new h(+d,c)}return null}function m(){var d=b;if(c('"')){var f="";b++;while(!c('"')||c('"')&&a[b-1]=="\\")f+=a[b],b++;var g="";for(var h=0;h<f.length;h++)if(f[h]=="\\"){h++;switch(f[h]){case"n":g+="\n";break;case"t":g+="\t";break;default:g+=f[h]}}else g+=f[h];return b++,e(),new i(g,d)}return null}function n(){var c=b;if(d()&&a[b].toLowerCase()===a[b]){var f="";while(d()&&b<a.length)f+=a[b],b++;return e(),new j(f,c)}return null}function o(){var d=b;if(c("[")){var f=[];b++,e();while(!c("]")&&b<a.length)f.push(q()),c(",")&&(b++,e());return b++,e(),new g(f,d)}return null}function p(){var d=b,g="";while(!c("("))g+=a[b],b++;b++;var h=[];while(!c(")")&&b<a.length)h.push(q()),c(",")&&(b++,e());return b++,e(),new f(g,h,d)}function q(){var a=l();return a?a:(a=m(),a?a:(a=o(),a?a:(a=n(),a?a:p())))}var b=0;if(typeof a!="string")return null;if(a.length<200&&!k[a])k[a]=q();else if(!k[a])return q();return k[a]}e.prototype.toPrettyString=function(a){return a=a||"",a+this.toString()},e.prototype.setAnnotation=function(a,b){this.annos=this.annos||{},this.annos[a]=b},e.prototype.getAnnotation=function(a){return this.annos?this.annos[a]:undefined},e.prototype.getPos=function(){return this.annos&&this.annos.pos?this.annos.pos:null},e.prototype.findNode=function(a){var b=this.getPos();return d(b,a)?this:null},f.prototype=new e,f.prototype.toString=function(a){try{var b=this.cons+"(";for(var c=0;c<this.length;c++)b+=this[c].toString()+",";return this.length>0&&(b=b.substring(0,b.length-1)),b+")"}catch(d){console.error("Something went wrong: ",this,d)}},f.prototype.toPrettyString=function(a){a=a||"";try{if(this.length===0)return a+this.cons+"()";if(this.length===1&&(this[0]instanceof i||this[0]instanceof h))return a+this.cons+"("+this[0].toString()+")";var b=a+this.cons+"(\n";for(var c=0;c<this.length;c++)b+=this[c].toPrettyString(a+"    ")+",\n";return b=b.substring(0,b.length-2),b+="\n",b+a+")"}catch(d){console.error("Something went wrong: ",this,d)}},f.prototype.match=function(a,b){b=b||{};if(a instanceof f&&this.cons===a.cons&&this.length===a.length){for(var c=0;c<this.length;c++)if(!this[c].match(a[c],b))return!1;return b}return!1},f.prototype.build=function(a){var b=[];for(var c=0;c<this.length;c++)b.push(this[c].build(a));return new f(this.cons,b)},f.prototype.toJSON=function(){var a=[];for(var b=0;b<this.length;b++)a.push(this[b]);return{cons:this.cons,children:a}},f.prototype.getPos=function(){var a={sl:9999999999,sc:9999999999,el:0,ec:0};if(this.getAnnotation("pos")){var b=this.getAnnotation("pos");a={sl:b.sl,sc:b.sc,el:b.el,ec:b.ec}}for(var c=0;c<this.length;c++){var d=this[c].getPos();if(d){var e=a.sl;a.sl=Math.min(a.sl,d.sl),a.sl!==e?a.sc=d.sc:a.sc=Math.min(a.sc,d.sc);var f=a.el;a.el=Math.max(a.el,d.el),a.el!==f?a.ec=d.ec:a.ec=Math.max(a.ec,d.ec)}}return a},f.prototype.findNode=function(a){var b=this.getPos();if(!d(b,a))return null;for(var c=0;c<this.length;c++){var e=this[c].getPos();if(d(e,a)){var f=this[c].findNode(a);return f?f instanceof i?this:f:this[c]}}},b.cons=function(a,b){return new f(a,b)},g.prototype=new e,g.prototype.toString=function(){var a="[";for(var b=0;b<this.length;b++)a+=this[b].toString()+",";return this.length>0&&(a=a.substring(0,a.length-1)),a+"]"},g.prototype.toPrettyString=function(a){a=a||"";try{if(this.length===0)return a+"[]";var b=a+"[\n";for(var c=0;c<this.length;c++)b+=this[c].toPrettyString(a+"  ")+",\n";return b=b.substring(0,b.length-2),b+="\n",b+a+"]"}catch(d){console.error("Something went wrong: ",this)}},g.prototype.match=function(a,b){b=b||{};if(a instanceof g){if(this.length===a.length){for(var c=0;c<this.length;c++)if(!this[c].match(a[c],b))return!1;return b}return!1}return!1},g.prototype.build=function(a){var b=[];for(var c=0;c<this.length;c++)b.push(this[c].build(a));return new g(b)},g.prototype.getPos=f.prototype.getPos,g.prototype.findNode=f.prototype.findNode,g.prototype.forEach=function(a){for(var b=0;b<this.length;b++)a.call(this[b],this[b],b)},g.prototype.isEmpty=function(){return this.length===0},g.prototype.contains=function(a){for(var b=0;b<this.length;b++)if(a.match(this[b]))return!0;return!1},g.prototype.concat=function(a){var c=[];for(var d=0;d<this.length;d++)c.push(this[d]);for(d=0;d<a.length;d++)c.push(a[d]);return b.list(c)},g.prototype.toJSON=function(){var a=[];for(var b=0;b<this.length;b++)a.push(this[b]);return a},g.prototype.removeDuplicates=function(){var a=[];a:for(var c=0;c<this.length;c++){for(var d=0;d<a.length;d++)if(a[d].match(this[c]))continue a;a.push(this[c])}return new b.list(a)},g.prototype.toArray=g.prototype.toJSON,b.list=function(a){return new g(a)},h.prototype=new e,h.prototype.toString=function(){return""+this.value},h.prototype.match=function(a,b){return b=b||{},a instanceof h?this.value===a.value?b:!1:!1},h.prototype.build=function(a){return this},b.num=function(a){return new h(a)},i.prototype=new e,i.prototype.toString=function(){return'"'+this.value+'"'},i.prototype.match=function(a,b){return b=b||{},a instanceof i?this.value===a.value?b:!1:!1},i.prototype.build=function(a){return this},b.string=function(a){return new i(a)},j.prototype=new e,j.prototype.toString=function(){return this.id},j.prototype.match=function(a,b){return b=b||{},this.id==="_"?b:b[this.id]?b[this.id].match(a):(b[this.id]=a,b)},j.prototype.build=function(a){return a[this.id]},b.placeholder=function(a){return new j(a)};var k={};b.Node=e,b.ConsNode=f,b.ListNode=g,b.NumNode=h,b.StringNode=i,b.PlaceholderNode=j,b.parse=l,b.inRange=d}),define("treehugger/traverse",["require","exports","module","treehugger/tree"],function(a,b,c){function e(a){return a.length===1&&a[0].apply?a[0]:(a=Array.prototype.slice.call(a,0),a[0]&&Object.prototype.toString.call(a[0])==="[object Array]"&&(a=a[0]),function(){var b;for(var c=0;c<a.length;c++)if(typeof a[c]=="string"){var e=d.parse(a[c]),f=e.match(this);if(f){a[c+1]&&a[c+1].apply?(b=a[c+1].call(this,f,this),c++):b=this;if(b)return b}else a[c+1]&&a[c+1].apply&&c++}else{if(!a[c].apply)throw Error("Invalid argument: ",a[c]);b=a[c].call(this);if(b)return b}return!1})}function f(){var a,b=this;for(var c=0;c<arguments.length;c++){a=arguments[c],b=a.call(b);if(!b)return!1}return this}function g(a){var b,c;b=a.call(this);if(b)return b;if(this instanceof d.ConsNode||this instanceof d.ListNode)for(c=0;c<this.length;c++)g.call(this[c],a);return this}var d=a("treehugger/tree");Function.prototype.curry||(Function.prototype.curry=function(){var a=this,b=Array.prototype.slice.call(arguments);return function(){return a.apply(this,b.concat(Array.prototype.slice.call(arguments)))}}),b.traverseAll=function(a){var b,c;a=e(arguments);if(this instanceof d.ConsNode||this instanceof d.ListNode)for(c=0;c<this.length;c++){b=a.call(this[c]);if(!b)return!1}return this},b.attempt=function(a){a=e(arguments);var b=a.call(this);return b?b:this},b.debug=function(a){return console.log(a?this.toPrettyString(""):this.toString()),this},b.traverseTopDown=function(a){return a=e(arguments),g.call(this,a)},b.traverseUp=function(a){a=e(arguments);var b=a.call(this);return b?b:this.parent?this.parent.traverseUp(a):!1},b.collectTopDown=function(a){a=e(arguments);var b=[];return this.traverseTopDown(function(){var c=a.call(this);return c&&b.push(c),c}),d.list(b)},b.map=function(a){a=e(arguments);var b,c=[];for(var f=0;f<this.length;f++){b=a.call(this[f],this[f]);if(b)c.push(b);else throw Error("Mapping failed: ",this[f])}return d.list(c)},b.each=function(a){a=e(arguments);for(var b=0;b<this.length;b++)a.call(this[b],this[b])},b.filter=function(a){a=e(arguments);var b=[];return this.forEach(function(c){var d=a.call(c);d&&b.push(d)}),d.list(b)},b.rewrite=function(a){return a=e(arguments),a.call(this)};for(var h in b)b.hasOwnProperty(h)&&(d.Node.prototype[h]=b[h]);b.addParentPointers=function(a){return a.traverseTopDown(function(){var a=this;this.traverseAll(function(){return this.parent=a,this})})}}),define("treehugger/js/uglifyparser",["require","exports","module"],function(a,b,c){function r(a){return q.letter.test(a)}function s(a){return a=a.charCodeAt(0),a>=48&&a<=57}function t(a){return s(a)||r(a)}function u(a){return q.non_spacing_mark.test(a)||q.space_combining_mark.test(a)}function v(a){return q.connector_punctuation.test(a)}function w(a){return a=="$"||a=="_"||r(a)}function x(a){return w(a)||u(a)||s(a)||v(a)||a=="‌"||a=="‍"}function y(a){if(i.test(a))return parseInt(a.substr(2),16);if(j.test(a))return parseInt(a.substr(1),8);if(k.test(a))return parseFloat(a)}function z(a,b,c,d){this.message=a,this.line=b,this.col=c,this.pos=d,this.stack=(new Error).stack}function A(a,b,c,d){throw new z(a,b,c,d)}function B(a,b,c){return a.type==b&&(c==null||a.value==c)}function D(a){function c(){return b.text.charAt(b.pos)}function e(a){var c=b.text.charAt(b.pos++);if(a&&!c)throw C;return c=="\n"?(b.newline_before=!0,++b.line,b.col=0):++b.col,c}function i(){return!b.peek()}function j(a,c){var d=b.text.indexOf(a,b.pos);if(c&&d==-1)throw C;return d}function k(){b.tokline=b.line,b.tokcol=b.col,b.tokpos=b.pos}function p(a,c,d){b.regex_allowed=a=="operator"&&!S(F,c)||a=="keyword"&&S(f,c)||a=="punc"&&S(n,c);var e={type:a,value:c,line:b.tokline,col:b.tokcol,pos:b.tokpos,nlb:b.newline_before};return d||(e.comments_before=b.comments_before,b.comments_before=[]),b.newline_before=!1,e}function q(){while(S(m,c()))e()}function r(a){var b="",d=c(),f=0;while(d&&a(d,f++))b+=e(),d=c();return b}function u(a){A(a,b.tokline,b.tokcol,b.tokpos)}function v(a){var b=!1,c=!1,d=!1,e=a==".",f=r(function(f,g){return f=="x"||f=="X"?d?!1:d=!0:!!d||f!="E"&&f!="e"?f=="-"?c||g==0&&!a?!0:!1:f=="+"?c:(c=!1,f=="."?!e&&!d?e=!0:!1:t(f)):b?!1:b=c=!0});a&&(f=a+f);var g=y(f);return p("num",f)}function z(){var a=e(!0);switch(a){case"n":return"\n";case"r":return"\r";case"t":return"\t";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return"\0";case"x":return String.fromCharCode(B(2));case"u":return String.fromCharCode(B(4));case"\n":return"";default:return a}}function B(a){var b=0;for(;a>0;--a){var c=parseInt(e(!0),16);isNaN(c)&&u("Invalid hex-character pattern in string"),b=b<<4|c}return b}function D(){return N("Unterminated string constant",function(){var a=e(),b="";for(;;){var c=e(!0);if(c=="\\"){var d=0,f=null;c=r(function(a){if(a>="0"&&a<="7"){if(!f)return f=a,++d;if(f<="3"&&d<=2)return++d;if(f>="4"&&d<=1)return++d}return!1}),d>0?c=String.fromCharCode(parseInt(c,8)):c=z()}else if(c==a)break;b+=c}return p("string",b)})}function E(){e();var a=j("\n"),c;return a==-1?(c=b.text.substr(b.pos),b.pos=b.text.length):(c=b.text.substring(b.pos,a),b.pos=a),p("comment1",c,!0)}function G(){return e(),N("Unterminated multiline comment",function(){var a=j("*/",!0),c=b.text.substring(b.pos,a),d=p("comment2",c,!0);return b.pos=a+2,b.line+=c.split("\n").length-1,b.newline_before=c.indexOf("\n")>=0,/^@cc_on/i.test(c)&&(T("WARNING: at line "+b.line),T('*** Found "conditional comment": '+c),T("*** UglifyJS DISCARDS ALL COMMENTS.  This means your code might no longer work properly in Internet Explorer.")),d})}function H(){var a=!1,b="",d;while((d=c())!=null)if(!a)if(d=="\\")a=!0,e();else if(x(d))b+=e();else break;else d!="u"&&u("Expecting UnicodeEscapeSequence -- uXXXX"),d=z(),x(d)||u("Unicode char: "+d.charCodeAt(0)+" is not valid in identifier"),b+=d,a=!1;return b}function I(a){return N("Unterminated regular expression",function(){var b=!1,c,d=!1;while(c=e(!0))if(b)a+="\\"+c,b=!1;else if(c=="[")d=!0,a+=c;else if(c=="]"&&d)d=!1,a+=c;else{if(c=="/"&&!d)break;c=="\\"?b=!0:a+=c}var f=H();return p("regexp",[a,f])})}function J(a){function b(a){if(!c())return a;var d=a+c();return S(l,d)?(e(),b(d)):a}return p("operator",b(a||e()))}function K(){e();var a=b.regex_allowed;switch(c()){case"/":return b.comments_before.push(E()),b.regex_allowed=a,O();case"*":return b.comments_before.push(G()),b.regex_allowed=a,O()}return b.regex_allowed?I(""):J("/")}function L(){return e(),s(c())?v("."):p("punc",".")}function M(){var a=H();return S(d,a)?S(l,a)?p("operator",a):S(g,a)?p("atom",a):p("keyword",a):p("name",a)}function N(a,b){try{return b()}catch(c){if(c===C)u(a);else throw c}}function O(a){if(a!=null)return I(a);q(),k();var b=c();if(!b)return p("eof");if(s(b))return v();if(b=='"'||b=="'")return D();if(S(o,b))return p("punc",e());if(b==".")return L();if(b=="/")return K();if(S(h,b))return J();if(b=="\\"||w(b))return M();u("Unexpected character '"+b+"'")}var b={text:a.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[]};return O.context=function(a){return a&&(b=a),b},O}function K(a,b,c){this.name=a,this.start=b,this.end=c}function L(a,b,c){function e(a,b){return B(d.token,a,b)}function f(){return d.peeked||(d.peeked=d.input())}function g(a,b){b||(b=d.token),d.error||(d.error={line:b.line,col:b.col,message:a})}function h(){d.prev=d.token;var a=d.input.context();return d.line=a.line,d.col=a.col,d.peeked?(d.token=d.peeked,d.peeked=null):d.token=d.input(),d.token}function i(){return d.prev}function j(a,b,c,e){var f=d.input.context();A(a,b!=null?b:f.tokline,c!=null?c:f.tokcol,e!=null?e:f.tokpos)}function k(a,b){g(b,a)}function l(a){a==null&&(a=d.token),g("Unexpected token: "+a.type+" ("+a.value+")",a)}function m(a,b){if(e(a,b))return h();g("Unexpected token "+d.token.type+", expected "+a,d.token)}function n(a){if(e("punc",a))return h();g("Expected: "+a)}function o(){return!b&&(d.token.nlb||e("eof")||e("punc","}"))}function p(){e("punc",";")?h():o()||g("Semicolon expected")}function q(){return P(arguments)}function r(){if(!e("punc","("))return g("Expected: ("),q("ERROR");n("(");var a=bn();return n(")"),a}function s(a,b,c){return a instanceof K?a:new K(a,b,c)}function t(a){return c?function(){var b=d.token,c=a.apply(this,arguments);return c?(c[0]=s(c[0],b,i()),c):(g("Parse error"),["ERROR"])}:a}function v(a){d.labels.push(a);var c=d.token,e=u();return b&&!S(I,e[0])&&l(c),d.labels.pop(),q("label",a,e)}function w(){return q("stat",N(bn,p))}function x(a){var b;return o()||(b=e("name")?d.token.value:null),b!=null?(h(),R(b,d.labels)||j("Label "+b+" without matching loop or statement")):d.in_loop==0&&j(a+" not inside a loop or switch"),p(),q(a,b)}function y(){if(!e("punc","("))return g("Expected: ("),q("for",q("ERROR"),q("ERROR"),q("ERROR"),q("ERROR"));n("(");var a=null;if(!e("punc",";")){e("keyword","var")?a=(h(),W(!0)):e("keyword","let")?a=(h(),X(!0)):a=bn(!0,!0);if(e("operator","in"))return C(a)}return z(a)}function z(a){n(";");var b=e("punc",";")?null:bn();if(e("punc",";")){n(";");var c=e("punc",")")?null:bn();n(")")}else g("Expected: ;");return q("for",a,b,c,bo(u))}function C(a){var b;a[0]=="var"?b=q("name",a[1][0]):a[0]=="let"?b=q("name",a[1][0]):b=a,h();var c=bn();return n(")"),q("for-in",a,b,c,bo(u))}function O(){var a=r(),b=u(),c;return e("keyword","else")&&(h(),c=u()),q("if",a,b,c)}function Q(){n("{");var a=[];while(!e("punc","}")){if(e("eof"))return a;a.push(u())}return h(),a}function U(){var a=Q(),b,c;if(e("keyword","catch")){h(),n("("),e("name")||j("Name expected");var f=d.token.value;h(),n(")"),b=[f,Q()]}return e("keyword","finally")&&(h(),c=Q()),!b&&!c&&j("Missing catch/finally blocks"),q("try",a,b,c)}function V(a){var b=[];for(;;){e("name")||l();var c=d.token,f=d.token.value;h(),f=s(f,c,d.token),e("operator","=")?(h(),b.push([f,bn(!1,a)])):b.push([f]);if(!e("punc",","))break;h()}return b}function W(a){return q("var",V(a))}function X(a){return q("let",V(a))}function Y(){return q("const",V())}function Z(){var a=$(!1),b;return e("punc","(")?(h(),b=_(")")):b=[],bf(q("new",a,b),!0)}function _(a,b,c){var d=!0,f=[];while(!e("punc",a)&&!e("eof")){d?d=!1:n(",");if(b&&e("punc",a))break;e("punc",",")&&c?f.push(["atom","undefined"]):f.push(bn(!1))}return h(),f}function ba(){return q("array",_("]",!b,!0))}function bb(){var a=!0,c=[];while(!e("punc","}")&&!e("eof")){a?a=!1:n(",");if(!b&&e("punc","}"))break;var f=d.token.type,g=bc();f!="name"||g!="get"&&g!="set"||!!e("punc",":")?(n(":"),c.push([g,bn(!1)])):c.push([bd(),L(!1),g])}return h(),q("object",c)}function bc(){switch(d.token.type){case"num":case"string":return N(d.token.value,h)}return bd()}function bd(){switch(d.token.type){case"name":case"operator":case"keyword":case"atom":return N(d.token.value,h);default:return g("Name, operator, keyword or atom expected."),""}}function be(a,b){return a[0]=s(a[0],b,d.token),a}function bf(a,b){var c=d.prev;return a[0]instanceof K||(a=be(a,c)),e("punc",".")?(h(),bf(be(q("dot",a,bd()),c),b)):e("punc","[")?(h(),bf(q("sub",a,N(bn,M(n,"]"))),b)):b&&e("punc","(")?(h(),bf(q("call",a,_(")")),!0)):a}function bg(a){if(e("operator")&&S(E,d.token.value))return bh("unary-prefix",N(d.token.value,h),bg(a));var b=$(a);while(e("operator")&&S(F,d.token.value)&&!d.token.nlb)b=bh("unary-postfix",d.token.value,b),h();return b}function bh(a,b,c){return(b=="++"||b=="--")&&!bl(c)&&j("Invalid use of "+b+" operator"),q(a,b,c)}function bi(a,b,c){var f=e("operator")?d.token.value:null;f&&f=="in"&&c&&(f=null);var g=f!=null?H[f]:null;if(g!=null&&g>b){h();var i=bi(bg(!0),g,c);return bi(q("binary",f,a,i),b,c)}return a}function bj(a){return bi(bg(!0),0,a)}function bk(a){var b=bj(a);if(e("operator","?")){h();var c=bn(!1);return n(":"),q("conditional",b,c,bn(!1,a))}return b}function bl(a){if(!b)return!0;switch(a[0]+""){case"dot":case"sub":case"new":case"call":return!0;case"name":return a[1]!="this"}}function bm(a){var b=bk(a),c=d.token.value;if(e("operator")&&S(G,c)){if(bl(b))return h(),q("assign",G[c],b,bm(a));j("Invalid assignment")}return b}function bo(a){try{return++d.in_loop,a()}finally{--d.in_loop}}var d={input:typeof a=="string"?D(a,!0):a,token:null,prev:null,peeked:null,in_function:0,in_loop:0,labels:[],line:0,col:0,error:null};d.token=h();var u=t(function(){if(e("operator","/")||e("operator","/="))d.peeked=null,d.token=d.input(d.token.value.substr(1));switch(d.token.type){case"num":case"string":case"regexp":case"operator":case"atom":return w();case"name":return B(f(),"punc",":")?v(N(d.token.value,h,h)):w();case"punc":switch(d.token.value){case"{":return q("block",Q());case"[":case"(":return w();case";":return h(),q("block");default:return h(),g("Bracket expected."),q("ERROR")};case"keyword":switch(N(d.token.value,h)){case"break":return x("break");case"continue":return x("continue");case"debugger":return p(),q("debugger");case"do":return function(a){return e("keyword","while")?(m("keyword","while"),q("do",N(r,p),a)):(g("Invalid do statement."),q("do",q("ERROR"),q("ERROR")))}(bo(u));case"for":return y();case"function":return L(!0);case"if":return O();case"return":return d.in_function==0&&g("'return' outside of function"),q("return",e("punc",";")?(h(),null):o()?null:N(bn,p));case"switch":return q("switch",r(),T());case"throw":return d.token.nlb&&j("Illegal newline after 'throw'"),q("throw",N(bn,p));case"try":return U();case"var":return N(W,p);case"let":return N(X,p);case"const":return N(Y,p);case"while":return q("while",r(),bo(u));case"with":return q("with",r(),u());default:l()}}}),L=t(function(a){var b=d.token,c=e("name")?N(d.token.value,h):null;return c=s(c,b,d.token),a&&!c?(g("Invalid function definition"),q("function","",[],[])):(n("("),q(a?"defun":"function",c,function(a,b){while(!e("punc",")")&&!e("eof"))a?a=!1:n(","),e("name")||l(),b.push(s(d.token.value,d.token)),h();return h(),b}(!0,[]),function(){++d.in_function;var a=d.in_loop;d.in_loop=0;var b=Q();return--d.in_function,d.in_loop=a,b}()))}),T=M(bo,function(){e("punc","{")&&n("{");var a=[],b=null;while(!e("punc","}")){if(e("eof"))break;if(e("keyword","case"))h(),b=[],a.push([bn(),b]),n(":");else if(e("keyword","default"))h(),n(":"),b=[],a.push([null,b]);else{if(!b)return a;b.push(u())}}return h(),a}),$=t(function(a){if(e("operator","new"))return h(),Z();if(e("punc")){switch(d.token.value){case"(":return h(),bf(N(bn,function(){n(")")}),a);case"[":return h(),bf(ba(),a);case"{":return h(),bf(bb(),a)}return g("Bracket expected."),q("ERROR")}if(e("keyword","function"))return h(),bf(L(!1),a);if(S(J,d.token.type)){var b=d.token.type=="regexp"?q("regexp",d.token.value[0],d.token.value[1]):q(d.token.type,d.token.value);return bf(N(b,h),a)}l()}),bn=t(function(a,b){arguments.length==0&&(a=!0);var c=d.line,f=d.col,g=bm(b);return a&&e("punc",",")?(h(),q("seq",g,bn(!0,b))):(d.col===f&&d.line===c&&h(),g)});return{ast:q("toplevel",function(a){while(!e("eof"))a.push(u());return a}([])),error:d.error}}function M(a){var b=P(arguments,1);return function(){return a.apply(this,b.concat(P(arguments)))}}function N(a){a instanceof Function&&(a=a());for(var b=1,c=arguments.length;--c>0;++b)arguments[b]();return a}function O(a){var b={};for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function P(a,b){return Array.prototype.slice.call(a,b||0)}function Q(a){return a.split("")}function R(a,b){for(var c=b.length;--c>=0;)if(b[c]===a)return!0;return!1}function S(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var d=O(["break","case","catch","const","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with","let"]),e=O(["abstract","boolean","byte","char","class","debugger","double","enum","export","extends","final","float","goto","implements","import","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]),f=O(["return","new","delete","throw","else","case"]),g=O(["false","null","true","undefined"]),h=O(Q("+-*&%=<>!?|~^")),i=/^0x[0-9a-f]+$/i,j=/^0[0-7]+$/,k=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,l=O(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),m=O(Q("  \n\r\t\f​᠎             　")),n=O(Q("[{}(,.;:")),o=O(Q("[]{}(),;:")),p=O(Q("gmsiy")),q={letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0523\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0621-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971\\u0972\\u097B-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D3D\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC\\u0EDD\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8B\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10D0-\\u10FA\\u10FC\\u1100-\\u1159\\u115F-\\u11A2\\u11A8-\\u11F9\\u1200-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u1676\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19A9\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u2094\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2C6F\\u2C71-\\u2C7D\\u2C80-\\u2CE4\\u2D00-\\u2D25\\u2D30-\\u2D65\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31B7\\u31F0-\\u31FF\\u3400\\u4DB5\\u4E00\\u9FC3\\uA000-\\uA48C\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA65F\\uA662-\\uA66E\\uA67F-\\uA697\\uA717-\\uA71F\\uA722-\\uA788\\uA78B\\uA78C\\uA7FB-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA90A-\\uA925\\uA930-\\uA946\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAC00\\uD7A3\\uF900-\\uFA2D\\uFA30-\\uFA6A\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),non_spacing_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065E\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0900-\\u0902\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F90-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1DC0-\\u1DE6\\u1DFD-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA67C\\uA67D\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),space_combining_mark:new RegExp("[\\u0903\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A19-\\u1A1B\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]")};z.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};var C={},E=O(["typeof","void","delete","--","++","!","~","-","+"]),F=O(["--","++"]),G=function(a,b,c){while(c<a.length)b[a[c]]=a[c].substr(0,a[c].length-1),c++;return b}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="],{"=":!0},0),H=function(a,b){for(var c=0,d=1;c<a.length;++c,++d){var e=a[c];for(var f=0;f<e.length;++f)b[e[f]]=d}return b}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),I=O(["for","do","while","switch"]),J=O(["atom","num","string","regexp","name"]);K.prototype.toString=function(){return this.name};var T=function(){};b.tokenizer=D,b.parse=L,b.slice=P,b.curry=M,b.member=R,b.array_to_hash=O,b.PRECEDENCE=H,b.KEYWORDS_ATOM=g,b.RESERVED_WORDS=e,b.KEYWORDS=d,b.ATOMIC_START_TOKEN=J,b.OPERATORS=l,b.is_alphanumeric_char=t,b.set_logger=function(a){T=a}}),define("treehugger/js/parse",["require","exports","module","treehugger/js/uglifyparser","treehugger/tree"],function(a,b,c){function f(a,b){return a.name||(a.name=""),b.setAnnotation("pos",{sl:a.start.line,sc:a.start.col,el:a.start.line,ec:a.start.col+a.name.length}),b}var d=a("treehugger/js/uglifyparser"),e=a("treehugger/tree");b.parse=function(a){var c=d.parse(a,!1,!0),e=b.transform(c.ast);return c.error&&e.setAnnotation("error",c.error),e},b.transform=function(a){if(!a)return e.cons("None",[]);var c=b.transform,d=typeof a[0]=="string"?a[0]:a[0].name,g;switch(d){case"toplevel":g=e.list(a[1].map(c));break;case"var":g=e.cons("VarDecls",[e.list(a[1].map(function(a){var b=e.string(a[0].name);return f(a[0],b),a[1]?e.cons("VarDeclInit",[b,c(a[1])]):e.cons("VarDecl",[b])}))]);break;case"let":g=e.cons("LetDecls",[e.list(a[1].map(function(a){var b=e.string(a[0].name);return f(a[0],b),a[1]?e.cons("LetDeclInit",[b,c(a[1])]):e.cons("LetDecl",[b])}))]);break;case"const":g=e.cons("ConstDecls",[e.list(a[1].map(function(a){return e.cons("ConstDeclInit",[e.string(a[0]),c(a[1])])}))]);break;case"num":g=e.cons("Num",[e.string(a[1])]);break;case"string":g=e.cons("String",[e.string(a[1])]);break;case"stat":return c(a[1]);case"call":g=e.cons("Call",[c(a[1]),e.list(a[2].map(c))]);break;case"return":g=e.cons("Return",[c(a[1])]);break;case"new":g=e.cons("New",[c(a[1]),e.list(a[2].map(c))]);break;case"object":g=e.cons("ObjectInit",[e.list(a[1].map(function(a){return e.cons("PropertyInit",[e.string(a[0]),c(a[1])])}))]);break;case"array":g=e.cons("Array",[e.list(a[1].map(c))]);break;case"conditional":g=e.cons("TernaryIf",[c(a[1]),c(a[2]),c(a[3])]);break;case"label":g=e.cons("Label",[e.string(a[1]),c(a[2])]);break;case"continue":g=e.cons("Continue",[e.string(a[1])]);break;case"assign":typeof a[1]=="string"?g=e.cons("OpAssign",[e.string(a[1]),c(a[2]),c(a[3])]):g=e.cons("Assign",[c(a[2]),c(a[3])]);break;case"dot":g=e.cons("PropAccess",[c(a[1]),e.string(a[2])]);break;case"name":g=e.cons("Var",[e.string(a[1])]);break;case"defun":g=e.cons("Function",[f(a[1],e.string(a[1].name||"")),e.list(a[2].map(function(a){return f(a,e.cons("FArg",[e.string(a.name)]))})),e.list(a[3].map(c))]);break;case"function":var h=e.string(a[1].name||"");a[1].name&&f(a[1],h);var i=e.list(a[2].map(function(a){return f(a,e.cons("FArg",[e.string(a.name)]))}));g=e.cons("Function",[h,i,e.list(a[3].map(c))]);break;case"binary":g=e.cons("Op",[e.string(a[1]),c(a[2]),c(a[3])]);break;case"unary-postfix":g=e.cons("PostfixOp",[e.string(a[1]),c(a[2])]);break;case"unary-prefix":g=e.cons("PrefixOp",[e.string(a[1]),c(a[2])]);break;case"sub":g=e.cons("Index",[c(a[1]),c(a[2])]);break;case"for":g=e.cons("For",[c(a[1]),c(a[2]),c(a[3]),c(a[4])]);break;case"for-in":g=e.cons("ForIn",[c(a[1]),c(a[3]),c(a[4])]);break;case"while":g=e.cons("While",[c(a[1]),c(a[2])]);break;case"do":g=e.cons("Do",[c(a[2]),c(a[1])]);break;case"switch":g=e.cons("Switch",[c(a[1]),e.list(a[2].map(function(a){return e.cons("Case",[c(a[0]),e.list(a[1].map(c))])}))]);break;case"break":g=e.cons("Break",[]);break;case"seq":g=e.cons("Seq",[c(a[1]),c(a[2])]);break;case"if":g=e.cons("If",[c(a[1]),c(a[2]),c(a[3])]);break;case"block":g=e.cons("Block",[e.list(a[1]?a[1].map(c):[])]);break;case"regexp":g=e.cons("RegExp",[e.string(a[1]),e.string(a[2])]);break;case"throw":g=e.cons("Throw",[c(a[1])]);break;case"try":g=e.cons("Try",[e.list(a[1].map(c)),e.list(a[2]?[e.cons("Catch",[e.string(a[2][0]),e.list(a[2][1].map(c))])]:[]),a[3]?e.list(a[3].map(c)):e.cons("None",[])]);break;case"with":g=e.cons("With",[c(a[1]),e.list(a[2][1].map(c))]);break;case"atom":g=e.cons("Atom",[]);break;case"ERROR":g=e.cons("ERROR",[]);break;default:console.log("Not yet supported: "+d),console.log("Current node: "+JSON.stringify(a))}return g.setAnnotation("origin",a),a[0].start&&(g.length===1&&g[0]instanceof e.StringNode&&g[0].value?g.setAnnotation("pos",{sl:a[0].start.line,sc:a[0].start.col,el:a[0].start.line,ec:a[0].start.col+g[0].value.length}):g.setAnnotation("pos",{sl:a[0].start.line,sc:a[0].start.col,el:a[0].end.line,ec:a[0].end.col})),g}}),define("core/util",["require","exports","module","core/util"],function(a,b,c){b.alert=function(a,b,c,d){winAlert.show(),winAlert.setAttribute("title",a),winAlertHeader.$ext.innerHTML=b,winAlertMsg.$ext.innerHTML=c,d?winAlert.onhide=function(){winAlertMsg.onhide=null,d()}:winAlert.onhide=null},b.confirm=function(a,b,c,d,e){winConfirm.show(),winConfirm.setAttribute("title",a),winConfirmHeader.$ext.innerHTML=b,winConfirmMsg.$ext.innerHTML=c,btnConfirmOk.onclick=d,btnConfirmCancel.onclick=e},b.question=function(a,b,c,d,e,f,g){winQuestion.show(),winQuestion.setAttribute("title",a),winQuestionHeader.$ext.innerHTML=b,winQuestionMsg.$ext.innerHTML=c,btnQuestionYes.onclick=d,btnQuestionYesToAll.onclick=e,btnQuestionNo.onclick=f,btnQuestionNoToAll.onclick=g},b.removeInteractive=function(b){if(window.cloud9config.readonly==1)return!1;b.confirmed==undefined&&(b.confirmed=!1);if(!b.confirmed){var c=b.getSelection();function d(e){var f=e.getAttribute("name"),g=e.getAttribute("type");a("core/util").question("Confirm Remove","You are about to remove the "+g+" "+f,"Do you want continue? (This change cannot be undone)",function(){b.confirmed=!0,b.remove(e),b.confirmed=!1,c.length>0?d(c.shift()):winQuestion.hide()},function(){b.confirmed=!0,b.remove(e),c.forEach(function(a){b.remove(a)}),b.confirmed=!1,winQuestion.hide()},function(){c.length>0?d(c.shift()):winQuestion.hide()},function(){winQuestion.hide()}),btnQuestionYesToAll.setAttribute("visible",c.length>0),btnQuestionNoToAll.setAttribute("visible",c.length>0)}return d(c.shift()),!1}return!0};var d={"application/xhtml+xml":"html","text/css":"css","text/x-scss":"css","text/x-sass":"css","text/html":"html","application/pdf":"page_white_acrobat",image:"image","application/xml":"page_white_code_red","image/svg+xml":"page_white_picture","text/plain":"page_white_text","application/javascript":"page_white_code","application/json":"page_white_code","text/x-script.python":"page_white_code","text/x-script.ocaml":"page_white_code","text/x-script.clojure":"page_white_code","application/x-httpd-php":"page_white_php","application/x-sh":"page_white_wrench","text/x-coldfusion":"page_white_coldfusion","text/x-script.ruby":"page_white_ruby","text/x-script.coffeescript":"page_white_cup","text/cpp":"page_white_cplusplus","text/x-c":"page_white_c","text/x-csharp":"page_white_csharp","text/text/x-java-source":"page_white_cup","text/x-markdown":"page_white_text"},e={js:"application/javascript",json:"application/json",css:"text/css",scss:"text/x-scss",sass:"text/x-sass",xml:"application/xml",rdf:"application/rdf+xml",rss:"application/rss+xml",svg:"image/svg+xml",wsdl:"application/wsdl+xml",xslt:"application/xslt+xml",atom:"application/atom+xml",mathml:"application/mathml+xml",mml:"application/mathml+xml",php:"application/x-httpd-php",phtml:"application/x-httpd-php",html:"text/html",xhtml:"application/xhtml+xml",coffee:"text/x-script.coffeescript",py:"text/x-script.python",ru:"text/x-script.ruby",gemspec:"text/x-script.ruby",rake:"text/x-script.ruby",rb:"text/x-script.ruby",c:"text/x-c",cc:"text/x-c",cpp:"text/x-c",cxx:"text/x-c",h:"text/x-c",hh:"text/x-c",hpp:"text/x-c",bmp:"image",djv:"image",djvu:"image",gif:"image",ico:"image",jpeg:"image",jpg:"image",pbm:"image",pgm:"image",png:"image",pnm:"image",ppm:"image",psd:"image",svgz:"image",tif:"image",tiff:"image",xbm:"image",xpm:"image",clj:"text/x-script.clojure",ml:"text/x-script.ocaml",mli:"text/x-script.ocaml",cfm:"text/x-coldfusion",sql:"text/x-sql",sh:"application/x-sh",bash:"application/x-sh"};b.getFileIcon=function(a){var b=a.getAttribute("name"),c="page_white_text",f;return b&&(f=b.split(".").pop(),c=d[e[f]]||"page_white_text"),c+".png"},b.getContentType=function(a){var b=a.split(".").pop()||"";return e[b]||"text/plain"},b.xmlEntityMap={quot:"34",amp:"38",apos:"39",lt:"60",gt:"62",nbsp:"160",iexcl:"161",cent:"162",pound:"163",curren:"164",yen:"165",brvbar:"166",sect:"167",uml:"168",copy:"169",ordf:"170",laquo:"171",not:"172",shy:"173",reg:"174",macr:"175",deg:"176",plusmn:"177",sup2:"178",sup3:"179",acute:"180",micro:"181",para:"182",middot:"183",cedil:"184",sup1:"185",ordm:"186",raquo:"187",frac14:"188",frac12:"189",frac34:"190",iquest:"191",agrave:"192",aacute:"193",acirc:"194",atilde:"195",auml:"196",aring:"197",aelig:"198",ccedil:"199",egrave:"200",eacute:"201",ecirc:"202",euml:"203",igrave:"204",iacute:"205",icirc:"206",iuml:"207",eth:"208",ntilde:"209",ograve:"210",oacute:"211",ocirc:"212",otilde:"213",ouml:"214",times:"215",oslash:"216",ugrave:"217",uacute:"218",ucirc:"219",uuml:"220",yacute:"221",thorn:"222",szlig:"223",agrave:"224",aacute:"225",acirc:"226",atilde:"227",auml:"228",aring:"229",aelig:"230",ccedil:"231",egrave:"232",eacute:"233",ecirc:"234",euml:"235",igrave:"236",iacute:"237",icirc:"238",iuml:"239",eth:"240",ntilde:"241",ograve:"242",oacute:"243",ocirc:"244",otilde:"245",ouml:"246",divide:"247",oslash:"248",ugrave:"249",uacute:"250",ucirc:"251",uuml:"252",yacute:"253",thorn:"254",yuml:"255",oelig:"338",oelig:"339",scaron:"352",scaron:"353",yuml:"376",fnof:"402",circ:"710",tilde:"732",alpha:"913",beta:"914",gamma:"915",delta:"916",epsilon:"917",zeta:"918",eta:"919",theta:"920",iota:"921",kappa:"922",lambda:"923",mu:"924",nu:"925",xi:"926",omicron:"927",pi:"928",rho:"929",sigma:"931",tau:"932",upsilon:"933",phi:"934",chi:"935",psi:"936",omega:"937",alpha:"945",beta:"946",gamma:"947",delta:"948",epsilon:"949",zeta:"950",eta:"951",theta:"952",iota:"953",kappa:"954",lambda:"955",mu:"956",nu:"957",xi:"958",omicron:"959",pi:"960",rho:"961",sigmaf:"962",sigma:"963",tau:"964",upsilon:"965",phi:"966",chi:"967",psi:"968",omega:"969",thetasym:"977",upsih:"978",piv:"982",ensp:"8194",emsp:"8195",thinsp:"8201",zwnj:"8204",zwj:"8205",lrm:"8206",rlm:"8207",ndash:"8211",mdash:"8212",lsquo:"8216",rsquo:"8217",sbquo:"8218",ldquo:"8220",rdquo:"8221",bdquo:"8222",dagger:"8224",dagger:"8225",bull:"8226",hellip:"8230",permil:"8240",prime:"8242",prime:"8243",lsaquo:"8249",rsaquo:"8250",oline:"8254",frasl:"8260",euro:"8364",image:"8465",weierp:"8472",real:"8476",trade:"8482",alefsym:"8501",larr:"8592",uarr:"8593",rarr:"8594",darr:"8595",harr:"8596",crarr:"8629",larr:"8656",uarr:"8657",rarr:"8658",darr:"8659",harr:"8660",forall:"8704",part:"8706",exist:"8707",empty:"8709",nabla:"8711",isin:"8712",notin:"8713",ni:"8715",prod:"8719",sum:"8721",minus:"8722",lowast:"8727",radic:"8730",prop:"8733",infin:"8734",ang:"8736",and:"8743",or:"8744",cap:"8745",cup:"8746","int":"8747",there4:"8756",sim:"8764",cong:"8773",asymp:"8776",ne:"8800",equiv:"8801",le:"8804",ge:"8805",sub:"8834",sup:"8835",nsub:"8836",sube:"8838",supe:"8839",oplus:"8853",otimes:"8855",perp:"8869",sdot:"8901",lceil:"8968",rceil:"8969",lfloor:"8970",rfloor:"8971",lang:"9001",rang:"9002",loz:"9674",spades:"9824",clubs:"9827",hearts:"9829",diams:"9830"},b.escapeXml=function(a,c){return a=(String(a)||"").replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;"),c||(a=a.replace(/"/g,"&#34;").replace(/'/g,"&#39;")),a.replace(/&([a-z]+);/gi,function(a,c){return b.xmlEntityMap[c=c.toLowerCase()]?"&#"+b.xmlEntityMap[c]+";":a})},b.escapeRegExp=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s"']/g,"\\$&")},b.isTrue=function(a){return a===!0||a==="true"||a==="on"||typeof a=="number"&&a>0||a==="1"},b.isFalse=function(a){return a===!1||a==="false"||a==="off"||a===0||a==="0"},b.linkify=function(){var a="[a-z\\d.-]+://",b="(?:(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])\\.){3}(?:[0-9]|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])",c="(?:(?:[^\\s!@#$%^&*()_=+[\\]{}\\\\|;:'\",.<>/?]+)\\.)+",d="(?:ac|ad|aero|ae|af|ag|ai|al|am|an|ao|aq|arpa|ar|asia|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|biz|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|cat|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|coop|com|co|cr|cu|cv|cx|cy|cz|de|dj|dk|dm|do|dz|ec|edu|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gov|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|info|int|in|io|iq|ir|is|it|je|jm|jobs|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mil|mk|ml|mm|mn|mobi|mo|mp|mq|mr|ms|mt|museum|mu|mv|mw|mx|my|mz|name|na|nc|net|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|org|pa|pe|pf|pg|ph|pk|pl|pm|pn|pro|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sy|sz|tc|td|tel|tf|tg|th|tj|tk|tl|tm|tn|to|tp|travel|tr|tt|tv|tw|tz|ua|ug|uk|um|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|xn--0zwm56d|xn--11b5bs3a9aj6g|xn--80akhbyknj4f|xn--9t4b11yi5a|xn--deba0ad|xn--g6w251d|xn--hgbk6aj7f53bba|xn--hlcj6aya9esc7a|xn--jxalpdlp|xn--kgbechtv|xn--zckzah|ye|yt|yu|za|zm|zw)",e="(?:"+c+d+"|"+b+")",f="(?:[;/][^#?<>\\s]*)?",g="(?:\\?[^#<>\\s]*)?(?:#[^<>\\s]*)?",h="\\b"+a+"[^<>\\s]+",i="\\b"+e+f+g+"(?!\\w)",j="mailto:",k="(?:"+j+")?[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@"+e+g+"(?!\\w)",l=new RegExp("(?:"+h+"|"+i+"|"+k+")","ig"),m=new RegExp("^"+a,"i"),n={"'":"`",">":"<",")":"(","]":"[","}":"{","B;":"B+","b:":"b9"},o={callback:function(a,b){return b?'<a href="'+b+'" title="'+b+'">'+a+"</a>":a},punct_regexp:/(?:[!?.,:;'"]|(?:&|&amp;)(?:lt|gt|quot|apos|raquo|laquo|rsaquo|lsaquo);)$/};return function(a,b){b=b||{};var c,d,e,f,g="",h=[],i,k,p,q,r,s,t,u;for(d in o)b[d]===undefined&&(b[d]=o[d]);while(c=l.exec(a)){e=c[0],k=l.lastIndex,p=k-e.length;if(/[\/:]/.test(a.charAt(p-1)))continue;do q=e,u=e.substr(-1),t=n[u],t&&(r=e.match(new RegExp("\\"+t+"(?!$)","g")),s=e.match(new RegExp("\\"+u,"g")),(r?r.length:0)<(s?s.length:0)&&(e=e.substr(0,e.length-1),k--)),b.punct_regexp&&(e=e.replace(b.punct_regexp,function(a){return k-=a.length,""}));while(e.length&&e!==q);f=e,m.test(f)||(f=(f.indexOf("@")!==-1?f.indexOf(j)?j:"":f.indexOf("irc.")?f.indexOf("ftp.")?"http://":"ftp://":"irc://")+f),i!=p&&(h.push([a.slice(i,p)]),i=k),h.push([e,f])}h.push([a.substr(i)]);for(d=0;d<h.length;d++)g+=b.callback.apply(window,h[d]);return g||a}}()}),define("core/ide",["require","exports","module","core/document","core/util"],function(a,b,c){var d=a("core/document"),e=a("core/util"),f=(new apf.Class).$init();f.createDocument=function(a,b){return new d(a,b)},f.start=function(){this.workspaceDir=window.cloud9config.workspaceDir.replace(/\/+$/,""),this.davPrefix=window.cloud9config.davPrefix.replace(/\/+$/,""),this.staticPrefix=window.cloud9config.staticUrl,this.sessionId=window.cloud9config.sessionId,this.workspaceId=window.cloud9config.workspaceId,this.readonly=window.cloud9config.readonly,this.projectName=window.cloud9config.projectName,this.loggedIn=!0,this.onLine=!1,this.offlineFileSystemSupport=!1,this.dispatchEvent("load");var a=location.href;location.protocol!="file:"&&a.indexOf("dev")==-1&&(a.indexOf("cloud9ide.com")>-1||a.indexOf("c9.io")>-1)?(window.onerror=function(a,b,c){return window.console&&console.log("An error occurred, the Cloud9 system admin has been notified."),apf.ajax("/api/debug",{method:"POST",contentType:"application/json",data:JSON.stringify({agent:navigator.userAgent,type:"General Javascript Error",e:[a,b,c],workspaceId:f.workspaceId})}),!0},apf.addEventListener("error",function(a){apf.ajax("/api/debug",{method:"POST",contentType:"application/json",data:JSON.stringify({agent:navigator.userAgent,type:"APF Error",message:a.message,tgt:a.currentTarget&&a.currentTarget.serialize(),url:a.url,state:a.state,e:a.error,workspaceId:f.workspaceId})})})):apf.addEventListener("error",function(a){window.console&&console.error("An APF error occurred",a)})},f.start(),f.addEventListener("extload",function(){var a={"remember transport":!1,transports:["websocket","htmlfile","xhr-multipart","xhr-polling"],reconnect:!1,resource:window.cloud9config.socketIoUrl,"connect timeout":500,"try multiple transports":!0,"transport options":{"xhr-polling":{timeout:6e4},"jsonp-polling":{timeout:6e4}}};f.socketConnect=function(){clearInterval(f.$retryTimer),f.socket.json.send({command:"attach",sessionId:f.sessionId,workspaceId:f.workspaceId})},f.socketReconnect=function(){apf.ajax((window.location.pathname+"/$reconnect").replace(/\/\//g,"/"),{callback:function(a,b,c){f.sessionId=a,f.socketConnect()}})},f.socketDisconnect=function(){clearTimeout(f.$retryTimer);var a=0;f.$retryTimer=setInterval(function(){++a==3&&f.dispatchEvent("socketDisconnect");var b=f.socket.socket;!b.connecting&&!b.reconnecting&&!f.testOffline&&f.loggedIn&&b.reconnect()},1e3)},f.socketMessage=function(a){if(typeof a=="string")try{a=JSON.parse(a)}catch(b){window.console&&console.error("Error parsing socket message",b,"message:",a);return}a.type=="attached"&&f.dispatchEvent("socketConnect"),f.dispatchEvent("socketMessage",{message:a})};try{f.socket=io.connect(null,a)}catch(b){e.alert("Error starting up","Error starting up the IDE","There was an error starting up the IDE.<br>Please clear your browser cache and reload the page.",function(){window.location.reload()});var c=Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(a){return a.src&&a.src.indexOf("socket.io.js")>=0})[0],d;c?apf.ajax(c.src,{callback:function(a,b,c){try{d=parseInt(c.http.status,10)}catch(e){}apf.dispatchEvent("error",{message:"socket.io client lib not loaded",error:{status:d,state:b,data:a,extra:c}})}}):apf.dispatchEvent("error",{message:"socket.io client lib not loaded",error:b});return}f.socket.on("message",f.socketMessage),f.socket.on("connect",f.socketConnect),f.socket.on("reconnect",f.socketReconnect),f.socket.on("disconnect",f.socketDisconnect),this.inited=!0}),f.$msgQueue=[],f.addEventListener("socketConnect",function(){while(f.$msgQueue.length){var a=f.$msgQueue;f.$msgQueue=[],a.forEach(function(a){f.socket.json.send(a)})}}),f.send=function(a){if(!f.socket||!f.socket.socket.connected){f.$msgQueue.push(a);return}f.socket.json.send(a)},f.getActivePageModel=function(){var a=tabEditors.getPage();return a?a.$model.data:null},f.getAllPageModels=function(){return tabEditors.getPages().map(function(a){return a.$model.data})},c.exports=f}),define("core/ext",["require","exports","module","core/ide","core/util"],function(a,b,c){var d=a("core/ide"),e=a("core/util"),f;c.exports=f={GENERAL:1,defLength:1,extHandlers:{1:{register:function(a){a.hook||f.initExtension(a)},unregister:function(a){}}},extensions:[],extLut:{},commandsLut:{},typeLut:{1:"General"},model:new apf.model,currentLayoutMode:null,addType:function(a,b,c){this[a.toUpperCase()]=++this.defLength,this.extHandlers[this.defLength]={register:b,unregister:c},this.typeLut[this.defLength]=a},register:function(a,b,c){if(b.registered)return b;this.model.data||this.model.load("<plugins />"),this.model.queryNode("plugin[@path='"+a+"']")?this.model.setQueryValue("plugin[@path='"+a+"']/@enabled",1):this.model.appendXml('<plugin type="'+this.typeLut[b.type]+'" name="'+(b.name||"")+'" path="'+a+'" dev="'+(b.dev||"")+'" enabled="1" userext="0" />');if(b.commands){for(var e in b.commands)b.commands[e].ext=a;apf.extend(this.commandsLut,b.commands)}return!c&&b.type==this.GENERAL&&!b.alone?(b.path=a,b):(b.registered=!0,b.path=a,this.extHandlers[b.type].register(b),this.extLut[a]=b,this.extensions.push(b),b.hook&&(b.hook(),d.dispatchEvent("hook."+b.path,{ext:b}),d.addEventListener("$event.hook."+b.path,function(a){a.call(this,{ext:b})})),d.dispatchEvent("ext.register",{ext:b}),b)},unregister:function(a,b){var c=a.using;if(c){var d=[];for(var f,g=0,h=c.length;g<h;g++)(f=c[g]).registered&&d.push(f.path);if(d.length)return b||e.alert("Could not disable extension","Extension is still in use","This extension cannot be disabled, because it is still in use by the following extensions:<br /><br /> - "+d.join("<br /> - ")+"<br /><br /> Please disable those extensions first."),!1}delete a.registered,this.extensions.remove(a),delete this.extLut[a.path];var i=a.commands;if(i)for(var j in i)this.commandsLut[j]&&delete this.commandsLut[j];var k=a.deps;if(k)for(var l,m=0,n=k.length;m<n;m++)l=k[m],l.registered&&l.type==this.GENERAL&&!a.alone&&this.unregister(l,!0);return this.extHandlers[a.type].unregister(a),this.model.setQueryValue("plugin[@path='"+a.path+"']/@enabled",0),a.inited&&(a.destroy(),delete a.inited),!0},initExtension:function(a,b){if(a.inited)return;var c=a.skin;if(c&&typeof c=="object"){var e=a.skin.data;a.skinNode=new apf.skin(apf.extend({},a.skin,{data:null})),a.skinNode.setProperty("src",e),apf.document.documentElement.appendChild(a.skinNode)}var g=a.markup;g&&(a.markupInsertionPoint||apf.document.documentElement).insertMarkup(g);var h=a.deps;h&&h.each(function(b){b.registered||f.register(b.path,b,!0),(b.using||(b.using=[])).pushUnique(a)});if(this.currentKeybindings){var i=a.path.substr(a.path.lastIndexOf("/")+1),j=this.currentKeybindings[i];j&&(a.currentKeybindings=j)}a.init(b),a.inited=!0,d.dispatchEvent("init."+a.path,{ext:a}),d.addEventListener("$event.init."+a.path,function(b){b.call(this,{ext:a})})},enableExt:function(b){var c=a(b);if(!c.enable)return;c.enable(),this.model.setQueryValue("plugin[@path='"+b+"']/@enabled",1)},disableExt:function(b){var c=a(b);if(!c.disable)return;c.disable(),this.model.setQueryValue("plugin[@path='"+b+"']/@enabled",0)},execCommand:function(b,c){b?b=b.trim():b="";var d=this.commandsLut[b];if(!d||!d.ext)return;var e=a(d.ext);if(e&&typeof e[b]=="function"){self.require(["ext/console/console"],function(a){e.commands[b].msg&&a.write(e.commands[b].msg)});var f=e[b](c);return typeof f!="undefined"?f:!1}}}}),define("ext/main/main",["require","exports","module","core/ide","core/ext","text!ext/main/main.xml","text!ext/main/style/skins.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("text!ext/main/main.xml"),g=a("text!ext/main/style/skins.xml"),h=document.body.childNodes;for(var i=h.length-1;i>=0;i--)h[i].parentNode.removeChild(h[i]);document.documentElement.style.display="block",document.body.style.display="block",apf.initialize('<a:application xmlns:a="http://ajax.org/2005/aml" />'),c.exports=e.register("ext/main/main",{dev:"Ajax.org",name:"Main",alone:!0,type:e.GENERAL,markup:f,skin:{data:g,"media-path":d.staticPrefix+"/ext/main/style/images/","icon-path":d.staticPrefix+"/ext/main/style/icons/"},deps:[],nodes:[],init:function(){d.mnuFile=mnuFile,d.mnuEdit=mnuEdit,d.barTools=barTools,d.vbMain=vbMain},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("core/settings",["require","exports","module","core/ide","core/settings"],function(a,b,c){var d=a("core/ide"),e="<settings />";c.exports={model:new apf.model,save:function(){if(!d.inited)return;var a=this;clearTimeout(this.$customSaveTimer),this.$customSaveTimer=setTimeout(function(){d.dispatchEvent("savesettings",{model:a.model}),a.saveToFile()},100)},saveToFile:function(){var a=this.model.data&&apf.xmldb.cleanXml(this.model.data.xml)||"";d.onLine?(d.send({command:"settings",action:"set",settings:a}),d.dispatchEvent("track_action",{type:"save settings",settings:a})):localStorage[this.sIdent]=a},load:function(a){try{this.model.load(a)}catch(b){this.model.load(e)}if(window.onerror)try{d.dispatchEvent("loadsettings",{model:this.model})}catch(b){self.require("ext/filesystem/filesystem").saveFile("/workspace/.c9.brokensettings.xml",a.xml||a),this.model.load(e),d.dispatchEvent("loadsettings",{model:this.model})}else d.dispatchEvent("loadsettings",{model:this.model});d.addEventListener("$event.loadsettings",this.$loadsettings),this.loaded=!0},$loadsettings:function(b){b({model:a("core/settings").model})},init:function(){var a,b=this,c=location.href.indexOf("reset=1")>-1,f=this.sIdent="cloud9.settings."+d.workspaceId;c?a=e:localStorage[f]?a=localStorage[f]:!cloud9config.settings||cloud9config.settings=="defaults"?a=e:cloud9config.settings&&(a=cloud9config.settings);if(!a){d.addEventListener("socketMessage",function(a){if(a.message.type=="settings"){var c=a.message.settings;if(!c||c=="defaults")c=e;b.load(c),d.removeEventListener("socketMessage",arguments.callee)}}),d.onLine===!0&&d.send({command:"settings",action:"get"});return}this.load(a);var g=function(){d.dispatchEvent("savesettings",{model:b.model})===!0&&b.saveToFile()};this.$timer=setInterval(g,6e4),apf.addEventListener("exit",g),d.addEventListener("afteronline",function(){b.saveToFile(),localStorage[f]=null,delete localStorage[f]}),d.addEventListener("afteroffline",function(){b.loaded&&b.saveToFile()})}},c.exports.init()})})(),define("build/core.packed",function(){}),function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],b=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d=typeof location!="undefined"&&location.href,e=d&&location.protocol&&location.protocol.replace(/\:/,""),f=d&&location.hostname,g=d&&(location.port||void 0),h=[];define("text",[],function(){var l,m,s;return typeof window!="undefined"&&window.navigator&&window.document?m=function(a,b){var c=l.createXhr();c.open("GET",a,!0),c.onreadystatechange=function(){c.readyState===4&&b(c.responseText)},c.send(null)}:typeof process!="undefined"&&process.versions&&process.versions.node?(s=require.nodeRequire("fs"),m=function(a,b){var c=s.readFileSync(a,"utf8");c.indexOf("﻿")===0&&(c=c.substring(1)),b(c)}):typeof Packages!="undefined"&&(m=function(a,b){var c=new java.io.File(a),d=java.lang.System.getProperty("line.separator"),c=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(c),"utf-8")),e,f,g="";try{e=new java.lang.StringBuffer,(f=c.readLine())&&f.length()&&f.charAt(0)===65279&&(f=f.substring(1));for(e.append(f);(f=c.readLine())!==null;)e.append(d),e.append(f);g=String(e.toString())}finally{c.close()}b(g)}),l={version:"1.0.7",strip:function(a){if(a){var a=a.replace(b,""),d=a.match(c);d&&(a=d[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var b,c,d;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;for(c=0;c<3;c++){d=a[c];try{b=new ActiveXObject(d)}catch(e){}if(b){a=[d];break}}if(!b)throw Error("createXhr(): XMLHttpRequest not available");return b},get:m,parseName:function(a){var b=!1,c=a.indexOf("."),d=a.substring(0,c),a=a.substring(c+1,a.length),c=a.indexOf("!");return c!==-1&&(b=a.substring(c+1,a.length),b=b==="strip",a=a.substring(0,c)),{moduleName:d,ext:a,strip:b}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e=l.xdRegExp.exec(a),f;return e?(a=e[2],e=e[3],e=e.split(":"),f=e[1],e=e[0],(!a||a===b)&&(!e||e===c)&&(!f&&!e||f===d)):!0},finishLoad:function(a,b,c,d,e){c=b?l.strip(c):c,e.isBuild&&(h[a]=c),d(c)},load:function(a,b,c,h){if(h.isBuild&&!h.inlineText)c();else{var j=l.parseName(a),k=j.moduleName+"."+j.ext,m=b.toUrl(k),n=h&&h.text&&h.text.useXhr||l.useXhr;!d||n(m,e,f,g)?l.get(m,function(b){l.finishLoad(a,j.strip,b,c,h)}):b([k],function(a){l.finishLoad(j.moduleName+"."+j.ext,j.strip,a,c,h)})}},write:function(a,b,c){if(b in h){var d=l.jsEscape(h[b]);c.asModule(a+"!"+b,"define(function () { return '"+d+"';});\n")}},writeFile:function(a,b,c,d,e){var b=l.parseName(b),f=b.moduleName+"."+b.ext,g=c.toUrl(b.moduleName+"."+b.ext)+".js";l.load(f,c,function(){var b=function(a){return d(g,a)};b.asModule=function(a,b){return d.asModule(a,g,b)},l.write(a,f,b,e)},e)}}})}(),define("text!ext/settings/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window id="winSettings"\n      skin      = "fm-window"\n      class     = "unselectable"\n      title     = "Preferences"\n      flex      = "1"\n      modal     = "false"\n      model     = "{require(\'ext/settings/settings\').model}"\n      optimize  = "true">\n        <a:hbox\n          anchors  = "0 0 0 0"\n          overflow = "hidden">\n            <a:bar id="barSettings" skinset="prefs" skin="bar-preferences" flex="1" scrollbar="sbShared 2 2 2">\n            </a:bar>\n        </a:hbox>\n    </a:window>\n</a:application>\n'}),define("text!ext/settings/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:bar name="bar-preferences">\n        <a:style><![CDATA[\n            .bar-preferences {\n                position         : relative;\n                overflow-y       : hidden;\n                overflow-x       : hidden;\n                /*background-image : url(images/panelbg.png);*/\n                color            : #202020;\n                font-family      : Tahoma, Arial;\n                font-size        : 12px;\n                text-shadow : rgba(255, 255, 255, 0.8) 0px 1px 0px;\n            }\n            \n            .bar-preferences .header {\n                background-color : #f6f6f6;\n                height           : 39px;\n                padding          : 0;\n                cursor           : default;\n                border-bottom    : 1px solid white;\n                font-weight      : bold;\n                font-size        : 13px;\n                position         : relative;\n                overflow         : visible;\n                display          : block;\n                font-family      : Tahoma, Arial;\n                font-size        : 13px;\n                color            : #303030;\n                font-weight      : bold;\n                margin           : 5px 4px 10px 4px;\n                \n                text-shadow : none;\n                \n                -moz-border-radius    : 3px;\n                -webkit-border-radius : 3px;\n                \n                -moz-box-shadow: 1px 1px 1px -1px rgba(0, 0, 0, 0.15);\n                -webkit-box-shadow: 1px 1px 1px -1px rgba(0, 0, 0, 0.15);\n                box-shadow: 1px 1px 1px -1px rgba(0, 0, 0, 0.15);\n                \n                filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#ffffff\', endColorstr=\'#ebebeb\');\n                -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=\'#ffffff\', endColorstr=\'#ebebeb\')";\n                \n                background: -webkit-gradient(linear, left top, left bottom, from(rgba(255, 255, 255, 1)), color-stop(1, rgba(235, 235, 235,1)));\n                -webkit-background-origin: padding-box; \n                -webkit-background-clip: content-box;\n                \n                background:-moz-linear-gradient(\n                    center bottom,\n                    rgba(235, 235, 235, 1) 15%,\n                    rgba(255, 255, 255,1) 60%\n                \n                )  repeat scroll 0 0 transparent;\n            }\n            \n            .bar-preferences .header SPAN {\n                background-image    : url(images/preferences.png);\n                background-position : 0 0;\n                background-repeat   : no-repeat;\n                width:21px;\n                height:21px;\n                position:absolute;\n                top:11px;\n                left:10px;\n            }\n            \n            .bar-preferences .header DIV {\n                padding : 12px 0 0 39px;\n            }\n            \n            .bar-preferences .cbcontainer {\n                margin : 0px 0 0 5px;\n            }\n            \n            .bar-preferences .first {\n                margin-top : 10px;\n            }\n            \n            .bar-preferences .underlined,\n            .bar-preferences .underlined2 {\n                border-bottom : 1px dashed #b9b9b9;\n                margin        : 5px 0 0 5px;\n                padding-bottom : 6px;\n                \n                -moz-box-shadow    : 1px 1px 1px -1px rgba(255, 255, 255, 0.5);\n                -webkit-box-shadow : 1px 1px 1px -1px rgba(255, 255, 255, 0.5);\n                box-shadow         : 1px 1px 1px -1px rgba(255, 255, 255, 0.5);\n            }\n            \n            .bar-preferences .underlined2 {\n                margin: 1px 0 0 5px;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n            <a:main container=".">\n                <div class="bar-preferences">\n                    \n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n</a:skin>'}),define("text!ext/panels/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\r\n    <a:checkbox class="underlined" label="Enable UI Animations" value="[general/@animateui]" skin="checkbox_grey" position="1000" />\r\n    <a:checkbox position="1001" class="underlined" label="Animate Scrolling" value="[editors/code/@animatedscroll]" skin="checkbox_grey" />\r\n</a:application>\r\n'}),define("text!ext/panels/panels.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:menu id="mnuWindows">\n        <a:item submenu="mnuProjectBar">Project bar</a:item>\n    \t<a:item submenu="mnuTabs">Tabs</a:item>\n    \t<a:item submenu="mnuToolbar">Toolbar</a:item>\n    \t<a:divider />\n    </a:menu>\n    \n    <a:menu id="mnuTabs">\n    </a:menu>\n    \n    <a:menu id="mnuProjectBar">\n    </a:menu>\n    \n    <a:menu id="mnuToolbar">\n    </a:menu>\n</a:application>'}),define("ext/panels/panels",["require","exports","module","core/ide","core/ext","core/settings","text!ext/panels/panels.xml","text!ext/panels/settings.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/settings"),g=a("text!ext/panels/panels.xml"),h=a("text!ext/panels/settings.xml");c.exports=e.register("ext/panels/panels",{name:"Panel Manager",dev:"Ajax.org",alone:!0,type:e.GENERAL,markup:g,minWidth:150,nodes:[],panels:{},currentPanel:null,register:function(a,b){var c=this,e,g=1e6;for(var h in this.panels){var i=this.panels[h].$panelPosition-b.position;i>0&&i<g&&(e=this.panels[h],g=i)}a.mnuItem=mnuProjectBar.insertBefore(new apf.item({caption:a.name,type:"radio",value:a.path,group:this.group,"onprop.selected":function(b){b.value&&c.activate(a)}}),e&&e.mnuItem),a.button=navbar.insertBefore(new apf.button({skin:"mnubtn",state:"true","class":b["class"],caption:b.caption}),e&&e.button||navbar.firstChild),a.button.addEventListener("mousedown",function(b){var d=this.value;if(c.currentPanel&&(c.currentPanel!=a||d)&&d){c.deactivate(c.currentPanel==a,!0);if(d){apf.isTrue(f.model.queryValue("general/@animateui"))||colLeft.hide();return}}c.activate(a,!0)}),this.panels[a.path]=a,a.$panelPosition=b.position,a.nodes.push(a.button,a.mnuItem),d.addEventListener("init."+a.path,function(b){a.panel.setAttribute("draggable","false")}),d.addEventListener("loadsettings",function(){f.model.queryNode("auto/panels/panel[@path='"+a.path+"']")||f.model.appendXml("<panel path='"+a.path+"' width='"+a.defaultWidth+"' />","auto/panels")});var j=f.model.queryValue("auto/panels/@active");(a["default"]&&!j||j==a.path)&&c.activate(a,null,!0)},animate:function(a,b,c){var d=[],e=this;this.animateControl&&this.animateControl.stop(),this.animating=!0,navbar.$ext.style.zIndex=1e4;if(b){var f=b.$altExt||b.$ext;b.show(),b.hide()}if(a){var g=a.getLeft(),h=a.getTop(),i=a.getWidth(),j=a.getHeight(),k=a.$altExt||a.$ext,l=apf.getDiff(k),m=k.style.zIndex;i<this.minWidth&&(i=this.minWidth),k.style.position="absolute",k.style.zIndex=1e3,k.style.left=g+"px",k.style.top=h+"px",k.style.width=i-l[0]+"px",k.style.height=j-l[1]+"px",b?d.push({oHtml:f,type:"fade",from:0,to:1},{oHtml:f,type:"width",from:i,to:c},{oHtml:k,type:"width",from:i,to:c},{oHtml:colLeft.$ext,type:"width",from:i,to:c}):(colLeft.$ext.style.minWidth=0,d.push({oHtml:k,type:"left",from:g,to:g-i},{oHtml:colLeft.$ext,type:"width",from:i,to:0}))}else{b.show(),colLeft.show();var g=b.getLeft(),h=b.getTop(),j=b.getHeight(),i=0;d.push({oHtml:f,type:"left",from:g-c,to:g},{oHtml:colLeft.$ext,type:"width",from:i,to:c})}if(b){var n=apf.getDiff(f),o=f.style.zIndex;f.style.position="absolute",f.style.zIndex=2e3,f.style.left=g+"px",f.style.top=h+"px",f.style.width=c-n[0]+"px",f.style.height=j-n[1]+"px",b.show()}colLeft.$ext.style.width=i+"px";var p={steps:8,interval:apf.isChrome?0:5,control:this.animateControl={},anim:apf.tween.EASEOUT,tweens:d,oneach:function(){apf.layout.forceResize()},onfinish:function(){b&&(f.style.zIndex=o,f.style.position=f.style.left=f.style.top=f.style.height=f.style.width="",apf.setOpacity(f,1),colLeft.$ext.style.minWidth=e.minWidth+"px"),a&&(k.style.zIndex=m,k.style.position=k.style.left=k.style.top=k.style.height=k.style.width="",apf.setOpacity(k,1),a.hide(),b||colLeft.hide()),e.animating=!1}};p.onstop=p.onfinish,apf.tween.multi(document.body,p)},activate:function(a,b,c){if(this.currentPanel==a)return;e.initExtension(a);var g=this.currentPanel;this.currentPanel&&this.currentPanel!=this&&this.deactivate();var h=f.model.queryValue("auto/panels/panel[@path='"+a.path+"']/@width")||a.defaultWidth;c||!apf.isTrue(f.model.queryValue("general/@animateui"))?(a.panel.show(),colLeft.setWidth(h)):c||this.animate(g&&g.panel,a.panel,h),colLeft.show(),b||a.button.setValue(!0),splitterPanelLeft.show(),this.currentPanel=a,d.dispatchEvent("showpanel."+a.path),a.mnuItem.select()},deactivate:function(a,b){if(!this.currentPanel)return;apf.isTrue(f.model.queryValue("general/@animateui"))?b&&this.animate(this.currentPanel.panel):this.currentPanel.panel.hide(),a||this.currentPanel.button.setValue(!1),splitterPanelLeft.hide(),apf.isGecko&&apf.layout.forceResize(d.vbMain.$ext),f.model.setQueryValue("auto/panels/@active",""),d.dispatchEvent("hidepanel."+this.currentPanel.path),this.currentPanel=null},unregister:function(a){a.mnuItem.destroy(!0,!0),delete this.panels[a.path]},init:function(a){var b=this;this.nodes.push(this.group=apf.document.documentElement.appendChild(new apf.group({value:"[{require('core/settings').model}::auto/panels/@active]"})),barMenu.appendChild(new apf.button({submenu:"mnuWindows",caption:"Windows",skin:"c9-menu-btn",margin:"1 0 0 0"})),mnuWindows),colLeft.addEventListener("resize",function(){if(!b.currentPanel||b.animating)return;var a="auto/panels/panel[@path='"+b.currentPanel.path+"']/@width";f.model.queryValue(a)!=colLeft.getWidth()&&f.model.setQueryValue(a,colLeft.getWidth())});var b=this;this.$settings={},d.addEventListener("loadsettings",function(a){var b=a.model.queryNode("general/@animateui");b||a.model.setQueryValue("general/@animateui",apf.isGecko?!1:!0)});var c=["visible","flex","width","height","state"];d.addEventListener("savesettings",function(a){var d=!1,e=apf.createNodeFromXpath(a.model.data,"auto/panel/text()"),f,g,h,i,j,k,l,m=c.length;for(h in b.panels){j=b.panels[h].panel;if(!j)continue;b.$settings[h]||(b.$settings[h]={parent:{}},d=!0),i=j.parentNode,f=b.$settings[h],g=b.$settings[h].parent;for(l=0;l<m;l++){if(c[l]=="width"){f[k=c[l]]!==b.panels[h].$lastWidth&&(f[k]=b.panels[h].$lastWidth,d=!0);continue}f[k=c[l]]!==j[k]&&(f[k]=j[k],d=!0),g[k]!==i[k]&&(g[k]=i[k],d=!0)}}if(d)return e.nodeValue=JSON.stringify(b.$settings),!0})},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/settings/settings",["require","exports","module","core/ide","core/ext","text!ext/settings/settings.xml","ext/panels/panels","text!ext/settings/skin.xml","core/settings","text!ext/panels/settings.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("text!ext/settings/settings.xml"),g=a("ext/panels/panels"),h=a("text!ext/settings/skin.xml"),i=a("core/settings"),j=a("text!ext/panels/settings.xml");c.exports=e.register("ext/settings/settings",{name:"Preferences",dev:"Ajax.org",alone:!0,type:e.GENERAL,markup:f,skin:{id:"prefs",data:h,"media-path":d.staticPrefix+"/ext/settings/images/"},defaultWidth:250,commands:{showsettings:{hint:"open the settings window"}},hotitems:{},nodes:[],save:function(){i.save()},saveSettingsPanel:function(){var a=self.pgSettings?pgSettings.getPages():[],b=0,c=a.length,e=!1;for(;b<c;++b){if(!a[b].$at)continue;a[b].$at.undolength>0&&(a[b].$commit(a[b]),e=!0)}(d.dispatchEvent("savesettings",{model:this.model})!==!1||e)&&i.save()},addSection:function(a,b,c,d){var e=this.model.queryNode(c+"/"+a);e||this.model.appendXml("<"+a+' name="'+b+'" />',c)},hook:function(){g.register(this,{position:1e5,caption:"Preferences","class":"preferences"}),this.model=i.model},headings:{},getHeading:function(a){if(this.headings[a])return this.headings[a];var b=barSettings.appendChild(new apf.bar({skin:"basic"}));return b.$int.innerHTML='<div class="header"><span></span><div>'+a+"</div></div>",this.headings[a]=b,b},init:function(a){this.panel=winSettings,colLeft.appendChild(winSettings),this.nodes.push(winSettings),this.addSettings("General",j)},addSettings:function(a,b){var c=this;d.addEventListener("init.ext/settings/settings",function(c){function h(a,b){var c=b.$map,d,e=1e6;for(var f in c){var g=f-a.position;g>0&&g<e&&(d=b.$map[f],e=g)}return d}var d=c.ext.getHeading(a),e=d.lastChild;d.insertMarkup(b),d.$map||(d.$map={});var f=[];e||(e=d.firstChild,f.push(e));while(!e)f.push(e=e.nextSibling);f.length==0&&(f=d.childNodes);for(var g=0;g<f.length;g++)f[g].nodeType==1&&f[g].position&&(d.$map[f[g].position]=f[g],nextSibling=h(f[g],d),nextSibling!==undefined&&f[g].nextSibling!=nextSibling&&d.insertBefore(f[g],nextSibling))})},showsettings:function(a){return g.activate(this),this.enable(),!1},saveSettings:function(){winSettings.hide(),this.saveSettingsPanel()},applySettings:function(){this.saveSettingsPanel()},cancelSettings:function(){winSettings.hide();var a=pgSettings.getPages(),b=0,c=a.length;for(;b<c;++b){if(!a[b].$at)continue;a[b].$at.undo(-1)}},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],g.unregister(this)}})}),define("ext/filesystem/filesystem",["require","exports","module","core/ide","core/ext","core/util","ext/settings/settings"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/settings/settings");c.exports=e.register("ext/filesystem/filesystem",{name:"File System",dev:"Ajax.org",type:e.GENERAL,alone:!0,deps:[],commands:{open:{hint:"open a file to edit in a new tab",commands:{"[PATH]":{hint:"path pointing to a file. Autocomplete with [TAB]"}}},c9:{hint:"alias for 'open'",commands:{"[PATH]":{hint:"path pointing to a file. Autocomplete with [TAB]"}}}},readFile:function(a,b){if(!this.webdav)return;var c=this;if(!d.onLine){var e=function(){c.webdav.read(a,b),d.removeEventListener("afteronline",e)};d.addEventListener("afteronline",e)}else this.webdav.read(a,b)},saveFile:function(a,b,c){if(!this.webdav)return;this.webdav.write(a,b,null,function(a,b,d){if(b==apf.ERROR&&d.status==400&&d.retries<3||b==apf.TIMEOUT)return d.tpModule.retry(d.id);c(a,b,d)})},list:function(a,b){this.webdav&&this.webdav.list(a,b)},exists:function(a,b){this.webdav&&this.webdav.exists(a,b)},createFolder:function(a,b){if(!b){b=apf.document.activeElement;if(!b||b.localName!="tree")b=trFiles}var c=b.selected;!c&&b.xmlRoot&&(c=b.xmlRoot.selectSingleNode("folder"));if(!c)return;c.getAttribute("type")!="folder"&&c.tagName!="folder"&&(c=c.parentNode);if(this.webdav){var e=a?a:"New Folder",g=c.getAttribute("path");g||(g=d.davPrefix,c.setAttribute("path",g));var h=this,i=0;function j(d){d?(a=e+"."+i++,h.exists(g+"/"+a,j)):(b.focus(),h.webdav.exec("mkdir",[g,a],function(d){if(!d||d instanceof Error)throw Error;var e=apf.getXml(d),h=g+"/"+a,i=e.selectSingleNode("//folder[@path='"+h+"']");if(!i)return f.alert("Error","Folder '"+a+"' could not be created","An error occurred while creating a new folder, please try again.");b.slideOpen(null,c,!0,function(a,d,e){a||b.add(i,c),i=apf.queryNode(c,"folder[@path='"+h+"']"),b.select(i),b.startRename()})}))}a=e,this.exists(g+"/"+a,j)}},createFile:function(a,b){var c;b?c=apf.getXml('<file newfile="1" type="file" size="" changed="1" name="Untitled.txt" contenttype="text/plain; charset=utf-8" modifieddate="" creationdate="" lockable="false" hidden="false" executable="false"></file>'):(c=trFiles.selected,c||(c=trFiles.xmlRoot.selectSingleNode("folder")),c.getAttribute("type")!="folder"&&c.tagName!="folder"&&(c=c.parentNode));if(this.webdav){var e=a?a:"Untitled";b||trFiles.focus();var g=this,h=c.getAttribute("path");h||(h=d.davPrefix,c.setAttribute("path",h));var i=0,j=function(k){if(k)a=e+"."+i++,g.exists(h+"/"+a,j);else if(!b){var l,m=0;function n(){m==2&&(l=apf.xmldb.appendChild(c,l),trFiles.select(l),trFiles.startRename(),trFiles.slideOpen(null,c,!0))}trFiles.slideOpen(null,c,!0,function(){m++,n()}),g.webdav.exec("create",[h,a],function(b){g.webdav.exec("readdir",[h],function(b){if(!b||b instanceof Error)return f.alert("Error","File '"+a+"' could not be created","An error occurred while creating a new file, please try again.");var c=apf.getXml(b),d=h+"/"+a,e=c.selectNodes("//file[@path='"+d+"']");if(e.length===0)return f.alert("Error","File '"+a+"' could not be created","An error occurred while creating a new file, please try again.");l=e[0],m++,n()})})}else c.setAttribute("name",a),c.setAttribute("path",h+"/"+a),d.dispatchEvent("openfile",{doc:d.createDocument(c),type:"newfile"})};a=e,this.exists(h+"/"+a,j)}},beforeStopRename:function(a){var b=a.match(/^(?:\w|[.])(?:\w|[.-])*$/);return b!==null&&b[0]==a},beforeRename:function(a,b,c,e){var f=a.getAttribute("path"),g=tabEditors.getPage(f);b?c=f.replace(/^(.*\/)[^\/]+$/,"$1"+b):b=c.match(/[^\/]+$/),a.setAttribute("oldpath",a.getAttribute("path")),a.setAttribute("path",c),apf.xmldb.setAttribute(a,"name",b),g&&!e&&g.setAttribute("id",c);var h=a.childNodes,i=h.length;for(var j=0;j<i;++j){var k=h[j];if(!k||k.nodeType!=1)continue;var b=k.getAttribute("name");this.beforeRename(k,null,a.getAttribute("path")+"/"+b)}d.dispatchEvent("updatefile",{path:f,newPath:c,filename:b&&b.input,xmlNode:a})},beforeMove:function(a,b,c){var e=b.getAttribute("path"),f=tabEditors.getPage(e),g=a.getAttribute("path")+"/"+b.getAttribute("name");b.setAttribute("path",g),f&&f.setAttribute("id",g);var h=b.childNodes,i=h.length;for(var j=0;j<i;++j)this.beforeMove(b,h[j]);return d.dispatchEvent("updatefile",{path:e,xmlNode:b}),!0},remove:function(a,b){var c=tabEditors.getPage(a);c&&tabEditors.remove(c),b||(b=function(){}),davProject.remove(a,!1,b)},init:function(){function c(a){return d.send({command:"internal-isfile",argv:a.data.argv,cwd:a.data.cwd,sender:"filesystem"}),!1}this.model=new apf.model,this.model.load("<data><folder type='folder' name='"+d.projectName+"' path='"+d.davPrefix+"' root='1'/></data>"),this.model.setAttribute("whitespace",!1);var a={};this.model.addEventListener("update",function(b){if(b.action==="attribute"||b.action==="add"||b.action==="move"){var c=b.xmlNode,d=c.parentNode;if(a[c.getAttribute("a_id")])return;a[c.getAttribute("a_id")]=!0;var e=new apf.Sort;e.set({xpath:"@name",method:"filesort"});var f=e.apply(d.childNodes);for(var g=0,h=f.length;g<h;g++)if(f[g]==c){c.nextSibling!=f[g+1]&&apf.xmldb.appendChild(d,c,f[g+1]);break}}});var b=location.href.replace(location.pathname+location.hash,"")+d.davPrefix;this.webdav=new apf.webdav({id:"davProject",url:b,onauthfailure:function(){d.dispatchEvent("authrequired")}}),d.addEventListener("consolecommand.open",c),d.addEventListener("consolecommand.c9",c);var e=this;d.addEventListener("openfile",function(a){var b=a.doc,c=b.getNode(),f=a.doc.$page&&a.doc.$page.$editor;apf.xmldb.setAttribute(c,"loading","true"),d.addEventListener("afteropenfile",function(a){a.node==c&&(apf.xmldb.removeAttribute(a.node,"loading"),d.removeEventListener("afteropenfile",arguments.callee))});if(b.hasValue()){d.dispatchEvent("afteropenfile",{doc:b,node:c,editor:f});return}if(b.cachedValue)b.setValue(b.cachedValue),delete b.cachedValue,d.dispatchEvent("afteropenfile",{doc:b,node:c,editor:f});else if(a.type&&a.type==="newfile"||Number(c.getAttribute("newfile")||0)===1)b.setValue(""),d.dispatchEvent("afteropenfile",{doc:b,node:c,editor:f});else{if(d.dispatchEvent("readfile",{doc:b,node:c})===!1)return;var g=c.getAttribute("path"),h=function(a,e,h){e!=apf.SUCCESS?(h.status!==404&&console.log("Opening file failed for",g,"server responded with",e,h),d.dispatchEvent("filenotfound",{node:c,url:h.url,path:g})):(b.setValue(a),d.dispatchEvent("afteropenfile",{doc:b,node:c,editor:f}))};e.readFile(g,h)}}),d.addEventListener("reload",function(a){var b=a.doc,c=b.getNode(),f=c.getAttribute("path"),g=function(a,h,i){h==apf.OFFLINE?d.addEventListener("afteronline",function(a){e.readFile(f,g),d.removeEventListener("afteronline",arguments.callee)}):h!=apf.SUCCESS?i.status==404&&d.dispatchEvent("filenotfound",{node:c,url:i.url,path:f}):d.dispatchEvent("afterreload",{doc:b,data:a})};e.readFile(f,g)})},enable:function(){},disable:function(){},destroy:function(){this.webdav.destroy(!0,!0),this.model.destroy(!0,!0)}})}),define("ext/themes/themes",["require","exports","module","core/ide","core/ext","ext/settings/settings"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/settings/settings");c.exports=e.register("ext/themes/themes",{name:"Themes",dev:"Ajax.org",alone:!0,offline:!1,type:e.GENERAL,nodes:[],currTheme:"",saved:!1,register:function(a){var b=this;for(var c in a)this.nodes.push(mnuThemes.appendChild(new apf.item({caption:c,type:"item",value:a[c],onmouseover:function(a){b.currTheme=f.model.queryValue("editors/code/@theme"),f.model.setQueryValue("editors/code/@theme",this.value),b.saved=!1},onmouseout:function(a){b.saved||(f.model.setQueryValue("editors/code/@theme",b.currTheme),b.saved=!1)}})))},set:function(a,b){f.model.setQueryValue("editors/code/@theme",a),f.save(),d.dispatchEvent("theme_change",{theme:a}),this.saved=!0,d.dispatchEvent("track_action",{type:"theme change",theme:a})},init:function(){var a=this,b=new apf.item({caption:"Themes",submenu:"mnuThemes"});this.nodes.push(mnuView.appendChild(b),apf.document.documentElement.appendChild(new apf.menu({id:"mnuThemes",onitemclick:function(b){a.set(b.relatedNode.value)}}))),d.addEventListener("init.ext/code/code",function(){ceEditor&&ceEditor.$editor&&mnuThemes.select(null,ceEditor.$editor.getTheme())})},enable:function(){},disable:function(){},destroy:function(){}})}),define("ext/themes_default/themes_default",["require","exports","module","core/ext","ext/themes/themes"],function(a,b,c){var d=a("core/ext"),e=a("ext/themes/themes");c.exports=d.register("ext/themes_default/themes_default",{name:"Themes",dev:"Ajax.org",alone:!0,type:d.GENERAL,nodes:[],themes:{Chrome:"ace/theme/chrome",Clouds:"ace/theme/clouds","Clouds Midnight":"ace/theme/clouds_midnight",Cobalt:"ace/theme/cobalt","Crimson Editor":"ace/theme/crimson_editor",Dawn:"ace/theme/dawn",Eclipse:"ace/theme/eclipse","Idle Fingers":"ace/theme/idle_fingers","Kr Theme":"ace/theme/kr_theme",Merbivore:"ace/theme/merbivore","Merbivore Soft":"ace/theme/merbivore_soft","Mono Industrial":"ace/theme/mono_industrial",Monokai:"ace/theme/monokai","Pastel On Dark":"ace/theme/pastel_on_dark","Solarized Dark":"ace/theme/solarized_dark","Solarized Light":"ace/theme/solarized_light",TextMate:"ace/theme/textmate",Tomorrow:"ace/theme/tomorrow","Tomorrow Night":"ace/theme/tomorrow_night","Tomorrow Night Blue":"ace/theme/tomorrow_night_blue","Tomorrow Night Bright":"ace/theme/tomorrow_night_bright","Tomorrow Night Eighties":"ace/theme/tomorrow_night_eighties",Twilight:"ace/theme/twilight","Vibrant Ink":"ace/theme/vibrant_ink"},init:function(){e.register(this.themes)},enable:function(){},disable:function(){},destroy:function(){}})}),define("ext/dockpanel/libdock",["require","exports","module"],function(a,b,c){var d=c.exports=function(a,b,c,d,e,f){this.columnCounter=0,this.$parentHBox=a,this.$cbFindPage=b,this.$cbStorePage=c,this.$cbChange=e,this.$cbFindOptions=d,this.$cbAnimate=f;var g=this.indicator=document.body.appendChild(document.createElement("div"));g.style.position="absolute",g.style.display="none",g.style.border="3px solid #5c5c5c",g.style.zIndex=1e6};((function(){function g(a,b){var c=a.uniqueId;if(!c)return;var d=f[c].node;if(!b&&d&&d.parentNode)return d.parentNode.$dockData;var g;return e.bars.each(function(a){if(g)return;a.sections.each(function(b){if(g)return;b.uniqueId==c&&(g=a),b.buttons.each(function(a){if(g)return;a.uniqueId==c&&(g=b)})})}),g}function h(a){for(var b=0;b<a.length;b++){var c=a[b].buttons||a[b].sections;if(c){if(h(c))return!0}else if(a[b].hidden<0)return!0}return!1}function i(a,b){for(var c=b;c<a.length;c++)if(a[c].uniqueId&&f[a[c].uniqueId].node&&f[a[c].uniqueId].node.parentNode)return f[a[c].uniqueId].node}function j(a,b,c,d){if(!a.getPages||!a.getPages().length){if(d){var e=b.$dockData.buttons;for(var f=0;f<e.length;f++)d.insertIndex(e[f].$dockData,f)}var g=b.parentNode;c.removeNode(),a.parentNode&&c.appendChild(a),b.removeNode(),g.selectNodes("vbox").length||(g.removeNode(),g.vbox&&(g.vbox.removeNode(),g.splitter.removeNode()))}}function k(){var a,b=e.bars;for(var c=b.length-1;c>=0;c--)a=b[c],a.cache&&a.cache.childNodes.length==1&&(a.cache.destroy(!0,!0),delete a.cache)}function l(a){a.$dockData.uniqueId?f[a.$dockData.uniqueId]={node:a,data:a.$dockData}:a.$dockData.uniqueId=f.push({node:a,data:a.$dockData})-1}function m(a){var b=a.nextSibling;while(b){if(b.localName=="bar"&&b.visible)break;if(b.localName=="vbox"&&b.visible){b=b.bar;break}b=b.nextSibling}return b!=a?b:null}function n(a){var b=a.previousSibling;while(b){if(b.localName=="bar"&&b.visible)break;if(b.localName=="vbox"&&b.visible){b=b.bar;break}b=b.previousSibling}return b!=a?b:null}function o(a,b){var c=a.nextSibling;while(c&&!c.visible&&(!b||c.localName!=b))c=c.nextSibling;return c}function p(a,b){var c=a.sections;if(!h(c))return;var d=this.$addBar(b,a);for(var e=0;e<c.length;e++)q.call(this,c[e],c[e].position?d.childNodes[c[e].position]:null,d);a.expanded>0&&this.expandBar(d,a.expanded==2,!0)}function q(a,b,c){var d=a.buttons;if(!h(d))return;var e=this.$addSection(c,b,null,a);this.$addMenu(e,a);for(var f=0;f<d.length;f++)r.call(this,d[f],null,e)}function r(a,b,c){if(a.hidden>0)return;c.parentNode,this.$addButton(c,b,c.$menu,this.$addPage(this.$cbFindPage(a.ext),b&&b.$dockpage,c.$menu,a.caption,a.caption&&a.caption.toLowerCase()||"",c),apf.extend(a,this.$cbFindOptions(a.ext)||{}))}function s(a,b,c){var d=this;this.animateControl&&this.animateControl.stop(),this.animating=!0,a.show(),a.vbox.show();var e=a.getWidth(),f=a.vbox.getWidth()-apf.getWidthDiff(a.vbox.$ext);b?a.hide():a.vbox.setWidth(e);var g=[b?{oHtml:a.vbox.$ext,type:"width",from:f,to:e}:{oHtml:a.vbox.$ext,type:"width",from:e,to:f}],h=a.vbox.getElementsByTagNameNS(apf.ns.aml,"tab");h.each(function(a){g.push(b?{oHtml:a.$ext,type:"fade",from:1,to:-1}:{oHtml:a.$ext,type:"fade",from:0,to:1}),a.$ext.style.width=f+"px"});var i={steps:6,interval:apf.isChrome?5:5,control:this.animateControl={},anim:apf.tween.easeOutCubic,tweens:g,oneach:function(){apf.layout.forceResize(a.vbox.$ext)},onfinish:function(){setTimeout(function(){h.each(function(a){apf.setOpacity(a.$ext,1),a.$ext.style.width=""})}),a.vbox.setWidth(f),c&&c(),d.animating=!1}};i.onstop=i.onfinish,apf.tween.multi(document.body,i)}function t(a,b){var c;if(a=="button"){if(b.localName=="page")return b.$dockbutton;if(b.localName=="divider"){c=b.parentNode.selectNodes("button");if(c.length==1)return c[0]}return b}if(a=="page"){if(b.localName=="button")return b.$dockpage;if(b.localName=="divider"){c=b.parentNode.selectNodes("button");if(c.length==1)return c[0].$dockpage}return b}if(a=="section")return b.localName=="page"&&b.parentNode.getPages().length==1?b.$dockbutton.parentNode:b.localName=="divider"?b.parentNode:b}function u(a,b){return b>a-c&&b<a+c}var a,b,c=3,d=100,e,f;this.getState=function(a){if(a)return e;var b={};return b.bars=e.bars.slice(0),b.bars.each(function(a,b,c){a=c[b]=apf.extend({},a),delete a.cache,a.sections=a.sections.slice(0),a.sections.each(function(a,b,c){a=c[b]=apf.extend({},a),delete a.cache,a.buttons=a.buttons.slice(0),a.buttons.each(function(a,b,c){a=c[b]=apf.extend({},a),delete a.cache})})}),JSON.parse(JSON.stringify(b))},this.loadState=function(a){this.clearState(),e=JSON.parse(JSON.stringify(a)),f=[];if(!e.bars)return;e.bars.each(function(a){a.uniqueId=f.push({data:a})-1,a.sections.each(function(a){a.uniqueId=f.push({data:a})-1,a.buttons.each(function(a){a.uniqueId=f.push({data:a})-1})})});var b=e.bars;for(var c=0;c<b.length;c++)p.call(this,b[c])},this.clearState=function(){if(!e||!e.bars)return;e.bars.each(function(a){var b=a.cache;if(!b)return;if(b.localName=="bar"&&b.dock){b.hide(),b.vbox&&b.vbox.hide();var c=b.selectNodes("vbox");for(var d=0;d<c.length;d++){var e=c[d].selectNodes("button");if(e&&e.length&&e[0])for(var f=0;f<e.length;f++)e[f].hideMenu(),e[f].$dockpage.parentNode.remove(e[f].$dockpage),e[f].$dockData.hidden=-1}}else if(!b.bar)return;b.destroy(!0,!0),b.vbox&&b.vbox.destroy(!0,!0)})},this.addTo=function(a,b){var c=f[b].data;return c.buttons?c.buttons.push(a):c.sections&&c.sections.push(a),a.uniqueId=f.push({data:a})-1,a.uniqueId},this.show=function(a,b){var c=f[a].data,d;if(!c.bars&&!c.sections){var j=g(f[a].data);if(!h(j.buttons)){var k=g(j);h(k.sections)?(j.buttons.each(function(c){if(c.hidden!=2||c.uniqueId==a)c.hidden=b?-2:-1}),d=i(k.sections,k.sections.indexOf(j)+1),q.call(this,j,d,f[k.uniqueId].node)):(j.buttons.each(function(c){if(c.hidden!=2||c.uniqueId==a)c.hidden=b?-2:-1}),d=i(e.bars,e.bars.indexOf(k)+1),p.call(this,k,d))}else c.hidden>0?(c.hidden=b?-2:-1,d=i(j.buttons,j.buttons.indexOf(c)+1),r.call(this,c,d,f[j.uniqueId].node)):r.call(this,c,null,f[j.uniqueId].node)}else(c.bars||[c]).each(function(a){(a.sections||[a]).each(function(a){(a.buttons||[a]).each(function(a){})})})},this.hide=function(a,b){var c=f[a].data;(c.bars||[c]).each(function(a){(a.sections||[a]).each(function(a){(a.buttons||[a]).each(function(a){a=f[a.uniqueId].node;if(a.$dockData.hidden<0){a.setValue(!1);var c=a.$dockpage;c.parentNode.remove(c,null,!0),a.$dockData.hidden=b?2:1}})})})},this.isExpandedFull=function(a){var b=a.parentNode;while(b&&b.id!="hboxDockPanel"){if(b.expanded)return!0;b=b.parentNode}return!1},this.isExpanded=function(a){var b=f[a].node;b||(this.show(a),b=f[a].node);var c=g(g(f[a].data));return f[c.uniqueId].data.expanded},this.showMenu=function(a){var b=f[a].node;b||(this.show(a),b=f[a].node),b.showMenu();var c=b.$dockpage.parentNode;c.activepage||c.set(c.getPage(0))},this.findBar=function(a,b){var c=f[a].node,d=c&&c.parentNode.parentNode;return b?d:d.$dockData},this.findTabs=function(a,b){var c=f[a].node,d=c.vbox.selectNodes("tab");if(b)return apf.getArrayFromNodelist(d);var e=[];for(var g=0;g<d.length;g++)e.push(d[g].$dockData);return e},this.expandBar=function(a,b,c){typeof a=="number"&&(a=f[a].node),this.$currentMenu&&this.$currentMenu.hide();var d=a.parentNode||this.$parentHBox;if(!a.vbox){var e=this;a.vbox=d.insertBefore(new apf.vbox({padding:0,width:a.$dockData&&a.$dockData.width||260,splitters:!0,vdock:1,"class":"dockcol unselectable expandedpanel",childNodes:[new apf.button({dock:1,skin:"dockheader","class":"expanded",nosplitter:!0,height:11,resizable:!1,margin:"0 0 0 0",onclick:function(){e.collapseBar(a,!0,!0)}})]}),a);if(!a.vbox)return;var g=a.vbox.previousSibling;a.splitter=d.insertBefore(new apf.splitter({scale:"right","class":"splitter-editor-right panelsplitter",width:"0",ondragstart:function(){e.$currentMenu&&e.$currentMenu.hide()}}),a.vbox),g||a.splitter.setAttribute("parent",a.parentNode.parentNode.parentNode),a.splitter.bar=a.vbox.bar=a}else d.insertBefore(a.vbox,a),d.insertBefore(a.splitter,a.vbox);var h=a.selectNodes("vbox");for(var i=0;i<h.length;i++){var j=h[i].selectSingleNode("button"),k=self[j.submenu],l=k&&k.firstChild;l&&(l.extId=j.$dockData.ext[0],a.vbox.appendChild(l),l.skin=="dockbar"&&l.setAttribute("height",34),!l.flex&&l.tagName!="bar"&&!l.noflex&&l.setAttribute("flex",1))}a.vbox&&(a.vbox.show(),a.vbox.expanded=!0,a.vbox.firstChild.$ext.onmousemove({})),this.findTabs(a.$dockData.uniqueId,!0).each(function(a){a.activepage||a.set(a.getPage(0))}),a.hide(),a.expanded=!0,a.splitter.show(),a.$dockData.expanded=b?2:1,this.$cbChange()},this.collapseBar=function(a,b,c){function d(){var b=a.selectNodes("vbox"),c=a.vbox.selectNodes("tab");for(var d=0;d<b.length;d++){var e=self[b[d].selectSingleNode("button").submenu];e.appendChild(c[d])}a.show(),a.vbox.hide(),a.parentNode.removeChild(a.vbox),a.vbox.expanded=!1,a.splitter.hide()}typeof a=="number"&&(a=f[a].node),a.$dockData.expanded=b?-2:-1,a.expanded=!1,this.$currentMenu&&this.$currentMenu.hide(),d(),a.firstChild.$ext.onmousemove({}),this.$cbChange()},this.$isLastBar=function(a){var b=this.$parentHBox.lastChild;while(b&&!b.visible)b=b.previousSibling;return a==b||a==b.vbox},this.$getLastBar=function(){var a=this.$parentHBox.firstChild;if(!a)return;if(!a.visible)while(a&&!a.visible)a=a.nextSibling;return a.localName!="bar"&&(a=a.bar),a.visible?a:a.vbox},this.$startDrag=function(c,d){var e,f=0,g=this;apf.setOpacity(c.$ext,.2),apf.setStyleClass(c.$ext,"dragging");var h=this.$getLastBar(),i=apf.getAbsolutePosition(h.$ext)[0],j=this.indicator;b=null,apf.addListener(document,"mouseup",function(b){apf.removeListener(document,"mousemove",a),apf.removeListener(document,"mouseup",arguments.callee)}),apf.addListener(document,"mousemove",a=function(a){e&&(e.$ext.style.borderBottom="",e=null);if(!a)return;if(a.button!==0){document.onmouseup(null,!0);return}var k=j.style.top;c.$ext.style.top="-2000px",j.style.top="-2000px",apf.plane.hide();var l,m;if(a.clientX>i-40&&a.clientX<i){var n=c.localName=="vbox"&&c.$dockbar==h&&!c.$dockbar.selectNodes("vbox").length;l={position:n?"none":"left_of_column",aml:m=e=h}}else l=g.$calcAction(a,d),m=e=l.aml;if(b&&b.position==l.position&&b.aml==m){j.style.top=k;return}b=l;if(!m||!m.dock&&!m.bar){!f&&!1&&(f=1,apf.tween.single(c.$ext,{type:"fade",from:.2,to:1,steps:20,onfinish:function(){f=1}}));return}var p="rgba(154,190,144,0.50)",q="rgba(154,190,144,0.75)",r=apf.getAbsolutePosition(m.$ext);j.style.left=r[0]+"px",j.style.top=r[1]+"px",j.style.display="block",j.style.backgroundColor="",j.style.borderColor=p,j.style.marginLeft="0",j.innerHTML="",f&&!1&&(f=0,apf.tween.single(c.$ext,{type:"fade",from:1,to:.2,steps:20,onfinish:function(){f=0}}));var s=g.isExpandedFull(l.aml),u=m.$ext.offsetWidth,v=m.$ext.offsetHeight;switch(l.position){case"before_button":case"after_button":j.innerHTML="<div></div><div style='position:absolute'></div>",j.style.border="1px solid "+q;var w=apf.getAbsolutePosition(m.parentNode.$ext);j.style.left=w[0]-1+"px",j.style.top=w[1]+"px",u=m.parentNode.$ext.offsetWidth+1,v=m.parentNode.$ext.offsetHeight+1;var x=j.firstChild;x.style.height="7px",x.style.backgroundColor=p;var y=j.childNodes[1],z=t("button",d),A=m==z||o(m,"button")==z&&l.position=="after_button";A?(m!=z&&(r=apf.getAbsolutePosition(z.$ext)),y.style.top=r[1]-w[1]+4+"px",y.style.left="2px",y.style.right="3px",y.style.height=z.$ext.offsetHeight-9+"px",y.style.border="2px solid "+p,y.style.webkitBorderRadius="4px"):(y.style.top=r[1]-w[1]+(l.position=="before_button"?0:m.$ext.offsetHeight)+"px",y.style.width="34px",y.style.margin="0 2px 0 1px",y.style.borderBottom="3px solid "+p);break;case"in_section":t("section",d)==m.$dockfor&&(j.style.borderWidth="1px 1px 1px 1px",v--);break;case"after_page":case"before_page":var B=m.parentNode,w=apf.getAbsolutePosition(B.$ext);j.style.left=w[0]+(s?3:0)+"px",j.style.top=w[1]+(s?3:-2)+"px",j.style.borderColor=q,u=B.$ext.offsetWidth+(s?2:6),v=B.$ext.offsetHeight+(s?0:11),j.style.borderWidth="3px 3px 3px 3px";var C=l.position=="before_page"?m.previousSibling:m.nextSibling,D=t("page",d),E=D==m?m:D==C?C:!1,F=apf.getAbsolutePosition((E||m).$button,B.$ext);if(E){j.innerHTML="<div style='position:absolute;'></div><div style='position:absolute;'></div><div style='position:absolute;'></div>";var G=j.firstChild,H=j.childNodes[1],I=j.childNodes[2];G.style.left=F[0]-(s?6:3)+"px",G.style.width=E.$button.offsetWidth-6+"px",G.style.height=s?"19px":"16px",G.style.margin="-19px 0 0 0px",G.style.border="3px solid "+q,G.style.borderWidth="3px 3px 0 3px",H.style.left=F[0]+E.$button.offsetWidth-(s?6:6)+"px",H.style.right="0px",I.style.borderBottom=H.style.borderBottom="3px solid "+q,I.style.left="0px",I.style.right=u-F[0]-(s?8:12)+"px",j.style.borderTop="0px solid "+q,j.style.top=w[1]+(s?23:19)+"px",v-=26+(s?2:4),u-=s?8:6}else{j.style.top=w[1]+(s?4:0)+"px",j.innerHTML="<div style='position:absolute;'><div></div></div>",j.firstChild.style.height="16px",j.firstChild.style.width="7px",j.firstChild.style.background=q,j.firstChild.style.top="0px",j.firstChild.firstChild.style.width="0px",j.firstChild.firstChild.style.height="100%",j.firstChild.firstChild.style.margin="0 3px 0 3px",j.firstChild.firstChild.style.borderLeft="1px dotted #666",j.firstChild.firstChild.style.opacity=.6;var J=F[0]+(l.position=="before_page"?0:m.$button.offsetWidth);J+7>=u?(J-=s?11:10,j.firstChild.style.width="4px",j.firstChild.firstChild.style.marginRight="0px"):J>10?J-=s?10:7:(J-=s?3:0,j.firstChild.style.width="4px",j.firstChild.firstChild.style.marginLeft="0px"),j.firstChild.style.left=J+"px",v-=s?9:11,u-=s?8:6}break;case"before_tab":v=0;case"after_tab":j.style.left=r[0]+2+"px",j.style.top=r[1]+v-(m.nextSibling?0:3)+"px",j.style.height="3px",j.style.width=u-7+"px",j.style.borderWidth="0 0 0 0",j.style.backgroundColor=q;return;case"before_section":v=0;case"after_section":j.style.left=r[0]+"px",j.style.top=r[1]+v-3+"px",j.style.height="5px",j.style.width=m.$ext.offsetWidth+"px",j.style.borderWidth="0 0 0 0",j.innerHTML="<div style='margin:2px 0 2px 0'></div>",j.firstChild.style.backgroundColor="#5c5c5c",j.firstChild.style.height="1px",j.style.backgroundColor=p;return;case"in_column":j.innerHTML="<div style='position:absolute'></div>",j.style.borderWidth="0 0 0 0",y=j.firstChild,y.style.top="100%",y.style.borderTop="3px solid "+p,y.style.height=(c.localName=="vbox"?c.$ext.offsetHeight:50)+"px",y.style.background="rgba(172,172,172,0.5)",y.style.width="100%",y.style.webkitBorderRadius="0 0 4px 4px";break;case"left_of_column":if(m!=g.$getLastBar())j.style.borderWidth="0 0 0 3px",j.style.marginLeft="-1px";else{j.innerHTML="<div style='position:absolute'></div>",j.style.borderWidth="0 0 0 0";var y=j.firstChild;y.style.right="100%",y.style.width=0,y.style.height="100%",y.style.borderRight="3px solid "+p,y.style.background="rgba(172,172,172,0.5)",y.style.webkitBorderRadius="4px 0 0 4px",apf.tween.single(y,{type:"width",from:0,to:40,anim:apf.tween.EASEOUT,steps:20})}break;case"right_of_column":j.style.borderWidth="0 3px 0 0",g.$isLastBar(m)||(j.style.marginLeft="2px");break;default:j.style.display="none",apf.setStyleClass(c.$ext,"",["dragging"])}F=apf.getDiff(j),j.style.width=u-F[0]+"px",j.style.height=v-F[1]+"px"}),a.dragged=c,a.original=d},this.$calcAction=function(a,b){var d="none",e=document.elementFromPoint(a.clientX,a.clientY);if(e==document.body)return{};var f=apf.findHost(e);if(!f)return{};if(f.localName=="codeeditor")while(f&&!f.$dockData)f=f.bar||f.parentNode;if(!f)return{};var g;if(!f.dock||f.localName=="page"||f.localName=="tab"){var h=f;while(h&&!h.vdock)h=h.parentNode;if(h&&h.localName=="vbox"){g=apf.getAbsolutePosition(h.$ext)[1];var i=h.selectNodes("tab"),j=b.parentNode.localName=="tab"&&b.parentNode.getPages().length==1;if(u(apf.getAbsolutePosition(i[0].$ext,h.$ext)[1]+g,a.clientY))return j&&b.parentNode==i[0]?{}:{position:"before_tab",aml:i[0]};for(var k=0;k<i.length;k++)if(u(i[k].$ext.offsetHeight+1+apf.getAbsolutePosition(i[k].$ext,h.$ext)[1]+g-(f.nextSibling?0:3),a.clientY))return!j||b.parentNode!=i[k]&&b.parentNode!=i[k+1]?{position:"after_tab",aml:i[k]}:{}}}f.localName=="splitter"&&(f=f.nextSibling);if(!f.dock&&!f.bar)return{};var l=f;while(l&&l.localName!="bar"&&(l.localName!="vbox"||!l.dock&&!l.bar))l=l.parentNode;var o,p,q,r,s;l&&(g=apf.getAbsolutePosition(a.target,l.$ext),o=g[0]+a.offsetX,p=l.$ext.offsetWidth-o);if(l&&o<c)return f=l.parentNode.localName=="bar"?l.parentNode:l,r=b.localName=="divider"&&(b.parentNode.$dockbar==f||b.parentNode.$dockbar==n(f))&&!b.parentNode.$dockbar.selectNodes("vbox").length||b.localName=="button"&&b.parentNode.childNodes.length==2&&(b.parentNode.parentNode==f||b.parentNode.parentnode==n(f))||b.localName=="page"&&b.parentNode.getPages().length==1&&(b.$dockbutton.parentNode.parentNode==(f.bar||f)||b.$dockbutton.parentNode.parentNode==n(f)),{position:r?"none":"left_of_column",aml:f};if(l){if(!l)return{};var v=this.$isLastBar(l)?c*2:c;if(l&&p<v)return f=l.parentNode.localName=="bar"?l.parentNode:l,r=b.localName=="divider"&&(b.parentNode.$dockbar==f||b.parentNode.$dockbar==m(f))&&!b.parentNode.$dockbar.selectNodes("vbox").length||b.localName=="button"&&b.parentNode.childNodes.length==2&&(b.parentNode.parentNode==f||b.parentNode.parentnode==m(f))||b.localName=="page"&&b.parentNode.getPages().length==1&&(b.$dockbutton.parentNode.parentNode==(f.bar||f)||b.$dockbutton.parentNode.parentNode==m(f)),{position:r?"none":"right_of_column",aml:f}}if(f.localName=="page"||f.localName=="tab"||f.localName=="menu")d="before_page",f.localName=="page"?(g=apf.getAbsolutePosition(f.$button),o=a.clientX-g[0],o>f.$button.offsetWidth/2&&(d="after_page")):f.localName=="menu"?(f.firstChild.getPages&&(s=f.firstChild.getPages(),f=s[s.length-1]),d="after_page"):f.localName=="tab"&&(s=f.getPages(),f=s[s.length-1],d="after_page");else if(f.localName=="bar"||f.skin=="dockheader")f.skin=="dockheader"?(f=f.parentNode.selectNodes("vbox")[0],d="before_section"):(d=b.localName=="divider"&&b.parentNode.$dockbar==f&&f.lastChild.$dockfor==b.parentNode?"in_section":"in_column",f=f.lastChild);else if(f.localName=="button")d="after_button",g=apf.getAbsolutePosition(f.$ext),q=a.clientY-g[1],q<f.$ext.offsetHeight/2&&(f.previousSibling&&f.previousSibling.localName=="button"?f=f.previousSibling:d="before_button");else if(f.dock&&(f.localName=="divider"||f.localName=="vbox")){f.localName=="divider"&&(f=f.parentNode);var w=f.selectNodes("button");if(!w.length)return{position:"in_section",aml:f};g=apf.getAbsolutePosition(f.$ext),q=a.clientY-g[1];var x=f.$ext.offsetHeight-q;if(q<c){if(b.localName!="divider"||b.parentNode!=(f.previousSibling&&f.previousSibling.$dockfor))d="before_section"}else x<c&&f.nextSibling&&(b.localName!="divider"||b.parentNode!=f.$dockfor)&&(!f.nextSibling||f.nextSibling.$dockfor!=t("section",b))&&(d="after_section");d=="none"&&(q<f.$ext.offsetHeight/2?(d="before_button",f=w[0]):(d="after_button",f=w[w.length-1]))}return{position:d,aml:f}},this.$stopDrag=function(c){a(),apf.removeListener(document,"mousemove",a);var d=this.indicator,e=b,f=e&&e.aml;d.style.display="none";var g=a.dragged;apf.setOpacity(g.$ext,1),apf.setStyleClass(g.$ext,"",["dragging"]);if(!f)return;switch(e.position){case"before_button":case"after_button":var h=self[f.submenu],i=a.original;this.$moveTo(h,i,f,e.position=="before_button"?f:f.nextSibling,f.parentNode,e.position);break;case"before_tab":case"after_tab":var j=f.parentNode.bar,k=apf.getChildNumber(f),l=j.selectNodes("vbox"),m=this.$addSection(j,e.position=="before_tab"?l[0]:l[k+1],null,g&&g.$dockData),h=this.$addMenu(m),i=a.original,n=f.parentNode.insertBefore(h.firstChild,e.position=="before_tab"?f:f.nextSibling);n.setAttribute("flex",1),this.$moveTo(h,i,n,null,m,e.position,n);break;case"before_section":case"in_column":case"after_section":var m=this.$addSection(f.parentNode,e.position=="before_section"?f:e.position=="in_column"?null:f.nextSibling,null,g&&g.$dockData),h=this.$addMenu(m),i=a.original;this.$moveTo(h,i,f,null,m,e.position);break;case"before_page":case"after_page":var h=self[f.$dockbutton.submenu],i=a.original;this.$moveTo(h,i,f.parentNode,e.position=="before_page"?f.$dockbutton:f.nextSibling&&f.nextSibling.$dockbutton,h.ref,e.position,f.parentNode);break;case"left_of_column":var j=this.$addBar(f),m=this.$addSection(j,null,null,g&&g.$dockData),i=a.original,o;i.localName=="button"||i.localName=="divider"?o=i.parentNode.$dockData:i.localName=="page"&&(o=i.$dockbutton.parentNode.$dockData);var h=this.$addMenu(m,o);this.$moveTo(h,i,f,null,m,e.position);break;case"right_of_column":var j=this.$addBar(f.nextSibling),m=this.$addSection(j,null,null,g&&g.$dockData),h=this.$addMenu(m),i=a.original;this.$moveTo(h,i,f,null,m,e.position);break;default:}},this.$moveTo=function(a,b,c,d,e,f,g,h,i){var l=d&&d.$dockpage;if(b.localName=="page"||b.localName=="button"||b.localName=="hbox"){if(a.skin=="dockwin_runbtns"&&b.id!="btnRunCommands"||a.skin!="dockwin_runbtns"&&b.id=="btnRunCommands")return;if(b.localName=="page"||b.localName=="hbox")var m=b,n=b.$dockbutton;else b.localName=="button"&&(m=b.$dockpage,n=b);h||(h=m.parentNode);var o=n.parentNode,p=self[m.$dockbutton.submenu],q=g||a.firstChild;if(q){q.insertBefore(m,l),self[m.id]||(self[m.id]=m);if(!q.getPages||q.getPages().length==1){var r=self[m.$dockbutton.submenu];r&&(r.setAttribute("width",p.width),r.setAttribute("height",p.height));var s=0,t=0;if(q.parentNode.localName=="vbox")q.parentNode.selectNodes("tab").each(function(a){s+=a.flex||1,t++});else{var u=e.parentNode.selectNodes("vbox");u.each(function(a){var b=a.selectSingleNode("button");s+=b&&self[b.submenu].firstChild.flex||1,t++})}q.height||q.setAttribute("flex",s/t)}}if(d&&d.previousSibling==n||d==n||!d&&!n.nextSibling&&n.parentNode==e)return;n.setAttribute("submenu",a.id),e.insertBefore(n,d);var v,w=e.$dockData.buttons;o.$dockData.buttons.remove(n.$dockData),d?w.insertIndex(n.$dockData,w.indexOf(d.$dockData)):v=w.push(n.$dockData),j(h,o,p,w),k()}else if(b.localName=="divider"){var x=b.parentNode&&b.parentNode.selectNodes("button");for(var v=x.length-1;v>=0;v--){var n=x[v];this.$moveTo(a,n,c,d,e,f,g,h,!0)}k()}i||this.$cbChange()},this.$addMenu=function(a,b){b||(b=a.$dockData);var c=this,e=b.id||"submenu"+d++,f;if(a.$menu)return apf.document.documentElement.appendChild(a.$menu);var g=new apf.menu({id:e,width:b.width||"350",height:b.height||"200",ref:a,right:10,pinned:"true",animate:"false",skin:b.skin?b.skin:"dockwindowblack",resizable:b.resizable===!1?!1:"left bottom",dock:1,onhide:function(a){this.firstChild&&this.firstChild.getPage()&&(this.firstChild.getPage().$dockbutton.$dockData.showMenu=!1)},ondisplay:function(a){c.$currentMenu&&c.$currentMenu!=this&&c.$currentMenu.parentNode&&c.$currentMenu.hide(),c.$currentMenu=this;var b=apf.getAbsolutePosition(g.opener.$ext),d=apf.getWindowWidth(),e=d-b[0];g.$ext.style.right=e+5+"px",g.$ext.style.left="";var f;setTimeout(f=function(){if(g.opener&&g.opener.$dockData&&g.opener.$dockData.caption){var a=apf.getAbsolutePosition(g.opener.$ext),b;typeof g.$ext.getElementsByClassName=="function"&&(b=g.$ext.getElementsByClassName("arrow")[0])&&(b.style.top=a[1]-apf.getAbsolutePosition(g.$ext)[1]+8+"px")}}),f(),this.firstChild.getPage()&&(this.firstChild.getPage().$dockbutton.$dockData.showMenu=!0)},onafterresize:function(){a.$dockData.width=this.getWidth(),a.$dockData.height=this.getHeight(),c.$cbChange()},childNodes:[new apf.tab({anchors:b.noTab?"1 -7 0 4":"5 4 5 4",skin:b.noTab?"dockbar":"docktab",buttons:"scale, close",anims:"remove",dock:1,nosplitter:b.noTab?!0:!1,flex:b.flex||(b.noflex?0:1),activepage:0,noflex:b.noflex,onafterswitch:function(a){setTimeout(function(){if(a.previousPage){var b=a.previousPage.$dockbutton;b.$dockData.active=!1,b.value&&g.visible&&(b.value=!1,b.$setState("Out",{}))}if(a.nextPage&&a.nextPage.$dockbutton){var b=a.nextPage.$dockbutton;b.$dockData.active=!0,!b.value&&g.visible&&(b.value=!0,b.$setState("Down",{})),g.visible&&(g.opener=b,g.dispatchEvent("display"))}c.$cbChange()})},onresize:function(d){clearTimeout(f);var e=this;f=setTimeout(function(){a.parentNode&&a.parentNode.$dockData&&a.parentNode.$dockData.expanded>0&&(a.parentNode.$dockData.width=e.getWidth(),b.flex=e.flex,c.$cbChange())},500)},onclose:function(a){var b=a.page;b.lastParent=this,c.$cbChange()}})]});return apf.document.documentElement.appendChild(g),g.show(),g.hide(),a.$menu=g,g.setAttribute("width",b.width||260),b.height&&g.setAttribute("height",b.height),g},this.$addBar=function(a,b){var c=this;this.columnCounter++,a&&a.previousSibling&&a.previousSibling.tagName=="splitter"&&(a=a.previousSibling),b||(b={sections:[]},b.uniqueId=f.push({data:b})-1);if(b&&b.cache)var d=this.$parentHBox.insertBefore(b.cache,a);else{var d=this.$parentHBox.insertBefore(new apf.bar({skin:"debug-panel",margin:"0 0 0 0",dock:1,onDOMNodeRemovedFromDocument:function(){c.columnCounter--},childNodes:[new apf.button({dock:1,skin:"dockheader",onclick:function(){c.expandBar(this.parentNode,!0,!0)}})]}),a);d.$dockData=b,d.$dockData.cache=d,e.bars.indexOf(d.$dockData)==-1&&e.bars.insertIndex(d.$dockData,a?e.bars.indexOf(a.$dockData):e.bars.length)}return l.call(this,d),d},this.$addPage=function(a,b,c,d,e,f){var g=this;if(!a)a=c.firstChild.add(d,e);else if(f&&f.parentNode.expanded){var h=f.parentNode;if(c.firstChild)c.firstChild.insertBefore(a,b),h.vbox.insertBefore(c.firstChild,f.nextSibling&&f.nextSibling.lastChild&&f.nextSibling.lastChild.$dockpage.parentNode);else{var i=apf.getArrayFromNodelist(h.selectNodes("vbox")).indexOf(f),k=h.vbox.selectNodes("tab")[i];k.insertBefore(a,b)}}else c.firstChild.insertBefore(a,b);a.oDrag=a.$button,a.dock=1,a.setAttribute("draggable",!0);var l;return a.$addedDockEvent||(a.addEventListener("beforedrag",l=function(b){this.$ext.style.zIndex="";var c=this.parentNode,d=c.length==1,e=(d?this.parentNode:this).$ext;d?(c.$buttons.style.opacity=0,this.$ext.style.opacity=0):e.style.background="#fafcfe";var f=this.parentNode.cloneNode(!1);f.removeAttribute("id"),f.removeAttribute("activepage"),f.setAttribute("buttons","close"),f.removeAttribute("anchors"),apf.document.documentElement.appendChild(f),f.setWidth(this.parentNode.$ext.offsetWidth-6),f.setHeight(this.parentNode.$ext.offsetHeight-6);var h=this.cloneNode(!1);h.removeAttribute("id"),h.removeAttribute("render"),f.appendChild(h);var i=this.childNodes;for(var j=i.length-1;j>=0;j--)h.insertBefore(i[j],h.firstChild);var k=apf.getAbsolutePosition(this.parentNode.$ext);f.setLeft(k[0]-1+3),f.setTop(k[1]-2+3),f.$ext.style.border="1px solid #333",f.addEventListener("afterdrag",function(b){c.$buttons.style.opacity="",a.$ext.style.opacity="",e.style.background="",e.style.border="";var d=h.childNodes;for(var i=d.length-1;i>=0;i--)a.appendChild(d[i],a.firstChild);f.id=f.name="",f.destroy(!0,!0),g.$stopDrag(b.htmlEvent),f.removeEventListener("afterdrag",arguments.callee)});var l=b.htmlEvent.clientX,m=b.htmlEvent.clientY;return f.setAttribute("draggable",!0),setTimeout(function(){f.$dragStart({clientX:l,clientY:m}),f.$ext.style.zIndex=1e6}),g.$startDrag(f,this),!1}),a.addEventListener("afterclose",function(a){var b=this.$dockbutton,c=this.lastParent,d=b.parentNode;return b.removeNode(),this.removeNode(),b.$dockData.hidden=2,j(c,d,c.parentNode.localName=="menu"?c.parentNode:self[b.submenu]),g.$cbStorePage(this),!1},!0),a.$addedDockEvent=!0),a},this.$getSection=function(a,b){for(var c in a.childNodes)if(a.childNodes[c].value&&a.childNodes[c].value==b)return a.childNodes[c];return null},this.$addSection=function(a,b,c,d){var e=this;d||(d={buttons:[]},d.uniqueId=f.push({data:d})-1),a||(a=this.$parentHBox.lastChild);if(d.cache){var h=a.insertBefore(d.cache,b),i=g(d,!0);i&&i!=a.$dockData&&i.sections.remove(d);var j=a.$dockData.sections;j.indexOf(h.$dockData)==-1&&j.insertIndex(h.$dockData,b?j.indexOf(b.$dockData):j.length)}else{var h=a.insertBefore(new apf.vbox({padding:0,edge:"0 0 3 0","class":"docksection",value:c,dock:d.draggable===!1?0:1,draggable:d.draggable===!1?!1:!0,childNodes:[new apf.divider({skin:"divider-debugpanel",margin:"3 2 -4 2",dock:1,visible:d.draggable===!1?!1:!0,draggable:!0})]}),b);if(d.draggable!==!1){var k=h.firstChild;k.addEventListener("beforedrag",function(a){var b=this.parentNode,c=b.$dockbar=b.parentNode,d=b.cloneNode(!1);d.removeAttribute("id"),d.$dockfor=b;var f=apf.getDiff(b.$ext),g=b.$ext.offsetHeight,h=apf.getAbsolutePosition(b.$ext);c.insertBefore(d,b),d.$ext.style.background="#434343",d.$ext.style.borderTop="1px solid #373737",d.$ext.style.height=g-f[1]+"px",b.setWidth(b.$ext.offsetWidth),apf.document.documentElement.appendChild(b),b.setLeft(h[0]),b.setTop(h[1]),b.addEventListener("afterdrag",function(a){c.insertBefore(b,d),b.setAttribute("draggable",!1),setTimeout(function(){b.removeAttribute("left"),b.removeAttribute("top"),b.removeAttribute("width"),b.$ext.style.position="relative",b.$ext.style.zIndex=1});var f=this.selectNodes("button");f.length&&f[0].setValue(!1),d.destroy(!0,!0),e.$stopDrag(a.htmlEvent),b.removeEventListener("afterdrag",arguments.callee)}),b.setAttribute("draggable",!0);var i=a.htmlEvent.clientX,j=a.htmlEvent.clientY;return setTimeout(function(){b.$dragStart({clientX:i,clientY:j}),b.$ext.style.zIndex=1e6}),e.$startDrag(b,this),!1})}var i=g(d);i&&i!=a.$dockData&&i.sections.remove(d),h.$dockData=d,h.$dockData.cache=h;var j=a.$dockData.sections;j.indexOf(h.$dockData)==-1&&j.insertIndex(h.$dockData,b?j.indexOf(b.$dockData):j.length)}return l.call(this,h),h},this.$addButton=function(a,b,c,d,e){var f=this,h,i,j=!0;typeof e.draggable!="undefined"&&(j=!1);if(e.cache){var k=a.insertBefore(e.cache,b),m=g(e);m&&m!=a.$dockData&&m.buttons.remove(e);var n=a.$dockData.buttons;n.indexOf(k.$dockData)==-1&&n.insertIndex(k.$dockData,b?n.indexOf(b.$dockData):n.length)}else{var k=a.insertBefore(new apf.button({skin:"dockButton",submenu:c.id,dock:j?1:"",visible:e&&e.hidden<0||!0,"class":e["class"]||"",draggable:j,onmousedown:function(){h=!0,self[this.submenu]&&self[this.submenu].firstChild&&self[this.submenu].firstChild.set&&self[this.submenu].firstChild.set(d),h=!1;if(e&&(i=e.primary)){var a=k.$ext.getElementsByTagName("span");a[2].style.backgroundPosition=i.activeState.x+"px "+i.activeState.y+"px";if(i=e.secondary)a[1].style.backgroundPosition=i.activeState.x+"px "+i.activeState.y+"px"}setTimeout(function(){f.$cbChange()})}}),b);e&&e.id&&k.setAttribute("id",e.id);function o(a){if(e&&(i=e.primary)){var b=a.$ext.getElementsByTagName("span");a.setAttribute("tooltip",e.menu.split("/").pop()),b[2].style.background='url("'+i.backgroundImage+'") '+i.defaultState.x+"px "+i.defaultState.y+"px no-repeat";if(i=e.secondary)b[1].style.background='url("'+i.backgroundImage+'") '+i.defaultState.x+"px "+i.defaultState.y+"px no-repeat";if(i=e.tertiary)b[0].style.background=i.backgroundColor+' url("'+i.backgroundImage+'") '+i.defaultState.x+"px "+i.defaultState.y+"px no-repeat",b[0].style.border="1px solid #c7c7c7"}}o(k),d.addEventListener("prop.visible",function(a){a.value==1&&e&&e.cbOnPageShow?e.cbOnPageShow():a.value==0&&e&&e.cbOnPageHide&&e.cbOnPageHide()}),k.addEventListener("beforedrag",function(a){var b=this;this.hideMenu(),this.setValue(!0);if(this.parentNode.selectNodes("button").length==1)return this.parentNode.firstChild.dispatchEvent("beforedrag",a),!1;var c=this.cloneNode(!0);c.removeAttribute("id"),apf.document.documentElement.appendChild(c),c.setValue(!0),o(c);var d=apf.getAbsolutePosition(this.$ext);c.setLeft(d[0]),c.setTop(d[1]),c.addEventListener("afterdrag",function(a){c.destroy(!0,!0),b.setValue(!1),f.$stopDrag(a.htmlEvent),c.removeEventListener("afterdrag",arguments.callee)});var e=a.htmlEvent.clientX,g=a.htmlEvent.clientY;return setTimeout(function(){c.$dragStart({clientX:e,clientY:g}),c.$ext.style.zIndex=1e6,this.removeEventListener("mouseover",arguments.callee)}),f.$startDrag(c,this),!1}),d.$dockbutton=k,k.$dockpage=d;var m=g(e);m&&m!=a.$dockData&&m.buttons.remove(e),k.$dockData=e,k.$dockData.cache=k;var n=a.$dockData.buttons;n.indexOf(k.$dockData)==-1&&n.insertIndex(k.$dockData,b?n.indexOf(b.$dockData):n.length)}return l.call(this,k),e&&(e.showMenu&&!e.active?e.showMenu=!1:e.showMenu?(e.active&&c.firstChild&&c.firstChild.set&&c.firstChild.set(d),k.showMenu()):e.active&&apf.window.vManager.check(d.parentNode,"page",function(){d.parentNode.activepage||d.parentNode.set(d)})&&!d.parentNode.activepage&&d.parentNode.set(d)),k}})).call(d.prototype)}),define("ext/dockpanel/dockpanel",["require","exports","module","core/ext","core/ide","ext/dockpanel/libdock","ext/settings/settings"],function(a,b,c){var d=a("core/ext"),e=a("core/ide"),f=a("ext/dockpanel/libdock"),g=a("ext/settings/settings");c.exports=d.register("ext/dockpanel/dockpanel",{name:"Dock Panel",dev:"Ajax.org",alone:!0,type:d.GENERAL,defaultState:{bars:[]},nodes:[],dockpanels:[],loaded:!1,init:function(a){var b=this,c=new apf.visibilitymanager;this.layout=new f(hboxDockPanel,function(a){if(!a||!b.dockpanels[a[0]])return!1;var d=b.dockpanels[a[0]][a[1]];if(d.page)return d.page;var e=d.getPage();return e&&(e.$arrExtension=a),c.permanent(e,function(a){d.mnuItem.check()},function(){d.mnuItem.uncheck()}),e},function(a){var c=a.$arrExtension,d=b.dockpanels[c[0]][c[1]];d.page=a,d.mnuItem.uncheck(),b.saveSettings()},function(a){return!a||!b.dockpanels[a[0]]?!1:b.dockpanels[a[0]][a[1]].options},function(){b.saveSettings()},function(){return apf.isTrue(g.model.queryValue("general/@animateui"))}),e.addEventListener("extload",function(a){var c=g.model,d=c.queryValue("auto/dockpanel/text()"),f=b.defaultState;if(d)try{f=JSON.parse(d)}catch(h){}e.dispatchEvent("dockpanel.load.settings",{state:f}),b.layout.loadState(f),b.loaded=!0}),mnuToolbar.appendChild(new apf.item({caption:"Restore Default",onclick:function(){var a=b.defaultState,c;if(a){try{c=a}catch(d){}b.layout.loadState(c),g.model.setQueryValue("auto/dockpanel/text()",c),b.saveSettings(),e.dispatchEvent("restorelayout")}}})),mnuToolbar.appendChild(new apf.divider)},saveSettings:function(){clearTimeout(this.$timer);var a=this;this.$timer=setTimeout(function(){var b=a.layout.getState();g.model.setQueryValue("auto/dockpanel/text()",JSON.stringify(b))})},enable:function(){this.$lastState&&this.layout.loadState(this.$lastState)},disable:function(){this.$lastState=this.layout.getState(),this.layout.clearState()},destroy:function(){this.layout.clearState()},register:function(a,b,c,d){var e=this.dockpanels[a]||(this.dockpanels[a]={});e[b]={options:c,getPage:d};var f=this.layout,g=this;e[b].mnuItem=mnuToolbar.appendChild(new apf.item({caption:c.menu.split("/").pop(),id:"mnu"+b,type:"check",onclick:function(){var c=d(),e=g.getButtons(a,b)[0].uniqueId;f.show(e,!0),f.isExpanded(e)<0&&f.showMenu(e),c.parentNode.set(c)}}))},addDockable:function(a){var b=this.defaultState;a.barNum||(a.barNum=0);if(a.sections){a.barNum||a.barNum===0?b.bars[a.barNum]?b.bars[a.barNum].sections.merge(a.sections):b.bars[a.barNum]=a:b.bars.push(a);return}b.bars[a.barNum||0]||(b.bars[a.barNum||0]={expanded:!1,width:230,sections:[]});var c=b.bars[a.barNum||0];return a.buttons?c.sections.push(a):c.sections.push({flex:2,width:260,height:350,buttons:[a]}),c.sections.slice(-1)},getButtons:function(a,b,c){c=c||this.layout.getState(!0);var d=[];if(!c)return;return c.bars||(c=c.state),c.bars.each(function(c){c.sections.each(function(c){c.buttons.each(function(c){(!a||c.ext[0]==a)&&(!b||c.ext[1]==b)&&d.push(c)})})}),d},getBars:function(a,b,c){var c=c||this.layout.getState(!0),d=[];if(!c)return;return c.bars||(c=c.state),c.bars?(c.bars.each(function(c){var e=!1;c.sections.each(function(c){c.buttons.each(function(c){(!a||c.ext[0]==a)&&(!b||c.ext[1]==b)&&(e=!0)})}),e&&d.push(c)}),d):d},hideSection:function(a,b){var c=this.getButtons(a),d=[],e=this;c.each(function(a){a.hidden<0&&d.pushUnique(e.layout.findBar(a.uniqueId)),a.hidden==-1&&e.layout.hide(a.uniqueId)}),b&&d.each(function(a){a.expanded==1&&e.layout.collapseBar(a.uniqueId)})},showSection:function(a,b){var c=this.getButtons(a),d=this,e=[];c.each(function(a){a.hidden&&a.hidden==1&&(d.layout.show(a.uniqueId),e.pushUnique(d.layout.findBar(a.uniqueId)))}),e.each(function(a){b&&a.expanded<0&&d.layout.expandBar(a.uniqueId)})},showBar:function(a){if(a.cache){a.cache.show();return}var b=this;a.sections.each(function(a){a.buttons.each(function(a){b.layout.show(a.uniqueId)})})},hideBar:function(a){a.cache&&a.cache.hide()},expandBar:function(a){this.layout.expandBar(a.cache)},increaseNotificationCount:function(a){},resetNotificationCount:function(a){if(a==-1)return;for(var b=0;b<this.dockObjects.length;b++)if(this.dockObjects[b].ident==a)return this.dockObjects[b].notCount=0,this.updateNotificationElement(this.dockObjects[b].btn,0),!0;return!1},updateNotificationElement:function(a,b){var c=b===0?"":b;return apf.isGecko?a.$ext.getElementsByClassName("dock_notification")[0].textContent=c:a.$ext.getElementsByClassName("dock_notification")[0].innerText=c,!0}})}),define("text!ext/openfiles/openfiles.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:script><![CDATA[\n        function filesort(value, args, xmlNode) {\n            return (xmlNode.tagName == "folder" ? 0 : 1) + value.toLowerCase();\n        }\n    ]]></a:script>\n    <a:window id="winOpenFiles"\n      flex     = "1"\n      skin     = "fm-window"\n      title    = "Open Files"\n      modal    = "false"\n      buttons  = "close"\n      optimize = "true">\n        <a:button\n          top="-22"\n          skin="header-btn"\n          right="5"\n          icon="panel_settings.png"\n          submenu="mnuOpenFilesSettings"/>\n        \n        <a:menu id="mnuOpenFilesSettings">\n            <a:item id="cbShowFiles"\n                caption = "Show Path"\n                type    = "check"\n                visible = "{lstOpenFiles.visible}"\n                checked = "[{require(\'ext/settings/settings\').model}::auto/openfiles/@showpath]"\n                onclick = "\n                    setTimeout(function() {\n                        var sel = lstOpenFiles.getSelection();\n                        lstOpenFiles.reload();\n                        lstOpenFiles.selectList(sel);\n                    });\n                "\n            />\n        </a:menu>\n        \n        <a:list id="lstOpenFiles" \n          canrename   = "true" \n          anchors     = "0 0 0 0" \n          model       = "{require(\'ext/openfiles/openfiles\').model}"\n          border      = "0"\n          scrollbar   = "sbShared 2 2 2"\n          multiselect = "true" \n          autoselect  = "false"\n          skin        = "tree">\n            <a:each match="[file]" sort="[@name]" sort-method="filesort">\n                <a:caption match="[@name]" value="{([../@changed] == 1 ? \'*\' : \'\') + [.] + (cbShowFiles.checked ? \' - \' + [../@path].split(\'/\').slice(-2).join(\'/\') : \'\')}" />\n                <a:icon match="[folder|project]" value="folder.png" />\n                <a:icon match="[file]" value="{require(\'core/util\').getFileIcon(%[.])}" />\n            </a:each>\n            <a:remove match="[file|folder]" />\n        </a:list>\n    </a:window>\n</a:application>'}),define("ext/openfiles/openfiles",["require","exports","module","core/ide","core/ext","ext/panels/panels","text!ext/openfiles/openfiles.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/panels/panels"),g=a("text!ext/openfiles/openfiles.xml");c.exports=e.register("ext/openfiles/openfiles",{name:"Active Files",dev:"Ajax.org",alone:!0,type:e.GENERAL,markup:g,nodes:[],defaultWidth:130,hook:function(){f.register(this,{position:2e3,caption:"Open Files","class":"open_files"});var a=this.model=(new apf.model).load("<files />");d.addEventListener("afteropenfile",function(b){var c=b.doc.getNode();c&&(a.queryNode('//node()[@path="'+c.getAttribute("path").replace(/"/g,"&quot;")+'"]')||a.appendXml(apf.getCleanCopy(c)))}),d.addEventListener("closefile",function(b){var c=b.xmlNode;a.removeXml('//node()[@path="'+c.getAttribute("path").replace(/"/g,"&quot;")+'"]')}),d.addEventListener("updatefile",function(b){var c=b.xmlNode,d=(b.path||c.getAttribute("path")).replace(/"/g,"&quot;"),e=a.queryNode('//node()[@path="'+d+'"]'),f=trFiles.queryNode('//node()[@path="'+d+'"]');c&&e&&f&&(b.path&&apf.xmldb.setAttribute(e,"path",c.getAttribute("path")),apf.xmldb.setAttribute(f,"path",c.getAttribute("path")),b.filename&&(apf.xmldb.setAttribute(e,"name",apf.getFilename(b.filename)),apf.xmldb.setAttribute(f,"name",apf.getFilename(b.filename))),b.changed!=undefined&&(apf.xmldb.setAttribute(e,"changed",b.changed),apf.xmldb.setAttribute(f,"changed",b.changed)))})},init:function(){var a=this;this.panel=winOpenFiles,this.nodes.push(winOpenFiles),colLeft.appendChild(winOpenFiles),lstOpenFiles.addEventListener("afterselect",this.$afterselect=function(a){var b=this.selected;if(!b||this.selection.length>1)return;d.dispatchEvent("openfile",{doc:d.createDocument(b)})}),lstOpenFiles.addEventListener("afterremove",function(a){var b=this.getSelection();for(var c=0;c<b.length;c++)tabEditors.remove(tabEditors.getPage(b[c].getAttribute("path")))}),d.addEventListener("init.ext/editors/editors",function(){tabEditors.addEventListener("afterswitch",function(b){var c=b.nextPage;if(c&&c.$model.data){var d=a.model.queryNode("file[@path='"+c.$model.data.getAttribute("path")+"']");d&&!lstOpenFiles.isSelected(d)&&lstOpenFiles.select(d)}})}),d.addEventListener("treechange",function(a){var b="//folder[@path='"+a.path.replace(/\/$/,"")+"']",c=trFiles.getModel().data.selectSingleNode(b);if(!c)return;var d=c.childNodes,e=a.files,f=[];for(var g=0;g<d.length;++g){var h=d[g],i=h.getAttribute("name");e[i]?delete e[i]:f.push(h)}f.forEach(function(a){apf.xmldb.removeNode(a)}),b=c.getAttribute("path");for(var j in e){var k=e[j],l="<"+k.type+" type='"+k.type+"'"+" name='"+j+"'"+" path='"+b+"/"+j+"'"+"/>";trFiles.add(l,c)}})},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],f.unregister(this)}})}),define("text!ext/tree/tree.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:script><![CDATA[\n        function filesort(value, args, xmlNode) {\n            return (xmlNode.tagName == "folder" ? 0 : 1) + value.toLowerCase();\n        }\n\n        function createPath(a, b){\n            return b + "/" + apf.getFilename(a);\n        }\n    ]]></a:script>\n    <a:window id="winFilesViewer"\n      flex     = "1"\n      skin     = "fm-window"\n      title    = "Project Files"\n      modal    = "false"\n      buttons  = "close"\n      optimize = "true">\n        <a:button\n          top="-22"\n          skin="header-btn"\n          right="5"\n          icon="panel_settings.png"\n          submenu="mnuFilesSettings"/>\n        <a:button\n          top="-22"\n          skin="header-btn"\n          right="29"\n          icon="panel_refresh.png"\n          visible = "{trFiles.visible}"\n          onclick="require(\'ext/tree/tree\').refresh()" />\n        <!--a:button skin="header-btn" icon="order.png" top="-22" right="7"></a:button-->\n        \n        <a:menu id="mnuFilesSettings">\n            \n        </a:menu>\n        \n        <a:tree id="trFiles" canrename="true" border="0" simpledata="true"\n          contextmenu="mnuCtxTree" multiselect="true" reselectable="true"\n          onbeforeremove="return require(\'core/util\').removeInteractive(this)" disabled="{{!stServerConnected.active}}"\n          onbeforemove="this.disable();" autoselect="false"\n          flex="1" anchors="0 0 0 0" scrollbar="sbShared 2 2 2"\n        >\n            <a:each match="[project|file|folder]" sort="[@name]" sort-method="filesort">\n                <a:insert match="[folder]" get="" id="trFilesInsertRule" />\n                <a:caption match="[@name]" value="{([../@changed] == 1 ? \'*\' : \'\') + [.]}" />\n                <a:icon match="[folder|project]" value="folder.png" />\n                <a:icon match="[file]" value="{require(\'core/util\').getFileIcon(%[.])}" />\n            </a:each>\n\n            <a:add type="folder" get="{davProject.mkdir([@path], \'New Folder\')}" />\n            <a:add type="file" get="{davProject.create([@path], \'New File.txt\', \'\')}" />\n            <a:rename match="[file|folder[not(@path=\'/workspace\')]]" set="{davProject.rename([@name], [@oldpath])}" />\n            <a:move set="{require(\'ext/tree/tree\').moveFile([@path], createPath([@path], [../@path]))}"/>\n            <a:remove match="[file|folder]" set="{require(\'ext/filesystem/filesystem\').remove([@path])}"/>\n            <a:copy match="[file|folder]" set="{\n                davProject.copy([@path], createPath([@newname] || [@path], [../@path]))\n            }" undo="{\n                alert(\'TODO!!\');\n            }"/>\n\n            <a:drag match="[folder|file]" />\n            <a:drop match="[folder|file]" target="[folder]"\n                action="tree-append" copy="{event.ctrlKey}" />\n            <a:drop match="[folder|file]" target="[file]"\n                action="insert-before" copy="{event.ctrlKey}" />    \n        </a:tree>\n        \n        <a:menu id="mnuCtxTree" disabled="{!stServerConnected.active}">\n            <a:item match="[file]" class="strong"  onclick="\n                require(\'core/ide\').dispatchEvent(\'openfile\', {doc: require(\'core/ide\').createDocument(apf.activeElement.selected)})\n            ">Edit</a:item>\n            <a:divider />\n            <a:item onclick="require(\'ext/tree/tree\').refresh()">Refresh</a:item>\n            <a:item match="[file|folder[not(@root)]]" onclick="apf.activeElement.startRename()">Rename</a:item>\n            <a:item match="[file|folder[not(@root)]]" onclick="apf.activeElement.remove()">Delete</a:item>\n            <a:divider />\n            <a:item match="[file|folder|project]" onclick="\n                var store = apf.clipboard.store;\n                apf.clipboard.copySelection(apf.activeElement);\n                apf.clipboard.pasteSelection(apf.activeElement);\n                apf.clipboard.store = store;\n            ">Duplicate</a:item>\n            <a:divider />\n            <a:item match="[file|folder[not(@root)]]" onclick="\n                apf.clipboard.cutSelection(apf.activeElement);\n            ">Cut</a:item>\n            <a:item match="[file|folder[not(@root)]]" onclick="\n                apf.clipboard.copySelection(apf.activeElement);\n            ">Copy</a:item>\n            <a:item match="[file|folder|project]" disabled="{apf.clipboard.empty}" onclick="\n                apf.clipboard.pasteSelection(apf.activeElement);\n            ">Paste</a:item>\n            <a:divider />\n            <a:item match="[file|folder|project]" onclick="\n                require(\'ext/filesystem/filesystem\').createFile();\n            ">New File</a:item>\n            <a:item match="[file|folder|project]" onclick="\n                require(\'ext/filesystem/filesystem\').createFolder();\n            ">New Folder</a:item>\n        </a:menu>\n    </a:window>\n</a:application>\n\n'}),define("ext/tree/tree",["require","exports","module","core/ide","core/ext","core/util","ext/filesystem/filesystem","ext/settings/settings","ext/panels/panels","text!ext/tree/tree.xml"],function(a,b,c){function k(){this.$scrollTimer&&clearTimeout(this.$scrollTimer),this.scrollPos=-1,this.$scrollTimer=setTimeout(function(){var a=h.model.data,b=a.selectSingleNode("auto/projecttree");b&&apf.xmldb.setAttribute(b,"scrollpos",trFiles.$ext.scrollTop)},1e3)}function l(){if(!d.onLine&&!d.offlineFileSystemSupport)return!1}var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/filesystem/filesystem"),h=a("ext/settings/settings"),i=a("ext/panels/panels"),j=a("text!ext/tree/tree.xml");c.exports=e.register("ext/tree/tree",{name:"Project Files",dev:"Cloud9 IDE, Inc.",alone:!0,type:e.GENERAL,markup:j,defaultWidth:200,deps:[g],currentSettings:[],loadedSettings:0,expandedList:{},treeSelection:{path:null,type:null},loading:!1,changed:!1,animControl:{},nodes:[],model:null,"default":!0,hook:function(){i.register(this,{position:1e3,caption:"Project Files","class":"project_files"});var a=this;d.addEventListener("init.ext/filesystem/filesystem",function(b){a.model=b.ext.model,a.loadedSettings>0&&a.inited&&a.onReady()}),d.addEventListener("loadsettings",function(b){var c=b.model;(davProject.realWebdav||davProject).setAttribute("showhidden",apf.isTrue(c.queryValue("auto/projecttree/@showhidden"))),a.scrollPos=c.queryValue("auto/projecttree/@scrollpos");var e=c.queryValue("auto/projecttree");if(e){try{a.currentSettings=JSON.parse(e)}catch(f){a.currentSettings=[d.davPrefix]}var g=c.queryNode("auto/tree_selection");g&&(a.treeSelection.path=c.queryValue("auto/tree_selection/@path"),a.treeSelection.type=c.queryValue("auto/tree_selection/@type")),a.loadedSettings=1,a.model&&a.inited&&a.onReady()}else a.loadedSettings=2,a.model&&a.inited&&a.onReady()}),d.addEventListener("savesettings",function(b){if(!a.changed)return;var c=apf.createNodeFromXpath(b.model.data,"auto/projecttree/text()");a.currentSettings=[];var d,e;for(e in a.expandedList)d=a.expandedList[e].getAttribute("path"),d?a.currentSettings.push(d):delete a.expandedList[e];return c.nodeValue=JSON.stringify(a.currentSettings),a.changed=!1,!0}),d.addEventListener("treechange",function(a){var b=a.path.replace(/\/([^/]*)/g,'/node()[@name="$1"]').replace(/\[@name="workspace"\]/,"").replace(/\//,""),c=trFiles.getModel().data.selectSingleNode(b);if(!c)return;var d=c.childNodes,e=a.files,f=[];for(var g=0;g<d.length;++g){var h=d[g],i=h.getAttribute("name");e&&e[i]?delete e[i]:f.push(h)}f.forEach(function(a){apf.xmldb.removeNode(a)}),b=c.getAttribute("path");for(var j in e){var k=e[j],l="<"+k.type+" type='"+k.type+"'"+" name='"+j+"'"+" path='"+b+"/"+j+"'"+"/>";trFiles.add(l,c)}}),e.initExtension(this)},onReady:function(){var a=this;trFiles.setAttribute("model",this.model),this.loadedSettings===1?setTimeout(function(){a.loadProjectTree()},1e3):(trFilesInsertRule.setAttribute("get","{davProject.readdir([@path])}"),trFiles.expandAll())},init:function(){var a=this;this.panel=winFilesViewer,this.nodes.push(winFilesViewer),colLeft.appendChild(winFilesViewer),mnuFilesSettings.appendChild(new apf.item({id:"mnuitemHiddenFiles",type:"check",caption:"Show Hidden Files",visible:"{trFiles.visible}",checked:"[{require('ext/settings/settings').model}::auto/projecttree/@showhidden]",onclick:function(b){setTimeout(function(){a.changed=!0,(davProject.realWebdav||davProject).setAttribute("showhidden",b.currentTarget.checked),a.refresh()})}})),this.setupTreeListeners(),a.loadedSettings>0&&a.model&&a.onReady()},setupTreeListeners:function(){var a=this;trFiles.addEventListener("afterselect",this.$afterselect=function(b){if(h.model&&h.model.data&&trFiles.selected){var c=trFiles.selected.getAttribute("path").replace(/"/g,"&quot;"),d=trFiles.selected.getAttribute("type"),e=h.model.data,f=e.selectSingleNode("auto/tree_selection");f?(apf.xmldb.setAttribute(f,"path",c),apf.xmldb.setAttribute(f,"type",d)):apf.xmldb.appendChild(e.selectSingleNode("auto"),apf.getXml('<tree_selection path="'+c+'" type="'+d+'" />')),a.treeSelection.path=c,a.treeSelection.type=d}}),trFiles.addEventListener("afterchoose",this.$afterchoose=function(){var a=this.selected;if(!a||a.tagName!="file"||this.selection.length>1||!d.onLine&&!d.offlineFileSystemSupport)return;d.dispatchEvent("openfile",{doc:d.createDocument(a)})}),trFiles.addEventListener("beforecopy",this.$beforecopy=function(a){if(!d.onLine&&!d.offlineFileSystemSupport)return!1;var b=a.args[0].args,c=b[1].getAttribute("name"),e=0;c.match(/\.(\d+)$/,"")&&(e=parseInt(RegExp.$1,10));while(b[0].selectSingleNode('node()[@name="'+c.replace(/"/g,"&quot;")+'"]'))c=c.replace(/\.(\d+)$/,"")+"."+ ++e;b[1].setAttribute("newname",c),setTimeout(function(){g.beforeRename(b[1],null,b[0].getAttribute("path").replace(/[\/]+$/,"")+"/"+c,!0),b[1].removeAttribute("newname")})}),trFiles.addEventListener("beforestoprename",this.$beforestoprename=function(a){return!d.onLine&&!d.offlineFileSystemSupport?!1:g.beforeStopRename(a.value)}),trFiles.addEventListener("beforerename",this.$beforerename=function(a){if(!d.onLine&&!d.offlineFileSystemSupport)return!1;if(trFiles.$model.data.firstChild==trFiles.selected)return!1;var b=a.args[0].getAttribute("path"),c=b.replace(/^(.*\/)[^\/]+$/,"$1"+a.args[1]).toLowerCase(),e,h=trFiles.getModel().queryNodes(".//node()");for(var i=0,j=h.length;i<j;i++){var k=h[i].getAttribute("path").toLowerCase();if(h[i]!=a.args[0]&&k===c){e=!0;break}}if(e)return f.alert("Error","Unable to Rename","That name is already taken. Please choose a different name."),trFiles.getActionTracker().undo(),!1;g.beforeRename(a.args[0],a.args[1])}),trFiles.addEventListener("beforemove",this.$beforemove=function(a){if(!d.onLine&&!d.offlineFileSystemSupport)return!1;setTimeout(function(){var b=a.args;for(var c=0;c<b.length;c++)g.beforeMove(b[c].args[0],b[c].args[1],trFiles)})}),trFiles.addEventListener("keyup",this.$keyup=function(a){this.dragging>0&&a.keyCode==27&&apf.DragServer.stop()}),trFiles.addEventListener("scroll",k),trFiles.addEventListener("beforeadd",l),trFiles.addEventListener("renamestart",l),trFiles.addEventListener("beforeremove",l),trFiles.addEventListener("dragstart",l),trFiles.addEventListener("dragdrop",l),trFiles.addEventListener("expand",this.$expand=function(b){if(!b.xmlNode)return;a.expandedList[b.xmlNode.getAttribute(apf.xmldb.xmlIdTag)]=b.xmlNode,a.loading||(a.changed=!0,h.save())}),trFiles.addEventListener("collapse",this.$collapse=function(b){if(!b.xmlNode)return;delete a.expandedList[b.xmlNode.getAttribute(apf.xmldb.xmlIdTag)],a.loading||(a.changed=!0,h.save())})},$cancelWhenOffline:function(){if(!d.onLine&&!d.offlineFileSystemSupport)return!1},moveFile:function(a,b){davProject.move(a,b),trFiles.enable(),trFiles.focus()},loadProjectTree:function(a){function e(a){if(a>=b.length)return f();var g=b[a];(davProject.realWebdav||davProject).readdir(g,function(f,g,h){if(h.status===404)return c.changed=!0,b.splice(a,1),e(a);var i=h.url.substr(0,h.url.length-1),j;i===d.davPrefix?j=trFiles.queryNode("folder[@root=1]"):j=trFiles.queryNode('//folder[@path="'+i+'"]');if(!j)return c.changed=!0,b.splice(a,1),e(a);var k=apf.getXml(f);for(var l=0,m=k.childNodes.length;l<m;l++){var n=k.childNodes[l].cloneNode(!0);apf.xmldb.appendChild(j,n)}trFiles.$setLoadStatus(j,"loaded"),trFiles.slideToggle(apf.xmldb.getHtmlNode(j,trFiles),1,!0,null,function(){e(++a)})})}function f(){c.loading=!1;if(c.treeSelection.path){var b=trFiles.$model.queryNode('//node()[@path="'+c.treeSelection.path+'" and @type="'+c.treeSelection.type+'"]');trFiles.select(b)}else trFiles.select(trFiles.$model.queryNode("node()"));c.scrollPos&&c.scrollPos>-1&&(trFiles.$ext.scrollTop=c.scrollPos),trFilesInsertRule.setAttribute("get","{davProject.readdir([@path])}"),h.save();if(a)return a()}this.loading=!0;var b=this.currentSettings,c=this;e(0)},refresh:function(){trFiles.removeEventListener("scroll",k),this.scrollPos=trFiles.$ext.scrollTop,trFiles.getModel().load("<data><folder type='folder' name='"+d.projectName+"' path='"+d.davPrefix+"' root='1'/></data>"),this.expandedList={},trFilesInsertRule.setAttribute("get",""),d.dispatchEvent("track_action",{type:"reloadtree"}),this.loadProjectTree(),trFiles.addEventListener("scroll",k)},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){trFiles.removeEventListener("afterselect",this.$afterselect),trFiles.removeEventListener("afterchoose",this.$afterchoose),trFiles.removeEventListener("expand",this.$expand),trFiles.removeEventListener("collapse",this.$collapse),trFiles.removeEventListener("beforemove",this.$beforemove),trFiles.removeEventListener("beforerename",this.$beforerename),trFiles.removeEventListener("beforestoprenam",this.$beforestoprename),trFiles.removeEventListener("beforecopy",this.$beforecopy),trFiles.removeEventListener("beforeadd",l),trFiles.removeEventListener("renamestart",l),trFiles.removeEventListener("beforeremove",l),trFiles.removeEventListener("dragstart",l),trFiles.removeEventListener("dragdrop",l),trFiles.removeEventListener("keyup",this.$keyup),trFiles.removeEventListener("scroll",k),this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],i.unregister(this)}})}),define("text!ext/save/save.css",[],function(){return".lbl_saveas {\n    font-weight: bold;\n    color: #323232;\n}\n.lbl_filepath {\n    padding-left: 57px;\n    font-size: 11px;\n    color: #bababa;\n    text-shadow: rgba(255, 255, 255, 1) 0px 1px 0px;\n}\n\n.trDgLike .item-fix:nth-child(4n-1) {\n    background-color: #f1f0f1;\n}\n.trDgLike .item-fix:nth-child(4n+1) {\n    background-color: #fefdfe;\n}\n\n.trDgLike .item-fix.root {\n    background-color: #fefdfe;\n}\n\n.dgLikeContaier {\n    background-color: white;\n    border: 1px solid #C3C3C3;\n    color: #333333;\n    cursor: default;\n    font-family: Tahoma, Arial;\n    font-size: 8pt;\n    overflow: hidden;\n    position: relative;\n    height: 210px;\n}\n\n.dgLikeContaier .heading {\n    position : relative;\n    top : 0;\n    left : 0;\n    height : 20px;\n    z-index : 10;\n    /*padding-left : 5px;*/\n    background-color : #e6e6e6;\n    margin : 0 0 0 0;\n    white-space : nowrap;\n    \n    display : inline-block;\n    background : -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(229,229,229)),color-stop(1, rgb(248,248,248)));\n    background: -moz-linear-gradient(center bottom,rgb(229,229,229) 0%,rgb(248,248,248) 100%);\n    overflow : hidden;\n    text-overflow : ellipsis;\n    color: #333;\n    border-bottom: 1px solid #BFBFBF;\n\n    padding : 2px 4px 1px 3px;\n    display : block;\n    height : 15px;\n    text-decoration : none;\n    border-left : 1px solid white;\n    border-right : none;\n    border-top : 1px solid white;\n}\n\n.hidefiles .file_item {\n    display: none;\n}"}),define("text!ext/save/save.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winCloseConfirm"\n      title     = "Save this file?"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      width     = "512"\n      skin      = "bk-window2"\n      draggable = "true"\n      class     = "relative"\n      onkeydown = "\n        if(event.keyCode == 89) {\n            btnSaveYes.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n        if(event.keyCode == 78) {\n            btnSaveNo.dispatchEvent(\'click\', {htmlEvent: {}});\n        }\n      ">\n        <a:vbox id="fileDesc" padding="10" edge="15 20 25 20">\n            \n        </a:vbox>\n\n        <a:hbox edge="6 10 10" pack="end" padding="8">\n            <a:button id="btnYesAll" caption="Yes to all" skin="btn-default-css3" />\n            <a:button id="btnNoAll" caption="No to all" skin="btn-default-css3"/>\n            <a:filler />\n            <a:button id="btnSaveYes" default="3" class="btn-green" caption="Yes" skin="btn-default-css3"/>\n            <a:button id="btnSaveNo" class="btn-red" caption="No" skin="btn-default-css3"/>\n            <a:button id="btnSaveCancel" skin="btn-default-css3">Cancel</a:button>\n        </a:hbox>\n    </a:window>\n\n    <a:script><![CDATA[\n        function chooseSaveAsFolder(folder) {\n            var fooPath = folder.getAttribute("path");\n            if (folder.getAttribute("type") != "folder" && folder.tagName != "folder") {\n                var fooPath = fooPath.split("/");\n                txtSaveAs.setValue(fooPath.pop());\n                fooPath = fooPath.join("/");\n            }\n            lblPath.setProperty(\'caption\', fooPath + \'/\');\n        }\n    ]]></a:script>\n\n    <a:window\n      id        = "winSaveAs"\n      center    = "true"\n      height    = "395"\n      icon      = ""\n      buttons   = "close"\n      skin      = "bk-window"\n      kbclose   = "true"\n      resizable = "true"\n      title     = "Save As"\n      onshow    = "require(\'ext/save/save\').expandTree();"\n      width     = "480"\n      draggable = "true">\n        <a:vbox\n          anchors   = "10 10 0 10"\n          padding   = "5">\n            <a:hbox\n              align     = "center"\n              padding   = "5">\n                <a:label flex="1" class="lbl_saveas">Save as:</a:label>\n                <a:textbox\n                  id           = "txtSaveAs"\n                  flex         = "7"\n                  focusselect  = "true"\n                  onkeydown    = "if (event.keyCode == 13) require(\'ext/save/save\').choosePath(lblPath.getProperty(\'caption\') + this.getValue())" />\n            </a:hbox>\n            <a:label id="lblPath" class="lbl_filepath" />\n\n            <div class="dgLikeContaier">\n                <div class="heading">Project folder</div>\n                <a:hbox\n                  anchors  = "20 0 0 0"\n                  overflow = "hidden">\n                    <a:tree\n                      id            = "trSaveAs"\n                      class         = "trDgLike"\n                      flex          = "1"\n                      scrollbar     = "sbShared 2 2 2"\n                      model         = "{require(\'ext/filesystem/filesystem\').model}"\n                      contextmenu   = "mnuCtxTree"\n                      onafterselect = "chooseSaveAsFolder(this.selected)"\n                      onafterchoose = "chooseSaveAsFolder(this.selected)">\n                        <a:each match="[folder|file]">\n                           <a:insert\n                             match = "[folder]"\n                             get   = "{location.host and davProject.readdir([@path])}" />\n                           <a:caption match="[@name]" />\n                           <a:icon\n                             match = "[folder]"\n                             value = "folder.png" />\n                           <a:icon\n                             match = "[file]"\n                             value = "{require(\'core/util\').getFileIcon(%[.])}" />\n                           <a:css match="[file]" value="file_item"></a:css>\n                        </a:each>\n                        <a:add type="folder" get="{davProject.mkdir([@path], \'New Folder\')}" />\n                        <a:add type="file" get="{davProject.create([@path], \'New File.txt\', \'\')}" />\n                        <a:rename set="{alert(\'boe\'); davProject.rename([@name], [@path])}"/>\n                        <a:copy match="[file|folder]" set="{davProject.copy([@path], [../@path])}"/>\n                        <a:move set="{davProject.move([@path], [../@path])}"/>\n                        <a:remove match="[file|folder]" set="{require(\'ext/filesystem/filesystem\').remove([@path])}"/>\n\n                        <a:drag match="[folder|file]" />\n                        <a:drop match="[folder|file]" target="[folder]"\n                            action="tree-append" copy="{event.ctrlKey}" />\n                    </a:tree>\n                </a:hbox>\n            </div>\n            <a:hbox padding="15" align="center">\n                <a:button\n                  width    = "104"\n                  icon     = "folder_new.png"\n                  class    = "btnIconOnly smallCaption newFolder"\n                  onclick  = "require(\'ext/filesystem/filesystem\').createFolder(\'New Folder\', trSaveAs)"\n                  tooltip  = "Create folder">\n                    Create folder\n                </a:button>\n                <a:filler />\n                <a:checkbox\n                  skin    = "checkbox_grey"\n                  checked = "true"\n                  width   = "120"\n                  margin  = "4 0 0"\n                  onafterchange="\n                    if(this.checked)\n                        trSaveAs.$ext.className = trSaveAs.$ext.className.replace(/hidefiles/, \'\');\n                    else\n                        apf.setStyleClass(trSaveAs.$ext, \'hidefiles\');\n                  ">Show files in tree</a:checkbox>\n            </a:hbox>\n            <a:hbox\n              edge    = "23 0 10"\n              pack    = "end"\n              padding = "8">\n                <a:button\n                  skin    = "btn-default-css3"\n                  onclick = "winSaveAs.hide()">\n                    Cancel\n                </a:button>\n                <a:button\n                  class    = "btn-green"\n                  default  = "2"\n                  skin     = "btn-default-css3"\n                  onclick  = "require(\'ext/save/save\').confirmSaveAs()">\n                    Save\n                </a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n</a:application>\n'}),define("ext/save/save",["require","exports","module","core/ide","core/ext","core/util","ext/filesystem/filesystem","text!ext/save/save.css","text!ext/save/save.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/filesystem/filesystem"),h=a("text!ext/save/save.css"),i=a("text!ext/save/save.xml");c.exports=e.register("ext/save/save",{dev:"Ajax.org",name:"Save",alone:!0,type:e.GENERAL,markup:i,css:h,deps:[g],offline:!0,commands:{quicksave:{hint:"save the currently active file to disk"},saveas:{hint:"save the file to disk with a different filename"},reverttosaved:{hint:"downgrade the currently active file to the last saved version"}},hotitems:{},nodes:[],saveBuffer:{},hook:function(){var a=this;d.addEventListener("init.ext/editors/editors",function(){tabEditors.addEventListener("close",a.$close=function(b){var c=b.page.$at;c.undo_ptr||(c.undo_ptr=c.$undostack[0]);var f=b.page.$doc.getNode();if(f&&c.undo_ptr&&c.$undostack[c.$undostack.length-1]!==c.undo_ptr||!c.undo_ptr&&f.getAttribute("changed")==1&&b.page.$doc.getValue()){e.initExtension(a);var g=tabEditors.getPages(),h=g.indexOf(b.page);tabEditors.set(g[h].id);var i=f.getAttribute("path").replace(d.workspaceDir,"").replace(d.davPrefix,"");winCloseConfirm.page=b.page,winCloseConfirm.all=-100,winCloseConfirm.show(),fileDesc.replaceMarkup("<div><h3>Save "+apf.escapeXML(i)+"?</h3><div>This file has unsaved changes. Your changes will be lost if you don't save them.</div></div>",{noLoadingMsg:!1}),winCloseConfirm.addEventListener("hide",function(){if(winCloseConfirm.all!=-100){var b=function(a){var b;if(!(b=winCloseConfirm.page))return;tabEditors.remove(b,!0,b.noAnim),delete b.noAnim,a&&b.$at.undo(-1),delete winCloseConfirm.page,b.dispatchEvent("aftersavedialogclosed")};winCloseConfirm.all==-200?a.quicksave(winCloseConfirm.page,b):b(!0)}else tabEditors.dispatchEvent("aftersavedialogcancel");winCloseConfirm.removeEventListener("hide",arguments.callee)}),btnYesAll.hide(),btnNoAll.hide(),b.preventDefault()}})}),this.nodes.push(d.barTools.appendChild(new apf.button({id:"btnSave",icon:"save.png",tooltip:"Save",skin:"c9-toolbarbutton",disabled:"{!!!tabEditors.activepage}",onclick:this.quicksave.bind(this)})));var b,c;this.nodes.push(d.mnuFile.insertBefore(new apf.divider,d.mnuFile.firstChild),d.mnuFile.insertBefore(new apf.item({caption:"Save All",onclick:function(){a.saveall()},disabled:"{!!!tabEditors.activepage}"}),d.mnuFile.firstChild),c=d.mnuFile.insertBefore(new apf.item({caption:"Save As...",onclick:function(){a.saveas()},disabled:"{!!!tabEditors.activepage}"}),d.mnuFile.firstChild),b=d.mnuFile.insertBefore(new apf.item({caption:"Save",onclick:this.quicksave.bind(this),disabled:"{!!!tabEditors.activepage}"}),d.mnuFile.firstChild),d.mnuFile.insertBefore(new apf.divider,d.mnuFile.firstChild),d.mnuFile.insertBefore(new apf.item({caption:"Revert to Saved",onclick:function(){a.reverttosaved()},disabled:"{!!!tabEditors.activepage}"}),d.mnuFile.firstChild)),this.hotitems.quicksave=[b],this.hotitems.saveas=[c]},init:function(a){this.fileDesc=winCloseConfirm.selectSingleNode("a:vbox"),apf.importCssString(this.css||""),winCloseConfirm.onafterrender=function(){btnYesAll.addEventListener("click",function(){winCloseConfirm.all=1,winCloseConfirm.hide()}),btnNoAll.addEventListener("click",function(){winCloseConfirm.all=-1,winCloseConfirm.hide()}),btnSaveYes.addEventListener("click",function(){winCloseConfirm.all=-200,winCloseConfirm.hide()}),btnSaveNo.addEventListener("click",function(){winCloseConfirm.all=0,winCloseConfirm.hide()}),btnSaveCancel.addEventListener("click",function(){winCloseConfirm.all=-100,winCloseConfirm.hide()})},winSaveAs.addEventListener("hide",function(){winSaveAs.page&&(tabEditors.remove(winSaveAs.page,!0),winSaveAs.page.$at.undo(-1),delete winSaveAs.page)})},reverttosaved:function(){d.dispatchEvent("reload",{doc:tabEditors.getPage().$doc})},saveall:function(){var a=this;tabEditors.getPages().forEach(function(b){a.quicksave(b)})},saveAllInteractive:function(a,b){e.initExtension(this),winCloseConfirm.all=0;var c=this;apf.asyncForEach(a,function(b,d){var e=b.$at;if(e.undo_ptr&&e.$undostack[e.$undostack.length-1]!==e.undo_ptr){winCloseConfirm.all==1&&c.quicksave(b);if(winCloseConfirm.all)return d();tabEditors.set(b),winCloseConfirm.page=b,winCloseConfirm.show(),winCloseConfirm.addEventListener("hide",function(){winCloseConfirm.all==1&&c.quicksave(b),winCloseConfirm.removeEventListener("hide",arguments.callee),d()}),btnYesAll.setProperty("visible",a.length>1),btnNoAll.setProperty("visible",a.length>1)}else d()},function(){b(winCloseConfirm.all)})},quicksave:function(a,b,c){if(!a||!a.$at)a=tabEditors.getPage();if(!a)return;typeof b!="function"&&(b=null);var e=a.$doc,h=e.getNode(),i=h.getAttribute("path");if(h.getAttribute("debug"))return;if(d.dispatchEvent("beforefilesave",{node:h,doc:e})===!1)return;if(h.getAttribute("newfile")){this.saveas(a,b);return}b&&d.addEventListener("afterfilesave",function(a){a.node==h&&(b(),this.removeEventListener("afterfilesave",arguments.callee))});var j=parseInt(h.getAttribute("saving"),10);if(j){this.saveBuffer[i]=a;return}apf.xmldb.setAttribute(h,"saving","1");var k=this,l=e.getValue();g.saveFile(i,l,function(b,g,j){g!=apf.SUCCESS&&f.alert("Could not save document","An error occurred while saving this document","Please see if your internet connection is available and try again. "+(g==apf.TIMEOUT?"The connection timed out.":"The error reported was "+j.message)),d.dispatchEvent("afterfilesave",{node:h,doc:e,value:l,silentsave:c}),d.dispatchEvent("track_action",{type:"save as filetype",fileType:h.getAttribute("name").split(".").pop(),success:g!=apf.SUCCESS?"false":"true"}),apf.xmldb.removeAttribute(h,"saving"),apf.xmldb.removeAttribute(h,"new"),apf.xmldb.setAttribute(h,"modifieddate",apf.queryValue(j.data,"//d:getlastmodified")),k.saveBuffer[i]&&(delete k.saveBuffer[i],k.quicksave(a))});var m=a.$at;return m.undo_ptr=m.$undostack[m.$undostack.length-1],a.$at.dispatchEvent("afterchange"),!1},_saveAsNoUI:function(a,b,c){if(!a||!b)return;c=c||b;var e=a.$model.data,h=parseInt(e.getAttribute("saving"),10);if(h){this.saveBuffer[b]=a;return}apf.xmldb.setAttribute(e,"saving","1");var i=this,j=a.$doc.getValue();g.saveFile(c,j,function(h,j,k){j!=apf.SUCCESS&&f.alert("Could not save document","An error occurred while saving this document","Please see if your internet connection is available and try again.");var l=a.$model,m=l.getXml(),n=a.$doc;if(b!==c||parseInt(m.getAttribute("newfile")||0,10)===1)l.load(m),e=l.data,g.beforeRename(e,null,c,!1),n.setNode(e);apf.xmldb.removeAttribute(e,"saving"),i.saveBuffer[b]&&(delete i.saveBuffer[b],i._saveAsNoUI(a));if(parseInt(e.getAttribute("newfile")||"0",10)===1){apf.xmldb.removeAttribute(e,"newfile"),apf.xmldb.removeAttribute(e,"changed");var o=c.replace(new RegExp("/"+cloud9config.davPrefix.split("/")[1]),"").replace(new RegExp("/"+e.getAttribute("name")),"").replace(/\/([^/]*)/g,'/node()[@name="$1"]').replace(/\/node\(\)\[@name="workspace"\]/,"").replace(/\//,"");if(o){var p=trFiles.queryNode(o);p&&!trFiles.queryNode('//node()[@path="'+c+'"]')&&apf.xmldb.appendChild(p,e)}}d.dispatchEvent("afterfilesave",{node:m,doc:n,value:h,silentsave:!1})});var k=a.$at;k.undo_ptr=k.$undostack[k.$undostack.length-1],a.$at.dispatchEvent("afterchange")},choosePath:function(a,b){g.list((a.match(/(.*)\/[^/]*/)||{})[1]||a,function(b,c,d){(new RegExp("<folder.*"+a+".*>")).test(b)&&(a=a.replace(new RegExp("/"+cloud9config.davPrefix.split("/")[1]),"").replace(/\/([^/]*)/g,'/node()[@name="$1"]').replace(/\/node\(\)\[@name="workspace"\]/,"").replace(/\//,""),trSaveAs.expandList([a],function(){var b=trSaveAs.getModel().data.selectSingleNode(a);trSaveAs.select(b)}))})},saveas:function(a,b){if(!a||!a.$at)a=tabEditors.getPage();if(!a)return;var c=a?a.$model.data.getAttribute("path"):!1;if(!c)return;e.initExtension(this);if(b){var f=a.$doc;d.addEventListener("afterfilesave",function(a){a.doc==f&&(b(),this.removeEventListener("afterfilesave",arguments.callee))})}var g=c.split("/");txtSaveAs.setValue(g.pop()),lblPath.setProperty("caption",g.join("/")+"/"),winSaveAs.show()},confirmSaveAs:function(a){a=a||tabEditors.getPage();var b=a.$model.data,c=b.getAttribute("path"),d=lblPath.getProperty("caption")+txtSaveAs.getValue(),e=parseInt(b.getAttribute("saving"),10);if(e){this.saveBuffer[c]=a;return}var h=this,i=function(){winConfirm.hide(),winSaveAs.hide(),h._saveAsNoUI(a,c,d)};c!==d||parseInt(b.getAttribute("newfile")||0,10)===1?g.exists(d,function(a){if(a){var b=d.match(/\/([^/]*)$/)[1],c=d.match(/\/([^/]*)\/[^/]*$/)[1];f.confirm("Are you sure?",'"'+b+'" already exists, do you want to replace it?',"A file or folder with the same name already exists in the folder "+c+". "+"Replacing it will overwrite it's current contents.",i)}else i()}):i()},expandTree:function(){var a=this;setTimeout(function(){var b=tabEditors.getPage(),c=b?b.$model.data.getAttribute("path"):!1,d=b.$model.data.getAttribute("newfile");d?trSaveAs.slideOpen(null,trSaveAs.getModel().data.selectSingleNode("//folder")):a.choosePath(c)})},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],tabEditors.removeEventListener("close",this.$close)}})}),define("ext/recentfiles/recentfiles",["require","exports","module","core/ide","core/ext"],function(a,b,c){var d=a("core/ide"),e=a("core/ext");c.exports=e.register("ext/recentfiles/recentfiles",{dev:"Ajax.org",name:"Recent Files",alone:!0,type:e.GENERAL,deps:[],offline:!0,currentSettings:[],nodes:[],init:function(){function b(b){var c=b.node||b.xmlNode;if(!c)return;if(b.name!="afterfilesave"&&c.getAttribute("newfile")==1)return;var d={caption:c.getAttribute("name"),value:c.getAttribute("path"),node:c};a.currentSettings.shift(d),a.$add(d)}var a=this;this.nodes.push(d.mnuFile.insertBefore(new apf.item({caption:"Open Recent",submenu:"mnuRecent"}),d.mnuFile.firstChild),apf.document.documentElement.appendChild(this.menu=new apf.menu({id:"mnuRecent",childNodes:[this.divider=new apf.divider,new apf.item({caption:"Clear Menu",onclick:function(){a.clearMenu()}})]}))),d.addEventListener("loadsettings",function(b){var c=b.model,d=c.queryValue("auto/recentfiles");if(d){var e;try{e=JSON.parse(d)}catch(f){e=[]}a.clearMenu();for(var g=e.length-1;g>=0;g--)a.$add(e[g])}}),d.addEventListener("savesettings",function(b){if(!a.changed)return;var c=apf.createNodeFromXpath(b.model.data,"auto/recentfiles/text()"),d=[],e=a.menu.childNodes;for(var f=0;f<e.length;f++)if(e[f].localName=="item")d.push({caption:e[f].caption,value:e[f].value});else break;return c.nodeValue=JSON.stringify(d),!0}),d.addEventListener("afteropenfile",b),d.addEventListener("afterfilesave",b),d.addEventListener("closefile",b)},$add:function(a){var b,c=this.menu.childNodes;for(var e=0;e<c.length;e++){if(c[e].nodeType!=1)continue;if(c[e].localName!="item")break;if(c[e].value==a.value){b=c[e];break}}b?this.menu.insertBefore(b,this.menu.firstChild):this.menu.insertBefore(new apf.item({caption:a.caption,value:a.value,onclick:function(){var b=apf.getXml("<file />");b.setAttribute("name",a.caption),b.setAttribute("path",a.value),d.dispatchEvent("openfile",{doc:d.createDocument(b)})}}),this.menu.firstChild);while(this.menu.childNodes.length>12)this.menu.removeChild(this.divider.previousSibling);this.changed=!0},clearMenu:function(){var a=this.menu.childNodes;for(var b=a.length-1;b>=0;b--)if(a[0].localName=="item")this.menu.removeChild(a[0]);else break},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("text!ext/gotofile/gotofile.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="winGoToFile"\n      buttons   = "close" \n      width     = "500" \n      skin      = "basic"\n      minheight = "35"\n      maxheight = "400"\n      zindex    = "99999"\n      style     = "\n        background:#e8e8e8;\n        box-shadow:0 5px 7px rgba(0,0,0,0.5);\n        border:1px solid #bbb;\n        border-width:0 1px 1px 1px;\n        position:absolute;\n        left:50%;\n        margin-left:-250px;\n        top : 37px;\n      ">\n        <a:vbox edge="0 5 5 5" padding="5" anchors2="0 0 0 0">\n            <a:textbox id="txtGoToFile" realtime="true" skin="searchbox_textbox" focusselect="true" />\n            <a:list id="dgGoToFile"\n              flex2      = "1" \n              class     = "searchresults noscrollbar"\n              skin      = "lineselect"\n              maxheight = "350"\n              model     = "{require(\'ext/openfile/openfile\').model}"\n              scrollbar = "sbShared 32 7 7"\n              viewport  = "virtual"\n              multiselect   = "true"\n              loading-message = "Loading file list. One moment please..."\n              empty-message = "No files found that match \'{txtGoToFile.value}\'"\n              onafterload   = "\n                var vp = this.getViewport();\n                if (vp.length &lt; 100) {\n                    var ht = Math.min(350, vp.getScrollHeight());\n                    if (ht != this.height)\n                        this.setAttribute(\'height\', ht);\n                }\n                else if (this.height != 350) {\n                    this.setAttribute(\'height\', 350);\n                }\n              ">\n                <a:each match="[d:response/d:href]" />\n                <a:caption><?lm\n                    var re = new RegExp("({txtGoToFile.value})", \'i\');\n                    <span>{\n                        (apf.getFilename([text()]) || "").replace(re, <strong>$1</strong>);\n                    }</span>\n                    [text()].replace(re, <strong>$1</strong>);\n                ?></a:caption>\n            </a:list>\n        </a:vbox>\n    </a:bar>\n</a:application>'}),define("ext/gotofile/search",["require","exports","module"],function(a,b,c){c.exports=function(a,b,c){var d=b.length,e,f=[],g=[],h=[],i=[];for(var j=0,k=a.length,l,m,n;j<k;j++){e=a[j];if((l=e.lastIndexOf(b))>-1){c.push(e);if(d>1&&l>(n=e.lastIndexOf("/"))){m=e.lastIndexOf("/"+b);if(m>-1){if(e.length==d+1+m){g.push(e);continue}if(m==n){h.push(e);continue}i.push(e);continue}}f.push(e)}}var o="<d:href>",p="</d:href>",q=p+o,r=c.length?(g.length?o+g.join(q)+p:"")+(h.length?o+h.join(q)+p:"")+(i.length?o+i.join(q)+p:"")+(f.length?o+f.join(q)+p:""):"";return"<d:multistatus  xmlns:d='DAV:'><d:response>"+r+"</d:response></d:multistatus>"}}),define("text!ext/newresource/newresource.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winNewFileTemplate"\n      title     = "New from Template"\n      icon      = ""\n      center    = "true"\n      render    = "runtime"\n      width     = "350"\n      height    = "300"\n      skin      = "bk-window"\n      resizable = "true"\n      kbclose   = "true"\n      buttons   = "close"\n      draggable = "true">\n        <a:vbox padding="10" anchors="0 0 0 0">\n\n            <a:list id="lstFileTemplates"\n              model     = "mdlFileTemplates"\n              flex      = "1"\n              margin    = "10 10 10 10"\n              caption   = "[@caption]"\n              icon      = "[@icon]"\n              class     = "noscrollbar"\n              scrollbar = "sbShared 12 12 55"\n              each      = "item"\n              eachvalue = "[@value]"\n              style     = "overflow:hidden"\n              onafterchoose = "\n                btnFileTemplateSave.dispatchEvent(\'click\');\n              " />\n            <a:hbox pack="end" padding="7" edge="10">\n                <a:button id="btnFileTemplateSave" width="80" default="2"\n                  class="btn-green" skin="btn-default-css3" caption="Create"\n                  onclick="\n                    require(\'ext/newresource/newresource\').newfile(\n                        \'.\' + lstFileTemplates.value,\n                        lstFileTemplates.selected.firstChild.nodeValue\n                    );\n                    winNewFileTemplate.hide();\n                  "/>\n                <a:button id="btnFileTemplateCancel" skin="btn-default-css3" width="80"\n                  onclick="winNewFileTemplate.hide()">Cancel</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n\n    <a:model id="mdlFileTemplates">\n        <templates>\n            <item value="txt" icon="page_white_text.png" caption="Text file"><![CDATA[]]></item>\n            <item value="js" icon="page_white_code.png" caption="JavaScript file"><![CDATA[]]></item>\n            <item value="js" icon="page_white_code.png" caption="Unit Test"><![CDATA["use strict";\nrequire("./support/paths");\n\nvar assert = require("assert");\n//var module = require("./module");\n\nmodule.exports = {\n\n    "test untitled 1" : function() {\n        //assert.equal(!true, false);\n    }\n\n};\n\nif (typeof module !== "undefined" && module === require.main) {\n    require("asyncjs").test.testcase(module.exports).exec()\n}]]></item>\n            <item value="stest" icon="page_white_code.png" caption="Selenium Test"><![CDATA[{}]]></item>\n            <item value="coffee" icon="page_white_code.png" caption="CoffeeScript file"><![CDATA[]]></item>\n            <item value="html" icon="html.png" caption="HTML file"><![CDATA[<!DOCTYPE html>\n<html>\n    <head>\n        <title> </title>\n    </head>\n    <body>\n\n    </body>\n</html>\n]]></item>\n            <item value="xml" icon="page_white_code_red.png" caption="XML file"><![CDATA[]]></item>\n            <item value="css" icon="css.png" caption="CSS file"><![CDATA[]]></item>\n            <item value="scss" icon="css.png" caption="SCSS file"><![CDATA[]]></item>\n            <item value="svg" icon="page_white_picture.png" caption="SVG file"><![CDATA[]]></item>\n            <item value="py" icon="script_code.png" caption="Python file"><![CDATA[]]></item>\n            <item value="php" icon="page_white_php.png" caption="PHP file"><![CDATA[<?php\n\n?>]]></item>\n            <item value="rb" icon="page_white_ruby.png" caption="Ruby file"><![CDATA[]]></item>\n            <item value="mli" icon="page_white_code.png" caption="OCaml file"><![CDATA[]]></item>\n            <item value="clj" icon="page_white_code.png" caption="Clojure file"><![CDATA[]]></item>\n            <item value="md" icon="page_white_text.png" caption="Markdown"><![CDATA[]]></item>\n            <item value="js" icon="page_white_code.png" caption="Express file"><![CDATA[// *******************************************************\n// expressjs template\n//\n// assumes: npm install express\n// defaults to jade engine, install others as needed\n//\n// assumes these subfolders:\n//   public/\n//   public/javascripts/\n//   public/stylesheets/\n//   views/\n//\nvar express = require(\'express\');\nvar app = module.exports = express.createServer();\nvar viewEngine = \'jade\'; // modify for your view engine\n// Configuration\napp.configure(function(){\n  app.set(\'views\', __dirname + \'/views\');\n  app.set(\'view engine\', viewEngine);\n  app.use(express.bodyParser());\n  app.use(express.methodOverride());\n  app.use(app.router);\n  app.use(express.static(__dirname + \'/public\'));\n});\napp.configure(\'development\', function(){\n  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));\n});\napp.configure(\'production\', function(){\n  app.use(express.errorHandler());\n});\n// *******************************************************\n]]></item>\n            <item value="js" icon="page_white_code.png" caption="Node.js web server"><![CDATA[var http = require(\'http\');\nhttp.createServer(function (req, res) {\n  res.writeHead(200, {\'Content-Type\': \'text/plain\'});\n  res.end(\'Hello World from Cloud9\\n\');\n}).listen(process.env.PORT);\n]]>\n            </item>\n        </templates>\n    </a:model>\n</a:application>\n'}),define("ext/newresource/newresource",["require","exports","module","core/ide","core/ext","ext/filesystem/filesystem","text!ext/newresource/newresource.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/filesystem/filesystem"),g=a("text!ext/newresource/newresource.xml");c.exports=e.register("ext/newresource/newresource",{dev:"Ajax.org",name:"New Resource",alone:!0,offline:!1,type:e.GENERAL,markup:g,deps:[f],commands:{newfile:{hint:"create a new file resource",msg:"New file created."},newfolder:{hint:"create a new directory resource",msg:"New directory created."},newfiletemplate:{hint:"open the new file template dialog"}},hotitems:{},nodes:[],init:function(a){var b=this;this.nodes.push(d.mnuFile.insertBefore(new apf.divider,d.mnuFile.firstChild),d.mnuFile.insertBefore(new apf.item({caption:"New Folder",onclick:function(){b.newfolder()}}),d.mnuFile.firstChild),d.mnuFile.insertBefore(new apf.item({caption:"New From Template...",onclick:function(){b.newfiletemplate()}}),d.mnuFile.firstChild),d.mnuFile.insertBefore(new apf.item({caption:"New File",onclick:function(){b.newfile()}}),d.mnuFile.firstChild)),this.hotitems.newfile=[this.nodes[3]],this.hotitems.newfiletemplate=[this.nodes[2]],this.hotitems.newfolder=[this.nodes[1]]},newfile:function(a,b,c){a||(a="");var e=apf.getXml("<file />");if(!c&&self.trFiles){var f=trFiles.selected;f||(trFiles.select(trFiles.$model.queryNode("folder")),f=trFiles.selected),f&&(c=f.getAttribute("path"),trFiles.selected.getAttribute("type")=="file"||trFiles.selected.tagName=="file"?c=c.replace(/\/[^\/]*$/,"/"):c+="/")}c||(c=d.davPrefix+"/");var g="Untitled",h=1;while(tabEditors.getPage(c+g+h+a))h++;e.setAttribute("name",g+h+a),e.setAttribute("path",c+g+h+a),e.setAttribute("changed","1"),e.setAttribute("newfile","1");var i=d.createDocument(e);b&&(i.cachedValue=b),d.dispatchEvent("openfile",{doc:i,type:"newfile"}),d.dispatchEvent("track_action",{type:"template",template:a})},newfiletemplate:function(){winNewFileTemplate.show()},newfolder:function(){return f.createFolder(),!1},enable:function(){if(!this.disabled)return;this.nodes.each(function(a){a.enable()}),this.disabled=!1},disable:function(){if(this.disabled)return;this.nodes.each(function(a){a.disable()}),this.disabled=!0},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],mnuNew.destroy(!0,!0),tabEditors.removeEventListener("close",this.$close)}})}),define("ext/undo/undo",["require","exports","module","core/ext"],function(a,b,c){var d=a("core/ext");c.exports=d.register("ext/undo/undo",{dev:"Ajax.org",name:"Undo",alone:!0,type:d.GENERAL,commands:{undo:{hint:"undo one edit step in the active document"},redo:{hint:"redo one edit step in the active document"}},nodes:[],init:function(a){this.nodes.push(mnuEdit.appendChild(new apf.item({caption:"Undo",onclick:this.undo})),mnuEdit.appendChild(new apf.item({caption:"Redo",onclick:this.redo}))),this.hotitems={undo:[this.nodes[0]],redo:[this.nodes[1]]}},undo:function(){var a;(a=tabEditors.getPage())&&a.$at.undo()},redo:function(){var a;(a=tabEditors.getPage())&&a.$at.redo()},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("text!ext/searchinfiles/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n  <a:tree name="tree">\n      <a:style><![CDATA[\n      .searchtree {\n          padding : 3px;\n          overflow: hidden;\n          cursor : default;\n          position : relative;\n          color: #fff;\n          font-family : Arial;\n          font-size : 12px;\n      }\n\n      searchtree .trDefines {\n          background: none;\n          border-bottom: 1px solid #c3c3c3;\n          border-top: 1px solid #c3c3c3;\n          border-right: none;\n          border-left: none;\n          posittion: relative;\n          padding-top: 8px;\n      }\n\n      .searchtree SPAN{\n          width: 15px;\n          height: 18px;\n          background: no-repeat 3px 4px;\n          display: block;\n          margin-left: -15px;\n      }\n\n      .searchtree DIV.pluslast SPAN,\n      .searchtree DIV.plus SPAN{\n          background-image:url(images/search_expand.png);\n      }\n\n      .searchtree DIV.minlast SPAN,\n      .searchtree DIV.min SPAN{\n          background-image:url(images/search_collapse.png);\n      }\n\n      .searchtree DIV{\n          padding: 0;\n          height: auto;\n          padding-left: 15px;\n          overflow : hidden;\n          font-family: menlo,courier new,fixed,swiss,sans-serif;\n          font-size: 12px;\n      }\n\n      .searchtree .responseHeader {\n          color: #e6db70;\n      }\n\n      .searchtree .linenumber {\n          width : 35px;\n          display : inline;\n          text-align : right;\n          padding : 0 10px 0 4px;\n      }\n\n      .searchtree .excerpt {\n          margin : 0;\n          display : inline-block;\n          color: #ffffff;\n      }\n\n      .searchtree .line{\n          width : 35px;\n          display : inline-block;\n          text-align : right;\n          padding : 0 5px 0 0;\n      }\n\n      .searchtree pre{\n          margin : 0;\n          display : inline-block;\n      }\n\n      .searchtree .focusbug{\n          padding-left : 0;\n          overflow : visible;\n      }\n\n      .searchtree LABEL{\n          padding: 1px 0 0 20px;\n          background: no-repeat 1px 1px;\n          white-space: nowrap;\n          margin-left: 0px;\n          display: block;\n          float: left;\n          margin-top: -18px;\n          padding: 1px 0 0 2px !important;\n          height: auto;\n      }\n\n      .searchtree DIV.loading LABEL{\n\n      }\n      .searchtree DIV.loading SPAN{\n          background: no-repeat 0px 0px;\n      }\n\n      .searchtree U{\n          text-decoration: none;\n          cursor: default;\n          display: inline !important; display: block;\n          padding: 2px 4px 2px 2px;\n      }\n\n      .searchtree blockquote .indicate U{\n          border: 1px dotted #CCC;\n          padding: 0px 3px 1px 1px;\n      }\n\n      .searchtree .responseHeader.selected U{\n          -webkit-border-radius: 3px;\n          -moz-border-radius: 3px;\n          border-radius: 3px;\n          border: 1px dotted #CCC;\n          padding: 0px 3px 1px 1px;\n      }\n\n      .searchtreeFocus .selected U, .tree .dragAppend U{\n          -webkit-border-radius: 3px;\n          -moz-border-radius: 3px;\n          border-radius: 3px;\n      }\n\n      .searchtree BLOCKQUOTE{\n          margin: 0;\n          padding: 0 0 0 20px;\n          display: none;\n          height: 0;\n          overflow: hidden;\n          background: repeat-y 0px center;\n      }\n\n      .searchtree .empty, .searchtree .offline, .searchtree .loading{\n          padding: 8px;\n          color: #AAA;\n          font-weight : normal;\n          height : 0;\n          overflow: visible;\n          text-align: left !important;\n      }\n\n      .searchtree div.loading{\n          text-align : left;\n      }\n\n      .searchtree .message{\n          text-align: center;\n      }\n\n      .searchtree .root{\n          position : relative;\n      }\n  ]]>\n      </a:style>\n      <a:style condition="!apf.isIE"><![CDATA[\n      .tree LABEL, .dragtree LABEL{\n          padding: 3px 0 0 20px;\n      }\n  ]]>\n      </a:style>\n\n      <a:presentation>\n          <a:main container="." startclosed="false">\n              <div class="searchtree">\n\n              </div>\n          </a:main>\n          <a:item\n            class        = "."\n            caption      = "label/u"\n            icon         = "label"\n            openclose    = "span"\n            select       = "label"\n            container    = "following-sibling::blockquote">\n              <div>\n                  <span> </span>\n                  <label>\n                      <u>-</u>\n                  </label>\n              </div>\n              <blockquote> </blockquote>\n          </a:item>\n          <a:loading>\n              <div class="loading">\n                  <span> </span>\n                  <label>Loading...</label>\n              </div>\n          </a:loading>\n          <a:empty caption=".">\n              <div class="message"></div>\n          </a:empty>\n      </a:presentation>\n  </a:tree>\n</a:skin>'}),define("text!ext/searchinfiles/searchinfiles.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window id="winSearchInFiles"\n      onhide  = "require(\'ext/searchinfiles/searchinfiles\').onHide()"\n      title   = "Search in Files"\n      buttons = "close"\n      skin    = "bk-window"\n      class   = "relative"\n      modal   = "false"\n      center  = "true"\n      width   = "450"\n      kbclose = "true">\n        <a:vbox edge="10" padding="5">\n            <a:hbox>\n                <a:label width="95">Containing Text</a:label>\n                <a:textarea id="txtSFFind" flex="1" focusselect="true" cols="70" />\n            </a:hbox>\n            <a:hbox align="center">\n                <a:label width="95">File Extensions</a:label>\n                <a:textbox id="ddSFPatterns" flex="1" focusselect="true" initial-message="*.*"/>\n            </a:hbox>\n            <a:hbox id="barReplace" align="center">\n                <a:label width="95">Replace With</a:label>\n                <a:textbox id="txtReplace" flex="1" />\n            </a:hbox>\n            <a:hbox edge="10 0 5">\n                <a:fieldset flex="1" caption="Options" margin="0 0 1">\n                    <a:checkbox id="chkSFMatchCase"\n                      checked = "false"\n                      skin    = "checkbox_grey"\n                      margin  = "0 0 2"\n                      label   = "Match Case" />\n                    <!--a:checkbox id="chkSFWholeWords" label="Whole Words" /-->\n                    <a:checkbox id="chkSFRegEx"\n                      skin  = "checkbox_grey"\n                      label = "Regular Expressions" />\n                </a:fieldset>\n                <a:fieldset flex="1" caption="Scope" margin="0 0 1 5">\n                    <a:radiobutton\n                      group  = "grpSFScope"\n                      skin   = "radio_grey"\n                      value  = "projects"\n                      margin = "0 0 2"\n                      label  = "Project" />\n                    <a:radiobutton id="rbSFSelection"\n                      group  = "grpSFScope"\n                      skin   = "radio_grey"\n                      value  = "selection"\n                      label  = "Selection"\n                      selected = "true" />\n                </a:fieldset>\n            </a:hbox>\n        </a:vbox>\n        <a:hbox padding="10" pack="end" edge="6 10 10">\n            <a:button id="btnReplaceAll" skin="btn-default-css3">Replace All</a:button>\n            <a:button id="btnSFFind" default="2" class="btn-green" skin="btn-default-css3">Find All</a:button>\n            <a:button onclick="winSearchInFiles.hide()" skin="btn-default-css3">Close</a:button>\n        </a:hbox>\n    </a:window>\n\n    <!-- Added prerender here to speed up the loading. The query already has the data we need, we don\'t need to\n    render the results one by one (as we do, for example, with the Project Files tree -->\n    <a:hbox id="trSFHbox" anchors="0 0 0 0" visible="false" render="runtime">\n        <a:tree id        = "trSFResult"\n          skinset         = "searchinfiles"\n          border          = "0"\n          visible         = "false"\n          prerender       = "false"\n          each            = "[d:querydetail|d:maxreached|d:response|d:excerpt]"\n          loading-message = "Searching..."\n          style           = "position:absolute;top:0;left:0;bottom:0;right:17px;"\n          autoselect      = "false"\n          class           = "console_text">\n            <a:model />\n            <a:caption match="[d:querydetail]">[@count] {apf.htmlentities([@count]) == 1 ? "match" : "matches"} for \'{apf.htmlentities([@query])}\' in [@filecount] {[@filecount] == 1 ? "file" : "files"}{[@replacement].length &gt; 0 ? ", replaced as \'" + apf.htmlentities([@replacement]) + "\'" : ""} [@options]</a:caption>\n            <a:caption match="[d:maxreached]">Your search yielded too many results. The first hits are listed below:</a:caption>\n            <a:caption match="[d:response]">[@path] (#[d:excerpt])</a:caption>\n            <a:css match="[d:response]" value="term_ansi5Color" />\n            <a:caption match="[d:excerpt]"><div class="linenumber term_ansi6Color">[@line]</div><pre class="excerpt">{apf.htmlentities([text()])}</pre></a:caption>\n        </a:tree>\n        <a:scrollbar\n          id        = "sbSFResult"\n          for       = "trSFResult"\n          margin    = "0"\n          skin      = "console_scrollbar"\n          style     = "position:absolute;top:0;bottom:0;right:0;"\n          width     = "17" />\n    </a:hbox>\n</a:application>\n'}),define("text!ext/searchreplace/searchreplace.css",[],function(){return"#divSearchReplaceCount {\n    position: absolute;\n    width: auto;\n    height: 19px;\n    right: 12px;\n    top: 18px;\n}\n\n#divSearchReplaceCount .searchIter,\n#divSearchReplaceCount .searchTotal {\n    color: #aaa;\n    font-size: 11px;\n    height: 19px;\n    line-height: 20px;\n    text-align: center;\n    vertical-align: middle;\n    display:inline;\n    float: left;\n}\n\n#divSearchReplaceCount .searchIter {\n    margin: 0 1px 0 0;\n    padding: 0 0 0 7px;\n}\n\n#divSearchReplaceCount .searchTotal {\n    margin: 0;\n    padding: 0 5px 0 2px;\n}\n\n.tb_textbox.searchTxt .sbtb_middle input {\n    width: 255px;\n}"}),define("text!ext/searchreplace/searchreplace.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window id="winSearchReplace"\n      onhide  = "require(\'ext/searchreplace/searchreplace\').onHide()"\n      title   = "Search &amp; Replace" \n      buttons = "close" \n      modal   = "false" \n      center  = "true" \n      skin    = "bk-window"\n      class   = "relative"\n      width   = "395" \n      kbclose = "true">\n        <a:vbox edge="15 10 20" padding="5">\n            <a:hbox align="center">\n                <a:label width="75">Search</a:label>\n                <a:textbox id="txtFind" flex="1" focusselect="true" class="searchTxt"/>\n                <div id="divSearchReplaceCount"><span class="searchIter" id="spanSearchReplaceIter">0</span><span class="searchTotal" id="spanSearchReplaceTotal">0</span></div>\n            </a:hbox>\n            <a:hbox id="barSingleReplace" align="center">\n                <a:label width="75">Replace With</a:label>\n                <a:textbox id="txtReplace" flex="1" focusselect="true"/>\n            </a:hbox>\n            <a:table columns="150,150" edge="10 10 0 10">\n                <a:checkbox id="chkMatchCase" checked="false" label="Match Case" skin="checkbox_grey" />\n                <a:checkbox id="chkWrapAround" checked="true" label="Wrap Around" skin="checkbox_grey" />\n                <a:checkbox id="chkWholeWords" label="Whole Words" skin="checkbox_grey" />\n                <a:checkbox id="chkSearchSelection" label="Search Selection" skin="checkbox_grey" />\n                <a:checkbox id="chkRegEx" label="Regular Expressions" skin="checkbox_grey" />\n                <a:checkbox id="chkSearchBackwards" label="Search Backwards" skin="checkbox_grey" />\n            </a:table>\n        </a:vbox>\n        <a:hbox padding="10" pack="end" edge="6 10 10">\n            <a:button id="btnReplace" skin="btn-default-css3">Replace</a:button>\n            <a:button id="btnReplaceAll" skin="btn-default-css3">Replace All</a:button>\n            <a:button id="btnFind" default="2" class="btn-green" skin="btn-default-css3">Find</a:button>\n            <a:button onclick="winSearchReplace.hide()" skin="btn-default-css3">Close</a:button>\n        </a:hbox>\n    </a:window>\n</a:application>'}),define("text!ext/quickwatch/quickwatch.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window id="winQuickWatch"\n      title     = "Quickwatch" \n      buttons   = "close" \n      modal     = "false" \n      center    = "true"\n      width     = "500"\n      skin      = "bk-window"\n      class     = "nofooter"\n      height    = "350"\n      resizable = "true"\n      kbclose   = "true">\n        <a:vbox anchors="0 0 0 0">\n            <a:textbox id="txtCurObject" \n                skin      = "tbempty" \n                margin    = "5" \n                realtime  = "true"\n                disabled  = "{!stDebugProcessRunning.active or stRunning.active}"\n                initial-message = "Enter an expression"\n                focusselect     = "true" \n                onclear   = "\n                    dgWatch.clear();\n                "/>\n            \n            <a:datagrid id="dgWatch"\n              flex       = "1"\n              border     = "1 0 0 0"\n              options    = "size|move"\n              class      = "noscrollbar"\n              scrollbar  = "sbShared 20 2 2"\n              prerender  = "false"\n              caching    = "false"\n              disabled   = "{!stDebugProcessRunning.active or stRunning.active}"\n              empty-message   = "Type a javascript expression and press enter."\n              loading-message = "Calculating..."\n              onafterselect   = "\n                if (this.selected)\n                    txtCurObject.setValue(require(\'ext/debugger/inspector\').calcName(this.selected, true));\n              "\n              onbeforechange  = "\n                return require(\'ext/debugger/inspector\').checkChange(event.args[0]);\n              ">\n                <a:model>\n                    <vars />\n                </a:model>\n                <a:actions />\n                <a:each match="[item|globals]" sort="[@name]">\n                    <a:insert match="[item[@children]]" get="{adbg.loadObjects(dbg, %[.])}" />\n                    <a:expanded match="[node()[@expand]]" />\n                    <a:column caption="Property" value="{[@name] || \'Globals\'}" width="120" icon="debugger/genericvariable_obj.gif" tree="true" />\n                    <a:column caption="Value" value="{apf.escapeXML([@value])}" width="100%" />\n                    <a:column caption="Type" value="[@type]" width="80"/>\n                </a:each>\n                <a:change set="{require(\'ext/debugger/inspector\').applyChange(xmlNode);}" />\n            </a:datagrid>\n        </a:vbox>\n    </a:window>\n</a:application>'}),define("text!ext/quicksearch/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n   <a:bar name="bar">\n        <a:style><![CDATA[\n            .barQuickSearch{\n                position : relative;\n\n                -webkit-border-top-left-radius: 0px;\n                -webkit-border-top-right-radius: 0px;\n                -webkit-border-bottom-right-radius: 8px;\n                -webkit-border-bottom-left-radius: 8px;\n                -moz-border-radius-topleft: 0px;\n                -moz-border-radius-topright: 0px;\n                -moz-border-radius-bottomright: 8px;\n                -moz-border-radius-bottomleft: 8px;\n                border-top-left-radius: 0px;\n                border-top-right-radius: 0px;\n                border-bottom-right-radius: 8px;\n                border-bottom-left-radius: 8px;\n\n                border-left: 1px solid #b8b8b8;\n                border-right: 1px solid #b8b8b8;\n                border-bottom: 1px solid #b8b8b8;\n\n                background-color: #e8e8e8;\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(232,232,232)),color-stop(1, rgb(227,227,227)));\n                background:-moz-linear-gradient(center bottom,rgb(232,232,232) 0%,rgb(227,227,227) 100%);\n            }\n            \n            .barQuickSearch .searchbox_textbox .sbtb_middle input {\n                width: 190px;\n            }\n            \n            .barQuickSearch .searchbox_textbox .sbtb_middle{\n                border-radius : 3px 0 0 3px;\n            }\n            \n            #divSearchCount {\n                position: absolute;\n                width: auto;\n                height: 19px;\n                right: 73px;\n                top: 2px;\n            }\n            \n            #divSearchCount .searchIter,\n            #divSearchCount .searchTotal {\n                color: #aaa;\n                font-size: 11px;\n                height: 19px;\n                line-height: 20px;\n                text-align: center;\n                vertical-align: middle;\n                display:inline;\n                float: left;\n            }\n            \n            #divSearchCount .searchIter {\n                margin: 0 1px 0 0;\n                padding: 0 0 0 7px;\n            }\n            \n            #divSearchCount .searchTotal {\n                margin: 0;\n                padding: 0 5px 0 2px;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class="barQuickSearch">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n\n    <a:button name="btnsearchicon">\n        <a:style><![CDATA[\n            .btnsearchicon {\n                cursor             : pointer;\n                position           : relative;\n                -moz-user-select   : none;\n                -khtml-user-select : none;\n                user-select        : none;\n                \n            }\n            .btnsearchicon .lbl {\n                width              : 20px;\n                height             : 21px;\n                padding-top        : 4px;\n                overflow           : hidden;\n            }\n            .btnsearchicon span {\n                height: 20px;\n                display: block;\n                background-repeat:no-repeat;\n                background-position: 2px 1px;\n            }\n\n            .btnsearchiconOver span {\n                background-position: 2px -20px;\n            }\n            .btnsearchiconDown span {\n                background-position: 2px -40px;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main\n              caption    = "div[1]/text()"\n              label      = "div[1]/text()"\n              background = "."\n              icon       = "div[1]/span"\n              minwidth   = "20">\n                <div class="btnsearchicon">\n                    <div class="lbl">-\n                        <span></span>\n                    </div>\n                 </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n    <a:button name="btnquicksearchnav">\n        <a:style><![CDATA[\n            .btnquicksearchnav {\n                height             : 22px;\n                cursor             : pointer;\n                position           : relative;\n                -moz-user-select   : none;\n                -khtml-user-select : none;\n                user-select        : none;\n                width              : 20px;\n             }\n            .btnquicksearchnav .lbl{\n                background-color: #e5e5e5;\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(229,229,229)),color-stop(1, rgb(248,248,248)));\n                background:-moz-linear-gradient(center bottom,rgb(229,229,229) 0%,rgb(248,248,248) 100%);\n                color: #333333;\n                border: 1px solid #afafaf;\n                margin: 0;\n                outline: none;\n                font-family: Tahoma, Arial;\n                font-size: 12px;\n                text-overflow: ellipsis;\n                -webkit-box-shadow: 0px 1px 0px #ffffff;\n                -moz-box-shadow: 0px 1px 0px #ffffff;\n                box-shadow: 0px 1px 0px #ffffff;\n                height : 22px;\n                padding-top: 1px;\n            }\n\n            .btnquicksearchnavOver .lbl {\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(237,237,237)),color-stop(1, rgb(254,254,254)));\n                background:-moz-linear-gradient(center bottom,rgb(237,237,237) 0%,rgb(254,254,254) 100%);\n            }\n            .btnquicksearchnavDown .lbl {\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(248,248,248)),color-stop(1, rgb(229,229,229)));\n                background:-moz-linear-gradient(center bottom,rgb(248,248,248) 0%,rgb(229,229,229) 100%);\n            }\n\n            .btnquicksearchnav.btnquicksearchnavLeft .lbl {\n                border-right: none;\n                border-left: none;\n            }\n            .btnquicksearchnav.btnquicksearchnavRight .lbl{\n                border-left: none;\n                -webkit-border-top-left-radius: 0px;\n                -webkit-border-top-right-radius: 4px;\n                -webkit-border-bottom-right-radius: 4px;\n                -webkit-border-bottom-left-radius: 0px;\n                -moz-border-radius-topleft: 0px;\n                -moz-border-radius-topright: 4px;\n                -moz-border-radius-bottomright: 4px;\n                -moz-border-radius-bottomleft: 0px;\n                border-top-left-radius: 0px;\n                border-top-right-radius: 4px;\n                border-bottom-right-radius: 4px;\n                border-bottom-left-radius: 0px;\n            }\n\n            .btnquicksearchnav .lbl {\n                \n            }\n            .btnquicksearchnav span {\n                background-repeat:no-repeat;\n                display: block;\n                height: 22px;\n                background-position:center center;\n            }\n\n            .btnquicksearchnav .btnDivider {\n                z-index: 1;\n                border-color: transparent white transparent #C3C3C3;\n                border-left:1px solid #C3C3C3;\n                border-right:1px solid white;\n                border-style:none solid;\n                border-width:medium 1px;\n                cursor:default;\n                height:17px;\n                line-height:0;\n                position:absolute;\n                right: -1px;\n                top:4px;\n                width:0;\n                display: none;\n            }\n\n            .btnquicksearchnav.withDivider .btnDivider {\n                display: block;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main\n              caption    = "div[1]/text()"\n              label      = "div[1]/text()"\n              background = "."\n              icon       = "div[1]/span"\n              minwidth   = "20">\n                <div class="btnquicksearchnav">\n                    <div class="lbl">-\n                        <span></span>\n                        <div class="btnDivider"></div>\n                    </div>\n                 </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>\n'}),define("text!ext/quicksearch/quicksearch.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="winQuickSearch"\n      skinset = "quicksearch"\n      visible = "false"\n      width   = "350"\n      kbclose = "true"\n      top     = "-27"\n      right   = "30"\n      focussable = "true">\n        <a:hbox edge="0 5 5 5">\n            <a:textbox id="txtQuickSearch" flex="1" focusselect="true" skin="searchbox_textbox" skinset="default" class="quickSearch"  />\n            <a:button onclick="require(\'ext/quicksearch/quicksearch\').findprevious(1)" skin="btnquicksearchnav" class="btnquicksearchnavLeft withDivider" icon="arrow_left_search.png" />\n            <a:button onclick="require(\'ext/quicksearch/quicksearch\').findnext(1)" skin="btnquicksearchnav" class="btnquicksearchnavRight" icon="arrow_right_search.png" />\n            <a:button margin="0 0 0 5" skin="btnsearchicon" icon="rounded_close.png" onclick="\n              require(\'ext/quicksearch/quicksearch\').toggleDialog(-1);\n            " />\n            <div id="divSearchCount"><span class="searchIter" id="spanSearchIter">0</span><span class="searchTotal" id="spanSearchTotal">0</span></div>\n        </a:hbox>\n    </a:bar>\n</a:application>'}),define("text!ext/gotoline/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:list name="list">\n        <a:style><![CDATA[\n            .gotolinelist{\n                overflow: hidden;\n                position: relative;\n                background-color: #545454;\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(69,69,69)),color-stop(1, rgb(84,84,84)));\n                background: -moz-linear-gradient(center bottom,rgb(69,69,69) 0%,rgb(84,84,84) 100%);\n                color: #e7e7e7;\n                border-top: 1px solid #282727;\n                border-bottom: 1px solid #575757;\n                margin: 0;\n                outline: none;\n                font-family: Tahoma;\n                font-size: 12px;\n                text-overflow: ellipsis;\n                -webkit-border-radius: 2px;\n                -moz-border-radius: 2px;\n                border-radius: 2px;\n                cursor: default;\n                text-align: right;\n            }\n            .gotolinelist>.selected{\n                background-color: #5f5f5f;\n                color: #e7e7e7;\n            }\n            .gotolinelistFocus>.selected{\n                color : #e7e7e7;\n            }\n            .gotolinelist .empty, .gotolinelist .offline, .gotolinelist .loading{\n                text-align: center;\n                padding: 8px 0 0 0;\n                color: #777;\n                font-size : 8pt;\n                font-weight : normal;\n            }\n            .gotolinelist>DIV{\n                padding: 2px 6px;\n            }\n\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class=\'gotolinelist\'>\n                </div>\n            </a:main>\n            <a:item\n            class     = "."\n            container = "."\n            caption   = "."\n            select    = "."\n        >\n                <div> </div>\n            </a:item>\n            <a:empty caption=".">\n                <div class="message">-</div>\n            </a:empty>\n        </a:presentation>\n    </a:list>\n    <a:bar name="bar">\n        <a:style><![CDATA[\n            .barGotoline{\n                position : absolute;\n                background-color: #353637;\n                -webkit-border-top-left-radius: 0px;\n                -webkit-border-top-right-radius: 8px;\n                -webkit-border-bottom-right-radius: 8px;\n                -webkit-border-bottom-left-radius: 0px;\n                -moz-border-radius-topleft: 0px;\n                -moz-border-radius-topright: 8px;\n                -moz-border-radius-bottomright: 8px;\n                -moz-border-radius-bottomleft: 0px;\n                border-top-left-radius: 0px;\n                border-top-right-radius: 8px;\n                border-bottom-right-radius: 8px;\n                border-bottom-left-radius: 0px;\n                -webkit-box-shadow: 1px 1px 4px #666666;\n                -moz-box-shadow: 1px 1px 4px #666666;\n                box-shadow: 1px 1px 4px #666666;\n                width : 20px;\n                left : -100px;\n            }\n            .brGtlContent {\n            }\n            .barGotoline .brGtlTop {\n                background: url(images/barGotoLineCorners.png) no-repeat 0 0;\n                height: 3px;\n                width: 4px;\n                position: absolute;\n                top: -3px;\n                left:0;\n            }\n            .barGotoline .brGtlBottom {\n                background: url(images/barGotoLineCorners.png) no-repeat 0 -3px;\n                height: 3px;\n                width: 4px;\n                position: absolute;\n                bottom: -3px;\n                left:0;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isIE"><![CDATA[\n            .barGotoline .brGtlTop, .barGotoline .brGtlBottom {\n                display: none;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="barGotoline">\n                    <div class="brGtlTop"></div>\n                    <div class="brGtlBottom"></div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    <a:textbox name="textbox">\n        <a:style><![CDATA[\n            .tbGotoline {\n                position : relative;\n                height   : 25px;\n            }\n\n            .tbGotoline .sbtb_middle {\n                height           : 15px;\n                padding          : 2px 5px 2px 5px;\n\n                background-color: #ffffff;\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0.5, rgb(255,255,255)),color-stop(1, rgb(235,235,235)));\n                background: -moz-linear-gradient(center bottom,rgb(255,255,255) 50%,rgb(235,235,235) 100%);\n                color: #0471cf;\n                border-top: 1px solid #fafafa;\n                margin: 0;\n                outline: none;\n                font-family: \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Droid Sans Mono\', \'Consolas\', monospace;\n                font-size: 12px;\n                text-overflow: ellipsis;\n                -webkit-border-radius: 2px;\n                -moz-border-radius: 2px;\n                border-radius: 2px;\n\n                -webkit-box-shadow: 0px 1px 0px #ffffff;\n                -moz-box-shadow: 0px 1px 0px #ffffff;\n                box-shadow: 0px 1px 0px #ffffff;\n            }\n\n            .tbGotoline .sbtb_middle INPUT {\n                border           : 0;\n                height           : 13px;\n                font-size        : 12px;\n                color            : #0471cf;\n                font-family      : \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Droid Sans Mono\', \'Consolas\', monospace;\n                outline          : none;\n                background-color : transparent;\n                width: 100%;\n                text-align: center;\n            }\n\n            .tbGotolineInitial .sbtb_middle INPUT {\n                color : #0471cf;\n            }\n\n            .tbGotolineDisabled .sbtb_middle INPUT {\n                color : #0471cf;\n            }\n\n            .tbGotolineDisabled .sbtb_middle{\n                background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgb(235,235,235)),color-stop(0.4, rgb(255,255,255)));\n                background: -moz-linear-gradient(center bottom,rgb(235,235,235) 0%,rgb(255,255,255) 40%);\n                cursor : default;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isWebkit"><![CDATA[\n            .tbGotoline .sbtb_middle INPUT {\n                position : relative;\n                top : -3px;\n                padding : 0;\n                height : auto;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main input="div[1]/input">\n                <div class="tbGotoline">\n                    <div class="sbtb_middle">\n                        <input type="text" />\n                    </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:textbox>\n</a:skin>\n'}),define("text!ext/gotoline/gotoline.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="winGotoLine"\n      skinset = "gotoline"\n      visible = "false"\n      width   = "60"\n      height  = "90"\n      left    = "-100"\n      top     = "-100"\n      zindex  = "10000">\n        <a:vbox anchors="0 0 0 0" padding="0" edge="5">\n            <a:textbox id="txtLineNr"\n              focusselect="true" />\n            <a:list id="lstLineNumber"\n              model   = "{tabEditors.getPage(tabEditors.activepagenr).$model}"\n              flex    = "1"\n              caption = "[@nr]"\n              each    = "[gotoline/line]"\n              autoselect    = "false"\n              multiselect   = "false"\n              empty-message = "empty" />\n        </a:vbox>\n    </a:bar>\n</a:application>\n'}),define("text!ext/html/html.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    \n    <a:bar id="barHtmlMode" >\n        <a:divider skin="c9-divider" />\n        <!--a:button skin="c9-toolbarbutton" id="btnHtmlRun">run on server...</a:button-->\n        <a:button skin="c9-toolbarbutton" icon="preview.png" class="preview" id="btnHtmlOpen" tooltip="Preview in browser">Preview</a:button>\n    </a:bar>\n   \n</a:application>'}),define("text!ext/help/help.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml"> \n    <a:menu id="mnuHelp">\n        <a:item id="mnuAbout" onclick="require(\'ext/help/help\').showAbout();">About</a:item>\n        <a:divider />\n        <a:item id="mnuDocumentation" onclick="window.open(\'http://support.cloud9ide.com/forums\')">Documentation</a:item>\n        <a:item id="mnuChangelog" onclick="window.open(\'http://c9.io/site/tag/changelog/\')">Changelog</a:item>\n        <a:item id="mnuQuickStart" onclick="require(\'ext/quickstart/quickstart\').launchQS();">Quick Start</a:item>\n        <a:item id="mnuGuidedTour" onclick="require(\'ext/guidedtour/guidedtour\').launchGT();">Take a Guided Tour</a:item>\n        <a:divider />\n        <a:item id="mnuKeybindings" onclick="require(\'ext/keybindings_default/keybindings_default\').keybindings();">Keyboard Shortcuts</a:item>\n        <a:divider />\n        <a:item submenu="mnuSupport">Support</a:item>\n        <a:divider />\n        <a:item submenu="mnuLearning">Learning</a:item>\n        <a:divider />\n        <a:item submenu="mnuContact">Get in Touch</a:item>\n    </a:menu>\n  \n    <a:menu id="mnuSupport">\n        <a:item id="mnuFAQ" onclick="window.open(\'http://support.cloud9ide.com/forums/20346041-frequently-asked-questions\')">FAQ</a:item>\n        <a:item id="mnuTroubleshooting" onclick="window.open(\'http://support.cloud9ide.com/forums/20329737-troubleshooting\')">Troubleshooting Tips</a:item>\n        <a:divider />\n        <a:item id="mnuLogAnIssue" onclick="window.open(\'https://github.com/ajaxorg/cloud9/issues?milestone=1\')">Report a bug</a:item>     \n    </a:menu>\n    \n    <a:menu id="mnuLearning">\n        <a:item id="mnuYouTube" onclick="window.open(\'http://www.youtube.com/user/c9ide/videos?view=pl\')">YouTube Channel for Cloud9 IDE</a:item>\n    </a:menu>\n\n    <a:menu id="mnuContact">\n        <a:item id="mnuBlog" onclick="window.open(\'http://cloud9ide.posterous.com/\')">Blog for Cloud9</a:item>\n        <a:item id="mnuTwitterSupport" onclick="window.open(\'https://twitter.com/#!/C9Support\')">Twitter (for Cloud9 IDE support)</a:item>\n        <a:item id="mnuTwitterGeneral" onclick="window.open(\'https://twitter.com/#!/cloud9ide\')">Twitter (for general Cloud9 tweets)</a:item>\n        <a:item id="mnuFacebook" onclick="window.open(\'https://www.facebook.com/Cloud9IDE\')">Facebook for Cloud9</a:item>     \n    </a:menu>\n      \n    <a:window\n      id        = "aboutDialog"\n      icon      = ""\n      kbclose   = "true"\n      center    = "true"\n      width     = "512"\n      skinset   = "help-skin"\n      buttons   = "close"\n      skin      = "win-help-about"\n      class     = "aboutDialogBox">\n        <div class="aboutImage">\n            <div id="c9Version"><?lm\n                Version {cloud9config.version}\n            ?></div>\n             <!-- <div class="c9Legal">\n            <p><a href="http://www.bettercallsaul.com/">Click here for legal notices.</p>\n            </div> -->\n            <div class="c9StaffHeader">\n                <p>Cloud9 IDE is brought to you by:</p>\n            </div>\n            <div class="c9Staff">\n                <p>\n                    Ruben Daniels, Rik Arends, David van Ballegooijen, Zef Hemel, Chrissy Welsh, \n                    Lieke Arends, Esther Visser, Sergi Mansilla, Daniela Gavidia, Mike de Boer,\n                    Fabian Jakobs, Matt Pardee, Bert Belder, Ben Noordhuis, Tim Caswell, Jos Uijterwaal,\n                    Linh Nguyen, Giannis Panagiotou, Mostafa Eweda, Jan Jongboom, Garen Torikian, \n                    Vlad Zinculescu, Detmar ter Huurne, Pippa\n                </p>\n            </div>\n            <div class="c9Copyright">\n                <p>&#169; 2010 — 2012 Cloud9 IDE Inc. All rights reserved</p>\n            </div>\n        </div>\n    </a:window>\n</a:application>'}),define("text!ext/help/style.css",[],function(){return"#c9Version {\n    position: absolute;\n    top: 80px;\n    left: 215px;\n    color: white;\n    font-size: 12px;\n    padding-left: 12px;\n}\n\n.c9Legal {\n    position: absolute;\n    top: 60px;\n    left: 225px;\n    display:none;\n}\n\n.c9Staff {\n    position: absolute;\n    top: 170px;\n    left: 75px;\n    color: #aaaaaa;\n    font-size: 10px;\n    width: 399px;\n    line-height: 16px;\n}\n\n.c9StaffHeader {\n    text-transform:uppercase;\n    color: #dddddd;\n    font-size: 10px;\n    position: absolute;\n    top: 140px;\n    left: 170px;\n}\n\n.c9Copyright {\n    position: absolute;\n    bottom: 45px;\n    left: 155px;\n    font-size: 10px;\n    color: #aaaaaa;\n}"}),define("text!ext/help/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:modalwindow name="win-help-about">\n        <a:style><![CDATA[\n            .win-help-about {\n                overflow : hidden;\n            }\n\n            .win-help-about .wh-container {\n                overflow:visible;\n                z-index: 1;\n                position: relative;\n            }\n            \n            .aboutDialogBox .aboutImage {\n                position:relative;\n                color: white;\n                background: url(images/about_cloud.png) no-repeat 0 0;\n                width: 515px;\n                height: 339px;\n            }\n            \n            .win-help-about .buttons {\n                position: absolute;\n                top: 68px;\n                right: 78px;\n                z-index: 2;\n            }\n            .win-help-about .buttons .close {\n                 height: 20px;\n                width: 19px;\n                background: url(images/close.png) no-repeat 4px 3px;\n            }\n            \n            .win-help-about .buttons .close.hover {\n                background-position: -14px 3px;\n            }\n            \n            .win-help-about .buttons .close.down {\n                background-position: -31px 3px;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n            <a:main\n              collapsed-height = "26"\n              minheight        = "50"\n              minwidth         = "50"\n              drag             = "div[2]"\n              container        = "div[2]"\n              title            = "div[2]/text()"\n              buttons          = "div[1]">\n                <div class="win-help-about">\n                    <div class="buttons"></div>\n                    <div class="wh-container"> </div>\n                </div>\n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n            <a:cover>\n                <div opacity="0"> </div>\n            </a:cover>\n        </a:presentation>\n    </a:modalwindow>\n</a:skin>'}),define("ext/help/help",["require","exports","module","core/ide","core/ext","text!ext/help/help.xml","text!ext/help/style.css","text!ext/help/skin.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("text!ext/help/help.xml"),g=a("text!ext/help/style.css"),h=a("text!ext/help/skin.xml");c.exports=e.register("ext/help/help",{name:"Help Menu",dev:"Cloud9 IDE, Inc.",alone:!0,type:e.GENERAL,nodes:[],markup:f,css:g,panels:{},skin:{id:"help-skin",data:h,"media-path":"/static/ext/help/images/"},showingAll:!0,initPanel:function(a){if(a.panel)return;e.initExtension(a),this.$setEvents(a);var b=this.$settings&&this.$settings[a.path];b&&this.setPanelSettings(a,b),a.panel.setAttribute("draggable","false")},register:function(a){var b=this;a.alwayson||(a.mnuItem=mnuPanels.appendChild(new apf.item({caption:a.name,type:"check",checked:"{panelExt.visible}",onclick:function(){b.initPanel(a),this.checked?a.enable():a.disable()}}))),a.visible&&(a.skin?setTimeout(function(){this.initPanel(a)}):this.initPanel(a)),this.panels[a.path]=a},unregister:function(a){a.mnuItem.destroy(!0,!0),delete this.panels[a.path]},init:function(a){apf.importCssString(this.css||""),this.nodes.push(barMenu.appendChild(new apf.button({submenu:"mnuHelp",caption:"Help",skin:"c9-menu-btn",margin:"1 0 0 0"})));if(window.location.host.indexOf("c9.io")>=0||window.location.host.indexOf("stage.io")>=0)var b=window.location.protocol+"//"+window.location.host+"/site/?json=get_tag_posts&tag_slug=changelog",c=apf.ajax(b,{method:"GET",contentType:"application/json",async:!0,data:JSON.stringify({agent:navigator.userAgent,type:"C9 SERVER EXCEPTION"}),callback:function(a,b){if(b==apf.SUCCESS&&a!==undefined){var c=JSON.parse(a),d=c.posts[0].date;mnuChangelog.setAttribute("caption",mnuChangelog.caption+" ("+d.split(" ")[0].replace(/-/g,".")+")")}}})},showAbout:function(){aboutDialog.show(),document.getElementById("c9Version").innerHTML="Version "+window.cloud9config.version},launchTwitter:function(){alert("Let's go to Twitter!")},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("apf/elements/codeeditor",["require","exports","module","ace/editor","ace/edit_session","ace/virtual_renderer","ace/undomanager","ace/range","ace/multi_select","ace/lib/fixoldbrowsers"],function(a,b,c){"use strict";var d=a("ace/editor").Editor,e=a("ace/edit_session").EditSession,f=a("ace/virtual_renderer").VirtualRenderer,g=a("ace/undomanager").UndoManager,h=a("ace/range").Range,i=a("ace/multi_select").MultiSelect;a("ace/lib/fixoldbrowsers"),apf.codeeditor=c.exports=function(a,b){this.$init(b||"codeeditor",apf.NODE_VISIBLE,a),this.documents=[],this.$cache={},this.setProperty("line",1),this.setProperty("col",1)},function(){this.implement(apf.DataAction),this.$focussable=!0,this.$childProperty="value",this.$isTextInput=!0,this.value="",this.multiline=!0,this.caching=!0,this.$booleanProperties.activeline=!0,this.$booleanProperties.caching=!0,this.$booleanProperties.readonly=!0,this.$booleanProperties.activeline=!0,this.$booleanProperties.showinvisibles=!0,this.$booleanProperties.showprintmargin=!0,this.$booleanProperties.overwrite=!0,this.$booleanProperties.softtabs=!0,this.$booleanProperties.gutter=!0,this.$booleanProperties.highlightselectedword=!0,this.$booleanProperties.autohidehorscrollbar=!0,this.$booleanProperties.behaviors=!0,this.$booleanProperties.folding=!0,this.$booleanProperties.wrapmode=!0,this.$booleanProperties.wrapmodeViewport=!0,this.$booleanProperties.animatedscroll=!0,this.$supportedProperties.push("value","syntax","activeline","selectstyle","caching","readonly","showinvisibles","showprintmargin","printmargincolumn","overwrite","tabsize","softtabs","debugger","model-breakpoints","scrollspeed","theme","gutter","highlightselectedword","autohidehorscrollbar","animatedscroll","behaviors","folding","newlinemode"),this.$getCacheKey=function(a){if(typeof a=="string")var b=this.xmlRoot?this.xmlRoot.getAttribute(apf.xmldb.xmlIdTag):a;else if(a.nodeType)var b=a.getAttribute(apf.xmldb.xmlIdTag);return b},this.clearCacheItem=function(a){if(!this.caching)return;var b=this.$getCacheKey(a);b&&delete this.$cache[b]},this.addEventListener("unloadmodel",function(){this.syncValue()}),this.$propHandlers.value=function(a){var b,c,d=this;this.caching&&(c=this.$getCacheKey(a)),a instanceof e&&(b=a),!b&&c&&(b=this.$cache[c]),b?typeof a=="string"&&!b.hasValue&&(b.setValue(a),this.$editor.moveCursorTo(0,0),b.hasValue=!0):(a.nodeType&&apf.xmldb.addNodeListener(a.nodeType==1?a:a.parentNode,this),b=new e(typeof a=="string"?a:a.nodeType>1&&a.nodeType<5?a.nodeValue:a.firstChild&&a.firstChild.nodeValue||""),b.cacheId=c,b.setUndoManager(new g),c&&(this.$cache[c]=b)),b.$hasModeListener||(b.$hasModeListener=!0,b.on("loadmode",function(a){d.dispatchEvent("loadmode",a)})),b.setMode(d.getMode(d.syntax)),b.setTabSize(parseInt(d.tabsize,10)),b.setUseSoftTabs(d.softtabs),b.setUseWrapMode(d.wrapmode),d.wrapmodeViewport?b.setWrapLimitRange(d.wraplimitmin,null):b.setWrapLimitRange(d.wraplimitmin,d.printmargincolumn),b.setFoldStyle(d.folding?"markbegin":"manual"),b.setNewLineMode(d.newlinemode),d.$removeDocListeners&&d.$removeDocListeners(),d.$removeDocListeners=d.$addDocListeners(b),d.$editor.setShowPrintMargin(d.showprintmargin),d.$clearMarker(),d.$editor.setSession(b),b.setBreakpoints([])},this.afterOpenFile=function(a){this.$updateMarker(),this.$updateBreakpoints(a)},this.$addDocListeners=function(a){var b=this,c=function(){var c=a.getSelection().getCursor();b.setProperty("line",c.row+1),b.setProperty("col",c.column+1)};return a.getSelection().addEventListener("changeCursor",c),c(),function(){a.getSelection().removeEventListener("changeCursor",c)}},this.$clearMarker=function(){this.$marker&&(this.$editor.renderer.removeGutterDecoration(this.$lastRow[0],this.$lastRow[1]),this.$editor.getSession().removeMarker(this.$marker),this.$marker=null)},this.$updateMarkerPrerequisite=function(){return this.$debugger&&this.$debugger.$updateMarkerPrerequisite()},this.$updateMarker=function(){this.$clearMarker();var a=this.$updateMarkerPrerequisite();if(!a)return;var b=this.xmlRoot;if(b.getAttribute("scriptid")!==a.getAttribute("scriptid"))return;var c=this.$debugger.$mdlStack.queryNode("frame[1]"),d=a==c,e=parseInt(b.getAttribute("lineoffset")||"0",10),f=parseInt(a.getAttribute("line"),10)-e,g=new h(f,0,f+1,0);this.$marker=this.$editor.getSession().addMarker(g,d?"ace_step":"ace_stack","line");var i=d?"arrow":"stack";this.$lastRow=[f,i],this.$editor.renderer.addGutterDecoration(f,i),this.$editor.gotoLine(f+1,parseInt(a.getAttribute("column"),10))},this.$updateBreakpoints=function(a){a=a||this.$editor.getSession(),a.setBreakpoints([]);if(!this.$breakpoints)return;if(this.xmlRoot){var b=this.xmlRoot.getAttribute("scriptname");if(!b)return;var c=this.$breakpoints.queryNodes("//breakpoint[@script='"+b+"']"),d=[];for(var e=0;e<c.length;e++)d.push(parseInt(c[e].getAttribute("line"),10)-parseInt(c[e].getAttribute("lineoffset"),10));d.length&&a.setBreakpoints(d)}},this.$toggleBreakpoint=function(a){this.$debugger.toggleBreakpoint(this.xmlRoot,a)},this.$propHandlers.theme=function(a){this.$editor.setTheme(a)},this.$propHandlers.newlinemode=function(a){this.newlinemode=a||"auto",this.$editor.getSession().setNewLineMode(this.newlinemode)},this.$propHandlers.syntax=function(a){this.$editor.getSession().setMode(this.getMode(a))},this.getMode=function(a){return a=(a||"text").toLowerCase(),a.indexOf("/")==-1&&(a="ace/mode/"+a),a},this.$propHandlers.activeline=function(a){this.$editor.setHighlightActiveLine(a)},this.$propHandlers.selectstyle=function(a){this.$editor.setSelectionStyle(a)},this.$propHandlers.showprintmargin=function(a,b,c){this.$editor.setShowPrintMargin(a)},this.$propHandlers.printmargincolumn=function(a,b,c){this.$editor.setPrintMarginColumn(a),this.wrapmodeViewport||this.$editor.getSession().setWrapLimitRange(this.wraplimitmin,a)},this.$propHandlers.showinvisibles=function(a,b,c){this.$editor.setShowInvisibles(a)},this.$propHandlers.animatedscroll=function(a,b,c){this.$editor.setAnimatedScroll(a)},this.$propHandlers.overwrite=function(a,b,c){this.$editor.setOverwrite(a)},this.$propHandlers.readonly=function(a,b,c){this.$editor.setReadOnly(a)},this.$propHandlers.tabsize=function(a,b,c){this.$editor.getSession().setTabSize(parseInt(a,10))},this.$propHandlers.folding=function(a,b,c){this.$editor.setShowFoldWidgets(a),this.$editor.getSession().setFoldStyle(a?"markbegin":"manual")},this.$propHandlers.softtabs=function(a,b,c){this.$editor.getSession().setUseSoftTabs(a)},this.$propHandlers.scrollspeed=function(a,b,c){this.$editor.setScrollSpeed(a||2)},this.$propHandlers.gutter=function(a,b,c){this.$editor.renderer.setShowGutter(a)},this.$propHandlers.fontsize=function(a,b,c){this.$ext.style.fontSize=a+"px"},this.$propHandlers.wrapmode=function(a,b,c){this.$editor.getSession().setUseWrapMode(a)},this.$propHandlers.wraplimitmin=function(a,b,c){this.$editor.getSession().setWrapLimitRange(a,this.wraplimitmax)},this.$propHandlers.wraplimitmax=function(a,b,c){this.$editor.getSession().setWrapLimitRange(this.wraplimitmin,a)},this.$propHandlers.wrapmodeViewport=function(a,b,c){a===!0?this.$editor.getSession().setWrapLimitRange(this.wraplimitmin,null):this.$editor.getSession().setWrapLimitRange(this.wraplimitmin,this.printmargincolumn)},this.$propHandlers.highlightselectedword=function(a,b,c){this.$editor.setHighlightSelectedWord(a)},this.$propHandlers.autohidehorscrollbar=function(a,b,c){this.$editor.renderer.setHScrollBarAlwaysVisible(!a)},this.$propHandlers.behaviors=function(a,b,c){this.$editor.setBehavioursEnabled(a)},this.$propHandlers["model-breakpoints"]=function(a,b,c){this.$debuggerBreakpoints=!1,this.$breakpoints&&this.$breakpoints.removeEventListener("update",this.$onBreakpoint),this.$breakpoints=a;if(!this.$breakpoints){this.$updateBreakpoints();return}var d=this;d.$updateBreakpoints(),this.$onBreakpoint=function(){d.$updateBreakpoints()},this.$breakpoints.addEventListener("update",this.$onBreakpoint),this.$updateBreakpoints()},this.$propHandlers["debugger"]=function(a,b,c){this.$debugger&&(this.$debugger.removeEventListener("changeframe",this.$onChangeActiveFrame),this.$debugger.removeEventListener("break",this.$onChangeActiveFrame),this.$debugger.removeEventListener("beforecontinue",this.$onBeforeContinue)),typeof a=="string"?this.$debugger=apf.nameserver.get("debugger",a):this.$debugger=a;if(!this.$breakpoints||this.$debuggerBreakpoints)this.setProperty("model-breakpoints",this.$debugger?this.$debugger.$mdlBreakpoints:null),this.$debuggerBreakpoints=!0;if(!this.$debugger){this.$updateMarker();return}this.$updateMarker();var d=this;this.$onChangeActiveFrame=function(a){if(!a||!a.data)return;d.$updateMarker()},this.$onBeforeContinue=function(){d.$clearMarker()},this.$debugger.addEventListener("changeframe",this.$onChangeActiveFrame),this.$debugger.addEventListener("break",this.$onChangeActiveFrame),this.$debugger.addEventListener("beforecontinue",this.$onBeforeContinue)};var a=this.$propHandlers.model;this.$propHandlers.model=function(b){a.call(this,b),this.$updateMarker(),this.$updateBreakpoints()},this.addEventListener("xmlupdate",function(a){var b=a.xmlNode.getAttribute(apf.xmldb.xmlIdTag);!this.$cache[b]}),this.setValue=function(a){return this.setProperty("value",a,!1,!0)},this.clear=function(){this.$propHandlers.value.call(this,"",null,!0),this.dispatchEvent("clear")},this.getValue=function(){return this.$editor.getSession().getValue()},this.getDocument=this.getSession=function(){return this.$editor.getSession()},this.getSelection=function(){return this.$editor.getSession().getSelection()},this.getLastSearchOptions=function(){return this.$editor.getLastSearchOptions()},this.select=function(){},this.deselect=function(){this.$editor.clearSelection()},this.scrollTo=function(){},this.getDefaults=function(){return this.$defaults},this.$focus=function(a){if(!this.$ext||this.$ext.disabled)return;this.$setStyleClass(this.$ext,this.$baseCSSname+"Focus"),this.$editor.focus()},this.syncValue=function(){var a=this.$editor.getSession();if(!a.cacheId||a.cacheId==this.$getCacheKey(this.value)){var b=this.getValue();this.value!=b&&this.setProperty("value",b)}},this.$blur=function(a){if(!this.$ext)return;this.syncValue(),this.$setStyleClass(this.$ext,"",[this.$baseCSSname+"Focus"]),this.$editor.blur()},this.addEventListener("keydown",function(a){},!0),this.$isTextInput=function(a){return!0},this.$draw=function(){this.$ext=this.$getExternal(),this.$input=this.$getLayoutNode("main","content",this.$ext),this.addEventListener("resize",function(a){this.$editor.resize()}),this.$editor=new d(new f(this.$input)),new i(this.$editor);var a=this.$editor,b=this;a.addEventListener("changeOverwrite",function(a){b.setProperty("overwrite",a.data)}),a.addEventListener("gutterclick",function(c){b.$debugger&&c.clientX-a.container.getBoundingClientRect().left<20?(b.$toggleBreakpoint(c.getDocumentPosition().row),c.stop()):b.dispatchEvent("gutterclick",c)}),a.addEventListener("gutterdblclick",function(a){b.dispatchEvent("gutterdblclick",a)})},this.$loadAml=function(){var a=this.$editor,b=a.getSession();this.syntax===undefined&&(this.syntax="text"),this.tabsize===undefined&&(this.tabsize=b.getTabSize()),this.softtabs===undefined&&(this.softtabs=b.getUseSoftTabs()),this.scrollspeed===undefined&&(this.scrollspeed=a.getScrollSpeed()),this.animatedscroll===undefined&&(this.animatedscroll=a.getAnimatedScroll()),this.selectstyle===undefined&&(this.selectstyle=a.getSelectionStyle()),this.activeline===undefined&&(this.activeline=a.getHighlightActiveLine()),this.readonly===undefined&&(this.readonly=a.getReadOnly()),this.showinvisibles===undefined&&(this.showinvisibles=a.getShowInvisibles()),this.showprintmargin===undefined&&(this.showprintmargin=a.getShowPrintMargin()),this.printmargincolumn===undefined&&(this.printmargincolumn=a.getPrintMarginColumn()),this.overwrite===undefined&&(this.overwrite=a.getOverwrite()),this.fontsize===undefined&&(this.fontsize=12);var c=b.getWrapLimitRange();this.wraplimitmin===undefined&&(this.wraplimitmin=40),this.wraplimitmax===undefined&&(this.wraplimitmax=c.max),this.wrapmode===undefined&&(this.wrapmode=b.getUseWrapMode()),this.gutter===undefined&&(this.gutter=a.renderer.getShowGutter()),this.highlightselectedword===undefined&&(this.highlightselectedword=a.getHighlightSelectedWord()),this.autohidehorscrollbar&&(this.autohidehorscrollbar=!a.renderer.getHScrollBarAlwaysVisible()),this.behaviors===undefined&&(this.behaviors=!a.getBehavioursEnabled()),this.folding===undefined&&(this.folding=!0),this.newlinemode==undefined&&(this.newlinemode="auto")}}.call(apf.codeeditor.prototype=new apf.StandardBinding),apf.config.$inheritProperties["initial-message"]=1,apf.aml.setElement("codeeditor",apf.codeeditor)}),define("ext/code/proxydocument",["require","exports","module","ace/lib/oop","ace/document"],function(a,b,c){var d=a("ace/lib/oop"),e=a("ace/document").Document,f=function(a){this.$onChange=this.onChange.bind(this),this.setDocument(a)};d.inherits(f,e),function(){this.getDocument=function(){return this.doc},this.setDocument=function(a){return this.doc==a?this.doc:(this.doc&&this.doc.removeEventListener("change",this.$onChange),this.doc=a,this.doc.addEventListener("change",this.$onChange),this.doc)},this.onChange=function(a){this._dispatchEvent("change",a)},this.getNewLineCharacter=function(){return this.doc.getNewLineCharacter()},this.setNewLineMode=function(a){return this.doc.setNewLineMode(a)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.getLength=function(){return this.doc.getLength()},this.getLine=function(a){return this.doc.getLine(a)},this.getLines=function(a,b){return this.doc.getLines(a,b)},this.getTextRange=function(a){return this.doc.getTextRange(a)},this.insert=function(a,b){return this.doc.insert(a,b)},this.insertNewLine=function(a){return this.doc.insertNewLine(a)},this.insertInLine=function(a,b){return this.doc.insertInLine(a,b)},this.insertLines=function(a,b){return this.doc.insertLines(a,b)},this.removeNewLine=function(a){return this.doc.removeNewLine(a)},this.removeInLine=function(a,b,c){return this.doc.removeInLine(a,b,c)},this.removeLines=function(a,b){return this.doc.removeLines(a,b)},this.applyDeltas=function(a){return this.doc.applyDeltas(a)},this.revertDeltas=function(a){return this.doc.revertDeltas(a)}}.call(f.prototype),c.exports=f}),define("text!ext/code/code.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:codeeditor id="ceEditor"\n      flex              = "1"\n      anchors           = "2 0 0 0"\n      visible           = "false"\n      syntax            = "{require(\'ext/code/code\').getSyntax(%[.])}"\n      theme             = "[{require(\'ext/settings/settings\').model}::editors/code/@theme]"\n      overwrite         = "[{require(\'ext/settings/settings\').model}::editors/code/@overwrite]"\n      folding           = "[{require(\'ext/settings/settings\').model}::editors/code/@folding]"\n      behaviors         = "[{require(\'ext/settings/settings\').model}::editors/code/@behaviors]"\n      selectstyle       = "[{require(\'ext/settings/settings\').model}::editors/code/@selectstyle]"\n      activeline        = "[{require(\'ext/settings/settings\').model}::editors/code/@activeline]"\n      showinvisibles    = "[{require(\'ext/settings/settings\').model}::editors/code/@showinvisibles]"\n      showprintmargin   = "[{require(\'ext/settings/settings\').model}::editors/code/@showprintmargin]"\n      printmargincolumn = "[{require(\'ext/settings/settings\').model}::editors/code/@printmargincolumn]"\n      softtabs          = "[{require(\'ext/settings/settings\').model}::editors/code/@softtabs]"\n      tabsize           = "[{require(\'ext/settings/settings\').model}::editors/code/@tabsize]"\n      scrollspeed       = "[{require(\'ext/settings/settings\').model}::editors/code/@scrollspeed]"\n      newlinemode       = "[{require(\'ext/settings/settings\').model}::editors/code/@newlinemode]"\n      animatedscroll    = "[{require(\'ext/settings/settings\').model}::editors/code/@animatedscroll]"\n      fontsize          = "[{require(\'ext/settings/settings\').model}::editors/code/@fontsize]"\n      wrapmode          = "[{require(\'ext/settings/settings\').model}::editors/code/@wrapmode]"\n      wrapmodeViewport  = "[{require(\'ext/settings/settings\').model}::editors/code/@wrapmodeViewport]"\n      wraplimitmin      = "40"\n      wraplimitmax      = "80"\n      gutter            = "[{require(\'ext/settings/settings\').model}::editors/code/@gutter]"\n      highlightselectedword = "[{require(\'ext/settings/settings\').model}::editors/code/@highlightselectedword]"\n      autohidehorscrollbar  = "[{require(\'ext/settings/settings\').model}::editors/code/@autohidehorscrollbar]"\n\n      contextmenu       = "mnuCtxEditor"\n      debugger          = "{this.syntax == \'javascript\' ? dbg : null}"\n      readonly          = "{[@loading] or cloud9config.readonly or (location.host and window.stDebugProcessRunning and stDebugProcessRunning.active and [@scriptid])}"\n    />\n\n    <a:menu id="mnuCtxEditor" render="runtime" onfocus="require(\'ext/clipboard/clipboard\').keepRange()" ondisplay="require(\'ext/clipboard/clipboard\').showRange()">\n        <a:item onclick="tabEditors.getPage().$at.undo()">Undo</a:item>\n        <a:item onclick="tabEditors.getPage().$at.redo()">Redo</a:item>\n        <a:divider />\n        <a:item onclick="{require(\'ext/clipboard/clipboard\').cut()}">Cut</a:item>\n        <a:item onclick="{require(\'ext/clipboard/clipboard\').copy()}">Copy</a:item>\n        <a:item onclick="{require(\'ext/clipboard/clipboard\').paste()}">Paste</a:item>\n        <a:divider />\n        <a:item \n          visible="{stDebugProcessRunning.active and !stRunning.active}"\n          onclick="\n            require(\'ext/quickwatch/quickwatch\').toggleDialog(1, true);\n          ">Quick Watch</a:item>\n        <a:divider visible="{stDebugProcessRunning.active and !stRunning.active}" />\n        <a:item onclick="ceEditor.$editor.getSelection().selectAll()">Select All</a:item>\n    </a:menu>\n\n    <a:menu id="mnuSyntax">\n        <a:item type="radio" value="auto">Auto-Select</a:item>\n        <a:item type="radio" value="text/plain">Plain Text</a:item>\n        <a:divider />\n        <a:item type="radio" value="text/x-csharp">C#</a:item>\n        <a:item type="radio" value="text/x-c">C/C++</a:item>\n        <a:item type="radio" value="text/x-script.clojure">Clojure</a:item>\n        <a:item type="radio" value="text/x-script.coffeescript">CoffeeScript</a:item>\n        <a:item type="radio" value="text/x-coldfusion">Coldfusion</a:item>\n        <a:item type="radio" value="text/css">CSS</a:item>\n        <a:item type="radio" value="text/x-groovy">Groovy</a:item>\n        <a:item type="radio" value="text/x-java-source">Java</a:item>\n        <a:item type="radio" value="application/javascript">JavaScript</a:item>\n        <a:item type="radio" value="application/x-latex">Latex</a:item>\n        <a:item type="radio" value="application/x-sh">Shell Script</a:item>\n        <a:item type="radio" value="text/x-lua">Lua</a:item>\n        <a:item type="radio" value="text/x-markdown">Markdown</a:item>\n        <a:item type="radio" value="text/x-script.ocaml">OCaml</a:item>\n        <a:item type="radio" value="application/x-httpd-php">PHP</a:item>\n        <a:item type="radio" value="text/x-script.perl">Perl</a:item>\n        <a:item type="radio" value="text/x-script.powershell">Powershell</a:item>\n        <a:item type="radio" value="text/x-script.python">Python</a:item>\n        <a:item type="radio" value="text/x-script.ruby">Ruby</a:item>\n        <a:item type="radio" value="text/x-scala">Scala</a:item>\n        <a:item type="radio" value="text/x-scss">SCSS</a:item>\n        <a:item type="radio" value="text/x-sql">SQL</a:item>\n        <a:item type="radio" value="text/x-web-textile">Textile</a:item>\n        <a:item type="radio" value="text/html">(X)HTML</a:item>\n        <a:item type="radio" value="application/xml">XML</a:item>\n    </a:menu>\n</a:application>\n'}),define("text!ext/code/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox position="1000" class="underlined" label="Auto-pair Quotes, Brackets, etc." value="[editors/code/@behaviors]" skin="checkbox_grey" />\n    <a:checkbox position="2000" class="underlined" label="Code Folding" value="[editors/code/@folding]" skin="checkbox_grey" />\n    <a:checkbox position="3000" class="underlined" label="Full Line Selection" value="[editors/code/@selectstyle]" values="line|text" skin="checkbox_grey" />\n    <a:checkbox position="4000" class="underlined" label="Highlight Active Line" value="[editors/code/@activeline]" skin="checkbox_grey" />\n    <a:checkbox position="5000" class="underlined" id="cbsh"  label="Show Invisible Characters" value="[editors/code/@showinvisibles]" skin="checkbox_grey" />\n    <a:checkbox position="6000" class="underlined" label="Show Gutter" value="[editors/code/@gutter]" skin="checkbox_grey" />\n    <a:checkbox position="7000" class="underlined" label="Highlight Selected Word" value="[editors/code/@highlightselectedword]" skin="checkbox_grey" />\n    <a:checkbox position="8000" class="underlined" label="Auto-hide Horizontal Scrollbar" value="[editors/code/@autohidehorscrollbar]" skin="checkbox_grey" />\n     <!-- Vim mode is here -->\n    <a:hbox position="10000" edge="0 5 2 0" align="center" class="underlined">\n        <a:label flex="1">Font Size</a:label>\n        <a:spinner value="[editors/code/@fontsize]" realtime="true" min="1" max="72" width="50" class="fixMargin2" margin="5 0 0" />\n    </a:hbox>\n    <a:hbox position="11000" edge="0 5 0 0" align="center" class="underlined2">\n        <a:checkbox label="Show Print Margin" value="[editors/code/@showprintmargin]" flex="1" skin="checkbox_grey"/>\n        <a:spinner value="[editors/code/@printmargincolumn]" realtime="true" min="1" max="200" width="50" class="fixMargin5" margin="5 0 0"  />\n    </a:hbox>\n    <!--a:hbox edge="0 5 0 0" class="underlined" align="center" padding="5">\n        <a:checkbox label="Wrap Mode" value="[editors/code/@wrapmode]"  flex="1" />\n        <a:spinner value="[editors/code/@wraplimitmin]" realtime="true" min="1" max="200" width="50" />\n        <a:spinner value="[editors/code/@wraplimitmax]" realtime="true" min="1" max="200" width="50" />\n    </a:hbox-->\n    <a:hbox position="12000" edge="0 5 0 0" align="center" class="underlined2">\n        <a:checkbox label="Soft Tabs" value="[editors/code/@softtabs]" style="margin-bottom:5px" flex="1" skin="checkbox_grey"/>\n        <a:spinner value="[editors/code/@tabsize]" realtime="true" min="1" max="64" width="50" class="fixMargin5" margin="5 0 0" />\n    </a:hbox>\n    <a:hbox position="13000" edge="0 5 2 0" align="center" class="underlined">\n        <a:label flex="1">Mouse Scroll Speed</a:label>\n        <a:spinner value="[editors/code/@scrollspeed]" realtime="true" min="1" max="8" width="50" class="fixMargin5" margin="5 0 0" />\n    </a:hbox>\n    <a:hbox \n     position="14000"\nedge="0 5 2 0" align="center" class="underlined">\n        <a:label flex="1">Newline Mode</a:label>\n        \n        <a:dropdown default="auto" value="[{require(\'ext/settings/settings\').model}::editors/code/@newlinemode]" width="150" height="21">\n            <a:item value="auto">Auto</a:item>\n            <a:item value="windows">Windows (CRLF)</a:item>\n            <a:item value="unix">Unix (LF)</a:item>\n        </a:dropdown>\n    </a:hbox>\n</a:application>'}),define("text!ext/statusbar/statusbar.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="barIdeStatus" \n      skin    = "bar-status" \n      skinset = "statusbar"\n      height  = "28"\n      bottom  = "3"\n      right   = "3">\n        <a:hbox height="23">\n            <a:label id="lblInsertActive" caption="INS" visible="false" margin="2 3 0 3" />\n            <a:label id="lblSelectionLength" visible="false" margin="2 3 0 3" />\n            <a:label\n              caption = "{ceEditor.line}:{ceEditor.col}"\n              class   = "lbl_row_col"\n              margin  = "2 6 0 3"\n              onclick = "require(\'core/ide\').dispatchEvent(\'gotoline\')"\n            />\n            <a:divider class="divider-status-bar" width="2" height="20" margin="1 0 1 0" />\n            <a:button \n              skin    = "btn-expand-statusbar" \n              skinset = "statusbar"\n              icon    = "statusbar-arrow.png" \n              onclick = "require(\'ext/statusbar/statusbar\').toggleStatusBar()"\n              margin  = "1 1 2 3"\n            />\n            <a:hbox id="hboxStatusBarSettings" width="1">\n                <a:button id="btnSbTools"\n                  skin    = "btn-statusbar-icon" \n                  skinset = "statusbar"\n                  height  = "23"\n                  margin  = "0 3 0 3"\n                  icon    = "tool-ico.png"\n                  submenu = "mnuStatusBarTools"/>\n                <a:button id="btnSbPrefs"\n                  skin    = "btn-statusbar-icon" \n                  skinset = "statusbar"\n                  height  = "23"\n                  icon    = "pref-ico.png" \n                  submenu = "mnuStatusBarPrefs"/>\n            </a:hbox>\n        </a:hbox>\n    </a:bar>\n    <a:menu id="mnuStatusBarTools"\n      ref   = "{btnSbTools}"\n      class = "mnuSbTools"\n      skin  = "menu-bk">\n    </a:menu>\n    <a:menu id="mnuStatusBarPrefs"\n      ref   = "{btnSbPrefs}"\n      class = "mnuSbPrefs"\n      skin  = "menu-bk"\n      sticky = "true">\n      <a:item type="check" caption="Code Folding" checked="[{require(\'ext/settings/settings\').model}::editors/code/@folding]" />\n      <a:item type="check" caption="Full Line Selection" value="[{require(\'ext/settings/settings\').model}::editors/code/@selectstyle]" values="line|text" />\n      <a:item type="check" caption="Highlight Active Line" checked="[{require(\'ext/settings/settings\').model}::editors/code/@activeline]" />\n      <a:item type="check" caption="Show Gutter" checked="[{require(\'ext/settings/settings\').model}::editors/code/@gutter]" />\n      <a:item type="check" caption="Highlight Selected Word" checked="[{require(\'ext/settings/settings\').model}::editors/code/@highlightselectedword]" />\n      <a:item type="check" caption="Auto-pair Quotes, Brackets, etc." checked="[{require(\'ext/settings/settings\').model}::editors/code/@behaviors]" />\n      <a:item type="check" caption="Auto-hide Horizontal Scrollbar" checked="[{require(\'ext/settings/settings\').model}::editors/code/@autohidehorscrollbar]" />\n      <a:divider />\n      <a:hbox edge="0 5 2 23" align="center">\n          <a:label flex="1" style="padding: 2px 2px 2px 0">Font Size</a:label>\n          <a:spinner value="[{require(\'ext/settings/settings\').model}::editors/code/@fontsize]" realtime="true" min="1" max="72" width="50" />\n      </a:hbox>\n      <a:hbox edge="0 5 2 0" align="center">\n          <a:checkbox label="Show Print Margin" value="[{require(\'ext/settings/settings\').model}::editors/code/@showprintmargin]" flex="1" skin="checkbox-menu" />\n          <a:spinner value="[{require(\'ext/settings/settings\').model}::editors/code/@printmargincolumn]" realtime="true" min="1" max="200" width="50" />\n      </a:hbox>\n      <a:hbox edge="0 5 2 0" align="center">\n        <a:checkbox id="wrapMode" label="Wrap Lines" value="[{require(\'ext/settings/settings\').model}::editors/code/@wrapmode]" flex="1" skin="checkbox-menu" />    \n        <a:checkbox id="wrapModeViewport" edge="0 0 0 5" label="To Browser Width" value="[{require(\'ext/settings/settings\').model}::editors/code/@wrapmodeViewport]" flex="1" skin="checkbox-menu" />\n      </a:hbox>\n      <a:hbox edge="0 5 2 0" align="center">\n          <a:checkbox label="Soft Tabs" value="[{require(\'ext/settings/settings\').model}::editors/code/@softtabs]" flex="1" skin="checkbox-menu"/>\n          <a:spinner value="[{require(\'ext/settings/settings\').model}::editors/code/@tabsize]" realtime="true" min="1" max="64" width="50" />\n      </a:hbox>\n      <a:hbox edge="0 5 2 23" align="center">\n          <a:label flex="1" style="padding: 2px 2px 2px 0">Mouse Scroll Speed</a:label>\n          <a:spinner value="[{require(\'ext/settings/settings\').model}::editors/code/@scrollspeed]" min="1" max="8" width="50" />\n      </a:hbox>\n    </a:menu>\n</a:application>'}),define("text!ext/statusbar/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:bar name="bar-status">\n        <a:style><![CDATA[\n            .bar-status {\n                position : absolute;\n                color: rgba(0, 0, 0, 0.4);\n                padding: 2px;\n                overflow: hidden;\n                border: 1px solid transparent;\n\n                border-radius: 6px;\n\n                -webkit-transition: background-color 0.2s linear, border 0.2s linear, box-shadow 0.2s linear;\n                -moz-transition: background-color 0.2s linear, border 0.2s linear, -moz-box-shadow 0.2s linear;\n\n                background: transparent url(\'images/editor_bar_bg.png\') 0px 30px repeat-x;\n            }\n\n            .bar-status:hover {\n                border: 1px solid rgba(0, 0, 0, 0.12);\n\n                -moz-box-shadow: inset 0px 1px 0px 0px #f5f5f5;\n                box-shadow: inset 0px 1px 0px 0px #f5f5f5;\n\n                background-color: transparent;\n            }\n\n            .ace_dark.bar-status:hover {\n                -moz-box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n                box-shadow: inset 0px 1px 0px 0px rgba(255, 255, 255, 0.1);\n            }\n            \n            .bar-status .lbl_row_col {\n                text-align: center;\n                color: rgba(0, 0, 0, 0.4);\n            }\n\n            .bar-status .label {\n                color: rgba(0, 0, 0, 0.4);\n                padding-left: 1px;\n                overflow: visible;\n            }\n\n            .ace_dark.bar-status .label {\n                color: rgba(255, 255, 255, 0.4);\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class="bar-status">\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    <a:button name="btn-expand-statusbar">\n        <a:style><![CDATA[\n            .btn-expand-statusbar {\n                height              : 8px;\n                width               : 10px;\n                overflow            : hidden;\n                cursor              : pointer;\n                position            : relative;\n                cursor              : default;\n                -moz-user-select    : none;\n                -khtml-user-select  : none;\n                user-select         : none;\n                background-position : 2px 7px;\n                background-repeat   : no-repeat;\n\n                border-radius: 3px;\n            }\n\n            .btn-expand-statusbarOver {\n                background-position : 2px -19px;\n            }\n\n            .expanded .btn-expand-statusbar {\n                background-position : -11px 7px;\n            }\n\n            .expanded .btn-expand-statusbarOver {\n                background-position : -11px -19px;\n            }\n\n            .ace_dark .btn-expand-statusbar {\n                background-position : -28px 7px;\n            }\n\n            .ace_dark .btn-expand-statusbarOver {\n                background-position : -28px -19px;\n            }\n\n            .ace_dark.expanded .btn-expand-statusbar {\n                background-position : -42px -18px;\n            }\n\n            .ace_dark.expanded .btn-expand-statusbarOver {\n                background-position : -42px 7px;\n\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main\n              caption      = "text()"\n              background = "."\n              icon       = ".">\n                <div class="btn-expand-statusbar"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n    <a:button name="btn-statusbar-icon">\n        <a:style><![CDATA[\n            .btn-statusbar-icon {\n                height              : 23px;\n                width               : 22px;\n                overflow            : hidden;\n                cursor              : pointer;\n                position            : relative;\n                cursor              : default;\n                -moz-user-select    : none;\n                -khtml-user-select  : none;\n                user-select         : none;\n                background-position : 0 0;\n                background-repeat   : no-repeat;\n            }\n            .btn-statusbar-iconOver {\n                background-position : 0 -23px;\n            }\n\n            .btn-statusbar-iconDown {\n                background-position : 0 -46px;\n            }\n\n            .ace_dark .btn-statusbar-icon {\n                background-position : -22px 0;\n            }\n\n            .ace_dark .btn-statusbar-iconOver {\n                background-position : -22px -23px;\n            }\n\n            .ace_dark .btn-statusbar-iconDown {\n                background-position : -22px -46px;\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main\n              caption      = "text()"\n              background = "."\n              icon       = ".">\n                <div class="btn-statusbar-icon"> </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n    <a:menu name="statusbar-mnu">\n        <a:style><![CDATA[\n            .statusbar-mnu {\n                margin   : 0;\n                z-index  : 10000;\n                position : absolute;\n                overflow : visible;\n                display  : none;\n\n                background-image: linear-gradient(bottom, rgba(65,65,65,0.14) 0%, rgba(255,255,255,0.14) 100%);\n                background-image: -o-linear-gradient(bottom, rgba(65,65,65,0.14) 0%, rgba(255,255,255,0.14) 100%);\n                background-image: -moz-linear-gradient(bottom, rgba(65,65,65,0.14) 0%, rgba(255,255,255,0.14) 100%);\n                background-image: -webkit-linear-gradient(bottom, rgba(65,65,65,0.14) 0%, rgba(255,255,255,0.14) 100%);\n                background-image: -ms-linear-gradient(bottom, rgba(65,65,65,0.14) 0%, rgba(255,255,255,0.14) 100%);\n\n                position : absolute;\n                border-radius : 9px;\n                -webkit-box-shadow: inset 0px 1px 2px 1px rgba(0, 0, 0, 0.25);\n                -moz-box-shadow: inset 0px 1px 2px 1px rgba(0, 0, 0, 0.25);\n                box-shadow: inset 0px 1px 2px 1px rgba(0, 0, 0, 0.25);\n                border: 1px solid #e8e8e8;\n\n                margin-top: -17px;\n                margin-left: -10px;\n\n                padding: 3px 0;\n            }\n\n            .statusbar-mnu .arrow {\n                position : absolute;\n                width: 19px;\n                height: 17px;\n                bottom: -16px;\n                left: 40px;\n                z-index: 10001;\n                background: url(images/arrow-sb.png) no-repeat 0 0;\n            }\n\n            .statusbar-mnu .menu-item {\n                padding: 5px 15px;\n                cursor: default;\n                color: rgba(0, 0, 0, 0.4);\n            }\n            .statusbar-mnu .menu-item.hover{\n                background-color: rgba(170, 170, 170, 0.14);\n            }\n        ]]></a:style>\n\n        <a:presentation>\n            <a:main container=".">\n                <div class="statusbar-mnu">\n                    <div class="arrow"> </div>\n                </div>\n            </a:main>\n            <a:item\n              caption = "text()"\n              icon    = "div"\n              hotkey  = "div"\n              inherit = "true">\n                <div class="menu-item">-<div class="icon"></div></div>\n            </a:item>\n            <a:divider inherit="true">\n                <div class="menu-divider"></div>\n            </a:divider>\n        </a:presentation>\n    </a:menu>\n</a:skin>'}),define("text!ext/imgview/imgview.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:img id="imgEditor"\n      flex              = "1"\n      anchors           = "0 0 0 0"\n      visible           = "false"\n    />\n</a:application>'}),define("text!ext/extmgr/extmgr.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winExt"\n      title     = "Extensions Manager"\n      icon      = ""\n      center    = "true"\n      resizable = "true"\n      buttons   = "close"\n      modal     = "false"\n      skin      = "bk-window"\n      width     = "660"\n      height    = "400"\n      kbclose   = "true"\n      draggable = "true">\n        <a:vbox anchors="0 0 0 0" edge="0 0 11 0">\n            <a:tab flex="1" id="tabExtMgr" skin="extensions_tab">\n                <a:page caption="User Extensions">\n                    <a:vbox anchors="10 10 10 10">\n                        <a:hbox align="center" edge="0 0 5 0" padding="5">\n                            <a:textbox id="tbModuleName" flex="1" \n                              realtime="true" />\n                            <a:button width="80"\n                              default = "1"\n                              caption = "Add"\n                              disabled = "{!tbModuleName.value.trim()}"\n                              onclick = "require(\'ext/extmgr/extmgr\').loadExtension()"\n                            />\n                        </a:hbox>\n                        <a:datagrid id = "dgExtUser"\n                          flex       = "1"\n                          model      = "{require(\'core/ext\').model}"\n                          class      = "noscrollbar"\n                          scrollbar  = "sbShared 20 2 2"\n                          autoselect = "false"\n                          each       = "[plugin[@userext=\'1\']]"\n                          onafterselect = "require(\'ext/extmgr/extmgr\').updateEnableBtnState()"\n                          eachvalue  = "[@path]"\n                          empty-message = "No user extensions">\n                            <a:column width="25%" value="[@name]" caption="Name" />\n                            <a:column width="30%" value="[@path]" caption="Path" />\n                            <a:column width="15%" value="[@type]" caption="Type" />\n                            <a:column width="20%" value="[@dev]" caption="Developer" />\n                            <a:column width="11%" value="{[@enabled] == 1 ? \'Enabled\' : \'Disabled\'}" caption="Enabled" />\n                        </a:datagrid>\n                        \n                    </a:vbox>\n                </a:page>\n                <a:page caption="Defaults">\n                    <a:vbox anchors="10 10 10 10">\n                        <a:datagrid id="dgExt"\n                          flex       = "1"\n                          model      = "{require(\'core/ext\').model}"\n                          class      = "noscrollbar"\n                          scrollbar  = "sbShared 20 2 2"\n                          autoselect = "false"\n                          each       = "[plugin[@userext=\'0\']]"\n                          onafterselect = "require(\'ext/extmgr/extmgr\').updateEnableBtnState()"\n                          eachvalue  = "[@path]">\n                            <a:column width="25%" value="[@name]" caption="Name" /> \n                            <a:column width="30%" value="[@path]" caption="Path" /> \n                            <a:column width="15%" value="[@type]" caption="Type" /> \n                            <a:column width="20%" value="[@dev]" caption="Developer" /> \n                            <a:column width="11%" value="{[@enabled] == 1 ? \'Enabled\' : \'Disabled\'}" caption="Enabled" /> \n                        </a:datagrid>\n                    </a:vbox>\n                </a:page>\n            </a:tab>\n            <a:hbox edge="11 10 0 0" pack="end" visible="{tabExtMgr.activepage == 0}">\n                <a:button\n                  skin     = "btn-default-css3"\n                  disabled = "{!dgExtUser.selected}"\n                  caption  = "Remove"\n                  margin   = "0 10 0 0"\n                  onclick  = "require(\'ext/extmgr/extmgr\').removeExtension()"\n                />\n                <a:button\n                  id       = "btnUserExtEnable"\n                  skin     = "btn-default-css3"\n                  disabled = "{!dgExtUser.selected}"\n                  caption  = "Disable"\n                  onclick  = "\n                    if (dgExtUser.selected.getAttribute(\'enabled\') == 1)\n                        require(\'ext/extmgr/extmgr\').disableExt(dgExtUser.value);\n                    else\n                        require(\'ext/extmgr/extmgr\').enableExt(dgExtUser.value);\n                  "\n                />\n                <a:button\n                  caption = "Done"\n                  margin = "0 0 0 10"\n                  skin = "btn-default-css3"\n                  onclick = "winExt.close()"\n                />\n            </a:hbox>\n            <a:hbox edge="11 10 0 0" pack="end" visible="{tabExtMgr.activepage == 1}">\n                <a:button\n                  id       = "btnDefaultExtEnable"\n                  skin     = "btn-default-css3"\n                  caption  = "Disable"\n                  disabled = "{!dgExt.selected}"\n                  onclick  = "\n                    if (dgExtUser.selected.getAttribute(\'enabled\') == 1)\n                        require(\'ext/extmgr/extmgr\').disableExt(dgExt.value);\n                    else\n                        require(\'ext/extmgr/extmgr\').enableExt(dgExt.value);\n                  "\n                />\n                <a:button\n                  caption = "Done"\n                  margin = "0 0 0 10"\n                  skin = "btn-default-css3"\n                  onclick = "winExt.close()"\n                />\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n</a:application>'}),define("ext/extmgr/extmgr",["require","exports","module","core/ide","core/ext","core/util","text!ext/extmgr/extmgr.xml","ext/panels/panels","ext/settings/settings"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("text!ext/extmgr/extmgr.xml"),h=a("ext/panels/panels"),i=a("ext/settings/settings");c.exports=e.register("ext/extmgr/extmgr",{name:"Extension Manager",dev:"Ajax.org",alone:!0,type:e.GENERAL,markup:g,desp:[h],nodes:[],hook:function(){var a=this,b=!0;this.nodes.push(mnuWindows.insertBefore(new apf.divider,mnuWindows.firstChild),mnuWindows.insertBefore(new apf.item({caption:"Extension Manager...",onclick:function(){e.initExtension(a),winExt.show(),setTimeout(function(){b&&(dgExt.reload(),b=!1)})}}),mnuWindows.firstChild)),d.addEventListener("loadsettings",function(b){d.addEventListener("extload",function(){var c=b.model.queryNodes("auto/extensions/plugin");for(var d=0;d<c.length;d++)a.loadExtension(c[d].getAttribute("path"))})}),d.addEventListener("savesettings",function(a){var b=a.model.data.selectSingleNode("auto/extensions");b&&(b.parentNode.removeChild(b),b=null),b=apf.createNodeFromXpath(a.model.data,"auto/extensions");var c=e.model.queryNodes("plugin[@userext='1']");for(var d=0;d<c.length;d++){var f=apf.xmldb.cleanNode(c[d].cloneNode(!1));b.appendChild(f)}return!0})},init:function(a){},loadExtension:function(b){b||tbModuleName.validate()?(b||(b=tbModuleName.value,tbModuleName.clear()),a([b],function(){var a=e.model.queryNode("plugin[@path='"+b+"']");a&&apf.xmldb.setAttribute(a,"userext","1"),i.save()})):f.alert("Error","Validation Error","There was a problem validating your input: '"+tbModuleName.value+"'")},removeExtension:function(){var b=dgExtUser.selected.getAttribute("path"),c=a(b);e.unregister(c)&&(e.model.removeXml(e.model.queryNode("plugin[@path='"+b+"']")),i.save())},enableExt:function(a){e.enableExt(a),tabExtMgr.activepage===0?btnUserExtEnable.setAttribute("caption","Disable"):btnDefaultExtEnable.setAttribute("caption","Disable")},disableExt:function(a){e.disableExt(a),tabExtMgr.activepage===0?btnUserExtEnable.setAttribute("caption","Enable"):btnDefaultExtEnable.setAttribute("caption","Enable")},updateEnableBtnState:function(){tabExtMgr.activepage===0?dgExtUser.selected.getAttribute("enabled")==="1"?btnUserExtEnable.setAttribute("caption","Disable"):btnUserExtEnable.setAttribute("caption","Enable"):dgExt.selected.getAttribute("enabled")==="1"?btnDefaultExtEnable.setAttribute("caption","Disable"):btnDefaultExtEnable.setAttribute("caption","Enable")},enable:function(){if(!this.disabled)return;this.nodes.each(function(a){a.enable()}),this.disabled=!1},disable:function(){if(this.disabled)return;this.nodes.each(function(a){a.disable()}),this.disabled=!0},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("text!ext/runpanel/runpanel.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n\n    <a:window id="winRunPanel" \n      title    = "Run &amp; Debug" \n      model    = "{lstRunCfg.selected}"\n      buttons  = "close" \n      skin     = "fm-window"\n      flex     = "1" \n      optimize = "true"\n      modal    = "false">\n        <a:bar skin="c9-header-bar" top="-30" right="28" height="30">\n            <a:hbox id="barTestTools" height="23">\n                <a:button\n                  caption  = "add"\n                  onclick  = "require(\'ext/runpanel/runpanel\').addConfig()"\n                  skin     = "c9-toolbarbutton" />\n                <a:button \n                  caption  = "remove"\n                  skin     = "c9-toolbarbutton"\n                  onclick  = "lstRunCfg.remove()"\n                  disabled = "{!lstRunCfg.selected || !![{lstRunCfg.selected}::@curfile]}"/>\n                  \n                <!--a:divider skin="c9-divider-double" /-->\n                \n                <!--a:button\n                  id       = "btnRun"\n                  icon     = "{itmDebug.checked ? \'bug.png\' : \'run.png\'}"\n                  caption  = "{itmDebug.checked ? \'debug\' : \'run\'}"\n                  onclick  = "require(\'ext/runpanel/runpanel\').run(itmDebug.checked)"\n                  visible  = "{!stProcessRunning.active and 1}"\n                  skin     = "c9-toolbarbutton"\n                  submenu  = "mnuRunCfg" />\n                <a:button\n                  icon     = "stop.png"\n                  caption  = "stop"\n                  skin     = "c9-toolbarbutton"\n                  onclick  = "require(\'ext/runpanel/runpanel\').stop()"\n                  visible  = "{stProcessRunning.active and 1}" /-->\n            </a:hbox>\n        </a:bar>\n        \n        <a:button\n          top="-22"\n          skin="header-btn"\n          right="5"\n          icon="panel_settings.png"\n          submenu="mnuDebugSettings" />\n        \n        <a:menu id="mnuDebugSettings">\n            <a:item\n              type    = "check"\n              checked = "[{require(\'ext/settings/settings\').model}::auto/configurations/@debug]"\n              caption = "Run in debug mode" />\n            <a:item\n              type    = "check"\n              onclick = "require(\'ext/runpanel/runpanel\').checkAutoHide()"\n              checked = "[{require(\'ext/settings/settings\').model}::auto/configurations/@autohide]"\n              caption = "Auto show/hide debug tools" />\n        </a:menu>\n      \n        <a:vbox anchors="0 0 0 0">\n            <a:list id="lstRunCfg" \n              model   = "mdlRunConfigurations"\n              border  = "0"\n              each    = "[config]"\n              caption = "[@name]"\n              flex    = "1"\n              skin    = "tree"\n              autoselect    = "true"\n              empty-message = "no run configurations"\n              onafterchoose = "\n                require(\'ext/runpanel/runpanel\').runConfig(lstRunCfg.selected, itmDebug.checked);\n              " />\n              \n            <a:bar skin="basic" style="background:#323332;border-top:1px solid #111">\n                <a:vbox padding="5" edge="10">\n                  <a:hbox>\n                    <a:label width="100" skin="black_label" >Name</a:label>\n                    <a:textbox id="txtRunCfgName" \n                      skin = "black_textbox"\n                      flex="1"\n                      realtime="true"\n                      value="[@name]"\n                      disabled="{!lstRunCfg.selected or [{lstRunCfg.selected}::@curfile]}"/>\n                  </a:hbox>\n                  <a:hbox>\n                    <a:label width="100" skin="black_label">File Path</a:label>\n                    <a:textbox skin = "black_textbox" id="txtRunCfgName" flex="1" value="[@path]" disabled="{!lstRunCfg.selected or [{lstRunCfg.selected}::@curfile]}"/>\n                    <!--a:button icon="folder.png" disabled="true" tooltip="Browse ..."></a:button-->\n                    \n                    <!--a:divider span="2" skin="c9-divider-hor" /-->\n                    <a:model id="mdlRunnerSelector">\n                        <data>\n                            <element caption="Default" value="default" />\n                            <element caption="Auto" value="auto" />\n                            <element caption="Node.js 0.6.x" value="0.6.x" />\n                            <element caption="Node.js 0.4.x" value="0.4.x" />\n                        </data>\n                    </a:model>\n                  </a:hbox>\n                    <a:hbox>\n                      <a:label width="100" skin="black_label">Runtime</a:label>\n                      <a:dropdown id="ddRunnerSelector"\n                          model     = "mdlRunnerSelector"\n                          skin      = "black_dropdown"\n                          flex      = "1"\n                          disabled  = "{!lstRunCfg.selected}"\n                          value     = "[{lstRunCfg.selected}::@value]"\n                          default   = "default"\n                          each      = "[element]"\n                          caption   = "[@caption]"\n                          eachvalue = "[@value]" />\n                    </a:hbox>\n                    <a:hbox>\n                      <a:label width="100" skin="black_label">Cmd Line Args</a:label>\n                      <a:textbox skin = "black_textbox" id="txtRunCfgName" flex="1" value="[@args]" disabled="{!!!lstRunCfg.selected}"/>\n                    </a:hbox>\n                </a:vbox>\n            </a:bar>\n        </a:vbox>\n    </a:window>\n\n</a:application>'}),define("text!ext/runpanel/runbuttons.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n\n    <a:menu id="mnuRunCfg">    \n        <a:item disabled="true" caption="no run history" />\n        <a:divider />\n        <a:item onclick="require(\'ext/runpanel/runpanel\').showRunConfigs(false)">Configure...</a:item>\n        <a:divider />\n        <a:item id="itmDebug"\n          type    = "check"\n          checked = "[{require(\'ext/settings/settings\').model}::auto/configurations/@debug]"\n          caption = "Run in debug mode" />\n        <a:item\n          type    = "check"\n          onclick = "require(\'ext/runpanel/runpanel\').checkAutoHide()"\n          checked = "[{require(\'ext/settings/settings\').model}::auto/configurations/@autohide]"\n          caption = "Auto show/hide debug tools" />\n    </a:menu>\n    \n    <a:model id="mdlRunConfigurations">\n        <configurations />\n    </a:model>\n\n    <a:bar id="tbRun">\n        <a:divider skin="c9-divider" id="divRun" />\n        <a:splitbutton\n          id       = "btnRun"\n          icon     = "{itmDebug.checked ? \'run.png\' : \'run.png\'}"\n          caption  = "{itmDebug.checked ? \'debug\' : \'run\'}"\n          onclick  = "require(\'ext/runpanel/runpanel\').run()"\n          visible  = "{!stProcessRunning.active and 1}"\n          tooltip  = "{itmDebug.checked ? \'Debug\' : \'Run\'}"\n          disabled = "{!ide.onLine}"\n          submenu  = "mnuRunCfg" />\n        <a:button id="btnStop"\n          icon     = "stop.png"\n          caption  = "stop"\n          width    = "52"\n          tooltip  = "Stop"\n          skin     = "c9-toolbarbutton"\n          onclick  = "require(\'ext/runpanel/runpanel\').stop()"\n          visible  = "{stProcessRunning.active and 1}" \n          disabled = "{!ide.onLine}" />\n    </a:bar>\n\n</a:application>'}),define("text!ext/runpanel/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:model id="mdlRunnerSelector2">\n        <data>\n            <element caption="Auto" value="auto" />\n            <element caption="Node.js 0.6.x" value="0.6.x" />\n            <element caption="Node.js 0.4.x" value="0.4.x" />\n            <!--element caption="Python" value="py" /-->\n        </data>\n    </a:model>\n    <a:hbox position="4000" edge="5 5 2 5" align="center">\n        <a:label flex="1">Runtime:</a:label>        \n        <a:dropdown\n          model     = "mdlRunnerSelector2"\n          width="175"  height="21"\n          disabled  = "{!lstRunCfg.selected}"\n          value     = "[{require(\'ext/settings/settings\').model}::auto/node-version/@version]"\n          default   = "auto"\n          each      = "[element]"\n          caption   = "[@caption]"\n          eachvalue = "[@value]" />\n    </a:hbox>\n</a:application>\n'}),define("text!ext/debugger/debugger.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:tab id="tabDebugButtons" skin="dockbar" visible="false">\n        <a:page id="pgDebugNav" render="runtime">\n            <a:hbox padding="3" edge="4 3 5">\n                <div class="expand-panel-bg"></div>\n                <a:button id="btnResume" tooltip="Resume"\n                  icon     = "play.png"\n                  onclick  = "dbg.continueScript();"\n                  skin     = "c9-sidepanelsbutton"\n                  disabled = "{!stDebugProcessRunning.active or stRunning.active}" />\n                <a:button  tooltip="Suspend"\n                  skin     = "c9-sidepanelsbutton"\n                  icon     = "pause.png"\n                  onclick  = "dbg.suspend();"\n                  disabled = "{!stDebugProcessRunning.active or !stRunning.active}"/>\n                <a:divider skin="c9-divider" />\n                <a:button id="btnStepOver" tooltip="Step Over"\n                  icon     = "step.png"\n                  skin     = "c9-sidepanelsbutton"\n                  onclick  = "dbg.stepNext();"\n                  disabled = "{!stDebugProcessRunning.active or stRunning.active}" />\n                <a:button id="btnStepInto" tooltip="Step Into"\n                  icon     = "stepinto.png" \n                  skin     = "c9-sidepanelsbutton"\n                  onclick  = "dbg.stepInto();" \n                  disabled = "{!stDebugProcessRunning.active or stRunning.active}" />\n                <a:button id="btnStepOut" tooltip="Step Out"\n                  icon     = "stepback.png" \n                  skin     = "c9-sidepanelsbutton"\n                  onclick  = "dbg.stepOut();"\n                  disabled = "{!stDebugProcessRunning.active or stRunning.active}" />\n            </a:hbox>\n        </a:page>\n    </a:tab>\n    <a:tab id="tabDebug" skin="docktab" visible="false" activepage="0" buttons="close">\n        <a:page id="dbgCallStack" caption="Call Stack" render="runtime" prerender="true">\n            <a:datagrid\n              id         = "dgStack"\n              anchors    = "0 0 0 0"\n              border     = "0"\n              options    = "size|move"\n              caching    = "false"\n              model      = "mdlDbgStack"\n              class      = "noscrollbar"\n              scrollbar  = "sbShared 20 2 2"\n              disabled   = "{!stDebugProcessRunning.active or stRunning.active}"\n              selected   = "{dbg.activeframe}">\n                <a:actions />\n                <a:each match="[frame]">\n                    <a:column caption="Function" value="[@name]" width="60%" icon2="debugger/stckframe_obj.gif" />\n                    <a:column caption="Script" value="[@script]" width="40%" />\n                    <a:column caption="Ln" value="[@line]" width="30"/>\n                    <a:column caption="Col" value="[@column]" width="30"/>\n                </a:each>\n            </a:datagrid>\n        </a:page>\n        <a:page id="dbInteractive" caption="Interactive" render="runtime">\n            <a:vbox anchors="0 0 0 0">\n                <a:toolbar>\n                    <a:bar border="0 0 1 0">\n                        <a:button\n                          disabled = "{!stDebugProcessRunning.active or stRunning.active}"\n                          caption  = "Execute" \n                          tooltip  = "Ctrl+Enter"\n                          onclick  = "\n                            require(\'ext/debugger/inspector\').consoleTextHandler({keyCode:13,ctrlKey:true})\n                          " />\n                        <a:button\n                          disabled2 = "{!txtCode.value.trim()}"\n                          caption  = "Clear" \n                          onclick  = "\n                            txtCode.clear();\n                          " />\n                        <a:divider skin2="c9-divider"/>\n                        <a:dropdown id="lstScripts"\n                          skin2       = "black_dropdown"\n                          margin     = "3 0 0 4"\n                          width      = "120"\n                          maxitems   = "10"\n                          model      = "mdlDbgSources"\n                          disabled   = "{!stDebugProcessRunning.active and 1}" \n                          each       = "[file]"\n                          caption    = "[@text]"\n                          autoselect = "false"\n                          icon       = "debugger/file_obj.gif" />\n                    </a:bar>\n                </a:toolbar>\n                <a:codeeditor id="txtCode" \n                  flex      = "1"\n                  disabled  = "{stRunning.active or !stDebugProcessRunning.active}"\n                  onkeydown = "return require(\'ext/debugger/inspector\').consoleTextHandler(event)" \n                  realtime  = "true"\n                  border    = "0" \n                  model     = "{require(\'ext/settings/settings\').model}" \n                  value     = "[auto/console/input]"\n                  softtabs          = "[{require(\'ext/settings/settings\').model}::editors/code/@softtabs]"\n                  tabsize           = "[{require(\'ext/settings/settings\').model}::editors/code/@tabsize]"\n                  scrollspeed       = "[{require(\'ext/settings/settings\').model}::editors/code/@scrollspeed]"\n                  theme             = "[{require(\'ext/settings/settings\').model}::editors/code/@theme]"\n                  selectstyle       = "[{require(\'ext/settings/settings\').model}::editors/code/@selectstyle]"\n                  activeline        = "[{require(\'ext/settings/settings\').model}::editors/code/@activeline]"\n                  showinvisibles    = "[{require(\'ext/settings/settings\').model}::editors/code/@showinvisibles]"\n                  showprintmargin   = "false"\n                  printmargincolumn = "0" />\n            </a:vbox>\n        </a:page>\n        <a:page id="dbgVariable" caption="Variables" render="runtime">\n            <a:datagrid id="dgVars"\n              anchors    = "0 0 0 0" \n              border     = "0"\n              class      = "noscrollbar"\n              scrollbar  = "sbShared 20 2 2"\n              options    = "size|move"\n              prerender  = "false"\n              caching    = "false"\n              model      = "[{dbg.activeframe}::vars]"\n              disabled   = "{!stDebugProcessRunning.active or stRunning.active}"\n              loading-message = "Calculating...">\n                <a:actions />\n                <a:each match="[item|globals]" sort="[@name]">\n                    <a:insert match="[globals]" get="{adbg.loadFrame(dbg, {dbg.activeframe})}"/>\n                    <a:insert match="[item[@children=\'true\']]" get="{adbg.loadObjects(dbg, %[.])}" />\n                    <a:column caption="Property" value="{[@name] || \'Globals\'}" width="40%" icon="debugger/genericvariable_obj.gif" tree="true" />\n                    <a:column caption="Value" value="[@value]" width="60%" />\n                    <a:column caption="Type" value="[@type]" width="50"/>\n                </a:each>\n            </a:datagrid>\n        </a:page>\n        <a:page id="dbgBreakpoints" caption="Breakpoints" render="runtime" prerender="true">\n            <a:list id="lstBreakpoints"\n              autoselect = "false"\n              reselectable = "true"\n              anchors    = "0 0 0 0"\n              class      = "noscrollbar"\n              scrollbar  = "sbShared 2 2 2"\n              border     = "0"\n              model      = "mdlDbgBreakpoints"\n              each       = "[breakpoint]"\n              caption    = "[@text]"\n              icon       = "debugger/brkp_obj.png">\n                <a:actions />\n            </a:list>\n        </a:page>\n        <a:model id="mdlAceAnnotations"></a:model>\n        <a:page id="aceAnnotations" caption="Bugs" render="runtime">\n            <a:datagrid id="dgAceAnnotations"\n              anchors    = "0 0 0 0" \n              border     = "0"\n              options    = "size|move"\n              class      = "noscrollbar"\n              scrollbar  = "sbShared 20 2 2"\n              prerender  = "false"\n              caching    = "false"\n              onafterchoose = "require(\'ext/debugger/debugger\').goToAnnotation()"\n              model      = "mdlAceAnnotations"\n              loading-message = "Loading..."\n              empty-message = "None found">\n                <a:each match="[annotation]" sort="[@line]">\n                    <a:column type="icon" width="20" icon="debugger/[@type]_obj.gif" />\n                    <a:column caption="Line" value="[@line]" width="50" />\n                    <a:column caption="Description" value="[@text]" width="100%" />\n                </a:each>\n            </a:datagrid>\n        </a:page>\n    </a:tab>\n</a:application>'}),apf.hasRequireJS&&define("apf/elements/debugger",["module"],function(a){apf.dbg=a.exports=function(a,b){this.$init(b||"debugger",apf.NODE_HIDDEN,a)},function(){this.$host=null,this.$debugger=null,this.autoAttachComingIn=!1,this.$supportedProperties.push("state-running","state-attached","model-sources","model-stacks","model-breakpoints","activeframe"),this.$createModelPropHandler=function(a,b,c){return function(c){if(!c)return;this[a]=apf.setReference(c,apf.nameserver.register("model",c,new apf.model)),this[a].id=this[a].name=c,this[a].load(b)}},this.$createStatePropHandler=function(a){return function(b){if(!b)return;this[a]=apf.setReference(b,apf.nameserver.register("state",b,new apf.state)),this[a].id=this[a].name=b,this[a].deactivate()}},this.$propHandlers["model-sources"]=this.$createModelPropHandler("$mdlSources","<sources />"),this.$propHandlers["model-stack"]=this.$createModelPropHandler("$mdlStack","<frames />"),this.$propHandlers["model-breakpoints"]=this.$createModelPropHandler("$mdlBreakpoints","<breakpoints />"),this.$propHandlers["state-running"]=this.$createStatePropHandler("$stRunning"),this.$propHandlers["state-attached"]=this.$createStatePropHandler("$stAttached"),this.$propHandlers.activeframe=function(a){this.$debugger&&(this.$ignoreFrameEvent=!0,this.$debugger.setFrame(a),this.$ignoreFrameEvent=!1),this.dispatchEvent("changeframe",{data:a})},this.registerAutoAttach=function(){this.autoAttachComingIn=!0},this.registerManualAttach=function(){this.autoAttachComingIn=!1},this.registerAutoAttach=function(){this.autoAttachComingIn=!0},this.registerManualAttach=function(){this.autoAttachComingIn=!1},this.attach=function(a,b){var c=this;a.$attach(this,b,function(b,d){c.$host=a,c.$debugger=d,c.$loadSources(function(){d.setBreakpoints(c.$mdlBreakpoints,function(){var a=new apf.model;a.load("<frames></frames>"),c.$debugger.backtrace(a,function(){var b=a.queryNode("frame[1]"),e=c.$allowAttaching(b);e?(c.$mdlStack.load(a.data),c.dispatchEvent("break")):c.$debugger.continueScript(),d.addEventListener("afterCompile",c.$onAfterCompile.bind(c)),c.$stAttached.activate(),c.$stRunning.setProperty("active",d.isRunning()),d.addEventListener("changeRunning",c.$onChangeRunning.bind(c)),d.addEventListener("break",c.$onBreak.bind(c)),d.addEventListener("detach",c.$onDetach.bind(c));var f=function(){c.$allowAttaching(c.$debugger.getActiveFrame())&&(c.$onChangeFrame(),d.addEventListener("changeFrame",c.$onChangeFrame.bind(c)),d.removeEventListener("changeFrame",f))};d.addEventListener("changeFrame",f),e&&c.setProperty("activeframe",b),c.autoAttachComingIn=!1})})})})},this.$allowAttaching=function(a){var b=this;if(this.autoAttachComingIn)return!0;if(a){var c=a.getAttribute("scriptid"),d=b.$mdlSources.queryValue("file[@scriptid='"+c+"']/@scriptname");if(d)var e=a.getAttribute("line"),f=b.$mdlBreakpoints.queryNode("breakpoint[@script='"+d+"' and @line='"+e+"']");return!d||!f?!1:!0}return!1},this.$onChangeRunning=function(){var a=this.$debugger&&this.$debugger.isRunning();this.$stRunning.active&&!a&&this.$onBreak(),this.$stRunning.setProperty("active",a)},this.$onBreak=function(){var a=this;if(!this.$debugger||this.$debugger.isRunning())return;this.$debugger.backtrace(this.$mdlStack,function(){if(a.activeframe&&!a.$updateMarkerPrerequisite()){a.continueScript();return}a.dispatchEvent("break")})},this.$updateMarkerPrerequisite=function(){return this.activeframe},this.$onAfterCompile=function(a){var b=a.script.getAttribute("id"),c=this.$mdlSources.queryNode("//file[@id='"+b+"']");c&&this.$mdlSources.removeXml(c),this.$mdlSources.appendXml(a.script)},this.$onDetach=function(){var a=this;this.$debugger&&(Object.keys(a.$debugger.$eventsStack).forEach(function(b){a.$debugger.$eventsStack[b].forEach(function(c){a.$debugger.removeEventListener(b,c)})}),this.$debugger.destroy(),this.$debugger=null),this.$host=null,this.$mdlSources.load("<sources />"),this.$mdlStack.load("<frames />"),this.$stAttached.deactivate(),this.setProperty("activeframe",null)},this.$onChangeFrame=function(){this.$ignoreFrameEvent||this.setProperty("activeframe",this.$debugger.getActiveFrame())},this.changeFrame=function(a){this.$debugger.setFrame(a)},this.detach=function(a){var b=this;this.continueScript(),this.$host?this.$host.$detach(this.$debugger,function(){typeof a=="function"&&a(),b.$onDetach()}):this.$onDetach()},this.$loadSources=function(a){this.$debugger.scripts(this.$mdlSources,a)},this.loadScript=function(a,b){this.$debugger.loadScript(a,b)},this.loadObjects=function(a,b){this.$debugger.loadObjects(a,b)},this.loadFrame=function(a,b){this.$debugger.loadFrame(a,b)},this.toggleBreakpoint=function(a,b){var c=this.$mdlBreakpoints;if(this.$debugger)this.$debugger.toggleBreakpoint(a,b,c);else{var d=a.getAttribute("scriptname"),e=c.queryNode("breakpoint[@script='"+d+"' and @line='"+b+"']");if(e)apf.xmldb.removeNode(e);else{var f="/workspace/",g=a.getAttribute("path"),h=g;g.indexOf(f)>-1&&(h=g.substring(g.indexOf(f)+f.length));var e=apf.n("<breakpoint/>").attr("script",d).attr("line",b).attr("text",h+":"+(parseInt(b,10)+1)).attr("lineoffset",0).node();c.appendXml(e)}}},this.continueScript=function(a){this.dispatchEvent("beforecontinue"),this.$debugger?this.$debugger.continueScript(a):a&&a()},this.stepInto=function(){this.dispatchEvent("beforecontinue"),this.$debugger&&this.$debugger.stepInto()},this.stepNext=function(){this.dispatchEvent("beforecontinue"),this.$debugger&&this.$debugger.stepNext()},this.stepOut=function(){this.dispatchEvent("beforecontinue"),this.$debugger&&this.$debugger.stepOut()},this.suspend=function(){this.$debugger&&this.$debugger.suspend()},this.evaluate=function(a,b,c,d,e){this.$debugger&&this.$debugger.evaluate(a,b,c,d,e)},this.changeLive=function(a,b,c,d){this.$debugger&&this.$debugger.changeLive(a,b,c,d)}}.call(apf.dbg.prototype=new apf.AmlElement),apf.aml.setElement("debugger",apf.dbg),window.adbg={exec:function(a,b,c,d){if(a=="loadScript"){var e=b[0],f=b[1];e.loadScript(f,function(a){d&&d.callback?d.callback(apf.escapeXML(a),apf.SUCCESS):c("<file><![CDATA["+a.replace("]]>","]] >")+"]]></file>",apf.SUCCESS)})}else if(a=="loadObjects"){var e=b[0],g=b[1];e.loadObjects(g,function(a){d&&d.callback?d.callback(a,apf.SUCCESS):c(a,apf.SUCCESS)})}else if(a=="loadFrame"){var e=b[0],h=b[1];e.loadFrame(h,function(a){d&&d.callback?d.callback(a,apf.SUCCESS):c(a,apf.SUCCESS)})}}},(apf.$asyncObjects||(apf.$asyncObjects={})).adbg=1}),apf.hasRequireJS&&define("apf/elements/dbg/v8debugger",["module","debug/Breakpoint"],function(a,b){var c=a.exports=function(a,b){this.$init(),this.$debugger=a,this.$host=b,this.$v8breakpoints={};var c=this;a.addEventListener("changeRunning",function(b){c.dispatchEvent("changeRunning",b),a.isRunning()&&c.setFrame(null)}),a.addEventListener("break",function(a){c.dispatchEvent("break",a)}),a.addEventListener("afterCompile",function(a){c.dispatchEvent("afterCompile",{script:apf.getXml(c.$getScriptXml(a.data.script))})}),this.setFrame(null)};((function(){function c(a){return a.func.name||a.func.inferredName||a.line+a.position}var a={object:8,"function":4};this.stripPrefix="",this.setStrip=function(a){this.stripPrefix=a},this.$strip=function(a){return this.stripPrefix?a.indexOf(this.stripPrefix)===0?a.slice(this.stripPrefix.length):a:a},this.isRunning=function(){return this.$debugger.isRunning()},this.scripts=function(a,b){var c=this;this.$debugger.scripts(4,null,!1,function(d){var e=[];for(var f=0,g=d.length;f<g;f++){var h=d[f];if(h.name&&h.name.indexOf("chrome-extension://")===0)continue;e.push(c.$getScriptXml(h))}a.load("<sources>"+e.join("")+"</sources>"),b()})},this.$getScriptXml=function(a){return["<file scriptid='",a.id,"' scriptname='",apf.escapeXML(a.name||"anonymous"),"' text='",this.$strip(apf.escapeXML(a.text||"anonymous")),"' lineoffset='",a.lineOffset,"' debug='true' />"].join("")},this.$isEqual=function(a,b){if(a.length!=b.length)return!1;var d=a[0],e=b[0];return d.getAttribute("scriptid")!=e.func.scriptId?!1:d.getAttribute("id")!=c(e)?!1:!0},this.$updateFrame=function(a,b){a.setAttribute("line",b.line),a.setAttribute("column",b.column);var c,d,e,f=a.selectNodes("vars/item"),g=b.arguments;for(c=1,d=0,e=g.length;d<e;d++)g[d].name&&this.$updateVar(f[c++],g[d]);g=b.locals;for(d=0,e=b.locals.length;d<e;d++)g[d].name!==".arguments"&&this.$updateVar(f[c++],g[d])},this.$updateVar=function(b,c){b.setAttribute("value",this.$valueString(c.value)),b.setAttribute("type",c.value.type),b.setAttribute("ref",c.value.ref),apf.xmldb.setAttribute(b,"children",a[c.value.type]?"true":"false")},this.$buildFrame=function(a,b,d){var e=b(a.script.ref);d.push("<frame index='",a.index,"' name='",apf.escapeXML(apf.escapeXML(this.$frameToString(a))),"' column='",a.column,"' id='",c(a),"' ref='",a.ref,"' line='",a.line,"' script='",this.$strip(e.name),"' scriptid='",a.func.scriptId,"'>"),d.push("<vars>");var f={name:"this",value:a.receiver};d.push(this.$serializeVariable(f));var g,h;for(g=0,h=a.arguments.length;g<h;g++)a.arguments[g].name&&d.push(this.$serializeVariable(a.arguments[g]));for(g=0,h=a.locals.length;g<h;g++)a.locals[g].name!==".arguments"&&d.push(this.$serializeVariable(a.locals[g]));d.push("<globals />"),d.push("</vars>"),d.push("<scopes>");var i=a.scopes;for(g=0,h=i.length;g<h;g++){var j=i[g];d.push("<scope index='",j.index,"' type='",j.type,"' />")}d.push("</scopes>"),d.push("</frame>")},this.backtrace=function(a,b){var c=this;this.$debugger.backtrace(null,null,null,!0,function(d,e){function f(a){for(var b=0;b<e.length;b++)if(e[b].handle==a)return e[b];return{}}var g,h,i=d.frames,j=a.queryNodes("frame");if(j.length&&c.$isEqual(j,i)){for(g=0,h=i.length;g<h;g++)c.$updateFrame(j[g],i[g]);c.setFrame(j[0])}else{var k=[];if(i)for(g=0,h=i.length;g<h;g++)c.$buildFrame(i[g],f,k);a.load("<frames>"+k.join("")+"</frames>"),c.setFrame(a.data.firstChild)}b()})},this.loadScript=function(a,b){var c=a.getAttribute("scriptid"),d=this;this.$debugger.scripts(4,[c],!0,function(a){if(!a.length)return;var c=a[0];b(c.source)})},this.loadObjects=function(a,b){var c=a.getAttribute("ref"),d=this;this.$debugger.lookup([c],!1,function(a){var e=[],f=a[c].properties;for(var g=0,h=f.length;g<h;g++)e.push(f[g].ref);d.$debugger.lookup(e,!1,function(a){var c=["<item>"];for(var e=0,g=f.length;e<g;e++)f[e].value=a[f[e].ref],c.push(d.$serializeVariable(f[e]));c.push("</item>"),b(c.join(""))})})},this.loadFrame=function(a,b){var c=a.getElementsByTagName("scope"),d=parseInt(a.getAttribute("index"),10),e=this,f=0,g=0,h=["<vars>"];for(var i=0,k=c.length;i<k;i++){var l=c[i],m=parseInt(l.getAttribute("type"),10);if(m>1){g+=1;var n=parseInt(l.getAttribute("index"),10);this.$debugger.scope(n,d,!0,function(a){var c=a.object.properties;for(j=0,l2=c.length;j<l2;j++)h.push(e.$serializeVariable(c[j]));f+=1,f==g&&(h.push("</vars>"),b(h.join("")))})}}if(g===0)return b("<vars />")},this.setFrame=function(a){this.$activeFrame=a,this.dispatchEvent("changeFrame",{data:a})},this.getActiveFrame=function(){return this.$activeFrame},this.setBreakpoints=function(a,c){function g(){++f===e.length&&c()}var d=this,e=a.queryNodes("breakpoint");e.forEach(function(a){var c=a.getAttribute("script"),e=a.getAttribute("line"),f=a.getAttribute("column"),h=new b(c,e,f);h.attach(d.$debugger,function(){d.$bindV8BreakpointToModel(a,h),g()})});var f=0;e.length||c()},this.toggleBreakpoint=function(a,b,c){var d=this,e=a.getAttribute("scriptname"),f=parseInt(a.getAttribute("lineoffset")||"0",10),g=f+b,h=c.data.selectNodes("//breakpoint[@script='"+e+"' and @line="+g+"]");h.length?h.forEach(function(a){var b=!1;try{d.$getV8BreakpointFromModel(a).clear(function(){d.$removeBreakpoint(a,c)}),b=!0}catch(e){b=!1}b||d.$removeBreakpoint(a,c)}):this.$addBreakpoint({name:e,row:g,col:0,lineOffset:f,scriptId:a.getAttribute("scriptid")},c)},this.$removeBreakpoint=function(a,b){var c;a.$id?c="breakpoint[@id="+a.$id+"]":c="//breakpoint[@script='"+a.getAttribute("script")+"' and @line="+a.getAttribute("line")+"]";var d;while(d=b.queryNode(c))apf.xmldb.removeNode(d)},this.$addBreakpoint=function(a,c,d){var e=this,f=new b(a.name,a.row,a.col,a.dbg);return a.data&&apf.extend(f,a.data),f.attach(this.$debugger,function(){c.appendXml(e.$getBreakpointXml(f,a.lineOffset,a.scriptId)),e.$bindV8BreakpointToModel(c.data.selectSingleNode("//breakpoint[@script='"+f.source+"' and @line="+a.row+"]"),f),typeof d=="function"&&d()}),f},this.$getV8BreakpointFromModel=function(a){var b=a.getAttribute("script")+"|"+a.getAttribute("line");return this.$v8breakpoints[b]},this.$bindV8BreakpointToModel=function(a,b){var c=a.getAttribute("script")+"|"+a.getAttribute("line");this.$v8breakpoints[c]=b},this.$getBreakpointXml=function(a,b,c){var d=[];return d.push("<breakpoint"," id='",a.$id,"' text='",this.$strip(apf.escapeXML(a.source)),":",parseInt(a.line,10)+1,"' script='",apf.escapeXML(a.source),c?"' scriptid='"+c:"","' lineoffset='",b||0,"' line='",a.line,"' condition='",apf.escapeXML(a.condition||""),"' ignorecount='",a.ignoreCount||0,"' enabled='",a.enabled,"' />"),d.join("")},this.continueScript=function(a){this.$debugger.continueScript(null,null,a)},this.stepInto=function(a){this.$debugger.continueScript("in",1,a)},this.stepNext=function(a){this.$debugger.continueScript("next",1,a)},this.stepOut=function(a){this.$debugger.continueScript("out",1,a)},this.suspend=function(){this.$debugger.suspend()},this.changeLive=function(a,b,c,d){this.$debugger.changelive(a,b,c,d)},this.evaluate=function(a,b,c,d,e){this.$debugger.evaluate(a,b,c,d,function(b,c,d){var f=[],g=a.trim();d?f.push("<item type='.error' name=\"",apf.escapeXML(g),'" value="',apf.escapeXML(d.message),'" />'):f.push('<item name="',apf.escapeXML(g),"\" value='",apf.escapeXML(b.text),"' type='",b.type,"' ref='",b.handle,b.constructorFunction?"' constructor='"+b.constructorFunction.ref:"",b.prototypeObject?"' prototype='"+b.prototypeObject.ref:"",b.properties&&b.properties.length?"' children='true":"","' />"),e(apf.getXml(f.join("")),b,c,d)})},this.$valueString=function(a){switch(a.type){case"undefined":case"null":return a.type;case"boolean":case"number":case"string":return a.value+"";case"object":return"["+a.className+"]";case"function":return"function "+a.inferredName+"()";default:return a.type}},this.$frameToString=function(a){var b=[],c=a.arguments,d=[];b.push(a.func.name||a.func.inferredName||"anonymous","(");for(var e=0,f=c.length;e<f;e++){var g=c[e];if(!g.name)continue;d.push(g.name)}return b.push(d.join(", "),")"),b.join("")},this.$serializeVariable=function(b,c){var d=["<item name='",apf.escapeXML(c||b.name),"' value='",apf.escapeXML(this.$valueString(b.value)),"' type='",b.value.type,"' ref='",typeof b.value.ref=="number"?b.value.ref:b.value.handle,a[b.value.type]?"' children='true":"","' />"];return d.join("")}})).call(c.prototype=new apf.Class)}),apf.hasRequireJS&&define("apf/elements/dbg/chromedebughost",["module","debug/ChromeDebugMessageStream","debug/WSChromeDebugMessageStream","debug/DevToolsService","debug/V8DebuggerService","debug/V8Debugger","apf/elements/dbg/v8debugger"],function(a,b,c,d,e,f,g){var h=a.exports=function(a,b,c,d){this.$hostname=a,this.$port=b,this.$o3obj=c,this.$ws=d,this.$debuggers={},this.$init(),this.$connect(function(){})};((function(){this.$connect=function(a){var f=this;if(this.state=="connected")return a.call(this);this.addEventListener("connect",function(){f.removeEventListener("connect",arguments.callee),a.call(f)});if(this.state=="connecting")return;this.state="connecting";if(!this.$ws)var g=this.$socket=new O3Socket(this.$hostname,this.$port,this.$o3obj),h=new b(g);else var h=new c(this.$ws);h.addEventListener("connect",function(){f.$dts=new d(h),f.$v8ds=new e(h),f.state="connected",f.dispatchEvent("connect"),window.onunload=f.disconnect.bind(f)}),h.connect()},this.loadTabs=function(a){var b=this;this.$connect(function(){b.$dts.listTabs(function(b){var c=[];for(var d=0;d<b.length;d++)c.push("<tab id='",b[d][0],"' url='",apf.escapeXML(b[d][1]+""),"' />");a.load("<tabs>"+c.join("")+"</tabs>")})})},this.attach=function(a,b){var c;if(c=this.$debuggers[a])return b(null,c);var d=this;this.$connect(function(){d.$v8ds.attach(a,function(){c=new g(new f(a,d.$v8ds),this),d.$debuggers[a]=c,b(null,c)})})},this.detach=function(a,b){var c=this;for(var d in this.$debuggers)if(this.$debuggers[d]==a){this.$v8ds.detach(d,function(e){delete c.$debuggers[d],a.dispatchEvent("detach"),b&&b(e)});break}},this.disconnect=function(a){var b=[];for(var c in this.$debuggers)b.push(c);var d=this,e=function(){if(b.length){var c=b.shift(),f=d.$debuggers[c];d.$v8ds.detach(c,function(){e(),f.dispatchEvent("detach")})}else d.$socket.close(),d.$debuggers={},d.dispatchEvent("disconnect",{}),a&&a()};e()}})).call(h.prototype=new apf.Class)}),apf.hasRequireJS&&define("apf/elements/dbg/v8debughost",["module","debug/StandaloneV8DebuggerService","debug/V8Debugger","apf/elements/dbg/v8debugger"],function(a,b,c,d){var e=a.exports=function(a,b,c){this.$hostname=a,this.$port=b,this.$o3obj=c,this.$debugger=null,this.$init()};((function(){this.$connect=function(a){var c=this;if(this.state=="connected")return a.call(this);this.addEventListener("connect",function(){c.removeEventListener("connect",arguments.callee),a.call(c)});if(this.state=="connecting")return;this.state="connecting";var d=this.$socket=new O3Socket(this.$hostname,this.$port,this.$o3obj);this.$v8ds=new b(d),this.state="connected",this.dispatchEvent("connect"),window.onunload=this.disconnect.bind(this),a.call(this)},this.loadTabs=function(a){a.load("<tabs><tab id='0'>V8</tab></tabs>")},this.attach=function(a,b){var e=this.$debugger;if(e)return b(null,e);var f=this;this.$connect(function(){f.$v8ds.attach(0,function(){e=new d(new c(0,f.$v8ds),this),f.$debugger=e,b(null,e)})})},this.detach=function(a,b){if(!a||this.$debugger!==a)return b();this.$debugger=null;var c=this;this.$v8ds.detach(0,function(d){a.dispatchEvent("detach"),c.$socket.close(),c.dispatchEvent("disconnect",{}),b&&b(d)})},this.disconnect=function(a){this.detach(this.$debugger,a)}})).call(e.prototype=new apf.Class)}),apf.hasRequireJS&&define("apf/elements/dbg/v8websocketdebughost",["module","debug/WSV8DebuggerService","debug/V8Debugger","apf/elements/dbg/v8debugger"],function(a,b,c,d){var e=a.exports=function(a){this.$socket=a,this.$debugger=null,this.$init()};((function(){this.$connect=function(a){this.state!="connected"&&(this.$v8ds=new b(this.$socket)),this.state="connected",this.dispatchEvent("connect"),a.call(this)},this.loadTabs=function(a){a.load("<tabs><tab id='0'>V8</tab></tabs>")},this.attach=function(a,b){var e=this.$debugger;if(e)return b(null,e);var f=this;this.$connect(function(){f.$v8ds.attach(0,function(){e=new d(new c(0,f.$v8ds),this),f.$debugger=e,b(null,e)})})},this.detach=function(a,b){if(!a||this.$debugger!==a)return b();this.$debugger=null;var c=this;this.$v8ds.detach(0,function(d){a.dispatchEvent("detach"),c.dispatchEvent("disconnect",{}),b&&b(d)})},this.disconnect=function(a){this.detach(this.$debugger,a)}})).call(e.prototype=new apf.Class)}),apf.hasRequireJS&&define("apf/elements/debughost",["module","apf/elements/dbg/chromedebughost","apf/elements/dbg/v8debughost","apf/elements/dbg/v8websocketdebughost"],function(a,b,c,d){apf.debughost=a.exports=function(a,b){this.$init(b||"debughost",apf.NODE_HIDDEN,a)},function(){this.port=9222,this.server="localhost",this.type="chrome",this.autoinit=!1,this.$modelTabs=null,this.$stateConnected=null,this.$host=null,this.$booleanProperties.autostart=!0,this.$supportedProperties.push("port","server","type","autoinit","model-tabs","state-connected","strip"),this.$propHandlers["model-tabs"]=function(a){if(!a)return;this.$modelTabs=apf.nameserver.get("model",a)||apf.setReference(a,apf.nameserver.register("model",a,new apf.model)),this.$modelTabs.id=this.$modelTabs.name=a,this.$modelTabs.load("<tabs/>")},this.$propHandlers["state-connected"]=function(a){if(!a)return;this.$stateConnected=apf.nameserver.get("state",a)||apf.setReference(a,apf.nameserver.register("state",a,new apf.state)),this.$stateConnected.id=this.$stateConnected.name=a,this.$stateConnected.deactivate()},this.init=function(){if(this.$host)return;if(this.type=="chrome"||this.type=="v8"||this.type=="v8-ws"){!apf.debughost.$o3obj&&this.type!=="v8-ws"&&(apf.debughost.$o3obj=window.o3Obj||o3.create("8A66ECAC-63FD-4AFA-9D42-3034D18C88F4",{oninstallprompt:function(){alert("can't find o3 plugin")},product:"O3Demo"}));if(this.type=="chrome")this.$host=new b(this.server,this.port,apf.debughost.$o3obj);else if(this.type=="v8")this.$host=new c(this.server,this.port,apf.debughost.$o3obj);else if(this.type=="v8-ws"){var a=this.dispatchEvent("socketfind");if(!a)throw new Error("no socket found!");this.$host=new d(a)}else if(this.type=="chrome-ws"){var a=this.dispatchEvent("socketfind");if(!a)throw new Error("no socket found!");this.$host=new b(null,null,null,a)}var e=this;this.$host.addEventListener("connect",function(){e.dispatchEvent("connect"),e.$stateConnected.activate()}),this.$host.addEventListener("disconnect",function(){e.dispatchEvent("disconnect"),e.$stateConnected.deactivate()}),this.loadTabs()}},this.loadTabs=function(){this.$host||this.init();var a=this;this.$host.loadTabs(this.$modelTabs,function(){a.$dispatchEvent("tabsloaded")})},this.addEventListener("DOMNodeInsertedIntoDocument",function(a){this.autoinit&&this.init()}),this.$attach=function(a,b,c){this.$host||this.init();var d=b?b.getAttribute("id"):null,e=this;this.$host.attach(d,function(a,b){b.setStrip(e.strip||""),c(a,b)})},this.$detach=function(a,b){if(!this.$host)return;this.$host.detach(a,b)},this.disconnect=function(){if(!this.$host)return;this.$host.disconnect(),this.$host=null}}.call(apf.debughost.prototype=new apf.AmlElement),apf.aml.setElement("debughost",apf.debughost)}),define("text!ext/noderunner/noderunner.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n\n    <a:debugger id="dbg"\n      state-running     = "stRunning"\n      state-attached    = "stAttached"\n      model-sources     = "mdlDbgSources"\n      model-stack       = "mdlDbgStack"\n      model-breakpoints = "mdlDbgBreakpoints" \n      onbreak           = ""\n      oncontinue        = "" />\n    \n    <a:debughost id="dbgNode"\n      type            = "v8-ws"\n      autoinit        = "false"\n      model-tabs      = "mdlTabs"\n      state-connected = "stDebuggerConnected" />\n      \n    <a:debughost id="dbgChrome"\n      type     = "chrome-ws"\n      autoinit = "false"\n      model-tabs      = "mdlTabs"\n      state-connected = "stDebuggerConnected" />\n      \n    <a:state id="stDebugProcessRunning" active="false" />\n    \n    <!--a:window id="winTab" \n      title     = "Choose a Tab"\n      icon      = "chromium_16.png"\n      zindex    = "10" \n      center    = "true" \n      modal     = "true" \n      width     = "450" \n      height    = "200" \n      buttons   = "close"\n      kbclose   = "true"\n      skin      = "bk-window"\n      visible   = "false">\n        <a:list id="lstTabs" \n          model="mdlTabs" \n          anchors="10 10 56 10" \n          multiselect="false" \n          autoselect="false" \n          each="[tab]" \n          caption="[@url]" \n          empty-message="Loading tabs..."\n          onafterchoose = "btnTabsOk.dispatchEvent(\'click\');"/>\n        <a:button id="btnTabsOk"\n          right="10"\n          bottom="10"\n          width="60"\n          disabled="{!lstTabs.selected}" \n          default="true"\n          skin="btn-default-css3"\n          onclick="winTab.close();dbg.attach(dbgChrome, {lstTabs.selected})">\n            OK\n        </a:button>\n    </a:window-->\n\n</a:application>'}),define("ext/noderunner/noderunner",["require","exports","module","apf/elements/debugger","apf/elements/debughost","core/ide","core/ext","core/settings","text!ext/noderunner/noderunner.xml"],function(a,b,c){a("apf/elements/debugger"),a("apf/elements/debughost");var d=a("core/ide"),e=a("core/ext"),f=a("core/settings"),g=a("text!ext/noderunner/noderunner.xml");c.exports=e.register("ext/noderunner/noderunner",{name:"Node Runner",dev:"Ajax.org",type:e.GENERAL,alone:!0,offline:!1,markup:g,commands:{run:{hint:"run a node program on the server",commands:{"[PATH]":{hint:"path pointing to an executable. Autocomplete with [TAB]"}}}},NODE_VERSION:"auto",init:function(){var a=this;d.addEventListener("socketConnect",this.onConnect.bind(this)),d.addEventListener("socketDisconnect",this.onDisconnect.bind(this)),d.addEventListener("socketMessage",this.onMessage.bind(this)),dbg.addEventListener("break",function(a){d.dispatchEvent("break",a)}),dbgNode.addEventListener("onsocketfind",function(){return d.socket}),stDebugProcessRunning.addEventListener("activate",this.$onDebugProcessActivate.bind(this)),stDebugProcessRunning.addEventListener("deactivate",this.$onDebugProcessDeactivate.bind(this)),d.addEventListener("consolecommand.run",function(a){return d.send({command:"internal-isfile",argv:a.data.argv,cwd:a.data.cwd,sender:"noderunner"}),!1}),this.nodePid=null,d.addEventListener("loadsettings",function(b){a.NODE_VERSION=b.model.queryValue("auto/node-version/@version")||"auto"})},$onDebugProcessActivate:function(){dbg.attach(dbgNode,0)},$onDebugProcessDeactivate:function(){dbg.detach(function(){})},onMessage:function(a){var b=a.message;switch(b.type){case"node-debug-ready":d.dispatchEvent("debugready");break;case"chrome-debug-ready":winTab.show(),dbgChrome.loadTabs(),d.dispatchEvent("debugready");break;case"node-exit":stProcessRunning.deactivate(),stDebugProcessRunning.deactivate();break;case"node-exit-with-error":stProcessRunning.deactivate(),stDebugProcessRunning.deactivate(),txtOutput.addValue("<div class='item console_log' style='font-weight:bold;color:#ff0000'>[C9 Server Exception: "+b.errorMessage+"</div>");break;case"state":this.nodePid=b.processRunning||0,stDebugProcessRunning.setProperty("active",!!b.debugClient),stProcessRunning.setProperty("active",!!b.processRunning),dbgNode.setProperty("strip",b.workspaceDir+"/"),d.dispatchEvent("noderunnerready");break;case"error":if(b.code==1){stDebugProcessRunning.setProperty("active",!1),stProcessRunning.setProperty("active",!0);break}if(b.code==5){stDebugProcessRunning.setProperty("active",!0),stProcessRunning.setProperty("active",!0);break}b.code===9?txtConsole.addValue("<div class='item console_log' style='font-weight:bold;color:yellow'>"+b.message+"</div>"):b.code!==6&&b.code!=401&&b.code!=455&&b.code!=456&&(txtConsole.addValue("<div class='item console_log' style='font-weight:bold;color:#ff0000'>[C9 Server Exception "+(b.code||"")+"] "+b.message+"</div>"),apf.ajax("/debug",{method:"POST",contentType:"application/json",data:JSON.stringify({agent:navigator.userAgent,type:"C9 SERVER EXCEPTION",code:a.code,message:a.message})})),d.send({command:"state"})}},onConnect:function(){d.send({command:"state"})},onDisconnect:function(){stDebugProcessRunning.deactivate()},debug:function(){this.$run(!0)},run:function(a,b,c,e){dbg.registerManualAttach();if(stProcessRunning.active||!stServerConnected.active||typeof a!="string")return!1;e=="default"&&(e=""),a=a.trim();var g=d.getActivePageModel(),h={command:apf.isTrue(c)?"RunDebugBrk":"Run",file:a.replace(/^\/+/,""),runner:"node",args:b||"",version:e||f.model.queryValue("auto/node-version/@version")||this.NODE_VERSION,env:{C9_SELECTED_FILE:g?g.getAttribute("path").slice(d.davPrefix.length):""}};d.send(h)},stop:function(){if(!stProcessRunning.active)return;d.send({command:"kill",runner:"node",pid:this.nodePid})},enable:function(){},disable:function(){},destroy:function(){}})}),define("ext/runpanel/runpanel",["require","exports","module","core/ide","core/ext","ext/noderunner/noderunner","ext/panels/panels","ext/settings/settings","ext/dockpanel/dockpanel","ext/save/save","text!ext/runpanel/runpanel.xml","text!ext/runpanel/runbuttons.xml","text!ext/runpanel/settings.xml","ext/settings/settings"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/noderunner/noderunner"),g=a("ext/panels/panels"),h=a("ext/settings/settings"),i=a("ext/dockpanel/dockpanel"),j=a("ext/save/save"),k=a("text!ext/runpanel/runpanel.xml"),l=a("text!ext/runpanel/runbuttons.xml"),m=a("text!ext/runpanel/settings.xml");c.exports=e.register("ext/runpanel/runpanel",{name:"Run Panel",dev:"Ajax.org",type:e.GENERAL,alone:!0,markup:k,deps:[f],defaultWidth:270,commands:{run:{hint:"run and debug a node program on the server",commands:{"[PATH]":{hint:"path pointing to an executable. Autocomplete with [TAB]"}}},stop:{hint:"stop a running node program on the server",commands:{"[PATH]":{hint:"path pointing to an executable. Autocomplete with [TAB]"}}}},hotitems:{},nodes:[],hook:function(){var b=this;g.register(this,{position:3e3,caption:"Run","class":"rundebug"}),apf.document.documentElement.insertMarkup(l),this.nodes.push(mnuRunCfg);while(tbRun.childNodes.length){var c=tbRun.firstChild;d.barTools.appendChild(c),c.nodeType==1&&this.nodes.push(c)}mdlRunConfigurations.addEventListener("afterload",function(a){b.$populateMenu()}),a("ext/settings/settings").addSettings("General",m),d.addEventListener("loadsettings",function(a){var b=a.model.queryNode("auto/configurations");b||(b=apf.createNodeFromXpath(a.model.data,"auto/configurations"),apf.xmldb.setAttribute(b,"debug","true"),a.model.setQueryValue("general/@saveallbeforerun",!1)),a.model.queryNode("auto/configurations/@debug")||a.model.setQueryValue("auto/configurations/@debug",!0),a.model.queryNode("auto/configurations/@autohide")||a.model.setQueryValue("auto/configurations/@autohide",!0);if(!b.selectSingleNode("config[@curfile]")){var c=!1;if(!a.model.queryNode("auto/configurations/config[@last='true']")){var d=a.model.queryNode("auto/configurations/config");d?apf.xmldb.setAttribute(d,"last","true"):c=!0}var e=apf.n("<config />").attr("name"," (active file)").attr("curfile","1");c&&e.attr("last","true"),b.insertBefore(e.node(),b.firstChild)}mdlRunConfigurations.load(b)}),d.addEventListener("init.ext/editors/editors",function(a){var b=tabEditors.getPage();if(b&&b.$model){var c=b.$model.queryValue("@path").replace(d.davPrefix,"");mdlRunConfigurations.setQueryValue("config[@curfile]/@path",c),mdlRunConfigurations.setQueryValue("config[@curfile]/@name",c.split("/").pop()+" (active file)")}tabEditors.addEventListener("afterswitch",function(a){var b=a.nextPage,c=b.$model.queryValue("@path").replace(d.davPrefix,"");mdlRunConfigurations.setQueryValue("config[@curfile]/@path",c),mdlRunConfigurations.setQueryValue("config[@curfile]/@name",c.split("/").pop()+" (active file)")}),d.addEventListener("afterfilesave",function(a){var b=tabEditors.getPage();if(b){var c=b.$model.queryValue("@path").replace(d.davPrefix,"");mdlRunConfigurations.setQueryValue("config[@curfile]/@path",c),mdlRunConfigurations.setQueryValue("config[@curfile]/@name",c.split("/").pop()+" (active file)")}})});var e=!1;stProcessRunning.addEventListener("deactivate",function(){if(!b.autoHidePanel())return;var a="ext/debugger/debugger";i.hideSection(a,!1),e=!1}),d.addEventListener("break",function(){if(!b.shouldRunInDebugMode()||!b.autoHidePanel()||e)return;e=!0;var a="ext/debugger/debugger";i.showSection(a,!1);var c=i.getButtons(a,"pgDebugNav")[0].uniqueId;i.layout.isExpanded(c)<0&&i.layout.showMenu(c)}),d.addEventListener("init.ext/debugger/debugger",function(){tabDebug.getPages().concat(tabDebugButtons.getPages()).each(function(a){a.addEventListener("afterclose",function(a){b.autoHidePanel()&&!stProcessRunning.active&&(this.$dockbutton.$dockData.hidden=1)})})}),this.hotitems.run=[btnRun],this.hotitems.stop=[btnStop]},checkAutoHide:function(){},init:function(a){this.panel=winRunPanel,colLeft.appendChild(winRunPanel),this.nodes.push(winRunPanel),lstRunCfg.addEventListener("afterremove",function(a){mnuRunCfg.childNodes.each(function(b){b.node==a.args[0].xmlNode&&b.destroy(!0,!0)})})},duplicate:function(){var a=lstRunCfg.selected;if(!a)return;var b=a.cloneNode(!0);apf.b(a).after(b),lstRunCfg.select(b),winRunPanel.show()},addConfig:function(){var a,b,c=d.getActivePageModel(),e="";if(!c)return;a=c.getAttribute("path").slice(d.davPrefix.length+1),b=c.getAttribute("name").replace(/\.(js|py)$/,function(a,b){return e=b,""});var f=apf.n("<config />").attr("path",a).attr("name",b).attr("extension",e).attr("args","").node(),g=mdlRunConfigurations.appendXml(f);this.$addMenuItem(g),lstRunCfg.select(f)},showRunConfigs:function(){g.activate(this)},autoHidePanel:function(){return apf.isTrue(h.model.queryValue("auto/configurations/@autohide"))},shouldRunInDebugMode:function(){return apf.isTrue(h.model.queryValue("auto/configurations/@debug"))},run:function(a){this.runConfig(window.winRunPanel&&winRunPanel.visible?lstRunCfg.selected:mdlRunConfigurations.queryNode("node()[@last='true']")||mdlRunConfigurations.queryNode("config[@curfile]"),this.shouldRunInDebugMode()),d.dispatchEvent("track_action",{type:a?"debug":"run"})},$populateMenu:function(){var a=mnuRunCfg,b=a.firstChild;while(b&&b.tagName!=="a:divider")a.removeChild(b),b=a.firstChild;var c=b,d=mdlRunConfigurations.queryNodes("config");if(!d.length)a.insertBefore(new apf.item({disabled:!0,caption:"No run history"}),c);else for(var e=0,f=d.length;e<f;e++)this.$addMenuItem(d[e],c)},$addMenuItem:function(a,b){var c=this;b||(b=mnuRunCfg.getElementsByTagNameNS(apf.ns.aml,"divider")[0]),mnuRunCfg.insertBefore(new apf.item({caption:"[{this.node}::@name]",node:a,type:"radio",selected:"[{this.node}::@last]",onclick:function(){c.runConfig(this.node,c.shouldRunInDebugMode()),self.lstRunCfg&&lstRunCfg.select(this.node)}}),b)},runConfig:function(a,b){e.initExtension(this);var c=h.model,g=apf.isTrue(c.queryValue("general/@saveallbeforerun"));g&&j.saveall(),b===undefined&&(b=a.parentNode.getAttribute("debug")=="1");var i=apf.queryNode(a,"../node()[@last]");i&&apf.xmldb.removeAttribute(i,"last"),apf.xmldb.setAttribute(a,"last","true"),d.dispatchEvent("beforeRunning"),f.run(a.getAttribute("path"),(a.getAttribute("args")||"").split(" "),b,ddRunnerSelector.value)},stop:function(){f.stop()},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],g.unregister(this)}})}),define("text!ext/console/console.css",[],function(){return".console_date {\n    display:inline\n}\n.console_text div {\n    padding: 2px 10px;\n}\n.cli_divider {\n    display: block;\n    border-top: 1px solid #444;\n    margin: 6px 0 6px 0;\n}\n.console_text a:link, .console_text a:hover, .console_text a:active {\n    color: #86C2F6;\n}\n.console_text a:visited {\n    color: #909090;\n}\n.cmd_msg > span { float: left; }\n.cmd_msg > span > span { margin:0 0 0 25px; }"}),define("text!ext/console/console.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="winDbgConsole" height="34">\n        <a:vbox anchors="0 0 0 0">\n            <a:tab id="tabConsole" skin="tab_console" flex="1" visible="false" render2="runtime">\n                <a:hbox pack="end" top="2" right="3" height="24" align="center" padding="0">\n                    <a:button id="btnConsoleClear" skin="btn_icon_only" icon="console_clear.png" margin="2 2 0 0"\n                      onclick  = "\n                        if (tabConsole.activepagenr == 0)\n                            txtConsole.clear();\n                        else if (tabConsole.activepagenr == 1)\n                            txtOutput.clear();\n                      "/>\n                    <a:button id="btnConsoleSettings" skin="btn_icon_only"\n                      icon    = "console_settings.png"\n                      margin  = "2 4 0 0"\n                      submenu = "mnuConsoleSettings" />\n                    <a:button id="btnConsoleMax" skin="btn_icon_only" icon="console_max.png" state="true" margin="2 2 0 0"\n                      onclick = "\n                        var console = require(\'ext/console/console\');\n                        if (this.value)\n                            console.maximize();\n                        else\n                            console.restore();\n                      "/>\n                    <a:divider skin="divider_console"></a:divider>\n                    <a:button\n                      skin="btn_icon_only"\n                      icon="console_close_btn.png"\n                      class="dim22-22"\n                      margin="1 0 0 1"\n                      onclick="require(\'ext/console/console\').hide()"/>\n                </a:hbox>\n                <a:page id="pgConsole" caption="Console" name="console">\n                    <a:text id="txtConsole"\n                      margin     = "3 0 0 0"\n                      anchors    = "0 17 0 0"\n                      flex       = "1"\n                      scrolldown = "true"\n                      focussable = "true"\n                      textselect = "true"\n                      class      = "console_text" />\n                    <a:scrollbar\n                      for       = "txtConsole"\n                      right     = "0"\n                      top       = "0"\n                      bottom    = "0"\n                      skin      = "console_scrollbar"\n                      width     = "17" />\n                </a:page>\n                <a:page id="pgOutput" caption="Output" name="output">\n                    <a:text id="txtOutput"\n                      margin     = "3 0 0 0"\n                      anchors    = "0 17 0 0"\n                      flex       = "1"\n                      scrolldown = "true"\n                      focussable = "true"\n                      textselect = "true"\n                      class      = "console_text" />\n                    <a:scrollbar\n                      for    = "txtOutput"\n                      right  = "0"\n                      top    = "0"\n                      bottom = "0"\n                      skin   = "console_scrollbar"\n                      width  = "17" />\n                </a:page>\n            </a:tab>\n\n            <a:menu id="mnuConsoleSettings">\n                <a:item type="check"\n                  checked = "[{require(\'core/settings\').model}::auto/console/@autoshow]"\n                  caption = "Auto-show console when running" />\n            </a:menu>\n\n            <a:hbox class="consoleInputBox" edge="1" padding="4" pack="end">\n                <a:textbox id="txtConsoleInput"\n                  initial-message = \'Type "help" to get a list of commands\'\n                  margin          = "4 0 0"\n                  skin            = "tb_console"\n                  flex            = "1" />\n                <a:button id="btnCollapseConsole" skin="btn_console_open" icon="switch.png" state="true" height="31"\n                    value = "{!!tabConsole.visible}"\n                    onprop.value="try { require(\'ext/console/console\')[event.value ? \'show\' : \'hide\'](); } catch(e) {} " />\n            </a:hbox>\n        </a:vbox>\n    </a:bar>\n</a:application>\n\n'}),define("text!ext/console/themes/arthur.css",[],function(){return"/**\n * This stylesheet is generated automatically, please don't edit manually.\n * Generated by iterm2css - http://github.com/mikedeboer/iterm2css\n */\n\n.term_ansi0Color {\n    color: rgb(61, 53, 42);\n}\n\n.term_ansi1Color {\n    color: rgb(205, 92, 92);\n}\n\n.term_ansi10Color {\n    color: rgb(136, 170, 34);\n}\n\n.term_ansi11Color {\n    color: rgb(255, 167, 93);\n}\n\n.term_ansi12Color {\n    color: rgb(135, 206, 235);\n}\n\n.term_ansi13Color {\n    color: rgb(153, 102, 0);\n}\n\n.term_ansi14Color {\n    color: rgb(176, 196, 222);\n}\n\n.term_ansi15Color {\n    color: rgb(221, 204, 187);\n}\n\n.term_ansi2Color {\n    color: rgb(134, 175, 128);\n}\n\n.term_ansi3Color {\n    color: rgb(232, 174, 91);\n}\n\n.term_ansi4Color {\n    color: rgb(100, 149, 237);\n}\n\n.term_ansi5Color {\n    color: rgb(222, 184, 135);\n}\n\n.term_ansi6Color {\n    color: rgb(176, 196, 222);\n}\n\n.term_ansi7Color {\n    color: rgb(187, 170, 153);\n}\n\n.term_ansi8Color {\n    color: rgb(85, 68, 68);\n}\n\n.term_ansi9Color {\n    color: rgb(204, 85, 51);\n}\n\n.term_backgroundColor {\n    background-color: rgb(28, 28, 28);\n}\n\n.term_boldColor {\n    color: rgb(255, 255, 255);\n}\n\n.term_cursorColor {\n    background-color: rgb(226, 187, 239);\n}\n\n.term_cursorTextColor {\n    background-color: rgb(0, 0, 0);\n}\n\n.term_foregroundColor {\n    color: rgb(221, 238, 221);\n}\n\n.term_selectedTextColor {\n    color: rgb(255, 255, 255);\n}\n\n.term_selectionColor {\n    color: rgb(77, 77, 77);\n}\n\n"}),define("ext/console/parser",["require","exports","module"],function(a,b,c){c.exports=function(a){var b=[],c=0,d="",e=!1,f=a.length;for(var g=0;g<f;g++){var h=a.charAt(g);b[c]||(b[c]=""),/["'`]/.test(h)?(d.length?d===h?d="":b[c]+=h:d=h,e=!1):/\s/.test(h)?d.length?(e=!1,b[c]+=h):e||(e=!0,c+=1):(e=!1,b[c]+=h)}return b[b.length-1]===""&&b.pop(),b}}),define("ext/console/output",["require","exports","module"],function(a,b,c){c.exports={general:{"make me a sandwich":"What? Make it yourself!","make love":"I put on my robe and wizard hat.","i read the source code":"<3",lpr:"PC LOAD LETTER","hello joshua":"How about a nice game of Global Thermonuclear War?",xyzzy:"Nothing happens.",date:"March 32nd",hello:"Why hello there!",who:"Doctor Who?",su:"God mode activated. Remember, with great power comes great ... aw, screw it, go have fun.",fuck:"I have a headache.",whoami:"You are Richard Stallman.",nano:"Seriously? Why don't you just use Notepad.exe? Or MS Paint?",top:"It's up there --^",moo:"moo",ping:"There is another submarine three miles ahead, bearing 225, forty fathoms down.",find:"What do you want to find? Kitten would be nice.",more:"Oh, yes! More! More!","your gay":"Keep your hands off it!",hi:"Hi.",echo:"Echo ... echo ... echo ...",bash:"You bash your head against the wall. It's not very effective.",ssh:"ssh, this is a library.",uname:"Illudium Q-36 Explosive Space Modulator",finger:"Mmmmmm...",kill:"Terminator deployed to 1984.","use the force luke":"I believe you mean source.","use the source luke":"I'm not luke, you're luke!",serenity:"You can't take the sky from me.","enable time travel":"TARDIS error: Time Lord missing.",ed:"You are not a diety."},man:{last:"Man, last night was AWESOME.",help:"Man, help me out here.",next:"Request confirmed; you will be reincarnated as a man next.",cat:"You are now riding a half-man half-cat.",__default__:"Oh, I'm sure you can figure it out."},locate:{ninja:"Ninja can not be found!",keys:"Have you checked your coat pocket?",joke:"Joke found on user.",problem:"Problem exists between keyboard and chair.",raptor:"BEHIND YOU!!!",__default__:"Locate what?"},sudo:{"make me a sandwich":"Okay.","apt-get moo":[" ","        (__)","        (oo)","  /------\\/ "," / |    ||  ","*  /\\---/\\  ","   ~~   ~~  ",'...."Have you mooed today?"...'," "],__default__:"E: Invalid operation %s"},getPredefinedOutput:function(a){var b,c=this[a[0]];return c?(b=a.slice(1).join(" ").trim(),c[b]||c.__default__.replace("%s",a[0])):(b=a.join(" ").trim(),this.general[b]||"")}}}),define("text!ext/consolehints/consolehints.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <div id="barConsoleHints" class="barConsoleHints"/>\n</a:application>'}),define("text!ext/consolehints/consolehints.css",[],function(){return".barConsoleHints {\n    z-index: 10000;\n    padding: 4px 4px 0 4px;\n    position: absolute;\n    display: none;\n\n    bottom: 34px;\n    border-bottom-left-radius: 0px;\n    border-bottom-right-radius: 0px;\n    border-top-left-radius: 8px;\n    border-top-right-radius: 8px;\n    border: 2px solid #656565;\n    border-width: 2px 2px 0 2px;\n\n    background-color: #000000;\n    background: -webkit-gradient(linear,left bottom,left top,rgb(46,48,52),rgb(31,31,31));\n    background: -moz-linear-gradient(center bottom,rgb(46,48,52),rgb(31,31,31));\n    \n    max-height: 300px;\n    overflow: auto;\n}\n\n.barConsoleHints a {\n    position: relative;\n    text-decoration: none;\n    font-weight: normal;\n    color: #eee;\n    padding: 3px 5px;\n    margin: 0 0 2px 0;\n    display: block;\n}\n\n.barConsoleHints a.selected {\n    padding: 2px 4px;\n    border-radius: 4px;\n    background-color: #f0f0f0;\n    background: -webkit-gradient(linear,left bottom,left top,rgb(55,56,58),rgb(41,42,43));\n    background: -moz-linear-gradient(center bottom,rgb(55,56,58),rgb(41,42,43));\n    color: #333;\n    border: 1px solid #505051;\n    border-bottom: 1px solid #1d1e1f;\n}\n\n.barConsoleHints a span {\n    color: #909090;\n    font-style: italic;\n    margin-left: 4px;\n    font-size: 11px;\n}\n\n.barConsoleHints a span.hints_hotkey {\n    color: #666;\n    font-weight: bold;\n    float: right;\n    margin-left : 20px;\n    margin-top : 1px;\n}\n"}),define("ext/tabbehaviors/tabbehaviors",["require","exports","module","core/ide","core/ext","ext/save/save","ext/panels/panels","ext/openfiles/openfiles","ext/tree/tree"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/save/save"),g=a("ext/panels/panels"),h=a("ext/openfiles/openfiles");c.exports=e.register("ext/tabbehaviors/tabbehaviors",{name:"Tab Behaviors",dev:"Ajax.org",alone:!0,type:e.GENERAL,deps:[g],menus:[],accessed:[],$tabAccessCycle:2,sep:null,more:null,menuOffset:4,commands:{closetab:{hint:"close the tab that is currently active",msg:"Closing active tab."},closealltabs:{hint:"close all opened tabs",msg:"Closing all tabs."},closeallbutme:{hint:"close all opened tabs, but the tab that is currently active",msg:"Closing tabs."},gototabright:{hint:"navigate to the next tab, right to the tab that is currently active",msg:"Switching to right tab."},gototableft:{hint:"navigate to the next tab, left to the tab that is currently active",msg:"Switching to left tab."},tab1:{hint:"navigate to the first tab",msg:"Switching to tab 1."},tab2:{hint:"navigate to the second tab",msg:"Switching to tab 2."},tab3:{hint:"navigate to the third tab",msg:"Switching to tab 3."},tab4:{hint:"navigate to the fourth tab",msg:"Switching to tab 4."},tab5:{hint:"navigate to the fifth tab",msg:"Switching to tab 5."},tab6:{hint:"navigate to the sixth tab",msg:"Switching to tab 6."},tab7:{hint:"navigate to the seventh tab",msg:"Switching to tab 7."},tab8:{hint:"navigate to the eighth tab",msg:"Switching to tab 8."},tab9:{hint:"navigate to the ninth tab",msg:"Switching to tab 9."},tab10:{hint:"navigate to the tenth tab",msg:"Switching to tab 10."},revealtab:{hint:"reveal current tab in the file tree"},nexttab:{hint:"navigate to the next tab in the stack of accessed tabs"},previoustab:{hint:"navigate to the previous tab in the stack of accessed tabs"}},hotitems:{},nodes:[],init:function(a){var b=this;this.nodes.push(mnuTabs.appendChild(new apf.item({caption:"Close Tab",onclick:function(){b.closetab(tabEditors.contextPage)},disabled:"{!!!tabEditors.activepage}"})),mnuTabs.appendChild(new apf.item({caption:"Close All Tabs",onclick:this.closealltabs.bind(this),disabled:"{!!!tabEditors.activepage}"})),mnuTabs.appendChild(new apf.item({caption:"Close All But Current Tab",onclick:function(){b.closeallbutme(tabEditors.$activePage)},disabled:"{!!!tabEditors.activepage}"})),apf.document.documentElement.appendChild(new apf.menu({id:"mnuContextTabs",childNodes:[new apf.item({caption:"Reveal in File Tree",onclick:function(){b.revealtab(tabEditors.contextPage)},disabled:"{!!!tabEditors.activepage}"}),new apf.divider,new apf.item({caption:"Close Tab",onclick:function(){b.closetab(tabEditors.contextPage)},disabled:"{!!!tabEditors.activepage}"}),new apf.item({caption:"Close All Tabs",onclick:this.closealltabs.bind(this),disabled:"{!!!tabEditors.activepage}"}),new apf.item({caption:"Close Other Tabs",onclick:function(){b.closeallbutme(tabEditors.$activePage)},disabled:"{!!!tabEditors.activepage}"}),new apf.divider,new apf.item({caption:"Close Tabs to the Right",onclick:function(){b.closealltotheright()},disabled:"{!!!tabEditors.activepage}"}),new apf.item({caption:"Close Tabs to the Left",onclick:function(){b.closealltotheleft()},disabled:"{!!!tabEditors.activepage}"})]}))),this.hotitems.revealtab=[mnuContextTabs.childNodes[0]],this.hotitems.closetab=[this.nodes[0],mnuContextTabs.childNodes[2]],this.hotitems.closealltabs=[this.nodes[1],mnuContextTabs.childNodes[3]],this.hotitems.closeallbutme=[this.nodes[2],mnuContextTabs.childNodes[4]],this.hotitems.closealltotheright=[mnuContextTabs.childNodes[6]],this.hotitems.closealltotheleftt=[mnuContextTabs.childNodes[7]],mnuContextTabs.addEventListener("prop.visible",function(a){if(tabEditors.getPages().length<=1){mnuContextTabs.childNodes[4].setAttribute("disabled",!0),mnuContextTabs.childNodes[6].setAttribute("disabled",!0),mnuContextTabs.childNodes[7].setAttribute("disabled",!0);return}var b=tabEditors.getPage(),c=tabEditors.getPages();mnuContextTabs.childNodes[4].setAttribute("disabled",!1),mnuContextTabs.childNodes[6].setAttribute("disabled",!1),mnuContextTabs.childNodes[7].setAttribute("disabled",!1),b.nextSibling.localName!=="page"?mnuContextTabs.childNodes[6].setAttribute("disabled",!0):c.indexOf(b)==0&&mnuContextTabs.childNodes[7].setAttribute("disabled",!0)}),d.addEventListener("init.ext/editors/editors",function(a){tabEditors.setAttribute("contextmenu","mnuContextTabs"),tabEditors.addEventListener("close",function(a){if(!a||!a.htmlEvent)return;var c=a.page;a=a.htmlEvent;if(a.shiftKey)return b.closealltabs();if(a.altKey)return b.closeallbutme(c)}),tabEditors.addEventListener("DOMNodeInserted",function(a){var c=a.currentTarget;if(c.localName!="page"||a.relatedNode!=this||c.nodeType!=1)return;a.$isMoveWithinParent?c.$tabMenu&&(mnuTabs.insertBefore(c.$tabMenu,c.nextSibling?c.nextSibling.$tabMenu:null),b.updateState()):c.fake&&b.addItem(c)}),tabEditors.addEventListener("DOMNodeRemoved",function(a){if(a.$doOnlyAdmin)return;var c=a.currentTarget;b.removeItem(c);if(c.localName!="page"||a.relatedNode!=this||c.nodeType!=1)return;a.$doOnlyAdmin||b.accessed.remove(c)});var c,d=apf.isMac?18:17;tabEditors.addEventListener("afterswitch",function(a){var d=a.nextPage;c||(b.accessed.remove(d),b.accessed.push(d))}),tabEditors.addEventListener("close",function(a){tabEditors.getPage()==a.page&&(this.nextTabInLine=b.accessed[b.accessed.length-b.$tabAccessCycle])}),apf.addEventListener("keydown",function(a){a.keyCode==d&&(c=!0)}),apf.addEventListener("keyup",function(a){if(a.keyCode==d&&c){var e=tabEditors.getPage();e&&(b.accessed.remove(e),b.accessed.push(e)),b.$tabAccessCycle=2,c=!1}}),tabEditors.addEventListener("aftersavedialogcancel",function(a){if(!b.changedPages)return;var c,d,e;for(c=0,d=b.changedPages.length;c<d;c++)e=b.changedPages[c],e.removeEventListener("aftersavedialogclosed",arguments.callee)})})},closetab:function(){var a=tabEditors.getPage();return tabEditors.remove(a),this.resizeTabs(),!1},resizeTabs:function(){clearTimeout(this.closeTimer),this.closeTimer=setTimeout(function(){tabEditors.$waitForMouseOut=!1,tabEditors.$scaleinit(null,"sync")},200)},closealltabs:function(a){a=typeof a=="function"?a:null,this.changedPages=[],this.unchangedPages=[];var b=tabEditors.getPages();for(var c=0,d=b.length;c<d;c++)this.closepage(b[c],a);this.checkPageRender(a)},closeallbutme:function(a,b){!(a instanceof apf.page)&&(typeof a=="undefined"||typeof a.closeall=="undefined")&&(a=tabEditors.getPage()),this.changedPages=[],this.unchangedPages=[];var c,d=tabEditors.getPages(),e=this;for(var f=0,g=d.length;f<g;f++){c=d[f];if(a&&(c==a||a.hasOwnProperty(f)))continue;this.closepage(c,b)}this.resizeTabs(),this.checkPageRender(b)},closepage:function(a,b){var c=this;a.$doc.getNode().getAttribute("changed")=="1"?(a.noAnim=!0,this.changedPages.push(a),a.addEventListener("aftersavedialogclosed",function(a){var d=c.changedPages[0];if(c.changedPages.length&&d.caption!=a.currentTarget.caption)return;c.changedPages.shift(),this.removeEventListener("aftersavedialogclosed",arguments.callee),c.changedPages.length==0?c.closeUnchangedPages(function(){b&&b()}):tabEditors.remove(c.changedPages[0],null,!0)})):this.unchangedPages.push(a)},checkPageRender:function(a){this.changedPages.length?tabEditors.remove(this.changedPages[0],null,!0):this.closeUnchangedPages(function(){a&&a()})},closeUnchangedPages:function(a){var b;for(var c=0,d=this.unchangedPages.length;c<d;c++)b=this.unchangedPages[c],tabEditors.remove(b,null,!0);a&&a()},closealltotheright:function(){var a=tabEditors.getPage(),b=tabEditors.getPages(),c=b.indexOf(a),d={};for(var e=0;e<=c;e++)d[e]=a;d.closeall=!0,this.closeallbutme(d)},closealltotheleft:function(){var a=tabEditors.getPage(),b=tabEditors.getPages(),c=b.indexOf(a),d={};for(var e=b.length-1;e>=c;e--)d[e]=a;d.closeall=!0,this.closeallbutme(d)},nexttab:function(){if(tabEditors.getPages().length===1)return;var a=this.accessed.length-this.$tabAccessCycle++;a<0&&(a=this.accessed.length-1,this.$tabAccessCycle=2);var b=this.accessed[a];if(b==tabEditors.getPage())return this.nexttab();tabEditors.set(b)},previoustab:function(){if(tabEditors.getPages().length===1)return;var a=this.accessed.length- --this.$tabAccessCycle;a===this.accessed.length&&(a=0,this.$tabAccessCycle=this.accessed.length);var b=this.accessed[a];if(b==tabEditors.getPage())return this.previoustab();tabEditors.set(b)},gototabright:function(a){if(a.keyCode===93)return;return this.cycleTab("right")},gototableft:function(){return this.cycleTab("left")},cycleTab:function(a){var b=a=="right",c=tabEditors,e=c.getPages(),f=c.getPage(),g=e.indexOf(f);if(!f||e.length==1)return;var h=g+(b?1:-1);h<0&&(h=e.length-1),h>e.length-1&&(h=0);var i=d.dispatchEvent("beforecycletab",{index:h,dir:a,pages:e});if(i===!1)return;return typeof i=="number"&&(h=i),c.set(e[h].id),!1},tab1:function(){return this.showTab(1)},tab2:function(){return this.showTab(2)},tab3:function(){return this.showTab(3)},tab4:function(){return this.showTab(4)},tab5:function(){return this.showTab(5)},tab6:function(){return this.showTab(6)},tab7:function(){return this.showTab(7)},tab8:function(){return this.showTab(8)},tab9:function(){return this.showTab(9)},tab10:function(){return this.showTab(10)},showTab:function(a){a--;var b=tabEditors.getPages();return b[a]?(tabEditors.set(b[a]),!1):!1},revealtab:function(a){if(!a||a.command)a=tabEditors.getPage();if(!a)return!1;d.dispatchEvent("exitfullscreen"),this.revealfile(a.$doc.getNode())},revealfile:function(b){function l(){var a=trFiles,b=apf.xmldb.getHtmlNode(a.selected,a);if(!b)return;var c=apf.getAbsolutePosition(b,a.$container),d=a.$container.scrollTop,e=d+a.$container.offsetHeight;if(c[1]>=d&&c[1]<=e)return;var f=a.$container.offsetHeight/2|0,g=c[1]-f;a.$ext.scrollTop=g}var c=b.getAttribute("path"),e=trFiles.queryNode('//file[@path="'+c+'"]');g.activate(a("ext/tree/tree"));if(e)trFiles.expandAndSelect(e),trFiles.focus(),l();else{var f=c.substr(d.davPrefix.length).replace(/^\//,"").split("/"),h=f.pop(),i=["folder[1]"],j="";f.forEach(function(a){j+='/folder[@name="'+a+'"]',i.push("folder[1]"+j)});var k=i[i.length-1];trFiles.expandList(i,function(){trFiles.select(trFiles.queryNode(k+'/file[@name="'+h+'"]')),trFiles.focus(),l()})}var f=c.substr(d.davPrefix.length).replace(/^\//,"").split("/"),h=f.pop(),i=["folder[1]"],j="";f.forEach(function(a){j+='/folder[@name="'+a+'"]',i.push("folder[1]"+j)});var k=i[i.length-1];apf.xmldb.setAttribute(b,"lookup","1"),trFiles.expandList(i,function(){trFiles.select(trFiles.queryNode(k+'/file[@name="'+h+'"]')),trFiles.focus(),l(),apf.xmldb.removeAttribute(b,"lookup")})},addItem:function(a){if(this.more)return;var b=mnuTabs.appendChild(new apf.item({caption:a.getAttribute("caption"),model:a.$model,relPage:a.id,onclick:function(){tabEditors.set(this.relPage)}})),c=this.nodes.push(b)-1;a.$tabMenu=b,this.accessed.push(a),this.updateState()},removeItem:function(a){var b,c,d,e=this.menuOffset,f=this.nodes.length,g=this;for(;e<f;++e)if((b=this.nodes[e]).relPage==a.id){b.destroy(!0,!0),this.nodes.splice(e,1),c=e-this.menuOffset+1,d="tab"+(c==10?0:c),this.commands[d]&&typeof this.commands[d].hotkey!="undefined"&&apf.hotkeys.remove(this.commands[d].hotkey),setTimeout(function(){g.updateState()});return}},updateState:function(a){var b=this.nodes.length-this.menuOffset;this.sep&&!b?(this.sep.destroy(!0,!0),this.sep=null):!this.sep&&(b||a)&&(this.sep=mnuTabs.insertBefore(new apf.divider,mnuTabs.childNodes[this.menuOffset])),b<(a?19:20)?this.more&&(this.more.destroy(!0,!0),this.more=null):this.more||(this.more=mnuTabs.appendChild(new apf.item({caption:"More...",onclick:function(){g.activate(h)}})));var c,d=tabEditors.getPages();for(var e=0,f=d.length;e<f;++e)c="tab"+(e+1==10?0:e+1),this.hotitems[c]=[d[e].$tabMenu],d[e].$tabMenu&&this.commands[c]&&typeof this.commands[c].hotkey!="undefined"?d[e].$tabMenu.setAttribute("hotkey",this.commands[c].hotkey):d[e].$tabMenu.removeAttribute("hotkey")},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("text!ext/tabsessions/tabsessions.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winSaveSessionAs"\n      center    = "true"\n      height    = "300"\n      icon      = ""\n      skin      = "bk-window"\n      buttons   = "close"\n      kbclose   = "true"\n      resizable = "true"\n      title     = "Save Session As"\n      width     = "300"\n      onshow    = "txtSaveSessionAs.clear()">\n        <a:vbox\n          anchors   = "10 10 0 10"\n          padding   = "5">\n            <a:hbox\n              align     = "center"\n              padding   = "5">\n                <a:label width="83" class="lbl_saveas">Session name:</a:label>\n                <a:textbox\n                  id           = "txtSaveSessionAs"\n                  flex         = "1"\n                  focusselect  = "true"/>\n            </a:hbox>\n            <div class="dgLikeContaier" style="height: 160px;">\n                <div class="heading">Saved sessions</div>\n                <a:hbox\n                  anchors  = "20 0 0 0"\n                  overflow = "hidden">\n                    <a:list\n                      id            = "lstSaveSessionAs"\n                      class         = "noscrollbar trDgLike emptyLeft"\n                      scrollbar     = "sbShared 2 2 2"\n                      style         = "border: none; overflow: hidden"\n                      flex          = "1"\n                      model         = "{require(\'ext/settings/settings\').model}"\n                      onclick = "txtSaveSessionAs.setValue(this.selected.getAttribute(\'name\'))"\n                      onafterchoose = "require(\'ext/tabsessions/tabsessions\').saveSession(this.selected.getAttribute(\'name\'))"\n                      empty-message = "No sessions">\n                        <a:each match="[auto/sessions/session]">\n                           <a:caption match="[@name]" />\n                           <a:icon\n                             value = "page_white_text.png" />\n                        </a:each>\n                    </a:list>\n                </a:hbox>\n            </div>\n\n            <a:hbox\n              edge    = "30 0 0"\n              pack    = "end"\n              padding = "5">\n                <a:button skin = "btn-default-css3"\n                  onclick = "winSaveSessionAs.hide()">\n                    Cancel\n                </a:button>\n                <a:button\n                  class="btn-green" skin="btn-default-css3"\n                  default  = "2"\n                  onclick  = "require(\'ext/tabsessions/tabsessions\').saveSession(txtSaveSessionAs.getValue())">\n                    Save\n                </a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n</a:application>\n'}),define("ext/tabsessions/tabsessions",["require","exports","module","core/ide","core/ext","core/util","ext/settings/settings","ext/tabbehaviors/tabbehaviors","text!ext/save/save.css","text!ext/tabsessions/tabsessions.xml","ext/tabbehaviors/tabbehaviors"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/settings/settings"),h=a("ext/tabbehaviors/tabbehaviors"),i=a("text!ext/save/save.css"),j=a("text!ext/tabsessions/tabsessions.xml"),k=a("ext/tabbehaviors/tabbehaviors");k.menuOffset+=3,c.exports=e.register("ext/tabsessions/tabsessions",{name:"Tab Sessions",dev:"Ajax.org",alone:!0,type:e.GENERAL,markup:j,css:i,nodes:[],commands:{savetabsession:{hint:"save the current tab state as a new session",msg:"Save tab session."}},hotitems:[],init:function(a){apf.importCssString(this.css||"");var b=this;d.addEventListener("loadsettings",function(a){var c=a&&a.model||g.model;b.nodes.push(apf.document.documentElement.appendChild(new apf.menu({id:"mnuTabLoadSessions",onitemclick:function(a){b.loadSession(a.relatedNode.value)}})),apf.document.documentElement.appendChild(new apf.menu({id:"mnuTabDeleteSessions",onitemclick:function(a){b.removeSession(a.relatedNode.value)}})));var d=c.queryNodes("auto/sessions/session"),e=[];for(var f=0,h=d.length;f<h;f++)e.push(d[f].getAttribute("name"));e.sort();var i;e.forEach(function(a){mnuTabLoadSessions.appendChild(new apf.item({caption:a,value:a})),mnuTabDeleteSessions.appendChild(new apf.item({caption:a,value:a}))}),b.nodes.push(mnuTabs.appendChild(new apf.divider),mnuTabs.appendChild(new apf.item({id:"mnuFileLoadSession",caption:"Load Tab Session",submenu:"mnuTabLoadSessions",disabled:!d.length})),mnuTabs.appendChild(new apf.item({caption:"Save Tab Session",onclick:function(){winSaveSessionAs.show()},disabled:"{!!!tabEditors.activepage}"})),mnuTabs.appendChild(new apf.item({id:"mnuFileDeleteSession",caption:"Delete Tab Session",submenu:"mnuTabDeleteSessions",disabled:!d.length}))),b.hotitems.savetabsession=[b.nodes[4]]})},saveSession:function(a,b){a||(!txtSaveSessionAs.getValue()&&trSaveSessionAs.selected?a=trSaveSessionAs.selected.getAttribute("name"):a=txtSaveSessionAs.getValue());var c=g.model.queryNode('auto/sessions/session[@name="'+a+'"]');if(c&&!b){var d=this;return f.confirm("Overwrite Session","Overwrite Session","You're about to overwrite the session named "+a+". Are you sure you want to do this?",function(){d.saveSession(a,!0),winSaveSessionAs.hide();return})}g.model.queryNode("auto/sessions")||g.model.appendXml("<sessions />","auto");var e=g.model.queryNode("auto/files");if(!e)return;c?g.model.removeXml(c):(mnuTabLoadSessions.appendChild(new apf.item({caption:a,value:a})),mnuTabDeleteSessions.appendChild(new apf.item({caption:a,value:a}))),c=apf.getXml('<session name="'+a+'" />'),c.appendChild(e),g.model.appendXml(c,"auto/sessions"),mnuFileLoadSession.enable(),mnuFileDeleteSession.enable(),g.save(),winSaveSessionAs.hide()},loadSession:function(a){var b=this;h.closealltabs(function(){b.openSessionFiles(a)})},openSessionFiles:function(a){var b=g.model.queryValue('auto/sessions/session[@name="'+a+'"]/files/@active'),c=g.model.queryNodes('auto/sessions/session[@name="'+a+'"]/files/file'),e=g.model.queryNode('auto/sessions/session[@name="'+a+'"]/files');if(!e)return;for(var f,h=0,i=c.length;h<i;h++){var j=c[h];j.getAttribute("newfile")!="1"&&j.removeAttribute("changed"),f=d.createDocument(j),f.parentNode={};var k=j.getAttribute("state");if(k)try{f.state=JSON.parse(k)}catch(l){}d.dispatchEvent("openfile",{doc:f,init:!0,active:b?b==j.getAttribute("path"):h==i-1})}var m=g.model.queryNode("auto/files");m&&g.model.removeXml("auto/files"),g.model.appendXml(e.cloneNode(!0),"auto"),g.save()},removeSession:function(a){if(!g.model.queryNode('auto/sessions/session[@name="'+a+'"]'))return;g.model.removeXml('auto/sessions/session[@name="'+a+'"]'),g.save();var b=mnuTabLoadSessions.childNodes.concat(mnuTabDeleteSessions.childNodes);for(var c=0,d=b.length;c<d;c++)item=b[c],item.value==a&&mnuTabLoadSessions.removeChild(item);b.length==2&&(mnuFileLoadSession.disable(),mnuFileDeleteSession.disable())},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/keybindings/keybindings",["require","exports","module","core/ide","core/ext"],function(a,b,c){var d=a("core/ide"),e=a("core/ext");c.exports=e.register("ext/keybindings/keybindings",{name:"Keybindings Manager",dev:"Ajax.org",alone:!0,type:e.GENERAL,current:null,nodes:[],init:function(b){d.addEventListener("loadsettings",function(b){var c=b.model.queryValue("general/keybindings/@preset")||"default_"+(apf.isMac?"mac":"win");a(["ext/keybindings_default/"+c])})},update:function(a){var b,c,d,f,g,h,i=a.path.split("/").pop().toLowerCase(),j=this.current[i];if(!j||!a.commands)return;for(d in a.commands){if(!j[d])continue;typeof (h=a.commands[d])["hotkey"]!="undefined"&&apf.hotkeys.remove(h.hotkey),a.commands[d].hotkey=j[d],e.commandsLut[d]&&(e.commandsLut[d].hotkey=j[d]);if(f=a.hotitems&&a.hotitems[d])for(b=0,c=f.length;b<c;++b){g=f[b];if(!g.setAttribute)continue;g.setAttribute("hotkey",j[d])}else typeof a[d]=="function"?apf.hotkeys.register(j[d],a[d].bind(a)):apf.console.error("Please implement the '"+d+"' function on plugin '"+a.name+"' for the keybindings to work")}},onLoad:function(a){var b=this;a=a.ext,this.current=a;var c,f;for(c in e.extLut)f=e.extLut[c],this.update(f);return this.eventsInited||(d.dispatchEvent("keybindingschange",{keybindings:a}),d.addEventListener("$event.keybindingschange",function(a){b.current&&a({keybindings:b.current})}),d.addEventListener("ext.register",function(a){b.update(a.ext)}),this.eventsInited=!0),a},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("text!ext/keybindings_default/keybindings_default.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window\n      id        = "winKeyBindings"\n      title     = "Default Keybindings"\n      icon      = ""\n      center    = "true"\n      visible   = "false"\n      kbclose   = "true"\n      skin      = "bk-window"\n      width     = "793"\n      height    = "500"\n      buttons   = "close"\n      class     = "relative keybindings_default"\n      draggable = "false">\n        <a:bar id="barKeyBindingsMac"\n          skin="basic"\n          class="keybindings_default_bar"\n          visible="{apf.isMac}"/>\n        <a:scrollbar\n          for      = "barKeyBindingsMac"\n          id       = "sbKeyBindingsMac"\n          margin   = "2"\n          skin     = "sbios"\n          width    = "7"\n          overflow2 = "auto"\n          top      = "0"\n          right    = "0"\n          visible  = "{barKeyBindingsMac.visible}"/>\n        <a:bar id="barKeyBindingsWin"\n          skin="basic"\n          class="keybindings_default_bar"\n          visible="{!apf.isMac}"/>\n        <a:scrollbar\n          for      = "barKeyBindingsWin"\n          id       = "sbKeyBindingsWin"\n          margin   = "2"\n          skin     = "sbios"\n          width    = "7"\n          overflow2 = "auto"\n          top      = "0"\n          right    = "0"\n          visible  = "{barKeyBindingsWin.visible}"/>\n\n        <a:bar class="keybindings_default_bottom" skin="basic">\n            <!--a:divider skin="hordivider" /-->\n            <a href="javascript:void(0);" bottom="16" left="28" onclick="barKeyBindingsMac.hide();barKeyBindingsWin.show()" class="{barKeyBindingsWin.visible ? \'selected\' : \'\'}">Windows</a>\n            <span class="keybindings_default_bottom_divider" bottom="16" left="82" >&#160;|&#160;</span>\n            <a href="javascript:void(0);" bottom="16" left="97" onclick="barKeyBindingsWin.hide();barKeyBindingsMac.show()" class="{barKeyBindingsMac.visible ? \'selected\' : \'\'}">Mac</a> \n            <!--a:button default="3" bottom="10" right="10" skin="btn-default-css3" onclick="winKeyBindings.hide()">Done</a:button-->\n        </a:bar>\n    </a:window>\n</a:application>'}),define("text!ext/keybindings_default/keybindings_default.css",[],function(){return".keybindings_default .bg-bk-content {\n    background: url(/static/ext/main/style/images/gitui_menu_backg.png);\n}\n\n/*.keybindings_default_vbox {\n    background: url(/static/ext/main/style/images/gitui_menu_backg.png);\n}*/\n\n.keybindings_default_bar {\n    background: url(/static/ext/keybindings_default/res/divider.png) repeat-y top left;\n    position: relative;\n    left: 0px;\n    right: 7px;\n    top: 0px;\n    bottom: 25px;\n    height: 400px;\n    padding: 20px 10px 0 24px;\n    overflow: hidden;\n}\n\n.keybindings_default .sbios {\n    height: 408px;\n}\n\n.keybindings_default_block,\n.keybindings_default_block_border {\n    float: left;\n    width: 188px;\n    margin: 0 0 18px 0;\n    padding: 0;\n}\n\n.keybindings_default_block h3,\n.keybindings_default_block_border h3 {\n    color: #fff;\n    size: 14px;\n    font-weight: bold;\n    text-shadow: rgba(0, 0, 0, 1) 0px 2px 2px;\n    margin: 0 0 18px 0;\n    padding: 0;\n}\n\n.keybindings_default_command {\n    margin: 0 0 8px 0;\n    padding: 0;\n    line-height: 25px;\n}\n\n.keybindings_default_cmdname {\n    color: #ffd354;\n    size: 12px;\n    font-weight: bold;\n    text-shadow: rgba(0, 0, 0, 1) 0px 2px 2px;\n    margin: 0 0 4px 0;\n    padding: 0;\n}\n\n.keybindings_default_cmdkey {\n    background-color: #e2e4e7;\n    color: #444444;\n    size: 12px;\n    text-shadow: rgba(255, 255, 255, 1) 0px 1px 0px;\n    border: 1px solid #424242;\n    -webkit-border-radius: 4px;\n    -moz-border-radius: 4px;\n    border-radius: 4px;\n    -webkit-box-shadow: 0px 1px 0px #000;\n    -moz-box-shadow: 0px 1px 0px #000;\n    box-shadow: 0px 1px 0px #000;\n    height: 25px;\n    line-height: 25px;\n    text-align: center;\n    vertical-align: middle;\n    margin: 0;\n    padding: 7px 5px 7px 5px;\n}\n\n.keybindings_default_cmdop {\n    color: #fff;\n    font-weight: bold;\n    size: 15px;\n    margin: 0 4px 0 4px;\n}\n\n.keybindings_default_bottom {\n    position: relative;\n    height: 47px;\n    bottom: 0px;\n    left: 0px;\n    right: 0px;\n}\n\n/*.keybindings_default_bottom .btn-default-css3 {\n    margin-top: 8px;\n    float: right;\n}*/\n\n.keybindings_default_bottom a {\n    color: #fff;\n    text-decoration: none;\n}\n\n.keybindings_default_bottom a:hover {\n    text-decoration: underline;\n}\n\n.keybindings_default_bottom a.selected {\n    color: #ffd354;\n}\n\n.keybindings_default_bottom_divider {\n    color: #fff;\n}"}),define("text!ext/keybindings_default/default_mac.js",[],function(){return'/**\n * @copyright 2010, Ajax.org B.V.\n * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>\n */\ndefine(function(require, exports, module) {\n"use strict";\n\nvar keys = require("ext/keybindings/keybindings");\n\nreturn keys.onLoad({\n    "ext" : {\n        "console" : {\n            "switchconsole": "Shift-Esc"\n        },\n        "save" : {\n            "quicksave": "Command-S",\n            "saveas": "Shift-Command-S",\n            "reverttosaved": "Shift-Command-Q"\n        },\n        "undo" : {\n            "undo": "Command-Z",\n            "redo": "Shift-Command-Z"\n        },\n        "clipboard" : {\n            "cut": "Shift-Command-X",\n            "copy": "Command-C",\n            "paste": "Command-V"\n        },\n        "quickwatch": {\n            "quickwatch": "Option-Q"\n        },\n        "runpanel": {\n            "run" : "F5",\n            "stop" : "Shift-F5"\n        },\n        "debugger": {\n            "resume": "F8",\n            "stepinto": "F11",\n            "stepover": "F10",\n            "stepout": "Shift-F11"\n        },\n        "zen": {\n            "zen": "Option-Z",\n            "zenslow": "Shift-Option-Z"\n        },\n        "gotoline": {\n           "gotoline": "Command-L"\n        },\n        "beautify": {\n            "beautify": "Shift-Command-B"\n        },\n        "gotofile": {\n            "_gotofilelegacy": "Option-Shift-R",\n            "gotofile": "Command-E"\n        },\n        "newresource": {\n            "newfile": "Option-Shift-N",\n            "newfiletemplate": "Option-Ctrl-N",\n            "newfolder": "Option-Ctrl-Shift-N"\n        },\n        "quicksearch": {\n            "find": "Command-F",\n            "findnext": "Command-G",\n            "findprevious": "Shift-Command-G"\n        },\n        "searchreplace" : {\n            //"search": "Shift-Command-F",\n            "searchreplace": "Option-Command-F"\n        },\n        "searchinfiles" : {\n            "searchinfiles": "Shift-Command-F"\n        },\n        "formatjson" : {\n            "format" : "Shift-Command-J"\n        },\n        "settings": {\n            "showsettings": "Command-,"\n        },\n        "tabbehaviors" : {\n            "closetab": "Option-W",\n            "closealltabs": "Option-Shift-W",\n            "closeallbutme": "Option-Command-W",\n            "gototabright": "Command-]",\n            "gototableft": "Command-[",\n            "tab1": "Command-1",\n            "tab2": "Command-2",\n            "tab3": "Command-3",\n            "tab4": "Command-4",\n            "tab5": "Command-5",\n            "tab6": "Command-6",\n            "tab7": "Command-7",\n            "tab8": "Command-8",\n            "tab9": "Command-9",\n            "revealtab": "Shift-Command-L",\n            "nexttab": "Option-Tab",\n            "previoustab": "Option-Shift-Tab"\n        },\n        "tabsessions" : {\n            "savetabsession": "Command-Alt-S"\n        },\n        "splitview" : {\n            "mergetableft": "Option-Command-[",\n            "mergetabright": "Option-Command-]"\n        },\n        "code" : {\n            "selectall": "Command-A",\n            "removeline": "Command-D",\n            "togglecomment": "Command-/",\n            "findnext": "Command-G",\n            "findprevious": "Shift-Command-G",\n            "find": "Command-F",\n            "replace": "Option-Shift-F",\n            "undo": "Command-Z",\n            "redo": "Shift-Command-Z|Command-Y",\n            "overwrite": "Insert",\n            "copylinesup": "Option-Command-Up",\n            "movelinesup": "Option-Up",\n            "selecttostart": "Shift-Command-Up",\n            "gotostart": "Command-Home|Command-Up",\n            "selectup": "Shift-Up",\n            "golineup": "Up",\n            "copylinesdown": "Option-Command-Down",\n            "movelinesdown": "Option-Down",\n            "selecttoend": "Shift-Command-Down",\n            "gotoend": "Command-End|Command-Down",\n            "selectdown": "Shift-Down",\n            "golinedown": "Down",\n            "selectwordleft": "Option-Shift-Left",\n            "gotowordleft": "Option-Left",\n            "selecttolinestart": "Shift-Command-Left",\n            "gotolinestart": "Command-Left|Home",\n            "selectleft": "Shift-Left",\n            "gotoleft": "Left",\n            "selectwordright": "Option-Shift-Right",\n            "gotowordright": "Option-Right",\n            "selecttolineend": "Shift-Command-Right",\n            "gotolineend": "Command-Right|End",\n            "selectright": "Shift-Right",\n            "gotoright": "Right",\n            "gotopagedown": "Command-PageDown",\n            "selectpagedown": "Shift-PageDown",\n            "pagedown": "PageDown",\n            "gotopageup": "Command-PageUp",\n            "selectpageup": "Shift-PageUp",\n            "pageup": "PageUp",\n            "selectlinestart": "Shift-Home",\n            "selectlineend": "Shift-End",\n            "del": "Delete",\n            "backspace": "Command-Backspace|Option-Backspace|Backspace",\n            "outdent": "Shift-Tab",\n            "indent": "Tab"\n        },\n        "language": {\n            "complete": "Ctrl-Space|Alt-Space",\n            "renameVar": "Option-Command-R"\n        }\n    }\n});\n\n});\n'}),define("text!ext/keybindings_default/default_win.js",[],function(){return'/**\n * @copyright 2010, Ajax.org B.V.\n * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>\n */\n\ndefine(function(require, exports, module) {\n\nvar keys = require("ext/keybindings/keybindings");\n\nreturn keys.onLoad({\n    "ext" : {\n        "console" : {\n            "switchconsole": "Shift-Esc"\n        },\n        "save" : {\n            "quicksave": "Ctrl-S",\n            "saveas": "Ctrl-Shift-S",\n            "reverttosaved": "Ctrl-Shift-Q"\n        },\n        "undo" : {\n            "undo": "Ctrl-Z",\n            "redo": "Ctrl-Y"\n        },\n        "clipboard" : {\n            "cut": "Ctrl-X",\n            "copy": "Ctrl-C",\n            "paste": "Ctrl-V"\n        },\n        "quickwatch": {\n            "quickwatch": "Ctrl-Q"\n        },\n        "runpanel": {\n            "run" : "Ctrl-F5",\n            "stop" : "Shift-F5"\n        },\n        "debugger": {\n            "resume": "F8",\n            "stepinto": "F11",\n            "stepover": "F10",\n            "stepout": "Shift-F11"\n        },\n        "zen": {\n            "zen": "Alt-E",\n            "zenslow": "Alt-Shift-E"\n        },\n        "gotoline": {\n            "gotoline": "Ctrl-G"\n        },\n        "beautify": {\n            "beautify": "Ctrl-Shift-B"\n        },\n        "gotofile": {\n            "_gotofilelegacy": "Alt-Shift-R",\n            "gotofile": "Ctrl-E"\n        },\n        "newresource": {\n            "newfile": "Ctrl-N",\n            "newfiletemplate": "Ctrl-Shift-N",\n            "newfolder": "Ctrl-Alt-N"\n        },\n        "quicksearch": {\n            "find": "Ctrl-F",\n            "findnext": "Ctrl-K",\n            "findprevious": "Ctrl-Shift-K"\n        },\n        "searchreplace" : {\n            //"search": "Ctrl-Shift-F",\n            "searchreplace": "Alt-Shift-F"\n        },\n        "searchinfiles" : {\n            "searchinfiles": "Ctrl-Shift-F"\n        },\n        "formatjson" : {\n            "format" : "Ctrl-Shift-J"\n        },\n        "settings": {\n            "showsettings": "Ctrl-,"\n        },\n        "tabbehaviors" : {\n            "closetab": "Ctrl-W",\n            "closealltabs": "Ctrl-Shift-W",\n            "closeallbutme": "Ctrl-Alt-W",\n            "gototabright": "Ctrl-]",\n            "gototableft": "Ctrl-[",\n            "tab1": "Ctrl-1",\n            "tab2": "Ctrl-2",\n            "tab3": "Ctrl-3",\n            "tab4": "Ctrl-4",\n            "tab5": "Ctrl-5",\n            "tab6": "Ctrl-6",\n            "tab7": "Ctrl-7",\n            "tab8": "Ctrl-8",\n            "tab9": "Ctrl-9",\n            "revealtab": "Ctrl-Shift-L",\n            "nexttab": "Ctrl-Tab",\n            "previoustab": "Ctrl-Shift-Tab"\n        },\n        "tabsessions" : {\n            "savetabsession": "Ctrl-Alt-S"\n        },\n        "splitview" : {\n            "mergetableft": "Ctrl-Alt-[",\n            "mergetabright": "Ctrl-Alt-]"\n        },\n        "code" : {\n            "selectall": "Ctrl-A",\n            "removeline": "Ctrl-D",\n            "gotoline": "Ctrl-G",\n            "togglecomment": "Ctrl-7",\n            "findnext": "F3",\n            "findprevious": "Shift-F3",\n            "find": "Ctrl-F",\n            "replace": "Alt-Shift-F",\n            "undo": "Ctrl-Z",\n            "redo": "Ctrl-Shift-Z|Ctrl-Y",\n            "overwrite": "Insert",\n            "copylinesup": "Ctrl-Alt-Up",\n            "movelinesup": "Ctrl-Up",\n            "selecttostart": "Ctrl-Shift-Up",\n            "gotostart": "Ctrl-Home",\n            "selectup": "Shift-Up",\n            "golineup": "Up",\n            "copylinesdown": "Ctrl-Alt-Down",\n            "movelinesdown": "Ctrl-Down",\n            "selecttoend": "Ctrl-Shift-Down",\n            "gotoend": "Ctrl-End",\n            "selectdown": "Shift-Down",\n            "golinedown": "Down",\n            "selectwordleft": "Ctrl-Shift-Left",\n            "gotowordleft": "Ctrl-Left",\n            "selecttolinestart": "Alt-Shift-Left",\n            "gotolinestart": "Alt-Left|Home",\n            "selectleft": "Shift-Left",\n            "gotoleft": "Left",\n            "selectwordright": "Ctrl-Shift-Right",\n            "gotowordright": "Ctrl-Right",\n            "selecttolineend": "Alt-Shift-Right",\n            "gotolineend": "Alt-Right|End",\n            "selectright": "Shift-Right",\n            "gotoright": "Right",\n            "selectpagedown": "Shift-PageDown",\n            "pagedown": "PageDown",\n            "selectpageup": "Shift-PageUp",\n            "pageup": "PageUp",\n            "selectlinestart": "Shift-Home",\n            "selectlineend": "Shift-End",\n            "del": "Delete",\n            "backspace": "Backspace",\n            "outdent": "Shift-Tab",\n            "indent": "Tab"\n        },\n        "language": {\n            "complete": "Ctrl-Space|Alt-Space",\n            "renameVar": "Ctrl-Alt-R"\n        }\n    }\n});\n\n});\n'}),define("ext/keybindings_default/keybindings_default",["require","exports","module","core/ext","text!ext/keybindings_default/keybindings_default.xml","text!ext/keybindings_default/keybindings_default.css","text!ext/keybindings_default/default_mac.js","text!ext/keybindings_default/default_win.js"],function(a,b,c){function i(a){var b;return a.replace(/keys\.onLoad\(([\w\W\n\r]*)\);\n/gm,function(a,c){b=c.replace(/\);[\n\r\s]*\}$/,"").replace(/\/\/.+/,"")}),JSON.parse(b)}function k(a){return a.charAt(0).toUpperCase()+a.slice(1)}function l(b,c){var d=[],e,f,g,h,i,l,m=0;for(f in b.ext){++m,g=j[f];if(!j[f])try{g=j[f]=a("ext/"+f+"/"+f)}catch(n){continue}e=m%3,d.push('<div class="keybindings_default_block',e===1||e===2?"_border":"",'"><h3>',g.name.toUpperCase(),"</h3>");for(h in b.ext[f])i=b.ext[f][h],d.push('<div class="keybindings_default_command">','<span class="keybindings_default_cmdname">',g.commands&&g.commands[h].short?g.commands[h].short:k(h),"</span><br/>"),i=i.split("|")[0],c?l=apf.hotkeys.toMacNotation(i).split(" "):l=i.split("-"),d.push('<span class="keybindings_default_cmdkey">',l.join('</span><span class="keybindings_default_cmdop">+</span><span class="keybindings_default_cmdkey">'),"</span></div>");d.push("</div>")}return d.join("")}var d=a("core/ext"),e=a("text!ext/keybindings_default/keybindings_default.xml"),f=a("text!ext/keybindings_default/keybindings_default.css"),g=a("text!ext/keybindings_default/default_mac.js"),h=a("text!ext/keybindings_default/default_win.js"),j={};c.exports=d.register("ext/keybindings_default/keybindings_default",{name:"Default Keybindings",dev:"Ajax.org",type:d.GENERAL,alone:!0,commands:{keybindings:{hint:"show a window that lists all available key shortcuts within the IDE"}},hotitems:{},nodes:[],hook:function(){apf.importCssString(f||""),this.hotitems.keybindings=[this.nodes[0]]},init:function(a){apf.document.documentElement.insertMarkup(e);var b=Array.prototype.slice.call(winKeyBindings.$ext.getElementsByTagName("a")),c=this;b.forEach(function(a){var b=a.innerHTML.indexOf("Mac")>-1?"mac":"win";apf.addListener(a,"mousedown",function(a){c.togglePanels(b)})}),this.buildPanels()},togglePanels:function(a){a=="mac"?(barKeyBindingsWin.setAttribute("visible","false"),barKeyBindingsMac.setAttribute("visible","true")):(barKeyBindingsMac.setAttribute("visible","false"),barKeyBindingsWin.setAttribute("visible","true"))},buildPanels:function(){var a=barKeyBindingsWin;a.$ext.innerHTML=l(i(h));var b=barKeyBindingsMac;b.$ext.innerHTML=l(i(g),!0)},keybindings:function(){d.initExtension(this),winKeyBindings.show()},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/watcher/watcher",["require","exports","module","core/ide","core/ext","core/util","ext/tree/tree"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/tree/tree");c.exports=e.register("ext/watcher/watcher",{name:"Watcher",dev:"Ajax.org",alone:!0,offline:!1,type:e.GENERAL,markup:null,visible:!0,deps:[g],init:function(){function h(){var g=tabEditors.getPage(),h=g.$model.data;if(!h||!h.getAttribute)return;var i=h.getAttribute("path");a[i]?(f.question("File removed, keep tab open?",i+" has been deleted, or is no longer available.","Do you wish to keep the file open in the editor?",function(){apf.xmldb.setAttribute(h,"changed","1"),delete a[i],--b,winQuestion.hide()},function(){var c=tabEditors.getPages();c.forEach(function(a){apf.xmldb.setAttribute(a.$model.data,"changed","1")}),a={},b=0,winQuestion.hide()},function(){tabEditors.remove(g),delete a[i],--b,winQuestion.hide()},function(){var c=tabEditors.getPages();c.forEach(function(b){a[b.$model.data.getAttribute("path")]&&tabEditors.remove(b)}),a={},b=0,winQuestion.hide()}),btnQuestionYesToAll.setAttribute("visible",b>1),btnQuestionNoToAll.setAttribute("visible",b>1)):c[i]&&(f.question("File changed, reload tab?",i+" has been changed by another application.","Do you want to reload it?",function(){d.dispatchEvent("reload",{doc:g.$doc}),delete c[i],--e,winQuestion.hide()},function(){var a=tabEditors.getPages();a.forEach(function(a){c[a.$model.data.getAttribute("path")]&&d.dispatchEvent("reload",{doc:a.$doc})}),c={},e=0,winQuestion.hide()},function(){delete c[i],--e,winQuestion.hide()},function(){c={},e=0,winQuestion.hide()}),btnQuestionYesToAll.setAttribute("visible",e>1),btnQuestionNoToAll.setAttribute("visible",e>1))}this.expandedPaths={};var a={},b=0,c={},e=0,g=this;d.addEventListener("openfile",function(a){var b=a.doc.getNode().getAttribute("path");g.sendWatchFile(b)}),d.addEventListener("closefile",function(a){if(g.disabled)return;var b=a.xmlNode.getAttribute("path");g.sendUnwatchFile(b)}),d.addEventListener("socketMessage",function(f){if(g.disabled)return;var i=tabEditors.getPages(),j=f.message;if(j.type&&j.type!="watcher"||!j.path)return;var k=d.davPrefix+j.path.slice(d.workspaceDir.length);k=k.replace(/\/$/,"");if(g.expandedPaths[k])return d.dispatchEvent("treechange",{path:k,files:j.files});if(!i.some(function(a){return a.$model.data.getAttribute("path")==k}))return;switch(j.subtype){case"create":break;case"remove":a[k]||(a[k]=k,++b,h());break;case"change":!c[k]&&(new Date(j.lastmod)).getTime()!=(new Date(tabEditors.getPage().$model.queryValue("@modifieddate"))).getTime()&&(c[k]=k,++e,h())}}),d.addEventListener("init.ext/editors/editors",function(a){tabEditors.addEventListener("afterswitch",function(a){if(g.disabled)return;h()})}),d.addEventListener("init.ext/tree/tree",function(){trFiles.addEventListener("expand",function(a){if(g.disabled)return;var b=a.xmlNode;if(b&&(b.getAttribute("type")=="folder"||b.tagName=="folder")){var c=b.getAttribute("path");g.expandedPaths[c]=c,g.sendWatchFile(c)}}),trFiles.addEventListener("collapse",function(a){if(g.disabled)return;var b=a.xmlNode;if(b&&(b.getAttribute("type")=="folder"||b.tagName=="folder")){var c=b.getAttribute("path");delete g.expandedPaths[c],g.sendUnwatchFile(c)}})})},sendWatchFile:function(a){d.send({command:"watcher",type:"watchFile",path:a.slice(d.davPrefix.length).replace(/^\//,"")})},sendUnwatchFile:function(a){d.send({command:"watcher",type:"unwatchFile",path:a.slice(d.davPrefix.length).replace(/^\//,"")})},enable:function(){this.disabled=!1;var a=this,b=tabEditors.getPages();b.forEach(function(b){b.$model&&a.sendWatchFile(b.$model.data.getAttribute("path"))});for(var c in this.expandedPaths)this.sendWatchFile(c)},disable:function(){this.disabled=!0},destroy:function(){}})}),define("ext/dragdrop/dragdrop",["require","exports","module","core/ide","core/ext","core/util","ext/filesystem/filesystem"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/filesystem/filesystem"),h=52428800,i=2097152,j=10;c.exports=e.register("ext/dragdrop/dragdrop",{dev:"Ajax.org",name:"Dragdrop",alone:!0,type:e.GENERAL,nodes:[],init:function(){function e(a){b=a.dropbox=b.cloneNode(!0),a.appendChild(b),a.addEventListener("dragenter",g,!1),b.addEventListener("dragleave",f,!1),b.addEventListener("drop",h,!1),["dragexit","dragover"].forEach(function(a){b.addEventListener(a,i,!1)})}function f(a){apf.stopEvent(a),apf.setStyleClass(this,null,["over"])}function g(a){apf.stopEvent(a),apf.setStyleClass(this.dropbox,"over")}function h(b){return f.call(this,b),a.onBeforeDrop(b)}function i(a){apf.stopEvent(a)}var a=this,b=document.createElement("div");apf.setStyleClass(b,"draganddrop");var c=document.createElement("span");c.textContent="Drop files here to upload",b.appendChild(c),d.addEventListener("init.ext/editors/editors",function(){a.nodes.push(tabEditors.$ext),e(tabEditors.$ext)}),d.addEventListener("init.ext/tree/tree",function(){setTimeout(function(){a.nodes.push(trFiles.$ext),e(trFiles.$ext)},200)}),this.dragStateEvent={dragenter:g},apf.addEventListener("http.uploadprogress",this.onProgress.bind(this))},onBeforeDrop:function(a){if(!window.File||!window.FileReader)return f.alert("Could not upload file(s)","An error occurred while dropping this file(s)","Your browser does not offer support for drag and drop for file uploads. Please try with a recent version of Chrome or Firefox browsers."),!1;if(a.dataTransfer.files.length>j)return f.alert("Could not upload file(s)","An error occurred while dropping this file(s)","You can only drop "+j+" files to upload at the same time. "+"Please try again with "+j+" or a lesser number of files."),!1;for(var b=0,c=0,d=a.dataTransfer.files.length;c<d;++c)b+=a.dataTransfer.files[c].size;return b>h?(f.alert("Could not save document","An error occurred while saving this document","The file(s) you dropped exceeds the maximum of 50MB and could therefore not be uploaded."),!1):a.dataTransfer.files.length<1?!1:(this.onDrop(a),!0)},onDrop:function(a){var b=this,c=a.dataTransfer,d=c.files;apf.asyncForEach(d,function(a,c){b.StatusBar.start();if(apf.hasFileApi){var d=new FileReader;d.onloadend=b.onLoad.bind(b,a,c),d.readAsBinaryString(a)}else b.onLoad(a,c,b.getFormData(a))},this.StatusBar.end)},onLoad:function(a,b,c){function m(b){b?f.confirm("Are you sure?",'"'+a.name+'" already exists, do you want to replace it?',"A file or folder with the same name already exists. Replacing it will overwrite it's current contents.",n):o()}function n(){apf.xmldb.removeNode(trFiles.queryNode('//file[@path="'+h+"/"+j+'"]')),g.remove(h+"/"+j,o)}function o(){var b=c instanceof FormData?c:c.target.result,d={filename:a.name,filesize:a.size,blob:a};g.webdav.write(h+"/"+a.name,b,!1,d,p),l.StatusBar.upload(a)}function p(c,k,l){if(k!=apf.SUCCESS)return f.alert("Could not save document","An error occurred while saving this document","Please see if your internet connection is available and try again. "+(k==apf.TIMEOUT?"The connection timed out.":"The error reported was "+l.message),b);g.webdav.exec("readdir",[h],function(c){if(!c||c instanceof Error)return f.alert("Error","File '"+j+"' could not be created","An error occurred while creating a new file, please try again."),b();var g=apf.getXml(c),k=h+"/"+j;a=g.selectSingleNode("//file[@path='"+k+"']");if(!a)return f.alert("Error","File '"+j+"' could not be created","An error occurred while creating a new file, please try again."),b();var l=apf.xmldb.appendChild(e,a);trFiles.select(l),a.size<i&&d.dispatchEvent("openfile",{doc:d.createDocument(l)}),b()})}var e=trFiles.selected;e||(e=trFiles.xmlRoot.selectSingleNode("folder"));while(e.getAttribute("type")!="folder"&&e.tagName!="folder")e=e.parentNode;var h=e.getAttribute("path"),j=a.name,k=0,l=this;g.exists(h+"/"+a.name,m)},onProgress:function(a){var b=a.extra,c=b.loaded/b.total*100;this.StatusBar.progress(c.toFixed())},getFormData:function(a){var b=new FormData;return b.append("upload",a),b},enable:function(){var a=this;this.nodes.each(function(b){for(var c in a.dragStateEvent)b.addEventListener(c,a.dragStateEvent[c],!1)}),apf.addEventListener("http.uploadprogress",this.onProgress)},disable:function(){var a=this;this.nodes.each(function(b){for(var c in a.dragStateEvent)b.removeEventListener(c,a.dragStateEvent[c],!1)}),apf.removeEventListener("http.uploadprogress",this.onProgress)},destroy:function(){var a=this;this.nodes.each(function(b){b.removeChild(b.dropbox);for(var c in a.dragStateEvent)b.removeEventListener(c,a.dragStateEvent[c],!1)}),this.nodes=[],apf.removeEventListener("http.uploadprogress",this.onProgress)}})}),define("ext/beautify/res/jsbeautify/jsbeautify-min",["require","exports","module"],function(a,b,c){b.js_beautify=function(a,b){function c(){K=0;if(C>=T)return["","TK_EOF"];I=!1;var a=p.charAt(C);C+=1;var b=S&&g(w.mode);if(b){var e=0;while(d(a,z)){a==="\n"?(o(),q.push("\n"),J=!0,e=0):a==="\t"?e+=4:a!=="\r"&&(e+=1);if(C>=T)return["","TK_EOF"];a=p.charAt(C),C+=1}w.indentation_baseline===-1&&(w.indentation_baseline=e);if(J){var f;for(f=0;f<w.indentation_level+1;f+=1)q.push(y);if(w.indentation_baseline!==-1)for(f=0;f<e-w.indentation_baseline;f++)q.push(" ")}}else{while(d(a,z)){a==="\n"&&(K+=P?K<=P?1:0:1);if(C>=T)return["","TK_EOF"];a=p.charAt(C),C+=1}if(O&&K>1)for(f=0;f<K;f+=1)m(f===0),J=!0;I=K>0}if(d(a,A)){if(C<T)while(d(p.charAt(C),A)){a+=p.charAt(C),C+=1;if(C===T)break}if(C===T||!a.match(/^[0-9]+[Ee]$/)||p.charAt(C)!=="-"&&p.charAt(C)!=="+")return a==="in"?[a,"TK_OPERATOR"]:(I&&s!=="TK_OPERATOR"&&s!=="TK_EQUALS"&&!w.if_line&&(O||t!=="var")&&m(),[a,"TK_WORD"]);var h=p.charAt(C);C+=1;var i=c(C);return a+=h+i[0],[a,"TK_WORD"]}if(a==="("||a==="[")return[a,"TK_START_EXPR"];if(a===")"||a==="]")return[a,"TK_END_EXPR"];if(a==="{")return[a,"TK_START_BLOCK"];if(a==="}")return[a,"TK_END_BLOCK"];if(a===";")return[a,"TK_SEMICOLON"];if(a==="/"){var j="",k=!0;if(p.charAt(C)==="*"){C+=1;if(C<T)while((p.charAt(C)!=="*"||!p.charAt(C+1)||p.charAt(C+1)!=="/")&&C<T){a=p.charAt(C),j+=a;if(a==="\r"||a==="\n")k=!1;C+=1;if(C>=T)break}return C+=2,k?["/*"+j+"*/","TK_INLINE_COMMENT"]:["/*"+j+"*/","TK_BLOCK_COMMENT"]}if(p.charAt(C)==="/"){j=a;while(p.charAt(C)!=="\r"&&p.charAt(C)!=="\n"){j+=p.charAt(C),C+=1;if(C>=T)break}return C+=1,I&&m(),[j,"TK_COMMENT"]}}if(a==="'"||a==='"'||a==="/"&&(s==="TK_WORD"&&d(t,["return","do"])||s==="TK_COMMENT"||s==="TK_START_EXPR"||s==="TK_START_BLOCK"||s==="TK_END_BLOCK"||s==="TK_OPERATOR"||s==="TK_EQUALS"||s==="TK_EOF"||s==="TK_SEMICOLON")){var l=a,r=!1,u=a;if(C<T)if(l==="/"){var v=!1;while(r||v||p.charAt(C)!==l){u+=p.charAt(C),r?r=!1:(r=p.charAt(C)==="\\",p.charAt(C)==="["?v=!0:p.charAt(C)==="]"&&(v=!1)),C+=1;if(C>=T)return[u,"TK_STRING"]}}else while(r||p.charAt(C)!==l){u+=p.charAt(C),r?r=!1:r=p.charAt(C)==="\\",C+=1;if(C>=T)return[u,"TK_STRING"]}C+=1,u+=l;if(l==="/")while(C<T&&d(p.charAt(C),A))u+=p.charAt(C),C+=1;return[u,"TK_STRING"]}if(a==="#"){if(q.length===0&&p.charAt(C)==="!"){u=a;while(C<T&&a!="\n")a=p.charAt(C),u+=a,C+=1;return q.push(n(u)+"\n"),m(),c()}var x="#";if(C<T&&d(p.charAt(C),E)){do a=p.charAt(C),x+=a,C+=1;while(C<T&&a!=="#"&&a!=="=");return a!=="#"&&(p.charAt(C)==="["&&p.charAt(C+1)==="]"?(x+="[]",C+=2):p.charAt(C)==="{"&&p.charAt(C+1)==="}"&&(x+="{}",C+=2)),[x,"TK_WORD"]}}if(a==="<"&&p.substring(C-1,C+3)==="<!--")return C+=3,w.in_html_comment=!0,["<!--","TK_COMMENT"];if(a==="-"&&w.in_html_comment&&p.substring(C-1,C+2)==="-->")return w.in_html_comment=!1,C+=2,I&&m(),["-->","TK_COMMENT"];if(d(a,B)){while(C<T&&d(a+p.charAt(C),B)){a+=p.charAt(C),C+=1;if(C>=T)break}return a==="="?[a,"TK_EQUALS"]:[a,"TK_OPERATOR"]}return[a,"TK_UNKNOWN"]}function d(a,b){for(var c=0;c<b.length;c+=1)if(b[c]===a)return!0;return!1}function e(){H=w.mode==="DO_BLOCK",x.length>0&&(w=x.pop())}function f(a){return a==="[EXPRESSION]"||a==="[INDENTED-EXPRESSION]"||a==="(EXPRESSION)"}function g(a){return a==="[EXPRESSION]"||a==="[INDENTED-EXPRESSION]"}function h(a){w&&x.push(w),w={previous_mode:w?w.mode:"BLOCK",mode:a,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case:!1,eat_next_space:!1,indentation_baseline:-1,indentation_level:w?w.indentation_level+(w.var_line&&w.var_line_reindented?1:0):Q,ternary_depth:0}}function i(){q.length&&q[q.length-1]===y&&q.pop()}function j(){w.indentation_level+=1}function k(){J=!1,w.eat_next_space=!1,q.push(r)}function l(){if(w.eat_next_space)w.eat_next_space=!1;else{var a=" ";q.length&&(a=q[q.length-1]),a!==" "&&a!=="\n"&&a!==y&&q.push(" ")}}function m(a){w.eat_next_space=!1;if(!S||!g(w.mode)){a=typeof a=="undefined"?!0:a,w.if_line=!1,o();if(!q.length)return;if(q[q.length-1]!=="\n"||!a)J=!0,q.push("\n");for(var b=0;b<w.indentation_level;b+=1)q.push(y);w.var_line&&w.var_line_reindented&&(N===" "?q.push("    "):q.push(y))}}function n(a){return a.replace(/^\s\s*|\s\s*$/,"")}function o(a){a=typeof a=="undefined"?!1:a;while(q.length&&(q[q.length-1]===" "||q[q.length-1]===y||a&&(q[q.length-1]==="\n"||q[q.length-1]==="\r")))q.pop()}var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;b=b?b:{};var L;b.space_after_anon_function!==undefined&&b.jslint_happy===undefined&&(b.jslint_happy=b.space_after_anon_function),b.braces_on_own_line!==undefined&&(L=b.braces_on_own_line?"expand":"collapse"),L=b.brace_style?b.brace_style:L?L:"collapse";var M=b.indent_size?b.indent_size:4,N=b.indent_char?b.indent_char:" ",O=typeof b.preserve_newlines=="undefined"?!0:b.preserve_newlines,P=typeof b.max_preserve_newlines=="undefined"?!1:b.max_preserve_newlines,Q=b.indent_level?b.indent_level:0,R=b.jslint_happy==="undefined"?!1:b.jslint_happy,S=typeof b.keep_array_indentation=="undefined"?!1:b.keep_array_indentation;J=!1;var T=a.length;y="";while(M>0)y+=N,M-=1;p=a,v="",s="TK_START_EXPR",t="",u="",q=[],H=!1,z="\n\r\t ".split(""),A="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),E="0123456789".split(""),B="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::".split(" "),D="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),x=[],h("BLOCK"),C=0;for(;;){var U=c(C);r=U[0],G=U[1];if(G==="TK_EOF")break;switch(G){case"TK_START_EXPR":if(r==="["){if(s==="TK_WORD"||t===")"){d(t,D)&&l(),h("(EXPRESSION)"),k();break}w.mode==="[EXPRESSION]"||w.mode==="[INDENTED-EXPRESSION]"?u==="]"&&t===","?(w.mode==="[EXPRESSION]"&&(w.mode="[INDENTED-EXPRESSION]",S||j()),h("[EXPRESSION]"),S||m()):t==="["?(w.mode==="[EXPRESSION]"&&(w.mode="[INDENTED-EXPRESSION]",S||j()),h("[EXPRESSION]"),S||m()):h("[EXPRESSION]"):h("[EXPRESSION]")}else h("(EXPRESSION)");t===";"||s==="TK_START_BLOCK"?m():s!=="TK_END_EXPR"&&s!=="TK_START_EXPR"&&s!=="TK_END_BLOCK"&&t!=="."&&(s!=="TK_WORD"&&s!=="TK_OPERATOR"?l():v==="function"||v==="typeof"?R&&l():(d(t,D)||t==="catch")&&l()),k();break;case"TK_END_EXPR":if(r==="]")if(S){if(t==="}"){i(),k(),e();break}}else if(w.mode==="[INDENTED-EXPRESSION]"&&t==="]"){e(),m(),k();break}e(),k();break;case"TK_START_BLOCK":v==="do"?h("DO_BLOCK"):h("BLOCK"),L=="expand"?(s!=="TK_OPERATOR"&&(t==="return"||t==="="?l():m(!0)),k(),j()):(s!=="TK_OPERATOR"&&s!=="TK_START_EXPR"?s==="TK_START_BLOCK"?m():l():g(w.previous_mode)&&t===","&&(u==="}"?l():m()),j(),k());break;case"TK_END_BLOCK":e(),L=="expand"?(t!=="{"&&m(),k()):(s==="TK_START_BLOCK"?J?i():o():g(w.mode)&&S?(S=!1,m(),S=!0):m(),k());break;case"TK_WORD":if(H){l(),k(),l(),H=!1;break}if(r==="function"){w.var_line&&(w.var_line_reindented=!0);if((J||t===";")&&t!=="{"){K=J?K:0,O||(K=1);for(var V=0;V<2-K;V++)m(!1)}}if(r==="case"||r==="default"){t===":"?i():(w.indentation_level--,m(),w.indentation_level++),k(),w.in_case=!0;break}F="NONE",s==="TK_END_BLOCK"?d(r.toLowerCase(),["else","catch","finally"])?L=="expand"||L=="end-expand"?F="NEWLINE":(F="SPACE",l()):F="NEWLINE":s!=="TK_SEMICOLON"||w.mode!=="BLOCK"&&w.mode!=="DO_BLOCK"?s==="TK_SEMICOLON"&&f(w.mode)?F="SPACE":s==="TK_STRING"?F="NEWLINE":s==="TK_WORD"?(t==="else"&&o(!0),F="SPACE"):s==="TK_START_BLOCK"?F="NEWLINE":s==="TK_END_EXPR"&&(l(),F="NEWLINE"):F="NEWLINE",d(r,D)&&t!==")"&&(t=="else"?F="SPACE":F="NEWLINE"),w.if_line&&s==="TK_END_EXPR"&&(w.if_line=!1);if(d(r.toLowerCase(),["else","catch","finally"]))s!=="TK_END_BLOCK"||L=="expand"||L=="end-expand"?m():(o(!0),l());else if(F==="NEWLINE"){if(s!=="TK_START_EXPR"&&t!=="="&&t!==","||r!=="function")r==="function"&&t=="new"?l():t==="return"||t==="throw"?l():s!=="TK_END_EXPR"?(s!=="TK_START_EXPR"||r!=="var")&&t!==":"&&(r==="if"&&v==="else"&&t!=="{"?l():(w.var_line=!1,w.var_line_reindented=!1,m())):d(r,D)&&t!=")"&&(w.var_line=!1,w.var_line_reindented=!1,m())}else g(w.mode)&&t===","&&u==="}"?m():F==="SPACE"&&l();k(),v=r,r==="var"&&(w.var_line=!0,w.var_line_reindented=!1,w.var_line_tainted=!1),r==="if"&&(w.if_line=!0),r==="else"&&(w.if_line=!1);break;case"TK_SEMICOLON":k(),w.var_line=!1,w.var_line_reindented=!1,w.mode=="OBJECT"&&(w.mode="BLOCK");break;case"TK_STRING":s==="TK_START_BLOCK"||s==="TK_END_BLOCK"||s==="TK_SEMICOLON"?m():s==="TK_WORD"&&l(),k();break;case"TK_EQUALS":w.var_line&&(w.var_line_tainted=!0),l(),k(),l();break;case"TK_OPERATOR":var W=!0,X=!0;w.var_line&&r===","&&f(w.mode)&&(w.var_line_tainted=!1);if(w.var_line&&r===","){if(w.var_line_tainted){k(),w.var_line_reindented=!0,w.var_line_tainted=!1,m();break}w.var_line_tainted=!1}if(t==="return"||t==="throw"){l(),k();break}if(r===":"&&w.in_case){k(),m(),w.in_case=!1;break}if(r==="::"){k();break}if(r===","){w.var_line?w.var_line_tainted?(k(),m(),w.var_line_tainted=!1):(k(),l()):s==="TK_END_BLOCK"&&w.mode!=="(EXPRESSION)"?(k(),w.mode==="OBJECT"&&t==="}"?m():l()):w.mode==="OBJECT"?(k(),m()):(k(),l());break}d(r,["--","++","!"])||d(r,["-","+"])&&(d(s,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||d(t,D))?(W=!1,X=!1,t===";"&&f(w.mode)&&(W=!0),s==="TK_WORD"&&d(t,D)&&(W=!0),w.mode==="BLOCK"&&(t==="{"||t===";")&&m()):r==="."?W=!1:r===":"?w.ternary_depth==0?(w.mode="OBJECT",W=!1):w.ternary_depth-=1:r==="?"&&(w.ternary_depth+=1),W&&l(),k(),X&&l(),r!=="!";break;case"TK_BLOCK_COMMENT":var Y=r.split(/\x0a|\x0d\x0a/);if(/^\/\*\*/.test(r)){m(),q.push(Y[0]);for(V=1;V<Y.length;V++)m(),q.push(" "),q.push(n(Y[V]))}else{Y.length>1?(m(),o()):l();for(V=0;V<Y.length;V++)q.push(Y[V]),q.push("\n")}m();break;case"TK_INLINE_COMMENT":l(),k(),f(w.mode)?l():m();break;case"TK_COMMENT":I?m():l(),k(),m();break;case"TK_UNKNOWN":(t==="return"||t==="throw")&&l(),k()}u=t,s=G,t=r}return q.join("").replace(/[\n ]+$/,"")}}),define("text!ext/beautify/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Preserve Empty Lines"\n        checked="{[beautify/jsbeautify/@preserveempty] != \'\' ? [beautify/jsbeautify/@preserveempty] : \'true\'}"\n        value="[beautify/jsbeautify/@preserveempty]" skin="checkbox_grey" position="1000"/>\n    <a:checkbox class="underlined" label="Keep Array Indentation"\n        checked="{[beautify/jsbeautify/@keeparrayindentation] != \'\' ? [beautify/jsbeautify/@keeparrayindentation] : \'true\'}"\n        value="[beautify/jsbeautify/@keeparrayindentation]" skin="checkbox_grey" position="2000"/>\n    <a:checkbox class="underlined" label="JSLint Strict Whitespace"\n        checked="{[beautify/jsbeautify/@jslinthappy] != \'\' ? [beautify/jsbeautify/@jslinthappy] : \'false\'}"\n        value="[beautify/jsbeautify/@jslinthappy]" skin="checkbox_grey" position="3000"/>\n    <a:hbox edge="5 5 2 5" align="center" position="4000">\n        <a:label flex="1">Braces</a:label>\n        <a:dropdown default="end-expand" value="[{require(\'ext/settings/settings\').model}::beautify/jsbeautify/@braces]" width="185" height="21">\n            <a:item value="collapse">Braces with control statement</a:item>\n            <a:item value="expand">Braces on own line</a:item>\n            <a:item value="end-expand">End braces on own line</a:item>\n        </a:dropdown>\n    </a:hbox>\n</a:application>\n'}),define("ext/offline/lib-offline",["require","exports","module"],function(a,b,c){var d=c.exports=function(a,b){this.onLine=-1,this.detectUrl=b,this.interval=5e3,this.namespace=a;var c=window.applicationCache;c.addEventListener("offline",function(a){},!1),c.addEventListener("online",function(a){},!1),c.addEventListener("checking",function(a){},!1),c.addEventListener("downloading",function(a){},!1),c.addEventListener("progress",function(a){},!1),c.addEventListener("cached",function(a){},!1),c.addEventListener("noupdate",function(a){},!1),c.addEventListener("updateready",function(a){c.swapCache()},!1),c.addEventListener("error",function(a){},!1)};((function(){this.start=function(){this.offlineTime=parseInt(localStorage[this.namespace+".offlinetime"]||0,10),this.offlineTime&&this.goOffline(),this.startDetect()},this.isSiteAvailable=function(a){var b=this;this.http||(this.http=new apf.http,this.http.timeout=this.interval),this.http.get(apf.getNoCacheUrl(this.detectUrl),{callback:function(c,d,e){d!=apf.SUCCESS?b.goOffline(a):b.goOnline(a)},ignoreOffline:!0,hideLogMessage:!0})},this.startDetect=function(){if(this.detectErrorHandler)return;var a=this;apf.addEventListener("error",this.detectErrorHandler=function(b){if(b.state==apf.TIMEOUT)return!a.goOffline()}),this.isSiteAvailable(),apf.console.info("Started automatic detection of network state"),this.detectTimer=setInterval(function(){a.isSiteAvailable()},this.interval)},this.stopDetect=function(){clearInterval(this.detectTimer),apf.removeEventListener("error",this.detectErrorHandler),apf.console.info("Stopped automatic detection of network state")},this.goOffline=function(){if(this.onLine===!1)return!1;if(this.dispatchEvent("beforeoffline")===!1)return!1;this.onLine=!1;if(!this.offlineTime){this.offlineTime=(new Date).getTime();try{localStorage[this.namespace+".offlinetime"]=this.offlineTime}catch(a){}}return this.dispatchEvent("afteroffline"),!0},this.goOnline=function(){if(this.onLine===!0)return!1;if(this.dispatchEvent("beforeonline")===!1)return!1;this.onlineTime=(new Date).getTime(),this.onLine=!0,this.offlineTime=null;try{delete localStorage[this.namespace+".offlinetime"]}catch(a){}return this.dispatchEvent("afteronline"),!0}})).call(d.prototype=(new apf.Class).$init())}),define("ext/offline/lib-sync",["require","exports","module"],function(a,b,c){var d=c.exports=function(a){this.namespace=a,this.items=localStorage[this.namespace+".syncitems"]?JSON.parse(localStorage[this.namespace+".syncitems"]):{length:100}};((function(){this.getLength=function(){return this.items&&this.items.length||0},this.clear=function(){if(!this.enabled)return!1;apf.console.info("Clearing all offline and state cache"),this.items={length:0},localStorage[this.namespace+".syncitems"]=JSON.stringify(this.items)},this.add=function(a,b){this.items[a]=b,this.items.length++,localStorage[this.namespace+".syncitems"]=JSON.stringify(this.items)},this.start=function(a){if(this.syncing)return;var b=apf.extend({},this.items),c=this.items.length,d,e,f=this,g=function(d,e){if(!f.syncing)return!1;e||(b.length--,localStorage[f.namespace+".syncitems"]=JSON.stringify(b));if(b.length<1)return f.items={length:0},localStorage[f.namespace+".syncitems"]=JSON.stringify(f.items),-1;var h;for(var i in b){if(i=="length")continue;h=b[i],delete b[i];break}return h===undefined?-1:(a({item:h,progress:parseInt((c-b.length)/c*100,10),position:c-b.length,length:c},g),1)};this.syncing=!0,g(null,!0)},this.stop=function(){this.syncing&&(this.syncing=!1)}})).call(d.prototype)}),define("ext/offline/lib-offlinefs",["require","exports","module"],function(a,b,c){window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder;var d=c.exports=function(){function a(a){this.fs=a,a&&(this.root=a.root)}a.prototype.TEMPORARY=0,a.prototype.PERSISTENT=1,a.prototype.EMPTY=0,a.prototype.LOADING=1,a.prototype.DONE=2,a.prototype.NOT_FOUND_ERR=1,a.prototype.SECURITY_ERR=2,a.prototype.ABORT_ERR=3,a.prototype.NOT_READABLE_ERR=4,a.prototype.ENCODING_ERR=5,a.prototype.NO_MODIFICATION_ALLOWED_ERR=6,a.prototype.INVALID_STATE_ERR=7,a.prototype.SYNTAX_ERR=8,a.prototype.INVALID_MODIFICATION_ERR=9,a.prototype.QUOTA_EXCEEDED_ERR=10,a.prototype.TYPE_MISMATCH_ERR=11,a.prototype.PATH_EXISTS_ERR=12,a.prototype.DIR_SEPARATOR="/",a.prototype.DIR_BLACKLIST=[".","./","..","../","/"],a.prototype.TYPE_FILE="file",a.prototype.TYPE_DIR="dir";var b=function(a,b){function d(){c.dev=0,c.ino=0,c.mode=0,c.nlink=0,c.uid=0,c.gid=0,c.rdev=0,c.blocks=0,c.isDirectory=a.isDirectory,c.isFile=a.isFile,c.isBlockDevice=!1,c.isCharacterDevice=!1,c.isSymbolicLink=!1,c.isFIFO=!1,c.isSocket=!1,b(null,c)}var c={};a.isFile?a.file(function(a){var b=a.lastModifiedDate,e=b.getMonth()+1,f=e<10?"0"+e:e,g=[b.getFullYear(),f,b.getDate()].join("-")+"T"+[b.getHours(),b.getMinutes(),b.getSeconds()].join(":")+"Z";c.mtime=g,c.atime=g,c.ctime=g,c.size=a.fileSize,d()}):a.getMetadata(function(a){var b=a.modificationTime,e=b.getMonth()+1,f=e<10?"0"+e:e,g=[b.getFullYear(),f,b.getDate()].join("-")+"T"+[b.getHours(),b.getMinutes(),b.getSeconds()].join(":")+"Z";c.mtime=g,c.atime=g,c.ctime=g,c.size=0,d()})};return a.prototype.isAvailable=function(){return!!window.requestFileSystem},a.prototype.errorHandler=function(a){var b;switch(a.code){case this.NOT_FOUND_ERR:a.message="The file or directory has not been found";break;case this.SECURITY_ERR:a.message="The file you are attempting to access is unsafe for web access or may be being accessed too many times.";break;case this.ABORT_ERR:a.message="The current operation has been aborted";break;case this.NOT_READABLE_ERR:a.message="The file you are attempting to read is not readable, this may be a permissions issue.";break;case this.ENCODING_ERR:a.message="The data or URL passed is malformed";break;case this.NO_MODIFICATION_ALLOWED_ERR:a.message="The file or directory cannot be modified.";break;case this.INVALID_STATE_ERR:a.message="The file or directory state has changed since the last operation.";break;case this.SYNTAX_ERR:a.message="There is a syntax error with this file operation.";break;case this.INVALID_MODIFICATION_ERR:a.message="Invalid file operation.";break;case this.QUOTA_EXCEEDED_ERR:b="The quota for the filesystem has been exceeded.";break;case this.TYPE_MISMATCH_ERR:a.message="Incorrect file operation on file or directory.";break;case this.PATH_EXISTS_ERR:a.message="This path already exists"}return a},a.prototype.setFileSystem=function(a,b,c){var d=this,e=function(a){d.fs=a,d.root=a.root,c(null,d)},f=function(a){c(d.errorHandler(a))};requestFileSystem(a,b*1024*1024,e,f)},a.prototype.getFileSystem=function(){return this.fs},a.prototype.rename=function(a,b,c){var d=this,e=function(a){c(d.errorHandler(a))},f=function(a,b,d){var f=d||null;a.moveTo(b,f,function(a){c(null,a)},e)};b[b.length-1]==d.DIR_SEPARATOR?d.root.getDirectory(a,{},function(a){var c=d.DIR_BLACKLIST.indexOf(b)!=-1?!1:!0;d.root.getDirectory(b,{create:c},function(b){f(a,b)},e)},function(c){d.root.getFile(a,{},function(a){d.root.getDirectory(b,{},function(b){f(a,b)},e)},e)}):d.root.getFile(a,{},function(a){a.getParent(function(c){f(a,c,b)},e)},e)},a.prototype.truncate=function(a,b,c){var d=this,e=function(a){c(d.errorHandler(a))};a.createWriter(function(d){d.onwriteend=function(b){c(null,a,b)},d.onerror=e,d.truncate(b)})},a.prototype.chmod=function(a,b,c){c()},a.prototype.stat=function(a,c){var d=this,e=function(a){c(d.errorHandler(a))};this.open(a,function(f,g){f&&f.code==d.TYPE_MISMATCH_ERR?d.root.getDirectory(a,{},function(a){b(a,c)},e):f?e(f):b(g,c)})},a.prototype.lstat=a.prototype.stat,a.prototype.fstat=function(a,c){b(a,c)},a.prototype.link=function(a,b,c){c()},a.prototype.symlink=function(a,b,c){c()},a.prototype.readlink=function(a,b){b()},a.prototype.realpath=function(a,b){b()},a.prototype.unlink=function(a,b){var c=this,d=function(a){b(c.errorHandler(a))};c.root.getFile(a,{},function(a){a.remove(b,d)},function(e){e.code==FileError.TYPE_MISMATCH_ERR?c.root.getDirectory(a,{},function(a){a.removeRecursively(b,d)},d):d(e)})},a.prototype.rmdir=a.prototype.unlink,a.prototype.mkdir=function(a,b,c){var d=this;typeof c!="function"&&(c=b);var e=function(a){c(d.errorHandler(a))},f=function(a,b){if(b[0]=="."||b[0]=="")b=b.slice(1);a.getDirectory(b[0],{create:!0},function(a){b.length?f(a,b.slice(1)):c(null,a)},e)};f(this.fs.root,a.split("/"))},a.prototype.readdir=function(a,b){var c=this,d=function(a){b(c.errorHandler(a))},e=function(a){var c=a.createReader(),e=[],f=function(){c.readEntries(function(a){if(!a.length)b(null,e.sort());else{for(var c=0,d=a.length;c<d;c++)a[c].isDirectory?e.push(a[c].fullPath+"/"):e.push(a[c].fullPath);f()}},d)};f()};c.root.getDirectory(a,{},e,d)},a.prototype.close=function(a,b){a=null,b()},a.prototype.open=function(a,b,c,d){var e=this;typeof d!="function"&&(d=c),typeof d!="function"&&(d=b);var f=function(b){b&&b.code==e.TYPE_MISMATCH_ERR&&e.root.getDirectory(a,h,g,function(a){d(e.errorHandler(a))})},g=function(a){d(null,a)},h={};["w","w+","a","a+"].indexOf(b)>-1&&(h.create=!0),e.root.getFile(a,h,g,f)},a.prototype.write=function(a,b,c,d,e,f){var g=this,h;typeof f!="function"&&(f=e),typeof f!="function"&&(f=d),typeof f!="function"&&(f=c);var i=function(a){f(g.errorHandler(a))},h=typeof b=="string"?g.createBlob(b):b,j=function(a){a.onwriteend=function(a){f(null,a.loaded,b)},a.onerror=i,a.write(h)};a.createWriter(j,i)},a.prototype.writeFile=function(a,b,c,d){var e=this;typeof d!="function"&&(d=c);var f=typeof b=="string"?e.createBlob(b):b,g=function(a,b){e.truncate(b,0,function(a){if(a)return d(a);e.write(b,f,null,null,null,function(a,b,c){d(a,c)})})};e.open(a,"w",null,g)},a.prototype.read=function(a,b,c,d,e,f){var g=this,h;typeof f!="function"&&(f=e),typeof f!="function"&&(f=d),typeof f!="function"&&(f=c);var i=function(a){f(g.errorHandler(a))};a.file(function(a){var c=new FileReader;c.onloadend=function(a){b.append(this.result),f(null,b.getBlob().size,b.getBlob())},c.onerror=i,c.readAsArrayBuffer(a)})},a.prototype.readFile=function(a,b,c){var d=this;typeof c!="function"&&(c=b);var e=function(a,b){if(a)return c(a);d.read(b,new BlobBuilder,null,null,null,c)};this.open(a,null,null,e)},a.prototype.createBlob=function(a,b){var c=new BlobBuilder;return c.append(a),b?c.getBlob(b):c.getBlob()},a.prototype.readString=function(a,b,c){var d=new FileReader,e;typeof c!="function"?(c=b,e="UTF-8"):e=b,d.onloadend=function(a){c(null,this.result)},d.onerror=function(a){c(a)},a=d.readAsText(a,e)},a.prototype.readBinaryString=function(a,b){var c=new FileReader;c.onloadend=function(a){b(null,this.result)},c.onerror=function(a){b(a)},c.readAsBinaryString(a)},a.prototype.readArrayBuffer=function(a,b){var c;c=new FileReader,c.onloadend=function(a){b(null,this.result)},c.onerror=function(a){b(a)},c.readAsArrayBuffer(a)},a.prototype.readDataUrl=function(a,b){var c=new FileReader;c.onloadend=function(a){b(null,this.result)},c.onerror=function(a){b(a)},c.readAsDataURL(a)},a}()}),define("ext/offline/lib-offlinedav",["require","exports","module","core/ide","ext/offline/lib-offlinefs"],function(a,b,c){var d=a("core/ide"),e=a("ext/offline/lib-offlinefs"),f=c.exports=function(a,b){var c=this;this.sync=b,this.fs=new e,this.fs.setFileSystem(this.fs.PERSISTENT,1024,function(b,d){b&&console.log(b),c.webfs=d,c.offlinefs=d.fs,c.offlineroot=d.root,c.loaded=!0,a.apply(window,arguments),c.emptyQueue()})};f.isAvailable=function(){return!!window.requestFileSystem},function(){this.available=!0,this.fake=!0,this.$queue=[],this.queue=function(a,b){this.$queue.push([a,b])},this.emptyQueue=function(){var a=this;this.$queue.each(function(b){b[0].apply(a,b[1])}),this.$queue=[]},this.exists=function(a,b){if(!this.loaded)return this.queue(this.exists,arguments);var c=a.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),e=this;this.webfs.open(c,"r",function(a,c){a?b(!1):b(!0)})},this.read=function(a,b){if(!this.loaded)return this.queue(this.read,arguments);var c=a.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),e=this;this.webfs.readFile(c,function(a,c,d){if(a)return e.handleError(b,a);e.webfs.readString(d,function(a,c){if(a)return e.handleError(b,a);b(c,apf.SUCCESS,{})})})},this.writeFile=this.write=function(a,b,c,e){if(!this.loaded)return this.queue(this.write,arguments);var f=a.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),g=this;this.webfs.writeFile(f,b,function(c,f){if(c)return g.handleError(e,c);d.onLine||(g.sync.add(a,{type:"webdav-write",date:(new Date).getTime(),path:a,data:b}),e(b,apf.SUCCESS,{}))})},this.readdir=this.scandir=this.list=function(a,b){if(!this.loaded)return this.queue(this.list,arguments);var c=a.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),e=this,f,g;this.webfs.readdir(c,function(a,c){if(a)return e.handleError(b,a);var f=[],g=0,h=function(a,e){if(a)return;e.isDirectory?f.push('<folder path="'+e.fullPath.replace(new RegExp("^\\/"+d.projectName),d.davPrefix)+'"  type="folder" size="0" name="'+e.name+'" contenttype="" modifieddate="" creationdate="" lockable="false" hidden="false" executable="false" />'):e.isFile&&f.push('<file path="'+e.fullPath.replace(new RegExp("^\\/"+d.projectName),d.davPrefix)+'"  type="file" size="" name="'+e.name+'" contenttype="" modifieddate="" creationdate="" lockable="false" hidden="false" executable="false" />'),g++,g==c.length&&b("<files>"+f.join("\n")+"</files>",apf.SUCCESS,{})};for(var i=0,j=c.length;i<j;i++){var k=c[i];e.webfs.open(k,h)}})},this.rename=this.move=function(a,b,c,e,f){if(!this.loaded)return this.queue(this.move,arguments);var g=a.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),h=b.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),i=this;this.webfs.rename(g,h,function(c,e){if(c)return i.handleError(f,c);d.onLine||(i.sync.add(a,{type:"webdav-move",date:(new Date).getTime(),path:a,data:b}),f("",apf.SUCCESS,{}))})},this.mkdir=function(a,b,c){var e=a.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName);this.webfs.mkdir(e,function(b,e){if(b)return _self.handleError(c,b);d.onLine||(_self.sync.add(a,{type:"webdav-mkdir",date:(new Date).getTime(),path:a,data:null}),c("",apf.SUCCESS,{}))})},this.remove=function(a,b,c){if(!this.loaded)return this.queue(this.remove,arguments);var e=a.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),f=this;this.webfs.unlink(e,function(b){if(b)return f.handleError(c,b);d.onLine||(f.sync.add(a,{type:"webdav-remove",date:(new Date).getTime(),path:a}),c("",apf.SUCCESS,{}))})},this.copy=function(a,b,c,e,f){if(!this.loaded)return this.queue(this.move,arguments);var g=a.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),h=b.replace(new RegExp("^"+d.davPrefix.replace(/\//g,"\\/")),"/"+d.projectName),i=this;this.webfs.copy(g,h,function(c,e){if(c)return i.handleError(f,c);d.onLine||(i.sync.add(a,{type:"webdav-move",date:(new Date).getTime(),path:a,data:b}),f("",apf.SUCCESS,{}))})},this.exec=function(a,b,c){if(!this.loaded)return this.queue(this.exec,arguments);var e=this,f;switch(a){case"create":full_path=b[0]+"/"+b[1],this.write(full_path,"empty_file",null,c);break;case"move":case"mv":case"rename":var g=b[1].split("/");g.pop();var h=g.join("/")+"/"+b[0];this.rename(b[1],h,!1,!1,c);break;case"login":case"authenticate":break;case"logout":break;case"exists":this.exists(b[0],c);break;case"read":this.readFile(b[0],c);break;case"create":full_path=b[0]?b[0]:"",full_path.charAt(full_path.length-1)!="/"&&(full_path+="/"),this.writeFile(full_path+b[1],b[2],b[3]||!1,c);break;case"write":case"store":case"save":this.writeFile(b[0],b[1],b[2]||!1,c);break;case"copy":case"cp":this.copy(b[0],b[1],b[2]||!0,b[3]||!1,c);break;case"rename":var i=b[1].substr(0,b[1].lastIndexOf("/")+1);this.rename(b[1],i+b[0],b[2]||!1,b[3]||!1,c);break;case"move":case"mv":full_path=b[1],full_path.charAt(full_path.length-1)!="/"&&(full_path+="/"),this.rename(b[0],full_path+b[0].substr(b[0].lastIndexOf("/")+1),b[2]||!1,b[3]||!1,c);break;case"remove":case"rmdir":case"rm":this.remove(b[0],b[1]||!1,c);break;case"readdir":case"scandir":d.onLine||this.readdir(b[0],c);break;case"getroot":this.getProperties(this.$rootPath,0,c);break;case"mkdir":full_path=b[0]?b[0]:"",full_path.charAt(full_path.length-1)!="/"&&(full_path+="/"),this.mkdir(full_path+b[1],b[2]||!1,c);break;case"lock":this.lock(b[0],null,null,null,c);break;case"unlock":this.unlock(b[0],c);break;case"report":break;default:throw new Error(apf.formatErrorString(0,null,"Saving/Loading data","Invalid WebDAV method '"+method+"'"))}},this.handleError=function(a,b){a(null,apf.ERROR,b?{message:b.code}:{})}}.call(f.prototype=(new apf.Class).$init())}),define("ext/offline/lib-offlinels",["require","exports","module","core/util","ext/filesystem/filesystem","core/ide"],function(a,b,c){var d=a("core/util"),e=a("ext/filesystem/filesystem"),f=a("core/ide"),g=c.exports=function(a,b,c){this.fs=null,this.sync=b,this.fIdent=c,a()};((function(){this.available=!1,this.fake=!0,this.exists=function(a,b){if(localStorage[this.fIdent]){var c=JSON.parse(localStorage[this.fIdent]);return c[a]?b(!0):b(!1)}},this.read=function(a,b){if(localStorage[this.fIdent]){var c=JSON.parse(localStorage[this.fIdent]);if(c[a])return b(c[a],apf.SUCCESS,{})}this.handleError(b)},this.write=function(a,b,c,d){f.onLine||(this.sync.add(a,{type:"webdav-write",date:e.model.queryValue("//file[@path='"+a+"']/@modifieddate"),path:a,data:b}),d&&d("",apf.SUCCESS,{}))},this.remove=function(a,b,c){return this.handleError(c)},this.copy=function(a,b,c,d,e){return this.handleError(e)},this.move=function(a,b,c,d,e){return this.handleError(e)},this.list=function(a,b){this.handleError(b)},this.exec=function(a,b,c){switch(a){case"create":break;case"mkdir":break;case"login":case"authenticate":case"logout":case"read":case"readdir":case"scandir":case"getroot":case"lock":case"unlock":break;case"exists":case"create":case"write":case"store":case"save":case"copy":case"cp":case"rename":case"move":case"mv":case"remove":case"rmdir":case"rm":case"mkdir":case"report":this.handleError(c)}},this.handleError=function(a){f.onLine||(d.alert("Sorry, you are offline right now and cannot perform this operation"),a(null,apf.ERROR,{}))}})).call(g.prototype=(new apf.Class).$init())}),define("ext/offline/lib-webdav-wrap",["require","exports","module","core/ide","ext/offline/lib-offlinedav","ext/offline/lib-offlinels"],function(a,b,c){var d=a("core/ide"),e=a("ext/offline/lib-offlinedav"),f=a("ext/offline/lib-offlinels"),g=function(a,b,c,d){this.realWebdav=a,this.hasFileSystem=e.isAvailable()&&!1,this.hasFileSystem?this.localWebdav=new e(d,b):this.localWebdav=new f(d,b,c)};((function(){this.available=!0,this.fake=!0,this.exists=function(a,b){d.onLine?this.realWebdav.exists.apply(this.realWebdav,arguments):this.hasFileSystem?this.localWebdav.exists.apply(this.localWebdav,arguments):b(null,apf.OFFLINE,{})},this.read=function(a,b){d.onLine?this.realWebdav.read.apply(this.realWebdav,arguments):this.hasFileSystem?this.localWebdav.read.apply(this.localWebdav,arguments):b(null,apf.OFFLINE,{})},this.writeFile=this.write=function(a,b,c,e){d.onLine&&this.realWebdav.write.apply(this.realWebdav,arguments),this.localWebdav.write.call(this.localWebdav,a,b,c,e)},this.remove=function(a,b,c){d.onLine&&this.realWebdav.remove.apply(this.realWebdav,arguments),this.localWebdav.remove.call(this.localWebdav,a,b,c)},this.copy=function(a,b,c,e,f){d.onLine&&this.realWebdav.copy.apply(this.realWebdav,arguments),this.localWebdav.copy.call(this.localWebdav,a,b,c,e,f)},this.rename=this.move=function(a,b,c,e,f){d.onLine&&this.realWebdav.move.apply(this.realWebdav,arguments),this.localWebdav.move.call(this.localWebdav,a,b,c,e,f)},this.report=function(a,b,c,d){this.realWebdav.report.apply(this.realWebdav,arguments)},this.getProperties=function(a,b,c,d){},this.setProperties=function(a,b,c,d){},this.list=function(a,b){if(d.onLine)this.realWebdav.list.apply(this.realWebdav,arguments);else if(this.hasFileSystem)this.localWebdav.list.apply(this.localWebdav,arguments);else throw new Error("You are currently offline and the local filesystem is unavailable")},this.exec=function(a,b,c){d.onLine&&this.realWebdav.exec.apply(this.realWebdav,arguments),this.localWebdav.exec.call(this.localWebdav,a,b,c)},this.handleError=function(a,b){a(null,apf.ERROR,b?{message:b.code}:{})}})).call(g.prototype=(new apf.AmlElement).$init()),c.exports=g}),define("ext/offline/offline",["require","exports","module","core/ide","core/ext","core/util","ext/offline/lib-offline","ext/offline/lib-sync","ext/filesystem/filesystem","ext/offline/lib-webdav-wrap"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/offline/lib-offline"),h=a("ext/offline/lib-sync"),i=a("ext/filesystem/filesystem"),j=a("ext/offline/lib-webdav-wrap");c.exports=e.register("ext/offline/offline",{dev:"Ajax.org",name:"Offline",alone:!0,type:e.GENERAL,deps:[i],handlers:{},offlineStartup:0,test:function(a){d.testOffline=a?2:1,a?d.socket.socket.connect():d.socket.socket.disconnect()},addHandler:function(a,b){this.handlers[a]=b},init:function(){function m(){localStorage[l]=i.model.data.xml}function n(a){if(!d.offlineFileSystemSupport){var b=tabEditors.getPages(),c={},e=b.length;if(e)for(var f=0;f<e;f++){var g;b[f].$model&&b[f].$model.data&&(g=b[f].$model.data),g&&(c[g.getAttribute("path")]=b[f].$doc.getValue())}try{delete localStorage[k],localStorage[k]=JSON.stringify(c)}catch(a){}}}var a=this,b=this.offline=new g("cloud9",(window.location.pathname+"/$reconnect").replace(/\/\//g,"/")),c=this.sync=new h("cloud9"),e=new Image;e.src=d.staticPrefix+"ext/main/style/images/offline.png",b.dispatchEvent=function(a,b){d.dispatchEvent(a,b)},d.onLine=-1,d.addEventListener("beforeoffline",function(){c.syncing&&c.stop()}),d.addEventListener("afteroffline",function(){stServerConnected.deactivate(),d.onLine=!1,logobar.$ext.className="c9-menu-bar offline",a.bringExtensionsOffline()}),d.addEventListener("beforeonline",function(){if(c.getLength())return c.start(function(c,d){var e=c.item,f=function(){d()<0&&b.goOnline()},g=a.handlers[e.type];g?g(e,f):(self.console&&console.warn("Couldn't find handler for offline type '"+e.type+"'"),f())}),!1}),d.addEventListener("beforeonline",function(){stServerConnected.activate(),d.onLine=!0}),d.addEventListener("afteronline",function(b){logobar.$ext.className="c9-menu-bar",a.bringExtensionsOnline()}),d.addEventListener("socketConnect",function(a){d.send({command:"state",action:"publish"}),dbg.registerAutoAttach()});var k="cloud9.files."+d.workspaceId;d.addEventListener("init.ext/filesystem/filesystem",function(){i.realWebdav||(i.realWebdav=i.webdav);var a=new j(i.realWebdav,c,k,function(){d.offlineFileSystemSupport=a&&a.hasFileSystem});i.webdav=a,davProject=a}),this.addHandler("webdav-write",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.getProperties(a.path,0,function(d){var e=apf.getXml(d),g=new Date(e.firstChild?e.firstChild.getAttribute("modifieddate"):0);g<=new Date(a.date)?c.write(a.path,a.data,null,b):f.confirm("File conflict while syncing","Conflict found in file "+a.path,"Clicking 'OK' will overwrite the online file.<br />Clicking 'Cancel' will save this file as:<br /><br />"+a.path+"_backup",function(){c.write(a.path,a.data,null,b)},function(){c.write(a.path+"_backup",a.data,null,b)})})}),this.addHandler("webdav-create",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.writeFile(a.path,a.data,!1,null,b)}),this.addHandler("webdav-write",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.writeFile(a.path,a.data,!1,null,b)}),this.addHandler("webdav-rm",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.remove(a.path,!1,b)}),this.addHandler("webdav-mkdir",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.mkdir(a.path,!1,b)}),this.addHandler("webdav-rmdir",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.remove(a.path,!1,b)}),this.addHandler("webdav-move",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.move(a.from,a.to,!1,!1,b)}),this.addHandler("webdav-copy",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.copy(a.from,a.to,!0,!1,b)}),this.addHandler("webdav-rename",function(a,b){var c=i.realWebdav||i.webdav;if(c.fake)throw new Error("Found fake webdav, while expecting real one!");c.rename(a.from,a.to,!1,!1,b)});var l="cloud9.filetree."+d.workspaceId;d.addEventListener("afteroffline",function(){i.model.data?m():localStorage[l]&&(i.model.load(localStorage[l]),i.projectName=i.model.queryValue("folder[@root='1']/@name"))}),i.model.addEventListener("update",m),i.model.addEventListener("afterload",m),d.addEventListener("savesettings",n),apf.addEventListener("exit",n),d.addEventListener("socketConnect",function(){b.goOnline(),d.removeEventListener("socketConnect",arguments.callee)}),d.addEventListener("extload",function(){b.start()}),a.offlineStartup&&d.dispatchEvent("afteroffline")},enable:function(){},disable:function(){},destroy:function(){},bringExtensionsOnline:function(){var a=e.extensions;for(var b=0,c=a.length;b<c;b++){var d=a[b];d.offline===!1&&d.enable()}},bringExtensionsOffline:function(){var a=e.extensions;for(var b=0,c=a.length;b<c;b++){var d=a[b];d.offline===!1&&d.disable()}}})}),define("text!ext/stripws/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="On Save, Strip Whitespace" value="[editors/code/@stripws]" skin="checkbox_grey" position="3000" />\n</a:application>\n'}),define("text!ext/testpanel/testpanel.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:window id="winTestPanel" \n      flex     = "1" \n      skin     = "fm-window" \n      title    = "Test Panel" \n      modal    = "false" \n      buttons  = "close" \n      optimize = "true">\n        <a:bar skin="c9-header-bar" top="-30" right="28" height="30">\n            <a:hbox id="barTestTools">\n                <a:button\n                  id       = "btnNewTestType"\n                  caption  = "New"\n                  onclick  = ""\n                  skin     = "c9-toolbarbutton"\n                  class    = "with-arrow"\n                  submenu  = "mnuTestNew" />\n                <a:menu id="mnuTestNew">\n                    \n                </a:menu>\n                \n                <!--a:divider skin="c9-divider-double" /-->\n                \n                <a:splitbutton id="btnTestRun"\n                  caption  = "Run tests"\n                  onclick  = "require(\'ext/testpanel/testpanel\').run(dgTestProject.getSelection());"\n                  submenu  = "mnuRunSettings" \n                  visible  = "{!(stTestRun.active or !dgTestProject.selected)}" />\n            \n                <a:button\n                  icon     = "stop.png"\n                  caption  = "Stop Tests"\n                  skin     = "c9-toolbarbutton"\n                  onclick  = "require(\'ext/testpanel/testpanel\').stop()"\n                  visible  = "{!btnTestRun.visible}"\n                  disabled = "{!stTestRun.active or stTestRun.stopping}" />\n            </a:hbox>\n        </a:bar>\n      \n        <a:button\n          top="-22"\n          skin="header-btn"\n          right="5"\n          icon="panel_settings.png"\n          submenu = "mnuFilter" />\n        <a:menu id="mnuFilter">\n            <a:item type="radio" value="all" selected="true">All</a:item>\n            <a:divider />\n            \n            <a:divider />\n            <a:item type="check" checked="true" onclick="\n                require(\'ext/testpanel/testpanel\').toggleSubmodules(this.value);\n            ">Show Submodules</a:item>\n            <a:item type="check" checked="true" onclick="\n                require(\'ext/testpanel/testpanel\').toggleExpandTests(this.value);\n            ">Auto Expand Tests</a:item>\n            <a:divider />\n            <a:item submenu="mnuAutorunTests">Auto-run Tests</a:item>\n        </a:menu>\n        <a:menu id="mnuAutorunTests">\n            <a:group id="grpAutoRunTests" value="[{require(\'ext/settings/settings\').model}::auto/testpanel/@autorun]" />\n            <a:item group="grpAutoRunTests" type="radio" value="none">None</a:item>\n            <a:divider />\n            <a:item group="grpAutoRunTests" type="radio" value="selection">Selection</a:item>\n            <a:item group="grpAutoRunTests" type="radio" value="pattern" onclick="\n                require(\'ext/testpanel/testpanel\').editAutoRunPattern();\n            ">Pattern</a:item>\n        </a:menu>\n        <a:vbox anchors = "0 0 0 0" id="vboxTestPanel" style="background:#333">\n            <a:model id="mdlTests">\n                <data>\n                    <repo name="Cloud9">\n                    \n                    </repo>\n                </data>\n            </a:model>\n            \n            <a:bar skin="basic" flex="1">\n                <a:datagrid \n                  id        = "dgTestProject"\n                  anchors   = "0 0 0 0"\n                  border    = "0"\n                  options   = "size"\n                  model     = "mdlTests"\n                  each      = "[repo|file|test|assert|error]"\n                  class     = "noscrollbar with-noise"\n                  scrollbar = "sbShared 20 2 2"\n                  multiselect    = "true"\n                  startcollapsed = "true"\n                  contextmenu    = "mnuTestContext"\n                  empty-message  = "No tests yet"\n                  onbeforeremove = "return require(\'core/util\').removeInteractive(this)">\n                    <a:column id="colTestProject" caption="Name" width="60%" tree="1" icon="{require(\'ext/testpanel/testpanel\').getIcon(localName(), [@status], [@type])}"><?lm\n                        if (localName() == "error")\n                            <span style=\'color:red\'>[@name]</span>\n                        else\n                            [@name]\n                    ?></a:column>\n                    <a:column caption="Status" width="41%"><?lm\n                        if ([@status] === \'0\')\n                            <span style=\'color:red\'>\\[[@status-message]\\]</span>\n                        else if ([@status] == \'1\')\n                            <span style=\'color:green\'>\\[PASS{[@status-message] and " [@status-message]"}\\]</span>\n                        else if ([@status] == \'-1\')\n                            <span>\\[{[@status-message].uCaseFirst()}\\]</span>\n                        else\n                            \'\';\n                    ?></a:column>\n                    \n                    <a:insert match="[file]" get="{return require(\'ext/testpanel/testpanel\').parseFile(xmlNode)}" />\n                    <a:remove match="[file]" set="{require(\'ext/filesystem/filesystem\').remove([@path])}"/>\n                    \n                    <a:expanded match="[test|file[test]]" id="expTestRule" />\n                    <a:expanded match="{apf.getChildNumber(%[repo]) == 1}" />\n                </a:datagrid>\n            </a:bar>\n            \n            <!--\n                @todo Edit could be test/assert\n                      Remove could be test and assert\n            -->\n            <a:menu id="mnuTestContext">\n                <a:item match="[test|file|repo[file]]" onclick="require(\'ext/testpanel/testpanel\').run()">Run Tests</a:item>\n                <a:item match="[file]" \n                  onclick="var ide = require(\'core/ide\');ide.dispatchEvent(\'openfile\', {doc: ide.createDocument(dgTestProject.selected)});">Edit</a:item>\n                <a:divider />\n                <a:item match="[file]" onclick="dgTestProject.remove()">Remove</a:item>\n                <a:divider />\n                <a:item match="[file]" onclick="\n                    require(\'ext/tabbehaviors/tabbehaviors\').revealfile(dgTestProject.selected);\n                ">Show in File Tree</a:item>\n            </a:menu>\n        </a:vbox>\n    </a:window>\n</a:application>'}),define("ext/testpanel/testpanel",["require","exports","module","core/ide","core/ext","core/util","ext/panels/panels","text!ext/testpanel/testpanel.xml","ext/filesystem/filesystem","ext/settings/settings"],function(a,b,c){function k(a){if(a.indexOf('"')>-1){var b=[],c=a.split('"');return c.each(function(a){b.push(a==""?"'\"'":'"'+a+'"')}),"concat("+b.join(", ")+")"}return'"'+a+'"'}var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/panels/panels"),h=a("text!ext/testpanel/testpanel.xml"),i=a("ext/filesystem/filesystem"),j=a("ext/settings/settings");c.exports=e.register("ext/testpanel/testpanel",{name:"Test Panel",dev:"Ajax.org",alone:!0,type:e.GENERAL,markup:h,appliedFilter:"all",nodes:[],defaultWidth:290,hook:function(){g.register(this,{position:4e3,caption:"Test","class":"testing"});var a=this;apf.document.documentElement.appendChild(new apf.state({id:"stTestRun"})),apf.document.documentElement.appendChild(new apf.menu({id:"mnuRunSettings"})),d.addEventListener("loadsettings",function(a){a.model.queryValue("auto/testpanel/@autorun")||a.model.setQueryValue("auto/testpanel/@autorun","none")}),d.addEventListener("afterfilesave",function(b){var c=j.model.queryValue("auto/testpanel/@autorun");if(stRunning.active)return;if(c=="none")return;if(c=="selection"){var d=dgTestProject.getSelection();d.length&&a.run(d)}else if(c=="pattern"){var e=(new Function("path",a.getPattern()))(b.node.getAttribute("path"));if(!e||e.dataType!=apf.ARRAY){f.alert("Wrong output from pattern","Wrong output from pattern","Pattern did not generate list of strings");return}var g=[],h;e.forEach(function(a){h=mdlTests.queryNode("//node()[@path="+k(a)+"]"),h&&g.push(h)}),g.length&&a.run(g)}})},init:function(){var a=this;this.panel=winTestPanel,this.nodes.push(winTestPanel),d.dispatchEvent("init.testrunner"),colLeft.appendChild(winTestPanel),mnuFilter.onitemclick=function(b){b.value&&b.relatedNode.type=="radio"&&a.filter(b.value)};var b;apf.addListener(document,"keydown",function(a){b=(a||event).altKey}),apf.addListener(document,"keyup",function(a){b=(a||event).altKey?!1:b}),dgTestProject.addEventListener("afterchoose",function(c){var e=this.selected;if(!e||this.selection.length>1)return;if(b){if(e.tagName!="file"||!d.onLine&&!d.offlineFileSystemSupport)return;d.dispatchEvent("openfile",{doc:d.createDocument(e)})}else{if("file|test|repo".indexOf(e.tagName)==-1||!d.onLine)return;a.run([e])}}),d.addEventListener("afteroffline",function(){btnTestRun.disable(),a.stop(!0)}),d.addEventListener("afteronline",function(){btnTestRun.enable()}),this.submodules=[],i.readFile("/workspace/.git/config",function(b){b.replace(/\[submodule "([^"]*)"\]/g,function(b,c){var d=mdlTests.data.ownerDocument,e=d.createElement("repo");e.setAttribute("name",c),mdlTests.appendXml(e),a.submodules.push(c)})})},getPattern:function(){return j.model.queryValue("auto/testpanel/pattern/text()")||'// Enter any code below that returns the paths of the tests in an array of strings.\n// You have access to the \'path\' variable.\n// Save this file to store the pattern.\nvar tests = [];\nreturn tests.pushUnique(\n    path.replace(/(?:_test)?.js$/, "_test.js"),\n    path.replace(/(?:_Test)?.js$/, "Test.js")\n);'},editAutoRunPattern:function(){var a=apf.getXml("<file />");a.setAttribute("name","Pattern.js"),a.setAttribute("path","/workspace/.c9.test.pattern"),a.setAttribute("changed","1"),a.setAttribute("newfile","1");var b=this.getPattern(),c=d.createDocument(a);c.cachedValue=b,d.dispatchEvent("openfile",{doc:c,node:a}),d.addEventListener("beforefilesave",function(b){if(b.node==a){var e=c.getValue();j.model.setQueryValue("auto/testpanel/pattern/text()",e),a.removeAttribute("changed"),a.removeAttribute("newfile");var f=tabEditors.getPage("/workspace/.c9.test.pattern");return tabEditors.remove(f),d.removeEventListener("beforefilesave",arguments.callee),!1}})},findParent:function(a){var b=this;for(var c=0;c<b.submodules.length;c++)if(a.match(new RegExp("^/workspace/"+b.submodules[c].replace(/\//g,"\\/"))))return mdlTests.queryNode("repo[@name='"+b.submodules[c].replace(/'/g,"\\'")+"']");return mdlTests.queryNode("repo[1]")},filter:function(a){this.appliedFilter=a,dgTestProject.setAttribute("each",a=="all"?"[repo|file|test|assert|error]":"[repo|file[@type='"+a+"']|test|assert|error]")},parseFile:function(a){return d.dispatchEvent("test.expand."+a.getAttribute("type"),{xmlNode:a}),"<file />"},getIcon:function(a,b,c){if(a=="repo")return"folder.png";if(a=="assert"||a=="error"||a=="test"){if(!b||b==-1)return"bullet_blue.png";if(b==5)return"bullet_go.png";if(b==1)return"bullet_green.png";if(b==0)return"exclamation.png"}return a=="error"?"exclamation.png":d.dispatchEvent("test.icon."+c)||"page_white_text.png"},run:function(a){var b=this;if(!a||stTestRun.active)return;mnuRunSettings.hide();var c=function(){stTestRun.deactivate()};a.each(function(a){a.tagName=="test"&&(a=a.parentNode);var b=a.selectNodes(".//file|.//test");for(var c=0;c<b.length;c++)apf.xmldb.removeAttribute(b[c],"status");[".//error",".//assert"].forEach(function(b){var c=a.selectNodes(b);for(var d=0;d<c.length;d++)apf.xmldb.removeNode(c[d])})});var e=[];a.each(function(a){a.tagName=="repo"?e=e.concat(apf.getArrayFromNodelist(a.selectNodes("file"+(b.appliedFilter=="all"?"":"[@type='"+b.appliedFilter+"']")))):a.tagName=="file"?e.push(a):a.tagName=="test"&&e.push(a.parentNode)}),stTestRun.activate();var f=0,g=function(){e[f]?(b.setLog(e[f],"connecting"),d.dispatchEvent("test.run."+e[f].getAttribute("type"),{xmlNode:e[f++],next:g})):c()};g()},stop:function(a){if(!stTestRun.active)return;d.dispatchEvent("test.stop"),stTestRun.setAttribute("stopping",1);var b=this;clearTimeout(this.$stopTimer),this.$stopTimer=setTimeout(function(){d.dispatchEvent("test.hardstop"),b.stopped()},a?0:1e4)},stopped:function(){stTestRun.deactivate(),stTestRun.removeAttribute("stopping"),clearTimeout(this.$stopTimer)},setPass:function(a,b){apf.xmldb.setAttribute(a,"status",1),apf.xmldb.setAttribute(a,"status-message",b||"")},setError:function(a,b){apf.xmldb.setAttribute(a,"status",0),apf.xmldb.setAttribute(a,"status-message",b||"")},setLog:function(a,b){apf.xmldb.setAttribute(a,"status",-1),apf.xmldb.setAttribute(a,"status-message",b||"")},lastExecuteNode:null,setExecute:function(a,b){a&&(apf.xmldb.setAttribute(a,"status",5),apf.xmldb.setAttribute(a,"status-message",b||""),d.dispatchEvent("test.pointer."+apf.queryValue(a,"ancestor-or-self::test/../@type"),{xmlNode:a})),this.lastExecuteNode&&this.lastExecuteNode.getAttribute("status")==5&&(apf.xmldb.setAttribute(this.lastExecuteNode,"status",1),apf.xmldb.setAttribute(this.lastExecuteNode,"status-message","")),this.lastExecuteNode=a},showSubmodules:!0,toggleSubmodules:function(a){this.showSubmodules=a,a?dgTestProject.setAttribute("each","["+dgTestProject.each.replace(/repo\[1\]/,"repo")+"]"):dgTestProject.setAttribute("each","["+dgTestProject.each.replace(/repo/,"repo[1]")+"]")},expandTests:!0,toggleExpandTests:function(a){this.expandTests=a,a?expTestRule.parentNode||dgTestProject.appendChild(expTestRule):expTestRule.parentNode&&dgTestProject.removeChild(expTestRule)},show:function(){if(navbar.current){if(navbar.current==this)return;navbar.current.disable()}g.initPanel(this),this.enable()},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.stop(),this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],g.unregister(this)}})}),define("text!ext/nodeunit/nodeunit.template",[],function(){return'"use strict";\nrequire("./support/paths");\n\nvar assert = require("assert");\n//var module = require("./module");\n\nmodule.exports = {\n    \n    "test untitled 1" : function() {\n        //assert.equal(!true, false);\n    }\n\n};\n\nif (typeof module !== "undefined" && module === require.main) {\n    require("asyncjs").test.testcase(module.exports).exec()\n}'}),define("ext/zen/firmin-all-min",["require","exports","module"],function(a,b,c){FirminCSSMatrix=function(a){this.m11=this.m22=this.m33=this.m44=1,this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0,typeof a=="string"&&this.setMatrixValue(a)},FirminCSSMatrix.displayName="FirminCSSMatrix",FirminCSSMatrix.degreesToRadians=function(a){return a*Math.PI/180},FirminCSSMatrix.determinant2x2=function(a,b,c,d){return a*d-b*c},FirminCSSMatrix.determinant3x3=function(a,b,c,d,e,f,g,h,i){var j=FirminCSSMatrix.determinant2x2;return a*j(e,f,h,i)-d*j(b,c,h,i)+g*j(b,c,e,f)},FirminCSSMatrix.determinant4x4=function(a){var b=FirminCSSMatrix.determinant3x3,c=a.m11,d=a.m21,e=a.m31,f=a.m41,g=a.m12,h=a.m22,i=a.m32,j=a.m42,k=a.m13,l=a.m23,m=a.m33,n=a.m43,o=a.m14,p=a.m24,q=a.m34,r=a.m44;return c*b(h,l,p,i,m,q,j,n,r)-d*b(g,k,o,i,m,q,j,n,r)+e*b(g,k,o,h,l,p,j,n,r)-f*b(g,k,o,h,l,p,i,m,q)},[["m11","a"],["m12","b"],["m21","c"],["m22","d"],["m41","e"],["m42","f"]].forEach(function(a){var b=a[0],c=a[1];Object.defineProperty(FirminCSSMatrix.prototype,c,{set:function(a){this[b]=a},get:function(){return this[b]}})}),FirminCSSMatrix.prototype.isAffine=function(){return this.m13===0&&this.m14===0&&this.m23===0&&this.m24===0&&this.m31===0&&this.m32===0&&this.m33===1&&this.m34===0&&this.m43===0&&this.m44===1},FirminCSSMatrix.prototype.multiply=function(a){var b=this,c=a,d=new FirminCSSMatrix;return d.m11=b.m11*c.m11+b.m12*c.m21+b.m13*c.m31+b.m14*c.m41,d.m12=b.m11*c.m12+b.m12*c.m22+b.m13*c.m32+b.m14*c.m42,d.m13=b.m11*c.m13+b.m12*c.m23+b.m13*c.m33+b.m14*c.m43,d.m14=b.m11*c.m14+b.m12*c.m24+b.m13*c.m34+b.m14*c.m44,d.m21=b.m21*c.m11+b.m22*c.m21+b.m23*c.m31+b.m24*c.m41,d.m22=b.m21*c.m12+b.m22*c.m22+b.m23*c.m32+b.m24*c.m42,d.m23=b.m21*c.m13+b.m22*c.m23+b.m23*c.m33+b.m24*c.m43,d.m24=b.m21*c.m14+b.m22*c.m24+b.m23*c.m34+b.m24*c.m44,d.m31=b.m31*c.m11+b.m32*c.m21+b.m33*c.m31+b.m34*c.m41,d.m32=b.m31*c.m12+b.m32*c.m22+b.m33*c.m32+b.m34*c.m42,d.m33=b.m31*c.m13+b.m32*c.m23+b.m33*c.m33+b.m34*c.m43,d.m34=b.m31*c.m14+b.m32*c.m24+b.m33*c.m34+b.m34*c.m44,d.m41=b.m41*c.m11+b.m42*c.m21+b.m43*c.m31+b.m44*c.m41,d.m42=b.m41*c.m12+b.m42*c.m22+b.m43*c.m32+b.m44*c.m42,d.m43=b.m41*c.m13+b.m42*c.m23+b.m43*c.m33+b.m44*c.m43,d.m44=b.m41*c.m14+b.m42*c.m24+b.m43*c.m34+b.m44*c.m44,d},FirminCSSMatrix.prototype.isIdentityOrTranslation=function(){var a=this;return a.m11===1&&a.m12===0&&a.m13===0&&a.m14===0&&a.m21===0&&a.m22===1&&a.m23===0&&a.m24===0&&a.m31===0&&a.m31===0&&a.m33===1&&a.m34===0&&a.m44===1},FirminCSSMatrix.prototype.adjoint=function(){var a=new FirminCSSMatrix,b=this,c=FirminCSSMatrix.determinant3x3,d=b.m11,e=b.m12,f=b.m13,g=b.m14,h=b.m21,i=b.m22,j=b.m23,k=b.m24,l=b.m31,m=b.m32,n=b.m33,o=b.m34,p=b.m41,q=b.m42,r=b.m43,s=b.m44;return a.m11=c(i,m,q,j,n,r,k,o,s),a.m21=-c(h,l,p,j,n,r,k,o,s),a.m31=c(h,l,p,i,m,q,k,o,s),a.m41=-c(h,l,p,i,m,q,j,n,r),a.m12=-c(e,m,q,f,n,r,g,o,s),a.m22=c(d,l,p,f,n,r,g,o,s),a.m32=-c(d,l,p,e,m,q,g,o,s),a.m42=c(d,l,p,e,m,q,f,n,r),a.m13=c(e,i,q,f,j,r,g,k,s),a.m23=-c(d,h,p,f,j,r,g,k,s),a.m33=c(d,h,p,e,i,q,g,k,s),a.m43=-c(d,h,p,e,i,q,f,j,r),a.m14=-c(e,i,m,f,j,n,g,k,o),a.m24=c(d,h,l,f,j,n,g,k,o),a.m34=-c(d,h,l,e,i,m,g,k,o),a.m44=c(d,h,l,e,i,m,f,j,n),a},FirminCSSMatrix.prototype.inverse=function(){var a,b,c,d,e;if(this.isIdentityOrTranslation()){a=new FirminCSSMatrix;if(this.m41!==0||this.m42!==0||this.m43!==0)a.m41=-this.m41,a.m42=-this.m42,a.m43=-this.m43;return a}c=this.adjoint(),b=FirminCSSMatrix.determinant4x4(this);if(Math.abs(b)<1e-8)return null;for(d=1;d<5;d++)for(e=1;e<5;e++)c["m"+d+e]/=b;return c},FirminCSSMatrix.prototype.rotate=function(a,b,c){var d=FirminCSSMatrix.degreesToRadians;if(typeof a!="number"||isNaN(a))a=0;(typeof b!="number"||isNaN(b))&&(typeof c!="number"||isNaN(c))&&(c=a,a=0,b=0);if(typeof b!="number"||isNaN(b))b=0;if(typeof c!="number"||isNaN(c))c=0;a=d(a),b=d(b),c=d(c);var e=new FirminCSSMatrix,f=new FirminCSSMatrix,g=new FirminCSSMatrix,h,i,j;return c/=2,h=Math.sin(c),i=Math.cos(c),j=h*h,g.m11=g.m22=1-2*j,g.m12=g.m21=2*h*i,g.m21*=-1,b/=2,h=Math.sin(b),i=Math.cos(b),j=h*h,f.m11=f.m33=1-2*j,f.m13=f.m31=2*h*i,f.m13*=-1,a/=2,h=Math.sin(a),i=Math.cos(a),j=h*h,e.m22=e.m33=1-2*j,e.m23=e.m32=2*h*i,e.m32*=-1,g.multiply(f).multiply(e).multiply(this)},FirminCSSMatrix.prototype.rotateAxisAngle=function(a,b,c,d){if(typeof a!="number"||isNaN(a))a=0;if(typeof b!="number"||isNaN(b))b=0;if(typeof c!="number"||isNaN(c))c=0;if(typeof d!="number"||isNaN(d))d=0;a===0&&b===0&&c===0&&(c=1);var e=new FirminCSSMatrix,f=Math.sqrt(a*a+b*b+c*c),g,h,i,j,k,l,m;return d=(FirminCSSMatrix.degreesToRadians(d)||0)/2,g=Math.cos(d),h=Math.sin(d),i=h*h,f===0?(a=0,b=0,c=1):f!==1&&(a/=f,b/=f,c/=f),a===1&&b===0&&c===0?(e.m22=e.m33=1-2*i,e.m23=e.m32=2*g*h,e.m32*=-1):a===0&&b===1&&c===0?(e.m11=e.m33=1-2*i,e.m13=e.m31=2*g*h,e.m13*=-1):a===0&&b===0&&c===1?(e.m11=e.m22=1-2*i,e.m12=e.m21=2*g*h,e.m21*=-1):(j=h*g,k=a*a,l=b*b,m=c*c,e.m11=1-2*(l+m)*i,e.m12=2*(a*b*i+c*j),e.m13=2*(a*c*i-b*j),e.m21=2*(b*a*i-c*j),e.m22=1-2*(m+k)*i,e.m23=2*(b*c*i+a*j),e.m31=2*(c*a*i+b*j),e.m32=2*(c*b*i-a*j),e.m33=1-2*(k+l)*i),this.multiply(e)},FirminCSSMatrix.prototype.scale=function(a,b,c){var d=new FirminCSSMatrix;if(typeof a!="number"||isNaN(a))a=1;if(typeof b!="number"||isNaN(b))b=a;if(typeof c!="number"||isNaN(c))c=1;return d.m11=a,d.m22=b,d.m33=c,this.multiply(d)},FirminCSSMatrix.prototype.translate=function(a,b,c){var d=new FirminCSSMatrix;if(typeof a!="number"||isNaN(a))a=0;if(typeof b!="number"||isNaN(b))b=0;if(typeof c!="number"||isNaN(c))c=0;return d.m41=a,d.m42=b,d.m43=c,this.multiply(d)},FirminCSSMatrix.prototype.setMatrixValue=function(a){a=a.trim();var b=a.match(/^matrix(3d)?\(\s*(.+)\s*\)$/),c,d,e,f,g,h;if(!b)return;c=!!b[1],d=b[2].split(/\s*,\s*/),e=d.length,f=new Array(e);if(c&&e!==16||!c&&e!==6)return;for(g=0;g<e;g++){h=d[g];if(h.match(/^-?\d+(\.\d+)?$/))f[g]=parseFloat(h);else return}for(g=0;g<e;g++)point=c?"m"+(Math.floor(g/4)+1)+(g%4+1):String.fromCharCode(g+97),this[point]=f[g]},FirminCSSMatrix.prototype.toString=function(){var a=this,b,c;return this.isAffine()?(c="matrix(",b=["a","b","c","d","e","f"]):(c="matrix3d(",b=["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"]),c+b.map(function(b){return a[b].toFixed(6)}).join(", ")+")"},Firmin=typeof Firmin=="undefined"?{}:Firmin,Firmin.CSSMatrix=typeof WebKitCSSMatrix=="object"?WebKitCSSMatrix:FirminCSSMatrix,Firmin.prefix=function(){var a=document.createElement("div"),b=["webkit","Moz","O"],c=3,d;while(c--){d=b[c],a.style.cssText="-"+d.toLowerCase()+"-transition-property:opacity;";if(typeof a.style[d+"TransitionProperty"]!="undefined")return d}return d}(),Firmin.matrixToString=function(a){if(Firmin.prefix!="Moz")return a.toString();var b="matrix(",c=["a","b","c","d","e","f"];return b+c.map(function(b,c){var e=a[b].toFixed(6);return c>3&&(e+="px"),e}).join(", ")+")"},Firmin.angleToRadians=function(a,b){var c;switch(a){case"rad":return b;case"deg":c=Math.PI/180;break;case"grad":c=Math.PI/200;break;case"turn":c=Math.PI*2}return c*b},Firmin.pointToVector=function(a){return a?a instanceof Array?a:[a.x,a.y,a.z]:null},Firmin.NUMBER_PATTERN=/^-?\d+(\.\d+)?/,Firmin.parseNumeric=function(a,b){return function(c){var d,g;return typeof c=="number"?[b,c]:typeof c!="string"?null:(g=(c.match(Firmin.NUMBER_PATTERN)||[""])[0],g.length===c.length?d=b:d=a.filter(function(a){return c.substr(g.length)===a})[0],d&&g?[d,parseFloat(g)]:null)}},Firmin.parseAngle=Firmin.parseNumeric(["deg","grad","rad","turn"],"deg"),Firmin.parseTime=Firmin.parseNumeric(["s","ms"],"s"),Firmin.Transform=function(a,b){this.ctm=a||new Firmin.CSSMatrix,this.centre=Firmin.pointToVector(b)||["50%","50%",0]},Firmin.Transform.methods=["translate","translate3d","translateX","translateY","translateZ","scale","scale3d","scaleX","scaleY","scaleZ","rotate","rotate3d","rotateX","rotateY","rotateZ","skew","skewX","skewY","matrix","matrix3d"],Firmin.Transform.parse=function(a,b){var c=Firmin.Transform.methods,d={},e=null,f,g;typeof b=="object"&&b.transform&&(f=b.transform.ctm,g=b.transform.centre,e=new Firmin.Transform(f,g));for(property in a)c.indexOf(property)!==-1?(e=e||new Firmin.Transform,e[property](a[property])):property==="origin"?(e=e||new Firmin.Transform,e[property](a[property])):d[property]=a[property];return{result:e,remainder:d}},Firmin.Transform.prototype.build=function(a){var b=this.centre;return Firmin.prefix=="O"&&(b=b.slice(0,2)),a=a||{},a[Firmin.prefix+"Transform"]=Firmin.matrixToString(this.ctm),a[Firmin.prefix+"TransformOrigin"]=b.join(" "),a},Firmin.Transform.prototype.matrix=Firmin.Transform.prototype.matrix3d=function(a){var b=new Firmin.CSSMatrix;a.length===6?(b.a=a[0],b.b=a[1],b.c=a[2],b.d=a[3],b.e=a[4],b.f=a[5]):(b.m11=a[0],b.m12=a[1],b.m13=a[2],b.m14=a[3],b.m21=a[4],b.m22=a[5],b.m23=a[6],b.m24=a[7],b.m31=a[8],b.m32=a[9],b.m33=a[10],b.m34=a[11],b.m41=a[12],b.m42=a[13],b.m43=a[14],b.m44=a[15]),this.ctm=this.ctm.multiply(b)},Firmin.Transform.prototype.translate=Firmin.Transform.prototype.translate3d=function(a){var b,c,d,e;typeof a=="number"||typeof a=="string"?(c=d=parseInt(a,10)||0,e=0):(b=Firmin.pointToVector(a),c=b[0],d=b[1],e=b[2],typeof c!="number"&&(c=parseInt(c,10)||0),typeof d!="number"&&(d=parseInt(d,10)||0),typeof e!="number"&&(e=parseInt(e,10)||0)),this.ctm=this.ctm.translate(c,d,e)},Firmin.Transform.prototype.translateX=function(a){this.translate([a,0])},Firmin.Transform.prototype.translateY=function(a){this.translate([0,a])},Firmin.Transform.prototype.translateZ=function(a){this.translate3d([0,0,a])},Firmin.Transform.prototype.scale=Firmin.Transform.prototype.scale3d=function(a){var b,c,d,e;typeof a=="number"?(c=d=a,e=1):(b=Firmin.pointToVector(a),c=b[0],d=b[1],e=b[2]),this.ctm=this.ctm.scale(c,d,e)},Firmin.Transform.prototype.scaleX=function(a){this.scale3d([a,1,1])},Firmin.Transform.prototype.scaleY=function(a){this.scale3d([1,a,1])},Firmin.Transform.prototype.scaleZ=function(a){this.scale3d([1,1,a])},Firmin.Transform.prototype.skew=function(a){var b=Firmin.parseAngle,c=Firmin.angleToRadians,d,e;typeof a=="number"||typeof a=="string"?d=e=c.apply(null,b(a))||0:(a=Firmin.pointToVector(a),d=c.apply(null,b(a[0]))||0,e=c.apply(null,b(a[1]))||0),this.matrix([1,Math.tan(e),Math.tan(d),1,0,0])},Firmin.Transform.prototype.skewX=function(a){this.skew([a,0])},Firmin.Transform.prototype.skewY=function(a){this.skew([0,a])},Firmin.Transform.prototype.rotate=function(a){a=Firmin.angleToRadians.apply(null,Firmin.parseAngle(a))*(180/Math.PI),this.ctm=this.ctm.rotate(0,0,a)},Firmin.Transform.prototype.rotate3d=function(a){var b=a.x,c=a.y,d=a.z,e=a.angle;typeof b!="number"&&(b=0),typeof c!="number"&&(c=0),typeof d!="number"&&(d=0),e=Firmin.angleToRadians.apply(null,Firmin.parseAngle(e))*(180/Math.PI),this.ctm=this.ctm.rotateAxisAngle(b,c,d,e)},Firmin.Transform.prototype.rotateX=function(a){this.rotate3d({x:1,angle:a})},Firmin.Transform.prototype.rotateY=function(a){this.rotate3d({y:1,angle:a})},Firmin.Transform.prototype.rotateZ=function(a){this.rotate3d({z:1,angle:a})},Firmin.Transform.prototype.origin=function(a){var b=Firmin.pointToVector(a),c,d,e;if(v0=b[0])this.centre[0]=v0;if(c=b[1])this.centre[1]=c;if(d=b[2])this.centre[2]=d},Firmin.Transition=function(){this.properties=["all"],this.duration=["ms",0],this.delay=["ms",0],this.timingFunction="ease"},Firmin.Transition.methods=["properties","timingFunction","duration","delay"],Firmin.Transition.parse=function(a,b){var c=Firmin.Transition.methods,d={},e=new Firmin.Transition,f,g;for(p in a)c.indexOf(p)!==-1?p==="properties"&&typeof p=="string"?e[p]=[a[p]]:p==="timingFunction"&&typeof a[p]!="string"?e[p]="cubic-bezier("+a[p].join(",")+")":p==="duration"?(f=Firmin.parseTime(a[p]),f&&(e[p]=f)):p==="delay"?(g=Firmin.parseTime(a[p]),g&&(e[p]=g)):e[p]=a[p]:d[p]=a[p];return{result:e,remainder:d}},Firmin.Transition.prototype.hasDuration=function(){return this.duration[1]!==0},Firmin.Transition.prototype.getDuration=function(){var a=this.duration;return a[0]==="s"?a[1]*1e3:a[1]},Firmin.Transition.prototype.hasDelay=function(){return this.delay[1]!==0},Firmin.Transition.prototype.getDelay=function(){var a=this.delay;return a[0]==="s"?a[1]*1e3:a[1]},Firmin.Transition.prototype.build=function(a){return a=a||{},typeof this.properties=="string"?a[Firmin.prefix+"TransitionProperty"]=this.properties:a[Firmin.prefix+"TransitionProperty"]=this.properties.join(", "),a[Firmin.prefix+"TransitionDuration"]=this.duration[1]+this.duration[0],a[Firmin.prefix+"TransitionDelay"]=this.delay[1]+this.delay[0],this.timingFunction&&(a[Firmin.prefix+"TransitionTimingFunction"]=this.timingFunction),a},Firmin.Animation=function(a,b){var c,d;typeof a.callback=="function"&&(this.callback=a.callback),delete a.callback,c=Firmin.Transition.parse(a,b),this.transition=c.result,d=Firmin.Transform.parse(c.remainder,b),this.transform=d.result,this.style=d.remainder},Firmin.Animation.prototype.hasDuration=function(){return this.transition&&this.transition.hasDuration()},Firmin.Animation.prototype.getTotalDuration=function(){return this.transition?this.transition.getDuration()+this.transition.getDelay():0},Firmin.Animation.prototype.exec=function(a){var b=this.style,c;this.transition&&(b=this.transition.build(b)),this.transform&&(b=this.transform.build(b));for(c in b)a.style[c]=b[c]},Firmin.Animated=function(a){var b=this;this.element=a,this.operations=[],this.callback=null},Firmin.Animated.prototype.run=function(){var a=this.operations.shift(),b=this;return a?(setTimeout(function(){a.exec(b.element)},10),setTimeout(function(){b.fireCallback(),b.run()},a.getTotalDuration()||10),this.callback=a.callback,this):(this.fired=!0,this)},Firmin.Animated.prototype.fireCallback=function(){var a=this.callback;typeof a=="function"&&a.call(null,this.element)},Firmin.Animated.prototype.__animate__=function(a){return this.operations.push(a),this.__lastAnim=a,this.fired&&(this.fired=!1,this.run()),this},Firmin.Animated.prototype.animate=function(a,b,c){return a.duration=b,a.callback=c,this.__animate__(new Firmin.Animation(a))},Firmin.Animated.prototype.animateR=function(a,b,c){return a.duration=b,a.callback=c,this.__animate__(new Firmin.Animation(a,this.__lastAnim))},Firmin.animate=function(a,b,c,d){var e=new Firmin.Animated(a);return e.animate(b,c,d),e.run()},Firmin.animateR=function(a,b,c,d){var e=new Firmin.Animated(a),f=new Firmin.Animation({}),g=new Firmin.Transform,h=new Firmin.CSSMatrix,i=a.style[Firmin.prefix+"Transform"];return h.setMatrixValue(i),g.ctm=h,f.transform=g,e.__lastAnim=f,e.animateR(b,c,d),e.run()},Firmin.Transform.methods.forEach(function(a){var b=a+"R";Firmin[a]=function(b,c,d,e){var g={};return g[a]=c,Firmin.animate(b,g,d,e)},Firmin[b]=function(b,c,d,e){var g={};return g[a]=c,Firmin.animateR(b,g,d,e)},Firmin.Animated.prototype[a]=function(b,c,d){var e={};return e[a]=b,this.animate(e,c,d)},Firmin.Animated.prototype[b]=function(b,c,d){var e={};return e[a]=b,this.animateR(e,c,d)}})}),define("text!ext/zen/zen.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:button id="btnZenFullscreen"\n      visible = "true"\n      width   = "26"\n      height  = "26"\n      top     = "13"\n      right   = "11"\n      class = "notfull"\n      skinset = "zen"\n      skin = "zenbutton"\n      onclick = "require(\'ext/zen/zen\').toggleFullscreenZen(event)"\n      onmouseover = "require(\'ext/zen/zen\').fadeZenButtonIn()"\n      onmouseout = "require(\'ext/zen/zen\').fadeZenButtonOut()"\n     />\n\n</a:application>\n'}),define("text!ext/zen/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:button name="zenbutton">\n        <a:style><![CDATA[\n            .zenbutton {\n                height             : 23px;\n                overflow           : hidden;\n                cursor             : default;\n                position           : relative;\n                -moz-user-select   : none;\n                -khtml-user-select : none;\n                user-select        : none;\n                line-height        : 17px;\n                opacity : 0.01;\n            }\n            \n            .zenbutton.full {\n                background : url(images/zen-buttons.png) -1px -28px no-repeat;\n            }\n\n            .zenbutton.full.zenbuttonOver {\n                background : url(images/zen-buttons.png) -28px -28px no-repeat;\n            }\n\n            .zenbutton.notfull {\n                background : url(images/zen-buttons.png) -1px -1px no-repeat;\n            }\n\n            .zenbutton.notfull.zenbuttonOver {\n                background : url(images/zen-buttons.png) -28px -1px no-repeat;\n            }\n            \n            #animateZen {\n                z-index: 90014;\n                position: absolute;\n                -webkit-box-shadow: 0px 0px 25px #000;\n                -moz-box-shadow: 0px 0px 25px #000;\n                overflow: hidden;\n            }\n            \n            #animateZenPosition {\n                position: absolute;\n            }\n            \n            #zenHandleRight, #zenHandleLeft {\n                position: absolute;\n                z-index: 90014;\n                width: 5px;\n                background: transparent;\n                cursor: ew-resize;\n                opacity: 0;\n            }\n            \n            #zenHandleLeft {\n                background-image: linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -o-linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -moz-linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -webkit-linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -ms-linear-gradient(right , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n            }\n            \n            #zenHandleRight {\n                background-image: linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -o-linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -moz-linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -webkit-linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n                background-image: -ms-linear-gradient(left , rgb(153,153,153) 0%, rgb(204,204,204) 50%);\n            }\n            \n            .vbZen {\n                opacity: 0;\n                z-index: 90013;\n                background: url(images/zenbg.png);\n                padding: 0 80px;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main background="." minwidth="20">\n                <div class="zenbutton">\n                 </div>\n            </a:main>\n        </a:presentation>\n    </a:button>\n</a:skin>'}),define("ext/language/marker",["require","exports","module","ace/range","ace/anchor"],function(a,b,c){var d=a("ace/range").Range,e=a("ace/anchor").Anchor;c.exports={disabledMarkerTypes:{},hook:function(a,b){var c=this;b.on("markers",function(b){c.addMarkers(b,a.editor)})},removeMarkers:function(a){var b=a.getMarkers(!1);for(var c in b)b[c].clazz.indexOf("language_highlight_")===0&&a.removeMarker(c);for(var d=0;d<a.markerAnchors.length;d++)a.markerAnchors[d].detach();a.markerAnchors=[]},addMarkers:function(a,b){var c=this,f=a.data,g=b.session;g.markerAnchors||(g.markerAnchors=[]),this.removeMarkers(b.session),g.languageAnnos=[],f.forEach(function(a){function k(c){f&&g.removeMarker(f),j.row=b.row;if(a.pos.sc!==undefined&&a.pos.ec!==undefined){var e=d.fromPoints(b.getPosition(),{row:b.row+i,column:b.column+h});f=g.addMarker(e,"language_highlight_"+(a.type?a.type:"default"))}c&&g.setAnnotations(g.languageAnnos)}if(c.disabledMarkerTypes[a.type])return;var b=new e(g.getDocument(),a.pos.sl,a.pos.sc||0);g.markerAnchors.push(b);var f,h=a.pos.ec-a.pos.sc,i=a.pos.el-a.pos.sl,j={guttertext:a.message,type:a.type==="error"?"error":"warning",text:a.message};k(),b.on("change",function(){k(!0)}),a.message&&g.languageAnnos.push(j)}),g.setAnnotations(g.languageAnnos)},disableMarkerType:function(a){this.disabledMarkerTypes[a]=!0;var b=ceEditor.$editor.session,c=b.getMarkers(!1);for(var d in c)c[d].clazz==="language_highlight_"+a&&b.removeMarker(d)},enableMarkerType:function(a){this.disabledMarkerTypes[a]=!1},onChange:function(a,b){var c=b.data.range,d=b.data.action.substring(0,6)!=="remove",e=b.data.text,f=e&&e.search(/[^a-zA-Z0-9\$_]/)===-1;if(!d){var g=a.getMarkers(!1),h=!1;for(var i in g){var j=g[i];if(j.clazz.indexOf("language_highlight_")===0)if(c.contains(j.range.start.row,j.range.start.column))a.removeMarker(i),h=!0;else if(f&&j.range.contains(c.start.row,c.start.column)){h=!0;var k=e.length;j.range.end.column-=k}}if(!h)return;for(var l=0;l<a.markerAnchors.length;l++){var m=a.markerAnchors[l];c.contains(m.row,m.column)&&m.detach()}for(var l=0;l<a.languageAnnos.length;l++){var n=a.languageAnnos[l];c.contains(n.row,1)&&(a.languageAnnos.splice(l,1),l--)}a.setAnnotations(a.languageAnnos)}else{var g=a.getMarkers(!1);if(!f)return;var h=!1;for(var i in g){var j=g[i];if(j.clazz.indexOf("language_highlight_")===0&&j.range.contains(c.start.row,c.start.column)){h=!0;var k=e.length;j.range.end.column+=k}}}h&&a._dispatchEvent("changeBackMarker")}}}),define("text!ext/language/liveinspect.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:bar id="winLiveInspect"\n      modal     = "false" \n      center    = "false"\n      width     = "450"\n      height    = "200"\n      visible   = "false"\n      skinset   = "inlinedg" \n      skin      = "bar-liveinspect"\n      >\n      <a:vbox anchors="0 0 0 0"           >\n          <a:datagrid id="dgLiveInspect"\n            flex       = "1"\n            border     = "0 0 0 0"\n            options    = "size|move"\n            class      = "noscrollbar"\n            scrollbar  = "sbShared 20 2 2"\n            prerender  = "false"\n            caching    = "false"\n            empty-message   = "Loading..."\n            loading-message = "Calculating...">\n              <a:actions />\n              <a:each match="[item|globals]" sort="[@name]">\n                  <a:insert match="[item[@children]]" get="{adbg.loadObjects(dbg, %[.])}" />\n                  <a:expanded match="[node()[@expand]]" />\n                  <a:column caption="Property" value="{[@name] || \'Globals\'}" width="120" icon="debugger/genericvariable_obj.gif" tree="true" />\n                  <a:column caption="Value" value="{apf.escapeXML([@value])}" width="100%" />\n                  <a:column caption="Type" value="[@type]" width="80"/>\n              </a:each>\n          </a:datagrid>\n      </a:vbox>\n    </a:bar>\n</a:application>'}),define("text!ext/language/liveinspect.skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:bar name="bar-liveinspect">\n        <a:style><![CDATA[\n            .bar-liveinspect {\n                z-index: 9015;\n                border                : 1px solid rgba(0,0,0,0.31);\n                padding               : 5px 4px 4px;\n                -webkit-box-shadow: rgba(0, 0, 0, 0.308594) 0px 0px 4px 1px;\n                -moz-box-shadow: rgba(0, 0, 0, 0.308594) 0px 0px 4px 1px;\n                box-shadow: rgba(0, 0, 0, 0.308594) 0px 0px 4px 1px;\n            }\n            \n            /*.bar-liveinspect .datagridFocus .records .selected, .bar-liveinspect .datagridFocus .records .selected span {\n                background-image: linear-gradient(bottom, #494949 0%, #646469 100%);\n                background-image: -o-linear-gradient(bottom, #494949 0%, #646469 100%);\n                background-image: -moz-linear-gradient(bottom, #494949 0%, #646469 100%);\n                background-image: -webkit-linear-gradient(bottom, #494949 0%, #646469 100%);\n                background-image: -ms-linear-gradient(bottom, #494949 0%, #646469 100%);\n                \n                background-image: -webkit-gradient(\n                    linear,\n                \tleft bottom,\n                \tleft top,\n                \tcolor-stop(0, #494949),\n                \tcolor-stop(1, #646469)\n                );\n            }*/\n            \n            .bar-liveinspect .datagridFocus .records .selected span u {\n                border-left: 1px solid #808080;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="bar bar-liveinspect">\n                    \n                </div>            \n            </a:main>\n        </a:presentation>\n    </a:bar>\n</a:skin>'}),define("text!ext/language/language.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:skin id="language_skin"\n      src       = "{require(\'ext/language/language\').skin}"/>\n\n    <a:bar id="barCompleterCont" skinset="language_skin" skin="codecomplete" width="300" visible="false">\n        <a:hbox anchors="0 0 0 0">\n            <a:text id="txtCompleter" skin="codecomplete_text" flex="1" />\n            <a:scrollbar\n              for      = "txtCompleter"\n              id       = "sbCompleter"\n              margin   = "2"\n              skin     = "sbios"\n              width    = "7"\n              overflow2 = "auto"/>\n          </a:hbox>\n    </a:bar>\n    \n</a:application>\n'}),define("text!ext/language/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:bar name="codecomplete">\n        <a:style><![CDATA[\n            .code_complete_bar {\n                overflow: hidden;\n                position : relative;\n                color: #000;\n                background-color: #f5f5f5;\n                margin: 5px;\n                -webkit-box-shadow: 0 3px 7px rgba(0,0,0,.4);\n                box-shadow: 0 3px 7px rgba(0,0,0,.4);\n            }\n            \n            .code_complete_bar {\n                border: 1px solid #b7b7b7;\n                -webkit-border-bottom-right-radius: 5px;\n                border-bottom-right-radius: 5px;\n                -webkit-border-bottom-left-radius: 5px;\n                border-bottom-left-radius: 5px;\n            }\n\n            /* Need to do this to get the radius working in Chrome, FF works fine without */\n            .code_complete_bar div.code_complete_text {\n                -webkit-border-bottom-left-radius: 5px;\n                border-bottom-left-radius: 5px;\n            }\n\n            .code_complete_bar > div {\n                -webkit-border-bottom-left-radius: 5px;\n                border-bottom-left-radius: 5px;\n            }\n\n            .cc_complete_option {\n                padding: 1px 5px;\n                cursor: default;\n            }\n            \n            .cc_complete_option:active {\n                color: #000;\n            }\n\n            .cc_complete_option_selected {\n                background: #b9d0e4;\n                color: #333;\n                padding: 1px 5px;\n                cursor: default;\n            }\n            \n            .cc_complete_option_selected:last-child, .cc_complete_option:last-child {\n                -webkit-border-bottom-left-radius: 5px;\n                border-bottom-left-radius: 5px;\n            }\n            \n            .code_complete_bar span.meta {\n                color: #555;\n                float: right;\n                padding-left: 5px;\n                padding-right: 7px;\n            }\n        ]]></a:style>\n        <a:style condition="{apf.isWebkit}"><![CDATA[\n            .code_complete_bar > div > div {\n                margin-right: -11px;\n            }\n        ]]></a:style>\n        <a:style condition="{apf.isGecko}"><![CDATA[\n            .code_complete_bar > div > div > div {\n                margin-right: -11px;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="code_complete_bar ace_editor" />\n            </a:main>\n        </a:presentation>\n    </a:bar>\n    \n    <a:text name="codecomplete_text">\n        <a:style><![CDATA[\n            .code_complete_text .cc_complete_option_selected {\n                text-shadow: none;\n            }\n            \n            .code_complete_text {\n                color: #333;\n                position: relative;\n                overflow: hidden;\n                border: 1px solid transparent;\n                border-top-color: #fff;\n            }\n            \n            .code_complete_text u {\n                text-decoration: none;\n                color: blue;\n                text-shadow: none;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main container=".">\n                <div class="code_complete_text"/>\n            </a:main>\n        </a:presentation>\n    </a:text>\n</a:skin>\n'}),define("text!ext/language/language.css",[],function(){return".language_highlight_default {\n    position: absolute;\n    border-bottom: solid 1px green;\n    z-index: 2000;\n}\n\n.language_highlight_error {\n    position: absolute;\n    border-bottom: solid 1px rgb(224, 4, 4);\n    z-index: 2000;\n}\n\n.language_highlight_warning {\n    position: absolute;\n    border-bottom: solid 1px #DDC50F;\n    z-index: 2000;\n}\n\n\n.language_highlight_unused {\n    position: absolute;\n    padding: 0;\n    border-bottom: solid 1px black;\n    margin: -.6em 0 0 0;\n    z-index: 2000;\n}\n\n.ace_dark .language_highlight_unused {\n    border-bottom: solid 1px white;\n}\n\n.language_highlight_occurrence_main {\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    border: solid 1px #999;\n    opacity: 0.5;\n    z-index: 2000;\n}\n\n.ace_dark .language_highlight_occurrence_main {\n    border: solid 1px #ccc;\n}\n\n.language_highlight_occurrence_other {\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    border: solid 1px #999;\n    opacity: 0.5;\n    z-index: 2000;\n}\n\n.ace_dark .language_highlight_occurrence_other {\n    border: solid 1px #ccc;\n}\n\n.language_rename_main {\n    background-color: #FFF4C9;\n    position: absolute;\n    border: solid 1px #777;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    z-index: 2001;\n}\n\n.ace_dark .language_rename_main {\n    background-color: #555;\n    border: solid 1px #777;\n}\n\n.language_rename_other {\n    background-color: #FFF4C9;\n    border: solid 1px #666;\n    position: absolute;\n    box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    -webkit-box-sizing: border-box;\n    opacity: 0.7;\n    z-index: 2001;\n}\n\n.ace_dark .language_rename_other {\n    background-color: #444;\n    border: solid 1px #888;\n}\n"}),define("text!ext/language/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Enable JSHint Rules"\n        checked="{[language/@jshint] != \'\' ? [language/@jshint] : \'true\'}"\n        value="[language/@jshint]" onclick="require(\'ext/language/language\').setJSHint()" skin="checkbox_grey" position="1000"/>\n    <a:checkbox class="underlined" label="Highlight Variable Instances"\n        checked="{[language/@instanceHighlight] != \'\' ? [language/@instanceHighlight] : \'true\'}"\n        value="[language/@instanceHighlight]" onclick="require(\'ext/language/language\').setInstanceHighlight()" skin="checkbox_grey" position="2000"/>\n    <a:checkbox class="underlined" label="Mark Undeclared Variables"\n        checked="{[language/@undeclaredVars] != \'\' ? [language/@undeclaredVars] : \'true\'}"\n        value="[language/@undeclaredVars]" onclick="require(\'ext/language/language\').setUndeclaredVars()" skin="checkbox_grey" position="3000"/>\n    <a:checkbox class="underlined" label="Mark Unused Function Arguments"\n        checked="{[language/@unusedFunctionArgs] != \'\' ? [language/@unusedFunctionArgs] : \'true\'}"\n        value="[language/@unusedFunctionArgs]" onclick="require(\'ext/language/language\').setUnusedFunctionArgs()" skin="checkbox_grey" position="4000"/>\n</a:application>\n'}),"use strict",define("ext/vim/maps/aliases",["require","exports","module"],function(a,b,c){c.exports={x:{operator:{"char":"d",count:1},motion:{"char":"l",count:1}},"shift-x":{operator:{"char":"d",count:1},motion:{"char":"h",count:1}},"shift-d":{operator:{"char":"d",count:1},motion:{"char":"$",count:1}},"shift-c":{operator:{"char":"c",count:1},motion:{"char":"$",count:1}},s:{operator:{"char":"c",count:1},motion:{"char":"l",count:1}},"shift-s":{operator:{"char":"c",count:1},motion:{"char":"l",count:1}}}}),define("ext/vim/registers",["require","exports","module"],function(a,b,c){"use strict",c.exports={_default:{text:"",isLine:!1}}}),define("ext/vim/cli",["require","exports","module","ext/save/save"],function(a,b,c){var d,e=c.exports={w:function(b,c){d||(d=a("ext/save/save"));var e=tabEditors.getPage();if(!e)return;var f=b.session.getLength();if(c.argv.length===2){var g=("/workspace/"+c.argv[1]).replace(/\/+/,"/");e.$model.data.setAttribute("path",g),d.saveas(e,function(){console.log(g+" [New] "+f+"L, ##C written")})}else d.quicksave(null,function(){console.log(e.name+" "+f+"L, ##C written")})}};e.write=e.w}),define("text!ext/vim/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox position="9000" class="underlined" label="Vim Mode" value="[editors/code/@vimmode]" skin="checkbox_grey" onclick="require(\'ext/vim/vim\').toggle()" />\n</a:application>\n'}),"use strict",define("ext/vim/maps/util",["require","exports","module","ext/vim/registers","core/ide"],function(a,b,c){var d=a("ext/vim/registers"),e=a("core/ide");c.exports={onVisualMode:!1,onVisualLineMode:!1,currentMode:"normal",insertMode:function(a){var b=this;e.dispatchEvent("vim.changeMode",{mode:"insert"}),b.currentMode="insert",a.unsetStyle("insert-mode");var c=document.getElementsByClassName("ace_cursor")[0];c&&c.removeAttribute("style"),a.setOverwrite(!1),a.keyBinding.$data.buffer="",a.keyBinding.$data.state="insertMode",b.onVisualMode=!1,b.onVisualLineMode=!1,b.onInsertReplaySequence?(a.commands.macro=b.onInsertReplaySequence,a.commands.replay(a),b.onInsertReplaySequence=null,b.normalMode(a)):a.commands.recording||a.commands.toggleRecording()},normalMode:function(a){this.currentMode="normal",e.dispatchEvent("vim.changeMode",{mode:"normal"}),a.setStyle("normal-mode"),a.clearSelection();var b=document.getElementsByClassName("ace_cursor")[0];b&&(b.style.display=null,b.style.backgroundColor="red",b.style.opacity=".5",b.style.border="0");var c;return a.getOverwrite()||(c=a.getCursorPosition(),c.column>0&&a.navigateLeft()),a.setOverwrite(!0),a.keyBinding.$data.buffer="",a.keyBinding.$data.state="start",this.onVisualMode=!1,this.onVisualLineMode=!1,a.commands.recording?(a.commands.toggleRecording(),a.commands.macro):[]},getRightNthChar:function(a,b,c,d){var e=a.getSession().getLine(b.row),f=e.substr(b.column+1).split(c);return d<f.length?f.slice(0,d).join(c).length:0},getLeftNthChar:function(a,b,c,d){var e=a.getSession().getLine(b.row),f=e.substr(0,b.column).split(c);return d<f.length?f.slice(-1*d).join(c).length+2:0},toRealChar:function(a){return a.length===1?a:/^shift-./.test(a)?a[a.length-1].toUpperCase():""},copyLine:function(a){var b=a.getCursorPosition();a.selection.clearSelection(),a.moveCursorTo(b.row,b.column),a.selection.selectLine(),d._default.isLine=!0,d._default.text=a.getCopyText().replace(/\n$/,""),a.selection.clearSelection(),a.moveCursorTo(b.row,b.column)}}}),"use strict",define("ext/vim/maps/motions",["require","exports","module","ext/vim/maps/util"],function(a,b,c){var d=a("ext/vim/maps/util"),e=function(a,b){var c=a.renderer.getScrollTopRow(),d=a.getCursorPosition().row,e=d-c;b&&b.call(a),a.renderer.scrollToRow(a.getCursorPosition().row-e)};c.exports={w:{nav:function(a){a.navigateWordRight()},sel:function(a){a.selection.selectWordRight()}},b:{nav:function(a){a.navigateWordLeft()},sel:function(a){a.selection.selectWordLeft()}},l:{nav:function(a){a.navigateRight()},sel:function(a){var b=a.getCursorPosition(),c=b.column,d=a.session.getLine(b.row).length;d&&c!==d&&a.selection.selectRight()}},h:{nav:function(a){var b=a.getCursorPosition();b.column>0&&a.navigateLeft()},sel:function(a){var b=a.getCursorPosition();b.column>0&&a.selection.selectLeft()}},k:{nav:function(a){a.navigateUp()},sel:function(a){a.selection.selectUp()}},j:{nav:function(a){a.navigateDown()},sel:function(a){a.selection.selectDown()}},i:{param:!0,sel:function(a,b,c,d){switch(d){case"w":a.selection.selectWord()}}},a:{param:!0,sel:function(a,b,c,d){switch(d){case"w":a.selection.selectAWord()}}},f:{param:!0,nav:function(a,b,c,e){c=parseInt(c,10)||1;var f=a,g=f.getCursorPosition(),h=d.getRightNthChar(a,g,e,c);typeof h=="number"&&(f.selection.clearSelection(),f.moveCursorTo(g.row,h+g.column+1))},sel:function(a,b,c,e){c=parseInt(c,10)||1;var f=a,g=f.getCursorPosition(),h=d.getRightNthChar(a,g,e,c);typeof h=="number"&&f.moveCursorTo(g.row,h+g.column+1)}},"shift-f":{param:!0,nav:function(a,b,c,e){c=parseInt(c,10)||1;var f=a,g=f.getCursorPosition(),h=d.getLeftNthChar(a,g,e,c);typeof h=="number"&&(f.selection.clearSelection(),f.moveCursorTo(g.row,g.column-h+1))},sel:function(a,b,c,e){c=parseInt(c,10)||1;var f=a,g=f.getCursorPosition(),h=d.getLeftNthChar(a,g,e,c);typeof h=="number"&&f.moveCursorTo(g.row,g.column-h+1)}},t:{param:!0,nav:function(a,b,c,e){c=parseInt(c,10)||1;var f=a,g=f.getCursorPosition(),h=d.getRightNthChar(a,g,e,c);typeof h=="number"&&(f.selection.clearSelection(),f.moveCursorTo(g.row,h+g.column))},sel:function(a,b,c,e){c=parseInt(c,10)||1;var f=a,g=f.getCursorPosition(),h=d.getRightNthChar(a,g,e,c);typeof h=="number"&&f.moveCursorTo(g.row,h+g.column)}},"^":{nav:function(a){a.navigateLineStart()},sel:function(a){a.selection.selectLineStart()}},$:{nav:function(a){a.navigateLineEnd()},sel:function(a){a.selection.selectLineEnd()}},0:{nav:function(a){var b=a;b.navigateTo(b.selection.selectionLead.row,0)},sel:function(a){var b=a;b.selectTo(b.selection.selectionLead.row,0)}},"shift-g":{nav:function(a,b,c,d){c=parseInt(c,10),!c&&c!==0&&(c=a.session.getLength()),a.gotoLine(c)},sel:function(a,b,c,d){c=parseInt(c,10),!c&&c!==0&&(c=a.session.getLength()),a.selection.selectTo(c,0)}},"ctrl-d":{nav:function(a,b,c,d){a.selection.clearSelection(),e(a,a.gotoPageDown)},sel:function(a,b,c,d){e(a,a.selectPageDown)}},"ctrl-u":{nav:function(a,b,c,d){a.selection.clearSelection(),e(a,a.gotoPageUp)},sel:function(a,b,c,d){e(a,a.selectPageUp)}},g:{param:!0,nav:function(a,b,c,d){switch(d){case"m":console.log("Middle line");break;case"e":console.log("End of prev word");break;case"g":a.gotoLine(c||0)}},sel:function(a,b,c,d){switch(d){case"m":console.log("Middle line");break;case"e":console.log("End of prev word");break;case"g":a.selection.selectTo(c||0,0)}}},o:{nav:function(a,b,c,e){c=c||1;var f="";while(0<c--)f+="\n";f.length&&(a.navigateLineEnd(),a.insert(f),d.insertMode(a))}},"shift-o":{nav:function(a,b,c,e){var f=a.getCursorPosition().row;c=c||1;var g="";while(0<c--)g+="\n";g.length&&(f>0?(a.navigateUp(),a.navigateLineEnd(),a.insert(g)):(a.session.insert({row:0,column:0},g),a.navigateUp()),d.insertMode(a))}},"%":{nav:function(a,b,c,d){var e=a.getCursorPosition(),f=a.session.findMatchingBracket({row:e.row,column:e.column+1});f&&a.moveCursorTo(f.row,f.column)}}},c.exports.backspace=c.exports.left=c.exports.h,c.exports.right=c.exports.l,c.exports.up=c.exports.k,c.exports.down=c.exports.j,c.exports.pagedown=c.exports["ctrl-d"],c.exports.pageup=c.exports["ctrl-u"]}),define("ext/vim/maps/operators",["require","exports","module","ext/vim/maps/util","ext/vim/registers"],function(a,b,c){"use strict";var d=a("ext/vim/maps/util"),e=a("ext/vim/registers");c.exports={d:{selFn:function(a,b,c,f){e._default.text=a.getCopyText(),e._default.isLine=d.onVisualLineMode,d.onVisualLineMode?a.removeLines():a.session.remove(b),d.normalMode(a)},fn:function(a,b,c,d){c=parseInt(c||1,10);switch(d){case"d":e._default.text="",e._default.isLine=!0;for(var f=0;f<c;f++){a.selection.selectLine(),e._default.text+=a.getCopyText();var g=a.getSelectionRange();a.session.remove(g),a.selection.clearSelection()}e._default.text=e._default.text.replace(/\n$/,"");break;default:b&&(a.selection.setSelectionRange(b),e._default.text=a.getCopyText(),e._default.isLine=!1,a.session.remove(b),a.selection.clearSelection())}}},c:{selFn:function(a,b,c,e){a.session.remove(b),d.insertMode(a)},fn:function(a,b,c,e){c=parseInt(c||1,10);switch(e){case"c":for(var f=0;f<c;f++)a.removeLines(),d.insertMode(a);break;default:b&&(a.session.remove(b),d.insertMode(a))}}},y:{selFn:function(a,b,c,f){e._default.text=a.getCopyText(),e._default.isLine=d.onVisualLineMode,a.selection.clearSelection(),d.normalMode(a)},fn:function(a,b,c,d){c=parseInt(c||1,10);switch(d){case"y":var f=a.getCursorPosition();a.selection.selectLine();for(var g=0;g<c-1;g++)a.selection.moveCursorDown();e._default.text=a.getCopyText().replace(/\n$/,""),a.selection.clearSelection(),e._default.isLine=!0,a.moveCursorToPosition(f);break;default:if(b){var f=a.getCursorPosition();a.selection.setSelectionRange(b),e._default.text=a.getCopyText(),e._default.isLine=!1,a.selection.clearSelection(),a.moveCursorTo(f.row,f.column)}}}},">":{selFn:function(a,b,c,e){c=parseInt(c||1,10);for(var f=0;f<c;f++)a.indent();d.normalMode(a)},fn:function(a,b,c,d){c=parseInt(c||1,10);switch(d){case">":var e=a.getCursorPosition();a.selection.selectLine();for(var f=0;f<c-1;f++)a.selection.moveCursorDown();a.indent(),a.selection.clearSelection(),a.moveCursorToPosition(e),a.navigateLineEnd(),a.navigateLineStart()}}},"<":{selFn:function(a,b,c,e){c=parseInt(c||1,10);for(var f=0;f<c;f++)a.blockOutdent();d.normalMode(a)},fn:function(a,b,c,d){c=parseInt(c||1,10);switch(d){case"<":var e=a.getCursorPosition();a.selection.selectLine();for(var f=0;f<c-1;f++)a.selection.moveCursorDown();a.blockOutdent(),a.selection.clearSelection(),a.moveCursorToPosition(e),a.navigateLineEnd(),a.navigateLineStart()}}}}}),define("ext/vim/commands",["require","exports","module","ext/vim/maps/util","ext/vim/maps/motions","ext/vim/maps/operators","ext/vim/maps/aliases","ext/vim/registers"],function(a,b,c){function s(a){r.previous={action:{action:{fn:a}}}}"use strict";var d=a("ext/vim/maps/util"),e=a("ext/vim/maps/motions"),f=a("ext/vim/maps/operators"),g=a("ext/vim/maps/aliases"),h=a("ext/vim/registers"),i=1,j=2,k=3,l=4,m=8;b.searchStore={current:"",options:{needle:"",backwards:!1,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!1}};var n=function(b,c,d){c=parseInt(c,10);while(0<c--)b.apply(this,d)},o=function(b){return b.toUpperCase()===b?b.toLowerCase():b.toUpperCase()},p=function(a){setTimeout(function(){var b=a.getCursorPosition().row,c=a.renderer.layerConfig.firstRow,d=a.renderer.layerConfig.lastRow-b,e=b-c;d>=0&&d<m?a.scrollToRow(c+(m-d)):e>=0&&e<m&&a.scrollToRow(c-(m-e))},20)},q={z:{param:!0,fn:function(a,b,c,d){switch(d){case"z":a.centerSelection();break;case"t":a.scrollToRow(a.getCursorPosition().row)}}},r:{param:!0,fn:function(a,b,c,e){e=d.toRealChar(e),e&&e.length&&(n(function(){a.insert(e)},c||1),a.navigateLeft())}},"shift-`":{fn:function(a,b,c){n(function(){var b=a.getCursorPosition(),c=a.session.getLine(b.row),d=c[b.column];a.insert(o(d))},c||1)}},"*":{fn:function(a,b,c,d){a.selection.selectWord(),a.findNext(),p(a);var e=a.selection.getCursor();b=a.session.getWordRange(e.row,e.column),a.selection.setSelectionRange(b,!0)}},"#":{fn:function(a,b,c,d){a.selection.selectWord(),a.findPrevious(),p(a);var e=a.selection.getCursor();b=a.session.getWordRange(e.row,e.column),a.selection.setSelectionRange(b,!0)}},n:{fn:function(a,b,c,d){var e=a.getLastSearchOptions();e.backwards=!1,a.findNext(e),p(a),a.selection.clearSelection()}},"shift-n":{fn:function(a,b,c,d){var e=a.getLastSearchOptions();e.backwards=!0,a.navigateWordLeft(),a.findPrevious(e),p(a),a.selection.clearSelection()}},v:{fn:function(a,b,c,e){a.selection.selectRight(),d.onVisualMode=!0,d.onVisualLineMode=!1;var f=document.getElementsByClassName("ace_cursor")[0];f.style.display="none"}},"shift-v":{fn:function(a,b,c,e){d.onVisualLineMode=!0;var f=a.getCursorPosition().row;a.selection.clearSelection(),a.selection.moveCursorTo(f,0),a.selection.selectLineEnd(),a.selection.visualLineStart=f}},"shift-y":{fn:function(a,b,c,e){d.copyLine(a)}},p:{fn:function(a,b,c,d){var e=h._default;a.setOverwrite(!1);if(e.isLine){var f=a.getCursorPosition(),g=e.text.split("\n");a.session.getDocument().insertLines(f.row+1,g),a.moveCursorTo(f.row+1,0)}else a.navigateRight(),a.insert(e.text),a.navigateLeft();a.setOverwrite(!0),a.selection.clearSelection()}},"shift-p":{fn:function(a,b,c,d){var e=h._default;a.setOverwrite(!1);if(e.isLine){var f=a.getCursorPosition(),g=e.text.split("\n");a.session.getDocument().insertLines(f.row,g),a.moveCursorTo(f.row,0)}else a.insert(e.text);a.setOverwrite(!0),a.selection.clearSelection()}},"shift-j":{fn:function(a,b,c,d){var e=a.getCursorPosition();if(a.session.getLength()===e.row+1)return;var f=a.session.getLine(e.row+1),g=/^\s*(.*)$/.exec(f)[1];a.navigateDown(),a.removeLines(),a.session.getLength()>a.getCursorPosition().row+1&&a.navigateUp(),a.navigateLineEnd(),a.insert(" "+(g||"")),a.moveCursorTo(e.row,e.column)}},u:{fn:function(a,b,c,d){c=parseInt(c||1,10);for(var e=0;e<c;e++)a.undo();a.selection.clearSelection()}},"ctrl-r":{fn:function(a,b,c,d){c=parseInt(c||1,10);for(var e=0;e<c;e++)a.redo();a.selection.clearSelection()}},":":{fn:function(a,b,c,d){a.blur(),txtConsoleInput.focus(),txtConsoleInput.setValue(":")}},"/":{fn:function(a,b,c,d){a.blur(),txtConsoleInput.focus(),txtConsoleInput.setValue("/")}},".":{fn:function(a,b,c,e){d.onInsertReplaySequence=r.lastInsertCommands;var f=r.previous;f&&r.exec(a,f.action,f.param)}}},r=b.inputBuffer={accepting:[i,j,k,l],currentCmd:null,currentCount:"",operator:null,motion:null,lastInsertCommands:[],push:function(a,b,c){b&&b.length>1&&!b[b.length-1].match(/[A-za-z]/)&&c&&(b=c),this.idle=!1;var d=this.waitingForParam;if(d)this.exec(a,d,b);else if(b==="0"&&!this.currentCount.length||!b.match(/^\d+$/)||!this.isAccepting(i))if(!this.operator&&this.isAccepting(j)&&f[b])this.operator={"char":b,count:this.getCount()},this.currentCmd=j,this.accepting=[i,k,l],this.exec(a,{operator:this.operator});else if(e[b]&&this.isAccepting(k)){this.currentCmd=k;var h={operator:this.operator,motion:{"char":b,count:this.getCount()}};e[b].param?this.waitForParam(h):this.exec(a,h)}else if(g[b]&&this.isAccepting(k))g[b].operator.count=this.getCount(),this.exec(a,g[b]);else if(q[b]&&this.isAccepting(l)){var m={action:{fn:q[b].fn,count:this.getCount()}};q[b].param?this.waitForParam(m):this.exec(a,m)}else this.operator?this.exec(a,{operator:this.operator},b):this.reset();else this.currentCount+=b,this.currentCmd=i,this.accepting=[i,j,k,l]},waitForParam:function(a){this.waitingForParam=a},getCount:function(){var a=this.currentCount;return this.currentCount="",a},exec:function(a,b,c){var g=b.motion,h=b.operator,i=b.action;h&&(this.previous={action:b,param:c});if(h&&!a.selection.isEmpty()){f[h.char].selFn&&(f[h.char].selFn(a,a.getSelectionRange(),h.count,c),this.reset());return}if(!g&&!i&&h&&c)f[h.char].fn(a,null,h.count,c),this.reset();else if(g){var j=function(b){b&&typeof b=="function"&&(g.count?n(b,g.count,[a,null,g.count,c]):b(a,null,g.count,c))},k=e[g.char],l=k.sel;h?l&&n(function(){j(k.sel),f[h.char].fn(a,a.getSelectionRange(),h.count,c)},h.count||1):(d.onVisualMode||d.onVisualLineMode)&&l?j(k.sel):j(k.nav),this.reset()}else i&&(i.fn(a,a.getSelectionRange(),i.count,c),this.reset());t()},isAccepting:function(a){return this.accepting.indexOf(a)!==-1},reset:function(){this.operator=null,this.motion=null,this.currentCount="",this.accepting=[i,j,k,l],this.idle=!0,this.waitingForParam=null}};b.commands={start:{exec:function u(a){d.insertMode(a),s(u)}},startBeginning:{exec:function v(a){a.navigateLineStart(),d.insertMode(a),s(v)}},stop:{exec:function(b){r.reset(),d.onVisualMode=!1,d.onVisualLineMode=!1,r.lastInsertCommands=d.normalMode(b)}},append:{exec:function w(a){var b=a.getCursorPosition(),c=a.session.getLine(b.row).length;c&&a.navigateRight(),d.insertMode(a),s(w)}},appendEnd:{exec:function x(a){a.navigateLineEnd(),d.insertMode(a),s(x)}}};var t=b.onCursorMove=function(){var a=ceEditor.$editor;if(d.currentMode==="insert"||t.running)return;if(!ceEditor.$editor.selection.isEmpty()){t.running=!0;if(d.onVisualLineMode){var b=a.selection.visualLineStart,c=a.getCursorPosition().row;if(b<=c){var e=a.session.getLine(c);a.selection.clearSelection(),a.selection.moveCursorTo(b,0),a.selection.selectTo(c,e.length)}else{var e=a.session.getLine(b);a.selection.clearSelection(),a.selection.moveCursorTo(b,e.length),a.selection.selectTo(c,0)}}t.running=!1;return}t.running=!0;var f=a.getCursorPosition(),g=a.session.getLine(f.row).length;g&&f.column===g&&a.navigateLeft(),t.running=!1}}),define("text!ext/guidedtour/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n    <a:window name="guidetool">\n        <a:style><![CDATA[\n            .guidetool {\n                position : relative;\n                overflow : visible;\n                z-index  : 10000;\n                box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.25);\n                -moz-border-radius    : 8px;\n                -webkit-border-radius : 8px;\n                border-radius         : 8px;\n                -webkit-box-shadow: 0 1px 5px 1px #000000;\n                -moz-box-shadow: 0 1px 5px 1px #000000;\n                box-shadow: 0 1px 5px 1px #000000;\n            }\n            .guidetool .gt-header {\n                display : none;\n            }\n            .guidetool .gt-content {\n                background : url(images/tour-info-bg.png) repeat 0 0;\n                border : 1px solid #000101;\n                -webkit-box-shadow: inset 0px 1px 0px 0px #343434;\n                -moz-box-shadow: inset 0px 1px 0px 0px #343434;\n                box-shadow: inset 0px 1px 0px 0px #343434;\n                -moz-border-radius    : 8px;\n                -webkit-border-radius : 8px;\n                border-radius         : 8px;\n                padding: 15px 15px;\n                min-height: 25px;\n            }\n            .guidetool .gt-content .text {\n                color: #cee57f;\n                background : url(images/tour-info-bg.png) repeat 0 0;\n            }\n            .guidetool .gt-arrow {\n                position: absolute;\n                width: 25px;\n                height: 25px;\n                background : url(images/arrow.png) no-repeat 0 0;\n            }\n            .guidetool.top .gt-arrow {\n                left: 50%;\n                height: 17px;\n                bottom: -16px;\n                background-position : 0 -42px;\n            }\n            .guidetool.bottom .gt-arrow {\n                left: 50%;\n                top: -15px;\n                height: 17px;\n                background-position : 0 -25px;\n            }\n            .guidetool.left .gt-arrow {\n                right: -24px;    \n                top: 37%;\n                background-position : 0 -59px;\n            }\n            \n            .guidetool.right .gt-arrow {\n                left: -24px;\t\n                top: 43%;\n                background-position : 0 0;\n            }\n            \n            .wn_cp_content .btnIcon .lbl span {\n                width: 40px;\n            }\n            \n            .tgDialog {\n                z-index: 99999;\n            }\n            .tgDialog, .guidetool {\n                z-index: 999999;\n            }\n             \n            .tgDialog > .bk-header {\n                padding-bottom: 10px;\n            }\n                \n            .tgDesc {\n            }\n             \n            .tgDesc a {\n                color: #20800a;\n                text-decoration: none;\n            }\n\n            .tgControlButton {\n                width: 85px;\n            }\n            \n            .tgPlayButton {\n                width: 40px;\n            }\n            \n            .tgPlayButton .caption {\n                height: 15px;\n                background: url(images/tg_button_play.png) no-repeat 14px 4px;\n            }\n            \n            .tgBackButton .caption {\n                height: 15px;\n                background: url(images/tg_button_back.png) no-repeat 20px -21px;\n            }\n            \n            .tgForwardButton .caption {\n                height: 15px;\n                background: url(images/tg_button_forward.png) no-repeat 27px 5px;\n            }\n        ]]></a:style>\n        <a:style condition="apf.isGecko"><![CDATA[\n            .tgDesc {\n                height: 130px;\n            }\n        ]]></a:style>\n        <a:presentation>\n            <a:main\n              collapsed-height = "30"\n              minheight        = "30"\n              minwidth         = "60"\n              container        = "div[2]"\n              drag             = "div[2]"\n              title            = "div[1]/div[1]/text()"\n              icon             = "div[1]/div[1]/div[1]"\n              buttons          = "div[1]/div[1]/div[2]">\n                <div class="guidetool">\n                    <div class="gt-header">\n                        <div class="hcontent">-<div class="icon"></div><div class="buttons"></div></div>\n                        <div class="right"></div>\n                    </div>\n                    <div class="gt-content"> </div>\n                    <div class="gt-arrow"></div>\n                </div>\n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n        </a:presentation>\n    </a:window>\n    <a:modalwindow name="win-controls">\n        <a:style><![CDATA[\n            .win-controls {\n                position : relative;\n                overflow : hidden;\n                z-index  : 10000;\n                \n                -moz-border-radius    : 6px 6px 6px 6px;\n                -webkit-border-radius : 6px 6px 6px 6px;\n                border-radius         : 6px 6px 6px 6px;\n                \n                -webkit-box-shadow: 0 2px 10px 1px #000000;\n                -moz-box-shadow: 0 2px 10px 1px #000000;\n                box-shadow: 0 2px 10px 1px #000000;\n                border: 1px solid #000101;\n                background: url(images/controls-bg.png) repeat-x 0 0;\n            }\n\n            .win-controls .wc-container {\n                position:absolute;\n                overflow:visible;\n                left : 0;\n                top  : 0;\n                right : 0;\n                bottom : 0;\n                z-index: 1;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n            <a:main\n              collapsed-height = "26"\n              minheight        = "50"\n              minwidth         = "50"\n              container        = "div[1]"\n              title            = "div[1]/text()">\n                <div class="win-controls">\n                    <div class="wc-container"> </div>\n                </div>\n            </a:main>\n            <a:button>\n                <div/>\n            </a:button>\n        </a:presentation>\n    </a:modalwindow>\n</a:skin>'}),define("text!ext/guidedtour/guidedtour.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">      \n    <a:window id = "winTourGuide"\n      title   = "Guided Tour"\n      center  = "true"\n      modal   = "true"\n      buttons = "close"\n      kbclose = "true"\n      width   = "360"\n      skin    = "bk-window"\n      class   = "relative">\n        <a:vbox padding="10" edge="15">\n            <a:text id="winTourDesc" class="tgDesc modal_text"/>\n        </a:vbox>\n        <a:hbox padding="10" pack="end" edge="10 10 10 20" align="center">\n            <a:button id="winTourButtonDone" \n              default = "2"  \n              class   = "btn-green" \n              skin    = "btn-default-css3"\n              visible = "false"\n              onclick = "winTourGuide.hide();" >Done</a:button>\n            <a:button id="winTourButtonClose" \n              default = "2"  \n              skin    = "btn-default-simple" \n              onclick = "winTourGuide.hide();" >Cancel</a:button>\n            <a:button id="winTourButtonStart" \n              default = "2" \n              class   = "btn-green" \n              skin    = "btn-default-css3" \n              onclick = "require(\'ext/guidedtour/guidedtour\').startTour();">Let\'s start!</a:button>\n        </a:hbox>\n    </a:window>\n    <a:window id = "tourControlsDialog"\n      title   = ""\n      center  = "true"\n      modal   = "false"\n      kbclose = "false"\n      width   = "295"\n      zindex  = "99999"\n      height  = "58"\n      skinset = "guidedtour"\n      skin    = "win-controls"\n      class   = "tgDialog">\n        <a:vbox>\n            <a:hbox padding="10" pack="center" edge="16 15 10" align="center">\n                <!-- Play pause etc -->\n                <a:button id = "btnTourStepBack"\n                  class    = "tgControlButton tgBackButton"\n                  skin     = "btn-default-css3"\n                  width    = "75"\n                  height   = "25"\n                  disabled = "true"\n                  tooltip  = "Go Back"\n                  onclick  = "require(\'ext/guidedtour/guidedtour\').stepBack();"/>\n                <a:button id = "btnTourPlay"\n                  class   = "btn-green tgPlayButton"\n                  tooltip = "Play"\n                  width   = "40"\n                  height  = "25"\n                  skin    = "btn-default-css3"\n                  onclick = "require(\'ext/guidedtour/guidedtour\').togglePlay();" />\n                <a:button id = "btnTourStepForward"\n                  class   = "tgControlButton tgForwardButton"\n                  skin    = "btn-default-css3"\n                  tooltip = "Go Forward"\n                  width   = "75"\n                  height  = "25" \n                  onclick = "require(\'ext/guidedtour/guidedtour\').stepForward();" />\n                <a:divider skin="c9-divider" />\n                <a:button onclick="tourControlsDialog.hide();require(\'ext/guidedtour/guidedtour\').closeTG()" skin="btn-default-simple">Quit</a:button>\n            </a:hbox>\n        </a:vbox>\n    </a:window>\n        \n    <a:window id = "winTourText"\n      title     = ""\n      center    = "false"\n      modal     = "false"\n      buttons   = ""\n      kbclose   = "false"\n      width     = "160"\n      skinset   = "guidedtour"\n      skin      = "guidetool"\n      zindex    = "999999"\n      draggable = "false">\n        <a:text id="textTourDesc" flex="1" />     \n    </a:window>\n</a:application>'}),define("text!ext/guidedtour/hello-world-script.txt",[],function(){return"var http = require('http');\nhttp.createServer(function (req, res) {\n   res.writeHead(200, {'Content-Type': 'text/plain'});\n   res.end('Hello World\\n');\n}).listen(process.env.PORT);\nconsole.log('Server running');"}),define("text!ext/quickstart/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml">\n<a:window name="qsImage">\n        <a:style><![CDATA[\n            .qsProjectBar {\n                position:absolute;\n                width: 167px;\n                height: 117px;\n                background: url(images/your_project_bar.png) no-repeat 0 0;\n                z-index  : 999999;\n            }\n            \n            .qsMenuBar {\n                position:absolute;\n                width: 167px;\n                height: 117px;\n                background: url(images/your_top_menu.png) no-repeat 0 0;\n                z-index  : 999999;\n            }\n            \n            .qsToolbar {\n                position:absolute;\n                width: 167px;\n                height: 117px;\n                background: url(images/your_toolbar.png) no-repeat 0 0;\n                z-index  : 999999;\n            }\n            \n             .qsCLI {\n                position:absolute;\n                width: 167px;\n                height: 200px;\n                background: url(images/your_command_line.png) no-repeat 0 0;\n                z-index  : 999999;\n            }\n        ]]></a:style>\n    \n        <a:presentation>\n        <a:main\n              collapsed-height = "30"\n              minheight        = "30"\n              minwidth         = "60"\n              container        = "div[2]"\n              drag             = "div[2]"\n              title            = "div[1]/div[1]/text()">\n                <div>\n                    <div>\n                    </div>\n                    <div class="image"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:window>\n    \n    <a:window name="win-quickstart">\n        <a:style><![CDATA[\n            .win-quickstart {\n                position : relative;\n                overflow : visible;\n                z-index  : 999999;\n                border-radius: 4px;\n            }\n            \n            .win-quickstart .header {\n                background: #000;\n                position: relative;\n                border-bottom: 1px solid #7d7d7d;\n                font-size: 24px;\n                font-weight: normal;\n                padding: 15px 20px 10px;\n                color: #ffffff;\n            }\n            \n            .win-quickstart .buttons {\n                position: absolute;\n                right: 0;\n                top: -23px;\n                padding: 4px;\n                background-color: #000000;\n                \n            }\n            \n            .win-quickstart .buttons .close {\n                width: 13px;\n                height: 13px;\n                background: url(images/close.png) no-repeat 0 0;\n            }\n            \n            .win-quickstart .buttons .close.hover {\n                background-position: -18px 0;\n            }\n            \n            .win-quickstart .buttons .close.down {\n                background-position: -35px 0;\n            }\n            \n            .win-quickstart .content {\n                \n            }\n            \n            .win-quickstart p {\n                padding: 0;\n                margin: 0;\n            }\n            .tgLink {\n                background : #000;\n                color: #fff;\n                padding: 0 5px 0 5px;\n                font-family: Tahoma, Arial;\n                margin-bottom: -16px;\n                text-decoration: none;\n            }\n            \n            .tgLink:hover {\n                text-decoration: underline;\n            }\n            \n            .win-quickstart .container {\n                padding: 10px 20px;\n                background : #000;\n                margin-top: 2px;\n                border-bottom: 1px solid #7d7d7d;\n            }\n            \n            .tgtext, .tgtext a {\n                color: #ffc02a;\n                font-size: 16px;\n                text-decoration: none;\n            }\n            \n            .win-quickstart .qsSupportText {\n                font-size: 12px;\n                color: #eeeeee;\n                padding: 18px 20px;\n            }\n            \n            .supportLink {\n                color: #b1dfff;\n                text-decoration: none;\n            }\n            \n            .supportLink:hover {\n                text-decoration: underline;\n            }\n            \n            .cbcontainer {\n                color: white;\n                margin-left: 12px;\n            }\n            \n            .qsCBContainer { \n            }\n            .checkboxDiv    {\n                width: 243px;\n                padding: 17px 20px 15px 5px;\n                border-bottom: 1px solid #7d7d7d;\n                background: black;\n            }\n\n            .buttonDiv {\n                width: 255px;\n                padding: 15px 0;\n                border-bottom: 1px solid #7d7d7d;\n                background: black;\n            }\n            \n            .btnclosetour {\n                margin: 0 auto;\n            }\n        ]]></a:style>\n\n    \n        <a:presentation>\n        <a:main\n              collapsed-height = "30"\n              minheight        = "30"\n              minwidth         = "60"\n              container        = "div[2]"\n              drag             = "div[2]"\n              title            = "div[1]/text()"\n              buttons          = "div[1]/div">\n                <div class="win-quickstart">\n                    <div class="header">\n                        <div class="buttons"> </div>\n                    </div>\n                    <div class="content"> </div>\n                </div>      \n            </a:main>\n            <a:button>\n                <div> </div>\n            </a:button>\n        </a:presentation>\n    </a:window>\n</a:skin>'}),define("text!ext/quickstart/quickstart.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">    \n    <a:window\n        id = "quickStartDialog"\n        title     = "Here are a few pointers to get you started!"\n        center    = "true"\n        modal     = "false"\n        buttons   = "close"\n        kbclose   = ""\n        width     = "500"\n        height    = "210"\n        skinset   = "quickstart"\n        skin      = "win-quickstart"\n        onhide    = "require(\'ext/quickstart/quickstart\').closeStart();"\n        draggable = "false">    \n        <div class="tgtext container">\n            <a href="javascript:void(0)" onclick="require(\'ext/quickstart/quickstart\').shutdownQSStartGT();">For a detailed guided tour, <span class="tgLink">click here!</span></a>\n        </div>\n        \n         <div class="qsSupportText container">\n            <p>If you ever run into trouble, be sure to check out our support page on \n            <a href="http://support.cloud9ide.com/home" class="supportLink" target="_blank">support.cloud9ide.com</a>, \n            or talk to us on <a href="https://twitter.com/#!/C9Support" class="supportLink" target="_blank">Twitter</a>.</p>\n        </div>\n        \n        <a:hbox class="qsCBContainer" edge="2 0 0 0" padding="2">\n            <div class="checkboxDiv">\n                 <a:checkbox id="quickStartCheckbox" \n                   skin    = "checkbox_black"\n                   checked = "[{require(\'ext/settings/settings\').model}::auto/help/@show]"\n                   value   = "[{require(\'ext/settings/settings\').model}::auto/help/@show]"\n                   onafterchange = "require(\'ext/quickstart/quickstart\').setState(this.value);"\n                 >Show this quick start on startup</a:checkbox>\n            </div>\n            <div class="buttonDiv">\n                <a:button \n                  default = "2" \n                  width   = "200"\n                  skin    = "btn-default-css3" \n                  class   = "btn-green btnclosetour" \n                  onclick = "require(\'ext/quickstart/quickstart\').closeStart();">\n                    Just the editor, please\n                </a:button>              \n            </div>\n        </a:hbox>\n    </a:window>\n    \n    <a:window\n        id = "qsProjectBar"\n        title = ""\n        center = "false"\n        modal = "false"\n        buttons = ""\n        kbclose   = "false"\n        width     = "200"\n        skinset   = "quickstart"\n        skin ="qsImage"\n        draggable = "false">\n        <a:vbox class="qsProjectBar">\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n        id = "qsMenuBar"\n        title = ""\n        center = "false"\n        modal = "false"\n        buttons = ""\n        kbclose   = "false"\n        width     = "200"\n        skinset   = "quickstart"\n        skin ="qsImage"\n        draggable = "false">\n        <a:vbox class="qsMenuBar">\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n        id = "qsToolbar"\n        title = ""\n        center = "false"\n        modal = "false"\n        buttons = ""\n        kbclose   = "false"\n        width     = "200"\n        skinset   = "quickstart"\n        skin ="qsImage"\n        draggable = "false">\n        <a:vbox class="qsToolbar">\n        </a:vbox>\n    </a:window>\n    \n    <a:window\n        id = "qsCLI"\n        title = ""\n        center = "false"\n        modal = "false"\n        buttons = ""\n        kbclose   = "false"\n        width     = "200"\n        skinset   = "quickstart"\n        skin ="qsImage"\n        draggable = "false">\n        <a:vbox class="qsCLI">\n        </a:vbox>\n    </a:window>\n</a:application>'}),define("ext/autotest/autotest",["require","exports","module","core/ide","core/ext","ext/noderunner/noderunner","ext/filesystem/filesystem"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/noderunner/noderunner"),g=a("ext/filesystem/filesystem");c.exports=e.register("ext/autotest/autotest",{name:"autotest",dev:"Ajax.org",type:e.GENERAL,alone:!0,hook:function(){d.addEventListener("afterfilesave",function(a){function i(a){a=a.slice(d.davPrefix.length+1).replace("//","/"),f.run(a,[],!1)}var b=a.node,c=b.getAttribute("path"),e=c.match(/^.*(_test|Test)\.js$/);if(e)i(c);else{var h=c.replace(/\.js$/,"_test.js");if(c==h)return;g.exists(h,function(a){a&&i(h),h=c.replace(/\.js$/,"Test.js");if(c==h)return;g.exists(h,function(a){a&&i(h)})})}})},init:function(a){},enable:function(){},disable:function(){},destroy:function(){}})}),define("text!ext/closeconfirmation/settings.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:checkbox class="underlined" label="Warn Before Exiting" value="[general/@confirmexit]" skin="checkbox_grey" position="2000" />\n</a:application>\n'}),define("ext/closeconfirmation/closeconfirmation",["require","exports","module","core/ide","core/ext","ext/settings/settings","text!ext/closeconfirmation/settings.xml","ext/settings/settings"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/settings/settings"),g=a("text!ext/closeconfirmation/settings.xml");c.exports=e.register("ext/closeconfirmation/closeconfirmation",{name:"Confirm closing",dev:"Ajax.org",alone:!0,type:e.GENERAL,markup:null,deps:[f],nodes:[],hook:function(){window.onbeforeunload=this.onBeforeUnloadHandler,a("ext/settings/settings").addSettings("General",g),e.initExtension(this)},init:function(){},onBeforeUnloadHandler:function(){var a=!1;tabEditors.getPages().forEach(function(b){var c=b.$at;c.undo_ptr||(c.undo_ptr=c.$undostack[0]);var d=b.$doc.getNode();if(d&&c.undo_ptr&&c.$undostack[c.$undostack.length-1]!==c.undo_ptr||!c.undo_ptr&&d.getAttribute("changed")==1&&b.$doc.getValue())a=!0});if(a)return"You have unsaved changes. Your changes will be lost if you don't save them";var b=f.model.queryNode("general/@confirmexit");if(b&&apf.isTrue(b.value))return"You're about to leave Cloud9 IDE."},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],window.onbeforeunload===this.onBeforeUnloadHandler&&(window.onbeforeunload=null)}})}),define("ext/codetools/codetools",["require","exports","module","core/ide","core/ext"],function(a,b,c){var d=a("core/ide"),e=a("core/ext");c.exports=e.register("ext/codetools/codetools",{dev:"Ajax.org",name:"Code Tools",alone:!0,type:e.GENERAL,nodes:[],hook:function(a){var b=this;d.addEventListener("init.ext/code/code",function(a){b.attachEditorEvents(ceEditor)})},attachEditorEvents:function(a){function g(){var c=b.session.selection.getSelectionAnchor();d.dispatchEvent("codetools.cursorchange",{amlEditor:a,editor:b,pos:{row:c.row,column:c.column},doc:b.session.doc})}function h(){var c=b.session.selection.getSelectionAnchor(),e=b.session.selection.getSelectionLead();(c.row!==e.row||Math.abs(c.column-e.column)>1)&&d.dispatchEvent("codetools.selectionchange",{amlEditor:a,editor:b,pos:{start:e,end:c},doc:b.session.doc})}var b=a.$editor,c,e,f;b.addEventListener("mousemove",function(f){var g=f.getDocumentPosition(),h=g.row,i=g.column,j=b.session.doc,k={amlEditor:a,editor:b,pos:g,doc:j};c!==h?(c=h,d.dispatchEvent("codetools.rowchange",k),d.dispatchEvent("codetools.columnchange",k)):e!==i&&(e=i,d.dispatchEvent("codetools.columnchange",k))}),b.addEventListener("click",function(c){clearTimeout(f);var e=c.getDocumentPosition(),g=b.session.doc;f=setTimeout(function(){f=null,d.dispatchEvent("codetools.codeclick",{amlEditor:a,editor:b,pos:e,doc:g})},100)}),b.addEventListener("dblclick",function(c){clearTimeout(f),f=null;var e=c.getDocumentPosition(),g=b.session.doc;d.dispatchEvent("codetools.codedblclick",{amlEditor:a,editor:b,pos:e,doc:g})}),b.addEventListener("changeSession",function(a){a.oldsession&&(a.oldsession.removeEventListener("changeCursor",g),a.oldsession.removeEventListener("changeSelection",h)),a.session.selection.addEventListener("changeCursor",g),a.session.selection.addEventListener("changeSelection",h)})},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/colorpicker/colorpicker_regex",["require","exports","module"],function(a,b,c){var d=typeof apf!="undefined"?apf.color.colorshex:{black:0,white:16777215},e=Object.keys(d).join("|"),f={rgb:"rgba?\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*(:?\\s*,\\s*(?:1|0|0?\\.[0-9]{1,2})\\s*)?\\)",rgb_alt:"rgba?\\(\\s*\\b(\\d{1,2}|100)%\\s*,\\s*\\b(\\d{1,2}|100)%\\s*,\\s*\\b(\\d{1,2}|100)%\\s*(:?\\s*,\\s*(?:1|0|0?\\.[0-9]{1,2})\\s*)?\\)",hsl:"hsla?\\(\\s*\\b([1-2][0-9][0-9]|360|3[0-5][0-9]|[1-9][0-9]|[0-9])\\b\\s*,\\s*\\b(\\d{1,2}|100)%\\s*,\\s*\\b(\\d{1,2}|100)%\\s*(:?\\s*,\\s*(?:1|0|0?\\.[0-9]{1,2})\\s*)?\\)"},g=new RegExp("(#([0-9A-Fa-f]{3,6})\\b)|\\b("+e+")\\b"+"|("+f.rgb+")"+"|("+f.rgb_alt+")"+"|("+f.hsl+")","gi"),h=new RegExp("(?:"+f.rgb+")"+"|(?:"+f.rgb_alt+")"),i=new RegExp(f.hsl);b=c.exports={isColor:g,isRgb:h,isHsl:i}}),define("text!ext/colorpicker/colorpicker.css",[],function(){return".codetools_colorpicker {\n    position: absolute;\n    opacity: 0.9;\n    border: 1px solid #d9cb89;\n    background-color: #fff8c8;\n    -webkit-border-radius: 6px;\n    -moz-border-radius: 6px;\n    border-radius: 6px;\n    z-index: 2000;\n    padding: 0 2px 0 2px;\n}\n\n.codetools_colorpicker_tools {\n    position: absolute;\n    top: 182px;\n    left: 8px;\n    line-height: 16px;\n    font-size: 12px;\n    vertical-align: middle;\n    color: #fff;\n}\n\n.codetools_colorpicker_tools span {\n    float: left;\n    display: inline;\n    margin: 0 4px 0 0;\n}\n\n.codetools_colorpicker_tools span.color {\n    width: 15px;\n    height: 15px;\n    margin: 0 2px 0 2px;\n    border: 1px solid #fff;\n    -webkit-border-radius: 2px;\n    -moz-border-radius: 2px;\n    border-radius: 2px;\n    float: left;\n    cursor: pointer;\n    cursor: hand;\n}\n\n.codetools_colorpicker_tools span.color_hover {\n    -webkit-box-shadow: 0px 0px 6px #ffffff;\n    -moz-box-shadow: 0px 0px 6px #ffffff;\n    box-shadow: 0px 0px 6px #ffffff;\n}\n"}),define("text!ext/colorpicker/colorpicker.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:skin id="colorpicker" \n      src        = "{require(\'ext/colorpicker/colorpicker\').skin}" \n      media-path = "/static/ext/colorpicker/images/" />\n\n    <a:menu id="mnuColorPicker" skin="dockwindowblack" class="left" width="366" height="205" animate="false" pinned="true" resizable="false" visible="false">\n        <a:colorpicker id="clrCodeTools" skinset="colorpicker" />\n        <div class="codetools_colorpicker_tools"/>\n    </a:menu>\n</a:application>'}),define("text!ext/colorpicker/skin.xml",[],function(){return'<?xml version=\'1.0\'?>\n<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:colorpicker name="colorpicker">\n        <a:style><![CDATA[\n            .colorpicker {\n                width       : 356px;\n                height      : 176px;\n                overflow    : hidden;\n                position    : absolute;\n                background  : url(images/colorpicker_background.png);\n                font-family : Arial, Helvetica, sans-serif;\n                z-index     : 2002;\n            }\n            \n            .colorpicker_color {\n                width      : 150px;\n                height     : 150px;\n                left       : 14px;\n                top        : 13px;\n                position   : absolute;\n                background : #f00;\n                overflow   : hidden;\n                cursor     : crosshair;\n            }\n            \n            .colorpicker_color div {\n                position   : absolute;\n                top        : 0;\n                left       : 0;\n                width      : 150px;\n                height     : 150px;\n                background : url(images/colorpicker_overlay.png);\n            }\n            \n            .colorpicker_color div div {\n                position   : absolute;\n                top        : 0;\n                left       : 0;\n                width      : 11px;\n                height     : 11px;\n                overflow   : hidden;\n                background : url(images/colorpicker_select.gif);\n                margin     : -5px 0 0 -5px;\n            }\n            \n            .colorpicker_hue {\n                position : absolute;\n                top      : 13px;\n                left     : 171px;\n                width    : 35px;\n                height   : 150px;\n                cursor   : ns-resize;\n            }\n            \n            .colorpicker_hue div {\n                position   : absolute;\n                width      : 35px;\n                height     : 9px;\n                overflow   : hidden;\n                background : url(images/colorpicker_indic.gif) left top;\n                margin     : -4px 0 0 0;\n                left       : 0px;\n            }\n            \n            .colorpicker_new_color {\n                position   : absolute;\n                width      : 60px;\n                height     : 30px;\n                left       : 213px;\n                top        : 13px;\n                background : #f00;\n            }\n            \n            .colorpicker_current_color {\n                position   : absolute;\n                width      : 60px;\n                height     : 30px;\n                left       : 283px;\n                top        : 13px;\n                background : #f00;\n            }\n        ]]></a:style>\n        \n        <a:presentation>\n            <a:main \n              selector       = "div[1]" \n              selector_indic = "div[1]/div/div" \n              hue            = "div[2]/div"\n              newcolor       = "div[3]" \n              customcolor    = "div[4]" \n              inputs         = "div[5]">\n                <div class="colorpicker">\n                    <div class="colorpicker_color">\n                        <div>\n                            <div></div>\n                        </div>\n                    </div>\n                    <div class="colorpicker_hue">\n                        <div></div>\n                    </div>\n                    <div class="colorpicker_new_color"> </div>\n                    <div class="colorpicker_current_color"> </div>\n                    <div class="colorpicker_inputs"> </div>\n                </div>\n            </a:main>\n        </a:presentation>\n    </a:colorpicker>\n</a:skin>'}),define("ext/revisions/revisions_util",["require","exports","module"],function(a,b,c){var d=6e5;b.compactRevisions=function(a){return a.length?a.length===1?[a]:a.reduce(function(a,b){var c=[a],e=[b];if(a.length){var f=a[a.length-1];return b<f[0]+d?f.push(b):a.push(e),a}return b<a+d?(c.push(b),[[a,b]]):[c,e]}):[]},b.localDate=function(a){var b=function(){return-(new Date).getTimezoneOffset()*6e4};return new Date(a+b())}}),define("text!ext/revisions/revisions.xml",[],function(){return'<a:application xmlns:a="http://ajax.org/2005/aml">\n    <a:skin id="revisions"\n        src = "{require(\'ext/revisions/revisions\').skin}"\n        media-path = "/static/ext/revisions/images/" />\n\n    <a:vbox id = "pgRevisions"\n        skinset = "revisions"\n        class = "revisionsHolder"\n        anchors="0 0 0 0">\n        <a:toolbar height = "20" class="topbar">\n          <a:hbox height = "20">\n              <span>File Revisions</span>\n              <a:button\n                  height = "20"\n                  onclick=" require(\'ext/revisions/revisions\').hide() " />\n          </a:hbox>\n        </a:toolbar>\n        <a:hbox flex = "1">\n            <a:list\n              id          = "lstRevisions"\n              anchors     = "0 0 0 0"\n              model       = "{require(\'ext/revisions/revisions\').model}"\n              multiselect = "false"\n              autoselect  = "false"\n              drag = "false"\n              drop = "false"\n              skin="revisions-list"\n              flex="1">\n                <a:each match="[revision]">\n                        <a:caption>\n                            <?lm\n                                 <div class="revision-icon">\n                                  {\n                                    if ([@restoring] != \'\') {\n                                        <div class="rev-restoration" title="Restored"></div>\n                                    }\n                                    else if ([@silentsave] != \'true\') {\n                                            <span class="rev-usersave" title="Saved by user">U</span>\n                                          }\n                                          else {\n                                              <span class="rev-autosave" title="Autosave">A</span>\n                                          }\n                                  }\n                                </div>\n                                <div class="revision-info">\n                                    <div class="revision-title">\n                                    {\n                                      [@name]\n                                    }\n                                    </div>\n                                    <ul class="contributors">\n                                      {                                        \n                                        each([contributors/contributor]) {\n                                          <li>\n                                            <span class="coloredSquare" style=\' background-color: {require("ext/revisions/revisions")\n                                            .getUserColorByEmail([@email])}\'>&#9632;</span>\n                                            <span>[@email]</span>\n                                          </li>\n                                        }\n                                      }\n                                    </ul>\n                                    {\n                                      if ([@loading_preview] == \'true\' or [@loading] == \'true\') {\n                                          <button class="btnRecover" disabled="disabled"></button>\n                                      }\n                                      else {\n                                          <button class="btnRecover" onclick="require(\'ext/revisions/revisions\').loadRevision([@id], \'apply\')"></button>\n                                      }\n                                    }\n                                </div>\n                            ?>\n                        </a:caption>\n                </a:each>\n                <a:remove match="[revision]" />\n            </a:list>\n            <a:scrollbar\n              for      = "lstRevisions"\n              id       = "sbrevisions"\n              margin   = "2"\n              skin     = "sbios"\n              top      = "0"\n              right    = "0"\n              bottom   = "0"\n              width    = "7"\n              overflow = "auto"\n            />\n        </a:hbox>\n            <a:toolbar class="show-detailes" >\n                <a:bar height = "25">\n                    <a:hbox edge="4 5 5 5">\n                        <a:checkbox\n                            skin="checkbox_grey"\n                            top = "-25"\n                            right = "10"\n                            checked = "{require(\'ext/revisions/revisions\').useCompactList == false ? \'true\' : \'false\'}"\n                            label   ="Show Details"\n                            onafterchange="\n                                require(\'ext/revisions/revisions\').toggleListView()\n                        " />\n                    </a:hbox>\n                </a:bar>\n            </a:toolbar>\n        </a:vbox>\n</a:application>\n'}),define("text!ext/revisions/skin.xml",[],function(){return'<a:skin xmlns:a="http://ajax.org/2005/aml" xmlns="http://www.w3.org/1999/xhtml">\n    <a:list name="revisions-list">\n        <a:style><![CDATA[\n            /* ------------------------------------------------------------------------------------------\n             * Revision Bar\n             * --------------------------------------------------------------------------------------- */\n                .revisionsBar {\n                    border-left: 1px solid #e8e8e8;\n                }\n                .revisionsHolder {\n                    background: #f8f8f8;\n                    background: -webkit-linear-gradient(0, #f2f2f2 1px, #f8f8f8 10px);\n                    background:    -moz-linear-gradient(0, #f2f2f2 1px, #f8f8f8 10px);\n                    background:         linear-gradient(0, #f2f2f2 1px, #f8f8f8 10px);\n                    border-left: 1px solid #fff;\n                }\n\n                .revisions-list{\n                    overflow: hidden;\n                    position: relative;\n                }\n            /* ------------------------------------------------------------------------------------------\n             * Header\n             * --------------------------------------------------------------------------------------- */\n                .revisionsBar .topbar {\n                    background: #e8e8e8;\n                    border-left: 1px solid transparent;\n                }\n                .revisionsBar .topbar span {\n                    color: #8B8B8B;\n                    cursor: default;\n                    font-family: "Helvetica Neue", Arial;\n                    font-size: 12px;\n                    line-height: 17px;\n                    overflow: hidden;\n                    text-indent: 11px;\n                    text-transform: uppercase;\n                    text-shadow: 0 1px 0 white;\n                }\n                .revisionsBar .topbar .btn {\n                    cursor: pointer;\n                    position: absolute;\n                    right: 11px;\n                    top: 0;\n                }\n                .revisionsBar .topbar .btn .left,\n                .revisionsBar .topbar .btn .right {\n                    display: none\n                }\n                .revisionsBar .topbar .btn .lbl {\n                    background: url(images/close-btn.png) no-repeat 0 0;\n                    padding: 0;\n                    width: 14px;\n                }\n                .revisionsBar .topbar .btn:hover .lbl {\n                    background-position: -14px 0;\n                }\n                .revisionsBar .topbar .btn:active .lbl {\n                    background-position: -28px 0;\n                }\n            /* ------------------------------------------------------------------------------------------\n             * Revision\n             * --------------------------------------------------------------------------------------- */\n                .revisions-list .revision {\n                    border-bottom: 1px solid #ced5dd;\n                    color: #404040;\n                    cursor: pointer;\n                    display: block;\n                    font-family: Helvetica, "Helvetica-neue", Arial, Tahoma;\n                    font-size: 12px;\n                    padding: 14px 0;\n                    position: relative;\n                }\n                .revisions-list .revision:first-child {\n                    border-top: 1px solid #ced5dd;\n                }\n                .revisions-list .revision.hover {\n                    background: #f1f1f1;\n                    box-shadow: 0 1px 0 0 #F8F8F8 inset,\n                                0 -1px 0 0 #F8F8F8 inset;\n                }\n                .revisions-list .revision.selected {\n                    background: #107BC9;\n                    background: -webkit-linear-gradient(top, #1f88d4, #006ebd) !important;\n                    background:    -moz-linear-gradient(top, #1f88d4, #006ebd) !important;\n                    background:         linear-gradient(top, #1f88d4, #006ebd) !important;\n                    border-top-color: #1875B8;\n                    box-shadow: 0 1px 0 #41A7F1 inset,\n                                0 -1px 0 0 #1875B8 !important;\n                    color: #fff;\n                    text-shadow: 0 1px 0 #0067b0;\n                }\n\n                .compactView .revision {\n                    display: none;\n                } \n\n                .revision .revision-icon {\n                    float: left;\n                    text-align: right;\n                    width: 21px;\n                }\n                .revision.selected .revision-icon .rev-usersave,\n                .revision.selected .revision-icon .rev-autosave {\n                    color: white;\n                    opacity: 0.85;\n                }\n                .revision .revision-icon .rev-usersave {\n                    font-family: Helvetica, Arial, sans-serif;\n                    font-size: 12px;\n                    font-weight: bold;\n                    color: #37a0e3;\n                }\n\n                .revision .revision-icon .rev-autosave {\n                    font-family: Helvetica, Arial, sans-serif;\n                    font-size: 12px;\n                    font-weight: bold;\n                    color: #AEAEAE;\n                }\n                /*\n                 * Revisions with the \'rev-compact\' class will be shown when\n                 * the list is compacted\n                 */\n                .compactView .revision.rev-compact {\n                    display: block;\n                }\n\n                .revision .revision-icon .rev-restoration {\n                    display: inline-block;\n                    width: 15px;\n                    height: 15px;\n                    background: url(images/rev-green-arrow-small.png) no-repeat 0 0%;\n                    overflow: hidden;\n                    text-align: left;\n                    text-indent: -999px;\n                }\n                .revision.selected .revision-icon .rev-restoration {\n                    background-position: 0 100%;\n                }\n                .compactView .revision .rev-usersave,\n                .compactView .revision .rev-autosave {\n                    display: none;\n                }\n                .revision .revision-info {\n                    overflow: hidden;\n                    padding-left: 11px;\n                }\n                .revision .revision-title {\n                }\n                .revision .contributors {\n                    font-size: 8pt;\n                    font-style: normal;\n                    font-weight: normal;\n                    line-height: 130%;\n                    list-style: none;\n                    margin: 6px 0 0;\n                    padding: 0;\n                    color: #8d8d8d;\n                }\n                .revision.selected .contributors {\n                    color: #fff;\n                }\n                .revision .contributors span {\n                    display: inline-block;\n                    height: 11px;\n                    line-height: 11px;\n                }\n                .revision .contributors .coloredSquare {\n                    background-image: url(images/contributor.png);\n                    box-shadow: 0 1px 0 0 rgba(255,255,255,.24);\n                    overflow: hidden;\n                    text-indent: -9999px;\n                    width: 11px;\n                }\n                .revision .btnRecover {\n                    height: 26px;\n                    position: absolute;\n                    right: 10px;\n                    top: 5px;\n                    width: 29px;\n                }\n                .revision .revision-info button {\n                    background-color: #ededee;\n                    display: none;\n                    position: absolute;\n                    top: 50%;\n                    margin-top: -13px;\n                    right: 11px;\n                    width: 28px;\n                    height: 27px;\n                    background: url(images/rev-green-arrow.png) no-repeat 50% 0;\n                    border: 0;\n                    cursor: pointer;\n                }\n\n\n                @-webkit-keyframes loadingDots { 0%, 19.99%, 100% { background-position: 0 0 } 20%, 39.99% { background-position: -30px 0 } 40%, 59.99% { background-position: -60px 0 } 60%,79.99% { background-position: -90px 0 } 80%, 99.99% { background-position: -120px 0 } }\n                   @-moz-keyframes loadingDots { 0%, 19.99%, 100% { background-position: 0 0 } 20%, 39.99% { background-position: -30px 0 } 40%, 59.99% { background-position: -60px 0 } 60%,79.99% { background-position: -90px 0 } 80%, 99.99% { background-position: -120px 0 } }\n                        @keyframes loadingDots { 0%, 19.99%, 100% { background-position: 0 0 } 20%, 39.99% { background-position: -30px 0 } 40%, 59.99% { background-position: -60px 0 } 60%,79.99% { background-position: -90px 0 } 80%, 99.99% { background-position: -120px 0 } }\n                .revision .revision-info button[disabled] {\n                    background: url(images/loading.png) no-repeat;\n                    -webkit-animation: loadingDots .7s linear 0s infinite normal;\n                       -moz-animation: loadingDots .7s linear 0s infinite normal;\n                            animation: loadingDots .7s linear 0s infinite normal;\n                }\n                \n                .revision.selected .revision-info button,\n                .revision.hover .revision-info button {\n                    display: block;\n                }\n                .revision.selected .revision-info button {\n                    background-position: 50% -30px;\n                }\n            /* ------------------------------------------------------------------------------------------\n             * Show Detailes\n             * --------------------------------------------------------------------------------------- */\n                 .show-detailes {\n                    border-top: 1px solid #ced5dd;\n                    box-shadow: 0 1px 0 0 #fff inset;\n                    padding-bottom: 3px;\n                 }\n                 .show-detailes .subbar {\n                    background: none;\n                 }\n                 .show-detailes .checkbox {\n                    left: 1px;\n                 }\n            /* ------------------------------------------------------------------------------------------\n             * Other\n             * --------------------------------------------------------------------------------------- */\n                 .revisions-listFocus>.indicate>SPAN>U{\n                    border: 1px dotted #BBB;/*#25a8e7;*/\n                    color : black;\n                    padding: 1px 3px 1px 1px;\n                }\n\n                .revisions-list>.selected>SPAN>U{\n                    background-color: #f0f0f0;\n                    color: black;\n                }\n                .revisions-listFocus>.selected>SPAN>U {\n                    color: white;\n                    background-color: #25a8e7;\n                }\n\n                .revisions-list .empty, .revisions-list .offline, .revisions-list .loading{\n                    text-align: center;\n                    padding: 8px 0 0 5px;\n                    color: #aaa;\n                    font-weight : normal;\n                }\n\n                .revisions-list.emptyLeft .empty {\n                    text-align: left;\n                }\n\n                .spiRevisionPreview, spiRevisionLoading {\n                    position: absolute;\n                    top: 5px;\n                    right: 0;\n                    background-image: url(images/revisions-spinner-active.gif);\n                }\n\n                .revision_hl_delete {\n                    position: absolute;\n                    background: rgb(243, 207, 207);\n                }\n\n\n                /*\n                 * Uncomment the following for strikethrough on deleted text\n                 * .revision_hl_delete_strike {\n                 *     position: absolute;\n                 *     border-bottom: solid 1px black;\n                 *     padding: 0;\n                 *     margin: 0;\n                 *     margin: -.6em 0 0 0;\n                 * }\n                 */\n\n                .revision_hl_insert {\n                    position: absolute;\n                    background: rgb(168, 232, 166);\n                }\n        ]]></a:style>\n\n        <!--\n\n-->\n\n        <a:presentation>\n            <a:main container=".">\n                <div class="revisions-list">\n                </div>\n            </a:main>\n            <a:item class="." caption="." icon="." select=".">\n                <div class="revision"></div>\n            </a:item>\n            <a:dragindicator>\n                <div class="revision draglist"></div>\n            </a:dragindicator>\n            <a:loading>\n                <div class="loading">Loading...</div>\n            </a:loading>\n            <a:empty caption=".">\n                <div class="message">-</div>\n            </a:empty>\n        </a:presentation>\n    </a:list>\n</a:skin>\n'}),define("ext/editors/editors",["require","exports","module","core/ide","core/ext","core/util","ext/settings/settings","ext/editors/editors","ext/newresource/newresource"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/settings/settings");c.exports=e.register("ext/editors/editors",{name:"Editors",dev:"Ajax.org",alone:!0,type:e.GENERAL,nodes:[],fileExtensions:{},register:function(b){b.$itmEditor=mnuEditors.appendChild(new apf.item({type:"radio",caption:b.name,value:b.path,disabled:"{!require('ext/editors/editors').isEditorAvailable(tabEditors.activepage, '"+b.path+"')}",onclick:function(){a("ext/editors/editors").switchEditor(this.value)}}));var c=this;b.fileExtensions.each(function(a){(c.fileExtensions[a]||(c.fileExtensions[a]=[])).push(b)});if(!this.fileExtensions["default"]||b.name&&b.name=="Code Editor")this.fileExtensions["default"]=b},unregister:function(a){a.$itmEditor.destroy(!0,!0);var b=this;a.fileExtensions.each(function(c){b.fileExtensions[c].remove(a),b.fileExtensions[c].length||delete b.fileExtensions[c]});if(this.fileExtensions["default"]==a){delete this.fileExtensions["default"];for(var c in this.fileExtensions){this.fileExtensions["default"]=this.fileExtensions[c][0];break}}},addTabSection:function(){var b=this,c=this.hbox.appendChild(new apf.bar({id:"tabPlaceholder",flex:1,skin:"basic"})),e,f=new apf.bar({skin:"basic",style:"padding : 0 0 32px 0;position:absolute;",childNodes:[new apf.tab({id:"tabEditors",skin:"editor_tab",style:"height : 100%",buttons:"close,scale,order",overactivetab:!0,onfocus:function(a){b.switchfocus(a)},onbeforeswitch:function(a){b.beforeswitch(a)},onafterswitch:function(a){b.afterswitch(a)},onclose:function(a){if(!d.onLine&&!d.offlineFileSystemSupport)return!1;b.close(a.page)},childNodes:[e=new apf.button({id:"plus_tab_button",style:"display:inline-block;margin: 0 0 5px 13px;",right:5,top:8,width:30,height:17,skin:"btn_icon_only",background:"plustabbtn.png|horizontal|3|30",onclick:function(){a("ext/newresource/newresource").newfile()}})]}),new apf.button({top:8,left:5,width:17,height:17,submenu:"mnuTabs",skin:"btn_icon_only","class":"tabmenubtn",background:"tabdropdown.png|horizontal|3|17"})]});return apf.document.documentElement.appendChild(f),tabEditors.$buttons.appendChild(e.$ext),tabEditors.addEventListener("DOMNodeInserted",function(a){if(a.$isMoveWithinParent){var b=a.currentTarget;if(b.localName!="page"||a.relatedNode!=this||b.nodeType!=1)return;g.save()}a.relatedNode==this&&a.currentTarget.localName=="page"&&(tabEditors.appendChild(e),tabEditors.$buttons.appendChild(e.$ext),e.$ext.style.position="",e.$ext.style.right="",e.$ext.style.top="")}),tabEditors.addEventListener("DOMNodeRemoved",function(a){a.relatedNode==this&&this.getPages().length==1&&(e.$ext.style.position="absolute",e.$ext.style.right="5px",e.$ext.style.top="8px")}),tabPlaceholder.addEventListener("resize",this.$tabPlaceholderResize=function(a){b.setTabResizeValues(f.$ext)}),c},setTabResizeValues:function(a){var b,c=apf.getAbsolutePosition(b=tabPlaceholder.$ext);a.style.left=c[0]-2+"px",a.style.top=c[1]+"px";var d=apf.getDiff(a);a.style.width=b.offsetWidth+2-d[0]+"px",a.style.height=b.offsetHeight-d[1]+"px"},disableTabResizeEvent:function(){tabPlaceholder.removeEventListener("resize",this.$tabPlaceholderResize)},enableTabResizeEvent:function(){tabPlaceholder.addEventListener("resize",this.$tabPlaceholderResize)},isEditorAvailable:function(a,b){var c=e.extLut[b];if(!c)return!1;var d=c.fileExtensions,f=(tabEditors.getPage(a).$model.queryValue("@path")||"").split(".").pop(),g=d.indexOf(f)>-1;return!g&&this.fileExtensions["default"]==c?!0:g},initEditor:function(a){var b=new apf.page({id:a.path,mimeTypes:a.fileExtensions,visible:!1,realtime:!1});return tabEditors.appendChild(b),e.initExtension(a,b),b},switchEditor:function(a){var b=tabEditors.getPage();if(!b||b.type==a)return;var c=b.type,d;if((d=b.$doc.dispatchEvent("validate",d))!==!0){f.alert("Could not switch editor","Could not switch editor because this document is invalid.","Please fix the error and try again:"+d);return}var g=e.extLut[a];g.inited||this.initEditor(g),g.$itmEditor.select(),b.setAttribute("type",a),b.$editor=g,this.currentEditor=g,this.beforeswitch({nextPage:b}),this.afterswitch({nextPage:b,previousPage:{type:c}})},openEditor:function(a,b,c){var e=a.getNode(),h=e.getAttribute("path"),i=tabEditors.getPage(h);if(i){tabEditors.set(i);return}var j=(e.getAttribute("path")||"").split(".").pop(),k=this.fileExtensions[j]&&this.fileExtensions[j][0]||this.fileExtensions["default"];!b&&this.currentEditor&&this.currentEditor.disable();if(!k){f.alert("No editor is registered","Could not find an editor to display content","There is something wrong with the configuration of your IDE. No editor plugin is found.");return}k.inited||this.initEditor(k),b&&tabEditors.setAttribute("buttons","close");var l=new apf.model,m=tabEditors.add("{([@changed] == 1 ? '*' : '') + [@name]}",h,k.path,null,function(b){b.$at=new apf.actiontracker,b.$doc=a,a.$page=b,b.$editor=k,b.setAttribute("tooltip","[@path]"),b.setAttribute("class","{parseInt([@saving], 10) || parseInt([@lookup], 10) ? (tabEditors.getPage(tabEditors.activepage) == this ? 'saving_active' : 'saving') :                 ([@loading] ? (tabEditors.getPage(tabEditors.activepage) == this ? 'loading_active' : 'loading') : '')}"),b.setAttribute("model",b.$model=l),b.$model.load(e)});b&&tabEditors.setAttribute("buttons","close,scale,order"),a.addEventListener("setnode",function(b){m.$model.load(b.node),d.dispatchEvent("afteropenfile",{doc:a,node:b.node,editor:k})}),this.initEditorEvents(m,l);if(b&&!c)return;tabEditors.set(h),k.enable(),k.$itmEditor.select(),this.currentEditor=k,setTimeout(function(){typeof ceEditor!="undefined"&&ceEditor.focus()},100),g.save()},initEditorEvents:function(a,b){a.$at.addEventListener("afterchange",function(c){if(c.action=="reset"){delete this.undo_ptr;return}var e;a.$at.ignoreChange?(e=undefined,a.$at.ignoreChange=!1):this.undolength===0&&!this.undo_ptr?e=undefined:e=this.$undostack[this.$undostack.length-1]!==this.undo_ptr?1:undefined;if(a.changed!==e){a.changed=e,b.setQueryValue("@changed",e?"1":"0");var f=a.$doc.getNode();d.dispatchEvent("updatefile",{changed:e?1:0,xmlNode:f})}})},close:function(a){a.addEventListener("afterclose",this.$close)},$close:function(){var a=this,b=a.$at,c=a.$model;c.setQueryValue("@changed",0),a.$doc.dispatchEvent("close"),c.data&&(c.removeXml("data"),d.dispatchEvent("closefile",{xmlNode:c.data,page:a})),c.destroy(),b.reset(),b.destroy(),tabEditors.getPages().length!=1,g.save()},switchfocus:function(a){},beforeswitch:function(a){var b=a.nextPage,c=tabEditors.getPage(b.type);if(!c)return;d.dispatchEvent("beforeeditorswitch",{previousPage:a.previousPage,nextPage:a.nextPage}),c.model!=b.$model&&c.setAttribute("model",b.$model),c.actiontracker!=b.$at&&c.setAttribute("actiontracker",b.$at),b.$editor&&b.$editor.setDocument&&b.$editor.setDocument(b.$doc,b.$at),d.dispatchEvent("editorswitch",{previousPage:a.previousPage,nextPage:a.nextPage})},afterswitch:function(a){var b=a.nextPage,c,d=e.extLut[b.type];a.previousPage&&a.previousPage!=a.nextPage&&(c=e.extLut[a.previousPage.type]),c!=d&&(c&&c.disable(),d.enable());var g=b.$model.data.getAttribute("path").replace(/^\/workspace/,"");apf.history.setHash("!"+g),d.$itmEditor.select();var h=(g||"").split(".").pop(),i=this.fileExtensions[h]&&this.fileExtensions[h][0]||this.fileExtensions["default"];if(!i){f.alert("No editor is registered","Could not find an editor to display content","There is something wrong with the configuration of your IDE. No editor plugin is found.");return}i.inited||this.initEditor(i),this.currentEditor=i,i.ceEditor&&i.ceEditor.focus()},init:function(){var a=this;window.onpopstate=function(a){var b="/workspace"+a.state;tabEditors.activepage!=b&&tabEditors.getPage(b)&&tabEditors.set(b)},apf.addEventListener("hashchange",function(a){var b="/workspace"+a.page;tabEditors.activepage!=b&&tabEditors.getPage(b)&&tabEditors.set(b)}),apf.document.documentElement.appendChild(new apf.menu({id:"mnuEditors"})),mnuView.insertBefore(new apf.item({caption:"Editor",submenu:"mnuEditors"}),mnuView.firstChild),e.addType("Editor",function(b){a.register(b)},function(b){a.unregister(b)}),d.addEventListener("openfile",function(b){a.openEditor(b.doc,b.init,b.active)}),d.addEventListener("filenotfound",function(a){var b=tabEditors.getPage(a.path);b&&tabEditors.remove(b)});var b=colMiddle;this.hbox=b.appendChild(new apf.hbox({flex:1,padding:5,splitters:!0})),this.nodes.push(this.addTabSection()),this.panel=this.hbox,this.$settings={},d.addEventListener("loadsettings",function(b){function c(a,b){d.addEventListener("init.ext/tree/tree",function(){var c=apf.getDirname(a).replace(/\/$/,""),d=function(e){e.xmlNode&&e.xmlNode.getAttribute("path")==c&&(b.getNode().getAttribute("newfile")!=1?b.setNode(e.xmlNode.selectSingleNode("node()[@path='"+a+"']")):b.setNode(b.getNode()),trFiles.removeEventListener("expand",d))};trFiles.addEventListener("expand",d)})}!!b.model.queryNode("auto/files"),apf.createNodeFromXpath(b.model.data,"auto/files");var e=b.model;d.addEventListener("extload",function(){var b=a.loadFileFromHash(window.location.hash,c);if(b){window.location.hash=b;return}var f=e.queryValue("auto/files/@active"),g=e.queryNodes("auto/files/file");for(var h=0,i=g.length;h<i;h++){var j=g[h],k=j.getAttribute("state"),l=d.createDocument(j);try{k&&(l.state=JSON.parse(k))}catch(m){}j.getAttribute("changed")==1&&j.firstChild&&(l.cachedValue=j.firstChild.nodeValue.replace(/\n]\n]/g,"]]").replace(/\\r/g,"\r").replace(/\\n/g,"\n")),d.dispatchEvent("openfile",{doc:l,init:!0,active:f?f==j.getAttribute("path"):h==i-1}),c(j.getAttribute("path"),l)}})}),d.addEventListener("savesettings",function(a){if(!a.model.data)return;var b=a.model.data.selectSingleNode("auto/files"),c=b&&b.xml,d=tabEditors.getPages();b&&(b.parentNode.removeChild(b),b=null);if(d.length){var e=tabEditors.activepage;a.model.setQueryValue("auto/files/@active",e),b=apf.createNodeFromXpath(a.model.data,"auto/files");for(var f=0,g=d.length;f<g;f++){if(!d[f]||!d[f].$model)continue;var h=d[f].$model.data;if(!h||h.getAttribute("debug"))continue;var i=apf.xmldb.cleanNode(h.cloneNode(!1));i.removeAttribute("loading"),i.removeAttribute("saving"),b.appendChild(i);var c=d[f].$editor.getState&&d[f].$editor.getState(d[f].$doc);c&&i.setAttribute("state",JSON.stringify(c)),i.getAttribute("changed")==1&&i.getAttribute("newfile")==1&&i.appendChild(i.ownerDocument.createCDATASection(d[f].$doc.getValue().replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\]\]/g,"\n]\n]")))}}if(c!=(b&&b.xml))return!0}),d.addEventListener("reload",function(a){var b=a.doc;b.state=b.$page.$editor.getState&&b.$page.$editor.getState(b)}),d.addEventListener("afterreload",function(a){var b=a.doc,c=b.acesession;if(!c)return;var d=c.getSelection();d.selectAll(),c.getUndoManager().ignoreChange=!0,c.replace(d.getRange(),a.data),d.clearSelection();if(b.state){var e=b.$page.$editor;e.setState&&e.setState(b,b.state)}apf.xmldb.setAttribute(b.getNode(),"changed","0")})},loadFileFromHash:function(a,b){var c=/openfile-(.[^:&$]*)(?:\:(\d+)-(\d+))?/,e=a.match(c);if(e){var f=d.davPrefix.replace(/\/$/,"")+"/"+e[1],g=d.createDocument(this.createFileNodeFromPath(f));return e[2]&&e[3]&&(g.state={scrollleft:0,scrolltop:0,selection:{start:{row:parseInt(e[2]||0,10)-1,column:0},end:{row:parseInt(e[3]||0,10),column:0}}}),d.dispatchEvent("openfile",{doc:g,active:!0}),b(f,g),a.replace(c,"")}return null},createFileNodeFromPath:function(a){var b=a.split("/").pop(),c=apf.n("<file />").attr("name",b).attr("contenttype",f.getContentType(b)).attr("path",a).node();return c},showFile:function(a,b,c,d,e){var f=this.createFileNodeFromPath(a);this.jump(f,b,c,d)},jump:function(a,b,c,e,f,g){var h=a.getAttribute("path"),i=g&&(tabEditors.getPage(h)||{}).$doc?!0:!1;if(b!==undefined){var j=function(){setTimeout(function(){ceEditor.$editor.gotoLine(b,c),e&&ceEditor.$editor.find(e),ceEditor.focus()},100)};i?(tabEditors.set(h),j()):d.addEventListener("afteropenfile",function(a){var b=a.doc.getNode();b.getAttribute("path")==h&&(d.removeEventListener("afteropenfile",arguments.callee),j())})}i?tabEditors.set(h):d.dispatchEvent("openfile",{doc:f||d.createDocument(a)})},enable:function(){this.hbox.show()},disable:function(){this.hbox.hide()},destroy:function(){this.hbox.destroy(!0,!0)}})}),define("ext/gotofile/gotofile",["require","exports","module","core/ide","core/ext","ext/editors/editors","text!ext/gotofile/gotofile.xml","ext/gotofile/search"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/editors/editors"),g=a("text!ext/gotofile/gotofile.xml"),h=a("ext/gotofile/search");c.exports=e.register("ext/gotofile/gotofile",{name:"Go To File",dev:"Ajax.org",alone:!0,offline:!1,type:e.GENERAL,markup:g,offline:!1,commands:{_gotofilelegacy:{hint:"Legacy"},gotofile:{hint:"search for a filename and jump to it"}},hotitems:{},dirty:!0,nodes:[],hook:function(){var a=this;this.nodes.push(mnuFile.insertBefore(new apf.item({caption:"Open...",onclick:function(){a.toggleDialog(1)}}),mnuFile.firstChild),d.barTools.appendChild(new apf.button({id:"btnOpen",icon:"open.png",width:29,tooltip:"Open...",skin:"c9-toolbarbutton",onclick:function(){a.toggleDialog(1)}})),this.model=new apf.model,this.modelCache=new apf.model),d.addEventListener("init.ext/editors/editors",function(){a.markupInsertionPoint=tabEditors}),d.addEventListener("extload",function(){a.updateFileCache()}),this.hotitems.gotofile=[this.nodes[0]]},init:function(){var a=this;txtGoToFile.addEventListener("keydown",function(b){if(b.keyCode==27)a.toggleDialog(-1);else{if(b.keyCode==13)return a.openFile(),d.dispatchEvent("track_action",{type:"gotofile"}),!1;if(b.keyCode==38&&dgGoToFile.viewport.length){if(dgGoToFile.selected==dgGoToFile.$cachedTraverseList[0])return;var c=dgGoToFile.getNextTraverseSelected(dgGoToFile.selected,!1);c&&(dgGoToFile.select(c,b.ctrlKey,b.shiftKey),dgGoToFile.focus(),b.preventDefault())}else if(b.keyCode==40&&dgGoToFile.viewport.length){var e=dgGoToFile.getNextTraverseSelected(dgGoToFile.selected);e&&(dgGoToFile.select(e,b.ctrlKey,b.shiftKey),dgGoToFile.focus(),b.preventDefault())}}}),txtGoToFile.addEventListener("afterchange",function(b){a.filter(txtGoToFile.value),a.dirty&&txtGoToFile.value.length>0&&(a.dirty=!1,a.updateFileCache())}),dgGoToFile.addEventListener("keydown",function(b){b.keyCode==27&&a.toggleDialog(-1);if(b.keyCode==9)txtGoToFile.focus(),b.preventDefault();else if(b.keyCode==38&&!b.shiftKey)this.selected==this.$cachedTraverseList[0]&&txtGoToFile.focus();else{if(b.keyCode==13)return a.openFile(),!1;apf.isCharacter(b.keyCode)&&txtGoToFile.focus()}b.preventDefault()},!0),apf.addListener(dgGoToFile.$ext,"mouseup",function(b){a.openFile()}),winGoToFile.addEventListener("blur",function(b){winGoToFile.visible&&!apf.isChildOf(winGoToFile,b.toElement)&&a.toggleDialog(-1)}),txtGoToFile.addEventListener("blur",function(b){self.winGoToFile&&winGoToFile.visible&&!apf.isChildOf(winGoToFile,b.toElement)&&a.toggleDialog(-1)}),d.addEventListener("closepopup",function(b){b.element!=a&&a.toggleDialog(-1,!0)}),this.nodes.push(winGoToFile)},updateFileCache:function(){var a=this;davProject.report(d.davPrefix,"filelist",{showHiddenFiles:"1"},function(b,c,d){if(c==apf.ERROR){if(b&&b.indexOf("jsDAV_Exception_FileNotFound")>-1)return;return}if(c==apf.TIMEOUT)return;var e=b.replace(/^\./gm,"").split("\n");e.pop();var f="<d:href>",g="</d:href>",h=g+f;b=apf.getXml("<d:multistatus  xmlns:d='DAV:'><d:response>"+f+e.join(h)+g+"</d:response></d:multistatus>"),a.arrayCache=e,a.modelCache.load(b);if(self.winGoToFile&&winGoToFile.visible&&a.lastSearch){var i=a.lastSearch;a.lastSearch=null;var j=dgGoToFile.getSelection();a.filter(i);if(j.length<100)for(var k=0,l=j.length;k<l;k++)dgGoToFile.select(dgGoToFile.queryNode("//d:href[text()='"+j[k].firstChild.nodeValue+"']"))}else a.model.load(a.modelCache.data)})},filter:function(a){var b;if(!this.modelCache.data){this.lastSearch=a;return}if(!a)b=this.modelCache.data.cloneNode(!0);else{var c;this.lastSearch&&a.indexOf(this.lastSearch)>-1?c=this.arrayCacheLastSearch:c=this.arrayCache;var e=[],f=h(c,a,e);b=apf.getXml(f),this.arrayCacheLastSearch=e}this.lastSearch=a,this.model.load(b);var g=tabEditors.getPages(),i={};for(var j=g.length-1;j>=0;j--)i[g[j].id]=!0;var c=dgGoToFile.getTraverseNodes();for(var j=Math.max(dgGoToFile.viewport.limit-3,c.length-1);j>=0;j--)if(i[d.davPrefix+c[j].firstChild.nodeValue]){dgGoToFile.select(c[j]);return}dgGoToFile.select(dgGoToFile.getFirstTraverseNode())},openFile:function(){var a=dgGoToFile.getSelection();if(a.length==0)return!1;this.toggleDialog(-1);for(var b=0;b<a.length;b++){var c=d.davPrefix.replace(/[\/]+$/,"")+"/"+apf.getTextNode(a[b]).nodeValue.replace(/^[\/]+/,"");f.showFile(c),d.dispatchEvent("track_action",{type:"fileopen"})}},gotofile:function(){return this.toggleDialog(),!1},_gotofilelegacy:function(){return this.toggleDialog(),!1},toggleDialog:function(a,b){if(!self.winGoToFile||!a&&!winGoToFile.visible||a>0){if(self.winGoToFile&&winGoToFile.visible)return;e.initExtension(this),d.dispatchEvent("closepopup",{element:this}),winGoToFile.show(),dgGoToFile.$model!=this.model&&dgGoToFile.setModel(this.model),dgGoToFile.xmlRoot?apf.setOpacity(winGoToFile.$ext,1):this.modelCache.data?(apf.setOpacity(winGoToFile.$ext,0),dgGoToFile.addEventListener("afterload",function(){apf.setOpacity(winGoToFile.$ext,1),dgGoToFile.removeEventListener("afterload",arguments.callee)})):(dgGoToFile.$setClearMessage(dgGoToFile["loading-message"],"loading"),apf.setOpacity(winGoToFile.$ext,1)),txtGoToFile.select(),txtGoToFile.focus(),this.dirty=!0;if(this.lastSearch){var c=this.lastSearch;this.lastSearch=null,this.filter(c)}}else self.winGoToFile&&winGoToFile.visible&&(b?winGoToFile.hide():(winGoToFile.visible=!1,apf.tween.single(winGoToFile,{type:"fade",from:1,to:0,steps:5,interval:0,control:this.control={},onfinish:function(){winGoToFile.visible=!0,winGoToFile.hide(),f.currentEditor&&f.currentEditor.ceEditor&&f.currentEditor.ceEditor.focus()}})));return!1},enable:function(){this.nodes.each(function(a){a.enable&&a.enable()})},disable:function(){this.nodes.each(function(a){a.disable&&a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),winGoToFile.destroy(!0,!0),this.nodes=[]}})}),define("ext/clipboard/clipboard",["require","exports","module","core/ext","ext/editors/editors"],function(a,b,c){"use strict";var d=a("core/ext"),e=a("ext/editors/editors");c.exports=d.register("ext/clipboard/clipboard",{dev:"Ajax.org",name:"Clipboard",alone:!0,type:d.GENERAL,nodes:[],text:"",range:null,hook:function(){var a=this;this.nodes.push(mnuEdit.appendChild(new apf.divider),mnuEdit.appendChild(new apf.item({caption:"Cut",onclick:function(){a.cut()}})),mnuEdit.appendChild(new apf.item({caption:"Copy",onclick:function(){a.copy()}})),mnuEdit.appendChild(new apf.item({caption:"Paste",onclick:function(){a.paste()}})))},init:function(a){},cut:function(){if(apf.document.activeElement==trFiles)apf.clipboard.cutSelection(trFiles);else{this.editor==null&&(this.editor=e.currentEditor.ceEditor.$editor);var a=this.$getAce();this.text=a.getCopyText(),a.remove(a.getSelectionRange())}},copy:function(){if(apf.document.activeElement==trFiles)apf.clipboard.copySelection(trFiles);else{var a=this.$getAce();this.text=a.getCopyText()}},paste:function(){if(apf.document.activeElement==trFiles)apf.clipboard.pasteSelection(trFiles);else{var a=this.$getAce();a.getSession().replace(a.getSelectionRange(),this.text)}},keepRange:function(){var a=this.$getAce();this.range=a.getSelectionRange()},showRange:function(){var a=this;setInterval(function(){if(!mnuCtxEditor.visible)clearInterval(this);else{var b=a.$getAce();b.getSelection().setSelectionRange(a.range)}},10)},$getAce:function(){var a=e.currentEditor;if(!a||!a.ceEditor)return;var b=a.ceEditor;return b.$editor},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/console/logger",["require","exports","module","ext/editors/editors"],function(a,b,c){var d=a("ext/editors/editors");b.test={};var e=512,f=/(?:\s|^|\.\/)([\w\_\$-]+(?:\/[\w\_\$-]+)+(?:\.[\w\_\$]+))?(\:\d+)(\:\d+)*/g,g=/\b((?:(?:https?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()[\]{};:'".,<>?«»“”‘’]))/i,h=/\u001b\[([\d;]+)?m/g,i=function(a){var b=a.childNodes.length;if(b<=e)return;b-=e;for(var c=0;c<b;c++)a.removeChild(a.firstChild)},j=function(a,b,c){b=parseInt(b.slice(1),10),c=c?parseInt(c.slice(1),10):0,d.showFile(a,b,c)},k={},l=function(a,b){k[b]=setInterval(function(){i(a)},1e3)},m=function(a,b){return(new Array(b+1)).join(a)},n=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},o=c.exports.test.createItem=function(a,b){if(!a)return"";var c=b.workspaceDir,d=b.davPrefix,e=new RegExp(n(c)+"\\/([^:]*)(:\\d+)(:\\d+)*","g");if(a.search(f)!==-1||a.search(e)!==-1){var i="<a href='#' data-wsp='"+d+"/$1,$2,$3'>___$1$2$3</a>";a=a.replace(f,i.replace("___","")).replace(e,i.replace("___",c+"/"))}else a.search(g)!==-1&&(a=a.replace(g,"<a href='$1' target='_blank'>$1</a>"));var j=[],k="###$#$#$##0";a=a.replace(/(<a.*?a>)/gi,function(a){return j.push(a),k}),a=apf.escapeXML(a),a=a.replace(k,function(){return j.shift()});var l=0;return a=a.replace(/\s{2,}/g,function(a){return m("&nbsp;",a.length)}).replace(h,function(a,b){if(!b)return"";b=parseInt(b.replace(";",""),10);if(l>0&&(b===39||b<30&&b>20))return--l,"</span>";if(b===1)return++l,'<span class="term_boldColor" style="font-weight:bold">';if(b===3)return++l,'<span style="font-style:italic">';if(b===4)return++l,'<span style="text-decoration:underline">';if(b>=30&&!(b>40&&b<50)){++l;var c=b%30;return c>=10&&(c-=2),'<span class="term_ansi'+c+'Color">'}return""}).replace(/(\u0007|\u001b)\[(K|2J)/g,""),l>0?a+(new Array(l+1)).join("</span>"):a},p={},q={},r,s=function(a){var b={element:txtConsole.$ext,id:"console"};return a?(typeof a=="boolean"&&a?(b.element=txtOutput.$ext,b.id="output"):a.$ext&&a.id&&(b.element=a.$ext,b.id=a.id),b):b};c.exports.logNodeStream=function(a,b,c,d){var f=s(c),g=f.element,h=f.id;r!==!0&&(g.addEventListener("click",function(a){var b=a.target;b.hasAttribute("data-wsp")&&j.apply(null,a.target.getAttribute("data-wsp").split(","))}),r=!0),k[h]||l(g,h),p[h]||(p[h]=document.createDocumentFragment(),q[h]=setInterval(function(){g.appendChild(p[h]),p[h]=document.createDocumentFragment()},100));var i=a.toString().split("\n",e),m=document.createDocumentFragment();for(var n=0,t=i.length;n<t;n++){var u=document.createElement("div"),v=o(i[n],d);v&&v.length&&(u.innerHTML=v,m.appendChild(u))}p[h].appendChild(m)};var t={divider:"<span class='cli_divider'></span>",prompt:"<span style='color:#86c2f6'>__MSG__</span>",command:"<span style='color:#86c2f6'><span>&gt;&gt;&gt;</span><div>__MSG__</div></span>"};c.exports.log=function(a,b,c,d,e){a=a.toString().escapeHTML(),b||(b="log"),t[b]&&(a=t[b].replace("__MSG__",a));var f=s(e),g=f.element,h=f.id;k[h]||l(g,h),g.innerHTML+="<div class='item console_"+b+"'>"+(c||"")+a+(d||"")+"</div>"}}),define("ext/code/code",["require","exports","module","apf/elements/codeeditor","core/ide","core/ext","ace/edit_session","ace/keyboard/hash_handler","ace/lib/useragent","ace/document","ace/range","ace/multi_select","ext/code/proxydocument","ace/commands/command_manager","ace/commands/default_commands","text!ext/code/code.xml","ext/settings/settings","text!ext/code/settings.xml","ext/editors/editors","ext/settings/settings"],function(a,b,c){a("apf/elements/codeeditor");var d=a("core/ide"),e=a("core/ext"),f=a("ace/edit_session").EditSession,g=a("ace/keyboard/hash_handler").HashHandler,h=a("ace/lib/useragent"),i=a("ace/document").Document,j=a("ace/range").Range,k=a("ace/multi_select").commands.defaultCommands,l=a("ext/code/proxydocument"),m=a("ace/commands/command_manager").CommandManager,n=a("ace/commands/default_commands").commands,o=a("text!ext/code/code.xml"),p=a("ext/settings/settings"),q=a("text!ext/code/settings.xml"),r=a("ext/editors/editors");apf.actiontracker.actions.aceupdate=function(a,b){var c=a.args;if(!a.initial){a.initial=!0;return}b?c[1].undoChanges(c[0]):c[1].redoChanges(c[0])};var s={"application/javascript":"javascript","application/json":"json","text/css":"css","text/x-scss":"scss","text/html":"html","application/xhtml+xml":"html","application/xml":"xml","application/rdf+xml":"xml","application/rss+xml":"xml","image/svg+xml":"svg","application/wsdl+xml":"xml","application/xslt+xml":"xml","application/atom+xml":"xml","application/mathml+xml":"xml","application/x-httpd-php":"php","application/x-sh":"sh","text/x-script.python":"python","text/x-script.ruby":"ruby","text/x-script.perl":"perl","text/x-script.perl-module":"perl","text/x-c":"c_cpp","text/x-java-source":"java","text/x-groovy":"groovy","text/x-csharp":"csharp","text/x-script.coffeescript":"coffee","text/x-markdown":"markdown","text/x-web-textile":"textile","text/x-script.ocaml":"ocaml","text/x-script.clojure":"clojure","application/x-latex":"latex","text/x-lua":"lua","text/x-script.powershell":"powershell","text/x-scala":"scala","text/x-coldfusion":"coldfusion","text/x-sql":"sql"},t={js:"application/javascript",json:"application/json",css:"text/css",less:"text/css",scss:"text/x-scss",sass:"text/x-sass",xml:"application/xml",rdf:"application/rdf+xml",rss:"application/rss+xml",svg:"image/svg+xml",wsdl:"application/wsdl+xml",xslt:"application/xslt+xml",atom:"application/atom+xml",mathml:"application/mathml+xml",mml:"application/mathml+xml",php:"application/x-httpd-php",phtml:"application/x-httpd-php",html:"text/html",xhtml:"application/xhtml+xml",coffee:"text/x-script.coffeescript","*Cakefile":"text/x-script.coffeescript",py:"text/x-script.python",ru:"text/x-script.ruby",gemspec:"text/x-script.ruby",rake:"text/x-script.ruby",rb:"text/x-script.ruby",c:"text/x-c",cc:"text/x-c",cpp:"text/x-c",cxx:"text/x-c",h:"text/x-c",hh:"text/x-c",hpp:"text/x-c",cs:"text/x-csharp",java:"text/x-java-source",clj:"text/x-script.clojure",groovy:"text/x-groovy",scala:"text/x-scala",ml:"text/x-script.ocaml",mli:"text/x-script.ocaml",md:"text/x-markdown",markdown:"text/x-markdown",textile:"text/x-web-textile",latex:"application/x-latex",tex:"application/x-latex",ltx:"application/x-latex",lua:"text/x-lua",pl:"text/x-script.perl",pm:"text/x-script.perl-module",ps1:"text/x-script.powershell",cfm:"text/x-coldfusion",sql:"text/x-sql",sh:"application/x-sh",bash:"application/x-sh"};c.exports=e.register("ext/code/code",{name:"Code Editor",dev:"Ajax.org",type:e.EDITOR,markup:o,deps:[r],nodes:[],fileExtensions:Object.keys(t),supportedModes:Object.keys(s),commandManager:new m(h.isMac?"mac":"win",n),getState:function(a){a=a?a.acesession:this.getDocument();if(!a||typeof a.getSelection!="function")return;var b=a.getAllFolds().map(function(a){return{start:a.start,end:a.end,placeholder:a.placeholder}}),c=a.getSelection();return{scrolltop:a.getScrollTop(),scrollleft:a.getScrollLeft(),selection:c.getRange(),folds:b}},setState:function(a,b){var c=a?a.acesession:this.getDocument();if(!c||!b||typeof c.getSelection!="function")return;var d=c.getSelection();d.setSelectionRange(b.selection,!1),c.setScrollTop(b.scrolltop),c.setScrollLeft(b.scrollleft);if(b.folds)for(var e=0,f=b.folds.length;e<f;e++){var g=b.folds[e];c.addFold(g.placeholder,j.fromPoints(g.start,g.end))}var h=a.getNode&&a.getNode();h&&parseInt(h.getAttribute("newfile")||0,10)===1&&h.childNodes.length&&a.getNode().childNodes[0]instanceof CDATASection&&c.setValue(a.getNode().childNodes[0].nodeValue)},getSyntax:function(a){if(!a)return"";var b=a.getAttribute("customtype");if(!b){var c=a.getAttribute("name");c.lastIndexOf(".")!=-1?b=t[c.split(".").pop()]:b=t["*"+c]}return b?(b=b.split(";")[0],s[b]||"text"):"text"},getSelection:function(){return typeof ceEditor=="undefined"?null:ceEditor.getSelection()},getDocument:function(){return typeof ceEditor=="undefined"?null:ceEditor.getSession()},setDocument:function(a,b){var c=this;a.acesession||(a.isInited=a.hasValue(),a.acedoc=a.acedoc||new l(new i(a.getValue()||"")),a.acesession=new f(a.acedoc),a.acedoc=a.acesession.getDocument(),a.acesession.setUndoManager(b),a.isInited&&a.state&&c.setState(a,a.state),a.addEventListener("prop.value",function(b){if(this.editor!=c)return;a.acesession.setValue(b.value||""),a.state&&c.setState(a,a.state),a.isInited=!0}),a.addEventListener("retrievevalue",function(b){if(this.editor!=c)return;return a.isInited?a.acesession.getValue():b.value}),a.addEventListener("close",function(){if(this.editor!=c)return})),ceEditor.setProperty("value",a.acesession);if(a.editor&&a.editor!=this){var d=a.getValue();a.acesession.getValue()!==d&&(a.editor=this,a.dispatchEvent("prop.value",{value:d}))}a.editor=this},hook:function(){var b=this;a("ext/settings/settings").addSettings("Code Editor",q),d.addEventListener("loadsettings",function(c){var d=c.model;if(!d.queryNode("editors/code")){var e=apf.n("<code />").attr("overwrite","false").attr("selectstyle","line").attr("activeline","true").attr("showinvisibles","false").attr("showprintmargin","true").attr("printmargincolumn","80").attr("softtabs","true").attr("tabsize","4").attr("scrollspeed","2").attr("fontsize","12").attr("wrapmode","false").attr("wraplimitmin","").attr("wraplimitmax","").attr("gutter","true").attr("folding","true").attr("newlinemode","auto").attr("highlightselectedword","true").attr("autohidehorscrollbar","true").node(),f=apf.createNodeFromXpath(d.data,"editors");apf.xmldb.appendChild(f,e)}d.queryNode("editors/code/@animatedscroll")||d.setQueryValue("editors/code/@animatedscroll","true");var g=c.model.queryValue("editors/code/@theme");g&&a([g],function(){}),b.getCustomTypes(c.model)}),d.addEventListener("afteropenfile",function(a){b.setState&&b.setState(a.doc,a.doc.state);if(a.doc&&a.doc.editor&&a.doc.editor.ceEditor){if(typeof mdlDbgStack!="undefined"&&mdlDbgStack.data&&a.node&&(!a.node.hasAttribute("scriptid")||!a.node.getAttribute("scriptid"))&&a.node.hasAttribute("scriptname")&&a.node.getAttribute("scriptname")){var c=mdlDbgStack.data.selectNodes('//frame[@script="'+a.node.getAttribute("scriptname").replace(d.workspaceDir+"/","").replace(/"/g,"&quot;")+'"]');c.length&&a.node.setAttribute("scriptid",c[0].getAttribute("scriptid"))}a.doc.editor.ceEditor.afterOpenFile(a.doc.editor.ceEditor.getSession())}}),tabEditors.addEventListener("afterswitch",function(a){ceEditor.afterOpenFile(ceEditor.getSession())})},init:function(a){a.appendChild(ceEditor),ceEditor.show(),this.ceEditor=this.amlEditor=ceEditor,ceEditor.$editor.commands=this.commandManager,ceEditor.$editor.commands.addCommands(k);var b=function(){};ceEditor.getMode("javascript",b),ceEditor.getMode("html",b),ceEditor.getMode("css",b);var c=this,e=new apf.item({caption:"Syntax Highlighting",submenu:"mnuSyntax"}),f=new apf.item({type:"check",caption:"Show Invisibles",checked:"[{require('ext/settings/settings').model}::editors/code/@showinvisibles]"}),h=new apf.item({type:"check",caption:"Wrap Lines",checked:"{ceEditor.wrapmode}"});this.nodes.push(mnuView.appendChild(new apf.divider),mnuView.appendChild(e)),mnuSyntax.onitemclick=function(a){var b=d.getActivePageModel();if(b){var e=a.relatedNode.value;e=="auto"?apf.xmldb.removeAttribute(b,"customtype",""):apf.xmldb.setAttribute(b,"customtype",e);if(b.getAttribute("customtype")){var f=b.getAttribute("name");t["*"+f]&&delete t["*"+f];var g=e.split(";")[0],h=f.lastIndexOf(".")!=-1?f.split(".").pop():null;h&&t[h]!==g&&delete t[h];var i=h?t[h]:t["*"+f];i||c.setCustomType(h?h:b,g),d.dispatchEvent("track_action",{type:"syntax highlighting",fileType:h,fileName:f,mime:g,customType:i})}}},d.addEventListener("init.ext/statusbar/statusbar",function(a){a.ext.addPrefsItem(f.cloneNode(!0),0),a.ext.addPrefsItem(h.cloneNode(!0),1)}),d.addEventListener("keybindingschange",function(a){if(typeof ceEditor=="undefined")return;var b=a.keybindings.code;ceEditor.$editor.setKeyboardHandler(new g(b)),d.dispatchEvent("code.ext:defaultbindingsrestored",{})})},setCustomType:function(a,b){var c;if(typeof a=="string")c=p.model.queryNode('auto/customtypes/mime[@ext="'+a+'"]'),c||p.model.appendXml('<mime name="'+b+'" ext="'+a+'" />',"auto/customtypes");else{var d=a.getAttribute("name")||"";c=p.model.queryNode('auto/customtypes/mime[@filename="'+d+'"]'),c?apf.xmldb.removeAttribute(c,"ext"):p.model.appendXml('<mime name="'+b+'" filename="'+d+'" />',"auto/customtypes")}apf.xmldb.setAttribute(c,"name",b),p.save()},getCustomTypes:function(a){var b=a.queryNode("auto/customtypes");b||(b=apf.createNodeFromXpath(a.data,"auto/customtypes"));var c=b.selectNodes("mime");c.forEach(function(a){a.getAttribute("filename")?t["*"+a.getAttribute("filename")]=a.getAttribute("name"):t[a.getAttribute("ext")]=a.getAttribute("name")})},enable:function(){this.nodes.each(function(a){a.show()})},disable:function(){this.nodes.each(function(a){a.hide()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),self.ceEditor&&(ceEditor.destroy(!0,!0),mnuSyntax.destroy(!0,!0)),this.nodes=[]}})}),define("ext/searchreplace/searchreplace",["require","exports","module","core/ide","core/ext","core/util","ext/code/code","ace/search","ext/editors/editors","text!ext/searchreplace/searchreplace.css","text!ext/searchreplace/searchreplace.xml","ext/settings/settings","ext/editors/editors"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/code/code"),h=a("ace/search"),i=a("ext/editors/editors"),j=a("text!ext/searchreplace/searchreplace.css"),k=a("text!ext/searchreplace/searchreplace.xml"),l,m;c.exports=e.register("ext/searchreplace/searchreplace",{name:"Searchreplace",dev:"Ajax.org",type:e.GENERAL,alone:!0,css:j,markup:k,commands:{search:{hint:"search for a string inside the active document"},searchreplace:{hint:"search for a string inside the active document and replace it"}},hotitems:{},currentRange:null,nodes:[],hook:function(){var a=this;this.nodes.push(mnuEdit.appendChild(new apf.divider),mnuEdit.appendChild(new apf.item({caption:"Search...",onclick:function(){a.toggleDialog(!1)}})),mnuEdit.appendChild(new apf.item({caption:"Search & Replace...",onclick:function(){a.toggleDialog(!0)}}))),this.hotitems.search=[this.nodes[1]],this.hotitems.searchreplace=[this.nodes[2]],g.commandManager.addCommand({name:"replace",exec:function(b){a.setEditor(b,b.getSelection()).toggleDialog(!0,!0)}})},init:function(a){var b=this;apf.importCssString(b.css),this.txtFind=txtFind,this.txtReplace=txtReplace,this.barSingleReplace=barSingleReplace,this.btnReplace=btnReplace,this.btnReplace.onclick=this.replace.bind(this),this.btnReplaceAll=btnReplaceAll,this.btnReplaceAll.onclick=this.replaceAll.bind(this),this.btnFind=btnFind,this.btnFind.onclick=this.findNext.bind(this),winSearchReplace.onclose=function(){ceEditor.focus()},this.txtFind.$ext.cols=this.txtFind.cols,this.txtFind.addEventListener("keydown",function(a){switch(a.keyCode){case 38:b.navigateList("prev");break;case 40:b.navigateList("next");break;case 36:if(!a.ctrlKey)return;b.navigateList("first");break;case 35:if(!a.ctrlKey)return;b.navigateList("last")}})},navigateList:function(b){var c=a("ext/settings/settings");if(!c)return;var d=c.model,e=d.queryNodes("search/word"),f;b=="prev"?f=Math.max(0,this.position-1):b=="next"?f=Math.min(e.length-1,this.position+1):b=="last"?f=Math.max(e.length-1,0):b=="first"&&(f=0),e[f]&&(this.txtFind.setValue(e[f].getAttribute("key")),this.txtFind.select(),this.position=f)},toggleDialog:function(a,b){e.initExtension(this);if(!winSearchReplace.visible||b||this.$lastState!=a){this.setupDialog(a);var c,f=i.currentEditor;if(f){f.ceEditor&&(c=f.ceEditor.getLastSearchOptions().needle);if(!c){var g=f.getSelection(),h=f.getDocument(),j=g.getRange();c=h.getTextRange(j)}c&&this.txtFind.setValue(c),d.dispatchEvent("exitfullscreen"),winSearchReplace.setAttribute("title",a?"Search & Replace":"Search"),winSearchReplace.show()}this.updateCounter()}else winSearchReplace.hide();return!1},onHide:function(){var b=a("ext/editors/editors").currentEditor;b&&b.ceEditor&&b.ceEditor.focus()},search:function(){return this.setEditor().toggleDialog(!1,!0)},searchreplace:function(){return this.setEditor().toggleDialog(!0,!0)},setupDialog:function(a){return this.$lastState=a,this.position=0,this.barSingleReplace.setProperty("visible",a),this.btnReplace.setProperty("visible",a),this.btnReplaceAll.setProperty("visible",a),this},setEditor:function(a,b){if(typeof ceEditor=="undefined")return;return this.$editor=a||ceEditor.$editor,this.$selection=b||this.$editor.getSelection(),this},getOptions:function(){return{backwards:chkSearchBackwards.checked,wrap:chkWrapAround.checked,caseSensitive:chkMatchCase.checked,wholeWord:chkWholeWords.checked,regExp:chkRegEx.checked,scope:chkSearchSelection.checked?h.Search.SELECTION:h.Search.ALL}},findNext:function(){this.$editor||this.setEditor();if(!this.$editor)return;var a=this.txtFind.getValue();if(!a)return;var b=this.getOptions();this.$crtSearch!=a?(this.$crtSearch=a,this.$editor.find(a,b),this.currentRange=this.$editor.selection.getRange()):(this.$editor.find(a,b),this.currentRange=this.$editor.selection.getRange()),chkSearchSelection.setAttribute("checked",!1),this.updateCounter()},replace:function(){this.$editor||this.setEditor();if(!this.$editor)return;if(!this.barSingleReplace.visible)return;var a=this.getOptions();a.needle=this.txtFind.getValue(),a.scope=h.Search.SELECTION,this.$editor.replace(this.txtReplace.getValue()||"",a),this.findNext(),d.dispatchEvent("track_action",{type:"replace"})},replaceAll:function(){this.editor||this.setEditor();if(!this.$editor)return;this.$crtSearch=null;var a=this.getOptions();a.needle=this.txtFind.getValue();var b=this.$editor.getCursorPosition(),c=b.row;this.$editor.replaceAll(this.txtReplace.getValue()||"",a),this.$editor.gotoLine(c),this.updateCounter(),d.dispatchEvent("track_action",{type:"replace"})},updateCounter:function(){var a=this.$getAce(),b,c;l||(l=document.getElementById("spanSearchReplaceIter"),m=document.getElementById("spanSearchReplaceTotal"));var d=a.$search.findAll(a.getSession());if(!d||!d.length){l.innerHTML="0",m.innerHTML="of 0";return}var e=-1,f=this.currentRange;if(f){var g,h=f.start,i=f.end;for(var j=0,k=d.length;j<k;++j){g=d[j];if(g.isStart(h.row,h.column)&&g.isEnd(i.row,i.column)){e=j;break}}}l.innerHTML=String(++e),m.innerHTML="of "+d.length},$getAce:function(){var a=i.currentEditor;if(!a||!a.ceEditor)return;var b=a.ceEditor;return b.$editor},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/quicksearch/quicksearch",["require","exports","module","core/ide","core/ext","core/util","ext/code/code","ext/editors/editors","ace/search","text!ext/quicksearch/skin.xml","text!ext/quicksearch/quicksearch.xml","ext/settings/settings","ext/settings/settings"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/code/code"),h=a("ext/editors/editors"),i=a("ace/search").Search,j=a("text!ext/quicksearch/skin.xml"),k=a("text!ext/quicksearch/quicksearch.xml"),l,m,n=2e4,o=8e3;c.exports=e.register("ext/quicksearch/quicksearch",{name:"quicksearch",dev:"Ajax.org",type:e.GENERAL,alone:!0,skin:{id:"quicksearch",data:j,"icon-path":d.staticPrefix+"/ext/quicksearch/icons/"},markup:k,commands:{quicksearch:{hint:"quickly search for a string inside the active document, without further options (see 'search')"},find:{hint:"open the quicksearch dialog to quickly search for a phrase"},findnext:{hint:"search for the next occurrence of the search query your entered last",msg:"Navigating to next match."},findprevious:{hint:"search for the previous occurrence of the search query your entered last",msg:"Navigating to previous match."}},defaultOffset:30,offsetWidth:30,hotitems:{},nodes:[],currentRange:null,hook:function(){var a=this;g.commandManager.addCommand({name:"find",exec:function(b,c,d){a.toggleDialog(1)}}),d.addEventListener("minimap.visibility",function(b){b.visibility==="shown"?a.offsetWidth=a.defaultOffset+b.width:a.offsetWidth=a.defaultOffset,a.updateBarPosition()}),d.addEventListener("revisions.visibility",function(b){b.visibility==="shown"?a.offsetWidth=a.defaultOffset+b.width:a.offsetWidth=a.defaultOffset,a.updateBarPosition()})},init:function(a){var b=this,c;txtQuickSearch.addEventListener("clear",function(a){b.execSearch(!1,!1,!0)}),txtQuickSearch.addEventListener("keydown",function(a){switch(a.keyCode){case 13:return b.execSearch(!1,!!a.shiftKey,null,!0),!1;case 27:return b.toggleDialog(-1),txtQuickSearch.getValue()&&b.saveHistory(txtQuickSearch.getValue()),a.htmlEvent?apf.stopEvent(a.htmlEvent):a.stop&&a.stop(),!1;case 38:b.navigateList("prev");break;case 40:b.navigateList("next");break;case 36:if(!a.ctrlKey)return;b.navigateList("first");break;case 35:if(!a.ctrlKey)return;b.navigateList("last")}var c=b.$getAce();c.getSession().getDocument().getLength()>n||(a.keyCode==32||a.keyCode>=35&&a.keyCode<=40||a.keyCode>=48&&a.keyCode<=90||a.keyCode>=96&&a.keyCode<=111||a.keyCode>=186&&a.keyCode<=191||a.keyCode>=219&&a.keyCode<=222)&&setTimeout(function(){b.execSearch(!1,!1)},20);return}),txtQuickSearch.addEventListener("keyup",function(a){c=b.$getAce();switch(a.keyCode){case 8:var c=b.$getAce();return c.getSession().getDocument().getLength()>n||b.execSearch(!1,!!a.shiftKey,!0),!1;case 27:b.toggleDialog(-1)}}),winQuickSearch.addEventListener("blur",function(a){winQuickSearch.visible&&!apf.isChildOf(winQuickSearch,a.toElement)&&b.toggleDialog(-1)}),txtQuickSearch.addEventListener("blur",function(a){self.winQuickSearch&&winQuickSearch.visible&&!apf.isChildOf(winQuickSearch,a.toElement)&&b.toggleDialog(-1)}),d.addEventListener("closepopup",function(a){a.element!=b&&b.toggleDialog(-1,!0)});var e=h.currentEditor;e&&e.ceEditor&&e.ceEditor.parentNode.appendChild(winQuickSearch),setTimeout(function(){b.updateBarPosition()})},updateBarPosition:function(){if(!window.winQuickSearch)return;winQuickSearch.setAttribute("right",this.offsetWidth)},navigateList:function(b){var c=a("ext/settings/settings");if(!c)return;var d=c.model,e=d.queryNodes("search/word"),f;b=="prev"?f=Math.max(0,this.position-1):b=="next"?f=Math.min(e.length-1,this.position+1):b=="last"?f=Math.max(e.length-1,0):b=="first"&&(f=0),e[f]&&(txtQuickSearch.setValue(e[f].getAttribute("key")),txtQuickSearch.select(),this.position=f)},updateCounter:function(a){var b=this.$getAce(),c;l||(l=document.getElementById("spanSearchIter"),m=document.getElementById("spanSearchTotal"));if(l.parentNode){if(!b||!winQuickSearch.visible){l.parentNode.style.width="0px";return}l.parentNode.style.width="auto"}setTimeout(function(){l.parentNode&&txtQuickSearch&&txtQuickSearch.$button&&(c=l.parentNode.offsetWidth||0,txtQuickSearch.$button.style.right=c+"px")});var d=b.$search.findAll(b.getSession());if(!d||!d.length||!txtQuickSearch.getValue()){l.innerHTML="0",m.innerHTML="of 0";return}if(a){var e=l.innerHTML-1;e<1&&(e=String(d.length)),l.innerHTML=String(e)}else{var f=-1,g=this.currentRange;if(g){var h,i=g.start,j=g.end;for(var k=0,n=d.length;k<n;++k){h=d[k];if(h.isStart(i.row,i.column)&&h.isEnd(j.row,j.column)){f=k;break}}}l.innerHTML=String(++f)}m.innerHTML="of "+d.length},toggleDialog:function(a,b){e.initExtension(this);var c=tabEditors.getPage();if(!c)return;var f=h.currentEditor;if(!f||!f.ceEditor)return;var g=this;if(!a&&!winQuickSearch.visible||a>0){this.position=-1,this.control&&this.control.stop&&this.control.stop();var i=f.getSelection(),j=f.getDocument(),k=i.getRange(),l=j.getTextRange(k);!l&&f.ceEditor&&(l=f.ceEditor.getLastSearchOptions().needle),l&&txtQuickSearch.setValue(l),d.dispatchEvent("closepopup",{element:this}),winQuickSearch.$ext.style.top="-30px",winQuickSearch.show(),txtQuickSearch.focus(),txtQuickSearch.select(),apf.tween.single(winQuickSearch,{type:"top",anim:apf.tween.easeInOutCubic,from:-27,to:2,steps:8,interval:10,control:this.control={},onfinish:function(){divSearchCount.$ext.style.visibility="",g.updateCounter()}})}else winQuickSearch.visible&&(this.control&&this.control.stop&&this.control.stop(),divSearchCount.$ext.style.visibility="hidden",b?winQuickSearch.hide():(winQuickSearch.visible=!1,txtQuickSearch.focus(),txtQuickSearch.select(),apf.tween.single(winQuickSearch,{type:"top",anim:apf.tween.NORMAL,from:winQuickSearch.$ext.offsetTop,to:-30,steps:8,interval:10,control:this.control={},onfinish:function(){winQuickSearch.visible=!0,winQuickSearch.hide(),f.ceEditor.focus()}})));return!1},quicksearch:function(){this.toggleDialog()},execSearch:function(a,b,c,d){var e=this.$getAce();if(!e)return;var g=txtQuickSearch.getValue();if(g.length<2&&e.getSession().getDocument().getLength()>o)return;var j={backwards:!!b,wrap:!0,caseSensitive:!1,wholeWord:!1,regExp:!1,scope:i.ALL};this.$crtSearch!=g&&(this.$crtSearch=g);var k=e.session.getTextRange(e.selection.getRange());if(k!=="")if(!c){var l=new RegExp("^"+f.escapeRegExp(k),"i");g.match(l)&&(j.backwards||g.toLowerCase()!=k.toLowerCase())&&e.selection.moveCursorTo(e.selection.getRange().start.row,e.selection.getRange().end.column-k.length)}else{var m=new RegExp("^"+f.escapeRegExp(g),"i");k.match(m)&&g.toLowerCase()!=k.toLowerCase()&&e.selection.moveCursorTo(e.selection.getRange().start.row,e.selection.getRange().end.column-g.length-1)}e.find(g,j),this.currentRange=e.selection.getRange(),d&&this.saveHistory(g),a&&(winQuickSearch.hide(),h.currentEditor.ceEditor.focus()),this.updateCounter(b)},saveHistory:function(b){var c=a("ext/settings/settings");if(!c.model)return;var d=c.model,e=apf.createNodeFromXpath(d.data,"search");if(!e.firstChild||e.firstChild.getAttribute("key")!=b){var f=apf.getXml("<word />");f.setAttribute("key",b),apf.xmldb.appendChild(e,f,e.firstChild)}},find:function(){return this.toggleDialog(),!1},findnext:function(a){if(a!==1)return;var b=this.$getAce();if(!b)return;return b.findNext(),this.currentRange=b.selection.getRange(),this.updateCounter(),!1},findprevious:function(a){if(a!==1)return;var b=this.$getAce();if(!b)return;return b.findPrevious(),this.currentRange=b.selection.getRange(),this.updateCounter(!0),!1},$getAce:function(){var a=h.currentEditor;if(!a||!a.ceEditor)return;var b=a.ceEditor;return b.$editor},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/gotoline/gotoline",["require","exports","module","core/ide","core/ext","ext/code/code","ext/editors/editors","core/settings","text!ext/gotoline/skin.xml","text!ext/gotoline/gotoline.xml","ext/editors/editors"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/code/code"),g=a("ext/editors/editors"),h=a("core/settings"),i=a("text!ext/gotoline/skin.xml"),j=a("text!ext/gotoline/gotoline.xml");c.exports=e.register("ext/gotoline/gotoline",{name:"Gotoline Window",dev:"Ajax.org",type:e.GENERAL,alone:!0,skin:{id:"gotoline",data:i,"media-path":d.staticPrefix+"/ext/gotoline/images/"},markup:j,commands:{gotoline:{hint:"enter a linenumber and jump to it in the active document"}},hotitems:{},nodes:[],hook:function(){var a=this;this.nodes.push(mnuEdit.appendChild(new apf.divider),mnuEdit.appendChild(new apf.item({caption:"Go to Line...",onclick:function(){a.gotoline()}}))),d.addEventListener("gotoline",function(){a.gotoline()}),f.commandManager.addCommand({name:"gotoline",exec:function(){a.gotoline()}}),this.hotitems.gotoline=[this.nodes[1]]},init:function(){var a=this;lstLineNumber.addEventListener("afterchoose",function(){lstLineNumber.selected?a.execGotoLine(parseInt(lstLineNumber.selected.getAttribute("nr"),10)):a.execGotoLine()}),lstLineNumber.addEventListener("afterselect",function(){if(!this.selected)return;txtLineNr.setValue(this.selected.getAttribute("nr")),a.execGotoLine(null,!0)});var b=[38,40,36,35];lstLineNumber.addEventListener("keydown",function(c){if(c.keyCode==13&&this.selected)return!1;c.keyCode==38?this.selected==this.getFirstTraverseNode()&&(txtLineNr.focus(),this.clearSelection()):c.keyCode==27?(a.hide(),ceEditor.focus()):b.indexOf(c.keyCode)==-1&&txtLineNr.focus()},!0),txtLineNr.addEventListener("keydown",function(b){if(b.keyCode==13)return a.execGotoLine(),!1;if(b.keyCode==27)return a.hide(),ceEditor.focus(),a.$originalLine&&(a.execGotoLine(a.$originalLine,!0),delete a.$originalLine),!1;if(b.keyCode==40){var c=lstLineNumber.getFirstTraverseNode();c&&(lstLineNumber.select(c),lstLineNumber.$container.scrollTop=0,lstLineNumber.focus())}else if(!b.ctrlKey&&!b.metaKey&&(b.keyCode>57||b.keyCode==32)&&(b.keyCode<96||b.keyCode>105))return!1;setTimeout(function(){a.execGotoLine(null,!0)})}),winGotoLine.addEventListener("blur",function(b){apf.isChildOf(winGotoLine,b.toElement)||a.hide()}),txtLineNr.addEventListener("blur",function(b){apf.isChildOf(winGotoLine,b.toElement)||a.hide()})},show:function(){var a=g.currentEditor,b=a.ceEditor.$editor,c=a.ceEditor.$ext,d=b.getCursorPosition();this.$originalLine=d.row+1,txtLineNr.setValue(txtLineNr.getValue()||d.row+1);var e=b.renderer.textToScreenCoordinates(d.row,d.column),f=apf.getAbsolutePosition(c),h=c.offsetHeight-100;a.ceEditor.parentNode.appendChild(winGotoLine),winGotoLine.setAttribute("top",Math.min(h,e.pageY-f[1]-5)),winGotoLine.setAttribute("left",-60),winGotoLine.show(),txtLineNr.focus(),apf.tween.single(winGotoLine,{type:"left",anim:apf.tween.easeInOutCubic,from:-60,to:0,steps:8,interval:10,control:this.control={}})},hide:function(){apf.tween.single(winGotoLine,{type:"left",anim:apf.tween.EASEOUT,from:winGotoLine.$ext.offsetLeft,to:-60,steps:8,interval:10,control:this.control={},onfinish:function(){winGotoLine.hide()}})},gotoline:function(){e.initExtension(this),this.control&&this.control.stop&&this.control.stop();var a=tabEditors.getPage();if(!a)return;var b=g.currentEditor;if(!b||!b.ceEditor)return;return winGotoLine.visible?this.hide():this.show(),!1},execGotoLine:function(b,c){var d=a("ext/editors/editors").currentEditor;if(!d||!d.ceEditor)return;var e=d.ceEditor,f=e.$editor;typeof b!="number"&&(b=parseInt(txtLineNr.getValue(),10)||0),f.gotoLine(b);if(c){var g=apf.isTrue(h.model.queryValue("editors/code/@animatedscroll"));if(!g)return;var i=f.getCursorPosition(),j=d.ceEditor.$ext,k=f.renderer.textToScreenCoordinates(0,0).pageY,l=f.renderer.textToScreenCoordinates(i.row,i.column),m=j.offsetHeight/2,n=e.$editor.renderer.lineHeight,o=f.getSession().getLength(),p=f.renderer.textToScreenCoordinates(o,0).pageY+n,q=j.offsetHeight-winGotoLine.getHeight()-10,r;if(l.pageY-k<m)r=Math.max(0,l.pageY-k-5);else if(p-l.pageY<m)r=Math.min(q,m+(m-(p-l.pageY)));else if(f.isRowFullyVisible(i.row)){var s=apf.getAbsolutePosition(j);r=Math.min(q,l.pageY-s[1]-5)}else r=m-5-n;this.lineControl&&this.lineControl.stop(),apf.tween.single(winGotoLine,{type:"top",anim:apf.tween.easeInOutCubic,from:winGotoLine.getTop(),to:r,steps:8,interval:10,control:this.lineControl={}})}else{winGotoLine.hide();var t=lstLineNumber.$model,u,v=t.queryNode("gotoline/line[@nr='"+b+"']");v?u=v.parentNode:(u=apf.createNodeFromXpath(t.data,"gotoline"),v=apf.getXml("<line nr='"+b+"' />")),v!=u.firstChild&&apf.xmldb.appendChild(u,v,u.firstChild),e.focus()}},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/html/html",["require","exports","module","core/ide","core/ext","ext/code/code","text!ext/html/html.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/code/code"),g=a("text!ext/html/html.xml"),h=["htm","html","xhtml","conf","log","text","txt","xml","xsl"];c.exports=e.register("ext/html/html",{name:"HTML Editor",dev:"Ajax.org",type:e.GENERAL,alone:!0,deps:[f],markup:g,nodes:[],hook:function(){var a=this;tabEditors.addEventListener("afterswitch",function(b){a.afterSwitchOrOpen(b.nextPage)}),d.addEventListener("afteropenfile",function(b){b.editor&&b.node.$model&&a.afterSwitchOrOpen(b.node)}),d.addEventListener("updatefile",function(b){var c=tabEditors.getPage(b.newPath);if(!c||!c.$active)return;a.afterSwitchOrOpen(c)})},afterSwitchOrOpen:function(a){var b=a.$model.data.getAttribute("name"),c=b.split(".").pop();h.indexOf(c)>-1?(e.initExtension(this),this.page=a,this.enable()):this.disable()},init:function(){var a=barHtmlMode.childNodes,b;for(var c=a.length-1;c>=0;c--){b=d.barTools.appendChild(a[0]);if(b.nodeType!=1)continue;this.nodes.push(b)}btnHtmlOpen.onclick=this.onOpenPage.bind(this),this.enabled=!0},onOpenPage:function(){var a=this.page.$model.data;window.open(location.protocol+"//"+location.host+a.getAttribute("path"),"_blank")},enable:function(){if(this.enabled)return;this.enabled=!0,this.nodes.each(function(a){a.show()})},disable:function(){if(!this.enabled)return;this.enabled=!1,this.nodes.each(function(a){a.hide&&a.hide()})},destroy:function(){this.nodes.each(function(a){a.destroy&&a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/language/refactor",["require","exports","module","ace/placeholder","ext/language/marker","core/ide","ext/code/code"],function(a,b,c){var d=a("ace/placeholder").PlaceHolder,e=a("ext/language/marker"),f=a("core/ide"),g=a("ext/code/code");c.exports={renameVariableItem:null,worker:null,hook:function(a,b){var c=this;this.worker=b,b.on("enableRefactorings",function(a){c.enableRefactorings(a)}),b.on("variableLocations",function(a){c.enableVariableRefactor(a.data)});var d=[];this.refactorItem=new apf.item({caption:"Rename Variable",disabled:!0,onclick:function(){c.renameVariable()}}),this.refactorItemDup=new apf.item({caption:"Rename Variable",disabled:!0,onclick:function(){c.renameVariable()}}),d.push(this.refactorItem,this.refactorItemDup),mnuEdit.appendChild(this.refactorItem),f.addEventListener("init.ext/statusbar/statusbar",function(a){a.ext.addToolsItem(new apf.divider,3),a.ext.addToolsItem(c.refactorItemDup,4)}),g.commandManager.addCommand({name:"renameVar",exec:function(a){c.renameVariable()}}),a.hotitems.renameVar=[d[0]],a.nodes.push(d[0],d[1])},enableRefactorings:function(a){var b=a.data,c=!1;for(var d=0;d<b.length;d++){var e=b[d];e==="renameVariable"&&(c=!0)}this.refactorItem.setAttribute("disabled",!c),this.refactorItemDup.setAttribute("disabled",!c)},enableVariableRefactor:function(a){e.disableMarkerType("occurrence_main"),e.disableMarkerType("occurrence_other");var b=ceEditor.$editor.getCursorPosition(),c=a.pos,f=new d(ceEditor.$editor.session,a.length,c,a.others,"language_rename_main","language_rename_other");(b.row!==c.row||b.column<c.column||b.column>c.column+a.length)&&ceEditor.$editor.moveCursorTo(c.row,c.column),f.showOtherMarkers(),f.on("cursorLeave",function(){f.detach(),e.enableMarkerType("occurrence_main"),e.enableMarkerType("occurrence_other")})},renameVariable:function(){this.worker.emit("fetchVariablePositions",{data:ceEditor.$editor.getCursorPosition()})}}}),define("ext/statusbar/statusbar",["require","exports","module","core/ext","core/ide","ext/editors/editors","ext/settings/settings","text!ext/statusbar/statusbar.xml","text!ext/statusbar/skin.xml"],function(a,b,c){var d=a("core/ext"),e=a("core/ide"),f=a("ext/editors/editors"),g=a("ext/settings/settings"),h=a("text!ext/statusbar/statusbar.xml"),i=a("text!ext/statusbar/skin.xml");c.exports=d.register("ext/statusbar/statusbar",{name:"Status bar",dev:"Cloud9 IDE, Inc.",alone:!0,type:d.GENERAL,markup:h,skin:{id:"statusbar",data:i,"media-path":e.staticPrefix+"ext/main/style/images/","icon-path":e.staticPrefix+"ext/main/style/icons/"},expanded:!1,nodes:[],toolItems:[],prefsItems:[],horScrollAutoHide:"false",edgeDistance:3,offsetWidth:0,hook:function(){var a=this;e.addEventListener("loadsettings",function(b){var c=b.model.queryValue("auto/statusbar");c==="true"&&(a.inited?a.toggleStatusBar():a.toggleOnInit=!0);var d=b.model.queryNode("//editors/code");d&&d.hasAttribute("autohidehorscrollbar")&&(a.horScrollAutoHide=d.getAttribute("autohidehorscrollbar"))}),e.addEventListener("savesettings",function(b){var c=apf.createNodeFromXpath(b.model.data,"auto/statusbar/text()");return c.nodeValue=a.expanded,!0}),e.addEventListener("theme_change",function(b){var c=b.theme||"ace/theme/textmate";a.checkTheme(c)}),e.addEventListener("vim.changeMode",function(a){if(!window.lblInsertActive)return;a.mode==="insert"?lblInsertActive.show():lblInsertActive.hide()}),e.addEventListener("minimap.visibility",function(b){b.visibility==="shown"?a.offsetWidth=b.width:a.offsetWidth=0,a.setPosition()}),e.addEventListener("revisions.visibility",function(b){b.visibility==="shown"?a.offsetWidth=b.width:a.offsetWidth=0,a.setPosition()}),tabEditors.addEventListener("afterswitch",function(b){if(b.nextPage.type==="ext/imgview/imgview")return;a.inited||setTimeout(function(){d.initExtension(a)}),a.$changeEvent&&a.editorSession.selection.removeEventListener("changeSelection",a.$changeEvent),setTimeout(function(){f.currentEditor.ceEditor&&(a.setSelectionLength(),a.editorSession=f.currentEditor.ceEditor.$editor.session,a.editorSession.selection.addEventListener("changeSelection",a.$changeEvent=function(b){a.setSelectionLength()}))},200)}),tabEditors.addEventListener("resize",function(){a.setPosition()})},init:function(){if(typeof ceEditor=="undefined")return;var a=this,b=f.currentEditor;b&&b.ceEditor&&(b.ceEditor.parentNode.appendChild(barIdeStatus),this.sbWidth=ceEditor.$editor.renderer.scrollBar.width,barIdeStatus.setAttribute("right",this.sbWidth+this.edgeDistance),barIdeStatus.setAttribute("bottom",this.sbWidth+this.edgeDistance)),hboxStatusBarSettings.$ext.style.overflow="hidden";for(var c=0,d=this.toolItems.length;c<d;c++){var g=this.toolItems[c];typeof g.pos=="number"?mnuStatusBarTools.insertBefore(g.item,mnuStatusBarPrefs.childNodes[g.pos]):mnuStatusBarTools.appendChild(g.item)}for(var c=0,d=this.prefsItems.length;c<d;c++){var h=this.prefsItems[c];typeof h.pos=="number"?mnuStatusBarPrefs.insertBefore(h.item,mnuStatusBarPrefs.childNodes[h.pos]):mnuStatusBarPrefs.appendChild(h.item)}wrapMode.checked?wrapModeViewport.enable():wrapModeViewport.disable(),wrapMode.addEventListener("click",function(a){a.currentTarget.checked?wrapModeViewport.enable():wrapModeViewport.disable()});var b=ceEditor.$editor,i=b&&b.getTheme()||"ace/theme/textmate";this.checkTheme(i),this.toggleOnInit&&this.toggleStatusBar(),ceEditor.addEventListener("prop.autohidehorscrollbar",function(b){b.changed&&(a.horScrollAutoHide=b.value?"true":"false",apf.layout.forceResize(tabEditors.parentNode.$ext))}),e.addEventListener("track_action",function(a){a.type==="vim"&&window.lblInsertActive&&(a.action==="disable"?lblInsertActive.hide():a.mode==="insert"&&lblInsertActive.show())})},addToolsItem:function(a,b){self.mnuStatusBarTools?typeof b=="number"?mnuStatusBarTools.insertBefore(a,mnuStatusBarTools.childNodes[b]):mnuStatusBarTools.appendChild(a):this.toolItems.push({item:a,pos:b})},addPrefsItem:function(a,b){self.mnuStatusBarPrefs?typeof b=="number"?mnuStatusBarPrefs.insertBefore(a,mnuStatusBarPrefs.childNodes[b]):mnuStatusBarPrefs.appendChild(a):this.prefsItems.push({item:a,pos:b})},setSelectionLength:function(){if(typeof lblSelectionLength=="undefined")return;var a=ceEditor.$editor.getSelectionRange();if(a.start.row!=a.end.row||a.start.column!=a.end.column){var b=ceEditor.getDocument(),c=b.getTextRange(a);lblSelectionLength.setAttribute("caption","("+c.length+" Bytes)"),lblSelectionLength.show()}else lblSelectionLength.setAttribute("caption",""),lblSelectionLength.hide()},toggleStatusBar:function(){this.expanded?(this.expanded=!1,apf.setStyleClass(barIdeStatus.$ext,"",["expanded"]),apf.tween.single(hboxStatusBarSettings.$ext,{type:"width",anim:apf.tween.easeOutQuint,from:apf.isWebkit?50:52,to:1,steps:8,interval:5,onfinish:function(){hboxStatusBarSettings.hide()}})):(this.expanded=!0,apf.setStyleClass(barIdeStatus.$ext,"expanded"),hboxStatusBarSettings.show(),apf.tween.single(hboxStatusBarSettings.$ext,{type:"width",anim:apf.tween.easeOutQuint,from:1,to:apf.isWebkit?50:52,steps:8,interval:5})),g.save()},checkTheme:function(b){a(["require",b],function(a){var c=a(b);c.isDark?apf.setStyleClass(barIdeStatus.$ext,"ace_dark"):apf.setStyleClass(barIdeStatus.$ext,"",["ace_dark"]);var d=apf.getStyle(ceEditor.$editor.renderer.scroller,"background-color");d=d.replace("rgb","rgba").replace(")",""),apf.setStyleRule(".bar-status","background-color",d+", 0.0)"),apf.setStyleRule(".bar-status:hover","background-color",d+", 0.95)")})},setPosition:function(){if(self.ceEditor&&ceEditor.$editor){var a=this,b=ceEditor.$editor.renderer.scroller.clientWidth,c=ceEditor.$editor.renderer.scroller.scrollWidth,d=this.edgeDistance;if(b<c||this.horScrollAutoHide==="false")d+=this.sbWidth;this.$barMoveTimer&&clearTimeout(this.$barMoveTimer),this.$barMoveTimer=setTimeout(function(){typeof barIdeStatus!="undefined"&&(barIdeStatus.setAttribute("bottom",d),barIdeStatus.setAttribute("right",a.sbWidth+a.edgeDistance+a.offsetWidth))},50)}},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/imgview/imgview",["require","exports","module","core/ide","core/ext","text!ext/imgview/imgview.xml","ext/editors/editors"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("text!ext/imgview/imgview.xml"),g=a("ext/editors/editors");c.exports=e.register("ext/imgview/imgview",{name:"Image Viewer",dev:"Ajax.org",fileExtensions:["bmp","djv","djvu","gif","ico","jpg","jpeg","pbm","pgm","png","pnm","ppm","psd","tiff","xbm","xpm"],type:e.EDITOR,markup:f,deps:[g],nodes:[],setDocument:function(a,b){a.session=a.getNode().getAttribute("path"),imgEditor.setProperty("value",a.session);var c=new Date;imgEditor.$ext.getElementsByTagName("img")[0].setAttribute("src",imgEditor.$ext.getElementsByTagName("img")[0].getAttribute("src")+"?"+c.getTime())},hook:function(){},init:function(a){var b=imgEditor;d.addEventListener("beforefilesave",function(a){var c=a.node&&a.node.getAttribute("path");if(!c)return;if(b.value==c)return!1}),a.appendChild(b),b.show(),this.imgEditor=this.amlEditor=b},enable:function(){this.nodes.each(function(a){a.show()})},disable:function(){this.nodes.each(function(a){a.hide()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/console/console",["require","exports","module","core/ide","core/ext","core/settings","ext/console/logger","text!ext/console/console.css","text!ext/console/console.xml","text!ext/console/themes/arthur.css","ext/console/parser","ext/console/output","ext/editors/editors"],function(a,b,c){var d,e,f,g=a("core/ide"),h=a("core/ext"),i=a("core/settings"),j=a("ext/console/logger"),k=a("text!ext/console/console.css"),l=a("text!ext/console/console.xml"),m=a("text!ext/console/themes/arthur.css"),n=/^\s*!/,o=9,p=13,q=38,r=27,s=40,t=[o,p,q,r,s],u=function(a,b){g.dispatchEvent("track_action",{type:"console",cmd:a,argv:b.argv});if(h.execCommand(a,b)!==!1){var c="consolecommand."+a,d="consolecommand",e=g.dispatchEvent(c,{data:b}),f=g.dispatchEvent(d,{data:b});if(e!==!1&&f!==!1)g.onLine?g.send(b):this.write("Cannot execute command. You are currently offline.");else return!1}return!0},v={_history:[],_index:0,push:function(a){this._history.push(a),this._index=this.length()},length:function(){return this._history.length},getNext:function(){this._index+=1;var a=this._history[this._index]||"";return this._index=Math.min(this.length(),this._index),a},getPrev:function(){return this._index=Math.max(0,this._index-1),this._history[this._index]}};c.exports=h.register("ext/console/console",{name:"Console",dev:"Ajax.org",type:h.GENERAL,alone:!0,markup:l,css:k+m,height:200,hidden:!0,nodes:[],minHeight:150,autoOpen:!0,excludeParent:!0,allCommands:{},keyEvents:{},commands:{help:{hint:"show general help information and a list of available commands"},clear:{hint:"clear all the messages from the console"},switchconsole:{hint:"toggle focus between the editor and the console"},send:{hint:"send a message to the server"}},messages:{cd:function(a){var b=a.body;b.cwd&&(this.$cwd=b.cwd.replace(g.workspaceDir,"/workspace"),this.write("Working directory changed."))},error:function(a){j.log(a.body),j.log("","divider")},info:function(a){j.log(a.body),j.log("","divider")},__default__:function(a){var b=a.body;b&&(b.out&&j.logNodeStream(b.out,null,null,g),b.err&&j.logNodeStream(b.err,null,null,g),b.code&&j.log("","divider"))}},help:function(){var a=Object.keys(this.allCommands),b="\t\t\t\t",c=this;j.logNodeStream(a.sort().map(function(a){return a+b+c.allCommands[a].hint}).join("\n"),null,null,g)},clear:function(){return txtConsole&&txtConsole.clear(),!1},switchconsole:function(){apf.activeElement===txtConsoleInput?window.ceEditor&&(ceEditor.focus(),this.hide()):txtConsoleInput.focus()},showOutput:function(){tabConsole.set(1)},getCwd:function(){return this.$cwd&&this.$cwd.replace("/workspace",g.workspaceDir)},write:function(a){typeof a=="string"&&(a=a.split("\n")),a.forEach(function(a){j.log(a,"log")}),j.log("","divider")},keyupHandler:function(a){if(t.indexOf(a.keyCode)===-1)return this.commandTextHandler(a)},keydownHandler:function(a){if(t.indexOf(a.keyCode)!==-1)return this.commandTextHandler(a)},evalCmd:function(b){e||(e=a("ext/console/parser"));var c=e(b);if(!c||c.length===0)return;c[0]=c[0].replace(/["'`]/g,""),v.push(b),j.log(this.getPrompt(b),"prompt"),tabConsole.set("console");var d=!0,g=c[0];f||(f=a("ext/console/output"));var h=f.getPredefinedOutput(c);if(h!=="")this.write(h);else{g.trim().charAt(0)==="!"&&(g="bash",c[0]=c[0].replace(n,""),b=b.replace(n,""));var k={command:g,argv:c,line:b,cwd:this.getCwd(),requireshandling:!0};g.trim()==="npm"&&(k.version=i.model.queryValue("auto/node-version/@version")||"auto"),d=u(g,k)}d===!0&&this.show()},commandTextHandler:function(a){var b=a.keyCode;this.keyEvents[b]&&this.keyEvents[b](a.currentTarget)},onMessage:function(a){var b=a.message;if(!b.type)return;if(b.type==="node-data")return j.logNodeStream(b.data,b.stream,!0,g);if(b.type==="node-exit")return j.log("","divider",null,null,!0);if(b.type.match(/-data$/))return j.logNodeStream(b.data,b.stream,!1,g);if(b.type.match(/-exit$/))return j.log("","divider",!1);if(b.type!=="result")return;this.messages[b.subtype]?this.messages[b.subtype].call(this,b):this.messages.__default__.call(this,b),g.dispatchEvent("consoleresult."+b.subtype,{data:b.body})},getPrompt:function(a){var b=this.username;return b||(b=(g.workspaceId.match(/user\/(\w+)\//)||[,"guest"])[1]),"["+b+"@cloud9]:"+this.$cwd+"$"+(" "+a||"")},hook:function(){var a=this;g.addEventListener("ext.register",function(b){b.ext.commands&&apf.extend(a.allCommands,b.ext.commands)}),h.initExtension(this)},init:function(b){function e(a){!a.ctrlKey&&!a.metaKey&&!a.altKey&&!a.shiftKey&&apf.isCharacter(a.keyCode)&&txtConsoleInput.focus()}var c=this;this.panel=tabConsole,this.$cwd="/workspace",apf.importCssString(this.css),mainRow.appendChild(winDbgConsole),winDbgConsole.previousSibling.hide(),stProcessRunning.addEventListener("activate",function(){c.showOutput();var a=i.model.queryValue("auto/console/@autoshow");c.autoOpen&&apf.isTrue(a)&&c.show()}),g.addEventListener("beforeRunning",function(){c.clear()}),g.addEventListener("socketMessage",this.onMessage.bind(this)),g.addEventListener("consoleresult.internal-isfile",function(b){var c=b.data,e=c.cwd.replace(g.workspaceDir,g.davPrefix);d||(d=a("ext/editors/editors")),c.isfile?d.showFile(e):j.log("'"+e+"' is not a file.")}),txtConsoleInput.addEventListener("keyup",this.keyupHandler.bind(this)),txtConsoleInput.addEventListener("keydown",this.keydownHandler.bind(this)),tabConsole.addEventListener("afterrender",function(){txtOutput.addEventListener("keydown",e),txtConsole.addEventListener("keydown",e);var a=i.model.queryValue("auto/console/@active");a&&!this.getPage(a)&&(a=null),a||(a=this.getPages()[0].name),this.set(a)}),tabConsole.addEventListener("afterswitch",function(a){i.model.setQueryValue("auto/console/@active",a.nextPage.name),setTimeout(function(){txtConsoleInput.focus()})}),winDbgConsole.previousSibling.addEventListener("dragdrop",function(a){i.model.setQueryValue("auto/console/@height",c.height=winDbgConsole.height)}),this.nodes.push(winDbgConsole,mnuWindows.appendChild(new apf.item({id:"chkConsoleExpanded",caption:"Console",type:"check","onprop.checked":function(a){a.value?c.show():c.hide()}}))),g.addEventListener("loadsettings",function(a){a.model.queryNode("auto/console/@autoshow")||a.model.setQueryValue("auto/console/@autoshow",!0),c.height=a.model.queryValue("auto/console/@height")||c.height,apf.isTrue(a.model.queryValue("auto/console/@maximized"))?(c.show(!0),c.maximize()):apf.isTrue(a.model.queryValue("auto/console/@expanded"))?c.show(!0):c.hide(!0)}),this.keyEvents[q]=function(a){var b=v.getPrev();b&&a.setValue(b)},this.keyEvents[s]=function(a){var b=v.getNext();b?a.setValue(b):a.setValue("")},this.keyEvents[p]=function(a){var b=a.getValue().trim();if(b==="/?")return!1;c.evalCmd(b),a.setValue("")},apf.extend(this.allCommands,h.commandsLut)},maximize:function(){if(this.maximized)return;this.maximized=!0,apf.document.documentElement.appendChild(winDbgConsole),winDbgConsole.setAttribute("anchors","0 0 0 0"),this.lastZIndex=winDbgConsole.$ext.style.zIndex,winDbgConsole.removeAttribute("height"),winDbgConsole.$ext.style.zIndex=9e5,i.model.setQueryValue("auto/console/@maximized",!0),btnConsoleMax.setValue(!0)},restore:function(){if(!this.maximized)return;this.maximized=!1,mainRow.appendChild(winDbgConsole),winDbgConsole.removeAttribute("anchors"),winDbgConsole.setAttribute("height",this.height),winDbgConsole.$ext.style.zIndex=this.lastZIndex,i.model.setQueryValue("auto/console/@maximized",!1),btnConsoleMax.setValue(!1)},show:function(a){this._show(!0,a)},hide:function(a){this._show(!1,a)},_show:function(a,b){if(this.hidden!=a)return;this.hidden=!a,this.$control&&this.$control.stop();var c=this,d;a?(d={height:this.height,dbgVisibleMethod:"show",chkExpandedMethod:"check",animFrom:this.height*.95,animTo:this.height>this.minHeight?this.height:this.minHeight,animTween:"easeOutQuint"},tabConsole.show(),apf.setStyleClass(btnCollapseConsole.$ext,"btn_console_openOpen")):(d={height:34,dbgVisibleMethod:"hide",chkExpandedMethod:"uncheck",animFrom:this.height>this.minHeight?this.height:this.minHeight,animTo:65,animTween:"easeInOutCubic"},winDbgConsole.parentNode!=mainRow&&this.restore(),apf.setStyleClass(btnCollapseConsole.$ext,"",["btn_console_openOpen"]),winDbgConsole.$ext.style.minHeight=0);var e=function(){a?winDbgConsole.$ext.style.minHeight=c.minHeight+"px":tabConsole.hide(),winDbgConsole.height=d.height+1,winDbgConsole.setAttribute("height",d.height),winDbgConsole.previousSibling[d.dbgVisibleMethod](),apf.layout.forceResize(),i.model.setQueryValue("auto/console/@expanded",a),chkConsoleExpanded[d.chkExpandedMethod]()},f=apf.isTrue(i.model.queryValue("general/@animateui"));!b&&f?apf.tween.single(winDbgConsole.$ext,{control:this.$control={},type:"height",anim:apf.tween[d.animTween],from:d.animFrom,to:d.animTo,steps:8,interval:5,onfinish:e,oneach:function(){apf.layout.forceResize()}}):e()},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/searchinfiles/searchinfiles",["require","exports","module","core/ide","core/ext","core/util","ext/editors/editors","ext/filesystem/filesystem","ext/console/console","text!ext/searchinfiles/skin.xml","text!ext/searchinfiles/searchinfiles.xml"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("core/util"),g=a("ext/editors/editors"),h=a("ext/filesystem/filesystem"),i=a("ext/console/console"),j=a("text!ext/searchinfiles/skin.xml"),k=a("text!ext/searchinfiles/searchinfiles.xml");c.exports=e.register("ext/searchinfiles/searchinfiles",{name:"Search in files",dev:"Ajax.org",type:e.GENERAL,alone:!0,offline:!1,replaceAll:!1,markup:k,skin:{id:"searchinfiles",data:j,"media-path":d.staticPrefix+"/ext/searchinfiles/images/"},commands:{searchinfiles:{hint:"search for a string through all files in the current workspace"}},pageTitle:"Search Results",pageID:"pgSFResults",hotitems:{},nodes:[],hook:function(){var a=this;this.nodes.push(mnuEdit.appendChild(new apf.divider),mnuEdit.appendChild(new apf.item({caption:"Search in Files...",onclick:function(){a.toggleDialog(!1)}}))),this.hotitems.searchinfiles=[this.nodes[1]]},init:function(a){this.txtFind=txtSFFind,this.btnFind=btnSFFind,this.btnFind.onclick=this.execFind.bind(this,!1),this.txtReplace=txtReplace,this.btnReplaceAll=btnReplaceAll,this.btnReplaceAll.onclick=this.execFind.bind(this,!0);var b=this;this.txtFind.$ext.cols=this.txtFind.cols,winSearchInFiles.onclose=function(){typeof ceEditor!="undefined"&&ceEditor.focus(),trFiles.removeEventListener("afterselect",b.setSearchSelection)},winSearchInFiles.onshow=function(){trFiles.addEventListener("afterselect",b.setSearchSelection),b.setSearchSelection()},txtSFFind.addEventListener("keydown",function(a){switch(a.keyCode){case 13:if(!a.shiftKey)return b.execFind(!1),!1}})},setSearchSelection:function(a){var b;a&&a.selected?b=a.selected:b=this.getSelectedTreeNode();var c=b.getAttribute("path").split("/"),d="";b.getAttribute("type")=="folder"?d=c[c.length-1]:b.getAttribute("type")=="file"&&(d=c[c.length-2]),d.length>25&&(d=d.substr(0,22)+"..."),rbSFSelection.setAttribute("label","Selection ( "+d+" )")},getSelectedTreeNode:function(){var a=self.trFiles?trFiles.selected:h.model.queryNode("folder[1]");a||(a=trFiles.xmlRoot.selectSingleNode("folder[1]"));while(a.tagName!="folder")a=a.parentNode;return a},toggleDialog:function(a,b){e.initExtension(this);if(apf.isWin&&(location.host.indexOf("localhost")>-1||location.host.indexOf("127.0.0.1")>-1))return f.alert("Search in Files","Not Supported","I'm sorry, searching through files is not yet supported on the Windows platform.");if(!winSearchInFiles.visible||b||this.$lastState!=a){var c=g.currentEditor;if(c){var h=c.getDocument().getTextRange(c.getSelection().getRange());h&&this.txtFind.setValue(h)}d.dispatchEvent("exitfullscreen"),winSearchInFiles.show()}else winSearchInFiles.hide();return!1},onHide:function(){var a=g.currentEditor;a&&a.ceEditor&&a.ceEditor.focus()},searchinfiles:function(){return this.toggleDialog(!1,!0)},getOptions:function(){var a=this,b="0";chkSFMatchCase.checked&&(b="1");var c="0";return chkSFRegEx.checked&&(c="1"),{query:txtSFFind.value,needle:txtSFFind.value,pattern:ddSFPatterns.value,casesensitive:b,regexp:c,replaceAll:a.replaceAll?"true":"false",replacement:txtReplace.value}},execFind:function(a){var b=this;b.replaceAll=a,winSearchInFiles.hide(),i.show(),this.$panel?tabConsole.appendChild(this.$panel):(this.$panel=tabConsole.add(this.pageTitle,this.pageID),this.$panel.setAttribute("closebtn",!0),this.$panel.appendChild(trSFHbox),tabConsole.set(b.pageID),trSFHbox.show(),trSFResult.setProperty("visible",!0),this.$model=trSFResult.getModel(),this.$model.addEventListener("afterload",function(){tabConsole.set(b.pageID),trSFResult.addEventListener("afterselect",function(a){var b=trFiles.xmlRoot.selectSingleNode("folder[1]"),c=trSFResult.selected,d=0,e="",f;if(c.tagName=="d:maxreached"||c.tagName=="d:querydetail")return;c.tagName=="d:excerpt"?(f=c.parentNode.getAttribute("path"),d=c.getAttribute("line"),e=c.parentNode.getAttribute("query")):f=c.getAttribute("path"),g.showFile(b.getAttribute("path")+"/"+f,d,0,e)})}),this.$panel.addEventListener("afterclose",function(){return this.removeNode(),!1})),tabConsole.set(this.pageID);var c=this.$currentScope=grpSFScope.value=="projects"?trFiles.xmlRoot.selectSingleNode("folder[1]"):this.getSelectedTreeNode(),e=this.getOptions(),h=txtSFFind.value;e.query=h.replace(/\n/g,"\\n"),b.replaceAll||(e.replacement="");var j=h.trim().replace(/([\[\]\{\}])/g,"\\$1");b.$model.clear(),trSFResult.setAttribute("empty-message","Searching for '"+j+"'..."),davProject.report(c.getAttribute("path"),"codesearch",e,function(a,c,d){b.replaceAll=!1;var g=parseInt(a.getAttribute("count"),10);if(c!==apf.SUCCESS||!g){var h=[];return f.isTrue(e.casesensitive)&&h.push("case sensitive"),f.isTrue(e.regexp)&&h.push("regexp"),h.length>0?h="("+h.join(", ")+")":h="",trSFResult.setAttribute("empty-message","No matches for '"+j+"' "+h)}b.$panel.setAttribute("caption",b.pageTitle+" ("+g+")"),b.$model.load(a)}),d.dispatchEvent("track_action",{type:"searchinfiles"})},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/consolehints/consolehints",["require","exports","module","core/ide","core/ext","text!ext/consolehints/consolehints.xml","text!ext/consolehints/consolehints.css","ext/console/console"],function(a,b,c){"use strict";var d=a("core/ide"),e=a("core/ext"),f=a("text!ext/consolehints/consolehints.xml"),g=a("text!ext/consolehints/consolehints.css"),h=a("ext/console/console"),i,j,k,l,m=/(\w+)$/,n=function(a,b){return a.filter(function(a){return a!==b&&a.search(new RegExp("^"+b))!==-1}).sort()},o=function(a){clearTimeout(l);var b=a.target||a.srcElement;while(b&&b.nodeType===3&&b.tagName!=="A"&&b!==i)b=b.parentNode;if(b.tagName!=="A")return;var c=this;l=setTimeout(function(){c.select(b)},5)},p,q=function(a){if(p)return p;var b=apf.getStyle(a,"font"),c=document.createElement("span");return c.style.font=b,c.innerHTML="m",document.body.appendChild(c),p={width:c.offsetWidth,height:c.offsetHeight},document.body.removeChild(c),p},r=function(a){var b=[a.base,a.cmdName,a.cursorPos,!!a.cmd].join(",");if(!a.cmd)return'<a href="#" data-hint="'+b+'">'+a.cmdName+"</a>";var c="",d=a.cmd.hotkey;if(d){var e=apf.isMac?apf.hotkeys.toMacNotation(d):d;c='<span class="hints_hotkey">'+e+"</span>"}var f="<span>"+a.cmd.hint+"</span>"+c;return'<a href="#" data-hint="'+b+'">'+a.cmdName+f+"</a>"};c.exports=e.register("ext/consolehints/consolehints",{name:"ConsoleHints",dev:"Ajax.org",type:e.GENERAL,alone:!0,markup:f,css:g,deps:[h],hidden:!0,nodes:[],autoOpen:!0,excludeParent:!0,init:function(){var a=this,b=function(){apf.importCssString(a.css),i=document.getElementById("barConsoleHints"),apf.addListener(i,"mousemove",o.bind(a)),apf.addListener(i,"click",a.click.bind(a)),apf.addListener(document,"click",function(b){var c=b.target;(c.parentNode!=i||c!=i)&&a.hide()}),h.messages.commandhints=function(a){var b=a.body;for(var c in b)h.allCommands[c]=b[c]},h.messages["internal-autocomplete"]=function(b){var c=b.body;a.show(txtConsoleInput,"",c.matches,txtConsoleInput.getValue().length-1)},setTimeout(function(){d.send({command:"commandhints",cwd:h.getCwd()})},1e3),txtConsoleInput.addEventListener("keyup",function(b){if(b.keyCode===38||b.keyCode===40||b.keyCode===9)return;var c=function(c){var d=b.currentTarget;c.length&&c[0]!=="[PATH]"?a.show(d,"",c,d.getValue().length-1):a.hide()};if(b.keyCode===27){a.hide();return}var d=b.currentTarget.getValue();d?a.getCmdCompletion(d,c):a.hide()});var b={38:"selectUp",40:"selectDown",27:"hide",13:"onEnterKey",9:"onTabKey"};Object.keys(b).forEach(function(c){var d=h.keyEvents[c];h.keyEvents[c]=function(e){i.style.display==="none"&&d?d(e):a[b[c]].call(a)||(d(e),a.hide())}})};h&&h.messages?b():d.addEventListener("init.ext/console/console",b)},show:function(a,b,c,d){k&&k.stop&&k.stop();var e=c.map(function(a){var c=b?b+a.substr(1):a;return r({base:b,cmdName:c,cursorPos:d,cmd:h.allCommands[c]})}).join("");i.innerHTML=e,j=null,apf.getStyle(i,"display")==="none"&&(i.style.display="block",i.visible=!0);var f=q(a.$ext);i.style.left=parseInt(d*f.width,10)+"px"},hide:function(){return i.style.display="none",i.visible=!1,j=null,!0},click:function(a){var b=a.target;b.parentNode!=i&&b!=i&&(b=b.parentNode);var c=b.getAttribute("data-hint").split(","),d=c[1],e=c[3]==="true";e&&(d+=" ");var f=txtConsoleInput.getValue(),g=f.search(m);g!==-1?f=f.replace(m,d):f+=d,txtConsoleInput.setValue(f.replace("/?","")),txtConsoleInput.focus();var h=txtConsoleInput.querySelector("input");h&&(h.selectionStart=h.selectionEnd=g+d.length),this.hide()},getCmdCompletion:function(a,b,c){var d=a.match(/(\w+)\s+(.*)$/);if(d){var e=h.allCommands[d[1]];if(!e)return b([]);var f=e.commands,g;f&&f["[PATH]"]?g=["[PATH]"]:f?g=n(Object.keys(f),d[2]):g=[],b(g,d[1],d[2])}else(c||b)(n(Object.keys(h.allCommands),a))},onTabKey:function(){this.hide();var a=txtConsoleInput.getValue();if(!a)return;return this.getCmdCompletion(a,function(b,c,e){b.length&&(b[0]==="[PATH]"?d.send({command:"internal-autocomplete",argv:[c,e],cwd:h.getCwd()}):a=a.replace(m,b[0]))},function(b){b.length&&(a=b[0])}),txtConsoleInput.setValue(a),setTimeout(function(){txtConsoleInput.focus()},50),!0},onEnterKey:function(){var a=!1,b=i.childNodes;for(var c=0,d=b.length;c<d;++c)if(b[c].className==="selected"){this.click({target:b[c]}),a=!0;break}return a},selectUp:function(){var a=j-1;return a<0&&(a=i.childNodes.length-1),this.select(a),!0},selectDown:function(){var a=j+1;return a>i.childNodes.length&&(a=0),this.select(a),!0},select:function(a){clearTimeout(l);var b=i.childNodes;typeof a=="number"&&(a=b[a]);for(var c=0,d=b.length;c<d;++c){if(b[c]===a){j=c;continue}b[c].className=""}a&&(a.className="selected")},visible:function(){return i&&!!i.visible},selected:function(){return j&&i.childNodes?i.childNodes[j]:!1}})}),define("ext/nodeunit/nodeunit",["require","exports","module","core/ide","core/ext","ext/filesystem/filesystem","ext/newresource/newresource","ext/noderunner/noderunner","ext/testpanel/testpanel","ext/console/console","text!ext/nodeunit/nodeunit.template","treehugger/js/parse","treehugger/traverse"],function(a,b,c){function m(a){if(a.indexOf('"')>-1){var b=[],c=a.split('"');return c.each(function(a){b.push(a==""?"'\"'":'"'+a+'"')}),"concat("+b.join(", ")+")"}return'"'+a+'"'}var d=a("core/ide"),e=a("core/ext"),f=a("ext/filesystem/filesystem"),g=a("ext/newresource/newresource"),h=a("ext/noderunner/noderunner"),i=a("ext/testpanel/testpanel"),j=a("ext/console/console"),k=a("text!ext/nodeunit/nodeunit.template"),l=a("treehugger/js/parse");a("treehugger/traverse"),c.exports=e.register("ext/nodeunit/nodeunit",{name:"Node Unit Test Manager",dev:"Ajax.org",alone:!0,type:e.GENERAL,nodes:[],template:k,hook:function(){var a=this;d.addEventListener("init.ext/testpanel/testpanel",function(){e.initExtension(a)})},init:function(){var a=this;this.nodes.push(mnuFilter.insertBefore(new apf.item({type:"radio",value:"nodeunit",caption:"Node Unit Tests"}),mnuFilter.getElementsByTagNameNS(apf.ns.aml,"divider")[1]),mnuTestNew.appendChild(new apf.item({caption:"Node Unit Test",onclick:function(){a.createAndOpenTest()}}))),davProject.report(d.davPrefix,"filelist",{},function(a,b,c){if(b==apf.ERROR){if(a&&a.indexOf("jsDAV_Exception_FileNotFound")>-1)return;return}if(b==apf.TIMEOUT)return;var e=a.selectNodes("//d:href");for(var f,g=0;g<e.length;g++){f=e[g];if(f.firstChild.nodeValue.match(/_test\.js$/)){var h=apf.getXml("<file />"),j=d.davPrefix+"/"+f.firstChild.nodeValue;h.setAttribute("name",j.split("/").pop()),h.setAttribute("path",j),h.setAttribute("type","nodeunit"),apf.xmldb.appendChild(i.findParent(j),h)}}}),d.addEventListener("afterfilesave",function(a){var b=a.node,c=b.getAttribute("name");if(!c.match(/_test.js$/))return;var d=b.getAttribute("path"),e=mdlTests.queryNode("//file[@path="+m(d)+"]");e||(e=apf.xmldb.getCleanCopy(b),e.setAttribute("type","nodeunit"),apf.xmldb.appendChild(i.findParent(d),e))}),d.addEventListener("test.expand.nodeunit",function(b){var c=b.xmlNode;a.reloadTestFile(c)}),d.addEventListener("test.stop",function(b){if(!a.running)return;a.stop()}),d.addEventListener("test.icon.nodeunit",function(a){return"page_white_code.png"}),d.addEventListener("test.run.nodeunit",function(b){function k(){var b=apf.queryNodes(c,"test[@status=0 or error]");if(a.stopping){i.setError(c,"Test Cancelled");return}b.length?i.setError(c,"Failed "+b.length+" tests of "+c.selectNodes("test").length):i.setPass(c,"("+c.selectNodes("test").length+")")}function l(a){var b;g.length?(b=g.join("")+a.data,g=[]):b=a.data,b=b.replace(/\s*Summary\:\s+Total number of tests[\s\S]*$/,""),b=b.substr(1);var d=b.match(/\[(\d+)m[\s\S]*?(?:$|(?=\[[1-9]\d*m))/g);if(!d)return;var e;for(var f=0;f<d.length;f++){var h=d[f];if(h.substr(0,3)=="[31"){e=h.match(/^\[31m\[(\d+)\/(\d+)\]\s+(.*?)\s+FAIL.*([\S\s]*?)(?=\[\d+m|$)/);if(!e)continue;var j=c.selectSingleNode("test[@name="+m(e[3])+"]");if(!j){var l=c.ownerDocument;j=l.createElement("test"),j.setAttribute("name",e[3]),apf.xmldb.appendChild(c,j)}i.setError(j,"Test Failed"),i.setLog(c,"completed test "+e[2]+" of "+e[1]);var n=j.ownerDocument.createElement("error");n.setAttribute("name",e[4]),apf.xmldb.appendChild(j,n),e[2]==e[1]&&k()}else if(h.substr(0,3)=="[32"){e=h.match(/^\[32m\[(\d+)\/(\d+)\]\s+(.*?)\sOK[\s\S]{4,6}/);if(!e)continue;var j=c.selectSingleNode("test[@name="+m(e[3])+"]");if(!j){var l=c.ownerDocument;j=l.createElement("test"),j.setAttribute("name",e[3]),apf.xmldb.appendChild(c,j)}i.setPass(j),i.setLog(c,"completed test "+e[2]+" of "+e[1]),e[2]==e[1]&&k()}}}var c=b.xmlNode,e=b.next;j.autoOpen=!1,a.stopping=!1,a.running=!0,a.lastTestNode=c,i.setLog(c,"running"),i.expandTests&&(dgTestProject.$hasLoadStatus(c,"potential")?dgTestProject.slideOpen(null,c):a.reloadTestFile(c));var f=setInterval(function(){c.selectNodes("test").length&&(clearTimeout(f),l({data:""}))},10),g=[];d.addEventListener("socketMessage",function(b){b.message.type=="node-data"?l(b.message):b.message.type.indexOf("node-exit")>-1&&(d.removeEventListener("socketMessage",arguments.callee),a.stopping?a.stopped():(a.running=!1,c.getAttribute("status")==-1&&i.setError(c,"failed"),stProcessRunning.active?stProcessRunning.addEventListener("deactivate",function(){e(),stProcessRunning.removeEventListener("deactivate",arguments.callee)}):e()))});var n=c.getAttribute("path").slice(d.davPrefix.length+1).replace("//","/");h.run(n,[],!1)}),d.addEventListener("socketMessage",function(b){if(a.disabled)return;var c=b.message;if(c.type&&c.type!="watcher"||!c.path)return;var e=c.path.slice(d.workspaceDir.length);if(e!=a.testpath)return;switch(c.subtype){case"create":break;case"remove":break;case"change":var f=mdlTests.selectSingleNode("//file[@path='"+c.path+"']");a.reloadTestFile(f)}}),this.enable()},stop:function(){this.stopping=!0,this.lastTestNode&&i.setLog(this.lastTestNode.tagName=="file"?this.lastTestNode:this.lastTestNode.parentNode,"Stopping..."),h.stop()},stopped:function(a){this.stopping=!1,this.running=!1,i.stopped(),j.autoOpen=!0},createAndOpenTest:function(){var a=this,b=(d.davPrefix+"/"+this.testpath).split("/"),c=[],e=function(){c.push(b.shift());if(b.length==0){g.newfile("_test.js",a.template,d.davPrefix+"/");return}f.exists(c.join("/")+"/"+b[0],function(a,d,g){a?e():f.webdav.exec("mkdir",[c.join("/"),b[0]],function(a){e()})})};e()},reloadTestFile:function(a){f.readFile(a.getAttribute("path"),function(b,c,d){if(c==apf.SUCCESS){var e,f=[],g=l.parse(b),h=a.ownerDocument;g.traverseTopDown('Assign(PropAccess(Var("module"),"exports"), ObjectInit(inits))',function(b){b.inits.forEach(function(b){var c=b[0].value;e=a.selectSingleNode("test[@name="+m(c)+"]"),e||(e=h.createElement("test"),e.setAttribute("name",c),apf.xmldb.appendChild(a,e)),f.push(e)})});var i=a.childNodes;for(var j=i.length-1;j>=0;j--)f.indexOf(i[j])==-1&&apf.xmldb.removeNode(i[j])}})},enable:function(){this.nodes.each(function(a){a.enable()}),this.disabled=!1},disable:function(){this.nodes.each(function(a){a.disable()}),this.disabled=!0},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[],i.unregister(this)}})}),define("ext/beautify/beautify",["require","exports","module","core/ext","core/ide","core/util","ext/code/code","ext/editors/editors","ace/range","ext/beautify/res/jsbeautify/jsbeautify-min","text!ext/beautify/settings.xml","ext/settings/settings","ext/settings/settings"],function(a,b,c){var d=a("core/ext"),e=a("core/ide"),f=a("core/util"),g=a("ext/code/code"),h=a("ext/editors/editors"),i=a("ace/range").Range,j=a("ext/beautify/res/jsbeautify/jsbeautify-min"),k=a("text!ext/beautify/settings.xml"),l=a("ext/settings/settings");c.exports=d.register("ext/beautify/beautify",{name:"JS Beautify",dev:"Ajax.org",alone:!0,type:d.GENERAL,commands:{beautify:{hint:"reformat selected JavaScript code in the editor",msg:"Beautifying selection."}},nodes:[],hotitems:{},beautify:function(){if(this.disabled===!0)return;var a=h.currentEditor,b=a.getSelection(),c=a.getDocument(),d=b.getRange(),e=c.getTextRange(d),g=apf.isTrue(l.model.queryValue("beautify/jsbeautify/@preserveempty")),k=apf.isTrue(l.model.queryValue("beautify/jsbeautify/@keeparrayindentation")),m=apf.isTrue(l.model.queryValue("beautify/jsbeautify/@jslinthappy")),n=l.model.queryValue("beautify/jsbeautify/@braces")||"end-expand",o=l.model.queryValue("editors/code/@tabsize"),p=apf.isTrue(l.model.queryValue("editors/code/@softtabs"))?" ":"\t";p=="\t"&&(o=1);var q=c.getLine(d.start.row),r=q.match(/^\s*/)[0],s=!1;d.start.column<r.length?d.start.column=0:s=!0;try{e=j.js_beautify(e,{indent_size:o,indent_char:p,preserve_newlines:g,keep_array_indentation:k,brace_style:n,jslint_happy:m}),e=e.replace(/^/gm,r),s&&(e=e.trim())}catch(t){f.alert("Error","This code could not be beautified","Please correct any JavaScript errors and try again");return}var u=c.replace(d,e);b.setSelectionRange(i.fromPoints(d.start,u))},init:function(){var a=this;tabEditors.addEventListener("afterswitch",function(){a.$selectionEvent&&a.editorSession.selection.removeEventListener("changeSelection",a.$selectionEvent),setTimeout(function(){h.currentEditor.ceEditor&&(a.editorSession=h.currentEditor.ceEditor.$editor.session,a.editorSession.selection.addEventListener("changeSelection",a.$selectionEvent=function(b){if(typeof beautify_selection=="undefined")return;var c=ceEditor.$editor.getSelectionRange();c.start.row==c.end.row&&c.start.column==c.end.column?(a.disabled=!0,beautify_selection.disable()):(a.disabled=!1,beautify_selection.enable())}))},200)})},hook:function(){var b=this,c=new apf.item({id:"beautify_selection",disabled:"true",caption:"Beautify Selection",onclick:function(){b.beautify()}});this.nodes.push(c),e.addEventListener("init.ext/statusbar/statusbar",function(a){a.ext.addToolsItem(c,1)}),this.hotitems.beautify=[this.nodes[0]],g.commandManager.addCommand({name:"beautify",exec:function(){b.beautify()}}),a("ext/settings/settings").addSettings("JS Beautify",k),e.addEventListener("loadsettings",function(a){var b=a.model;b.queryNode("beautify/jsbeautify")||(b.setQueryValue("beautify/jsbeautify/@preserveempty","true"),b.setQueryValue("beautify/jsbeautify/@keeparrayindentation","false"),b.setQueryValue("beautify/jsbeautify/@jslinthappy","false"),b.setQueryValue("beautify/jsbeautify/@braces","end-expand"),b.setQueryValue("editors/code/@tabsize","4"),b.setQueryValue("editors/code/@softtabs","true"))}),d.initExtension(this)},enable:function(){this.nodes.each(function(a){a.enable()}),this.disabled=!1},disable:function(){this.nodes.each(function(a){a.disable()}),this.disabled=!0},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/stripws/stripws",["require","exports","module","core/ext","core/ide","ext/editors/editors","ext/settings/settings","text!ext/stripws/settings.xml","ext/settings/settings"],function(a,b,c){var d=a("core/ext"),e=a("core/ide"),f=a("ext/editors/editors"),g=a("ext/settings/settings"),h=a("text!ext/stripws/settings.xml"),i=c.exports.strip=function(){if(!f.currentEditor.ceEditor)return;var a=f.currentEditor.ceEditor.$editor,b=a.getSession(),c=b.getDocument(),d=c.getAllLines();for(var e=0,g=d.length;e<g;e++){var h=d[e],i=h.search(/\s+$/);i!==-1&&c.removeInLine(e,i,h.length)}b.$syncInformUndoManager()};c.exports=d.register("ext/stripws/stripws",{name:"Strip Whitespace",dev:"Ajax.org",alone:!0,type:d.GENERAL,commands:{stripws:{hint:"strip whitespace at the end of each line"}},nodes:[],init:function(){},hook:function(){var b=this,c=new apf.item({caption:"Strip Whitespace",onclick:function(){d.initExtension(b),i()}}),f=c.cloneNode(!0);this.nodes.push(e.mnuEdit.appendChild(new apf.divider),e.mnuEdit.appendChild(c),f),e.addEventListener("init.ext/statusbar/statusbar",function(a){try{a.ext.addToolsItem(f,2)}catch(a){}}),e.addEventListener("beforefilesave",function(a){var c=g.model.data.selectSingleNode("editors/code/@stripws");c&&c.firstChild&&c.firstChild.nodeValue=="true"&&b.stripws()}),a("ext/settings/settings").addSettings("General",h)},stripws:function(){i()},enable:function(){this.nodes.each(function(a){a.enable()}),this.stripws=function(){i()}},disable:function(){this.nodes.each(function(a){a.disable()}),this.stripws=function(){}},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/zen/zen",["require","exports","module","ext/zen/firmin-all-min","core/ext","core/ide","ext/editors/editors","ext/settings/settings","text!ext/zen/zen.xml","text!ext/zen/skin.xml"],function(a,b,c){a("ext/zen/firmin-all-min");var d=a("core/ext"),e=a("core/ide"),f=a("ext/editors/editors"),g=a("ext/settings/settings"),h=a("text!ext/zen/zen.xml"),i=a("text!ext/zen/skin.xml");c.exports=d.register("ext/zen/zen",{name:"Zen mode",dev:"Ajax.org",alone:!0,type:d.GENERAL,markup:h,skin:{id:"zen",data:i,"media-path":e.staticPrefix+"ext/main/style/images/","icon-path":e.staticPrefix+"ext/main/style/icons/"},isFocused:!1,neverShown:!0,defaultOffset:11,offsetWidth:11,initialWidth:.7,handleLeftMove:!1,handleRightMove:!1,commands:{zen:{hint:"toggle zen mode"},zenslow:{hint:"toggle zen mode in slow-motion"}},nodes:[],hook:function(){var a=this;e.addEventListener("loadsettings",function(b){var c=b.model.queryValue("auto/zen");c&&(a.initialWidth=c)}),e.addEventListener("savesettings",function(b){var c=apf.createNodeFromXpath(b.model.data,"auto/zen/text()");return c.nodeValue=a.initialWidth,!0}),e.addEventListener("minimap.visibility",function(b){b.visibility==="shown"?a.offsetWidth=a.defaultOffset+b.width:a.offsetWidth=a.defaultOffset,a.updateButtonPosition()}),e.addEventListener("revisions.visibility",function(b){b.visibility==="shown"?a.offsetWidth=a.defaultOffset+b.width:a.offsetWidth=a.defaultOffset,a.updateButtonPosition()}),tabEditors.addEventListener("afterswitch",function(b){if(b.nextPage.type==="ext/imgview/imgview")return;a.inited||setTimeout(function(){d.initExtension(a)})})},init:function(){var a=this;this.animateZen=document.createElement("div"),this.animateZen.setAttribute("id","animateZen"),this.animateZen.setAttribute("style","display: none"),document.body.appendChild(this.animateZen),this.animateZenPosition=document.createElement("div"),this.animateZenPosition.setAttribute("id","animateZenPosition"),this.animateZenPosition.setAttribute("style","display: none"),document.body.appendChild(this.animateZenPosition),this.zenHandleLeft=document.createElement("div"),this.zenHandleLeft.setAttribute("id","zenHandleLeft"),this.zenHandleLeft.setAttribute("style","opacity: 0.0"),document.body.appendChild(this.zenHandleLeft),this.zenHandleRight=document.createElement("div"),this.zenHandleRight.setAttribute("id","zenHandleRight"),this.zenHandleRight.setAttribute("style","opacity: 0.0"),document.body.appendChild(this.zenHandleRight),this.setupHandleListeners();var b=f.currentEditor;b&&b.ceEditor&&b.ceEditor.parentNode.appendChild(btnZenFullscreen),vbMain.parentNode.appendChild(new apf.vbox({anchors:"0 0 0 0",id:"vbZen","class":"vbZen",visible:!1})),setTimeout(function(){a.updateButtonPosition()}),this.animateZen=document.getElementById("animateZen"),this.animateZenPosition=document.getElementById("animateZenPosition"),vbZen.addEventListener("resize",function(b){a.isFocused&&a.calculatePositions()}),e.addEventListener("exitfullscreen",function(){a.escapeFromZenMode(!1,!0)})},updateButtonPosition:function(){if(!window.btnZenFullscreen)return;var a=20;ceEditor.$editor&&(a=ceEditor.$editor.renderer.scrollBar.width),btnZenFullscreen.setAttribute("right",a+this.offsetWidth)},calculatePositions:function(){var a=this,b=window.innerHeight-32+"px";tabEditors.parentNode.$ext.style.height=b,a.animateZen.style.height=window.innerHeight+"px";var c=window.innerWidth*a.initialWidth,d=(window.innerWidth-c)/2;tabEditors.parentNode.$ext.style.width=a.animateZen.style.width=c+"px",a.animateZen.style.left=d+"px",a.zenHandleLeft.style.height=window.innerHeight+"px",a.zenHandleLeft.style.left=d+0+"px",a.zenHandleRight.style.height=window.innerHeight+"px",a.zenHandleRight.style.left=d+c-5+"px"},setupHandleListeners:function(){var a=this;apf.addListener(this.zenHandleLeft,"mousedown",function(b){a.browserWidth=window.innerWidth,a.handleLeftMove=!0}),apf.addListener(this.zenHandleRight,"mousedown",function(b){a.browserWidth=window.innerWidth,a.handleRightMove=!0}),apf.addListener(document,"mousemove",function(b){if(a.isFocused){function c(){a.initialWidth<.4?a.initialWidth=.4:a.initialWidth>.95&&(a.initialWidth=1),a.calculatePositions(),apf.layout.forceResize(tabEditors.parentNode.$ext)}if(a.handleLeftMove)a.initialWidth=1-b.clientX*2/a.browserWidth,c();else if(a.handleRightMove){var d=a.browserWidth-b.clientX;a.initialWidth=1-d*2/a.browserWidth,c()}}}),apf.addListener(document,"mouseup",function(){if(!a.isFocused)return;(a.handleLeftMove||a.handleRightMove)&&g.save(),a.handleLeftMove=!1,a.handleRightMove=!1,apf.layout.forceResize()})},zen:function(){this.toggleFullscreenZen()},zenslow:function(){this.toggleFullscreenZen({htmlEvent:{shiftKey:!0}})},toggleFullscreenZen:function(a){var b=!1;a&&(b=a.htmlEvent.shiftKey),this.isFocused?this.escapeFromZenMode(b,!1):this.enterIntoZenMode(b)},checkBrowserCssTransforms:function(){var a=apf.isWebkit&&(apf.versionSafari>=3.1||apf.versionChrome>=11),b=apf.isGecko&&apf.versionGecko>=4,c=apf.isOpera&&apf.versionOpera>=10;return a||b||c},enterIntoZenMode:function(a){var b=this,c=apf.document.activeElement;this.saveTabEditorsParentStyles(),self.btnZenFullscreen&&btnZenFullscreen.setAttribute("class","full");var d=window.innerWidth,e=d*this.initialWidth,g=(d-e)/2+"px",h=window.innerHeight+"px";if(this.checkBrowserCssTransforms())this.matchAnimationWindowPosition(),this.setAceThemeBackground(),f.disableTabResizeEvent(),this.placeTabIntoAnimationWindow(),Firmin.animate(this.animateZen,{height:h,left:g,top:"0",width:e+"px",timingFunction:"ease-in-out"},a?3.7:.7,function(){b.isFocused=!0;var a="display:block;top:0;height:"+h+";left:"+g+";width:"+e+"px";b.animateZen.setAttribute("style",a),apf.layout.forceResize(),Firmin.animate(b.zenHandleLeft,{opacity:1,timingFunction:"ease-in-out"},.7).animate({opacity:0},.5),Firmin.animate(b.zenHandleRight,{opacity:1,timingFunction:"ease-in-out"},.7).animate({opacity:0},.5),setTimeout(function(){c&&c.getHeight()&&c.$focus()},100)}),vbZen.show(),Firmin.animate(vbZen.$ext,{opacity:"1"},a?3.5:.5);else{this.isFocused=!0,vbZen.show(),vbZen.$ext.style.opacity="1",f.disableTabResizeEvent(),this.placeTabIntoAnimationWindow(),this.animateZen.style.display="block";var i="display:block;top:0;height:"+h+";left:"+g+";width:"+e+"px";this.animateZen.setAttribute("style",i),b.zenHandleLeft.style.opacity="1.0",b.zenHandleRight.style.opacity="1.0",setTimeout(function(){apf.tween.single(b.zenHandleLeft,{type:"opacity",anim:apf.tween.easeInOutCubic,from:1,to:0,steps:8,interval:20,control:this.control={},onfinish:function(){}}),apf.tween.single(b.zenHandleRight,{type:"opacity",anim:apf.tween.easeInOutCubic,from:1,to:0,steps:8,interval:20,control:this.control={},onfinish:function(){}})},700),apf.layout.forceResize(),setTimeout(function(){c&&c.getHeight()&&c.$focus()},100)}},escapeFromZenMode:function(a,b){if(this.isFocused===!1)return;var c=this,d=apf.document.activeElement;btnZenFullscreen.setAttribute("class","notfull"),this.isFocused=!1,this.zenHandleLeft.style.opacity="0.0",this.zenHandleRight.style.opacity="0.0",tabEditors.parentNode.$ext.style.width="100%";if(this.checkBrowserCssTransforms()){f.setTabResizeValues(this.animateZenPosition);var e=this.animateZenPosition.style.left,g=this.animateZenPosition.style.top,h=this.animateZenPosition.style.width,i=this.animateZenPosition.style.height,j=apf.getHtmlInnerWidth(this.animateZen);this.animateZen.style.width=j+"px";var k=apf.getHtmlInnerHeight(this.animateZen);this.animateZen.style.height=k+"px",Firmin.animate(this.animateZen,{height:i,width:h,left:e,top:g,timingFunction:"ease-in-out"},a?3.7:.7,function(){c.animateZen.style.display="none",c.resetTabEditorsParentStyles(),apf.document.documentElement.appendChild(tabEditors.parentNode),f.enableTabResizeEvent(),apf.layout.forceResize(tabEditors.parentNode.$ext),tabEditors.parentNode.$ext.style.position="absolute",setTimeout(function(){d&&d.getHeight()&&b===!1&&d.$focus()},100)}),Firmin.animate(vbZen.$ext,{opacity:"0"},a?3.5:.5,function(){vbZen.hide()})}else this.resetTabEditorsParentStyles(),apf.document.documentElement.appendChild(tabEditors.parentNode),f.enableTabResizeEvent(),this.animateZen.style.display="none",vbZen.$ext.style.opacity="0",vbZen.hide(),tabEditors.parentNode.$ext.style.position="absolute",apf.layout.forceResize(),setTimeout(function(){d&&d.getHeight()&&b===!1&&d.$focus()},100)},saveTabEditorsParentStyles:function(){this.teMarginLeft=tabEditors.parentNode.$ext.style.marginLeft,this.teMarginRight=tabEditors.parentNode.$ext.style.marginRight,this.teLeft=tabEditors.parentNode.$ext.style.left,this.teTop=tabEditors.parentNode.$ext.style.top},resetTabEditorsParentStyles:function(){tabEditors.parentNode.$ext.style.marginLeft=this.teMarginLeft,tabEditors.parentNode.$ext.style.marginRight=this.teMarginRight,tabEditors.parentNode.$ext.style.left=this.teLeft,tabEditors.parentNode.$ext.style.top=this.teTop},matchAnimationWindowPosition:function(){var a=apf.getAbsolutePosition(tabEditors.parentNode.$ext),b=tabEditors.parentNode.getWidth(),c=tabEditors.parentNode.getHeight();this.animateZen.style.left=a[0]+"px",this.animateZen.style.top=a[1]+"px",this.animateZen.style.width=b+"px",this.animateZen.style.height=c+"px",this.animateZen.style.display="block"},setAceThemeBackground:function(){var a=document.getElementsByClassName("ace_editor")[0];if(!a)return;var b=a.getAttribute("class").split(" ");for(var c=0;c<b.length;c++)if(b[c].indexOf("ace-")===0){var d="."+b[c]+" .ace_scroller",e=apf.getStyleRule(d,"background-color");e||(e=apf.getStyleRule(".ace_scroller","background-color")),a.style.backgroundColor=e;break}},placeTabIntoAnimationWindow:function(){var a=[],b=apf.getArrayFromNodelist(tabEditors.parentNode.$ext.getElementsByTagName("iframe"));for(var c=0;c<b.length;c++)a[c]=[b[c].parentNode,b[c].nextSibling,document.adoptNode(b[c])];this.animateZen.appendChild(tabEditors.parentNode.$ext);for(var c=a.length-1;c>=0;c--)a[c][0].insertBefore(a[c][2],a[c][1]);tabEditors.parentNode.$ext.style.width="100%",tabEditors.parentNode.$ext.style.height="100%",tabEditors.parentNode.$ext.style.position="relative",tabEditors.parentNode.$ext.style.left="0px",tabEditors.parentNode.$ext.style.top="0px"},fadeZenButtonIn:function(){apf.tween.single(btnZenFullscreen,{type:"opacity",anim:apf.tween.easeInOutCubic,from:.01,to:1,steps:8,interval:20,control:this.control={},onfinish:function(){}})},fadeZenButtonOut:function(){self.btnZenFullscreen&&apf.tween.single(btnZenFullscreen,{type:"opacity",anim:apf.tween.easeInOutCubic,from:1,to:.01,steps:8,interval:20,control:this.control={},onfinish:function(){}})},enable:function(){btnZenFullscreen.show(),this.nodes.each(function(a){a.enable()})},disable:function(){this.isFocused&&this.escapeFromZenMode(!1,!1),btnZenFullscreen.hide(),this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/language/complete",["require","exports","module","ext/editors/editors","ace/lib/dom"],function(a,b,c){function h(a,b){var c=[];for(var d=b-1;d>=0;d--)if(g.test(a[d]))c.push(a[d]);else break;return c.reverse().join("")}function i(a,b,c){var d=a.getCursorPosition(),e=a.getSession().getLine(d.row),f=a.getSession().getDocument();c.indexOf("^^")===-1&&(c+="^^");for(var g=0;g<e.length&&(e[g]===" "||e[g]==="\t");)g++;var h=e.substring(0,g),i=c.split("\n").join("\n"+h),j=i.split("\n"),k;for(var l=0;l<j.length;l++){k=j[l].indexOf("^^");if(k!==-1)break}i=i.replace("^^",""),f.removeInLine(d.row,d.column-b.length,d.column),f.insert({row:d.row,column:d.column-b.length},i),a.moveCursorTo(d.row+l,d.column+k-b.length)}var d=a("ext/editors/editors"),e=a("ace/lib/dom"),f,g=/[a-zA-Z_0-9\$]/;c.exports={hook:function(a,b){var c=this;b.on("complete",function(a){c.onComplete(a)})},showCompletionBox:function(a,b){var c=this;this.editor=d.currentEditor;var g=this.editor.ceEditor.$editor;this.selectedIdx=0,this.scrollIdx=0,this.matchEls=[],this.prefix=b,this.matches=a,this.completionElement=txtCompleter.$ext,this.cursorConfig=g.renderer.$cursorLayer.config;var h=e.computedStyle(this.editor.ceEditor.$ext);this.completionElement.style.fontSize=h.fontSize,barCompleterCont.setAttribute("visible",!0),f=g.keyBinding.onCommandKey,g.keyBinding.onCommandKey=this.onKeyPress.bind(this),this.populateCompletionBox(a),document.addEventListener("click",this.closeCompletionBox),g.container.addEventListener("DOMMouseScroll",this.closeCompletionBox),g.container.addEventListener("mousewheel",this.closeCompletionBox),apf.popup.setContent("completionBox",barCompleterCont.$ext);var i=5+Math.min(10*this.cursorConfig.lineHeight,this.matches.length*(this.cursorConfig.lineHeight+1)),j=g.renderer.$cursorLayer,k=j.getPixelPosition(!0),l=g.container.offsetHeight-k.top;l<i&&g.centerSelection(),setTimeout(function(){apf.popup.show("completionBox",{x:b.length*-c.cursorConfig.characterWidth-11,y:c.cursorConfig.lineHeight,animate:!1,ref:j.cursor,callback:function(){barCompleterCont.setHeight(i),sbCompleter.$resize(),c.completionElement.scrollTop=0}})},0)},closeCompletionBox:function(a,b){var c=d.currentEditor.ceEditor.$editor;b||(barCompleterCont.$ext.style.display="none"),document.removeEventListener("click",this.closeCompletionBox),c.container.removeEventListener("DOMMouseScroll",this.closeCompletionBox),c.container.removeEventListener("mousewheel",this.closeCompletionBox),c.keyBinding.onCommandKey=f},populateCompletionBox:function(a){var b=this;b.completionElement.innerHTML="",a.forEach(function(a,c){var f=e.createElement("div");f.className=c===b.selectedIdx?"cc_complete_option_selected":"cc_complete_option",f.innerHTML="<u>"+b.prefix+"</u>"+a.name.substring(b.prefix.length),a.meta&&(f.innerHTML+='<span class="meta">'+a.meta+"</score>"),f.addEventListener("click",function(){var c=d.currentEditor.ceEditor.$editor;i(c,b.prefix,a.replaceText),c.focus()}),b.completionElement.appendChild(f),b.matchEls.push(f)})},onKeyPress:function(a,b,c){var e=this;c===9&&!a.shiftKey?c=40:c===9&&a.shiftKey&&(c=38);var g=d.currentEditor.ceEditor.$editor.keyBinding;switch(c){case 0:break;case 32:this.closeCompletionBox();break;case 27:this.closeCompletionBox(),a.preventDefault();break;case 8:f.apply(g,arguments),setTimeout(function(){e.closeCompletionBox(null,!0),e.invoke(!0)},100),a.preventDefault();break;case 37:case 39:f.apply(g,arguments),this.closeCompletionBox(),a.preventDefault();break;case 13:var h=d.currentEditor.ceEditor.$editor;i(h,this.prefix,this.matches[this.selectedIdx].replaceText),this.closeCompletionBox(),a.preventDefault();break;case 40:this.matchEls[this.selectedIdx].className="cc_complete_option",this.selectedIdx<this.matches.length-1&&this.selectedIdx++,this.matchEls[this.selectedIdx].className="cc_complete_option_selected",this.selectedIdx-this.scrollIdx>4&&(this.scrollIdx++,this.matchEls[this.scrollIdx].scrollIntoView(!0)),a.stopPropagation(),a.preventDefault();break;case 38:this.matchEls[this.selectedIdx].className="cc_complete_option",this.selectedIdx>0&&this.selectedIdx--,this.matchEls[this.selectedIdx].className="cc_complete_option_selected",this.selectedIdx<this.matches.length-4&&this.scrollIdx>0&&(this.scrollIdx=this.selectedIdx-4,this.matchEls[this.scrollIdx].scrollIntoView(!0)),a.stopPropagation(),a.preventDefault();break;default:setTimeout(function(){e.closeCompletionBox(null,!0),e.invoke(!0)})}},setWorker:function(a){this.worker=a},invoke:function(a){var b=d.currentEditor.ceEditor.$editor;this.forceBox=a;var c=this.worker;setTimeout(function(){c.emit("complete",{data:b.getCursorPosition()})})},onComplete:function(a){var b=d.currentEditor.ceEditor.$editor,c=b.getCursorPosition(),e=b.getSession().getLine(c.row),f=h(e,c.column),g=a.data;g.length===1&&!this.forceBox?i(b,f,g[0].replaceText):g.length>0?this.showCompletionBox(g,f):typeof barCompleterCont!="undefined"&&(barCompleterCont.$ext.style.display="none")}}}),define("ext/vim/keyboard",["require","exports","module","ace/keyboard/state_handler","ext/vim/commands","ext/editors/editors"],function(a,b,c){"use strict";var d=a("ace/keyboard/state_handler").StateHandler,e=a("ext/vim/commands"),f=a("ext/editors/editors"),g=function(a,b,c,d,g){var h=b===0||(b===1||b===4)&&c.length===1;if(h){g&&(g=String.fromCharCode(parseInt(g.replace("U+","0x"))));var i=f.currentEditor.ceEditor.$editor;i.commands.addCommand({name:"builder",exec:function(a){e.inputBuffer.push.call(e.inputBuffer,a,d,g)}})}return h},h=function(){return e.inputBuffer.idle?!0:!1},i=b.states={start:[{key:"esc",exec:"stop",then:"start"},{regex:"^i$",match:h,exec:"start",then:"insertMode"},{regex:"^shift-i$",match:h,exec:"startBeginning",then:"insertMode"},{regex:"^a$",match:h,exec:"append",then:"insertMode"},{regex:"^shift-a$",match:h,exec:"appendEnd",then:"insertMode"},{match:g,exec:"builder"}],insertMode:[{key:"esc",exec:"stop",then:"start"},{key:"backspace",exec:"backspace"}]};b.handler=new d(i)}),define("ext/vim/vim",["require","exports","module","core/ide","core/ext","ext/editors/editors","ext/code/code","ext/vim/keyboard","ext/vim/commands","ext/vim/cli","ext/settings/settings","text!ext/vim/settings.xml","ext/vim/maps/util","ext/settings/settings"],function(a,b,c){"use strict";var d=a("core/ide"),e=a("core/ext"),f=a("ext/editors/editors"),g=a("ext/code/code"),h=a("ext/vim/keyboard").handler,i=a("ext/vim/commands"),j=i.commands,k=a("ext/vim/cli"),l=a("ext/settings/settings"),m=a("text!ext/vim/settings.xml"),n=a("ext/vim/maps/util"),o=!1,p,q=function(b){var c=b.data.command;c&&typeof c=="string"&&(c[0]===":"?(c=c.substr(1),k[c]?k[c](ceEditor.$editor,b.data):c.match(/^\d+$/)?(ceEditor.$editor.gotoLine(parseInt(c,10),0),ceEditor.$editor.navigateLineStart()):console.log("Vim command '"+c+"' not implemented."),ceEditor.focus(),b.returnValue=!1):c[0]==="/"&&(c=c.substr(1),i.searchStore.current=c,ceEditor.$editor.find(c,i.searchStore.options),ceEditor.focus(),b.returnValue=!1))},r=function(b,c){Object.keys(c).forEach(function(a){var d=c[a];"function"==typeof d&&(d={exec:d}),d.name||(d.name=a),b.commands.addCommand(d)})},s=function(b,c){Object.keys(c).forEach(function(a){b.commands.removeCommand(c[a])})},t=function(){i.onCursorMove(),t.scheduled=!1},u=function(){e.initExtension(this);var b=ceEditor.$editor;r(b,j),b.renderer.container.addEventListener("click",t,!1),p=p||b.getKeyboardHandler(),b.setKeyboardHandler(h),j.stop.exec(b),o=!0,d.dispatchEvent("track_action",{type:"vim",action:"enable",mode:n.currentMode})},v=function(){var a=ceEditor.$editor;s(a,j),a.setKeyboardHandler(p),j.start.exec(a),a.renderer.container.removeEventListener("click",t,!1),o=!1,d.dispatchEvent("track_action",{type:"vim",action:"disable"})};c.exports=e.register("ext/vim/vim",{name:"Vim mode",dev:"Ajax.org",type:e.GENERAL,deps:[f,g,l],nodes:[],alone:!0,hook:function(){var b=this,c=new apf.item({caption:"Vim mode",type:"check",checked:"[{require('ext/settings/settings').model}::editors/code/@vimmode]",onclick:function(){b.toggle()}});d.addEventListener("init.ext/statusbar/statusbar",function(a){a.ext.addToolsItem(c.cloneNode(!0),0)}),a("ext/settings/settings").addSettings("Code Editor",m);var e=function(){l.model&&(o=apf.isTrue(l.model.queryNode("editors/code").getAttribute("vimmode"))),b.enable(o===!0)};d.addEventListener("init.ext/code/code",e),d.addEventListener("code.ext:defaultbindingsrestored",e)},toggle:function(a){this.enable(o===!1),typeof ceEditor!="undefined"&&ceEditor.focus()},init:function(){txtConsoleInput.addEventListener("keydown",function(a){a.keyCode===27&&typeof ceEditor!="undefined"&&ceEditor.focus()})},enable:function(a){a!==!1?(d.removeEventListener("consolecommand",q),d.addEventListener("consolecommand",q),u.call(this)):this.disable()},disable:function(){d.removeEventListener("consolecommand",q),v()},destroy:function(){this.nodes.forEach(function(a){a.destroy()}),this.nodes=[]}})}),define("ext/colorpicker/colorpicker",["require","exports","module","core/ide","core/ext","ext/editors/editors","ace/range","ext/colorpicker/colorpicker_regex","text!ext/colorpicker/colorpicker.css","text!ext/colorpicker/colorpicker.xml","text!ext/colorpicker/skin.xml"],function(a,b,c){function o(a,b,c,d){if(b){var e=c,f=d.length,h,i=!1;while((h=e.indexOf(d))!=-1)e=e.substr(h+f),h<=b&&h+f>=b&&(i=!0,b=h);if(!i)return null}return b=c.indexOf(d),g.fromPoints({row:a,column:b},{row:a,column:b+d.length})}var d=a("core/ide"),e=a("core/ext"),f=a("ext/editors/editors"),g=a("ace/range").Range,h,i={},j=a("ext/colorpicker/colorpicker_regex"),k=apf.color.colorshex,l=a("text!ext/colorpicker/colorpicker.css"),m=a("text!ext/colorpicker/colorpicker.xml"),n=a("text!ext/colorpicker/skin.xml");c.exports=e.register("ext/colorpicker/colorpicker",{dev:"Ajax.org",name:"Colorpicker Code Tool",alone:!0,type:e.GENERAL,skin:n,nodes:[],init:function(){apf.document.documentElement.insertMarkup(m),this.menu=mnuColorPicker,this.colorpicker=clrCodeTools;var a=this.menu.$ext.getElementsByTagName("div"),b=this;for(var c=0,e=a.length;c<e;++c)a[c].className.indexOf("arrow")>-1?this.arrow=a[c]:a[c].className.indexOf("codetools_colorpicker_tools")>-1&&(this.colortools=a[c]);apf.addListener(this.colortools,"mousemove",function(a){var c=a.srcElement||a.target||a.element;if(!c||c.nodeType!=1||c.className.indexOf("color")==-1)return;var d,e=b.colortools.getElementsByTagName("span");for(var f=0,g=e.length;f<g;++f)d=e[f].className,e[f]!==c?apf.setStyleClass(e[f],null,["color_hover"]):d.indexOf("color_hover")===-1&&e[f]===c&&apf.setStyleClass(e[f],"color_hover",[])}),apf.addListener(this.colortools,"mousedown",function(a){var c=a.srcElement||a.target||a.element;if(c.nodeType!=1||c.className.indexOf("color")==-1)return;var d=apf.color,e=b.colorpicker,f=d.hexToHSB(d.fixHex(c.getAttribute("data-color"),!0));e.setAttribute("hue",f.h),e.setAttribute("saturation",f.s),e.setAttribute("brightness",f.b)}),this.colorpicker.addEventListener("prop.hex",function(a){b.onColorPicked(a.oldvalue,a.value)}),this.menu.addEventListener("prop.visible",function(a){if(!a.value){var c=b.$activeColor;c&&(apf.removeEventListener("keydown",c.listeners.onKeyDown),c.editor.removeEventListener("mousewheel",c.listeners.onScroll),d.removeEventListener("codetools.cursorchange",c.listeners.onCursorChange),d.removeEventListener("codetools.selectionchange",c.listeners.onSelectionChange),delete b.$activeColor,b.hideColorTooltips(c.editor),b.colorpicker.$input.blur(),c.editor.focus())}})},hook:function(){function a(a,b){var c=b.match(j.isColor);if(!c||!c.length)return[];var d,e,f=a.column;for(var g=0,h=c.length;g<h;++g){d=b.indexOf(c[g]),e=d+c[g].length;if(f>=d&&f<=e)return[c,c[g]]}return[c]}function e(){b.menu&&b.menu.visible?b.menu.hide():b.hideColorTooltips()}apf.importCssString(l||"");var b=this,c;d.addEventListener("codetools.columnchange",function(d){clearTimeout(c);var e=d.doc,f=d.pos,g=d.editor,h=e.getLine(1);if(!(d.amlEditor.syntax=="css"||d.amlEditor.syntax=="svg"||d.amlEditor.syntax=="html"||h&&h.indexOf("<a:skin")>-1))return;h=e.getLine(f.row);var i=a(f,h);i[0]&&i[0].length?b.showColorTooltip(f,g,h,i[0]):c=setTimeout(function(){b.hideColorTooltips(g)},100)}),d.addEventListener("codetools.codeclick",function(c){var d=c.doc,e=c.pos,f=c.editor,g=d.getLine(1);if(!(c.amlEditor.syntax=="css"||c.amlEditor.syntax=="svg"||c.amlEditor.syntax=="html"||g&&g.indexOf("<a:skin")>-1))return;var h=f.selection.getRange();if(h.start.row!==h.end.row||h.start.column!==h.end.column)return;g=d.getLine(e.row);var i=a(e,g);i[1]?b.toggleColorPicker(e,f,g,i[1]):b.menu&&b.menu.visible&&b.menu.hide()}),d.addEventListener("codetools.codedblclick",function(a){b.hideColorTooltips(a.editor)}),d.addEventListener("beforeeditorswitch",function(){e()}),d.addEventListener("closefile",function(a){var b=tabEditors.getPage();b?a.page.name===b.name&&e():e()})},showColorTooltip:function(a,b,c,d,e){if(this.menu&&this.menu.visible&&!e)return;var f=[];d.forEach(function(d){var g=e||d+(a.row+"")+a.column,h=i[g];if(!h){var j=o(a.row,a.column,c,d);if(!j)return;h=b.session.addMarker(j,"codetools_colorpicker",function(b,c,f,g,h){b.push("<span class='codetools_colorpicker' style='","left:",f-3,"px;","top:",g-1,"px;","height:",h.lineHeight,"px;","' onclick='require('ext/codetools/codetools').toggleColorPicker({row:",a.row,",column:",a.column,",color:'",d,"'});'",e?" id='"+e+"'":"",">",d,"</span>")},!0),i[g]=[j,h,b.session]}f.push(h)}),this.hideColorTooltips(b,f)},hideColorTooltips:function(a,b){if(this.$activeColor)return;!b&&this.menu&&this.menu.visible&&this.menu.hide(),b&&!apf.isArray(b)&&(b=[b]);var c,d;for(var e in i){c=i[e][1],d=a?a.session:i[e][2];if(b&&b.indexOf(c)>-1)continue;d.removeMarker(c),delete i[e]}},parseColorString:function(a){var b={orig:a};typeof k[a]!="undefined"&&(a=apf.color.fixHex(k[a].toString(16)));var c=a.match(j.isRgb),d=a.match(j.isHsl);return c&&c.length>=3?(b.rgb=apf.color.fixRGB({r:c[1],g:c[2],b:c[3]}),b.hex=apf.color.RGBToHex(c),b.type="rgb"):d&&d.length>=3?(b.hsb=apf.color.fixHSB({h:d[1],s:d[2],b:d[3]}),b.hex=apf.color.HSBToHex(d),b.type="hsb"):(b.hex=apf.color.fixHex(a.replace("#",""),!0),b.type="hex"),b},toggleColorPicker:function(a,b,c,f){e.initExtension(this);var g=this.menu,h=this.colorpicker,j=this.parseColorString(f);if(g.visible&&j.hex==this.$activeColor.color.orig&&a.row==this.$activeColor.row)return g.hide();var k,l,m,n,o=this;apf.addEventListener("keydown",k=function(a){var c=o.$activeColor;if(!h||!c||!h.visible)return;if(a.keyCode===27){g.hide(),clearTimeout(o.$colorPickTimer);var d=b.session.$undoManager;d.undolength>c.start&&d.undo(d.undolength-c.start)}}),d.addEventListener("codetools.cursorchange",m=function(a){var b=o.$activeColor;if(!h||!b||!h.visible)return;var c=a.pos,d=b.marker[0];(c.row<d.start.row||c.row>d.end.row||c.column<d.start.column||c.column>d.end.column)&&g.hide()}),b.addEventListener("mousewheel",l=function(a){var b=o.$activeColor;if(!h||!b||!h.visible)return;g.hide()});var p="colorpicker"+j.hex+a.row;delete this.$activeColor,this.hideColorTooltips(b),this.showColorTooltip(a,b,c,[j.orig],p),g.show(),h.$input.focus(),this.$activeColor={color:j,hex:j.hex,markerNode:p,line:c,current:j.orig,pos:a,marker:i[p],editor:b,ignore:h.value!=f?2:1,start:b.session.$undoManager.undolength,listeners:{onKeyDown:k,onScroll:l,onCursorChange:m,onSelectionChange:n}},j.type=="rgb"?(h.setProperty("red",j.rgb.r),h.setProperty("green",j.rgb.g),h.setProperty("blue",j.rgb.b)):j.type=="hsb"?(h.setProperty("hue",j.hsb.h),h.setProperty("saturation",j.hsb.s),h.setProperty("brightness",j.hsb.b)):h.setProperty("value",j.hex),this.updateColorTools(b),this.resize()},updateColorTools:function(a){var b=a.session.getLines(0,2e3),c,d=[];for(var e=0,f=b.length;e<f;++e){if(!(c=b[e].match(j.isColor)))continue;d=d.concat(c)}d.makeUnique();var g=[],h;for(e=0,f=Math.min(d.length,11);e<f;++e)h=this.parseColorString(d[e]),g.push('<span class="color" style="background-color: #',h.hex,'" data-color="',h.hex,'" title="',h.orig,'">&nbsp;</span>');this.colortools.innerHTML="<span>Existing file colors:</span>"+g.join("")},onColorPicked:function(a,b){var c=this.$activeColor;if(!c)return;if(c.ignore){--c.ignore;return}clearTimeout(this.$colorPickTimer);var d=c.editor.session.doc,e=d.getLine(c.pos.row);if(typeof c.markerNode=="string"){var f=document.getElementById(c.markerNode);if(f)c.markerNode=f;else return}var g,h;if(c.color.type=="hex")h="#"+b;else if(c.color.type=="rgb"){var i=c.current.match(j.isRgb),k=new RegExp("(rgba?)\\(\\s*"+i[1]+"\\s*,\\s*"+i[2]+"\\s*,\\s*"+i[3]+"(\\s*,\\s*(?:1|0|0?\\.[0-9]{1,2})\\s*)?\\)","i");if(!e.match(k))return;var l=apf.color.hexToRGB(b);g=e.replace(k,function(a,b,c){return h=b+"("+l.r+", "+l.g+", "+l.b+(c||"")+")"})}else if(c.color.type=="hsb"){var i=c.current.match(j.isHsl),k=new RegExp("hsl\\(\\s*"+i[1]+"\\s*,\\s*"+i[2]+"\\s*,\\s*"+i[3]+"\\s*\\)","i");if(!e.match(k))return;var m=apf.color.hexToHSB(b);g=e.replace(k,function(){return h="hsl("+parseInt(m.h,10)+", "+parseInt(m.s,10)+"%, "+parseInt(m.b,10)+"%)"})}c.hex=b,c.markerNode.innerHTML=h,this.$colorPickTimer=setTimeout(function(){var a=o(c.pos.row,c.pos.column,e,c.current);if(!a)return;c.marker[0]=a,d.replace(a,h),c.current=h},200)},resize:function(a){if(!this.menu.visible)return;var b=a||this.$activeColor,c=b.pos,d=b.color.orig,e=b.line,g=f.currentEditor.amlEditor.$editor.renderer,i=this.colorpicker,j=this.menu;j.setProperty("class","left");var k=g.textToScreenCoordinates(c.row,e.indexOf(d)-1),l=g.textToScreenCoordinates(c.row,e.indexOf(d)+d.length),m,n,o=n=l.pageY-24,p=m=l.pageX+30,q=apf.getOverflowParent(i.$ext),r=j.$ext.offsetHeight+10,s=j.$ext.offsetWidth+10,t=q==document.documentElement?(apf.isIE?q.offsetHeight:window.innerHeight+window.pageYOffset)+q.scrollTop:q.offsetHeight+q.scrollTop,u=q==document.documentElement?(apf.isIE?q.offsetWidth:window.innerWidth+window.pageXOffset)+q.scrollLeft:q.offsetWidth+q.scrollLeft;o+r>t&&(o=t-r,o<0&&(o=10)),p+s>u&&(p=u-s,l.pageX>p&&l.pageX<p+s&&(p=k.pageX-s-20,j.setProperty("class","right")),p<10&&(j.setProperty("class","noarrow"),k.pageY>r?o=k.pageY-r+10:o=k.pageY+40,p=10)),h||(h=parseInt(apf.getStyle(this.arrow,"top"),10)),o!=n?this.arrow.style.top=h+(n-o)+"px":this.arrow.style.top=h+"px",j.$ext.style.zIndex=10002,j.$ext.style.top=o+"px",j.$ext.style.left=p+"px"},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.menu.visible&&this.menu.hide(),this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/debugger/debugger",["require","exports","module","apf/elements/codeeditor","core/ide","core/ext","ext/editors/editors","ext/dockpanel/dockpanel","ext/filesystem/filesystem","ext/noderunner/noderunner","text!ext/debugger/debugger.xml","ext/debugger/inspector","ext/settings/settings","ext/keybindings/keybindings","ext/debugger/debugger","ext/runpanel/runpanel"],function(a,b,c){a("apf/elements/codeeditor");var d=a("core/ide"),e=a("core/ext"),f=a("ext/editors/editors"),g=a("ext/dockpanel/dockpanel"),h=a("ext/filesystem/filesystem"),i=a("ext/noderunner/noderunner"),j=a("text!ext/debugger/debugger.xml");a("ext/debugger/inspector"),a("ext/settings/settings"),c.exports=e.register("ext/debugger/debugger",{name:"Debug",dev:"Ajax.org",type:e.GENERAL,alone:!0,offline:!1,markup:j,buttonClassName:"debug1",deps:[h,i],commands:{resume:{hint:"resume the current paused process"},stepinto:{hint:"step into the function that is next on the execution stack"},stepover:{hint:"step over the current expression on the execution stack"},stepout:{hint:"step out of the current function scope"}},nodesAll:[],nodes:[],hotitems:{},hook:function(){var a=this;d.addEventListener("consolecommand.debug",function(a){return d.send({command:"internal-isfile",argv:a.data.argv,cwd:a.data.cwd,sender:"debugger"}),!1}),d.addEventListener("loadsettings",function(a){var b=a.model.data.selectSingleNode("//breakpoints");b||(b=a.model.data.ownerDocument.createElement("breakpoints"),a.model.data.appendChild(b)),mdlDbgBreakpoints.load(b)}),stDebugProcessRunning.addEventListener("activate",function(){a.activate()}),stProcessRunning.addEventListener("deactivate",function(){a.deactivate()}),d.addEventListener("afteropenfile",function(a){var b=a.doc,c=a.node;if(!c)return;var e=c.getAttribute("path");c.setAttribute("scriptname",d.workspaceDir+e.slice(d.davPrefix.length))});var b="ext/debugger/debugger";g.addDockable({expanded:-1,width:300,sections:[{height:30,width:150,noflex:!0,draggable:!1,resizable:!1,skin:"dockwin_runbtns",noTab:!0,position:1,buttons:[{id:"btnRunCommands",caption:"Run Commands","class":"btn-runcommands",ext:[b,"pgDebugNav"],draggable:!1,hidden:!0}]},{width:250,height:300,buttons:[{caption:"Call Stack",ext:[b,"dbgCallStack"],hidden:!0}]},{width:250,height:300,buttons:[{caption:"Interactive",ext:[b,"dbInteractive"],hidden:!0},{caption:"Variables",ext:[b,"dbgVariable"],hidden:!0},{caption:"Breakpoints",ext:[b,"dbgBreakpoints"],hidden:!0}]}]}),g.register(b,"pgDebugNav",{menu:"Run Commands",primary:{backgroundImage:d.staticPrefix+"ext/main/style/images/debugicons.png",defaultState:{x:-6,y:-265},activeState:{x:-6,y:-265}}},function(b){return e.initExtension(a),pgDebugNav}),g.register(b,"dbgCallStack",{menu:"Debugger/Call Stack",primary:{backgroundImage:d.staticPrefix+"ext/main/style/images/debugicons.png",defaultState:{x:-8,y:-47},activeState:{x:-8,y:-47}}},function(b){return e.initExtension(a),dbgCallStack}),g.register(b,"dbInteractive",{menu:"Debugger/Interactive",primary:{backgroundImage:d.staticPrefix+"ext/main/style/images/debugicons.png",defaultState:{x:-8,y:-130},activeState:{x:-8,y:-130}}},function(b){return e.initExtension(a),dbInteractive}),g.register(b,"dbgVariable",{menu:"Debugger/Variables",primary:{backgroundImage:d.staticPrefix+"ext/main/style/images/debugicons.png",defaultState:{x:-8,y:-174},activeState:{x:-8,y:-174}}},function(b){return e.initExtension(a),dbgVariable.addEventListener("prop.visible",function(a){a.value&&self.dgVars&&dgVars.reload()}),dbgVariable}),g.register(b,"dbgBreakpoints",{menu:"Debugger/Breakpoints",primary:{backgroundImage:d.staticPrefix+"ext/main/style/images/debugicons.png",defaultState:{x:-8,y:-88},activeState:{x:-8,y:-88}}},function(b){return e.initExtension(a),dbgBreakpoints})},init:function(b){var c=this;this.paths={},mdlDbgSources.addEventListener("afterload",function(){c.$syncTree()}),mdlDbgSources.addEventListener("update",function(a){if(a.action!=="add")return;c.$syncTree()}),h.model.addEventListener("update",function(a){if(a.action!="insert")return;c.$syncTree()}),dbg.addEventListener("changeframe",function(a){a.data&&c.showDebugFile(a.data.getAttribute("scriptid"))}),pgDebugNav.addEventListener("afterrender",function(){c.hotitems.resume=[btnResume],c.hotitems.stepinto=[btnStepInto],c.hotitems.stepover=[btnStepOver],c.hotitems.stepout=[btnStepOut],a("ext/keybindings/keybindings").update(c)}),dbgBreakpoints.addEventListener("afterrender",function(){lstBreakpoints.addEventListener("afterselect",function(a){a.selected&&a.selected.getAttribute("scriptid")&&c.showDebugFile(a.selected.getAttribute("scriptid"),parseInt(a.selected.getAttribute("line"),10)+1)})}),dbgBreakpoints.addEventListener("dbInteractive",function(){lstScripts.addEventListener("afterselect",function(b){b.selected&&a("ext/debugger/debugger").showDebugFile(b.selected.getAttribute("scriptid"))})}),d.addEventListener("afterfilesave",function(a){var b=a.node,c=a.doc,d=b.getAttribute("scriptid");if(!d)return;var e=a.value||c.getValue(),f="(function (exports, require, module, __filename, __dirname) { ",g="\n});";dbg.changeLive(d,f+e+g,!1,function(a){})}),stRunning.addEventListener("prop.active",function(a){a.value&&mdlDbgStack.load("<frames></frames>")})},showDebugFile:function(a,b,c,e){var g=h.model.queryNode("//file[@scriptid='"+a+"']");if(self.ceEditor&&!ceEditor.$updateMarkerPrerequisite())return;if(g)f.jump(g,b,c,e,null,!0);else{var i=mdlDbgSources.queryNode("//file[@scriptid='"+a+"']");if(!i)return;var j=i.getAttribute("scriptname"),k=j.split("/").pop();if(j.indexOf(d.workspaceDir)===0){var l=d.davPrefix+j.slice(d.workspaceDir.length),m=tabEditors.getPage(l);if(m)var n=m.xmlRoot;else var n=apf.n("<file />").attr("name",k).attr("path",l).attr("contenttype","application/javascript").attr("scriptid",i.getAttribute("scriptid")).attr("scriptname",i.getAttribute("scriptname")).attr("lineoffset","0").node();f.jump(n,b,c,e,null,m?!0:!1)}else{var m=tabEditors.getPage(k);if(m)f.jump(m.xmlRoot,b,c,e,null,!0);else{var n=apf.n("<file />").attr("name",k).attr("path",j).attr("contenttype","application/javascript").attr("scriptid",i.getAttribute("scriptid")).attr("scriptname",i.getAttribute("scriptname")).attr("debug","1").attr("lineoffset","0").node();dbg.loadScript(i,function(a){var g=d.createDocument(n,a);f.jump(n,b,c,e,g)})}}}},count:0,$syncTree:function(){if(this.inSync)return;this.inSync=!0;var a=mdlDbgSources.data.childNodes,b=d.workspaceDir;for(var c=0,e=a.length;c<e;c++){var f=a[c],g=f.getAttribute("scriptname");if(g.indexOf(b)!==0)continue;this.paths[g]=f}var i=h.model.data.getElementsByTagName("file"),j=d.getAllPageModels(),k=j.concat(Array.prototype.slice.call(i,0)),l=d.davPrefix;for(var c=0,e=k.length;c<e;c++){var m=k[c],n=m.getAttribute("scriptname"),f=this.paths[n];f&&apf.b(m).attr("scriptid",f.getAttribute("scriptid"))}this.inSync=!1},activate:function(){e.initExtension(this),this.nodes.each(function(a){a.show&&a.show()})},deactivate:function(){this.nodes.each(function(a){a.hide&&a.hide()})},enable:function(){if(!this.disabled)return;this.nodesAll.each(function(a){a.setProperty("disabled",a.$lastDisabled!==undefined?a.$lastDisabled:!0),delete a.$lastDisabled}),this.disabled=!1},disable:function(){if(this.disabled)return;a("ext/runpanel/runpanel").stop(),this.deactivate(),this.nodesAll.each(function(a){a.$lastDisabled||(a.$lastDisabled=a.disabled),a.disable()}),this.disabled=!0},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0),g.unregisterPage(a)}),tabDebug.destroy(!0,!0),this.$layoutItem.destroy(!0,!0),this.nodes=[]}})}),define("ext/debugger/inspector",["require","exports","module","ext/console/console","ext/console/logger","ext/settings/settings"],function(a,b,c){var d=a("ext/console/console"),e=a("ext/console/logger");b.evaluate=function(a,c){var d=this,e=self.dgStack&&dgStack.selected&&dgStack.selected.getAttribute("ref")||null;dbg.evaluate(a,e,null,null,c||b.showObject)},b.checkChange=function(a){var b=a.getAttribute("value");if(a.tagName=="method"||"Boolean|String|undefined|null|Number".indexOf(a.getAttribute("type"))==-1)return!1},b.applyChange=function(a){var c=a.getAttribute("value"),d=b.calcName(a);try{if(d.indexOf(".")>-1){var e,f=self.parent.eval(d.replace(/\.([^\.\s]+)$/,""));if(f&&f.$supportedProperties&&f.$supportedProperties.contains(e=RegExp.$1)){f.setProperty(e,self.parent.eval(c));return}}self.parent.eval(d+" = "+c)}catch(g){trObject.getActionTracker().undo(),alert("Invalid Action: "+g.message)}},b.consoleTextHandler=function(b){if(b.keyCode!=13||!b.ctrlKey)return;var c=this,f=txtCode.getValue().trim();if(!f)return;return d.showOutput(),e.log(f,"command",null,null,!0),this.evaluate(f,function(a,b,c,d){if(d)e.log(d.message,"error");else{var g=b.type,h=b.value||b.text,i=b.handle,j=b.className;if(j=="Function"){var k="<a class='xmlhl' href='javascript:void(0)' style='font-weight:bold;font-size:7pt;color:green' onclick='require(\"ext/debugger/inspector\").showObject(null, ["+b.scriptId+", "+b.line+", "+b.position+", "+b.handle+',"'+(b.name||b.inferredName)+'"], "'+(f||"").split(";").pop().replace(/"/g,"\\&quot;")+"\")'>",l="</a>",m=b.name||b.inferredName||"function";e.log(m+"()","log",k,l,!0)}else if(j=="Array"){var k="<a class='xmlhl' href='javascript:void(0)' style='font-weight:bold;font-size:7pt;color:green' onclick='require(\"ext/debugger/inspector\").showObject(\""+apf.escapeXML(a.xml.replace(/"/g,'\\"'))+'", '+i+', "'+apf.escapeXML((f||"").trim().split(/;|\n/).pop().trim().replace(/"/g,'\\"'))+"\")'>",l=" }</a>";e.log("Array { length: "+(b.properties&&b.properties.length-1),"log",k,l,txtOutput)}else if(g=="object"){var c=[],n=b.properties;for(var o=0,p=b.properties.length;o<p;o++)c.push(n[o].ref);var k="<a class='xmlhl' href='javascript:void(0)' style='font-weight:bold;font-size:7pt;color:green' onclick='require(\"ext/debugger/inspector\").showObject(\""+apf.escapeXML(a.xml.replace(/"/g,'\\"'))+'", '+i+', "'+apf.escapeXML((f||"").trim().split(/;|\n/).pop().trim().replace(/"/g,'\\"'))+"\")'>",l=" }</a>";dbg.$debugger.$debugger.lookup(c,!1,function(a){var b=[j||h,"{"];for(var d,f=0,g=0;g<p;g++){d=a[c[g]];if(d.className=="Function"||d.className=="Object")continue;if(f==5){b.push("more...");break}var i=n[g].name||(n[g].inferredName||"Unknown").split(".").pop();b.push(i+"="+d.value,", "),f++}f&&b.pop(),e.log(b.join(" "),"log",k,l,!0)})}else e.log(h,"log",null,null,!0)}}),a("ext/settings/settings").save(),!1},b.showObject=function(c,d,e){d&&d.dataType==apf.ARRAY?a(["ext/debugger/debugger"],function(a){a.showDebugFile(d[0],d[1]+1,0,d[4])}):a(["ext/quickwatch/quickwatch"],function(a){a.toggleDialog(1),c&&typeof c=="string"&&(c=apf.getXml(c));var f=c&&c.getAttribute("name")||e;txtCurObject.setValue(f),dgWatch.clear("loading"),c?setTimeout(function(){var a=dgWatch.getModel(),b=apf.getXml("<data />");apf.xmldb.appendChild(b,c),a.load(b)},10):d||b.evaluate(e)})};var f=["Object","Number","Boolean","String","Array","Date","RegExp","Function","Object"],g=[null,"Element","Attr","Text","CDataSection","EntityReference","Entity","ProcessingInstruction","Comment","Document","DocumentType","DocumentFragment","Notation"];b.calcName=function(a,b){var c=a.tagName=="method",d,e=a,f=[];do{d=b?e.getAttribute("display")||e.getAttribute("name"):e.getAttribute("name");if(!d)break;var g=function(a){var b=document.createElement("div");return b.innerHTML=a,b.childNodes.length===0?"":b.childNodes[0].nodeValue};d=g(d),f.unshift(d.match(/^[a-z_\$][\w_\$]*$/i)?d:parseInt(d,10)==d?"["+d+"]":'["'+d+'"]'),e=e.parentNode,c&&(e=e.parentNode,c=!1)}while(e&&e.nodeType==1);return f[0]?(f[0].charAt(0)=="["&&(f[0]=f[0].substr(2,f[0].length-4)),f.join(".").replace(/\.\[/g,"[")):""},b.isEditable=function(a){if(!a)return!1;var c=a.getAttribute("type");switch(c){case"string":case"null":case"number":case"boolean":break;default:return!1}return b.calcName(a,!0).indexOf(".")===-1?!1:!0},b.validateNewValue=function(a,b){var c=a.getAttribute("type"),d;switch(c){case"string":case"null":d=/(.*|^$)/;break;case"number":d=/^\d+(\.\d+)?$/;break;case"boolean":d=/^(true|false)$/;break;default:return!1}return d.test(b)},b.setNewValue=function(a,c,d){var e=b.calcName(a,!0),f;switch(a.getAttribute("type")){case"string":case"null":f=e+' = "'+c.replace(/"/g,'\\"')+'"';break;default:f=e+" = "+c}b.evaluate(f,d)}}),define("ext/quickwatch/quickwatch",["require","exports","module","core/ext","ext/editors/editors","ext/noderunner/noderunner","text!ext/quickwatch/quickwatch.xml","ext/debugger/inspector","ext/debugger/inspector"],function(a,b,c){var d=a("core/ext"),e=a("ext/editors/editors"),f=a("ext/noderunner/noderunner"),g=a("text!ext/quickwatch/quickwatch.xml");c.exports=d.register("ext/quickwatch/quickwatch",{name:"quickwatch",dev:"Ajax.org",type:d.GENERAL,alone:!0,markup:g,deps:[f],commands:{quickwatch:{hint:"quickly inspect the variable that is under the cursor"}},hotitems:{},nodes:[],hook:function(){},init:function(b){txtCurObject.addEventListener("keydown",function(b){if(b.keyCode==13){if(!this.value.trim())return dgWatch.clear();a("ext/debugger/inspector").evaluate(this.value)}else if(b.keyCode==40&&dgWatch.length){var c=dgWatch.getFirstTraverseNode();c&&(dgWatch.select(c),dgWatch.focus())}});var c=[38,40,36,35];dgWatch.addEventListener("keydown",function(a){a.keyCode==38?this.selected==this.getFirstTraverseNode()&&txtCurObject.focus():c.indexOf(a.keyCode)==-1&&txtCurObject.focus()},!0)},toggleDialog:function(b,c){d.initExtension(this);if(!winQuickWatch.visible||b==1){var f=e.currentEditor,g,h=f.getSelection(),i=f.getDocument();if(h.isEmpty()){var j=h.getCursor();g=i.getWordRange(j.row,j.column)}else g=h.getRange();var k=i.getTextRange(g);k&&(txtCurObject.setValue(k),c&&(a("ext/debugger/inspector").evaluate(k),txtCurObject.focus())),winQuickWatch.show()}else winQuickWatch.hide();return!1},quickwatch:function(){this.toggleDialog(1,!0)},enable:function(){this.nodes.each(function(a){a.enable()})},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/language/liveinspect",["require","exports","module","core/ide","ext/debugger/inspector","core/ext","text!ext/language/liveinspect.xml","text!ext/language/liveinspect.skin.xml","ext/debugger/debugger"],function(a,b,c){var d=a("core/ide"),e=a("ext/debugger/inspector"),f=a("core/ext"),g=a("text!ext/language/liveinspect.xml"),h=a("text!ext/language/liveinspect.skin.xml"),i=a("ext/debugger/debugger");c.exports=function(){var a=null,b=null,c=null,j=null,k=function(){b=winLiveInspect.$ext,c=dgLiveInspect.$ext,winLiveInspect.addEventListener("prop.visible",function(a){if(!a.value)return;d.dispatchEvent("track_action",{type:"live inspect code",expression:j||"no expression available yet."})}),d.addEventListener("language.worker",function(a){a.worker.on("inspect",function(a){if(!a||!a.data){winLiveInspect.hide();return}var b=a.data;b&&r(b)})}),d.addEventListener("afteropenfile",function(a){if(a.editor&&a.editor.ceEditor){var b=a.editor.ceEditor;b.$editor.addEventListener("mousemove",o),b.$editor.addEventListener("mousedown",q),b.getSession().getSelection().addEventListener("changeCursor",q)}}),d.addEventListener("init.ext/debugger/debugger",function(){stRunning.addEventListener("prop.active",n),stDebugProcessRunning.addEventListener("prop.active",n),apf.addListener(c,"mouseover",function(){a&&clearTimeout(a)})}),apf.addListener(document,"mousemove",p),apf.addListener(c,"dblclick",m),dgLiveInspect.addEventListener("expand",l),dgLiveInspect.addEventListener("collapse",l)},l=function(){var a=c.querySelectorAll(".row"),d=Object.keys(a).filter(function(a){return!isNaN(a)}).map(function(b){return a[b]}).filter(function(a){return a.offsetHeight>0});if(d&&d.length){var e=d[0].offsetHeight*d.length;e+=b.offsetHeight-b.scrollHeight;var f=c.querySelector(".headings");f&&(e+=f.offsetHeight);var g=window.innerHeight-winLiveInspect.$ext.offsetTop-30;e>g&&(e=g),winLiveInspect.setAttribute("height",e)}},m=function(a){var b=a.target;if(b.tagName==="U"&&b.parentNode.parentNode.childNodes[1]===b.parentNode&&!b.parentNode.hid){var c=dgLiveInspect.selected;!c&&dgLiveInspect.getModel().data.childNodes.length===1&&(c=dgLiveInspect.getModel().data.childNodes[0]);if(!e.isEditable(c))return;if(e.calcName(c,!0).indexOf(".")===-1)return;var d=b.style.display,f=document.createElement("input");f.type="text",f.value=b.innerText,f.style.width="98%",f.style.outline="0",f.style.border="solid 1px gray",f.style.height="13px",f.style["margin-top"]="1px";var g=function(){f.removeEventListener("blur",g);if(!e.validateNewValue(c,this.value))return alert("invalid value for type "+c.getAttribute("type")),!1;this.parentNode.removeChild(this),b.style.display=d,b.innerText=this.value,e.setNewValue(c,this.value,function(a){})};apf.addListener(f,"blur",g),apf.addListener(f,"keydown",function(a){return a.keyCode===27||a.keyCode===13?g.call(this):(a.keyCode===32&&(this.value+=" "),!0)}),b.style.display="none",b.parentNode.appendChild(f),f.focus()}},n=function(){(!!stRunning.active||!stDebugProcessRunning.active)&&winLiveInspect.hide()},o=function(c){a&&clearTimeout(a),!stRunning.active&&stDebugProcessRunning.active&&(a=setTimeout(function(){var a=c.getDocumentPosition();d.dispatchEvent("liveinspect",{row:a.row,col:a.column}),winLiveInspect.hide(),b.style.left=c.pageX+"px",b.style.top=c.pageY+8+"px"},750))},p=function(b){if(!a)return;var c=!1,d=[ceEditor,winLiveInspect];d.filter(function(a){return a.visible}).map(function(a){return a.$ext}).forEach(function(a){var d=apf.getAbsolutePosition(a,document.body),e=d[0],f=d[1];b.pageX>=e&&b.pageX<=e+a.offsetWidth&&b.pageY>=f&&b.pageY<=f+a.offsetHeight&&(c=!0)});if(c)return;winLiveInspect.visible?a=setTimeout(function(){winLiveInspect.hide()},750):clearTimeout(a)},q=function(a){winLiveInspect.hide()},r=function(a){if(winLiveInspect.visible&&a===j)return;var b=s(document.querySelectorAll(".winadv")||{}).filter(function(a){return a.style.display!=="none"&&a.style.visibility!=="hidden"});if(b.length)return;if(mnuCtxEditor&&mnuCtxEditor.visible)return;e.evaluate(a,function(b){var c=apf.getXml("<data />");apf.xmldb.appendChild(c,b),dgLiveInspect.getModel().load(c),dgLiveInspect.selected=null,dgLiveInspect.selection=[],dgLiveInspect.sellength=0,j=a,winLiveInspect.show(),l()})},s=function(a){return Object.keys(a).filter(function(a){return!isNaN(a)}).map(function(b){return a[b]})};return f.register("ext/language/liveinspect",{init:k,name:"Live inspect",dev:"Ajax.org",type:f.GENERAL,alone:!0,markup:g,deps:[i],skin:{id:"inlinedg",data:h}})}()}),define("ext/language/language",["require","exports","module","core/ext","core/ide","ext/code/code","ext/editors/editors","ext/noderunner/noderunner","ace/worker/worker_client","ext/language/complete","ext/language/marker","ext/language/refactor","ext/language/liveinspect","text!ext/language/language.xml","text!ext/language/skin.xml","text!ext/language/language.css","ace/lib/lang","text!ext/language/settings.xml","ext/settings/settings","ext/settings/settings"],function(a,b,c){var d=a("core/ext"),e=a("core/ide"),f=a("ext/code/code"),g=a("ext/editors/editors"),h=a("ext/noderunner/noderunner"),i=a("ace/worker/worker_client").WorkerClient,j=a("ext/language/complete"),k=a("ext/language/marker"),l=a("ext/language/refactor"),m=a("ext/language/liveinspect"),n=a("text!ext/language/language.xml"),o=a("text!ext/language/skin.xml"),p=a("text!ext/language/language.css"),q=a("ace/lib/lang"),r=a("text!ext/language/settings.xml"),s=a("ext/settings/settings");c.exports=d.register("ext/language/language",{name:"Javascript Outline",dev:"Ajax.org",type:d.GENERAL,deps:[g,h,f],nodes:[],alone:!0,markup:n,skin:o,worker:null,enabled:!0,commands:{complete:{hint:"code complete"},renameVar:{hint:"Rename variable"}},hotitems:{},hook:function(){var b=this,c=q.deferredCall(function(){b.setPath()});e.addEventListener("extload",function(){var a=b.worker=new i(["treehugger","ext","ace","c9"],"worker.js","ext/language/worker","LanguageWorker");j.setWorker(a),e.addEventListener("afteropenfile",function(e){if(!e.node)return;if(!g.currentEditor||!g.currentEditor.ceEditor)return;d.initExtension(b);var f=e.node.getAttribute("path");a.call("switchFile",[f,g.currentEditor.ceEditor.syntax,e.doc.getValue()]),e.doc.addEventListener("close",function(){a.emit("documentClose",{data:f})}),c.cancel().schedule(100)}),k.hook(b,a),j.hook(b,a),l.hook(b,a),e.dispatchEvent("language.worker",{worker:a}),e.addEventListener("$event.language.worker",function(b){b({worker:a})})},!0),a("ext/settings/settings").addSettings("Language Support",r)},init:function(){var a=this,b=this.worker;apf.importCssString(p);if(!g.currentEditor||!g.currentEditor.ceEditor)return;this.editor=g.currentEditor.ceEditor.$editor,this.$onCursorChange=this.onCursorChangeDefer.bind(this),this.editor.selection.on("changeCursor",this.$onCursorChange);var c=this.editor.selection;this.setPath(),this.setJSHint(),this.setInstanceHighlight(),this.setUnusedFunctionArgs(),this.setUndeclaredVars(),this.editor.on("changeSession",function(b){setTimeout(function(){a.setPath(),c.removeEventListener("changeCursor",a.$onCursorChange),a.editor.selection.on("changeCursor",a.$onCursorChange),c=a.editor.selection},100)}),this.editor.on("change",function(c){c.range={start:c.data.range.start,end:c.data.range.end},b.emit("change",c),k.onChange(a.editor.session,c)}),e.addEventListener("liveinspect",function(a){b.emit("inspect",{data:{row:a.row,col:a.col}})}),ceEditor.addEventListener("loadmode",function(a){a.name==="ace/mode/javascript"&&(a.mode.createWorker=function(){return null})})},setPath:function(){var a=tabEditors.getPage();if(!a)return;var b=a.getAttribute("id");if(!g.currentEditor.ceEditor||!tabEditors.getPage())return;var b=tabEditors.getPage().getAttribute("id");this.worker.call("switchFile",[b,g.currentEditor.ceEditor.syntax,this.editor.getSession().getValue(),this.editor.getCursorPosition()])},setJSHint:function(){s.model.queryValue("language/@jshint")!="false"?this.worker.call("enableFeature",["jshint"]):this.worker.call("disableFeature",["jshint"]),this.setPath()},setInstanceHighlight:function(){s.model.queryValue("language/@instanceHighlight")!="false"?this.worker.call("enableFeature",["instanceHighlight"]):this.worker.call("disableFeature",["instanceHighlight"]);var a=this.editor.getCursorPosition();a.force=!0,this.worker.emit("cursormove",{data:a})},setUnusedFunctionArgs:function(){s.model.queryValue("language/@unusedFunctionArgs")!="false"?this.worker.call("enableFeature",["unusedFunctionArgs"]):this.worker.call("disableFeature",["unusedFunctionArgs"]),this.setPath()},setUndeclaredVars:function(){s.model.queryValue("language/@undeclaredVars")!="false"?this.worker.call("enableFeature",["undeclaredVars"]):this.worker.call("disableFeature",["undeclaredVars"]),this.setPath()},complete:function(){j.invoke()},registerLanguageHandler:function(a,b){var c=this;e.addEventListener("extload",function(){c.worker.call("register",[a,b])})},onCursorChangeDefer:function(){this.onCursorChangeDeferred||(this.onCursorChangeDeferred=q.deferredCall(this.onCursorChange.bind(this))),this.onCursorChangeDeferred.cancel().schedule(250)},onCursorChange:function(){this.worker.emit("cursormove",{data:this.editor.getCursorPosition()})},enable:function(){},disable:function(){},destroy:function(){}})}),define("ext/codecomplete/codecomplete",["require","exports","module","core/ext","ext/editors/editors","ext/language/language"],function(a,b,c){var d=a("core/ext"),e=a("ext/editors/editors"),f=a("ext/language/language");c.exports=d.register("ext/codecomplete/codecomplete",{name:"Code Complete",dev:"Ajax.org",type:d.GENERAL,deps:[e,f],nodes:[],alone:!0,init:function(){f.registerLanguageHandler("ext/codecomplete/local_completer"),f.registerLanguageHandler("ext/codecomplete/snippet_completer"),f.registerLanguageHandler("ext/codecomplete/open_files_local_completer")},enable:function(){},disable:function(){},destroy:function(){}})}),define("ext/jslanguage/jslanguage",["require","exports","module","core/ext","ext/editors/editors","ext/language/language"],function(a,b,c){var d=a("core/ext"),e=a("ext/editors/editors"),f=a("ext/language/language");c.exports=d.register("ext/jslanguage/jslanguage",{name:"Javascript Language Support",dev:"Ajax.org",type:d.GENERAL,deps:[e,f],nodes:[],alone:!0,init:function(){f.registerLanguageHandler("ext/jslanguage/parse"),f.registerLanguageHandler("ext/jslanguage/scope_analyzer"),f.registerLanguageHandler("ext/jslanguage/narcissus_jshint"),f.registerLanguageHandler("ext/jslanguage/debugger")},enable:function(){},disable:function(){},destroy:function(){}})}),define("ext/revisions/revisions",["require","exports","module","core/ide","core/ext","ext/filesystem/filesystem","ext/save/save","ext/revisions/revisions_util","ext/settings/settings","ace/range","ace/anchor","ace/edit_session","ace/document","ext/code/proxydocument","text!ext/revisions/revisions.xml","text!ext/revisions/skin.xml","ext/stripws/stripws","ext/beautify/beautify","ext/language/language","ext/stripws/stripws","ext/beautify/beautify","ext/language/language"],function(a,b,c){var d=a("core/ide"),e=a("core/ext"),f=a("ext/filesystem/filesystem"),g=a("ext/save/save"),h=a("ext/revisions/revisions_util"),i=a("ext/settings/settings"),j=a("ace/range").Range,k=a("ace/anchor").Anchor,l=a("ace/edit_session").EditSession,m=a("ace/document").Document,n=a("ext/code/proxydocument"),o=a("text!ext/revisions/revisions.xml"),p=a("text!ext/revisions/skin.xml"),q=200;Array.prototype.__reduce=function(a,b){var c,d;if(b!==null)c=b,d=0;else if(this)c=this[0],d=1;else return null;var e=this.length;for(;d<e;d++)c=a(c,this[d]);return c};var r=function(a,b,c,d){a.revAnchors||(a.revAnchors=[]);var e,f=new k(b,d.fromRow,d.fromCol);a.revAnchors.push(f);var g=d.toCol-d.fromCol,h=d.toRow-d.fromRow,i=function(){e&&a.removeMarker(e);var b=f.getPosition(),d={row:f.row+h,column:f.column+g},i=j.fromPoints(b,d);if(i.isEmpty())return;e=a.addMarker(i,"revision_hl_"+c,"background")};i(),f.on("change",i)},s=6e4,t=1e4;c.exports=e.register("ext/revisions/revisions",{name:"Revisions",dev:"Cloud9",alone:!0,type:e.GENERAL,markup:o,deps:[f],offline:!0,nodes:[],skin:p,model:new apf.model,realSession:{},originalContents:{},revisionsData:{},docChangeTimeout:null,allTimestamps:[],allRevisions:{},compactRevisions:{},useCompactList:!0,groupedRevisionIds:[],docChangeListeners:{},toggle:function(){if(!this.panel)return;this.panel.visible?this.hide():this.show()},hook:function(){this.saveInterval=setInterval(this.doAutoSave.bind(this),s),this.$onMessageFn=this.onMessage.bind(this),this.$onOpenFileFn=this.onOpenFile.bind(this),this.$onCloseFileFn=this.onCloseFile.bind(this),this.$onFileSaveFn=this.onFileSave.bind(this),d.addEventListener("afteropenfile",this.$onOpenFileFn),d.addEventListener("socketMessage",this.$onMessageFn),d.addEventListener("afterfilesave",this.$onFileSaveFn),d.addEventListener("closefile",this.$onCloseFileFn),this.defaultUser={email:null};var a=this;(!this.isCollab||d.workspaceId!==".")&&apf.ajax("/api/context/getemail",{method:"get",callback:function(b,c,d){c===200&&b&&(a.defaultUser={email:b})}}),this.$initWorker()},init:function(){var a=this;d.send({command:"revisions",subCommand:"getRevisionHistory",path:a.$getDocPath(),getOriginalContent:!0}),this.panel=ceEditor.parentNode.appendChild(new apf.bar({id:"revisionsPanel",visible:!1,top:2,bottom:0,right:0,width:q,height:"100%","class":"revisionsBar"})),revisionsPanel.appendChild(pgRevisions);var b=new apf.item({caption:"File revisions",type:"check",checked:"[{require('ext/settings/settings').model}::general/@revisionmode]",onclick:function(){a.toggle()}});d.addEventListener("init.ext/settings/settings",function(b){b.ext.getHeading("General").appendChild(new apf.checkbox({"class":"underlined",skin:"checkbox_grey",value:"[general/@revisionmode]",label:"File revisions",onclick:function(){a.toggle()}}))}),d.addEventListener("loadsettings",function(b){var c=b.model.queryValue("general/@revisionmode");apf.isTrue(c)&&a.show()}),d.addEventListener("init.ext/statusbar/statusbar",function(a){a.ext.addToolsItem(b.cloneNode(!0),0)}),d.mnuFile.insertBefore(new apf.divider,d.mnuFile.firstChild),this.nodes.push(this.panel,d.mnuFile.insertBefore(b,d.mnuFile.firstChild)),this.$afterSelectFn=function(b){var c=this.selected;if(!c||this.selection.length>1)return;a.loadRevision(c.getAttribute("id"),"preview")},lstRevisions.addEventListener("afterselect",this.$afterSelectFn),this.$onSwitchFileFn=this.onSwitchFile.bind(this),d.addEventListener("editorswitch",this.$onSwitchFileFn),this.$onAfterSwitchFn=this.onAfterSwitch.bind(this),tabEditors.addEventListener("afterswitch",this.$onAfterSwitchFn),this.$setRevisionListClass()},$initWorker:function(){var a=this.worker=new Worker("/static/ext/revisions/revisions_worker.js");a.onmessage=this.onWorkerMessage.bind(this),a.onerror=function(a){throw console.log("Worker error: "+a.message+"\n"),a}},onOpenFile:function(a){if(!a||!a.doc)return;var b=this,c=a.doc,d=c.$page.name;d&&!this.docChangeListeners[d]&&(this.docChangeListeners[d]=function(a){b.onDocChange.call(b,a,c)}),(c.acedoc||c).addEventListener("change",this.docChangeListeners[d]),e.initExtension(this)},onSwitchFile:function(a){var b=this;d.send({command:"revisions",subCommand:"getRevisionHistory",path:b.$getDocPath(a.nextPage),getOriginalContent:!0})},onAfterSwitch:function(a){this.hide()},onCloseFile:function(a){var b=this.$getDocPath();this.originalContents[b]&&delete this.originalContents[b];var b=a.page.name;b&&this.docChangeListeners[b]&&delete this.docChangeListeners[b]},onDocChange:function(a,b){if(a.data&&a.data.delta){var c=a.data.delta.suffix,d=this.getUser(c,b);c&&d&&this.addUserToDocChangeList(d,b)}var e=this;clearTimeout(this.docChangeTimeout),this.docChangeTimeout=setTimeout(function(){b.$page&&e.save(b.$page)},t)},onWorkerMessage:function(a){if(!a.data.type)return;switch(a.data.type){case"apply":this.applyRevision(a.data.content.id,a.data.content.value);break;case"preview":var b=a.data.content;this.previewRevision(b.id,b.value,b.ranges);break;case"newRevision":var c={command:"revisions",subCommand:"saveRevision",path:this.$getDocPath(),revision:a.data.revision};d.send(c);break;case"debug":console.log("WORKER DEBUG\n",a.data.content)}},onMessage:function(a){var b=a.message;if(b.type!=="revision")return;switch(b.subtype){case"getRevisionHistory":b.originalContent&&(this.originalContents[b.path]=b.originalContent),this.buildRevisionsList(b.body),this.populateModel(),this.$rescanCompactNodes();break;case"getOriginalContent":var c=this.getRevision(b.id);if(!c)return;this.originalContents[b.path]=b.body;if(!b.nextAction)return;var d,e=this,f=this.groupedRevisionIds.length;if(this.useCompactList&&f>0){var g={};for(var h=0;h<f;h++){var i=this.groupedRevisionIds[h];if(i.indexOf(parseInt(b.id,10))!==-1){i.forEach(function(a){g[a]=e.getRevision.call(e,a)});break}}var j=Object.keys(g).map(function(a){return parseInt(a,10)}).sort(function(a,b){return a-b});if(j.length>1){d={id:b.id,group:g,groupKeys:j,type:b.nextAction,data:this.getRevision(j[0]),content:b.body},this.worker.postMessage(d);break}}var k={};k[b.id]=c,d={id:b.id,group:k,groupKeys:[parseInt(b.id,10)],type:b.nextAction,data:c,content:b.body},this.worker.postMessage(d)}},onFileSave:function(a){this.saveRevision(a.doc,a.silentsave)},buildRevisionsList:function(a){this.allRevisions={},this.compactRevisions={},this.allTimestamps=a.revisions.map(function(a){return this.allRevisions[a.ts]=a,a.ts},this).sort(function(a,b){return a-b}),this.generateCompactList()},generateCompactList:function(){this.compactRevisions=this.getCompactRevisions(),this.compactTimestamps=Object.keys(this.compactRevisions).map(function(a){return parseInt(a,10)}).sort(function(a,b){return a-b})},toggleListView:function(){this.useCompactList=!this.useCompactList,this.$setRevisionListClass()},populateModel:function(){var a=this.allRevisions,b=this.allTimestamps,c="";for(var d=b.length-1;d>=0;d--){var e=b[d],f=a[e],g=h.localDate(e).toString("MMM d, h:mm tt"),i=f.restoring||"";c+="<revision id='"+f.ts+"' "+"name='"+g+"' "+"silentsave='"+f.silentsave+"' "+"restoring='"+i+"'>";var j=f.contributors.map(function(a){return"<contributor email='"+a+"' />"}).join("");c+="<contributors>"+j+"</contributors></revision>"}this.model.load("<revisions>"+c+"</revisions>")},isCollab:function(a){return!1},getRevision:function(a,b){a=parseInt(a,10);var c=this.allTimestamps.slice(0),d=c.indexOf(a);if(d!==-1){var e={content:b,id:a,revision:d,ts:c,tsValues:{}};for(var f=0,g=c.length;f<g;f++)e.tsValues[c[f]]=this.allRevisions[c[f]].patch;return e}},loadRevision:function(a,b){b==="preview"?this.$setRevisionNodeAttribute(a,"loading_preview","true"):this.$setRevisionNodeAttribute(a,"loading","true");var c=this.$getDocPath();if(this.originalContents[c])return this.onMessage({message:{id:a,type:"revision",subtype:"getOriginalContent",nextAction:b,body:this.originalContents[c]}});d.send({command:"revisions",subCommand:"getOriginalContent",nextAction:b,path:c,id:a})},getCompactRevisions:function(){var a=this.allTimestamps.slice(0);if(!this.allRevisions||a.length===0)return{};var b=this.allRevisions,c={},d=[],e=function(a){return b[a]&&b[a].restoring},f=function(a,b){var c=a[a.length-1];return c.length===0||!e(b)&&!e(c[0])?c.push(b):a.push([b]),a};return h.compactRevisions(a).forEach(function(a){d.push.apply(d,a.__reduce(f,[[]]))}),this.groupedRevisionIds=d,d.forEach(function(a){var e=a[a.length-1],f=d[e]={first:a[0],patch:[]};Object.keys(b[e]).forEach(function(a){a!=="patch"&&(f[a]=b[e][a])});var g=[];a.forEach(function(a){b[a]&&(f.patch.push(b[a].patch),b[a].contributors&&b[a].contributors.forEach(function(a){g.indexOf(a)===-1&&g.push(a)}))}),f.contributors=g,c[e]=f}),c},applyRevision:function(a,b){var c=tabEditors.getPage().$doc;c.setValue(b),this.$setRevisionNodeAttribute(a,"loading","false"),this.saveRevision(c,!0,a),this.hide()},previewRevision:function(a,b,c){var d=ceEditor.$editor,e=d.getSession(),f=this.$getDocPath();e.previewRevision!==!0&&!this.realSession[f]&&(this.realSession[f]=e);var g=new n(new m(b||"")),h=new l(g,this.realSession[f].getMode());h.previewRevision=!0,d.setSession(h),d.setReadOnly(!0);var i=0;c.length>0&&(i=c[0][0]),c.forEach(function(a){r(h,g,a[4],{fromRow:a[0],fromCol:a[1],toRow:a[2],toCol:a[3]})}),d.renderer.scrollToRow(i-d.$getVisibleRowCount()/2),d.selection.clearSelection(),this.$setRevisionNodeAttribute(a,"loading_preview","false")},goToEditView:function(){if(typeof ceEditor=="undefined")return;var a=this.realSession[this.$getDocPath()];a&&(ceEditor.$editor.setSession(a),ceEditor.$editor.setReadOnly(!1),ceEditor.show())},doAutoSave:function(){if(!tabEditors)return;tabEditors.getPages().forEach(this.save,this)},save:function(a){if(!a||!a.$at)a=tabEditors.getPage();if(!a||!this.$pageHasChanged(a))return;e.initExtension(this);var b=a.$doc.getNode();if(b.getAttribute("newfile")||b.getAttribute("debug"))return;g.quicksave(a,function(){},!0)},saveRevision:function(a,b,c){var e=a.$page,f=this.$getDocPath(e),g=this.$getEditingUsers(f);g.length===0&&this.defaultUser.email&&g.push(this.defaultUser.email);var h={command:"revisions",subCommand:"saveRevisionFromMsg",path:f,silentsave:!!b,restoring:c,contributors:g};if(!this.isCollab(a))return h.type="newRevision",h.lastContent=a.getValue(),h.originalContent=this.originalContents[f],h.revisions=this.allRevisions,h.timestamps=this.allTimestamps,this.worker.postMessage(h);d.send(h),this.$resetEditingUsers(f)},addUserToDocChangeList:function(a,b){if(a&&b){var c=b.getNode().getAttribute("path"),d=this.revisionsData[c];d&&d.usersChanged.indexOf(a.user.email)===-1&&d.usersChanged.push(a.user.email)}},getUser:function(a,b){return null},getUserColorByEmail:function(a){var b;return b},$getRevisionNode:function(a){return this.model.queryNode("revision[@id='"+a+"']")},$setRevisionNodeAttribute:function(a,b,c){var d=this.model.queryNode("revision[@id='"+a+"']");d&&apf.xmldb.setAttribute(d,b,c)},$pageHasChanged:function(a){var b=a.getModel();return b&&b.data.getAttribute("changed")==="1"},$getDocPath:function(a){!a&&tabEditors&&(a=tabEditors.getPage());var b=a.name.replace(d.davPrefix,"");return b=b.charAt(0)==="/"?b.substr(1):b,b},$getEditingUsers:function(a){var b=[],c=this.revisionsData[a];return c&&c.usersChanged&&(b=c.usersChanged),b},$resetEditingUsers:function(a){return this.revisionsData[a]&&(this.revisionsData[a]=[]),this.revisionsData[a]},$disableEditingFeatures:function(){a("ext/stripws/stripws").disable(),a("ext/beautify/beautify").disable(),a("ext/language/language").disable()},$enableEditingFeatures:function(){a("ext/stripws/stripws").enable(),a("ext/beautify/beautify").enable(),a("ext/language/language").enable()},$setRevisionListClass:function(){this.useCompactList===!0?apf.setStyleClass(lstRevisions.$ext,"compactView"):apf.setStyleClass(lstRevisions.$ext,null,["compactView"])},$rescanCompactNodes:function(){var a=this.compactTimestamps&&this.compactTimestamps.length;if(!a)return;for(var b=0;b<a;b++){var c=this.$getRevisionNode(this.compactTimestamps[b]),d=apf.xmldb.findHtmlNode(c,lstRevisions);apf.setStyleClass(d,"rev-compact")}},show:function(){i.model.setQueryValue("general/@revisionmode",!0),d.dispatchEvent("revisions.visibility",{visibility:"shown",width:q}),ceEditor.$editor.container.style.right="200px",this.panel.show(),this.populateModel(),this.$rescanCompactNodes(),this.$disableEditingFeatures();var a=this.allTimestamps,b=this.compactTimestamps,c;this.useCompactList===!0&&b&&b.length>0?c=b[b.length-1]:a&&a.length>0&&(c=a[a.length-1]);if(c){var e=this.model.queryNode("revision[@id='"+c+"']");e&&lstRevisions.select(e)}},hide:function(){i.model.setQueryValue("general/@revisionmode",!1),ceEditor.$editor.container.style.right="0",this.panel.hide(),this.goToEditView(),d.dispatchEvent("revisions.visibility",{visibility:"hidden"}),this.$enableEditingFeatures()},disableEventListeners:function(){this.$onMessageFn&&d.removeEventListener("socketMessage",this.$onMessageFn),this.$onOpenFileFn&&d.removeEventListener("afteropenfile",this.$onOpenFileFn),this.$onCloseFileFn&&d.removeEventListener("closefile",this.$onCloseFileFn),this.$onFileSaveFn&&d.removeEventListener("afterfilesave",this.$onFileSaveFn),this.$onSwitchFileFn&&d.removeEventListener("editorswitch",this.$onSwitchFileFn),this.$afterSelectFn&&lstRevisions.removeEventListener("afterselect",this.$afterSelectFn)},enableEventListeners:function(){this.$onMessageFn&&(d.removeEventListener("socketMessage",this.$onMessageFn),d.addEventListener("socketMessage",this.$onMessageFn)),this.$onOpenFileFn&&(d.removeEventListener("afteropenfile",this.$onOpenFileFn),d.addEventListener("afteropenfile",this.$onOpenFileFn)),this.$onCloseFileFn&&(d.removeEventListener("closefile",this.$onCloseFileFn),d.addEventListener("closefile",this.$onCloseFileFn)),this.$onFileSaveFn&&(d.removeEventListener("afterfilesave",this.$onFileSaveFn),d.addEventListener("afterfilesave",this.$onFileSaveFn)),this.$onSwitchFileFn&&(d.removeEventListener("editorswitch",this.$onSwitchFileFn),d.addEventListener("editorswitch",this.$onSwitchFileFn)),this.$afterSelectFn&&(lstRevisions.removeEventListener("afterselect",this.$afterSelectFn),lstRevisions.addEventListener("afterselect",this.$afterSelectFn))},enable:function(){this.nodes.each(function(a){a.enable()}),tabEditors.getPages().forEach(function(a){var b=this.docChangeListeners[a.name];b&&(a.$doc.removeEventListener(b),a.$doc.acedoc&&a.$doc.acedoc.removeEventListener(b),(a.$doc.acedoc||a.$doc).addEventListener(b))},this),this.enableEventListeners()},disable:function(){this.hide(),this.nodes.each(function(a){a.disable()}),tabEditors.getPages().forEach(function(a){var b=this.docChangeListeners[a.name];b&&(a.$doc.removeEventListener(b),a.$doc.acedoc&&a.$doc.acedoc.removeEventListener(b))},this),this.disableEventListeners()},destroy:function(){this.saveInterval&&clearInterval(this.saveInterval),this.disableEventListeners(),tabEditors.getPages().forEach(function(a){var b=this.docChangeListeners[a.name];b&&(a.$doc.removeEventListener(b),a.$doc.acedoc&&a.$doc.acedoc.removeEventListener(b))},this),this.worker&&(this.worker.terminate(),this.worker=null),this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/guidedtour/guidedtour",["require","exports","module","core/ext","core/ide","text!ext/guidedtour/skin.xml","text!ext/guidedtour/guidedtour.xml","ext/console/console","ext/zen/zen","ext/dockpanel/dockpanel","ext/panels/panels","core/settings","text!ext/guidedtour/hello-world-script.txt","ext/newresource/newresource","ext/save/save","ext/tree/tree","ext/guidedtour/guidedtour","ext/guidedtour/guidedtour","ext/editors/editors","ext/runpanel/runpanel","ext/runpanel/runpanel","ext/runpanel/runpanel","ext/console/console","ext/tree/tree","ext/console/console","ext/tree/tree","ext/tree/tree","ext/console/console","ext/tree/tree","ext/guidedtour/guidedtour"],function(a,b,c){var d=a("core/ext"),e=a("core/ide"),f=a("text!ext/guidedtour/skin.xml"),g=a("text!ext/guidedtour/guidedtour.xml"),h=a("ext/console/console"),i=a("ext/zen/zen"),j=a("ext/dockpanel/dockpanel"),k=a("ext/panels/panels"),l=a("core/settings"),m=a("text!ext/guidedtour/hello-world-script.txt"),n,o=!1,p=!1,q=!1,r=!1,s=!1,t={initialText:"This guided tour introduces you to some of the ways<br/> Cloud9 IDE makes it easy for you to program faster and smarter.\n\nClick the play button below to be taken on the tour automatically. Or, you can click the forward and backward buttons to navigate on your own. Remember that during the tour, you won't be able to interact with any of the editor's features.",finalText:'Well, that\'s everything! Still have questions? Head on over to <a href="http://support.cloud9ide.com/forums" target="_blank">our documentation site</a>.',steps:[{el:navbar,desc:"This is the project bar. It controls the behavior of the IDE, as well as the presentation of your code.",pos:"right",time:4},{before:function(){},el:apf.document.selectSingleNode('/html[1]/body[1]/a:vbox[1]/a:vbox[1]/a:hbox[1]/a:vbox[1]/button[@caption="Project Files"]'),desc:"This button shows and hides your project files.",pos:"right",time:4},{before:function(){},el:apf.document.selectSingleNode('/html[1]/body[1]/a:vbox[1]/a:vbox[1]/a:hbox[1]/a:vbox[1]/button[@caption="Open Files"]'),desc:"This button shows and hides your open files in a list view.",pos:"right",time:4},{before:function(){},el:apf.document.selectSingleNode('/html[1]/body[1]/a:vbox[1]/a:vbox[1]/a:hbox[1]/a:vbox[1]/button[@caption="Preferences"]'),desc:"Here, you can change the behavior of the editor, manipulate the code beautifier, and change the indentation and width of the editor, among other options.",pos:"right",time:4},{before:function(){},el:"winFilesViewer",desc:"All your project files are listed here. You can rename and delete files, as well as drag in new ones from your computer. You can also right-click to see context options.",pos:"right",time:4},{before:function(){},el:plus_tab_button,desc:"You can use this button to quickly add new files to the editor. We'll simulate pushing that right now.",pos:"left",time:4},{before:function(){o==0&&(o=!0,a("ext/newresource/newresource").newfile())},el:(apf.XPath||apf.runXpath()||apf.XPath).selectNodes("DIV[1]",tabEditors.$ext),desc:"Here's a tabbed arrangement of all your active files, including the new one we just created. You can rearrange the tabs however you like and swap through them with keyboard shortcuts.",pos:"bottom",time:4},{before:function(){tabEditors.getPage().$doc.setValue(m),n||(n=a("ext/save/save"));var b=tabEditors.getPage(),c=b.$model.data;n._saveAsNoUI(b,c.getAttribute("path"),e.davPrefix+"/helloWorld-quideTour.js"),a("ext/tree/tree").refresh()},el:undefined,div:"ceEditor",desc:"We've just typed up a quick code example and saved it as \"helloWorld-quideTour.js.\" We'll work with this file, then delete it when we're done.",pos:"left",time:5},{before:function(){p&&(i.fadeZenButtonOut(),p=!1)},el:undefined,div:"DIV[1]",desc:"The gutter can do more than show line numbers. It also detects and displays warnings and errors in your code. If you're debugging an application, you can also set breakpoints here.",pos:"right",time:5},{before:function(){},el:undefined,div:"barIdeStatus",desc:"This is the status bar. It shows your current line number and column position, and clicking on it lets you modify some visual aspects, like vim mode, line margins, and beautify options.",pos:"left",time:4},{before:function(){p=!0,i.fadeZenButtonIn()},el:undefined,div:undefined,desc:'If you hover over this corner, you can activate "Zen Mode," which is a distraction-free environment. We\'ll simulate pressing that button now.',pos:"left",time:5},{before:function(){var b=a("ext/guidedtour/guidedtour").hlElement;b.style.visibility="hidden",winTourText.hide(),document.getElementsByClassName("tgDialog")[0].style.display="none",i.fadeZenButtonOut(),i.enterIntoZenMode(),setTimeout(function(){i.escapeFromZenMode(),document.getElementsByClassName("tgDialog")[0].style.display="",a("ext/guidedtour/guidedtour").stepForward(),i.fadeZenButtonOut(),b.style.visibility="visible",winTourText.show()},2e3)},time:4,desc:"",skip:!0},{before:function(){},el:apf.document.selectSingleNode("/html[1]/body[1]/a:vbox[1]/a:vbox[1]/a:bar[1]/a:vbox[1]/a:hbox[1]"),desc:"This area down here acts just like a command line for your project in the Cloud9 IDE. You can always type 'help' to get a list of the available commands.",pos:"top",time:5},{before:function(){h.show()},el:(apf.XPath||apf.runXpath()||apf.XPath).selectNodes("DIV[1]",tabConsole.$ext),desc:"After clicking the expand arrows, you'll be able to get to the full console view. Any output from your program&mdash;like console.log() messages or compilation errors&mdash;appears in the Output tab.",pos:"top",time:4},{before:function(){var b=a("ext/editors/editors").currentEditor.ceEditor.getSession();b.setBreakpoints([1])},el:undefined,div:"DIV[1]",desc:"We're ready to test our code, so we've inserted a breakpoint on this line by clicking in the gutter. Before debugging, though, we'll need to set up a debugging scenario.",pos:"right",time:5},{before:function(){k.activate(a("ext/runpanel/runpanel")),q||l.model.setQueryValue("auto/configurations/@debug",!0),setTimeout(function(){lstRunCfg.select(lstRunCfg.$model.queryNode("//config"),null,null,null,!0)})},el:"winRunPanel",desc:"Here's where the fun begins! After clicking Debug, then Run Configurations, you'll be able to create or modify a debug configuration. Every configuration needs a name and a file to run, but you can also pass arguments.",pos:"right",time:5},{before:function(){a("ext/runpanel/runpanel").run(!0);var b=j.layout.$getLastBar();b||j.showBar(j.getBars("ext/debugger/debugger","pgDebugNav")[0])},el:(apf.XPath||apf.runXpath()||apf.XPath).selectNodes("DIV[1]",tabConsole.$ext),desc:"Whoa! A lot of things just happened. First off, the Output tab opened up to show us that our code is running, and currently being debugged.",pos:"top",time:4},{before:function(){},el:function(){return j.layout.$getLastBar()},desc:"Next, when you start debugging, you'll instantly get a new debugging toolbar.",pos:"left",time:4},{before:function(){var a=j.getButtons("ext/debugger/debugger","pgDebugNav")[0];a&&(j.layout.showMenu(a.uniqueId),pgDebugNav.parentNode.parentNode.visible||btnRunCommands.dispatchEvent("mousedown",{}))},el:function(){return pgDebugNav},desc:"In this toolbar, the usual start, stop, and step buttons are at the top, to help control the flow of the debugging.",pos:"left",time:4},{before:function(){var a=j.getButtons("ext/debugger/debugger","dbgVariable")[0];a&&(j.layout.showMenu(a.uniqueId),dbgVariable.parentNode.set(dbgVariable))},el:function(){return dbgVariable},desc:"In this section you can view variables in the debug state.",pos:"left",time:4},{before:function(){var a=j.getButtons("ext/debugger/debugger","dbgCallStack")[0];a&&j.layout.showMenu(a.uniqueId),dbgCallStack.parentNode.set(dbgCallStack)},el:function(){return dbgCallStack},desc:"Here you can see the call stack of the program you are debugging.",pos:"left",time:4},{before:function(){dbgCallStack&&dbgCallStack.parentNode&&dbgCallStack.parentNode.parentNode.hide(),dbg.continueScript(),txtConsoleInput.setValue("git status")},el:(apf.XPath||apf.runXpath()||apf.XPath).selectNodes("DIV[1]",tabConsole.$ext),desc:"We indicated to the debugger that we want to continue. At last, the console.log() message printed out. Now, we're going to simulate typing 'git status' in the command line.",pos:"top",time:4},{before:function(){a(["c9/ext/deploy/deploy"],function(a){s=!0,k.activate(a)})},el:"winDeploy",desc:"In this panel you can manage(add/remove) your deploy targets for your application, in different services, like Joyent and Heroku.",pos:"right",notAvailable:!s,time:5},{before:function(){a("ext/runpanel/runpanel").stop(),trFiles.$model.queryNode("//file[@path='"+e.davPrefix+"/helloWorld-quideTour.js']")&&(a("ext/console/console").commandTextHandler({keyCode:13,currentTarget:txtConsoleInput}),txtConsoleInput.setValue("rm helloWorld-quideTour.js"))},el:(apf.XPath||apf.runXpath()||apf.XPath).selectNodes("DIV[1]",tabConsole.$ext),desc:"As expected, there's been a new file added to git. We're done testing it, and don't want to keep it around, so let's remove it with 'rm helloWorld-quideTour.js'.",pos:"top",time:4},{before:function(){k.activate(a("ext/tree/tree"));var b=trFiles.$model.queryNode("//file[@path='"+e.davPrefix+"/helloWorld-quideTour.js']");b&&!r&&(r=!0,tabEditors.remove(tabEditors.getPage()),a("ext/console/console").commandTextHandler({keyCode:13,currentTarget:txtConsoleInput}),trFiles.confirmed=!0,trFiles.remove(b),trFiles.confirmed=!1,a("ext/tree/tree").refresh())},el:"winFilesViewer",desc:"Voila! Notice that the file is gone from your project.",pos:"right",time:4}]};c.exports=d.register("ext/guidedtour/guidedtour",{name:"Guided Tour",dev:"Cloud9 IDE, Inc.",alone:!0,type:d.GENERAL,markup:g,skin:{id:"guidedtour",data:f,"media-path":"/static/ext/guidedtour/images/"},currentStep:-1,currentEl:null,nodes:[],hook:function(){},init:function(a){this.initTour(),this.tour=t,this.overlay=document.createElement("div"),this.hlElement=document.createElement("div"),this.overlay.setAttribute("style","display:none;position:fixed;left: 0px;top: 0px;width:100%;height:100%;opacity:0.3;background:#000;opacity:0"),document.body.appendChild(this.overlay),this.hlElement.setAttribute("style","z-index:9998;display:none;position:absolute;box-shadow:0px 0px 15px #000;"),document.body.appendChild(this.hlElement),winTourGuide.addEventListener("hide",this.shutdown(this.hlElement)),tourControlsDialog.addEventListener("hide",this.shutdown(this.hlElement))},launchGT:function(){d.initExtension(this),this.hideMenus(),o=p=q=r=!1,this.currentStep=-1,winTourDesc.setValue(this.tour.initialText),winTourGuide.show(),winTourButtonStart.show(),winTourButtonClose.show(),winTourButtonDone.hide()},hideMenus:function(){var a=j.getButtons("ext/debugger/debugger");if(!a)return;for(var b=0,c;b<a.length;b++){c=a[b];if(!c.showMenu||!c.cache)continue;self[c.cache.submenu].hide()}},initTour:function(){this.animateui=l.model.queryValue("general/@animateui"),l.model.setQueryValue("general/@animateui",!1),!self.winFilesViewer&&k.activate(a("ext/tree/tree"));var b=trFiles.$model.queryNode("//file[@path='"+e.davPrefix+"/helloWorld-quideTour.js']");b&&!r&&(txtConsoleInput.setValue("rm helloWorld-quideTour.js"),r=!0,a("ext/console/console").commandTextHandler({keyCode:13,currentTarget:txtConsoleInput}),trFiles.confirmed=!0,trFiles.remove(b),trFiles.confirmed=!1,a("ext/tree/tree").refresh())},togglePlay:function(){this.playing?this.pause():this.play()},play:function(){btnTourPlay.$ext.childNodes[1].style.backgroundPosition="-28px 3px",btnTourPlay.tooltip="Play",this.playing=!0,this.stepForwardAuto()},pause:function(){btnTourPlay.$ext.childNodes[1].style.backgroundPosition="14px 4px",btnTourPlay.tooltip="Pause",this.playing=!1,clearTimeout(this.$timerForward)},end:function(){this.pause(),this.hlElement.style.opacity="0"},startTour:function(){var a=this;this.currentStep=-1,winTourGuide.hide(),tourControlsDialog.show(),this.stepForward(),this.overlay.style="block",l.model.setQueryValue("general/@animateui",!1),apf.removeEventListener("keyup",a.keyUpEvent),apf.addEventListener("keyup",a.keyUpEvent=function(b){b.keyCode==39?a.stepForward():b.keyCode==37&&a.stepBack()})},stepBack:function(){this.currentStep--;var a=this.tour.steps[this.currentStep];if(!a)return;a.skip!==undefined&&(this.currentStep--,a=this.tour.steps[this.currentStep]),this.currentStep===0&&(btnTourStepBack.disable(),btnTourStepBack.$ext.childNodes[1].style.backgroundPosition="20px -21px"),btnTourStepForward.enable(),this.commonStepOps(a)},stepForwardAuto:function(){var a=this,b=this.currentStep>-1?this.tour.steps[this.currentStep].time:0;this.$timerForward=setTimeout(function(){a.stepForward(),a.tour.steps[a.currentStep+1]?a.stepForwardAuto():(a.end(),a.finalStep())},b*1e3)},stepForward:function(){this.currentStep++;if(!this.tour.steps[this.currentStep])this.finalStep();else{this.currentStep>0&&(btnTourStepBack.enable(),btnTourStepBack.$ext.childNodes[1].style.backgroundPosition="20px 5px"),this.currentStep>22&&(btnTourStepBack.disable(),btnTourStepBack.$ext.childNodes[1].style.backgroundPosition="20px -21px");var a=this.tour.steps[this.currentStep];this.commonStepOps(a)}},finalStep:function(){winTourText.close(),tourControlsDialog.hide(),this.closeTG(),this.hlElement.style.display="none",winTourGuide.show(),winTourDesc.setValue(this.tour.finalText),this.currentStep=-1,winTourButtonStart.hide(),winTourButtonClose.hide(),winTourButtonDone.show()},commonStepOps:function(a){function b(){a.el!==undefined?(typeof a.el=="string"&&(a.el=self[a.el]),typeof a.el=="function"&&(a.el=a.el()),c.currentEl=a.el):a.div=="ceEditor"?c.currentEl=ceEditor:a.div=="expandedDbg"?c.currentEl=expandedDbg:a.div=="barIdeStatus"?c.currentEl=barIdeStatus:a.div!==undefined?a.node!==undefined?c.currentEl=(apf.XPath||apf.runXpath()||apf.XPath).selectNodes(a.div,apf.document.selectSingleNode(a.node).$ext):c.currentEl=(apf.XPath||apf.runXpath()||apf.XPath).selectNodes(a.div,ceEditor.$ext):c.currentEl=btnZenFullscreen}var c=this;if(a.notAvailable){this.stepForward();return}a.before&&a.before(),setTimeout(function(){b();if(!c.currentEl)return;c.highlightElement(),textTourDesc.setValue(a.desc),winTourText.setAttribute("bottom",""),winTourText.setAttribute("top",""),winTourText.setAttribute("left",""),winTourText.setAttribute("right","");var d=c.getElementPosition(c.currentEl);if(!d)return;winTourText.setAttribute("class",a.pos),c.setPositions(a.pos,d,winTourText),a.pos&&winTourText.show()})},setPositions:function(a,b,c){return a=="top"?(c.setAttribute("bottom",window.innerHeight-b[1]+25),c.setAttribute("left",b[0]+b[2]/2-c.getWidth()/2)):a=="right"?(c.setAttribute("left",b[0]+b[2]+25),c.setAttribute("top",b[1]+b[3]/2-c.getHeight()/2)):a=="bottom"?(c.setAttribute("top",b[3]+50),c.setAttribute("right",b[0]+b[2]/2-c.getWidth()/2)):a=="left"&&(c.setAttribute("right",window.innerWidth-b[0]+25),c.setAttribute("top",b[1]+b[3]/2-c.getHeight()/2)),c},highlightElement:function(){this.resizeHighlightedEl();var a=this.hlElement.style.zIndex;winTourText.$ext.style.zIndex=a+1,tourControlsDialog.$ext.style.zIndex=a+2},resizeHighlightedEl:function(){var a=this.getElementPosition(this.currentEl);this.hlElement.style.left=a[0]+"px",this.hlElement.style.top=a[1]+"px",this.hlElement.style.width=a[2]-4+"px",this.hlElement.style.height=a[3]-4+"px",this.hlElement.style.display="block",this.hlElement.style.border="solid 2px #bee82c";if(this.currentEl.$ext){var b,c=this.currentEl;if(c)while(c&&c.tagName!="body"&&(!b||b<=9998))b=c.$ext&&c.$ext.style&&parseInt(c.$ext.style.zIndex||9997)+1,c=c.parentNode;else b=9998}else b=this.currentEl.style&&parseInt(this.currentEl.style.zIndex||9997)+1;this.hlElement.style.zIndex=b},getElementPosition:function(a){if(!a)return[0,0,0,0];var b=a.$ext;if(b===undefined){var c=apf.getAbsolutePosition(a[0]);return[c[0],c[1],a[0].offsetWidth,a[0].offsetHeight]}var c=apf.getAbsolutePosition(b),d=a.getWidth(),e=a.getHeight();return[c[0],c[1],d,e]},enable:function(){this.nodes.each(function(a){a.enable()})},closeTG:function(){var a=this;winTourGuide.hide(),apf.removeEventListener("keyup",a.keyUpEvent)},shutdown:function(b){var c=this;return apf.removeEventListener("keyup",c.keyUpEvent),function(){a("ext/guidedtour/guidedtour").pause(),winTourText.hide(),tourControlsDialog.hide(),i.fadeZenButtonOut(),(b||c.hlElement).style.display="none",c.currentStep=-1,c.overlay.style="none",l.model.setQueryValue("general/@animateui",c.animateui)}},disable:function(){this.nodes.each(function(a){a.disable()})},destroy:function(){this.nodes.each(function(a){a.destroy(!0,!0)}),this.nodes=[]}})}),define("ext/quickstart/quickstart",["require","exports","module","core/ext","core/ide","text!ext/quickstart/skin.xml","text!ext/quickstart/quickstart.xml","ext/settings/settings","ext/settings/settings","ext/settings/settings","ext/settings/settings","ext/dockpanel/dockpanel","ext/guidedtour/guidedtour","ext/guidedtour/guidedtour"],function(a,b,c){var d=a("core/ext"),e=a("core/ide"),f=a("text!ext/quickstart/skin.xml"),g=a("text!ext/quickstart/quickstart.xml"),h={identifiers:[{el:apf.document.selectSingleNode('/html[1]/body[1]/a:vbox[1]/a:vbox[1]/a:hbox[1]/a:vbox[1]/button[@caption="Project Files"]'),name:"qsProjectBar",pos:"right"},{el:logobar,name:"qsMenuBar",pos:"bottom"},{el:tabEditors,name:"qsToolbar",pos:"left",visible:function(){return hboxDockPanel.childNodes[0]}},{el:apf.document.selectSingleNode("/html[1]/body[1]/a:vbox[1]/a:vbox[1]/a:bar[1]/a:vbox[1]/a:hbox[1]"),name:"qsCLI",pos:"top"}]};c.exports=d.register("ext/quickstart/quickstart",{name:"Quick Start",dev:"Cloud9 IDE, Inc.",alone:!0,type:d.GENERAL,markup:g,skin:{id:"quickstart",data:f,"media-path":"/static/ext/quickstart/images/"},nodes:[],init:function(a){this.overlay=document.createElement("div"),this.overlay.setAttribute("style","z-index:9016;display:none;position:fixed;left: 0px;top: 0px;width:100%;height:100%;opacity:0.3;background:#000;"),document.body.appendChild(this.overlay)},hook:function(){var b=this;e.addEventListener("loadsettings",function(c){var d=a("ext/settings/settings").model.queryValue("auto/help/@show");if(d===""||d=="true")apf.getcookie("show-quick-start")=="false"?a("ext/settings/settings").model.setQueryValue("auto/help/@show","false"):(a("ext/settings/settings").model.setQueryValue("auto/help/@show","true"),apf.xmldb.setAttribute(a("ext/settings/settings").model.queryNode("auto/help"),"show","true"),b.launchQS())})},launchQS:function(){var a=this;d.initExtension(this),this.hideMenus(),setTimeout(function(){a.overlay.style.display="block",a.arrangeQSImages(),quickStartDialog.show()})},setState:function(a){apf.setcookie("show-quick-start",a,(new Date).getTime()+63072e6)},hideMenus:function(){var b=a("ext/dockpanel/dockpanel").getButtons("ext/debugger/debugger");if(!b)return;for(var c=0,d;c<b.length;c++){d=b[c];if(!d.showMenu||!d.cache)continue;self[d.cache.submenu].hide()}},arrangeQSImages:function(){var b,c,d;for(var e=0;e<h.identifiers.length;e++){if(h.identifiers[e].visible&&!h.identifiers[e].visible())continue;b=a("ext/guidedtour/guidedtour").getElementPosition(h.identifiers[e].el),c=h.identifiers[e].pos,d=apf.document.getElementById(h.identifiers[e].name),d.setAttribute("bottom",""),d.setAttribute("top",""),d.setAttribute("left",""),d.setAttribute("right",""),this.setPositions(c,b,d),d.show()}},setPositions:function(a,b,c){return a=="top"?(c.setAttribute("bottom",window.innerHeight-b[1]+100),c.setAttribute("left",b[0]+b[2]/2-c.getWidth()/2)):a=="right"?(c.setAttribute("left",b[0]+b[2]-2),c.setAttribute("top",b[1]+b[3]/2-c.getHeight()/2)):a=="bottom"?(c.setAttribute("top",b[3]),c.setAttribute("right",b[0]+b[2]/2-c.getWidth()/2)):a=="left"&&(c.setAttribute("top",125),c.setAttribute("right",0)),c},closeStart:function(){quickStartDialog.hide(),this.overlay.style.display="none";var a;for(var b=0;b<h.identifiers.length;b++)a=apf.document.getElementById(h.identifiers[b].name),a.hide()},shutdownQSStartGT:function(){this.closeStart(),a("ext/guidedtour/guidedtour").launchGT()}})});var extAll=define("ext/all",["ext/filesystem/filesystem","ext/settings/settings","ext/editors/editors","ext/themes/themes","ext/themes_default/themes_default","ext/panels/panels","ext/dockpanel/dockpanel","ext/openfiles/openfiles","ext/tree/tree","ext/save/save","ext/recentfiles/recentfiles","ext/gotofile/gotofile","ext/newresource/newresource","ext/undo/undo","ext/clipboard/clipboard","ext/searchinfiles/searchinfiles","ext/searchreplace/searchreplace","ext/quickwatch/quickwatch","ext/quicksearch/quicksearch","ext/gotoline/gotoline","ext/html/html","ext/help/help","ext/code/code","ext/statusbar/statusbar","ext/imgview/imgview","ext/extmgr/extmgr","ext/runpanel/runpanel","ext/debugger/debugger","ext/noderunner/noderunner","ext/console/console","ext/consolehints/consolehints","ext/tabbehaviors/tabbehaviors","ext/tabsessions/tabsessions","ext/keybindings/keybindings","ext/keybindings_default/keybindings_default","ext/watcher/watcher","ext/dragdrop/dragdrop","ext/beautify/beautify","ext/offline/offline","ext/stripws/stripws","ext/testpanel/testpanel","ext/nodeunit/nodeunit","ext/zen/zen","ext/codecomplete/codecomplete","ext/vim/vim","ext/guidedtour/guidedtour","ext/quickstart/quickstart","ext/jslanguage/jslanguage","ext/autotest/autotest","ext/tabsessions/tabsessions","ext/closeconfirmation/closeconfirmation","ext/codetools/codetools","ext/colorpicker/colorpicker","ext/revisions/revisions"])})()